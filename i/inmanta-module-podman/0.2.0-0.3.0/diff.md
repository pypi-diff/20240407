# Comparing `tmp/inmanta_module_podman-0.2.0-py3-none-any.whl.zip` & `tmp/inmanta_module_podman-0.3.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,25 +1,25 @@
-Zip file size: 28700 bytes, number of entries: 23
--rw-r--r--  2.0 unx    10227 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/__init__.py
--rw-r--r--  2.0 unx     2224 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/setup.cfg
--rw-r--r--  2.0 unx        0 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/files/.gitkeep
--rw-r--r--  2.0 unx     7114 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/_init.cf
--rw-r--r--  2.0 unx     1841 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/container.cf
--rw-r--r--  2.0 unx     4727 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/container_like.cf
--rw-r--r--  2.0 unx     2345 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/helpers.cf
--rw-r--r--  2.0 unx     1066 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/network.cf
--rw-r--r--  2.0 unx     2399 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/services/_init.cf
--rw-r--r--  2.0 unx     3906 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/services/systemd_container.cf
--rw-r--r--  2.0 unx     3666 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/services/systemd_pod.cf
--rw-r--r--  2.0 unx     5574 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/model/services/systemd_service.cf
--rw-r--r--  2.0 unx      646 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/__init__.py
--rw-r--r--  2.0 unx     2996 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/abc.py
--rw-r--r--  2.0 unx     8067 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/image.py
--rw-r--r--  2.0 unx     3208 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/image_discovery.py
--rw-r--r--  2.0 unx     8616 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/network.py
--rw-r--r--  2.0 unx     2915 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/resources/network_discovery.py
--rw-r--r--  2.0 unx        0 b- defN 24-Mar-17 11:36 inmanta_plugins/podman/templates/.gitkeep
--rw-r--r--  2.0 unx      506 b- defN 24-Mar-17 11:36 inmanta_module_podman-0.2.0.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-17 11:36 inmanta_module_podman-0.2.0.dist-info/WHEEL
--rw-r--r--  2.0 unx       16 b- defN 24-Mar-17 11:36 inmanta_module_podman-0.2.0.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2259 b- defN 24-Mar-17 11:36 inmanta_module_podman-0.2.0.dist-info/RECORD
-23 files, 74410 bytes uncompressed, 24904 bytes compressed:  66.5%
+Zip file size: 28879 bytes, number of entries: 23
+-rw-r--r--  2.0 unx    10227 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/__init__.py
+-rw-r--r--  2.0 unx     2224 b- defN 24-Apr-07 17:25 inmanta_plugins/podman/setup.cfg
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/files/.gitkeep
+-rw-r--r--  2.0 unx     7114 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/_init.cf
+-rw-r--r--  2.0 unx     1841 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/container.cf
+-rw-r--r--  2.0 unx     4727 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/container_like.cf
+-rw-r--r--  2.0 unx     2345 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/helpers.cf
+-rw-r--r--  2.0 unx     1066 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/network.cf
+-rw-r--r--  2.0 unx     2560 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/services/_init.cf
+-rw-r--r--  2.0 unx     3906 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/services/systemd_container.cf
+-rw-r--r--  2.0 unx     3666 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/services/systemd_pod.cf
+-rw-r--r--  2.0 unx     5620 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/model/services/systemd_service.cf
+-rw-r--r--  2.0 unx      646 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/__init__.py
+-rw-r--r--  2.0 unx     3013 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/abc.py
+-rw-r--r--  2.0 unx     8073 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/image.py
+-rw-r--r--  2.0 unx     3208 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/image_discovery.py
+-rw-r--r--  2.0 unx     8616 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/network.py
+-rw-r--r--  2.0 unx     2915 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/resources/network_discovery.py
+-rw-r--r--  2.0 unx        0 b- defN 24-Apr-07 17:24 inmanta_plugins/podman/templates/.gitkeep
+-rw-r--r--  2.0 unx      821 b- defN 24-Apr-07 17:25 inmanta_module_podman-0.3.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-07 17:25 inmanta_module_podman-0.3.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx       16 b- defN 24-Apr-07 17:25 inmanta_module_podman-0.3.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2259 b- defN 24-Apr-07 17:25 inmanta_module_podman-0.3.0.dist-info/RECORD
+23 files, 74955 bytes uncompressed, 25083 bytes compressed:  66.5%
```

## zipnote {}

```diff
@@ -51,20 +51,20 @@
 
 Filename: inmanta_plugins/podman/resources/network_discovery.py
 Comment: 
 
 Filename: inmanta_plugins/podman/templates/.gitkeep
 Comment: 
 
-Filename: inmanta_module_podman-0.2.0.dist-info/METADATA
+Filename: inmanta_module_podman-0.3.0.dist-info/METADATA
 Comment: 
 
-Filename: inmanta_module_podman-0.2.0.dist-info/WHEEL
+Filename: inmanta_module_podman-0.3.0.dist-info/WHEEL
 Comment: 
 
-Filename: inmanta_module_podman-0.2.0.dist-info/top_level.txt
+Filename: inmanta_module_podman-0.3.0.dist-info/top_level.txt
 Comment: 
 
-Filename: inmanta_module_podman-0.2.0.dist-info/RECORD
+Filename: inmanta_module_podman-0.3.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## inmanta_plugins/podman/setup.cfg

```diff
@@ -1,10 +1,10 @@
 [metadata]
 name = inmanta-module-podman
-version = 0.2.0
+version = 0.3.0
 description = Simple module to manage podman resources
 long_description = file: README.md
 long_description_content_type = text/markdown
 author = Guillaume Everarts de Velp
 author_email = edvgui@gmail.com
 license = ASL 2.0
 copyright = 2023 Guillaume Everarts de Velp
```

## inmanta_plugins/podman/model/services/_init.cf

```diff
@@ -18,24 +18,26 @@
 import podman
 import podman::services::systemd_container
 import podman::services::systemd_pod
 import podman::services::systemd_service
 import files
 
 
-typedef service_state_t as string matching self in ["stopped", "running", "removed"]
+typedef service_state_t as string matching self in ["configured", "stopped", "running", "removed"]
 
 
 entity SystemdService:
     """
     A systemd service is an entity that will be refined into a systemd config file.
     Each container or pod that is part of the service will also have its own systemd
     config file.
 
-    This entity offers some kind of lifecycle which has three states:
+    This entity offers some kind of lifecycle which has following states:
+        - configured: All configuration files should be present, and we don't
+            manage whether the service should be running or not.
         - stopped: That means that all configuration files should be present on
             the host, but the service should not be running.
         - running: Same as stopped, except that the service should be running.
         - removed: All configuration files should be removed.
 
     :attr state: The desired execution state for this service.
     :attr enabled: Whether the systemd service should be enabled.
```

## inmanta_plugins/podman/model/services/systemd_service.cf

```diff
@@ -43,14 +43,16 @@
     # Make sure that the systemd directory exists
     self._systemd_config_dir = std::Directory(
         path=systemd_path,
         mode=755,
         owner=user,
         group=user,
         host=host,
+        send_event=true,
+        reload=true,
         # requires=self.requires,  # We don't need this directory to be created after our requires
         provides=self.provides,  # But we need to make sure it is created before our provides
     )
     self._file_resources += self._systemd_config_dir
 
     # Run systemctl daemon-reload after any config file change
     reload = exec::Run(
@@ -158,8 +160,8 @@
         self.unit.provides += self._symlink
     end
 end
 
 
 implement SystemdService using service_configuration, service_activation
 implement SystemdService using run_service when self.state == "running"
-implement SystemdService using stop_service when self.state != "running"
+implement SystemdService using stop_service when self.state == "stopped"
```

## inmanta_plugins/podman/resources/abc.py

```diff
@@ -47,15 +47,15 @@
 class HandlerABC(typing.Generic[ABC]):
     def run_command(
         self,
         ctx: inmanta.agent.handler.HandlerContext,
         resource: ABC,
         *,
         command: list[str],
-        timeout: int,
+        timeout: typing.Optional[int],
         cwd: typing.Optional[str] = None,
         env: dict[str, str] = {},
         run_as: typing.Optional[str] = None,
     ) -> tuple[str, str, int]:
         """
         Execute a command on the host targeted by the agent, and return the result.
         The returned value is a tuple containing in that order: stdout, stderr, return code.
```

## inmanta_plugins/podman/resources/image.py

```diff
@@ -163,15 +163,15 @@
             cmd.append(resource.context)
 
         # Run the create command on the remote host
         _, stderr, ret = self.run_command(
             ctx,
             resource,
             command=cmd,
-            timeout=5,
+            timeout=None,
         )
 
         # If the command failed, something went wrong
         if ret != 0:
             ctx.error(
                 "%(stderr)s",
                 exit_code=ret,
@@ -239,15 +239,15 @@
             source = f"{source}@{resource.digest}"
 
         # Run the create command on the remote host
         _, stderr, ret = self.run_command(
             ctx,
             resource,
             command=["podman", "image", "pull", source],
-            timeout=5,
+            timeout=None,
         )
 
         # If the command failed, something went wrong
         if ret != 0:
             ctx.error(
                 "%(stderr)s",
                 exit_code=ret,
```

## Comparing `inmanta_module_podman-0.2.0.dist-info/RECORD` & `inmanta_module_podman-0.3.0.dist-info/RECORD`

 * *Files 16% similar despite different names*

```diff
@@ -1,23 +1,23 @@
 inmanta_plugins/podman/__init__.py,sha256=t2IriobufPMo-y4a0zbUYMFM7J9BAgBGUk01uXUa1x8,10227
-inmanta_plugins/podman/setup.cfg,sha256=jf4uuiRfxnnjke9R_fdOxrGTIWuDmy_BePqt1spYR_A,2224
+inmanta_plugins/podman/setup.cfg,sha256=xlTAbz8FOcxUIhXfNefQn6vxNwO24KgKwqJ36CzJK90,2224
 inmanta_plugins/podman/files/.gitkeep,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 inmanta_plugins/podman/model/_init.cf,sha256=fxvbHsAtsFZ0xJ0SSkVcNqDhvjOVi9YDb4RUzWLq7pg,7114
 inmanta_plugins/podman/model/container.cf,sha256=-GDpwZcNcskQUwxUap8Vjs9OqkLlhXJioWeoqjlK33g,1841
 inmanta_plugins/podman/model/container_like.cf,sha256=NP6PzP1HNh9L9zB8YccIkr_xjGhhmLPUlyg4yp2ONCg,4727
 inmanta_plugins/podman/model/helpers.cf,sha256=_aQ5OWhJ5gbPKV34FdIyR-_Rs4YlKu-C2A9rXTWZRmA,2345
 inmanta_plugins/podman/model/network.cf,sha256=nHluWQn-9b04IM8HpxgihKg_jhTUPyfKP5h4CStQ7MY,1066
-inmanta_plugins/podman/model/services/_init.cf,sha256=2dzqTxaSY2G0R_ze2HcjtTrDdckcrp9oOd4UKYLj7kc,2399
+inmanta_plugins/podman/model/services/_init.cf,sha256=ZoPTYN4yJKHzgddg0x8qhjFb9EzM19D72X7FrV7JJ98,2560
 inmanta_plugins/podman/model/services/systemd_container.cf,sha256=48ynfEZTJlSh0C6cdKpGOKWeeLJVlt4mvvZ3qxb6oTQ,3906
 inmanta_plugins/podman/model/services/systemd_pod.cf,sha256=WZa_UEMjaTx-L6qVCdwKk1BSogFZW1dWv8qbl5Cum8Q,3666
-inmanta_plugins/podman/model/services/systemd_service.cf,sha256=7UZKrTsxDW58EsOVgRTIf_jYtgNa7LL6eOnU3gx0o9s,5574
+inmanta_plugins/podman/model/services/systemd_service.cf,sha256=SOL6ESyq8HCwdLDxQVFxQV64MtY5kSd3YFtrcH-nSqs,5620
 inmanta_plugins/podman/resources/__init__.py,sha256=NVBEWheGn8M9YTpErdDAYodvUfapWtad4ys81s9KUNs,646
-inmanta_plugins/podman/resources/abc.py,sha256=6FWLvG_KqWjnmoH-TuGFwkTspDozL7WeSVdB9ycWTR8,2996
-inmanta_plugins/podman/resources/image.py,sha256=k6_QsfPhjN9Y6v0dUgOS-VhgSaHzdjXBc_PjclRohzQ,8067
+inmanta_plugins/podman/resources/abc.py,sha256=HOr43z2TvqKqW3BDT6O4D0r_NRnVF6f2Mqn2PX6wgB8,3013
+inmanta_plugins/podman/resources/image.py,sha256=vmgYqp3bKShyiZKLWcczEXbvvwdW5ZCtc4W1wSktILE,8073
 inmanta_plugins/podman/resources/image_discovery.py,sha256=D7ziB25nwobV73E-Geq7suz5qef-AcR7FV3O9Sxw-2E,3208
 inmanta_plugins/podman/resources/network.py,sha256=6TkRhNOksstoorN-w3lN1BvIsRzHru9JsHieefy9qYk,8616
 inmanta_plugins/podman/resources/network_discovery.py,sha256=4_i5EgU_ieoNPL8iOKEIKxd9hf4fGzwOItJxIPjLBvQ,2915
 inmanta_plugins/podman/templates/.gitkeep,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-inmanta_module_podman-0.2.0.dist-info/METADATA,sha256=9F8G-ocNA6pskVm6izzdHoY13tBR4Nog94jr3PlhR68,506
-inmanta_module_podman-0.2.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-inmanta_module_podman-0.2.0.dist-info/top_level.txt,sha256=rb9c6eWQS8KFuSa3ktEcXpk-oSsCL9ZCVAgv7S0Eg_w,16
-inmanta_module_podman-0.2.0.dist-info/RECORD,,
+inmanta_module_podman-0.3.0.dist-info/METADATA,sha256=2MrxAe-BabmMbmmdSGfQiTTVDV5hlv4iEq-OSX674Bo,821
+inmanta_module_podman-0.3.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+inmanta_module_podman-0.3.0.dist-info/top_level.txt,sha256=rb9c6eWQS8KFuSa3ktEcXpk-oSsCL9ZCVAgv7S0Eg_w,16
+inmanta_module_podman-0.3.0.dist-info/RECORD,,
```

