# Comparing `tmp/dash_spread_grid-0.0.6.tar.gz` & `tmp/dash_spread_grid-0.0.7.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dash_spread_grid-0.0.6.tar", last modified: Sun Apr  7 11:26:24 2024, max compression
+gzip compressed data, was "dash_spread_grid-0.0.7.tar", last modified: Sun Apr  7 15:09:51 2024, max compression
```

## Comparing `dash_spread_grid-0.0.6.tar` & `dash_spread_grid-0.0.7.tar`

### file list

```diff
@@ -1,21 +1,21 @@
-drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 11:26:24.990876 dash_spread_grid-0.0.6/
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.6/LICENSE
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      393 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.6/MANIFEST.in
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      259 2024-04-07 11:26:24.990876 dash_spread_grid-0.0.6/PKG-INFO
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     3703 2024-01-20 12:13:37.000000 dash_spread_grid-0.0.6/README.md
-drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 11:26:24.990876 dash_spread_grid-0.0.6/dash_spread_grid/
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     3070 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid/DashSpreadGrid.py
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2261 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.6/dash_spread_grid/__init__.py
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       78 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid/_imports_.py
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)    50433 2024-04-07 11:26:23.000000 dash_spread_grid-0.0.6/dash_spread_grid/dash_spread_grid.min.js
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)   194791 2024-04-07 11:26:23.000000 dash_spread_grid-0.0.6/dash_spread_grid/dash_spread_grid.min.js.map
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     5579 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid/metadata.json
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2332 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid/package-info.json
-drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 11:26:24.990876 dash_spread_grid-0.0.6/dash_spread_grid.egg-info/
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      259 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid.egg-info/PKG-INFO
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      457 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid.egg-info/SOURCES.txt
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)        1 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid.egg-info/dependency_links.txt
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       17 2024-04-07 11:26:24.000000 dash_spread_grid-0.0.6/dash_spread_grid.egg-info/top_level.txt
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2332 2024-04-07 11:26:18.000000 dash_spread_grid-0.0.6/package.json
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       38 2024-04-07 11:26:24.990876 dash_spread_grid-0.0.6/setup.cfg
--rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      510 2024-01-18 13:19:42.000000 dash_spread_grid-0.0.6/setup.py
+drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 15:09:51.690875 dash_spread_grid-0.0.7/
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.7/LICENSE
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      393 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.7/MANIFEST.in
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      259 2024-04-07 15:09:51.690875 dash_spread_grid-0.0.7/PKG-INFO
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     3703 2024-01-20 12:13:37.000000 dash_spread_grid-0.0.7/README.md
+drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 15:09:51.690875 dash_spread_grid-0.0.7/dash_spread_grid/
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     3272 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid/DashSpreadGrid.py
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2261 2024-01-18 13:13:06.000000 dash_spread_grid-0.0.7/dash_spread_grid/__init__.py
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       78 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid/_imports_.py
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)    51100 2024-04-07 15:09:50.000000 dash_spread_grid-0.0.7/dash_spread_grid/dash_spread_grid.min.js
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)   196804 2024-04-07 15:09:50.000000 dash_spread_grid-0.0.7/dash_spread_grid/dash_spread_grid.min.js.map
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     6042 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid/metadata.json
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2332 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid/package-info.json
+drwxr-xr-x   0 tomaszrewak  (1000) tomaszrewak  (1000)        0 2024-04-07 15:09:51.690875 dash_spread_grid-0.0.7/dash_spread_grid.egg-info/
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      259 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid.egg-info/PKG-INFO
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      457 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid.egg-info/SOURCES.txt
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)        1 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid.egg-info/dependency_links.txt
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       17 2024-04-07 15:09:51.000000 dash_spread_grid-0.0.7/dash_spread_grid.egg-info/top_level.txt
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)     2332 2024-04-07 15:09:39.000000 dash_spread_grid-0.0.7/package.json
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)       38 2024-04-07 15:09:51.690875 dash_spread_grid-0.0.7/setup.cfg
+-rw-r--r--   0 tomaszrewak  (1000) tomaszrewak  (1000)      510 2024-01-18 13:19:42.000000 dash_spread_grid-0.0.7/setup.py
```

### Comparing `dash_spread_grid-0.0.6/README.md` & `dash_spread_grid-0.0.7/README.md`

 * *Files identical despite different names*

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/DashSpreadGrid.py` & `dash_spread_grid-0.0.7/dash_spread_grid/DashSpreadGrid.py`

 * *Files 8% similar despite different names*

```diff
@@ -7,14 +7,18 @@
     """A DashSpreadGrid component.
 
 
 Keyword arguments:
 
 - id (string; optional)
 
+- active_columns (list; optional)
+
+- active_rows (list; optional)
+
 - borderWidth (number; default 1)
 
 - clicked_cell (dict; optional)
 
 - clicked_custom_cell (dict; optional)
 
 - columnWidths (list; optional)
@@ -55,18 +59,18 @@
 
 - sorting (list; optional)"""
     _children_props = []
     _base_nodes = ['children']
     _namespace = 'dash_spread_grid'
     _type = 'DashSpreadGrid'
     @_explicitize_args
-    def __init__(self, id=Component.UNDEFINED, data=Component.UNDEFINED, columns=Component.UNDEFINED, rows=Component.UNDEFINED, formatting=Component.UNDEFINED, filtering=Component.UNDEFINED, sorting=Component.UNDEFINED, dataSelector=Component.UNDEFINED, pinned_top=Component.UNDEFINED, pinned_bottom=Component.UNDEFINED, pinned_left=Component.UNDEFINED, pinned_right=Component.UNDEFINED, borderWidth=Component.UNDEFINED, focusedCell=Component.UNDEFINED, selectedCells=Component.UNDEFINED, highlightedCells=Component.UNDEFINED, editedCells=Component.UNDEFINED, filters=Component.UNDEFINED, sortBy=Component.UNDEFINED, columnWidths=Component.UNDEFINED, rowHeights=Component.UNDEFINED, clicked_cell=Component.UNDEFINED, clicked_custom_cell=Component.UNDEFINED, **kwargs):
-        self._prop_names = ['id', 'borderWidth', 'clicked_cell', 'clicked_custom_cell', 'columnWidths', 'columns', 'data', 'dataSelector', 'editedCells', 'filtering', 'filters', 'focusedCell', 'formatting', 'highlightedCells', 'pinned_bottom', 'pinned_left', 'pinned_right', 'pinned_top', 'rowHeights', 'rows', 'selectedCells', 'sortBy', 'sorting']
+    def __init__(self, id=Component.UNDEFINED, data=Component.UNDEFINED, columns=Component.UNDEFINED, rows=Component.UNDEFINED, formatting=Component.UNDEFINED, filtering=Component.UNDEFINED, sorting=Component.UNDEFINED, dataSelector=Component.UNDEFINED, pinned_top=Component.UNDEFINED, pinned_bottom=Component.UNDEFINED, pinned_left=Component.UNDEFINED, pinned_right=Component.UNDEFINED, borderWidth=Component.UNDEFINED, focusedCell=Component.UNDEFINED, selectedCells=Component.UNDEFINED, highlightedCells=Component.UNDEFINED, editedCells=Component.UNDEFINED, filters=Component.UNDEFINED, sortBy=Component.UNDEFINED, columnWidths=Component.UNDEFINED, rowHeights=Component.UNDEFINED, clicked_cell=Component.UNDEFINED, clicked_custom_cell=Component.UNDEFINED, active_columns=Component.UNDEFINED, active_rows=Component.UNDEFINED, **kwargs):
+        self._prop_names = ['id', 'active_columns', 'active_rows', 'borderWidth', 'clicked_cell', 'clicked_custom_cell', 'columnWidths', 'columns', 'data', 'dataSelector', 'editedCells', 'filtering', 'filters', 'focusedCell', 'formatting', 'highlightedCells', 'pinned_bottom', 'pinned_left', 'pinned_right', 'pinned_top', 'rowHeights', 'rows', 'selectedCells', 'sortBy', 'sorting']
         self._valid_wildcard_attributes =            []
-        self.available_properties = ['id', 'borderWidth', 'clicked_cell', 'clicked_custom_cell', 'columnWidths', 'columns', 'data', 'dataSelector', 'editedCells', 'filtering', 'filters', 'focusedCell', 'formatting', 'highlightedCells', 'pinned_bottom', 'pinned_left', 'pinned_right', 'pinned_top', 'rowHeights', 'rows', 'selectedCells', 'sortBy', 'sorting']
+        self.available_properties = ['id', 'active_columns', 'active_rows', 'borderWidth', 'clicked_cell', 'clicked_custom_cell', 'columnWidths', 'columns', 'data', 'dataSelector', 'editedCells', 'filtering', 'filters', 'focusedCell', 'formatting', 'highlightedCells', 'pinned_bottom', 'pinned_left', 'pinned_right', 'pinned_top', 'rowHeights', 'rows', 'selectedCells', 'sortBy', 'sorting']
         self.available_wildcard_properties =            []
         _explicit_args = kwargs.pop('_explicit_args')
         _locals = locals()
         _locals.update(kwargs)  # For wildcard attrs and excess named props
         args = {k: _locals[k] for k in _explicit_args}
 
         super(DashSpreadGrid, self).__init__(**args)
```

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/__init__.py` & `dash_spread_grid-0.0.7/dash_spread_grid/__init__.py`

 * *Files identical despite different names*

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/dash_spread_grid.min.js` & `dash_spread_grid-0.0.7/dash_spread_grid/dash_spread_grid.min.js`

 * *Files 2% similar despite different names*

#### js-beautify {}

```diff
@@ -5,15 +5,15 @@
                 __webpack_require__.d(__webpack_exports__, {
                     Z: () => __WEBPACK_DEFAULT_EXPORT__
                 });
                 var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(196),
                     react__WEBPACK_IMPORTED_MODULE_0___default = __webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__),
                     prop_types__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(64),
                     prop_types__WEBPACK_IMPORTED_MODULE_1___default = __webpack_require__.n(prop_types__WEBPACK_IMPORTED_MODULE_1__),
-                    js_spread_grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(649);
+                    js_spread_grid__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(462);
 
                 function _typeof(e) {
                     return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                         return typeof e
                     } : function(e) {
                         return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                     }, _typeof(e)
@@ -178,35 +178,47 @@
                         g = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e) {
                             t({
                                 clicked_custom_cell: _objectSpread(_objectSpread({}, e), {}, {
                                     n: o.current++
                                 })
                             })
                         }), [t]),
-                        y = _slicedToArray((0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), 2),
-                        w = y[0],
-                        b = y[1];
-                    return w && (0, js_spread_grid__WEBPACK_IMPORTED_MODULE_2__.Z)(w, {
+                        y = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e) {
+                            t({
+                                active_columns: e
+                            })
+                        }), [t]),
+                        w = (0, react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((function(e) {
+                            t({
+                                active_rows: e
+                            })
+                        }), [t]),
+                        b = _slicedToArray((0, react__WEBPACK_IMPORTED_MODULE_0__.useState)(null), 2),
+                        E = b[0],
+                        v = b[1];
+                    return E && (0, js_spread_grid__WEBPACK_IMPORTED_MODULE_2__.Z)(E, {
                         data: n,
                         columns: r,
                         rows: i,
                         formatting: l,
                         filtering: s,
                         pinnedTop: a,
                         pinnedBottom: c,
                         pinnedLeft: u,
                         pinnedRight: d,
                         filters: p,
                         onFiltersChange: h,
                         clickedCell: f,
                         onCellClick: m,
                         clickedCustomCell: _,
-                        onCustomCellClick: g
+                        onCustomCellClick: g,
+                        onActiveColumnsChange: y,
+                        onActiveRowsChange: w
                     }), react__WEBPACK_IMPORTED_MODULE_0___default().createElement("div", {
-                        ref: b
+                        ref: v
                     })
                 }
                 DashSpreadGrid.propTypes = {
                     setProps: prop_types__WEBPACK_IMPORTED_MODULE_1___default().func,
                     id: prop_types__WEBPACK_IMPORTED_MODULE_1___default().string,
                     data: prop_types__WEBPACK_IMPORTED_MODULE_1___default().any,
                     columns: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
@@ -225,15 +237,17 @@
                     highlightedCells: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     editedCells: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     filters: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     sortBy: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     columnWidths: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     rowHeights: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
                     clicked_cell: prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,
-                    clicked_custom_cell: prop_types__WEBPACK_IMPORTED_MODULE_1___default().object
+                    clicked_custom_cell: prop_types__WEBPACK_IMPORTED_MODULE_1___default().object,
+                    active_columns: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array,
+                    active_rows: prop_types__WEBPACK_IMPORTED_MODULE_1___default().array
                 }, DashSpreadGrid.defaultProps = {
                     data: [],
                     columns: [{
                         type: "DATA-BLOCK"
                     }],
                     rows: [{
                         type: "HEADER"
@@ -254,25 +268,27 @@
                     highlightedCells: [],
                     editedCells: [],
                     filters: [],
                     sortBy: [],
                     columnWidths: [],
                     rowHeights: [],
                     clicked_cell: null,
-                    clicked_custom_cell: null
+                    clicked_custom_cell: null,
+                    active_columns: [],
+                    active_rows: []
                 };
                 const __WEBPACK_DEFAULT_EXPORT__ = DashSpreadGrid
             },
             64: e => {
                 e.exports = window.PropTypes
             },
             196: e => {
                 e.exports = window.React
             },
-            649: (e, t, o) => {
+            462: (e, t, o) => {
                 function n(e) {
                     return null === e ? "null" : Array.isArray(e) ? `[${e.map(n).join(",")}]` : "object" == typeof e ? (t = e, `{${Object.keys(t).sort().map((e=>`${e}:${n(t[e])}`)).join(",")}}`) : JSON.stringify(e);
                     var t
                 }
 
                 function r(e, t) {
                     return "FILTER" === e.type ^ "FILTER" === t.type ? "FILTER" : "DATA" === e.type && "DATA" === t.type ? "DATA" : "OTHER"
@@ -290,15 +306,15 @@
                             edit: t.resolve(c, a).edit,
                             cell: e,
                             type: r(a, c)
                         }
                     })).filter((e => e?.edit))
                 }
                 o.d(t, {
-                    Z: () => Se
+                    Z: () => Ke
                 });
                 const l = "12px Calibri",
                     s = {
                         top: 2,
                         right: 5,
                         bottom: 2,
                         left: 5
@@ -326,33 +342,33 @@
                         m = n.borderWidth,
                         _ = i.showTopBorder,
                         g = i.showBottomBorder,
                         y = s.showLeftBorder,
                         w = s.showRightBorder,
                         b = m / 2,
                         E = u.length - 1 + (_ ? 1 : 0) + (g ? 1 : 0),
-                        x = c.length - 1 + (y ? 1 : 0) + (w ? 1 : 0),
-                        v = u.map((e => e.height)),
+                        v = c.length - 1 + (y ? 1 : 0) + (w ? 1 : 0),
+                        x = u.map((e => e.height)),
                         R = c.map((e => e.width)),
-                        A = R.reduce(((e, t) => e + t), 0) + x * m,
-                        C = v.reduce(((e, t) => e + t), 0) + E * m,
+                        A = R.reduce(((e, t) => e + t), 0) + v * m,
+                        C = x.reduce(((e, t) => e + t), 0) + E * m,
                         k = "center" === o ? p.left : 0,
                         I = "middle" === t ? p.top : 0,
                         D = "center" === o ? p.width : s.width,
                         M = "middle" === t ? p.height : i.height,
-                        T = R.reduce(((e, t, o) => {
+                        O = R.reduce(((e, t, o) => {
                             const n = e[o] + t + m;
                             return e.push(n), e
                         }), [y ? m : 0]),
-                        O = v.reduce(((e, t, o) => {
+                        T = x.reduce(((e, t, o) => {
                             const n = e[o] + t + m;
                             return e.push(n), e
                         }), [_ ? m : 0]),
-                        L = T.slice(0, -1),
-                        P = O.slice(0, -1),
+                        L = O.slice(0, -1),
+                        P = T.slice(0, -1),
                         B = Math.max(L.findLastIndex((e => e <= k)), 0),
                         S = L.findLastIndex((e => e <= k + D)),
                         K = Math.max(P.findLastIndex((e => e <= I)), 0),
                         W = P.findLastIndex((e => e <= I + M)),
                         F = Math.max(B, y ? 0 : 1),
                         N = S + (w ? 1 : 0),
                         z = Math.max(K, _ ? 0 : 1),
@@ -373,22 +389,22 @@
                     const q = (e, t) => {
                             d.setTransform(devicePixelRatio, 0, 0, devicePixelRatio, (e - k) * devicePixelRatio, (t - I) * devicePixelRatio)
                         },
                         $ = (e, t, o, n) => {
                             d.beginPath(), d.rect(e, t, o, n), d.clip()
                         };
                     for (let e = B; e <= S; e++) {
-                        d.save(), q(T[e], 0), $(0, 0, R[e], C);
+                        d.save(), q(O[e], 0), $(0, 0, R[e], C);
                         for (let t = K; t <= W; t++) {
                             const o = H(t, e),
                                 n = o.style,
-                                r = O[t],
-                                i = T[e],
+                                r = T[t],
+                                i = O[e],
                                 s = R[e],
-                                c = v[t],
+                                c = x[t],
                                 u = o.text,
                                 p = n.textAlign || "left",
                                 f = n.textBaseline || "middle",
                                 _ = o.padding;
                             q(i, r), d.fillStyle = n.background || "white", d.fillRect(0, 0, s, c), "draw" in o && o.draw(d), n.highlight && (d.fillStyle = n.highlight, d.fillRect(0, 0, s, c)), n.corner && (d.fillStyle = n.corner, d.beginPath(), d.moveTo(s - 7, c), d.lineTo(s, c), d.lineTo(s, c - 7), d.fill()), d.fillStyle = n.foreground || "black", d.font = n.font || l, d.textAlign = p;
                             const g = h.getFontMetrics(n.font),
                                 y = a("left" === p ? _.left : "center" === p ? s / 2 : "right" === p ? s - _.right : 0, devicePixelRatio),
@@ -410,23 +426,23 @@
                         },
                         G = (e, t) => e ? t ? e.index > t.index ? e : t : e : t;
                     for (let e = z; e <= U; e++) {
                         const t = e - 1,
                             o = e;
                         for (let e = B; e <= S; e++) {
                             const n = G(t >= K ? H(t, e).style.borderBottom : null, o <= W ? H(o, e).style.borderTop : null);
-                            V(T[e] - b, O[o] - b, T[e + 1] - b, O[o] - b, n)
+                            V(O[e] - b, T[o] - b, O[e + 1] - b, T[o] - b, n)
                         }
                     }
                     for (let e = F; e <= N; e++) {
                         const t = e - 1,
                             o = e;
                         for (let e = K; e <= W; e++) {
                             const n = G(t >= B ? H(e, t).style.borderRight : null, o <= S ? H(e, o).style.borderLeft : null);
-                            V(T[o] - b, O[e] - b, T[o] - b, O[e + 1] - b, n)
+                            V(O[o] - b, T[e] - b, O[o] - b, T[e + 1] - b, n)
                         }
                     }
                 }
 
                 function u(e) {
                     if (!e.error) try {
                         ! function(e) {
@@ -808,60 +824,60 @@
                         m = i > 0,
                         _ = r > 0 || !f,
                         g = !f,
                         y = !(n > 0),
                         w = s > 0 || !m,
                         b = !m,
                         E = !(l > 0),
-                        x = (e, t, o) => {
+                        v = (e, t, o) => {
                             if (0 === e.length) return 0;
                             const n = t ? e.at(0).topWithBorder : e.at(0).top;
                             return (o ? e.at(-1).bottomWithBorder : e.at(-1).bottom) - n
                         },
-                        v = (e, t, o) => {
+                        x = (e, t, o) => {
                             if (0 === e.length) return 0;
                             const n = t ? e.at(0).leftWithBorder : e.at(0).left;
                             return (o ? e.at(-1).rightWithBorder : e.at(-1).right) - n
                         };
                     return {
                         top: {
                             rows: a,
                             showTopBorder: !0,
                             showBottomBorder: !0,
-                            height: x(a, !0, !0)
+                            height: v(a, !0, !0)
                         },
                         bottom: {
                             rows: c,
                             showTopBorder: _,
                             showBottomBorder: !0,
-                            height: x(c, _, !0)
+                            height: v(c, _, !0)
                         },
                         middle: {
                             rows: u,
                             showTopBorder: g,
                             showBottomBorder: y,
-                            height: x(u, g, y)
+                            height: v(u, g, y)
                         },
                         left: {
                             columns: d,
                             showLeftBorder: !0,
                             showRightBorder: !0,
-                            width: v(d, !0, !0)
+                            width: x(d, !0, !0)
                         },
                         right: {
                             columns: p,
                             showLeftBorder: w,
                             showRightBorder: !0,
-                            width: v(p, w, !0)
+                            width: x(p, w, !0)
                         },
                         center: {
                             columns: h,
                             showLeftBorder: b,
                             showRightBorder: E,
-                            width: v(h, b, E)
+                            width: x(h, b, E)
                         }
                     }
                 }
 
                 function _(e, t) {
                     return [...e, ...t.map((e => ({
                         columnId: e.columnId,
@@ -914,51 +930,51 @@
                     return new w(e)
                 }
 
                 function E(e, t) {
                     return "function" == typeof e ? e(t) : e
                 }
 
-                function x(e, t, o, n) {
+                function v(e, t, o, n) {
                     return e < o ? "BEGIN" : e >= t - n ? "END" : void 0
                 }
 
-                function v(e, t, o) {
+                function x(e, t, o) {
                     return e.map(((r, i) => {
                         const l = "id" in r ? r.id : r.type;
                         return {
                             ...r,
                             id: l,
                             type: r.type || "DATA",
                             index: i,
                             key: n(l),
-                            pinned: x(i, e.length, t, o),
+                            pinned: v(i, e.length, t, o),
                             header: "header" in r ? r.header : l,
                             labels: r.labels || []
                         }
                     }))
                 }
 
                 function R(e, t, o, r) {
                     const i = new Map(r.map((({
                         columnId: e,
                         width: t
                     }) => [n(e), t])));
-                    return v(e, t, o).map((e => ({
+                    return x(e, t, o).map((e => ({
                         ...e,
                         width: i.has(e.key) ? i.get(e.key) : e.width
                     })))
                 }
 
                 function A(e, t, o, r) {
                     const i = new Map(r.map((({
                         rowId: e,
                         height: t
                     }) => [n(e), t])));
-                    return v(e, t, o).map((e => ({
+                    return x(e, t, o).map((e => ({
                         ...e,
                         height: i.has(e.key) ? i.get(e.key) : e.height
                     })))
                 }
 
                 function C(e, t, o) {
                     let n = o;
@@ -1051,25 +1067,25 @@
                             for (const o of t.labels) e.byLabel.has(o) && n(e.byLabel.get(o))
                         }
                         this.lookup.byKey.has(e.key) && r(this.lookup.byKey.get(e.key)), this.lookup.byIndex.has(e.index) && r(this.lookup.byIndex.get(e.index)), this.lookup.byMatch.has(e.type) && r(this.lookup.byMatch.get(e.type));
                         for (const t of e.labels) this.lookup.byLabel.has(t) && r(this.lookup.byLabel.get(t));
                         return o
                     }
                 }
-                const T = ["borderTop", "borderRight", "borderBottom", "borderLeft"];
+                const O = ["borderTop", "borderRight", "borderBottom", "borderLeft"];
 
-                function O(e, t) {
+                function T(e, t) {
                     const o = {
                         ...e
                     };
                     if ("border" in o) {
-                        for (const e of T) o[e] = o.border;
+                        for (const e of O) o[e] = o.border;
                         delete o.border
                     }
-                    for (const e of T) e in o && (o[e] = {
+                    for (const e of O) e in o && (o[e] = {
                         ...o[e],
                         index: t
                     });
                     return o
                 }
                 class L {
                     constructor(e) {
@@ -1098,15 +1114,15 @@
                         });
                         for (const e of l)
                             if ((!("condition" in e) || e.condition(c)) && ("value" in e && (c = {
                                     ...c,
                                     value: e.value(c)
                                 }), "style" in e && (u = {
                                     ...u,
-                                    ...O(e.style(c), e.index)
+                                    ...T(e.style(c), e.index)
                                 }), "text" in e && (c = {
                                     ...c,
                                     text: e.text(c)
                                 }), "padding" in e && (d = {
                                     ...d,
                                     ...e.padding(c)
                                 }), "edit" in e && (c = {
@@ -1568,44 +1584,44 @@
                         const e = n(i[t]),
                             l = n(i[o]);
                         r.has(e) || r.set(e, new Map), r.get(e).set(l, i.direction)
                     }
                     return r
                 }
 
-                function xe(e, t) {
+                function ve(e, t) {
                     e.sort(((e, t) => {
                         const o = e.comparator(e.cell, t.cell);
                         return "number" == typeof o ? o : o ? -1 : 1
                     })), t.push(...e.map((e => e.entity))), e.length = 0
                 }
 
-                function ve(e, t, o, r, i, l, s) {
+                function xe(e, t, o, r, i, l, s) {
                     if (0 === e.length) return i;
                     const a = Ee(e, "columnId", "rowId"),
                         c = new Map(l.map((e => [e.key, e]))),
                         u = e.map((e => n(e.columnId))).filter((e => c.has(e))).map((e => c.get(e))).reverse();
                     if (0 === u.length) return i;
                     for (const e of u) {
                         const n = [],
                             c = [];
                         for (const u of i) {
                             const d = t.resolve(e, u, a.get(e.key));
                             if (!d) {
-                                xe(c, n), n.push(u);
+                                ve(c, n), n.push(u);
                                 continue
                             }
                             const p = {
                                 entity: u,
                                 comparator: d,
                                 cell: o.resolve(r, i, l, u, e, s)
                             };
-                            0 !== c.length && c[0].comparator !== d ? (xe(c, n), c.push(p)) : c.push(p)
+                            0 !== c.length && c[0].comparator !== d ? (ve(c, n), c.push(p)) : c.push(p)
                         }
-                        xe(c, n), i = n
+                        ve(c, n), i = n
                     }
                     return i
                 }
 
                 function Re(e, t, o, r, i, l, s) {
                     if (0 === e.length) return l;
                     const a = Ee(e, "rowId", "columnId"),
@@ -1614,25 +1630,25 @@
                     if (0 === u.length) return l;
                     for (const e of u) {
                         const n = [],
                             c = [];
                         for (const u of l) {
                             const d = t.resolve(u, e, a.get(e.key));
                             if (!d) {
-                                xe(c, n), n.push(u);
+                                ve(c, n), n.push(u);
                                 continue
                             }
                             const p = {
                                 entity: u,
                                 comparator: d,
                                 cell: o.resolve(r, i, l, e, u, s)
                             };
-                            0 !== c.length && c[0].comparator !== d ? (xe(c, n), c.push(p)) : c.push(p)
+                            0 !== c.length && c[0].comparator !== d ? (ve(c, n), c.push(p)) : c.push(p)
                         }
-                        xe(c, n), l = n
+                        ve(c, n), l = n
                     }
                     return l
                 }
                 const Ae = 5;
 
                 function Ce(e, t, o, r, i) {
                     if (!r) return null;
@@ -1662,15 +1678,22 @@
                     return e.map((e => ({
                         columnId: "columnId" in e ? e.columnId : "FILTER",
                         rowId: "rowId" in e ? e.rowId : "FILTER",
                         expression: e.expression
                     })))
                 }
 
-                function Me(e) {
+                function Me(e, t) {
+                    return function(e, t) {
+                        const o = e.filter((e => "DATA" === e.type)).map((e => e.id));
+                        return t(o), o
+                    }(e, t)
+                }
+
+                function Oe(e) {
                     console.count("updateState");
                     const t = {
                             ...e.localOptions,
                             ...e.externalOptions
                         },
                         o = e.memory,
                         n = e.state;
@@ -1686,51 +1709,51 @@
                         s = t.borderWidth / l,
                         a = t.data,
                         c = e.input.value,
                         u = r("sortBy", Ie, [t.sortBy]),
                         h = r("filters", De, [t.filters]),
                         g = r("textResolver", j, []),
                         w = r("dataFormatting", d, [t.formatting, t.dataSelector, u]),
-                        x = r("editedCellsAndFilters", _, [t.editedCells, h]),
-                        v = r("edition", y, [x]),
+                        v = r("editedCellsAndFilters", _, [t.editedCells, h]),
+                        x = r("edition", y, [v]),
                         I = r("invokedColumns", E, [t.columns, a]),
                         D = r("invokedRows", E, [t.rows, a]),
                         M = r("unfoldedColumns", le, [I, a]),
-                        T = r("unfoldedRows", se, [D, a]),
-                        O = r("unfilteredColumns", R, [M, t.pinnedLeft, t.pinnedRight, t.columnWidths]),
-                        L = r("unfilteredRows", A, [T, t.pinnedTop, t.pinnedBottom, t.rowHeights]),
-                        B = r("unfilteredColumnKeys", me, [O]),
+                        O = r("unfoldedRows", se, [D, a]),
+                        T = r("unfilteredColumns", R, [M, t.pinnedLeft, t.pinnedRight, t.columnWidths]),
+                        L = r("unfilteredRows", A, [O, t.pinnedTop, t.pinnedBottom, t.rowHeights]),
+                        B = r("unfilteredColumnKeys", me, [T]),
                         K = r("unfilteredRowKeys", me, [L]),
                         U = r("filterFormatting", de, [w]),
                         ee = r("filterFormattingRules", P, [U]),
                         ne = r("filteringRules", ue, [t.filtering]),
-                        re = r("filteredColumns", F, [h, ne, ee, a, L, O, v]),
-                        ie = r("filteredRows", W, [h, ne, ee, a, L, O, v]),
+                        re = r("filteredColumns", F, [h, ne, ee, a, L, T, x]),
+                        ie = r("filteredRows", W, [h, ne, ee, a, L, T, x]),
                         ae = r("sortingFormatting", _e, [w]),
                         ce = r("sortingFormattingRules", P, [ae]),
                         ge = r("sortingRules", be, [t.sorting]),
-                        ye = r("sortedColumns", Re, [u, ge, ce, a, ie, re, v]),
-                        we = r("sortedRows", ve, [u, ge, ce, a, ie, re, v]),
+                        ye = r("sortedColumns", Re, [u, ge, ce, a, ie, re, x]),
+                        we = r("sortedRows", xe, [u, ge, ce, a, ie, re, x]),
                         Ee = r("measureFormatting", pe, [w]),
-                        xe = r("measureFormattingRules", P, [Ee]),
-                        Ae = r("measureFormatResolver", S, [xe, a, we, ye, v]),
-                        Me = e.columnWidthCache,
+                        ve = r("measureFormattingRules", P, [Ee]),
+                        Ae = r("measureFormatResolver", S, [ve, a, we, ye, x]),
+                        Oe = e.columnWidthCache,
                         Te = e.rowHeightCache,
-                        Oe = r("measuredColumns", he, [ye, we, g, Ae, Me, B]),
-                        Le = r("measuredRows", fe, [ye, we, g, Ae, Te, K]),
-                        Pe = r("columns", C, [Oe, l, s]),
-                        Be = r("rows", k, [Le, l, s]),
-                        Se = r("columnLookup", J, [Pe]),
-                        Ke = r("rowLookup", J, [Be]),
-                        We = t.focusedCell,
-                        Fe = r("sections", m, [Pe, Be]),
-                        Ne = t.selectedCells,
-                        ze = r("fixedSize", N, [Fe.top.height, Fe.bottom.height, Fe.left.width, Fe.right.width]),
-                        Ue = r("totalSize", z, [Pe, Be]),
-                        je = function(e, t, o, n, r, i) {
+                        Le = r("measuredColumns", he, [ye, we, g, Ae, Oe, B]),
+                        Pe = r("measuredRows", fe, [ye, we, g, Ae, Te, K]),
+                        Be = r("columns", C, [Le, l, s]),
+                        Se = r("rows", k, [Pe, l, s]),
+                        Ke = r("columnLookup", J, [Be]),
+                        We = r("rowLookup", J, [Se]),
+                        Fe = t.focusedCell,
+                        Ne = r("sections", m, [Be, Se]),
+                        ze = t.selectedCells,
+                        Ue = r("fixedSize", N, [Ne.top.height, Ne.bottom.height, Ne.left.width, Ne.right.width]),
+                        je = r("totalSize", z, [Be, Se]),
+                        He = function(e, t, o, n, r, i) {
                             if (!t) return null;
                             if (t.x < 0 || t.y < 0 || t.x > i.width || t.y > i.height) return null;
                             const l = e.scrollLeft,
                                 s = e.scrollTop,
                                 a = e.clientWidth,
                                 c = e.clientHeight,
                                 u = t.x <= r.left ? t.x : t.x >= a - r.right ? i.width - a + t.x : t.x + l,
@@ -1766,30 +1789,30 @@
                                     }
                                     return -1
                                 }(n, u);
                             return -1 === d || -1 === p ? null : {
                                 rowId: o[d].id,
                                 columnId: n[p].id
                             }
-                        }(e.element, e.mousePosition, Be, Pe, ze, Ue),
-                        He = e.resizingColumn || r("resizableColumn", Ce, [Pe, Se, Ke, je, e.mousePosition]),
-                        qe = e.resizingRow || r("resizableRow", ke, [Be, Se, Ke, je, e.mousePosition]),
-                        $e = r("highlightedCells", Q, [e.isMouseDown, !!He || !!qe, We, je, Pe, Be, Se, Ke]),
-                        Ve = r("selection", b, [Ne]),
-                        Ge = r("highlight", b, [$e]),
-                        Ye = r("renderFormatting", f, [w, je, We, Ve, Ge, v, He, qe]),
-                        Xe = r("renderFormattingRules", P, [Ye]),
-                        Ze = r("renderFormatResolver", S, [Xe, a, Be, Pe, v]),
-                        Je = r("inputFormatting", p, [w]),
-                        Qe = r("inputFormattingRules", P, [Je]),
-                        et = r("inputFormatResolver", S, [Qe, a, Be, Pe, v]),
-                        tt = r("editableCells", i, [Ne, et, Se, Ke]),
-                        ot = r("inputPlacement", te, [tt, We, Se, Ke, Fe]),
-                        nt = r("isTextValid", oe, [c, tt]),
-                        rt = function(e, t, o, n) {
+                        }(e.element, e.mousePosition, Se, Be, Ue, je),
+                        qe = e.resizingColumn || r("resizableColumn", Ce, [Be, Ke, We, He, e.mousePosition]),
+                        $e = e.resizingRow || r("resizableRow", ke, [Se, Ke, We, He, e.mousePosition]),
+                        Ve = r("highlightedCells", Q, [e.isMouseDown, !!qe || !!$e, Fe, He, Be, Se, Ke, We]),
+                        Ge = r("selection", b, [ze]),
+                        Ye = r("highlight", b, [Ve]),
+                        Xe = r("renderFormatting", f, [w, He, Fe, Ge, Ye, x, qe, $e]),
+                        Ze = r("renderFormattingRules", P, [Xe]),
+                        Je = r("renderFormatResolver", S, [Ze, a, Se, Be, x]),
+                        Qe = r("inputFormatting", p, [w]),
+                        et = r("inputFormattingRules", P, [Qe]),
+                        tt = r("inputFormatResolver", S, [et, a, Se, Be, x]),
+                        ot = r("editableCells", i, [ze, tt, Ke, We]),
+                        nt = r("inputPlacement", te, [ot, Fe, Ke, We, Ne]),
+                        rt = r("isTextValid", oe, [c, ot]),
+                        it = function(e, t, o, n) {
                             const r = {
                                     width: n.getBoundingClientRect().width,
                                     height: n.getBoundingClientRect().height
                                 },
                                 i = {
                                     left: n.scrollLeft,
                                     top: n.scrollTop
@@ -1803,78 +1826,78 @@
                                 a = G({
                                     ...i,
                                     ...r
                                 }, o),
                                 c = q(s, $(a, Y)),
                                 u = q(s, $(a, X));
                             return H(s, l) && H(l, c) ? V(l) > 2 * V(u) ? u : l : u
-                        }(n?.scrollRect, Ue, ze, e.element);
-                    e.state = {
+                        }(n?.scrollRect, je, Ue, e.element);
+                    r("activeColumns", Me, [Be, t.onActiveColumnsChange]), r("activeRows", Me, [Se, t.onActiveRowsChange]), e.state = {
                         options: t,
                         devicePixelRatio: l,
                         borderWidth: s,
                         data: a,
                         dataFormatting: w,
-                        edition: v,
+                        edition: x,
                         filteredColumns: re,
                         filteredRows: ie,
-                        columns: Pe,
-                        rows: Be,
-                        sections: Fe,
-                        selectedCells: Ne,
-                        selection: Ve,
-                        highlight: Ge,
-                        hoveredCell: je,
-                        focusedCell: We,
-                        renderFormatting: Ye,
-                        renderFormatResolver: Ze,
-                        inputFormatting: Je,
-                        inputFormatResolver: et,
-                        fixedSize: ze,
-                        totalSize: Ue,
+                        columns: Be,
+                        rows: Se,
+                        sections: Ne,
+                        selectedCells: ze,
+                        selection: Ge,
+                        highlight: Ye,
+                        hoveredCell: He,
+                        focusedCell: Fe,
+                        renderFormatting: Xe,
+                        renderFormatResolver: Je,
+                        inputFormatting: Qe,
+                        inputFormatResolver: tt,
+                        fixedSize: Ue,
+                        totalSize: je,
                         textResolver: g,
-                        scrollRect: rt,
-                        highlightedCells: $e,
-                        inputPlacement: ot,
-                        columnLookup: Se,
-                        rowLookup: Ke,
+                        scrollRect: it,
+                        highlightedCells: Ve,
+                        inputPlacement: nt,
+                        columnLookup: Ke,
+                        rowLookup: We,
                         text: c,
-                        isTextValid: nt,
-                        resizableColumn: He,
-                        resizableRow: qe
+                        isTextValid: rt,
+                        resizableColumn: qe,
+                        resizableRow: $e
                     }
                 }
 
                 function Te(e) {
                     if (!e.error) try {
-                        Me(e)
+                        Oe(e)
                     } catch (t) {
                         e.error = t
                     }
                 }
 
-                function Oe(e, t) {
+                function Le(e, t) {
                     const o = new w(t);
                     return [...t, ...e.filter((e => !o.isIdSelected(e.rowId, e.columnId)))]
                 }
 
-                function Le(e, t) {
+                function Pe(e, t) {
                     const o = new w(t);
                     return e.filter((e => !o.isIdSelected(e.rowId, e.columnId)))
                 }
 
-                function Pe(e) {
+                function Be(e) {
                     const t = e.currentTarget.getBoundingClientRect();
                     return {
                         x: e.clientX - t.left,
                         y: e.clientY - t.top
                     }
                 }
 
-                function Be(e) {
+                function Se(e) {
                     if ("spread-grid-context" in e) return;
                     console.log("initialize");
                     const t = {
                             "top-left": document.createElement("canvas"),
                             "top-center": document.createElement("canvas"),
                             "top-right": document.createElement("canvas"),
                             "middle-left": document.createElement("canvas"),
@@ -1962,15 +1985,17 @@
                         columnWidths: [],
                         onColumnWidthsChange: e => {
                             r.localOptions.columnWidths = e, r.requestNewRender()
                         },
                         rowHeights: [],
                         onRowHeightsChange: e => {
                             r.localOptions.rowHeights = e, r.requestNewRender()
-                        }
+                        },
+                        onActiveColumnsChange: () => {},
+                        onActiveRowsChange: () => {}
                     }, e["spread-grid-context"] = r;
                     const l = e => {
                             o.value = e, o.dispatchEvent(new Event("input"))
                         },
                         s = e => {
                             const t = r.state.options.selectedCells,
                                 o = r.state.inputFormatResolver,
@@ -1988,39 +2013,39 @@
                                 f = p.filter((e => "FILTER" === e.type));
                             var m;
                             m = h.map((e => ({
                                 ...e.cell,
                                 value: e.edit.parse({
                                     string: a
                                 })
-                            }))), u(Oe(r.state.options.editedCells, m)), (e => {
-                                d(Oe(r.state.options.filters, e))
+                            }))), u(Le(r.state.options.editedCells, m)), (e => {
+                                d(Le(r.state.options.filters, e))
                             })(f.map((e => ({
                                 ...e.cell,
                                 expression: e.edit.parse({
                                     string: a
                                 })
                             })))), e || l("")
                         },
                         a = e => {
                             const t = r.state.options.selectedCells,
                                 o = r.state.options.onEditedCellsChange,
                                 n = r.state.options.onFiltersChange,
                                 l = i(t, r.state.inputFormatResolver, r.state.columnLookup, r.state.rowLookup);
                             var s;
-                            e && !l.every((e => e.edit.autoCommit)) || (s = t, o(Le(r.state.options.editedCells, s)), (e => {
-                                n(Le(r.state.options.filters, e))
+                            e && !l.every((e => e.edit.autoCommit)) || (s = t, o(Pe(r.state.options.editedCells, s)), (e => {
+                                n(Pe(r.state.options.filters, e))
                             })(t))
                         };
                     r.addEventListener(e, "scroll", (e => {
                         r.requestNewRender()
                     })), r.addEventListener(e, "mouseenter", (e => {
-                        r.mousePosition = Pe(e), r.requestNewRender()
+                        r.mousePosition = Be(e), r.requestNewRender()
                     })), r.addEventListener(e, "mousemove", (e => {
-                        if (r.mousePosition = Pe(e), r.resizingColumn) {
+                        if (r.mousePosition = Be(e), r.resizingColumn) {
                             const e = r.state.columnLookup.get(n(r.resizingColumn)),
                                 t = e.width,
                                 o = e.right,
                                 i = r.mousePosition.x,
                                 l = Math.max(10, i - o + t),
                                 s = r.state.options.columnWidths.filter((t => n(t.columnId) !== e.key)).concat([{
                                     columnId: e.id,
@@ -2042,15 +2067,15 @@
                         }
                         r.requestNewRender()
                     })), r.addEventListener(e, "mouseleave", (() => {
                         r.mousePosition = null, r.requestNewRender()
                     })), r.addEventListener(e, "mousedown", (e => {
                         Te(r), l(""), r.isMouseDown = !0, r.mouseDownPosition = r.mousePosition, r.mouseDownCell = r.state.hoveredCell, r.state.resizableColumn && (r.resizingColumn = r.state.resizableColumn), r.state.resizableRow && (r.resizingRow = r.state.resizableRow), r.state.resizableColumn || r.state.resizableRow || r.state.options.onFocusedCellChange(r.state.hoveredCell), e.ctrlKey || r.state.options.onSelectedCellsChange([]), r.requestNewRender()
                     })), r.addEventListener(e, "mouseup", (e => {
-                        Te(r), r.isMouseDown = !1, r.resizingColumn = null, r.resizingRow = null, r.state.options.onSelectedCellsChange(Oe(r.state.options.selectedCells, r.state.highlightedCells)), r.requestNewRender()
+                        Te(r), r.isMouseDown = !1, r.resizingColumn = null, r.resizingRow = null, r.state.options.onSelectedCellsChange(Le(r.state.options.selectedCells, r.state.highlightedCells)), r.requestNewRender()
                     })), r.addEventListener(e, "pointerdown", (e => {
                         r.element.setPointerCapture(e.pointerId)
                     })), r.addEventListener(e, "pointerup", (e => {
                         r.element.releasePointerCapture(e.pointerId)
                     })), r.addEventListener(e, "click", (e => {
                         Te(r);
                         const t = r.state.hoveredCell,
@@ -2121,15 +2146,15 @@
                             p = r.state.options.editedCells,
                             h = r.state.options.onEditedCellsChange,
                             f = r.state.columns,
                             m = r.state.rows,
                             _ = r.state.text,
                             g = r.state.inputFormatResolver,
                             y = (e, t) => {
-                                d(e), t.shiftKey ? u(Oe(c, [e])) : u([e])
+                                d(e), t.shiftKey ? u(Le(c, [e])) : u([e])
                             },
                             b = (e, r) => {
                                 if (!t) return;
                                 const i = n(t.columnId);
                                 if (!o.has(i)) return;
                                 const l = o.get(i).index,
                                     s = Math.max(0, Math.min(f.length - 1, l + e));
@@ -2149,35 +2174,35 @@
                                 if (s === l) return;
                                 const a = {
                                     rowId: m[s].id,
                                     columnId: t.columnId
                                 };
                                 y(a, o)
                             },
-                            x = () => {
+                            v = () => {
                                 e.preventDefault(), e.stopPropagation()
                             };
                         switch (e.key) {
                             case "Escape":
                                 "" !== _ ? l("") : c.length > 1 ? u([t]) : p.length > 0 ? h([]) : (d(null), u([]));
                                 break;
                             case "Enter":
                                 s();
                                 break;
                             case "ArrowUp":
-                                x(), E(e.ctrlKey ? -m.length : -1, e);
+                                v(), E(e.ctrlKey ? -m.length : -1, e);
                                 break;
                             case "ArrowDown":
-                                x(), E(e.ctrlKey ? m.length : 1, e);
+                                v(), E(e.ctrlKey ? m.length : 1, e);
                                 break;
                             case "ArrowLeft":
-                                x(), b(e.ctrlKey ? -f.length : -1, e);
+                                v(), b(e.ctrlKey ? -f.length : -1, e);
                                 break;
                             case "ArrowRight":
-                                x(), b(e.ctrlKey ? f.length : 1, e);
+                                v(), b(e.ctrlKey ? f.length : 1, e);
                                 break;
                             case "Delete":
                             case "Backspace":
                                 a();
                                 break;
                             case "c":
                                 (e => {
@@ -2250,16 +2275,16 @@
                                 break;
                             default:
                                 e.stopPropagation(), r.requestNewRender()
                         }
                     }))
                 }
 
-                function Se(e, t) {
-                    console.log("createGrid"), Be(e);
+                function Ke(e, t) {
+                    console.log("createGrid"), Se(e);
                     const o = e["spread-grid-context"];
                     o.externalOptions = t, null === o.state ? (Te(o), u(o)) : o.requestNewRender()
                 }
             }
         },
         __webpack_module_cache__ = {};
 
@@ -2311,15 +2336,15 @@
         jsonpScriptSrc = function(e) {
             var t = getCurrentScript(),
                 o = isLocalScript(t),
                 n = __jsonpScriptSrc__(e);
             if (!o) return n;
             var r = n.split("/"),
                 i = r.slice(-1)[0].split(".");
-            return i.splice(1, 0, "v0_0_6m1712489183"), r.splice(-1, 1, i.join(".")), r.join("/")
+            return i.splice(1, 0, "v0_0_7m1712502590"), r.splice(-1, 1, i.join(".")), r.join("/")
         }
     }
     var __webpack_exports__ = {};
     (() => {
         __webpack_require__.r(__webpack_exports__), __webpack_require__.d(__webpack_exports__, {
             DashSpreadGrid: () => e.Z
         });
```

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/dash_spread_grid.min.js.map` & `dash_spread_grid-0.0.7/dash_spread_grid/dash_spread_grid.min.js.map`

 * *Files 3% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9179721429374689%*

 * *Differences: {"'mappings'": "'2rGAMA,SAASA,SAASC,GACd,MAAwB,iBAAVA,GAAsBA,aAAiBC,MACzD,CAEA,SAASC,sBAAsBC,YAC3B,OAAOC,EAAAA,mCAAAA,UAAQ,WACX,IAAMC,QAAU,oEAEhB,OAAOF,WAAWG,KAAI,SAAAC,MAClB,IAAMC,WAAa,CAAC,EAgBpB,GAdI,WAAYD,OACZC,WAAWC,OAASF,KAAKE,QACzB,QAASF,OACTC,WAAWE,IAAMH,KAAKG,KACtB,cAAeH,OACfC,WAAWG,UAAYC,KAAK,IAADC,OAAKR,QAAO,UAAAQ,OAASN,KAAKI,UAAS,OAC9D,UAAWJ,OACXC,WAAWR,MAAQY,KAAK,IAADC,OAAKR,QAAO,SAAAQ,OAAQN,KAAKP,MAAK,OACrD,SAAUO,OACVC,WAAWM,KAAOF,KAAK,IAADC,OAAKR,QAAO,UAAAQ,OAASN,KAAKO,KAAI,OACpD,UAAWP,OACXC, []*

```diff
@@ -1,10 +1,10 @@
 {
     "file": "dash_spread_grid.min.js",
-    "mappings": "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",
+    "mappings": "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",
     "names": [
         "isString",
         "value",
         "String",
         "useResolvedFormatting",
         "formatting",
         "useMemo",
@@ -55,14 +55,20 @@
         "cell",
         "_objectSpread",
         "n",
         "current",
         "clickedCustomCell",
         "clicked_custom_cell",
         "onCustomCellClick",
+        "onActiveColumnsChange",
+        "activeColumns",
+        "active_columns",
+        "onActiveRowsChange",
+        "activeRows",
+        "active_rows",
         "_useState2",
         "_slicedToArray",
         "useState",
         "element",
         "setElement",
         "createGrid",
         "React",
@@ -512,14 +518,17 @@
         "sortedRows",
         "grabOffset",
         "getResizableColumn",
         "mousePosition",
         "getResizableRow",
         "getResolvedSortBy",
         "getResolvedFilters",
+        "getActiveColumns",
+        "callback",
+        "getActive",
         "updateStateInternal",
         "options",
         "localOptions",
         "externalOptions",
         "memory",
         "previousState",
         "cache",
@@ -766,14 +775,15 @@
         "webpack:///../lib/src/state-utils/getSortingFormatting.js",
         "webpack:///../lib/src/types/SortingRules.js",
         "webpack:///../lib/src/state-utils/getSortingRules.js",
         "webpack:///../lib/src/state-utils/getSorted.js",
         "webpack:///../lib/src/state-utils/getResizable.js",
         "webpack:///../lib/src/state-utils/getResolvedSortBy.js",
         "webpack:///../lib/src/state-utils/getResolvedFilters.js",
+        "webpack:///../lib/src/state-utils/getActive.js",
         "webpack:///../lib/src/core/state.js",
         "webpack:///../lib/src/state-utils/getHoveredCell.js",
         "webpack:///../lib/src/state-utils/getRowIndex.js",
         "webpack:///../lib/src/state-utils/getColumnIndex.js",
         "webpack:///../lib/src/state-utils/getCombinedCells.js",
         "webpack:///../lib/src/state-utils/getReducedCells.js",
         "webpack:///../lib/src/state-utils/getMousePosition.js",
@@ -784,15 +794,15 @@
         "webpack:///webpack/runtime/compat get default export",
         "webpack:///webpack/runtime/define property getters",
         "webpack:///webpack/runtime/hasOwnProperty shorthand",
         "webpack:///webpack/runtime/make namespace object",
         "webpack:///webpack/runtime/compat"
     ],
     "sourcesContent": [
-        "/* eslint-disable import/prefer-default-export */\n\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport createGrid from 'js-spread-grid';\n\nfunction isString(value) {\n    return typeof value === 'string' || value instanceof String;\n}\n\nfunction useResolvedFormatting(formatting) {\n    return useMemo(() => {\n        const context = '{data, rows, columns, row, column, value, newValue, text, string}';\n\n        return formatting.map(rule => {\n            const mappedRule = {};\n\n            if ('column' in rule)\n                mappedRule.column = rule.column;\n            if ('row' in rule)\n                mappedRule.row = rule.row;\n            if ('condition' in rule)\n                mappedRule.condition = eval(`(${context}) => (${rule.condition})`);\n            if ('value' in rule)\n                mappedRule.value = eval(`(${context})=> (${rule.value})`);\n            if ('text' in rule)\n                mappedRule.text = eval(`(${context}) => (${rule.text})`);\n            if ('style' in rule)\n                mappedRule.style = isString(rule.style) ? eval(`(${context}) => (${rule.style})`) : rule.style;\n            if ('padding' in rule)\n                mappedRule.padding = isString(rule.padding) ? eval(`(${context}) => (${rule.padding})`) : rule.padding;\n            if ('edit' in rule)\n                if (rule.edit) {\n                    const mappedEdit = {};\n                    if ('validate' in rule.edit)\n                        mappedEdit.validate = eval(`({string}) => (${rule.edit.validate})`);\n                    if ('parse' in rule.edit)\n                        mappedEdit.parse = eval(`(${context}) => (${rule.edit.parse})`);\n                    if ('auto_commit' in rule.edit)\n                        mappedEdit.autoCommit = rule.edit.auto_commit;\n                    mappedRule.edit = mappedEdit;\n                }\n                else {\n                    mappedRule.edit = rule.edit;\n                }\n\n            return mappedRule;\n        });\n    }, [formatting]);\n}\n\nfunction useResolvedFiltering(filtering) {\n    return useMemo(() => {\n        const context = '{data, rows, columns, row, column, value, text, expression}';\n\n        return filtering.map(rule => {\n            const mappedRule = {};\n\n            if ('column' in rule)\n                mappedRule.column = rule.column;\n            if ('row' in rule)\n                mappedRule.row = rule.row;\n            if ('condition' in rule)\n                mappedRule.condition = eval(`(${context}) => (${rule.condition})`);\n\n            return mappedRule;\n        });\n    }, [filtering]);\n}\n\n// TODO: Write description\n// TODO: Rename to DashSpreadGrid\nfunction DashSpreadGrid(props) {\n    console.count('render DashSpreadGrid');\n\n    const setProps = props.setProps;\n    const counter = useRef(0);\n\n    const data = props.data;\n    const columns = props.columns;\n    const rows = props.rows;\n    const formatting = useResolvedFormatting(props.formatting);\n    const filtering = useResolvedFiltering(props.filtering);\n    const pinnedTop = props.pinned_top;\n    const pinnedBottom = props.pinned_bottom;\n    const pinnedLeft = props.pinned_left;\n    const pinnedRight = props.pinned_right;\n    const filters = props.filters;\n    const onFiltersChange = useCallback((filters) => {\n        setProps({ filters });\n    }, [setProps]);\n    const clickedCell = props.clicked_cell;\n    const onCellClick = useCallback((cell) => {\n        setProps({ clicked_cell: { ...cell, n: counter.current++ } });\n    }, [setProps]);\n    const clickedCustomCell = props.clicked_custom_cell;\n    const onCustomCellClick = useCallback((cell) => {\n        setProps({ clicked_custom_cell: { ...cell, n: counter.current++ } });\n    }, [setProps]);\n\n    const [element, setElement] = useState(null);\n\n    if (element)\n        createGrid(element, {\n            data,\n            columns,\n            rows,\n            formatting,\n            filtering,\n            pinnedTop,\n            pinnedBottom,\n            pinnedLeft,\n            pinnedRight,\n            filters,\n            onFiltersChange,\n            clickedCell,\n            onCellClick,\n            clickedCustomCell,\n            onCustomCellClick\n        });\n\n    return React.createElement(\"div\", { ref: setElement });\n};\n\n// TODO: add descriptions\n// TODO: Fix types\nDashSpreadGrid.propTypes = {\n    // _\n    setProps: PropTypes.func,\n    // _\n    id: PropTypes.string,\n    // _\n    data: PropTypes.any,\n    // _\n    columns: PropTypes.array,\n    // _\n    rows: PropTypes.array,\n    // _\n    formatting: PropTypes.array,\n    // _\n    filtering: PropTypes.array,\n    // _\n    sorting: PropTypes.array,\n    // _\n    dataSelector: PropTypes.string,\n    // _\n    pinned_top: PropTypes.number,\n    // _\n    pinned_bottom: PropTypes.number,\n    // _\n    pinned_left: PropTypes.number,\n    // _\n    pinned_right: PropTypes.number,\n    // _\n    borderWidth: PropTypes.number,\n    // _\n    focusedCell: PropTypes.object,\n    // _\n    selectedCells: PropTypes.array,\n    // _\n    highlightedCells: PropTypes.array,\n    // _\n    editedCells: PropTypes.array,\n    // _\n    filters: PropTypes.array,\n    // _\n    sortBy: PropTypes.array,\n    // _\n    columnWidths: PropTypes.array,\n    // _\n    rowHeights: PropTypes.array,\n    // _\n    clicked_cell: PropTypes.object,\n    // _\n    clicked_custom_cell: PropTypes.object\n};\n\nDashSpreadGrid.defaultProps = {\n    data: [],\n    columns: [{ \"type\": \"DATA-BLOCK\" }],\n    rows: [{ \"type\": \"HEADER\" }, { \"type\": \"DATA-BLOCK\" }],\n    formatting: [],\n    filtering: [],\n    sorting: [],\n    dataSelector: \"data[row.id][column.id]\",\n    pinned_top: 0,\n    pinned_bottom: 0,\n    pinned_left: 0,\n    pinned_right: 0,\n    borderWidth: 1,\n    focusedCell: null,\n    selectedCells: [],\n    highlightedCells: [],\n    editedCells: [],\n    filters: [],\n    sortBy: [],\n    columnWidths: [],\n    rowHeights: [],\n    clicked_cell: null,\n    clicked_custom_cell: null\n};\n\nexport default DashSpreadGrid;\n",
+        "/* eslint-disable import/prefer-default-export */\n\nimport React, { useCallback, useMemo, useRef, useState } from 'react';\nimport PropTypes from 'prop-types';\nimport createGrid from 'js-spread-grid';\n\nfunction isString(value) {\n    return typeof value === 'string' || value instanceof String;\n}\n\nfunction useResolvedFormatting(formatting) {\n    return useMemo(() => {\n        const context = '{data, rows, columns, row, column, value, newValue, text, string}';\n\n        return formatting.map(rule => {\n            const mappedRule = {};\n\n            if ('column' in rule)\n                mappedRule.column = rule.column;\n            if ('row' in rule)\n                mappedRule.row = rule.row;\n            if ('condition' in rule)\n                mappedRule.condition = eval(`(${context}) => (${rule.condition})`);\n            if ('value' in rule)\n                mappedRule.value = eval(`(${context})=> (${rule.value})`);\n            if ('text' in rule)\n                mappedRule.text = eval(`(${context}) => (${rule.text})`);\n            if ('style' in rule)\n                mappedRule.style = isString(rule.style) ? eval(`(${context}) => (${rule.style})`) : rule.style;\n            if ('padding' in rule)\n                mappedRule.padding = isString(rule.padding) ? eval(`(${context}) => (${rule.padding})`) : rule.padding;\n            if ('edit' in rule)\n                if (rule.edit) {\n                    const mappedEdit = {};\n                    if ('validate' in rule.edit)\n                        mappedEdit.validate = eval(`({string}) => (${rule.edit.validate})`);\n                    if ('parse' in rule.edit)\n                        mappedEdit.parse = eval(`(${context}) => (${rule.edit.parse})`);\n                    if ('auto_commit' in rule.edit)\n                        mappedEdit.autoCommit = rule.edit.auto_commit;\n                    mappedRule.edit = mappedEdit;\n                }\n                else {\n                    mappedRule.edit = rule.edit;\n                }\n\n            return mappedRule;\n        });\n    }, [formatting]);\n}\n\nfunction useResolvedFiltering(filtering) {\n    return useMemo(() => {\n        const context = '{data, rows, columns, row, column, value, text, expression}';\n\n        return filtering.map(rule => {\n            const mappedRule = {};\n\n            if ('column' in rule)\n                mappedRule.column = rule.column;\n            if ('row' in rule)\n                mappedRule.row = rule.row;\n            if ('condition' in rule)\n                mappedRule.condition = eval(`(${context}) => (${rule.condition})`);\n\n            return mappedRule;\n        });\n    }, [filtering]);\n}\n\n// TODO: Write description\n// TODO: Rename to DashSpreadGrid\nfunction DashSpreadGrid(props) {\n    console.count('render DashSpreadGrid');\n\n    const setProps = props.setProps;\n    const counter = useRef(0);\n\n    const data = props.data;\n    const columns = props.columns;\n    const rows = props.rows;\n    const formatting = useResolvedFormatting(props.formatting);\n    const filtering = useResolvedFiltering(props.filtering);\n    const pinnedTop = props.pinned_top;\n    const pinnedBottom = props.pinned_bottom;\n    const pinnedLeft = props.pinned_left;\n    const pinnedRight = props.pinned_right;\n    const filters = props.filters;\n    const onFiltersChange = useCallback((filters) => {\n        setProps({ filters });\n    }, [setProps]);\n    const clickedCell = props.clicked_cell;\n    const onCellClick = useCallback((cell) => {\n        setProps({ clicked_cell: { ...cell, n: counter.current++ } });\n    }, [setProps]);\n    const clickedCustomCell = props.clicked_custom_cell;\n    const onCustomCellClick = useCallback((cell) => {\n        setProps({ clicked_custom_cell: { ...cell, n: counter.current++ } });\n    }, [setProps]);\n    const onActiveColumnsChange = useCallback((activeColumns) => {\n        setProps({ active_columns: activeColumns });\n    }, [setProps]);\n    const onActiveRowsChange = useCallback((activeRows) => {\n        setProps({ active_rows: activeRows });\n    }, [setProps]);\n\n    const [element, setElement] = useState(null);\n\n    if (element)\n        createGrid(element, {\n            data,\n            columns,\n            rows,\n            formatting,\n            filtering,\n            pinnedTop,\n            pinnedBottom,\n            pinnedLeft,\n            pinnedRight,\n            filters,\n            onFiltersChange,\n            clickedCell,\n            onCellClick,\n            clickedCustomCell,\n            onCustomCellClick,\n            onActiveColumnsChange,\n            onActiveRowsChange\n        });\n\n    return React.createElement(\"div\", { ref: setElement });\n};\n\n// TODO: add descriptions\n// TODO: Fix types\nDashSpreadGrid.propTypes = {\n    // _\n    setProps: PropTypes.func,\n    // _\n    id: PropTypes.string,\n    // _\n    data: PropTypes.any,\n    // _\n    columns: PropTypes.array,\n    // _\n    rows: PropTypes.array,\n    // _\n    formatting: PropTypes.array,\n    // _\n    filtering: PropTypes.array,\n    // _\n    sorting: PropTypes.array,\n    // _\n    dataSelector: PropTypes.string,\n    // _\n    pinned_top: PropTypes.number,\n    // _\n    pinned_bottom: PropTypes.number,\n    // _\n    pinned_left: PropTypes.number,\n    // _\n    pinned_right: PropTypes.number,\n    // _\n    borderWidth: PropTypes.number,\n    // _\n    focusedCell: PropTypes.object,\n    // _\n    selectedCells: PropTypes.array,\n    // _\n    highlightedCells: PropTypes.array,\n    // _\n    editedCells: PropTypes.array,\n    // _\n    filters: PropTypes.array,\n    // _\n    sortBy: PropTypes.array,\n    // _\n    columnWidths: PropTypes.array,\n    // _\n    rowHeights: PropTypes.array,\n    // _\n    clicked_cell: PropTypes.object,\n    // _\n    clicked_custom_cell: PropTypes.object,\n    // _\n    active_columns: PropTypes.array,\n    // _\n    active_rows: PropTypes.array\n};\n\nDashSpreadGrid.defaultProps = {\n    data: [],\n    columns: [{ \"type\": \"DATA-BLOCK\" }],\n    rows: [{ \"type\": \"HEADER\" }, { \"type\": \"DATA-BLOCK\" }],\n    formatting: [],\n    filtering: [],\n    sorting: [],\n    dataSelector: \"data[row.id][column.id]\",\n    pinned_top: 0,\n    pinned_bottom: 0,\n    pinned_left: 0,\n    pinned_right: 0,\n    borderWidth: 1,\n    focusedCell: null,\n    selectedCells: [],\n    highlightedCells: [],\n    editedCells: [],\n    filters: [],\n    sortBy: [],\n    columnWidths: [],\n    rowHeights: [],\n    clicked_cell: null,\n    clicked_custom_cell: null,\n    active_columns: [],\n    active_rows: []\n};\n\nexport default DashSpreadGrid;\n",
         "module.exports = window[\"PropTypes\"];",
         "module.exports = window[\"React\"];",
         "function stringifyObject(object) {\n    const keys = Object.keys(object).sort();\n    const stringified = keys.map(key => {\n        return `${key}:${stringifyId(object[key])}`\n    });\n\n    return `{${stringified.join(',')}}`;\n}\n\nfunction stringifyArray(array) {\n    const stringified = array.map(stringifyId);\n\n    return `[${stringified.join(',')}]`;\n}\n\nexport default function stringifyId(key) {\n    if (key === null)\n        return 'null'\n\n    if (Array.isArray(key))\n        return stringifyArray(key)\n\n    if (typeof key === 'object')\n        return stringifyObject(key)\n\n    return JSON.stringify(key)\n}",
         "export default function getCellType(column, row) {\n    if (column.type === 'FILTER' ^ row.type === 'FILTER')\n        return 'FILTER';\n    if (column.type === 'DATA' && row.type === 'DATA')\n        return 'DATA';\n    return 'OTHER';\n}",
         "import stringifyId from \"../core-utils/stringifyId.js\";\nimport getCellType from \"./getCellType.js\";\n\nexport default function getEditableCells(selectedCells, formatResolver, columnLookup, rowLookup) {\n    return selectedCells.map(cell => {\n        const columnKey = stringifyId(cell.columnId);\n        const rowKey = stringifyId(cell.rowId);\n\n        if (!columnLookup.has(columnKey))\n            return null;\n        if (!rowLookup.has(rowKey))\n            return null;\n\n        const column = columnLookup.get(columnKey);\n        const row = rowLookup.get(rowKey);\n\n        return {\n            edit: formatResolver.resolve(row, column).edit,\n            cell: cell,\n            type: getCellType(column, row)\n        }\n    }).filter(cell => cell?.edit);\n}",
         "const defaultFont = '12px Calibri';\nconst defaultPadding = { top: 2, right: 5, bottom: 2, left: 5 };\n\nexport { defaultFont, defaultPadding };",
         "export default function roundToPixels(value, devicePixelRatio) {\n    return Math.round(value * devicePixelRatio) / devicePixelRatio;\n}",
@@ -837,26 +847,27 @@
         "export default function getSortingFormatting(formatting) {\n    return formatting;\n}",
         "import RulesLookup from \"./RulesLookup.js\";\n\nconst defaultComparatorAsc = (lhs, rhs) => lhs.value < rhs.value;\nconst defaultComparatorDesc = (lhs, rhs) => lhs.value > rhs.value;\n\nexport default class SortingRules {\n    constructor(rules) {\n        this.rulesLookup = new RulesLookup();\n\n        for (const rule of rules) {\n            const entry = {\n                by: stringifyId('by' in rule ? rule.by : 'HEADER'),\n                comparatorAsc: rule.comparator || defaultComparatorAsc,\n                comparatorDesc: (lhs, rhs) => -rule.comparator(lhs, rhs) || defaultComparatorDesc\n            };\n\n            this.rulesLookup.addRule(rule.column, rule.row, entry);\n        }\n    }\n\n    resolve(column, row, sortByLookup) {\n        const rules = this.rulesLookup.getRules(column, row);\n\n        if (rules.length === 0) {\n            if (row.type !== 'DATA')\n                return null;\n            if (column.type !== 'DATA')\n                return null;\n            if (!sortByLookup.has('\"HEADER\"'))\n                return null;\n\n            return sortByLookup.get('\"HEADER\"') === 'ASC'\n                ? defaultComparatorAsc\n                : defaultComparatorDesc;\n        }\n\n        if (rules.length > 1)\n            throw new Error('Multiple sorting rules for the same cell'); // TODO: add more context\n\n        const rule = rules[0];\n\n        return sortByLookup.get(rule.by) === 'ASC'\n            ? rule.comparatorAsc\n            : rule.comparatorDesc;\n    }\n}",
         "import SortingRules from \"../types/SortingRules.js\";\n\nexport default function getSortingRules(sorting) {\n    return new SortingRules(sorting);\n}",
         "import stringifyId from \"../core-utils/stringifyId.js\";\n\nfunction getSortByLookup(sortBy, primaryKey, secondaryKey) {\n    const sortByLookup = new Map();\n    for (const cell of sortBy) {\n        const primary = stringifyId(cell[primaryKey]);\n        const secondary = stringifyId(cell[secondaryKey]);\n\n        if (!sortByLookup.has(primary))\n            sortByLookup.set(primary, new Map());\n\n        sortByLookup.get(primary).set(secondary, cell.direction);\n    }\n    return sortByLookup;\n}\n\nfunction flush(temp, result) {\n    temp.sort((lhs, rhs) => {\n        const result = lhs.comparator(lhs.cell, rhs.cell);\n        if (typeof result === 'number')\n            return result;\n        return result ? -1 : 1;\n    });\n    result.push(...temp.map(entry => entry.entity));\n    temp.length = 0;\n}\n\nexport function getSortedRows(sortBy, sortingRules, formattingRules, data, rows, columns, edition) {\n    if (sortBy.length === 0)\n        return rows;\n\n    const sortByLookup = getSortByLookup(sortBy, 'columnId', 'rowId');\n    const columnLookup = new Map(columns.map(column => [column.key, column]));\n    const sortedColumns = sortBy\n        .map(cell => stringifyId(cell.columnId))\n        .filter(key => columnLookup.has(key))\n        .map(key => columnLookup.get(key))\n        .reverse();\n\n    if (sortedColumns.length === 0)\n        return rows;\n\n    for (const column of sortedColumns) {\n        const result = [];\n        const temp = [];\n\n        for (const row of rows) {\n            const comparator = sortingRules.resolve(column, row, sortByLookup.get(column.key));\n\n            if (!comparator) {\n                flush(temp, result);\n                result.push(row);\n                continue;\n            }\n\n            const cell = formattingRules.resolve(data, rows, columns, row, column, edition);\n            const entry = { entity: row, comparator, cell };\n\n            if (temp.length === 0) {\n                temp.push(entry);\n                continue;\n            }\n\n            if (temp[0].comparator === comparator) {\n                temp.push(entry);\n                continue;\n            }\n\n            flush(temp, result);\n            temp.push(entry);\n        }\n\n        flush(temp, result);\n        rows = result;\n    }\n\n    return rows;\n}\n\nexport function getSortedColumns(sortBy, sortingRules, formattingRules, data, rows, columns, edition) {\n    if (sortBy.length === 0)\n        return columns;\n\n    const sortByLookup = getSortByLookup(sortBy, 'rowId', 'columnId');\n    const rowLookup = new Map(rows.map(row => [row.key, row]));\n    const sortedRows = sortBy\n        .map(cell => stringifyId(cell.rowId))\n        .filter(key => rowLookup.has(key))\n        .map(key => rowLookup.get(key))\n        .reverse();\n\n    if (sortedRows.length === 0)\n        return columns;\n\n    for (const row of sortedRows) {\n        const result = [];\n        const temp = [];\n\n        for (const column of columns) {\n            const comparator = sortingRules.resolve(column, row, sortByLookup.get(row.key));\n\n            if (!comparator) {\n                flush(temp, result);\n                result.push(column);\n                continue;\n            }\n\n            const cell = formattingRules.resolve(data, rows, columns, row, column, edition);\n            const entry = { entity: column, comparator, cell };\n\n            if (temp.length === 0) {\n                temp.push(entry);\n                continue;\n            }\n\n            if (temp[0].comparator === comparator) {\n                temp.push(entry);\n                continue;\n            }\n\n            flush(temp, result);\n            temp.push(entry);\n        }\n\n        flush(temp, result);\n        columns = result;\n    }\n\n    return columns;\n}",
         "import stringifyId from \"../core-utils/stringifyId.js\";\n\nconst grabOffset = 5;\n\n// TODO: not working when scrolled\n\nexport function getResizableColumn(columns, columnLookup, rowLookup, hoveredCell, mousePosition) {\n    if (!hoveredCell)\n        return null;\n\n    const column = columnLookup.get(stringifyId(hoveredCell.columnId));\n    const row = rowLookup.get(stringifyId(hoveredCell.rowId));\n    const x = mousePosition.x;\n\n    if (row.type !== 'HEADER')\n        return null;\n\n    if (x >= column.right - grabOffset && x <= column.right + grabOffset)\n        return column.id;\n\n    if (column.index === 0)\n        return null;\n    if (x < column.left - grabOffset || x > column.left + grabOffset)\n        return null;\n\n    return columns[column.index - 1].id;\n}\n\nexport function getResizableRow(rows, columnLookup, rowLookup, hoveredCell, mousePosition) {\n    if (!hoveredCell)\n        return null;\n\n    const column = columnLookup.get(stringifyId(hoveredCell.columnId));\n    const row = rowLookup.get(stringifyId(hoveredCell.rowId));\n    const y = mousePosition.y;\n\n    if (column.type !== 'HEADER')\n        return null;\n\n    if (y >= row.bottom - grabOffset && y <= row.bottom + grabOffset)\n        return row.id;\n\n    if (row.index === 0)\n        return null;\n    if (y < row.top - grabOffset || y > row.top + grabOffset)\n        return null;\n\n    return rows[row.index - 1].id;\n}",
         "export default function getResolvedSortBy(sortBy) {\n    return sortBy.map(sort => ({\n        columnId: 'columnId' in sort ? sort.columnId : 'HEADER',\n        rowId: 'rowId' in sort ? sort.rowId : 'HEADER',\n        direction: sort.direction\n    }));\n}",
         "export default function getResolvedFilters(filters) {\n    return filters.map(filter => ({\n        columnId: 'columnId' in filter ? filter.columnId : 'FILTER',\n        rowId: 'rowId' in filter ? filter.rowId : 'FILTER',\n        expression: filter.expression\n    }));\n}",
-        "import getEditableCells from \"../state-utils/getEditableCells.js\";\nimport getDataFormatting from \"../state-utils/getDataFormatting.js\";\nimport getInputFormatting from \"../state-utils/getInputFormatting.js\";\nimport getRenderFormatting from \"../state-utils/getRenderFormatting.js\";\nimport getSections from \"../state-utils/getSections.js\";\nimport getEditedCellsAndFilters from \"../state-utils/getEditedCellsAndFilters.js\";\nimport getEdition from \"../state-utils/getEdition.js\";\nimport getSelection from \"../state-utils/getSelection.js\";\nimport getInvoked from \"../state-utils/getInvoked.js\";\nimport { getResolvedColumns, getResolvedRows } from \"../state-utils/getResolved.js\";\nimport { getPlacedColumns, getPlacedRows } from \"../state-utils/getPlaced.js\";\nimport getFormattingRules from \"../state-utils/getFormattingRules.js\";\nimport getFormatResolver from \"../state-utils/getFormatResolver.js\";\nimport { getFilteredColumns as getFilteredColumns, getFilteredRows as getFilteredRows } from \"../state-utils/getFiltered.js\";\nimport getFixedSize from \"../state-utils/getFixedSize.js\";\nimport getTotalSize from \"../state-utils/getTotalSize.js\";\nimport getTextResolver from \"../state-utils/getTextResolver.js\";\nimport getScrollRect from \"../state-utils/getScrollRect.js\";\nimport getHoveredCell from \"../state-utils/getHoveredCell.js\";\nimport getLookup from \"../state-utils/getLookup.js\";\nimport getHighlightedCells from \"../state-utils/getHighlightedCells.js\";\nimport getInputPlacement from \"../state-utils/getInputPlacement.js\";\nimport getIsTextValid from \"../state-utils/getIsTextValid.js\";\nimport { getUnfoldedColumns, getUnfoldedRows } from \"../state-utils/getUnfolded.js\";\nimport getFilteringRules from \"../state-utils/getFilteringRules.js\";\nimport getFilterFormatting from \"../state-utils/getFilterFormatting.js\";\nimport getMeasureFormatting from \"../state-utils/getMeasureFormatting.js\";\nimport { getMeasuredColumns, getMeasuredRows } from \"../state-utils/getMeasured.js\";\nimport getKeys from \"../state-utils/getKeys.js\";\nimport getSortingFormatting from \"../state-utils/getSortingFormatting.js\";\nimport getSortingRules from \"../state-utils/getSortingRules.js\";\nimport { getSortedColumns, getSortedRows } from \"../state-utils/getSorted.js\";\nimport { getResizableColumn, getResizableRow } from \"../state-utils/getResizable.js\";\nimport getResolvedSortBy from \"../state-utils/getResolvedSortBy.js\";\nimport getResolvedFilters from \"../state-utils/getResolvedFilters.js\";\n\n// TODO: write some test to check if the cache is working properly\nfunction updateStateInternal(context) {\n    console.count('updateState');\n\n    const options = { ...context.localOptions, ...context.externalOptions };\n    const memory = context.memory;\n    const previousState = context.state;\n\n    // TODO: Move to utils\n    function cache(key, func, dependencies) {\n        const previousDependencies = memory[key] && memory[key].dependencies;\n        if (!previousDependencies || dependencies.some((dependency, index) => dependency !== previousDependencies[index]))\n            memory[key] = { value: func(...dependencies), dependencies };\n        return memory[key].value;\n    }\n\n    const devicePixelRatio = window.devicePixelRatio; // TODO: Trigger update on devicePixelRatio change\n    const borderWidth = options.borderWidth / devicePixelRatio;\n    const data = options.data;\n    const text = context.input.value;\n    const sortBy = cache('sortBy', getResolvedSortBy, [options.sortBy]);\n    const filters = cache('filters', getResolvedFilters, [options.filters]);\n    const textResolver = cache('textResolver', getTextResolver, []);\n    const dataFormatting = cache('dataFormatting', getDataFormatting, [options.formatting, options.dataSelector, sortBy]);\n    const editedCellsAndFilters = cache('editedCellsAndFilters', getEditedCellsAndFilters, [options.editedCells, filters]);\n    const edition = cache('edition', getEdition, [editedCellsAndFilters]);\n    const invokedColumns = cache('invokedColumns', getInvoked, [options.columns, data]);\n    const invokedRows = cache('invokedRows', getInvoked, [options.rows, data]);\n    // TODO: throw on duplicate ids\n    // TODO: throw on duplicate row/column filter ids\n    const unfoldedColumns = cache('unfoldedColumns', getUnfoldedColumns, [invokedColumns, data]);\n    const unfoldedRows = cache('unfoldedRows', getUnfoldedRows, [invokedRows, data]);\n    const unfilteredColumns = cache('unfilteredColumns', getResolvedColumns, [unfoldedColumns, options.pinnedLeft, options.pinnedRight, options.columnWidths]);\n    const unfilteredRows = cache('unfilteredRows', getResolvedRows, [unfoldedRows, options.pinnedTop, options.pinnedBottom, options.rowHeights]);\n    const unfilteredColumnKeys = cache('unfilteredColumnKeys', getKeys, [unfilteredColumns]);\n    const unfilteredRowKeys = cache('unfilteredRowKeys', getKeys, [unfilteredRows]);\n\n    // Filtering\n    const filterFormatting = cache('filterFormatting', getFilterFormatting, [dataFormatting]);\n    const filterFormattingRules = cache('filterFormattingRules', getFormattingRules, [filterFormatting]);\n    const filteringRules = cache('filteringRules', getFilteringRules, [options.filtering]);\n    const filteredColumns = cache('filteredColumns', getFilteredColumns, [filters, filteringRules, filterFormattingRules, data, unfilteredRows, unfilteredColumns, edition]);\n    const filteredRows = cache('filteredRows', getFilteredRows, [filters, filteringRules, filterFormattingRules, data, unfilteredRows, unfilteredColumns, edition]);\n\n    // Sorting\n    const sortingFormatting = cache('sortingFormatting', getSortingFormatting, [dataFormatting]);\n    const sortingFormattingRules = cache('sortingFormattingRules', getFormattingRules, [sortingFormatting]);\n    const sortingRules = cache('sortingRules', getSortingRules, [options.sorting]);\n    const sortedColumns = cache('sortedColumns', getSortedColumns, [sortBy, sortingRules, sortingFormattingRules, data, filteredRows, filteredColumns, edition]);\n    const sortedRows = cache('sortedRows', getSortedRows, [sortBy, sortingRules, sortingFormattingRules, data, filteredRows, filteredColumns, edition]);\n\n    // Shaping\n    const shapedColumns = sortedColumns;\n    const shapedRows = sortedRows;\n\n    // Measuring\n    const measureFormatting = cache('measureFormatting', getMeasureFormatting, [dataFormatting]);\n    const measureFormattingRules = cache('measureFormattingRules', getFormattingRules, [measureFormatting]);\n    const measureFormatResolver = cache('measureFormatResolver', getFormatResolver, [measureFormattingRules, data, shapedRows, shapedColumns, edition]);\n    const columnWidthCache = context.columnWidthCache;\n    const rowHeightCache = context.rowHeightCache;\n    const measuredColumns = cache('measuredColumns', getMeasuredColumns, [shapedColumns, shapedRows, textResolver, measureFormatResolver, columnWidthCache, unfilteredColumnKeys]);\n    const measuredRows = cache('measuredRows', getMeasuredRows, [shapedColumns, shapedRows, textResolver, measureFormatResolver, rowHeightCache, unfilteredRowKeys]);\n\n    // Placement\n    const columns = cache('columns', getPlacedColumns, [measuredColumns, devicePixelRatio, borderWidth]);\n    const rows = cache('rows', getPlacedRows, [measuredRows, devicePixelRatio, borderWidth]);\n    const columnLookup = cache('columnLookup', getLookup, [columns]);\n    const rowLookup = cache('rowLookup', getLookup, [rows]);\n    const focusedCell = options.focusedCell;\n    const sections = cache('sections', getSections, [columns, rows]);\n    const selectedCells = options.selectedCells;\n    const fixedSize = cache('fixedSize', getFixedSize, [sections.top.height, sections.bottom.height, sections.left.width, sections.right.width]);\n    const totalSize = cache('totalSize', getTotalSize, [columns, rows]);\n    // TODO: do some proper caching, so that if value is not changed, the old value is returned (currently not working because of scrolling)\n    const hoveredCell = getHoveredCell(context.element, context.mousePosition, rows, columns, fixedSize, totalSize);\n    const resizableColumn = context.resizingColumn || cache('resizableColumn', getResizableColumn, [columns, columnLookup, rowLookup, hoveredCell, context.mousePosition]);\n    const resizableRow = context.resizingRow || cache('resizableRow', getResizableRow, [rows, columnLookup, rowLookup, hoveredCell, context.mousePosition]);\n    const isMouseDown = context.isMouseDown;\n    const isResizing = !!resizableColumn || !!resizableRow;\n    const highlightedCells = cache('highlightedCells', getHighlightedCells, [isMouseDown, isResizing, focusedCell, hoveredCell, columns, rows, columnLookup, rowLookup]);\n    const selection = cache('selection', getSelection, [selectedCells]);\n    const highlight = cache('highlight', getSelection, [highlightedCells]);\n    // TODO: addDataFormattingRules and addRenderFormattingRules should remove unnecessary rules\n    const renderFormatting = cache('renderFormatting', getRenderFormatting, [dataFormatting, hoveredCell, focusedCell, selection, highlight, edition, resizableColumn, resizableRow]);\n    const renderFormattingRules = cache('renderFormattingRules', getFormattingRules, [renderFormatting]);\n    const renderFormatResolver = cache('renderFormatResolver', getFormatResolver, [renderFormattingRules, data, rows, columns, edition]);\n    const inputFormatting = cache('inputFormatting', getInputFormatting, [dataFormatting]);\n    const inputFormattingRules = cache('inputFormattingRules', getFormattingRules, [inputFormatting]);\n    const inputFormatResolver = cache('inputFormatResolver', getFormatResolver, [inputFormattingRules, data, rows, columns, edition]);\n    const editableCells = cache('editableCells', getEditableCells, [selectedCells, inputFormatResolver, columnLookup, rowLookup]);\n    const inputPlacement = cache('inputPlacement', getInputPlacement, [editableCells, focusedCell, columnLookup, rowLookup, sections]);\n    const isTextValid = cache('isTextValid', getIsTextValid, [text, editableCells]);\n\n    // cache result, but not call\n    const scrollRect = getScrollRect(previousState?.scrollRect, totalSize, fixedSize, context.element);\n\n    context.state = {\n        options,\n        devicePixelRatio,\n        borderWidth,\n        data,\n        dataFormatting,\n        edition,\n        filteredColumns,\n        filteredRows,\n        columns,\n        rows,\n        sections,\n        selectedCells,\n        selection,\n        highlight,\n        hoveredCell,\n        focusedCell,\n        renderFormatting,\n        renderFormatResolver,\n        inputFormatting,\n        inputFormatResolver,\n        fixedSize,\n        totalSize,\n        textResolver,\n        scrollRect,\n        highlightedCells,\n        inputPlacement,\n        columnLookup,\n        rowLookup,\n        text,\n        isTextValid,\n        resizableColumn,\n        resizableRow,\n    };\n}\n\nexport default function updateState(context) {\n    if (!context.error) {\n        try {\n            updateStateInternal(context);\n        } catch (error) {\n            context.error = error;\n        }\n    }\n}",
+        "function getActive(entries, callback) {\n    const ids = entries\n        .filter(entry => entry.type === 'DATA')\n        .map(entry => entry.id);\n\n    callback(ids);\n\n    return ids;\n}\n\nexport function getActiveColumns(columns, callback) {\n    return getActive(columns, callback);\n}\n\nexport function getActiveRows(rows, callback) {\n    return getActive(rows, callback);\n}",
+        "import getEditableCells from \"../state-utils/getEditableCells.js\";\nimport getDataFormatting from \"../state-utils/getDataFormatting.js\";\nimport getInputFormatting from \"../state-utils/getInputFormatting.js\";\nimport getRenderFormatting from \"../state-utils/getRenderFormatting.js\";\nimport getSections from \"../state-utils/getSections.js\";\nimport getEditedCellsAndFilters from \"../state-utils/getEditedCellsAndFilters.js\";\nimport getEdition from \"../state-utils/getEdition.js\";\nimport getSelection from \"../state-utils/getSelection.js\";\nimport getInvoked from \"../state-utils/getInvoked.js\";\nimport { getResolvedColumns, getResolvedRows } from \"../state-utils/getResolved.js\";\nimport { getPlacedColumns, getPlacedRows } from \"../state-utils/getPlaced.js\";\nimport getFormattingRules from \"../state-utils/getFormattingRules.js\";\nimport getFormatResolver from \"../state-utils/getFormatResolver.js\";\nimport { getFilteredColumns as getFilteredColumns, getFilteredRows as getFilteredRows } from \"../state-utils/getFiltered.js\";\nimport getFixedSize from \"../state-utils/getFixedSize.js\";\nimport getTotalSize from \"../state-utils/getTotalSize.js\";\nimport getTextResolver from \"../state-utils/getTextResolver.js\";\nimport getScrollRect from \"../state-utils/getScrollRect.js\";\nimport getHoveredCell from \"../state-utils/getHoveredCell.js\";\nimport getLookup from \"../state-utils/getLookup.js\";\nimport getHighlightedCells from \"../state-utils/getHighlightedCells.js\";\nimport getInputPlacement from \"../state-utils/getInputPlacement.js\";\nimport getIsTextValid from \"../state-utils/getIsTextValid.js\";\nimport { getUnfoldedColumns, getUnfoldedRows } from \"../state-utils/getUnfolded.js\";\nimport getFilteringRules from \"../state-utils/getFilteringRules.js\";\nimport getFilterFormatting from \"../state-utils/getFilterFormatting.js\";\nimport getMeasureFormatting from \"../state-utils/getMeasureFormatting.js\";\nimport { getMeasuredColumns, getMeasuredRows } from \"../state-utils/getMeasured.js\";\nimport getKeys from \"../state-utils/getKeys.js\";\nimport getSortingFormatting from \"../state-utils/getSortingFormatting.js\";\nimport getSortingRules from \"../state-utils/getSortingRules.js\";\nimport { getSortedColumns, getSortedRows } from \"../state-utils/getSorted.js\";\nimport { getResizableColumn, getResizableRow } from \"../state-utils/getResizable.js\";\nimport getResolvedSortBy from \"../state-utils/getResolvedSortBy.js\";\nimport getResolvedFilters from \"../state-utils/getResolvedFilters.js\";\nimport { getActiveColumns } from \"../state-utils/getActive.js\";\n\n// TODO: write some test to check if the cache is working properly\nfunction updateStateInternal(context) {\n    console.count('updateState');\n\n    const options = { ...context.localOptions, ...context.externalOptions };\n    const memory = context.memory;\n    const previousState = context.state;\n\n    // TODO: Move to utils\n    function cache(key, func, dependencies) {\n        const previousDependencies = memory[key] && memory[key].dependencies;\n        if (!previousDependencies || dependencies.some((dependency, index) => dependency !== previousDependencies[index]))\n            memory[key] = { value: func(...dependencies), dependencies };\n        return memory[key].value;\n    }\n\n    const devicePixelRatio = window.devicePixelRatio; // TODO: Trigger update on devicePixelRatio change\n    const borderWidth = options.borderWidth / devicePixelRatio;\n    const data = options.data;\n    const text = context.input.value;\n    const sortBy = cache('sortBy', getResolvedSortBy, [options.sortBy]);\n    const filters = cache('filters', getResolvedFilters, [options.filters]);\n    const textResolver = cache('textResolver', getTextResolver, []);\n    const dataFormatting = cache('dataFormatting', getDataFormatting, [options.formatting, options.dataSelector, sortBy]);\n    const editedCellsAndFilters = cache('editedCellsAndFilters', getEditedCellsAndFilters, [options.editedCells, filters]);\n    const edition = cache('edition', getEdition, [editedCellsAndFilters]);\n    const invokedColumns = cache('invokedColumns', getInvoked, [options.columns, data]);\n    const invokedRows = cache('invokedRows', getInvoked, [options.rows, data]);\n    // TODO: throw on duplicate ids\n    // TODO: throw on duplicate row/column filter ids\n    const unfoldedColumns = cache('unfoldedColumns', getUnfoldedColumns, [invokedColumns, data]);\n    const unfoldedRows = cache('unfoldedRows', getUnfoldedRows, [invokedRows, data]);\n    const unfilteredColumns = cache('unfilteredColumns', getResolvedColumns, [unfoldedColumns, options.pinnedLeft, options.pinnedRight, options.columnWidths]);\n    const unfilteredRows = cache('unfilteredRows', getResolvedRows, [unfoldedRows, options.pinnedTop, options.pinnedBottom, options.rowHeights]);\n    const unfilteredColumnKeys = cache('unfilteredColumnKeys', getKeys, [unfilteredColumns]);\n    const unfilteredRowKeys = cache('unfilteredRowKeys', getKeys, [unfilteredRows]);\n\n    // Filtering\n    const filterFormatting = cache('filterFormatting', getFilterFormatting, [dataFormatting]);\n    const filterFormattingRules = cache('filterFormattingRules', getFormattingRules, [filterFormatting]);\n    const filteringRules = cache('filteringRules', getFilteringRules, [options.filtering]);\n    const filteredColumns = cache('filteredColumns', getFilteredColumns, [filters, filteringRules, filterFormattingRules, data, unfilteredRows, unfilteredColumns, edition]);\n    const filteredRows = cache('filteredRows', getFilteredRows, [filters, filteringRules, filterFormattingRules, data, unfilteredRows, unfilteredColumns, edition]);\n\n    // Sorting\n    const sortingFormatting = cache('sortingFormatting', getSortingFormatting, [dataFormatting]);\n    const sortingFormattingRules = cache('sortingFormattingRules', getFormattingRules, [sortingFormatting]);\n    const sortingRules = cache('sortingRules', getSortingRules, [options.sorting]);\n    const sortedColumns = cache('sortedColumns', getSortedColumns, [sortBy, sortingRules, sortingFormattingRules, data, filteredRows, filteredColumns, edition]);\n    const sortedRows = cache('sortedRows', getSortedRows, [sortBy, sortingRules, sortingFormattingRules, data, filteredRows, filteredColumns, edition]);\n\n    // Shaping\n    const shapedColumns = sortedColumns;\n    const shapedRows = sortedRows;\n\n    // Measuring\n    const measureFormatting = cache('measureFormatting', getMeasureFormatting, [dataFormatting]);\n    const measureFormattingRules = cache('measureFormattingRules', getFormattingRules, [measureFormatting]);\n    const measureFormatResolver = cache('measureFormatResolver', getFormatResolver, [measureFormattingRules, data, shapedRows, shapedColumns, edition]);\n    const columnWidthCache = context.columnWidthCache;\n    const rowHeightCache = context.rowHeightCache;\n    const measuredColumns = cache('measuredColumns', getMeasuredColumns, [shapedColumns, shapedRows, textResolver, measureFormatResolver, columnWidthCache, unfilteredColumnKeys]);\n    const measuredRows = cache('measuredRows', getMeasuredRows, [shapedColumns, shapedRows, textResolver, measureFormatResolver, rowHeightCache, unfilteredRowKeys]);\n\n    // Placement\n    const columns = cache('columns', getPlacedColumns, [measuredColumns, devicePixelRatio, borderWidth]);\n    const rows = cache('rows', getPlacedRows, [measuredRows, devicePixelRatio, borderWidth]);\n    const columnLookup = cache('columnLookup', getLookup, [columns]);\n    const rowLookup = cache('rowLookup', getLookup, [rows]);\n    const focusedCell = options.focusedCell;\n    const sections = cache('sections', getSections, [columns, rows]);\n    const selectedCells = options.selectedCells;\n    const fixedSize = cache('fixedSize', getFixedSize, [sections.top.height, sections.bottom.height, sections.left.width, sections.right.width]);\n    const totalSize = cache('totalSize', getTotalSize, [columns, rows]);\n    // TODO: do some proper caching, so that if value is not changed, the old value is returned (currently not working because of scrolling)\n    const hoveredCell = getHoveredCell(context.element, context.mousePosition, rows, columns, fixedSize, totalSize);\n    const resizableColumn = context.resizingColumn || cache('resizableColumn', getResizableColumn, [columns, columnLookup, rowLookup, hoveredCell, context.mousePosition]);\n    const resizableRow = context.resizingRow || cache('resizableRow', getResizableRow, [rows, columnLookup, rowLookup, hoveredCell, context.mousePosition]);\n    const isMouseDown = context.isMouseDown;\n    const isResizing = !!resizableColumn || !!resizableRow;\n    const highlightedCells = cache('highlightedCells', getHighlightedCells, [isMouseDown, isResizing, focusedCell, hoveredCell, columns, rows, columnLookup, rowLookup]);\n    const selection = cache('selection', getSelection, [selectedCells]);\n    const highlight = cache('highlight', getSelection, [highlightedCells]);\n    // TODO: addDataFormattingRules and addRenderFormattingRules should remove unnecessary rules\n    const renderFormatting = cache('renderFormatting', getRenderFormatting, [dataFormatting, hoveredCell, focusedCell, selection, highlight, edition, resizableColumn, resizableRow]);\n    const renderFormattingRules = cache('renderFormattingRules', getFormattingRules, [renderFormatting]);\n    const renderFormatResolver = cache('renderFormatResolver', getFormatResolver, [renderFormattingRules, data, rows, columns, edition]);\n    const inputFormatting = cache('inputFormatting', getInputFormatting, [dataFormatting]);\n    const inputFormattingRules = cache('inputFormattingRules', getFormattingRules, [inputFormatting]);\n    const inputFormatResolver = cache('inputFormatResolver', getFormatResolver, [inputFormattingRules, data, rows, columns, edition]);\n    const editableCells = cache('editableCells', getEditableCells, [selectedCells, inputFormatResolver, columnLookup, rowLookup]);\n    const inputPlacement = cache('inputPlacement', getInputPlacement, [editableCells, focusedCell, columnLookup, rowLookup, sections]);\n    const isTextValid = cache('isTextValid', getIsTextValid, [text, editableCells]);\n\n    // cache result, but not call\n    const scrollRect = getScrollRect(previousState?.scrollRect, totalSize, fixedSize, context.element);\n\n    // callbacks\n    cache('activeColumns', getActiveColumns, [columns, options.onActiveColumnsChange]);\n    cache('activeRows', getActiveColumns, [rows, options.onActiveRowsChange]);\n\n    context.state = {\n        options,\n        devicePixelRatio,\n        borderWidth,\n        data,\n        dataFormatting,\n        edition,\n        filteredColumns,\n        filteredRows,\n        columns,\n        rows,\n        sections,\n        selectedCells,\n        selection,\n        highlight,\n        hoveredCell,\n        focusedCell,\n        renderFormatting,\n        renderFormatResolver,\n        inputFormatting,\n        inputFormatResolver,\n        fixedSize,\n        totalSize,\n        textResolver,\n        scrollRect,\n        highlightedCells,\n        inputPlacement,\n        columnLookup,\n        rowLookup,\n        text,\n        isTextValid,\n        resizableColumn,\n        resizableRow,\n    };\n}\n\nexport default function updateState(context) {\n    if (!context.error) {\n        try {\n            updateStateInternal(context);\n        } catch (error) {\n            context.error = error;\n        }\n    }\n}",
         "import getColumnIndex from \"./getColumnIndex.js\";\nimport getRowIndex from \"./getRowIndex.js\";\n\nexport default function getHoveredCell(element, mousePosition, rows, columns, fixedSize, totalSize) {\n    // TODO: sometimes mousePosition is outside of bounds and it crashes the click events\n\n    if (!mousePosition)\n        return null;\n    if (mousePosition.x < 0 || mousePosition.y < 0 || mousePosition.x > totalSize.width || mousePosition.y > totalSize.height)\n        return null;\n\n    const scrollOffset = {\n        left: element.scrollLeft,\n        top: element.scrollTop\n    };\n\n    const clientSize = {\n        width: element.clientWidth,\n        height: element.clientHeight\n    };\n\n    const x = mousePosition.x <= fixedSize.left\n        ? mousePosition.x\n        : mousePosition.x >= clientSize.width - fixedSize.right\n            ? totalSize.width - clientSize.width + mousePosition.x\n            : mousePosition.x + scrollOffset.left;\n    const y = mousePosition.y <= fixedSize.top\n        ? mousePosition.y\n        : mousePosition.y >= clientSize.height - fixedSize.bottom\n            ? totalSize.height - clientSize.height + mousePosition.y\n            : mousePosition.y + scrollOffset.top;\n\n    const hoverRowIndex = getRowIndex(rows, y);\n    const hoverColumnIndex = getColumnIndex(columns, x);\n\n    if (hoverRowIndex === -1 || hoverColumnIndex === -1)\n        return null;\n\n    return {\n        rowId: rows[hoverRowIndex].id,\n        columnId: columns[hoverColumnIndex].id\n    };\n}\n",
         "export default function getRowIndex(rows, y) {\n    if (rows.length === 0)\n        return -1;\n    if (y < rows[0].topWithBorder)\n        return -1;\n    if (y > rows[rows.length - 1].bottomWithBorder)\n        return -1;\n\n    let iterA = 0;\n    let iterC = rows.length - 1;\n\n    while (iterA <= iterC) {\n        const iterB = Math.floor((iterA + iterC) / 2);\n\n        if (y < rows[iterB].topWithBorder)\n            iterC = iterB - 1;\n        else if (y > rows[iterB].bottomWithBorder)\n            iterA = iterB + 1;\n\n        else\n            return iterB;\n    }\n\n    return -1;\n}\n",
         "export default function getColumnIndex(columns, x) {\n    if (columns.length === 0)\n        return -1;\n    if (x < columns[0].leftWithBorder)\n        return -1;\n    if (x > columns[columns.length - 1].rightWithBorder)\n        return -1;\n\n    let iterA = 0;\n    let iterC = columns.length - 1;\n\n    while (iterA <= iterC) {\n        const iterB = Math.floor((iterA + iterC) / 2);\n\n        if (x < columns[iterB].leftWithBorder)\n            iterC = iterB - 1;\n        else if (x > columns[iterB].rightWithBorder)\n            iterA = iterB + 1;\n\n        else\n            return iterB;\n    }\n\n    return -1;\n}\n",
         "import Selection from \"../types/Selection.js\";\n\nexport default function getCombinedCells(previousCells, newCells) {\n    const selection = new Selection(newCells);\n    return [...newCells, ...previousCells.filter(cell => !selection.isIdSelected(cell.rowId, cell.columnId))];\n}\n",
         "import Selection from \"../types/Selection.js\";\n\nexport default function getReducedCells(previousCells, cellsToRemove) {\n    const selection = new Selection(cellsToRemove);\n    return previousCells.filter(cell => !selection.isIdSelected(cell.rowId, cell.columnId));\n}\n",
         "export default function getMousePosition(event) {\n    const element = event.currentTarget;\n    const rect = element.getBoundingClientRect();\n    return {\n        x: event.clientX - rect.left,\n        y: event.clientY - rect.top\n    };\n}",
-        "import getEditableCells from \"./state-utils/getEditableCells.js\";\nimport stringifyId from \"./core-utils/stringifyId.js\";\nimport render from \"./core/render.js\";\nimport updateState from \"./core/state.js\";\nimport getCombinedCells from \"./state-utils/getCombinedCells.js\";\nimport getReducedCells from \"./state-utils/getReducedCells.js\";\nimport getMousePosition from \"./state-utils/getMousePosition.js\";\nimport getNewSortBy from \"./state-utils/getNewSortBy.js\";\nimport getClipboardData from \"./state-utils/getClipboardData.js\";\n\nfunction initialize(element) {\n    if ('spread-grid-context' in element) return;\n\n    console.log('initialize');\n\n    const canvases = {\n        'top-left': document.createElement('canvas'),\n        'top-center': document.createElement('canvas'),\n        'top-right': document.createElement('canvas'),\n        'middle-left': document.createElement('canvas'),\n        'middle-center': document.createElement('canvas'),\n        'middle-right': document.createElement('canvas'),\n        'bottom-left': document.createElement('canvas'),\n        'bottom-center': document.createElement('canvas'),\n        'bottom-right': document.createElement('canvas')\n    };\n    const input = document.createElement('input');\n\n    element.setAttribute('tabindex', '0');\n    element.setAttribute('style', 'max-width: 100vw; max-height: 100vh; overflow: auto; display: grid; position: relative; grid-template-columns: fit-content(0) fit-content(0) fit-content(0); grid-template-rows: fit-content(0) fit-content(0) fit-content(0); outline: none; user-select: none;');\n    element.classList.add('spread-grid');\n    canvases['top-left'].setAttribute('style', 'position: sticky; left: 0; top: 0; z-index: 2; grid-row: 1; grid-column: 1;');\n    canvases['top-center'].setAttribute('style', 'position: sticky; top: 0; z-index: 1; grid-row: 1; grid-column: 2;');\n    canvases['top-right'].setAttribute('style', 'position: sticky; right: 0; top: 0; z-index: 2; grid-row: 1; grid-column: 3;');\n    canvases['middle-left'].setAttribute('style', 'position: sticky; left: 0; z-index: 1; grid-row: 2; grid-column: 1;');\n    canvases['middle-center'].setAttribute('style', 'grid-row: 2; grid-column: 2; z-index: 0;');\n    canvases['middle-right'].setAttribute('style', 'position: sticky; right: 0; z-index: 1; grid-row: 2; grid-column: 3;');\n    canvases['bottom-left'].setAttribute('style', 'position: sticky; left: 0; bottom: 0; z-index: 2; grid-row: 3; grid-column: 1;');\n    canvases['bottom-center'].setAttribute('style', 'position: sticky; bottom: 0; z-index: 1; grid-row: 3; grid-column: 2;');\n    canvases['bottom-right'].setAttribute('style', 'position: sticky; right: 0; bottom: 0; z-index: 2; grid-row: 3; grid-column: 3;');\n    input.setAttribute('style', 'position: sticky; z-index: 3; outline: none; border: none; box-shadow: none; padding: 0 5px; font-size: 12px; font-family: Calibri; background-color: white; box-sizing: border-box; opacity: 0; pointer-events: none;');\n\n    const context = {\n        externalOptions: {},\n        state: null,\n        memory: {},\n        element: element,\n        canvases: canvases,\n        input: input,\n        renderRequested: false,\n        mousePosition: null,\n        isMouseDown: false,\n        columnWidthCache: new Map(),\n        rowHeightCache: new Map(),\n    };\n\n    context.requestNewRender = () => {\n        if (context.renderRequested) return;\n        context.renderRequested = true;\n        requestAnimationFrame(() => {\n            context.renderRequested = false;\n            updateState(context);\n            render(context);\n        });\n    };\n\n    context.addEventListener = (element, type, listener) => {\n        element.addEventListener(type, (event) => {\n            try {\n                listener(event);\n            }\n            catch (error) {\n                error.message = `[${type} event]: ${error.message}`;\n                context.error = error;\n                context.requestNewRender();\n            }\n        });\n    }\n\n    context.localOptions = {\n        data: [],\n        columns: [{ type: 'DATA-BLOCK' }],\n        rows: [{ type: 'HEADER' }, { type: 'DATA-BLOCK' }],\n        formatting: [],\n        filtering: [],\n        sorting: [],\n        dataSelector: ({ data, row, column }) => data[row.id][column.id],\n        pinnedTop: 0,\n        pinnedBottom: 0,\n        pinnedLeft: 0,\n        pinnedRight: 0,\n        borderWidth: 1,\n        focusedCell: null,\n        onFocusedCellChange: (focusedCell) => {\n            context.localOptions.focusedCell = focusedCell;\n            context.requestNewRender();\n        },\n        selectedCells: [],\n        onSelectedCellsChange: (selectedCells) => {\n            context.localOptions.selectedCells = selectedCells;\n            context.requestNewRender();\n        },\n        highlightedCells: [],\n        editedCells: [],\n        onEditedCellsChange: (editedCells) => {\n            // TODO: optimize by coalescing\n            context.localOptions.editedCells = editedCells;\n            context.requestNewRender();\n        },\n        filters: [],\n        onFiltersChange: (filters) => {\n            context.localOptions.filters = filters;\n            context.requestNewRender();\n        },\n        sortBy: [],\n        onSortByChange: (sortBy) => {\n            context.localOptions.sortBy = sortBy;\n            context.requestNewRender();\n        },\n        onCellClick: () => { },\n        onCustomCellClick: () => { },\n        columnWidths: [],\n        onColumnWidthsChange: (columnWidths) => {\n            context.localOptions.columnWidths = columnWidths;\n            context.requestNewRender();\n        },\n        rowHeights: [],\n        onRowHeightsChange: (rowHeights) => {\n            context.localOptions.rowHeights = rowHeights;\n            context.requestNewRender();\n        }\n    };\n\n    element['spread-grid-context'] = context;\n\n    const setText = (text) => {\n        input.value = text;\n        input.dispatchEvent(new Event('input'));\n    }\n\n    const accept = (autoCommit) => {\n        const selectedCells = context.state.options.selectedCells;\n        const formatResolver = context.state.inputFormatResolver;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const text = context.state.text;\n        const isTextValid = context.state.isTextValid;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const setFilters = context.state.options.onFiltersChange;\n        const addEditedCells = (cells) => setEditedCells(getCombinedCells(context.state.options.editedCells, cells));\n        const addFilters = (cells) => setFilters(getCombinedCells(context.state.options.filters, cells));\n        const editableCells = getEditableCells(selectedCells, formatResolver, columnLookup, rowLookup);\n\n        if (text === '')\n            return;\n        if (!isTextValid)\n            return;\n        if (autoCommit && !editableCells.every(cell => cell.edit.autoCommit))\n            return;\n\n        const dataCells = editableCells.filter(cell => cell.type === 'DATA');\n        const filterCells = editableCells.filter(cell => cell.type === 'FILTER');\n\n        addEditedCells(dataCells.map(cell => ({ ...cell.cell, value: cell.edit.parse({ string: text }) })));\n        addFilters(filterCells.map(cell => ({ ...cell.cell, expression: cell.edit.parse({ string: text }) })));\n\n        if (!autoCommit)\n            setText('');\n    };\n\n    const clear = (autoCommit) => {\n        const selectedCells = context.state.options.selectedCells;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const setFilters = context.state.options.onFiltersChange;\n        const removeEditedCells = (cells) => setEditedCells(getReducedCells(context.state.options.editedCells, cells));\n        const removeFilters = (cells) => setFilters(getReducedCells(context.state.options.filters, cells));\n        const formatResolver = context.state.inputFormatResolver;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const editableCells = getEditableCells(selectedCells, formatResolver, columnLookup, rowLookup);\n\n        if (autoCommit && !editableCells.every(cell => cell.edit.autoCommit))\n            return;\n\n        removeEditedCells(selectedCells);\n        removeFilters(selectedCells);\n    }\n\n    // TODO: Move other input functions here as well\n\n    context.addEventListener(element, 'scroll', (event) => {\n        // TODO: only request new render if scroll position changed outside of the scope\n        // TODO: how to: calculate the new scrollRect here and compare it to the one in the state\n        // TODO: Also don't forget to check if the highlighted cell did change\n        // TODO: Consider forcing a new render when visible scrollRect changes (without waiting for the next render frame)\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseenter', (event) => {\n        context.mousePosition = getMousePosition(event);\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mousemove', (event) => {\n        context.mousePosition = getMousePosition(event);\n\n        if (context.resizingColumn) {\n            const column = context.state.columnLookup.get(stringifyId(context.resizingColumn));\n            const columnWidth = column.width;\n            const columnRight = column.right;\n            const mousePosition = context.mousePosition.x;\n            const newColumnWidth = Math.max(10, mousePosition - columnRight + columnWidth);\n            const previousColumnWidths = context.state.options.columnWidths;\n            const newColumnWidths = previousColumnWidths\n                .filter(columnWidth => stringifyId(columnWidth.columnId) !== column.key)\n                .concat([{ columnId: column.id, width: newColumnWidth }]);\n            context.state.options.onColumnWidthsChange(newColumnWidths);\n        }\n        if (context.resizingRow) {\n            const row = context.state.rowLookup.get(stringifyId(context.resizingRow));\n            const rowHeight = row.height;\n            const rowBottom = row.bottom;\n            const mousePosition = context.mousePosition.y;\n            const newRowHeight = Math.max(10, mousePosition - rowBottom + rowHeight);\n            const previousRowHeights = context.state.options.rowHeights;\n            const newRowHeights = previousRowHeights\n                .filter(rowHeight => stringifyId(rowHeight.rowId) !== row.key)\n                .concat([{ rowId: row.id, height: newRowHeight }]);\n            context.state.options.onRowHeightsChange(newRowHeights);\n        }\n\n        // TODO: only request new render if hovered cell changed\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseleave', () => {\n        context.mousePosition = null;\n        context.requestNewRender();\n    });\n\n    // TODO: update mouse position on resize\n\n    context.addEventListener(element, 'mousedown', (event) => {\n        updateState(context);\n        setText('');\n\n        context.isMouseDown = true;\n        context.mouseDownPosition = context.mousePosition;\n        context.mouseDownCell = context.state.hoveredCell;\n\n        if (context.state.resizableColumn) {\n            context.resizingColumn = context.state.resizableColumn;\n        }\n        if (context.state.resizableRow) {\n            context.resizingRow = context.state.resizableRow;\n        }\n        if (!context.state.resizableColumn && !context.state.resizableRow) {\n            context.state.options.onFocusedCellChange(context.state.hoveredCell);\n        }\n\n        if (!event.ctrlKey)\n            context.state.options.onSelectedCellsChange([]);\n\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseup', (event) => {\n        updateState(context);\n\n        context.isMouseDown = false;\n        context.resizingColumn = null;\n        context.resizingRow = null;\n\n        context.state.options.onSelectedCellsChange(getCombinedCells(context.state.options.selectedCells, context.state.highlightedCells));\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'pointerdown', (event) => {\n        context.element.setPointerCapture(event.pointerId);\n    });\n\n    context.addEventListener(element, 'pointerup', (event) => {\n        context.element.releasePointerCapture(event.pointerId);\n    });\n\n    context.addEventListener(element, 'click', (event) => {\n        updateState(context);\n\n        const cell = context.state.hoveredCell;\n        const mouseDownCell = context.mouseDownCell;\n\n        if (context.state.resizableColumn || context.state.resizableRow)\n            return;\n        if (cell === null)\n            return;\n        if (stringifyId(cell.columnId) !== stringifyId(mouseDownCell.columnId))\n            return;\n        if (stringifyId(cell.rowId) !== stringifyId(mouseDownCell.rowId))\n            return;\n\n        const column = context.state.columnLookup.get(stringifyId(cell.columnId));\n        const row = context.state.rowLookup.get(stringifyId(cell.rowId));\n        const sortBy = context.state.options.sortBy;\n\n        if (column.type === 'DATA' && row.type === 'DATA') {\n            context.state.options.onCellClick(context.state.hoveredCell);\n        } else if (column.type === 'CUSTOM' || row.type === 'CUSTOM') {\n            context.state.options.onCustomCellClick(context.state.hoveredCell);\n        } else if (column.type === 'HEADER' || row.type === 'HEADER') {\n            const newSortBy = getNewSortBy(sortBy, column, row, event.ctrlKey);\n            context.state.options.onSortByChange(newSortBy);\n            context.state.options.onSelectedCellsChange([]);\n        }\n    });\n\n    context.addEventListener(element, 'dblclick', (event) => {\n        updateState(context);\n\n        if (context.state.resizableColumn) {\n            const resizableColumnKey = stringifyId(context.state.resizableColumn);\n            const newColumnWidths = context.state.options.columnWidths.filter(columnWidth => stringifyId(columnWidth.columnId) !== resizableColumnKey);\n            context.state.options.onColumnWidthsChange(newColumnWidths);\n            context.columnWidthCache.delete(resizableColumnKey);\n        }\n        if (context.state.resizableRow) {\n            const resizableRowKey = stringifyId(context.state.resizableRow);\n            const newRowHeights = context.state.options.rowHeights.filter(rowHeight => stringifyId(rowHeight.rowId) !== resizableRowKey);\n            context.state.options.onRowHeightsChange(newRowHeights);\n            context.rowHeightCache.delete(resizableRowKey);\n        }\n\n        const focusedCell = context.state.focusedCell;\n        if (focusedCell === null)\n            return;\n\n        const focusedColumnKey = stringifyId(focusedCell.columnId);\n        const focusedRowKey = stringifyId(focusedCell.rowId);\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const formatResolver = context.state.inputFormatResolver;\n\n        if (!columnLookup.has(focusedColumnKey))\n            return;\n        if (!rowLookup.has(focusedRowKey))\n            return;\n\n        const column = columnLookup.get(focusedColumnKey);\n        const row = rowLookup.get(focusedRowKey);\n        const cell = formatResolver.resolve(row, column);\n        const text = cell.text; // TODO: Make it configurable\n\n        setText(text);\n        input?.select();\n    });\n\n    context.addEventListener(element, 'focus', () => {\n        if (input.parentElement)\n            input.focus({ preventScroll: true });\n    });\n\n    context.addEventListener(element, 'keydown', (event) => {\n        // TODO: make sure it's not invoked on keydown of the input\n        updateState(context);\n\n        const focusedCell = context.state.focusedCell;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const selectedCells = context.state.options.selectedCells;\n        const setSelectedCells = context.state.options.onSelectedCellsChange;\n        const addSelectedCells = (cells) => setSelectedCells(getCombinedCells(selectedCells, cells));\n        const setFocusedCell = context.state.options.onFocusedCellChange;\n        const editedCells = context.state.options.editedCells;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const columns = context.state.columns;\n        const rows = context.state.rows;\n        const text = context.state.text;\n        const inputFormatResolver = context.state.inputFormatResolver;\n\n        const arrowTo = (cell, event) => {\n            setFocusedCell(cell);\n\n            if (event.shiftKey)\n                addSelectedCells([cell]);\n            else\n                setSelectedCells([cell]);\n        };\n\n        const arrowHorizontally = (offset, event) => {\n            if (!focusedCell)\n                return;\n\n            const focusedColumnKey = stringifyId(focusedCell.columnId);\n            if (!columnLookup.has(focusedColumnKey))\n                return;\n\n            const focusedColumnIndex = columnLookup.get(focusedColumnKey).index;\n            const newColumnIndex = Math.max(0, Math.min(columns.length - 1, focusedColumnIndex + offset));\n            if (newColumnIndex === focusedColumnIndex)\n                return;\n\n            const newFocusedCell = { rowId: focusedCell.rowId, columnId: columns[newColumnIndex].id };\n\n            arrowTo(newFocusedCell, event);\n        }\n\n        const arrowVertically = (offset, event) => {\n            if (!focusedCell)\n                return;\n\n            const focusedRowKey = stringifyId(focusedCell.rowId);\n            if (!rowLookup.has(focusedRowKey))\n                return;\n\n            const focusedRowIndex = rowLookup.get(focusedRowKey).index;\n            const newRowIndex = Math.max(0, Math.min(rows.length - 1, focusedRowIndex + offset));\n            if (newRowIndex === focusedRowIndex)\n                return;\n\n            const newFocusedCell = { rowId: rows[newRowIndex].id, columnId: focusedCell.columnId };\n\n            arrowTo(newFocusedCell, event);\n        }\n\n        const preventDefault = () => {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n\n        const cancel = () => {\n            if (text !== '') {\n                setText('');\n            }\n            else if (selectedCells.length > 1) {\n                setSelectedCells([focusedCell]);\n            }\n            else if (editedCells.length > 0) {\n                setEditedCells([]);\n            }\n            else {\n                setFocusedCell(null);\n                setSelectedCells([]);\n            }\n        };\n\n        const copyToClipboard = (event) => {\n            if (!event.ctrlKey)\n                return;\n\n            const clipboardData = getClipboardData(selectedCells, columns, rows, inputFormatResolver);\n\n            if (navigator.clipboard) {\n                navigator.clipboard.writeText(clipboardData);\n            } else {\n                const textArea = document.createElement('textarea');\n                textArea.value = clipboardData;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n            }\n        }\n\n        switch (event.key) {\n            case 'Escape':\n                cancel();\n                break;\n            case 'Enter':\n                accept();\n                break;\n            case 'ArrowUp':\n                // TODO: When ctrl and shift are pressed together, select all cells between the focused cell and the new cell\n                // TODO: When shift is pressed, expand the current rect selection instead of moving the focused cell\n                preventDefault();\n                arrowVertically(event.ctrlKey ? -rows.length : -1, event);\n                break;\n            case 'ArrowDown':\n                preventDefault();\n                arrowVertically(event.ctrlKey ? rows.length : 1, event);\n                break;\n            case 'ArrowLeft':\n                preventDefault();\n                arrowHorizontally(event.ctrlKey ? -columns.length : -1, event);\n                break;\n            case 'ArrowRight':\n                preventDefault();\n                arrowHorizontally(event.ctrlKey ? columns.length : 1, event);\n                break;\n            case 'Delete':\n            case 'Backspace':\n                clear();\n                break;\n            case 'c':\n                copyToClipboard(event);\n                break;\n            default:\n                break;\n        }\n    });\n\n    new ResizeObserver(() => {\n        context.requestNewRender();\n    }).observe(element);\n\n    context.addEventListener(input, 'input', (event) => {\n        // TODO: check performance of this (if it's ok to update the state on every input event)\n        updateState(context);\n\n        if (event.target.value) {\n            accept(true);\n\n            input.style.opacity = 1;\n            input.style.pointerEvents = 'auto';\n        }\n        else {\n            if (event.isTrusted)\n                clear(true);\n\n            input.style.opacity = 0;\n            input.style.pointerEvents = 'none';\n        }\n    });\n\n    context.addEventListener(input, 'click', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'dblclick', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'mousedown', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'keydown', (event) => {\n        switch (event.key) {\n            case 'Enter':\n            case 'Escape':\n                break;\n            case 'Delete':\n            case 'Backspace':\n            case 'ArrowUp':\n            case 'ArrowDown':\n            case 'ArrowLeft':\n            case 'ArrowRight':\n                if (input.value !== '') {\n                    event.stopPropagation();\n                    context.requestNewRender();\n                }\n                break;\n            default:\n                event.stopPropagation();\n                // TODO: maybe only check if the new text is valid\n                context.requestNewRender();\n                break;\n        }\n    });\n}\n\nexport default function createGrid(element, options) {\n    console.log('createGrid');\n\n    initialize(element);\n\n    const context = element['spread-grid-context'];\n    context.externalOptions = options;\n\n    if (context.state === null) {\n        updateState(context);\n        // TODO: only render if the state has sufficiently changed\n        render(context);\n    }\n    else {\n        context.requestNewRender();\n    }\n}",
+        "import getEditableCells from \"./state-utils/getEditableCells.js\";\nimport stringifyId from \"./core-utils/stringifyId.js\";\nimport render from \"./core/render.js\";\nimport updateState from \"./core/state.js\";\nimport getCombinedCells from \"./state-utils/getCombinedCells.js\";\nimport getReducedCells from \"./state-utils/getReducedCells.js\";\nimport getMousePosition from \"./state-utils/getMousePosition.js\";\nimport getNewSortBy from \"./state-utils/getNewSortBy.js\";\nimport getClipboardData from \"./state-utils/getClipboardData.js\";\n\nfunction initialize(element) {\n    if ('spread-grid-context' in element) return;\n\n    console.log('initialize');\n\n    const canvases = {\n        'top-left': document.createElement('canvas'),\n        'top-center': document.createElement('canvas'),\n        'top-right': document.createElement('canvas'),\n        'middle-left': document.createElement('canvas'),\n        'middle-center': document.createElement('canvas'),\n        'middle-right': document.createElement('canvas'),\n        'bottom-left': document.createElement('canvas'),\n        'bottom-center': document.createElement('canvas'),\n        'bottom-right': document.createElement('canvas')\n    };\n    const input = document.createElement('input');\n\n    element.setAttribute('tabindex', '0');\n    element.setAttribute('style', 'max-width: 100vw; max-height: 100vh; overflow: auto; display: grid; position: relative; grid-template-columns: fit-content(0) fit-content(0) fit-content(0); grid-template-rows: fit-content(0) fit-content(0) fit-content(0); outline: none; user-select: none;');\n    element.classList.add('spread-grid');\n    canvases['top-left'].setAttribute('style', 'position: sticky; left: 0; top: 0; z-index: 2; grid-row: 1; grid-column: 1;');\n    canvases['top-center'].setAttribute('style', 'position: sticky; top: 0; z-index: 1; grid-row: 1; grid-column: 2;');\n    canvases['top-right'].setAttribute('style', 'position: sticky; right: 0; top: 0; z-index: 2; grid-row: 1; grid-column: 3;');\n    canvases['middle-left'].setAttribute('style', 'position: sticky; left: 0; z-index: 1; grid-row: 2; grid-column: 1;');\n    canvases['middle-center'].setAttribute('style', 'grid-row: 2; grid-column: 2; z-index: 0;');\n    canvases['middle-right'].setAttribute('style', 'position: sticky; right: 0; z-index: 1; grid-row: 2; grid-column: 3;');\n    canvases['bottom-left'].setAttribute('style', 'position: sticky; left: 0; bottom: 0; z-index: 2; grid-row: 3; grid-column: 1;');\n    canvases['bottom-center'].setAttribute('style', 'position: sticky; bottom: 0; z-index: 1; grid-row: 3; grid-column: 2;');\n    canvases['bottom-right'].setAttribute('style', 'position: sticky; right: 0; bottom: 0; z-index: 2; grid-row: 3; grid-column: 3;');\n    input.setAttribute('style', 'position: sticky; z-index: 3; outline: none; border: none; box-shadow: none; padding: 0 5px; font-size: 12px; font-family: Calibri; background-color: white; box-sizing: border-box; opacity: 0; pointer-events: none;');\n\n    const context = {\n        externalOptions: {},\n        state: null,\n        memory: {},\n        element: element,\n        canvases: canvases,\n        input: input,\n        renderRequested: false,\n        mousePosition: null,\n        isMouseDown: false,\n        columnWidthCache: new Map(),\n        rowHeightCache: new Map(),\n    };\n\n    context.requestNewRender = () => {\n        if (context.renderRequested) return;\n        context.renderRequested = true;\n        requestAnimationFrame(() => {\n            context.renderRequested = false;\n            updateState(context);\n            render(context);\n        });\n    };\n\n    context.addEventListener = (element, type, listener) => {\n        element.addEventListener(type, (event) => {\n            try {\n                listener(event);\n            }\n            catch (error) {\n                error.message = `[${type} event]: ${error.message}`;\n                context.error = error;\n                context.requestNewRender();\n            }\n        });\n    }\n\n    context.localOptions = {\n        data: [],\n        columns: [{ type: 'DATA-BLOCK' }],\n        rows: [{ type: 'HEADER' }, { type: 'DATA-BLOCK' }],\n        formatting: [],\n        filtering: [],\n        sorting: [],\n        dataSelector: ({ data, row, column }) => data[row.id][column.id],\n        pinnedTop: 0,\n        pinnedBottom: 0,\n        pinnedLeft: 0,\n        pinnedRight: 0,\n        borderWidth: 1,\n        focusedCell: null,\n        onFocusedCellChange: (focusedCell) => {\n            context.localOptions.focusedCell = focusedCell;\n            context.requestNewRender();\n        },\n        selectedCells: [],\n        onSelectedCellsChange: (selectedCells) => {\n            context.localOptions.selectedCells = selectedCells;\n            context.requestNewRender();\n        },\n        highlightedCells: [],\n        editedCells: [],\n        onEditedCellsChange: (editedCells) => {\n            // TODO: optimize by coalescing\n            context.localOptions.editedCells = editedCells;\n            context.requestNewRender();\n        },\n        filters: [],\n        onFiltersChange: (filters) => {\n            context.localOptions.filters = filters;\n            context.requestNewRender();\n        },\n        sortBy: [],\n        onSortByChange: (sortBy) => {\n            context.localOptions.sortBy = sortBy;\n            context.requestNewRender();\n        },\n        onCellClick: () => { },\n        onCustomCellClick: () => { },\n        columnWidths: [],\n        onColumnWidthsChange: (columnWidths) => {\n            context.localOptions.columnWidths = columnWidths;\n            context.requestNewRender();\n        },\n        rowHeights: [],\n        onRowHeightsChange: (rowHeights) => {\n            context.localOptions.rowHeights = rowHeights;\n            context.requestNewRender();\n        },\n        onActiveColumnsChange: () => { },\n        onActiveRowsChange: () => { },\n    };\n\n    element['spread-grid-context'] = context;\n\n    const setText = (text) => {\n        input.value = text;\n        input.dispatchEvent(new Event('input'));\n    }\n\n    const accept = (autoCommit) => {\n        const selectedCells = context.state.options.selectedCells;\n        const formatResolver = context.state.inputFormatResolver;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const text = context.state.text;\n        const isTextValid = context.state.isTextValid;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const setFilters = context.state.options.onFiltersChange;\n        const addEditedCells = (cells) => setEditedCells(getCombinedCells(context.state.options.editedCells, cells));\n        const addFilters = (cells) => setFilters(getCombinedCells(context.state.options.filters, cells));\n        const editableCells = getEditableCells(selectedCells, formatResolver, columnLookup, rowLookup);\n\n        if (text === '')\n            return;\n        if (!isTextValid)\n            return;\n        if (autoCommit && !editableCells.every(cell => cell.edit.autoCommit))\n            return;\n\n        const dataCells = editableCells.filter(cell => cell.type === 'DATA');\n        const filterCells = editableCells.filter(cell => cell.type === 'FILTER');\n\n        addEditedCells(dataCells.map(cell => ({ ...cell.cell, value: cell.edit.parse({ string: text }) })));\n        addFilters(filterCells.map(cell => ({ ...cell.cell, expression: cell.edit.parse({ string: text }) })));\n\n        if (!autoCommit)\n            setText('');\n    };\n\n    const clear = (autoCommit) => {\n        const selectedCells = context.state.options.selectedCells;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const setFilters = context.state.options.onFiltersChange;\n        const removeEditedCells = (cells) => setEditedCells(getReducedCells(context.state.options.editedCells, cells));\n        const removeFilters = (cells) => setFilters(getReducedCells(context.state.options.filters, cells));\n        const formatResolver = context.state.inputFormatResolver;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const editableCells = getEditableCells(selectedCells, formatResolver, columnLookup, rowLookup);\n\n        if (autoCommit && !editableCells.every(cell => cell.edit.autoCommit))\n            return;\n\n        removeEditedCells(selectedCells);\n        removeFilters(selectedCells);\n    }\n\n    // TODO: Move other input functions here as well\n\n    context.addEventListener(element, 'scroll', (event) => {\n        // TODO: only request new render if scroll position changed outside of the scope\n        // TODO: how to: calculate the new scrollRect here and compare it to the one in the state\n        // TODO: Also don't forget to check if the highlighted cell did change\n        // TODO: Consider forcing a new render when visible scrollRect changes (without waiting for the next render frame)\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseenter', (event) => {\n        context.mousePosition = getMousePosition(event);\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mousemove', (event) => {\n        context.mousePosition = getMousePosition(event);\n\n        if (context.resizingColumn) {\n            const column = context.state.columnLookup.get(stringifyId(context.resizingColumn));\n            const columnWidth = column.width;\n            const columnRight = column.right;\n            const mousePosition = context.mousePosition.x;\n            const newColumnWidth = Math.max(10, mousePosition - columnRight + columnWidth);\n            const previousColumnWidths = context.state.options.columnWidths;\n            const newColumnWidths = previousColumnWidths\n                .filter(columnWidth => stringifyId(columnWidth.columnId) !== column.key)\n                .concat([{ columnId: column.id, width: newColumnWidth }]);\n            context.state.options.onColumnWidthsChange(newColumnWidths);\n        }\n        if (context.resizingRow) {\n            const row = context.state.rowLookup.get(stringifyId(context.resizingRow));\n            const rowHeight = row.height;\n            const rowBottom = row.bottom;\n            const mousePosition = context.mousePosition.y;\n            const newRowHeight = Math.max(10, mousePosition - rowBottom + rowHeight);\n            const previousRowHeights = context.state.options.rowHeights;\n            const newRowHeights = previousRowHeights\n                .filter(rowHeight => stringifyId(rowHeight.rowId) !== row.key)\n                .concat([{ rowId: row.id, height: newRowHeight }]);\n            context.state.options.onRowHeightsChange(newRowHeights);\n        }\n\n        // TODO: only request new render if hovered cell changed\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseleave', () => {\n        context.mousePosition = null;\n        context.requestNewRender();\n    });\n\n    // TODO: update mouse position on resize\n\n    context.addEventListener(element, 'mousedown', (event) => {\n        updateState(context);\n        setText('');\n\n        context.isMouseDown = true;\n        context.mouseDownPosition = context.mousePosition;\n        context.mouseDownCell = context.state.hoveredCell;\n\n        if (context.state.resizableColumn) {\n            context.resizingColumn = context.state.resizableColumn;\n        }\n        if (context.state.resizableRow) {\n            context.resizingRow = context.state.resizableRow;\n        }\n        if (!context.state.resizableColumn && !context.state.resizableRow) {\n            context.state.options.onFocusedCellChange(context.state.hoveredCell);\n        }\n\n        if (!event.ctrlKey)\n            context.state.options.onSelectedCellsChange([]);\n\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'mouseup', (event) => {\n        updateState(context);\n\n        context.isMouseDown = false;\n        context.resizingColumn = null;\n        context.resizingRow = null;\n\n        context.state.options.onSelectedCellsChange(getCombinedCells(context.state.options.selectedCells, context.state.highlightedCells));\n        context.requestNewRender();\n    });\n\n    context.addEventListener(element, 'pointerdown', (event) => {\n        context.element.setPointerCapture(event.pointerId);\n    });\n\n    context.addEventListener(element, 'pointerup', (event) => {\n        context.element.releasePointerCapture(event.pointerId);\n    });\n\n    context.addEventListener(element, 'click', (event) => {\n        updateState(context);\n\n        const cell = context.state.hoveredCell;\n        const mouseDownCell = context.mouseDownCell;\n\n        if (context.state.resizableColumn || context.state.resizableRow)\n            return;\n        if (cell === null)\n            return;\n        if (stringifyId(cell.columnId) !== stringifyId(mouseDownCell.columnId))\n            return;\n        if (stringifyId(cell.rowId) !== stringifyId(mouseDownCell.rowId))\n            return;\n\n        const column = context.state.columnLookup.get(stringifyId(cell.columnId));\n        const row = context.state.rowLookup.get(stringifyId(cell.rowId));\n        const sortBy = context.state.options.sortBy;\n\n        if (column.type === 'DATA' && row.type === 'DATA') {\n            context.state.options.onCellClick(context.state.hoveredCell);\n        } else if (column.type === 'CUSTOM' || row.type === 'CUSTOM') {\n            context.state.options.onCustomCellClick(context.state.hoveredCell);\n        } else if (column.type === 'HEADER' || row.type === 'HEADER') {\n            const newSortBy = getNewSortBy(sortBy, column, row, event.ctrlKey);\n            context.state.options.onSortByChange(newSortBy);\n            context.state.options.onSelectedCellsChange([]);\n        }\n    });\n\n    context.addEventListener(element, 'dblclick', (event) => {\n        updateState(context);\n\n        if (context.state.resizableColumn) {\n            const resizableColumnKey = stringifyId(context.state.resizableColumn);\n            const newColumnWidths = context.state.options.columnWidths.filter(columnWidth => stringifyId(columnWidth.columnId) !== resizableColumnKey);\n            context.state.options.onColumnWidthsChange(newColumnWidths);\n            context.columnWidthCache.delete(resizableColumnKey);\n        }\n        if (context.state.resizableRow) {\n            const resizableRowKey = stringifyId(context.state.resizableRow);\n            const newRowHeights = context.state.options.rowHeights.filter(rowHeight => stringifyId(rowHeight.rowId) !== resizableRowKey);\n            context.state.options.onRowHeightsChange(newRowHeights);\n            context.rowHeightCache.delete(resizableRowKey);\n        }\n\n        const focusedCell = context.state.focusedCell;\n        if (focusedCell === null)\n            return;\n\n        const focusedColumnKey = stringifyId(focusedCell.columnId);\n        const focusedRowKey = stringifyId(focusedCell.rowId);\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const formatResolver = context.state.inputFormatResolver;\n\n        if (!columnLookup.has(focusedColumnKey))\n            return;\n        if (!rowLookup.has(focusedRowKey))\n            return;\n\n        const column = columnLookup.get(focusedColumnKey);\n        const row = rowLookup.get(focusedRowKey);\n        const cell = formatResolver.resolve(row, column);\n        const text = cell.text; // TODO: Make it configurable\n\n        setText(text);\n        input?.select();\n    });\n\n    context.addEventListener(element, 'focus', () => {\n        if (input.parentElement)\n            input.focus({ preventScroll: true });\n    });\n\n    context.addEventListener(element, 'keydown', (event) => {\n        // TODO: make sure it's not invoked on keydown of the input\n        updateState(context);\n\n        const focusedCell = context.state.focusedCell;\n        const columnLookup = context.state.columnLookup;\n        const rowLookup = context.state.rowLookup;\n        const selectedCells = context.state.options.selectedCells;\n        const setSelectedCells = context.state.options.onSelectedCellsChange;\n        const addSelectedCells = (cells) => setSelectedCells(getCombinedCells(selectedCells, cells));\n        const setFocusedCell = context.state.options.onFocusedCellChange;\n        const editedCells = context.state.options.editedCells;\n        const setEditedCells = context.state.options.onEditedCellsChange;\n        const columns = context.state.columns;\n        const rows = context.state.rows;\n        const text = context.state.text;\n        const inputFormatResolver = context.state.inputFormatResolver;\n\n        const arrowTo = (cell, event) => {\n            setFocusedCell(cell);\n\n            if (event.shiftKey)\n                addSelectedCells([cell]);\n            else\n                setSelectedCells([cell]);\n        };\n\n        const arrowHorizontally = (offset, event) => {\n            if (!focusedCell)\n                return;\n\n            const focusedColumnKey = stringifyId(focusedCell.columnId);\n            if (!columnLookup.has(focusedColumnKey))\n                return;\n\n            const focusedColumnIndex = columnLookup.get(focusedColumnKey).index;\n            const newColumnIndex = Math.max(0, Math.min(columns.length - 1, focusedColumnIndex + offset));\n            if (newColumnIndex === focusedColumnIndex)\n                return;\n\n            const newFocusedCell = { rowId: focusedCell.rowId, columnId: columns[newColumnIndex].id };\n\n            arrowTo(newFocusedCell, event);\n        }\n\n        const arrowVertically = (offset, event) => {\n            if (!focusedCell)\n                return;\n\n            const focusedRowKey = stringifyId(focusedCell.rowId);\n            if (!rowLookup.has(focusedRowKey))\n                return;\n\n            const focusedRowIndex = rowLookup.get(focusedRowKey).index;\n            const newRowIndex = Math.max(0, Math.min(rows.length - 1, focusedRowIndex + offset));\n            if (newRowIndex === focusedRowIndex)\n                return;\n\n            const newFocusedCell = { rowId: rows[newRowIndex].id, columnId: focusedCell.columnId };\n\n            arrowTo(newFocusedCell, event);\n        }\n\n        const preventDefault = () => {\n            event.preventDefault();\n            event.stopPropagation();\n        };\n\n        const cancel = () => {\n            if (text !== '') {\n                setText('');\n            }\n            else if (selectedCells.length > 1) {\n                setSelectedCells([focusedCell]);\n            }\n            else if (editedCells.length > 0) {\n                setEditedCells([]);\n            }\n            else {\n                setFocusedCell(null);\n                setSelectedCells([]);\n            }\n        };\n\n        const copyToClipboard = (event) => {\n            if (!event.ctrlKey)\n                return;\n\n            const clipboardData = getClipboardData(selectedCells, columns, rows, inputFormatResolver);\n\n            if (navigator.clipboard) {\n                navigator.clipboard.writeText(clipboardData);\n            } else {\n                const textArea = document.createElement('textarea');\n                textArea.value = clipboardData;\n                document.body.appendChild(textArea);\n                textArea.select();\n                document.execCommand('copy');\n                document.body.removeChild(textArea);\n            }\n        }\n\n        switch (event.key) {\n            case 'Escape':\n                cancel();\n                break;\n            case 'Enter':\n                accept();\n                break;\n            case 'ArrowUp':\n                // TODO: When ctrl and shift are pressed together, select all cells between the focused cell and the new cell\n                // TODO: When shift is pressed, expand the current rect selection instead of moving the focused cell\n                preventDefault();\n                arrowVertically(event.ctrlKey ? -rows.length : -1, event);\n                break;\n            case 'ArrowDown':\n                preventDefault();\n                arrowVertically(event.ctrlKey ? rows.length : 1, event);\n                break;\n            case 'ArrowLeft':\n                preventDefault();\n                arrowHorizontally(event.ctrlKey ? -columns.length : -1, event);\n                break;\n            case 'ArrowRight':\n                preventDefault();\n                arrowHorizontally(event.ctrlKey ? columns.length : 1, event);\n                break;\n            case 'Delete':\n            case 'Backspace':\n                clear();\n                break;\n            case 'c':\n                copyToClipboard(event);\n                break;\n            default:\n                break;\n        }\n    });\n\n    new ResizeObserver(() => {\n        context.requestNewRender();\n    }).observe(element);\n\n    context.addEventListener(input, 'input', (event) => {\n        // TODO: check performance of this (if it's ok to update the state on every input event)\n        updateState(context);\n\n        if (event.target.value) {\n            accept(true);\n\n            input.style.opacity = 1;\n            input.style.pointerEvents = 'auto';\n        }\n        else {\n            if (event.isTrusted)\n                clear(true);\n\n            input.style.opacity = 0;\n            input.style.pointerEvents = 'none';\n        }\n    });\n\n    context.addEventListener(input, 'click', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'dblclick', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'mousedown', (event) => {\n        event.stopPropagation();\n    });\n\n    context.addEventListener(input, 'keydown', (event) => {\n        switch (event.key) {\n            case 'Enter':\n            case 'Escape':\n                break;\n            case 'Delete':\n            case 'Backspace':\n            case 'ArrowUp':\n            case 'ArrowDown':\n            case 'ArrowLeft':\n            case 'ArrowRight':\n                if (input.value !== '') {\n                    event.stopPropagation();\n                    context.requestNewRender();\n                }\n                break;\n            default:\n                event.stopPropagation();\n                // TODO: maybe only check if the new text is valid\n                context.requestNewRender();\n                break;\n        }\n    });\n}\n\nexport default function createGrid(element, options) {\n    console.log('createGrid');\n\n    initialize(element);\n\n    const context = element['spread-grid-context'];\n    context.externalOptions = options;\n\n    if (context.state === null) {\n        updateState(context);\n        // TODO: only render if the state has sufficiently changed\n        render(context);\n    }\n    else {\n        context.requestNewRender();\n    }\n}",
         "import stringifyId from '../core-utils/stringifyId.js';\n\nexport default function getNewSortBy(sortBy, column, row, ctrlKey) {\n    // TODO: better support for multi-row sorting\n\n    function isCurrentRule(rule) {\n        return column.key === stringifyId(rule.columnId || 'HEADER') && row.key === stringifyId(rule.rowId || 'HEADER');\n    }\n\n    const directionLoop = ['ASC', 'DESC', undefined];\n    const currentRule = sortBy.find(isCurrentRule);\n    const directionIndex = directionLoop.indexOf(currentRule?.direction);\n    const newDirection = directionLoop[(directionIndex + 1) % directionLoop.length];\n    const isLastRule = sortBy.indexOf(currentRule) === sortBy.length - 1;\n    const shouldKeepOld = ctrlKey && (isLastRule || !currentRule);\n    const rulesToKeep = shouldKeepOld ? sortBy.filter(rule => !isCurrentRule(rule)) : [];\n    const newRules = newDirection ? [{ columnId: column.id, rowId: row.id, direction: newDirection }] : [];\n\n    return [...rulesToKeep, ...newRules];\n}",
         "import stringifyId from \"../core-utils/stringifyId.js\";\nimport Selection from \"../types/Selection.js\";\n\nexport default function getClipboardData(selectedCells, columns, rows, formatResolver) {\n    const columnLookup = new Map(columns.map(column => [column.key, column]));\n    const rowLookup = new Map(rows.map(row => [row.key, row]));\n    const selectedCellKeys = selectedCells.map(cell => ({\n        columnKey: stringifyId(cell.columnId),\n        rowKey: stringifyId(cell.rowId)\n    })).filter(cell => columnLookup.has(cell.columnKey) && rowLookup.has(cell.rowKey));\n    const selectedColumns = new Set(selectedCellKeys.map(cell => cell.columnKey));\n    const selectedRows = new Set(selectedCellKeys.map(cell => cell.rowKey));\n\n    if (selectedCellKeys.length === 0)\n        return '';\n\n    const selection = new Selection(selectedCells);\n    const minColumnIndex = Math.min(...selectedCellKeys.map(cell => columnLookup.get(cell.columnKey).index));\n    const maxColumnIndex = Math.max(...selectedCellKeys.map(cell => columnLookup.get(cell.columnKey).index));\n    const minRowIndex = Math.min(...selectedCellKeys.map(cell => rowLookup.get(cell.rowKey).index));\n    const maxRowIndex = Math.max(...selectedCellKeys.map(cell => rowLookup.get(cell.rowKey).index));\n\n    const stringBuilder = [];\n\n    for (let rowIndex = minRowIndex; rowIndex <= maxRowIndex; rowIndex++) {\n        const row = rows[rowIndex];\n        const rowKey = row.key;\n\n        if (!selectedRows.has(rowKey))\n            continue;\n\n        for (let columnIndex = minColumnIndex; columnIndex <= maxColumnIndex; columnIndex++) {\n            const column = columns[columnIndex];\n            const columnKey = column.key;\n\n            if (!selectedColumns.has(columnKey))\n                continue;\n\n            if (selection.isKeySelected(rowKey, columnKey)) {\n                const cellData = formatResolver.resolve(row, column).text;\n                stringBuilder.push(cellData);\n            }\n\n            if (columnIndex < maxColumnIndex)\n                stringBuilder.push('\\t');\n        }\n\n        if (rowIndex < maxRowIndex)\n            stringBuilder.push('\\n');\n    }\n\n    return stringBuilder.join('');\n}",
         "// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n",
         "// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};",
         "// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};",
         "__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))",
         "// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};",
-        "var getCurrentScript = function() {\n    var script = document.currentScript;\n    if (!script) {\n        /* Shim for IE11 and below */\n        /* Do not take into account async scripts and inline scripts */\n\n        var doc_scripts = document.getElementsByTagName('script');\n        var scripts = [];\n\n        for (var i = 0; i < doc_scripts.length; i++) {\n            scripts.push(doc_scripts[i]);\n        }\n\n        scripts = scripts.filter(function(s) { return !s.async && !s.text && !s.textContent; });\n        script = scripts.slice(-1)[0];\n    }\n\n    return script;\n};\n\nvar isLocalScript = function(script) {\n    return /\\/_dash-component-suites\\//.test(script.src);\n};\n\nObject.defineProperty(__webpack_require__, 'p', {\n    get: (function () {\n        var script = getCurrentScript();\n\n        var url = script.src.split('/').slice(0, -1).join('/') + '/';\n\n        return function() {\n            return url;\n        };\n    })()\n});\n\nif (typeof jsonpScriptSrc !== 'undefined') {\n    var __jsonpScriptSrc__ = jsonpScriptSrc;\n    jsonpScriptSrc = function(chunkId) {\n        var script = getCurrentScript();\n        var isLocal = isLocalScript(script);\n\n        var src = __jsonpScriptSrc__(chunkId);\n\n        if(!isLocal) {\n            return src;\n        }\n\n        var srcFragments = src.split('/');\n        var fileFragments = srcFragments.slice(-1)[0].split('.');\n\n        fileFragments.splice(1, 0, \"v0_0_6m1712489183\");\n        srcFragments.splice(-1, 1, fileFragments.join('.'))\n\n        return srcFragments.join('/');\n    };\n}\n"
+        "var getCurrentScript = function() {\n    var script = document.currentScript;\n    if (!script) {\n        /* Shim for IE11 and below */\n        /* Do not take into account async scripts and inline scripts */\n\n        var doc_scripts = document.getElementsByTagName('script');\n        var scripts = [];\n\n        for (var i = 0; i < doc_scripts.length; i++) {\n            scripts.push(doc_scripts[i]);\n        }\n\n        scripts = scripts.filter(function(s) { return !s.async && !s.text && !s.textContent; });\n        script = scripts.slice(-1)[0];\n    }\n\n    return script;\n};\n\nvar isLocalScript = function(script) {\n    return /\\/_dash-component-suites\\//.test(script.src);\n};\n\nObject.defineProperty(__webpack_require__, 'p', {\n    get: (function () {\n        var script = getCurrentScript();\n\n        var url = script.src.split('/').slice(0, -1).join('/') + '/';\n\n        return function() {\n            return url;\n        };\n    })()\n});\n\nif (typeof jsonpScriptSrc !== 'undefined') {\n    var __jsonpScriptSrc__ = jsonpScriptSrc;\n    jsonpScriptSrc = function(chunkId) {\n        var script = getCurrentScript();\n        var isLocal = isLocalScript(script);\n\n        var src = __jsonpScriptSrc__(chunkId);\n\n        if(!isLocal) {\n            return src;\n        }\n\n        var srcFragments = src.split('/');\n        var fileFragments = srcFragments.slice(-1)[0].split('.');\n\n        fileFragments.splice(1, 0, \"v0_0_7m1712502590\");\n        srcFragments.splice(-1, 1, fileFragments.join('.'))\n\n        return srcFragments.join('/');\n    };\n}\n"
     ],
     "version": 3
 }
```

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/metadata.json` & `dash_spread_grid-0.0.7/dash_spread_grid/metadata.json`

 * *Files 2% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9951923076923077%*

 * *Differences: {"'src/lib/components/DashSpreadGrid.jsx'": "{'props': {'active_columns': OrderedDict([('type', "*

 * *                                            "OrderedDict([('name', 'array')])), ('required', "*

 * *                                            "False), ('description', ''), ('defaultValue', "*

 * *                                            "OrderedDict([('value', '[]'), ('computed', "*

 * *                                            "False)]))]), 'active_rows': OrderedDict([('type', "*

 * *                                        []*

```diff
@@ -1,13 +1,35 @@
 {
     "src/lib/components/DashSpreadGrid.jsx": {
         "description": "",
         "displayName": "DashSpreadGrid",
         "methods": [],
         "props": {
+            "active_columns": {
+                "defaultValue": {
+                    "computed": false,
+                    "value": "[]"
+                },
+                "description": "",
+                "required": false,
+                "type": {
+                    "name": "array"
+                }
+            },
+            "active_rows": {
+                "defaultValue": {
+                    "computed": false,
+                    "value": "[]"
+                },
+                "description": "",
+                "required": false,
+                "type": {
+                    "name": "array"
+                }
+            },
             "borderWidth": {
                 "defaultValue": {
                     "computed": false,
                     "value": "1"
                 },
                 "description": "",
                 "required": false,
```

### Comparing `dash_spread_grid-0.0.6/dash_spread_grid/package-info.json` & `dash_spread_grid-0.0.7/dash_spread_grid/package-info.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9642857142857143%*

 * *Differences: {"'version'": "'0.0.7'"}*

```diff
@@ -53,15 +53,15 @@
         "build:backends-activated": "(. venv/bin/activate || venv\\scripts\\activate && npm run build:backends)",
         "build:js": "webpack --mode production",
         "prepublishOnly": "npm run validate-init",
         "start": "webpack serve --config ./webpack.serve.config.js --open",
         "validate-init": "python _validate_init.py",
         "watch": "npm-watch"
     },
-    "version": "0.0.6",
+    "version": "0.0.7",
     "watch": {
         "build": {
             "patterns": [
                 "../lib/**/*",
                 "./src/lib/**/*"
             ]
         }
```

### Comparing `dash_spread_grid-0.0.6/package.json` & `dash_spread_grid-0.0.7/package.json`

 * *Files 1% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9642857142857143%*

 * *Differences: {"'version'": "'0.0.7'"}*

```diff
@@ -53,15 +53,15 @@
         "build:backends-activated": "(. venv/bin/activate || venv\\scripts\\activate && npm run build:backends)",
         "build:js": "webpack --mode production",
         "prepublishOnly": "npm run validate-init",
         "start": "webpack serve --config ./webpack.serve.config.js --open",
         "validate-init": "python _validate_init.py",
         "watch": "npm-watch"
     },
-    "version": "0.0.6",
+    "version": "0.0.7",
     "watch": {
         "build": {
             "patterns": [
                 "../lib/**/*",
                 "./src/lib/**/*"
             ]
         }
```

