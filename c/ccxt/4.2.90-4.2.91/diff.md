# Comparing `tmp/ccxt-4.2.90.tar.gz` & `tmp/ccxt-4.2.91.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "dist/ccxt-4.2.90.tar", last modified: Fri Apr  5 17:16:37 2024, max compression
+gzip compressed data, was "dist/ccxt-4.2.91.tar", last modified: Sun Apr  7 17:15:45 2024, max compression
```

## Comparing `ccxt-4.2.90.tar` & `ccxt-4.2.91.tar`

### file list

```diff
@@ -1,572 +1,572 @@
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.919742 ccxt-4.2.90/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2024-04-05 17:15:16.000000 ccxt-4.2.90/LICENSE.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      101 2024-04-05 16:42:51.000000 ccxt-4.2.90/MANIFEST.in
--rw-rw-r--   0 travis    (2000) travis    (2000)   114404 2024-04-05 17:16:37.919742 ccxt-4.2.90/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2024-04-05 16:42:51.000000 ccxt-4.2.90/README.rst
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.723726 ccxt-4.2.90/ccxt/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15656 2024-04-05 17:15:15.000000 ccxt-4.2.90/ccxt/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.751729 ccxt-4.2.90/ccxt/abstract/
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/abstract/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10382 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11394 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4895 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    98471 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15876 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bingx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2735 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5820 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19194 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    89841 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3443 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14031 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10774 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3295 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9379 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27231 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3478 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitteam.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3978 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/blofin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      849 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1777 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48391 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14395 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4770 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinbaseinternational.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7162 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    34678 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6538 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinlist.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6842 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3864 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinmetro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8291 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8007 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18475 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7563 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5107 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11452 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41994 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41994 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6915 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2906 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    99311 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/htx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    99311 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      240 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/hyperliquid.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2488 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5877 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3537 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25491 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27937 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24579 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8675 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3373 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25902 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3093 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9414 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45891 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/onetrading.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2054 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/p2b.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2843 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15203 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8073 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5219 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1969 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1372 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/tradeogre.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19631 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2782 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8029 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10216 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5820 2024-04-05 16:44:47.000000 ccxt-4.2.90/ccxt/abstract/zonda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41420 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46908 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   151300 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.791732 ccxt-4.2.90/ccxt/async_support/
--rw-rw-r--   0 travis    (2000) travis    (2000)    15409 2024-04-05 17:15:15.000000 ccxt-4.2.90/ccxt/async_support/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41644 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/ace.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    47120 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152088 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/ascendex.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.795732 ccxt-4.2.90/ccxt/async_support/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)       67 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91193 2024-04-05 17:15:15.000000 ccxt-4.2.90/ccxt/async_support/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/throttler.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.795732 ccxt-4.2.90/ccxt/async_support/base/ws/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5751 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/aiohttp_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8100 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/cache.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3864 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/fast_client.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1499 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2067 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/future.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6478 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/base/ws/order_book_side.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1188 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92639 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   597430 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9177 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   182980 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bingx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37113 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41949 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      492 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48385 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      516 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71968 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   158863 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41694 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   409327 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45564 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   200023 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   125968 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68685 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      485 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   136831 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71115 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92342 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   102163 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitteam.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91855 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20460 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    49180 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    99698 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/blofin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36828 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23535 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51678 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36724 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   403300 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70003 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   179277 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87677 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinbaseinternational.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    78883 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35719 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   248969 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103489 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinlist.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46056 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80729 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinmetro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46987 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    90866 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23615 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   128712 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87181 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   151045 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   159951 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   170709 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   114835 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1250 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   316838 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      459 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80310 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   153853 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      469 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76327 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   420760 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/htx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      452 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88457 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92896 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/hyperliquid.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    73285 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    32284 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    52087 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   122621 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   116143 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   215759 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   119121 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    96396 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    79256 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   115876 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45981 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51143 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35425 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   237552 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   108892 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    64473 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38180 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   151629 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   350170 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    88409 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/onetrading.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    54316 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/p2b.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24391 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   219437 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   102496 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77756 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76610 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71498 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   123364 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23955 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/tradeogre.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    82082 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   113950 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51493 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101482 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   127108 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    53350 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28134 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80866 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/async_support/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.795732 ccxt-4.2.90/ccxt/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/base/decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4099 2024-04-05 16:59:19.000000 ccxt-4.2.90/ccxt/base/errors.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   254040 2024-04-05 17:15:15.000000 ccxt-4.2.90/ccxt/base/exchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/base/precise.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7690 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/base/types.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1174 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92185 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bigone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   594870 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9163 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   181968 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bingx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36901 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bit2c.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41689 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      478 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitbay.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48131 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitbns.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      502 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71528 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   158129 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41386 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitflyer.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   407793 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45334 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   199103 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   125408 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68281 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      471 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   136173 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    70729 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitso.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91842 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101831 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitteam.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    91421 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20332 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bl3p.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    48788 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    99114 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/blofin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36550 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/btcalpha.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23341 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/btcbox.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51328 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/btcmarkets.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36506 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/btcturk.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   401556 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    69653 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   178320 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87123 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinbaseinternational.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    78377 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35513 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   247699 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   103001 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinlist.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45790 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinmate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80409 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinmetro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46745 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    90432 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinsph.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23463 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/coinspot.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   128158 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    86759 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   150437 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/delta.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   159181 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   169739 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/digifinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   114203 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/flowbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1236 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/fmfwio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   315184 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      445 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    79797 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   152807 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      455 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/hitbtc3.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75893 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   418422 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/htx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      438 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87957 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    92412 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/hyperliquid.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    72809 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    32024 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51779 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/indodax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   122037 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   115673 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   214705 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   118519 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95980 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/kuna.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    78780 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/latoken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   115164 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45643 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    50829 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/lykke.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35183 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/mercado.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   236392 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   108368 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    64105 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/novadax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37860 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/oceanex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   151105 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   348745 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    87957 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/onetrading.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    54074 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/p2b.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24203 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/paymium.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   218625 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   101948 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    77370 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/poloniexfutures.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.835736 ccxt-4.2.90/ccxt/pro/
--rw-rw-r--   0 travis    (2000) travis    (2000)     6999 2024-04-05 17:15:15.000000 ccxt-4.2.90/ccxt/pro/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27167 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/alpaca.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35432 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/ascendex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1351 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bequant.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   136416 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/binance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      976 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/binancecoinm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2321 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/binanceus.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/binanceusdm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42110 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bingx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1181 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitcoincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24826 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitfinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42744 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitfinex2.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71862 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitget.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16799 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bithumb.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    62382 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitmart.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    67893 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitmex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18724 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitopro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      415 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitpanda.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16448 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitrue.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20886 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitstamp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    56143 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bitvavo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29560 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/blockchaincom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75022 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/bybit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    58370 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/cex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22578 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coinbase.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    25428 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coinbaseinternational.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    38945 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coinbasepro.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7789 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coincheck.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    45042 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coinex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    15652 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/coinone.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42643 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/cryptocom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22355 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/currencycom.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41035 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/deribit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    24527 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/exmo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    52489 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/gate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      391 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/gateio.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    36641 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/gemini.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    56285 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/hitbtc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    21957 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/hollaex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    95779 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/htx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      385 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/huobi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23174 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/huobijp.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20613 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/hyperliquid.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    28282 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/idex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11063 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/independentreserve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    56274 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/kraken.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    60165 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/krakenfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    46699 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/kucoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42667 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/kucoinfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35100 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/lbank.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12348 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/luno.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    42551 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/mexc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22643 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/ndax.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30385 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/okcoin.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    68821 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/okx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    54634 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/onetrading.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    17877 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/p2b.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    61032 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/phemex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51236 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/poloniex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    41480 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/poloniexfutures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22822 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/probit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     9654 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    30004 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    35021 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    37022 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/pro/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76218 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/probit.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.835736 ccxt-4.2.90/ccxt/static_dependencies/
--rw-rw-r--   0 travis    (2000) travis    (2000)       84 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.839736 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/
--rw-rw-r--   0 travis    (2000) travis    (2000)      594 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/_version.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/curves.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/der.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/ecdsa.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/ellipticcurve.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/keys.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/numbertheory.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/rfc6979.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ecdsa/util.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.843736 ccxt-4.2.90/ccxt/static_dependencies/ethereum/
--rw-rw-r--   0 travis    (2000) travis    (2000)      171 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.851737 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/
--rw-rw-r--   0 travis    (2000) travis    (2000)      276 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      490 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/abi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4861 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/base.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6871 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/codec.py
--rw-rw-r--   0 travis    (2000) travis    (2000)       51 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/constants.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16828 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/decoding.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20162 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/encoding.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2941 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/exceptions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    12358 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/grammar.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      387 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/packed.py
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/py.typed
--rw-rw-r--   0 travis    (2000) travis    (2000)    19329 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/registry.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.851737 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/tools/
--rw-rw-r--   0 travis    (2000) travis    (2000)       65 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/tools/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5742 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/tools/_strategies.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.855737 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2097 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/numeric.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      426 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/padding.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      436 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/string.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.859737 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/
--rw-rw-r--   0 travis    (2000) travis    (2000)       48 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.859737 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/
--rw-rw-r--   0 travis    (2000) travis    (2000)       80 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7126 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/encoding_and_hashing.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      982 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/helpers.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    10588 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/messages.py
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/py.typed
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.863738 ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/
--rw-rw-r--   0 travis    (2000) travis    (2000)       60 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1687 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/_utils.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1768 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/main.py
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/py.typed
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.863738 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/
--rw-rw-r--   0 travis    (2000) travis    (2000)      913 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)       85 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/abi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      191 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/bls.py
--rw-rw-r--   0 travis    (2000) travis    (2000)       71 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/discovery.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      117 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/encoding.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      458 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/enums.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      173 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/ethpm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      546 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/evm.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20845 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/networks.py
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/py.typed
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.871739 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/
--rw-rw-r--   0 travis    (2000) travis    (2000)     2162 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2123 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/abi.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4364 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/address.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4342 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/applicators.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5498 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/conversions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3021 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/currency.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.871739 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/curried/
--rw-rw-r--   0 travis    (2000) travis    (2000)     6398 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/curried/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      499 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/debug.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3997 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/decorators.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      199 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/encoding.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      110 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/exceptions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2100 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/functional.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1826 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/hexadecimal.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4137 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/humanize.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5155 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/logging.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      842 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/module_loading.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1190 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/numeric.py
--rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/py.typed
--rw-rw-r--   0 travis    (2000) travis    (2000)     1001 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/toolz.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1074 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/types.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.875739 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/typing/
--rw-rw-r--   0 travis    (2000) travis    (2000)      325 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/typing/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      189 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/typing/misc.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1757 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/units.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.875739 ccxt-4.2.90/ccxt/static_dependencies/keccak/
--rw-rw-r--   0 travis    (2000) travis    (2000)       45 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/keccak/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/keccak/keccak.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.879739 ccxt-4.2.90/ccxt/static_dependencies/msgpack/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1077 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/msgpack/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/msgpack/exceptions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5629 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/msgpack/ext.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    33175 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/msgpack/fallback.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.887740 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/
--rw-rw-r--   0 travis    (2000) travis    (2000)      385 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3603 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/exceptions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    16864 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/expressions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19190 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/grammar.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    13084 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/nodes.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1087 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/parsimonious/utils.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.895741 ccxt-4.2.90/ccxt/static_dependencies/toolz/
--rw-rw-r--   0 travis    (2000) travis    (2000)      374 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20555 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/_signatures.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    18447 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/_version.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      997 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/compatibility.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.899741 ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/
--rw-rw-r--   0 travis    (2000) travis    (2000)     2226 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      344 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/exceptions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      525 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/operator.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     8955 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/dicttoolz.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    29821 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/functoolz.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27612 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/itertoolz.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1256 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/recipes.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      139 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/static_dependencies/toolz/utils.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.903741 ccxt-4.2.90/ccxt/test/
--rw-rw-r--   0 travis    (2000) travis    (2000)      141 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/__init__.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.919742 ccxt-4.2.90/ccxt/test/base/
--rw-rw-r--   0 travis    (2000) travis    (2000)     1889 2024-04-05 16:59:24.000000 ccxt-4.2.90/ccxt/test/base/__init__.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      978 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_account.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2931 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_balance.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1808 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_borrow_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1500 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_borrow_rate.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_calculate_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2024-04-05 16:59:21.000000 ccxt-4.2.90/ccxt/test/base/test_crypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     4472 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_currency.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5235 2024-04-05 16:59:20.000000 ccxt-4.2.90/ccxt/test/base/test_datetime.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_decimal_to_precision.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_deep_extend.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2452 2024-04-05 17:00:47.000000 ccxt-4.2.90/ccxt/test/base/test_deposit_withdrawal.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_exchange_datetime_functions.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1351 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_funding_rate_history.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1332 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_last_price.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2283 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_ledger_entry.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_ledger_item.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1656 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_leverage_tier.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      869 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_margin_mode.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1730 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_margin_modification.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    11632 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_market.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    22083 2024-04-05 16:59:20.000000 ccxt-4.2.90/ccxt/test/base/test_number.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2036 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_ohlcv.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1547 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_open_interest.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3964 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_order.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3586 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_order_book.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3884 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_position.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    19998 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_shared_methods.py
--rw-rw-r--   0 travis    (2000) travis    (2000)      722 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_status.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_throttle.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     5810 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_ticker.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     2336 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_trade.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1066 2024-04-05 17:00:48.000000 ccxt-4.2.90/ccxt/test/base/test_trading_fee.py
--rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/test/base/test_transaction.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    76388 2024-04-05 16:59:23.000000 ccxt-4.2.90/ccxt/test/test_async.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    75387 2024-04-05 16:59:24.000000 ccxt-4.2.90/ccxt/test/test_sync.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    71136 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/timex.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   123002 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/tokocrypto.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    23761 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/tradeogre.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    81600 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/upbit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   113400 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/wavesexchange.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    51191 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/wazirx.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   100934 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/whitebit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)   126326 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/woo.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    53066 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/yobit.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    27952 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/zaif.py
--rw-rw-r--   0 travis    (2000) travis    (2000)    80552 2024-04-05 16:42:51.000000 ccxt-4.2.90/ccxt/zonda.py
-drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-05 17:16:37.723726 ccxt-4.2.90/ccxt.egg-info/
--rw-r--r--   0 travis    (2000) travis    (2000)   114404 2024-04-05 17:16:37.000000 ccxt-4.2.90/ccxt.egg-info/PKG-INFO
--rw-rw-r--   0 travis    (2000) travis    (2000)    15741 2024-04-05 17:16:37.000000 ccxt-4.2.90/ccxt.egg-info/SOURCES.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        1 2024-04-05 17:16:37.000000 ccxt-4.2.90/ccxt.egg-info/dependency_links.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)      218 2024-04-05 17:16:37.000000 ccxt-4.2.90/ccxt.egg-info/requires.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)        5 2024-04-05 17:16:37.000000 ccxt-4.2.90/ccxt.egg-info/top_level.txt
--rw-rw-r--   0 travis    (2000) travis    (2000)    12515 2024-04-05 17:15:16.000000 ccxt-4.2.90/package.json
--rw-rw-r--   0 travis    (2000) travis    (2000)      205 2024-04-05 17:16:37.919742 ccxt-4.2.90/setup.cfg
--rwxrwxr-x   0 travis    (2000) travis    (2000)     3071 2024-04-05 16:42:51.000000 ccxt-4.2.90/setup.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.595788 ccxt-4.2.91/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1068 2024-04-07 17:14:30.000000 ccxt-4.2.91/LICENSE.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      101 2024-04-07 16:43:56.000000 ccxt-4.2.91/MANIFEST.in
+-rw-rw-r--   0 travis    (2000) travis    (2000)   114404 2024-04-07 17:15:45.599789 ccxt-4.2.91/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)   102253 2024-04-07 16:43:56.000000 ccxt-4.2.91/README.rst
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.387772 ccxt-4.2.91/ccxt/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15656 2024-04-07 17:14:28.000000 ccxt-4.2.91/ccxt/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.451777 ccxt-4.2.91/ccxt/abstract/
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/abstract/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1448 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10382 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11394 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4895 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    98471 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91751 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15876 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bingx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2830 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2735 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5820 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4082 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7605 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19194 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    89841 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3443 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14031 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10774 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3295 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9379 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4025 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27231 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3478 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitteam.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2024 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2638 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3978 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/blofin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1380 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      849 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3690 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1777 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48391 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3311 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14395 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4770 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinbaseinternational.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7162 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3417 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    34678 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6538 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinlist.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6842 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3864 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinmetro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8291 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8007 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2707 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18475 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7563 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5107 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15499 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11452 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6177 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41994 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41994 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6915 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15601 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2906 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    99311 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/htx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    99311 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14331 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      240 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/hyperliquid.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2129 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4165 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2488 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5877 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3537 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25491 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27937 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24579 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7168 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8675 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3373 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2960 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2357 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25902 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11878 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3093 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1721 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9414 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45891 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3859 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/onetrading.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2054 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/p2b.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2843 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15203 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8073 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5219 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1969 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5875 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4094 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1372 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/tradeogre.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3576 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19631 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2782 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8029 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10216 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1339 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3935 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5820 2024-04-07 16:45:53.000000 ccxt-4.2.91/ccxt/abstract/zonda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41420 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46908 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   151300 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.539784 ccxt-4.2.91/ccxt/async_support/
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15409 2024-04-07 17:14:28.000000 ccxt-4.2.91/ccxt/async_support/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41644 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/ace.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    47120 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152088 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/ascendex.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.539784 ccxt-4.2.91/ccxt/async_support/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       67 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91193 2024-04-07 17:14:28.000000 ccxt-4.2.91/ccxt/async_support/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1847 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/throttler.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.543784 ccxt-4.2.91/ccxt/async_support/base/ws/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1791 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5751 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/aiohttp_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8100 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/cache.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7289 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3864 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/fast_client.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1499 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2067 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/future.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2894 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6478 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/base/ws/order_book_side.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1188 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92639 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   597430 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1683 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9177 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2518 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   182980 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bingx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37113 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41949 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      492 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48385 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      516 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71968 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   158863 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41694 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   409327 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45564 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   200023 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   125968 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68685 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      485 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   136831 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71115 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92342 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   102163 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitteam.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91855 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20460 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    49180 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    99698 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/blofin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36828 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23535 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51678 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36724 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   403300 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70003 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   179388 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87677 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinbaseinternational.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    78883 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35719 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   248969 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103489 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinlist.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46056 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80729 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinmetro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46987 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    90866 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23615 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   128712 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87181 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   151045 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   159951 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   170709 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   114835 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1183 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1250 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   316838 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      459 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80359 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   153853 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      469 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    76327 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   420760 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/htx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      452 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88457 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92896 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/hyperliquid.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    73285 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    32284 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    52087 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   122568 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   116143 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   215759 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   119121 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    96396 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    79256 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   115876 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45981 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51143 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35425 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   237552 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   108892 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    64473 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38180 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   151629 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   350154 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    88409 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/onetrading.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    54316 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/p2b.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24391 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   219437 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   102496 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77756 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    76610 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71498 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   123364 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23955 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/tradeogre.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    82082 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113950 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51493 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101482 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   127108 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    53350 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28134 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80866 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/async_support/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.543784 ccxt-4.2.91/ccxt/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1320 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6634 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/base/decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4099 2024-04-07 16:58:52.000000 ccxt-4.2.91/ccxt/base/errors.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   253647 2024-04-07 17:14:28.000000 ccxt-4.2.91/ccxt/base/exchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8565 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/base/precise.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7690 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/base/types.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1174 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92185 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bigone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   594870 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1645 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9163 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2480 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   181968 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bingx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36901 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bit2c.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41689 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      478 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitbay.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48131 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitbns.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      502 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71528 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   158129 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41386 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitflyer.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   407793 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45334 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   199103 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   125408 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68281 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      471 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   136173 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    70729 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitso.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91842 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101831 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitteam.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    91421 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20332 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bl3p.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    48788 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    99114 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/blofin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36550 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/btcalpha.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23341 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/btcbox.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51328 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/btcmarkets.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36506 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/btcturk.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   401556 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    69653 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   178431 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87123 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinbaseinternational.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    78377 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35513 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   247699 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   103001 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinlist.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45790 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinmate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80409 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinmetro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46745 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    90432 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinsph.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23463 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/coinspot.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   128158 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    86759 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   150437 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/delta.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   159181 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   169739 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/digifinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   114203 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1169 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/flowbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1236 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/fmfwio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   315184 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      445 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    79846 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   152807 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      455 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/hitbtc3.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75893 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   418422 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/htx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      438 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87957 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    92412 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/hyperliquid.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    72809 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    32024 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51779 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/indodax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   121984 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   115673 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   214705 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   118519 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95980 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/kuna.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    78780 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/latoken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   115164 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45643 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    50829 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/lykke.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35183 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/mercado.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   236392 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   108368 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    64105 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/novadax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37860 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/oceanex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   151105 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   348729 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    87957 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/onetrading.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    54074 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/p2b.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24203 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/paymium.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   218625 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   101948 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77370 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/poloniexfutures.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.563786 ccxt-4.2.91/ccxt/pro/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6999 2024-04-07 17:14:28.000000 ccxt-4.2.91/ccxt/pro/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27167 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/alpaca.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35432 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/ascendex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1351 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bequant.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   136416 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/binance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      976 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/binancecoinm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2321 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/binanceus.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1357 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/binanceusdm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42110 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bingx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1181 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitcoincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24826 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitfinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42744 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitfinex2.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71862 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitget.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16799 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bithumb.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    62382 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitmart.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68956 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitmex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18724 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitopro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      415 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitpanda.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16448 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitrue.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20886 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitstamp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    56143 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bitvavo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29560 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/blockchaincom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75022 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/bybit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    58370 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/cex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22578 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coinbase.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    25428 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coinbaseinternational.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    38945 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coinbasepro.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7789 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coincheck.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    45042 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coinex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15652 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/coinone.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42643 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/cryptocom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22355 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/currencycom.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41035 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/deribit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    24527 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/exmo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    52489 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/gate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      391 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/gateio.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    36641 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/gemini.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    56285 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/hitbtc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    21957 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/hollaex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    95779 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/htx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      385 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/huobi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23174 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/huobijp.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20613 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/hyperliquid.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    28282 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/idex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11063 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/independentreserve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    56274 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/kraken.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    60165 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/krakenfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    50271 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/kucoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    46006 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/kucoinfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35100 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/lbank.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12348 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/luno.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    42551 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/mexc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22643 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/ndax.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30385 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/okcoin.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    68821 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/okx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    54634 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/onetrading.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    17877 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/p2b.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    61032 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/phemex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51236 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/poloniex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    41480 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/poloniexfutures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22822 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/probit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     9654 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    30004 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    35021 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    37022 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/pro/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    76218 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/probit.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.567786 ccxt-4.2.91/ccxt/static_dependencies/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       84 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.567786 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      594 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18461 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/_version.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1886 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/curves.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6942 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/der.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11336 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/ecdsa.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5517 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/ellipticcurve.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    14201 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/keys.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    13468 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/numbertheory.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2572 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/rfc6979.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10037 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ecdsa/util.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.567786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      171 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.571786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      276 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      490 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/abi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4861 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/base.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6871 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/codec.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)       51 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/constants.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16828 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/decoding.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20162 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/encoding.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2941 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/exceptions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12358 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/grammar.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      387 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/packed.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/py.typed
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19329 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/registry.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.571786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/tools/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       65 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/tools/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5742 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/tools/_strategies.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.571786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2097 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/numeric.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      426 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/padding.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      436 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/string.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.571786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       48 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.571786 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       80 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7126 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/encoding_and_hashing.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      982 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/helpers.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    10588 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/messages.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/py.typed
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.575787 ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       60 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1687 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/_utils.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1768 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/main.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/py.typed
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.575787 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      913 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)       85 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/abi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      191 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/bls.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)       71 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/discovery.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      117 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/encoding.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      458 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/enums.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      173 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/ethpm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      546 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/evm.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20845 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/networks.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/py.typed
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2162 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2123 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/abi.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4364 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/address.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4342 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/applicators.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5498 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/conversions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3021 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/currency.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/curried/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6398 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/curried/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      499 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/debug.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3997 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/decorators.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      199 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/encoding.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      110 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/exceptions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2100 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/functional.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1826 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/hexadecimal.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4137 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/humanize.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5155 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/logging.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      842 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/module_loading.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1190 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/numeric.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)        0 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/py.typed
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1001 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/toolz.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1074 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/types.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/typing/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      325 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/typing/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      189 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/typing/misc.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1757 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/units.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/keccak/
+-rw-rw-r--   0 travis    (2000) travis    (2000)       45 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/keccak/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     6934 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/keccak/keccak.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/msgpack/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1077 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/msgpack/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1081 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/msgpack/exceptions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5629 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/msgpack/ext.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    33175 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/msgpack/fallback.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.583787 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      385 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3603 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/exceptions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    16864 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/expressions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19190 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/grammar.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    13084 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/nodes.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1087 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/parsimonious/utils.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.587788 ccxt-4.2.91/ccxt/static_dependencies/toolz/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      374 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20555 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/_signatures.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    18447 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/_version.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      997 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/compatibility.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.587788 ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2226 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      344 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/exceptions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      525 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/operator.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     8955 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/dicttoolz.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    29821 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/functoolz.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27612 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/itertoolz.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1256 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/recipes.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      139 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/static_dependencies/toolz/utils.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.587788 ccxt-4.2.91/ccxt/test/
+-rw-rw-r--   0 travis    (2000) travis    (2000)      141 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/__init__.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.595788 ccxt-4.2.91/ccxt/test/base/
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1889 2024-04-07 16:58:57.000000 ccxt-4.2.91/ccxt/test/base/__init__.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      978 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_account.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2931 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_balance.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1808 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_borrow_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1500 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_borrow_rate.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1177 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_calculate_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     7702 2024-04-07 16:58:54.000000 ccxt-4.2.91/ccxt/test/base/test_crypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     4472 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_currency.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5235 2024-04-07 16:58:53.000000 ccxt-4.2.91/ccxt/test/base/test_datetime.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    20934 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_decimal_to_precision.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1402 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_deep_extend.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2452 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_deposit_withdrawal.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3592 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_exchange_datetime_functions.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1351 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_funding_rate_history.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1332 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_last_price.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2283 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_ledger_entry.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2154 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_ledger_item.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1656 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_leverage_tier.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      869 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_margin_mode.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1730 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_margin_modification.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    11632 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_market.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    22083 2024-04-07 16:58:53.000000 ccxt-4.2.91/ccxt/test/base/test_number.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2036 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_ohlcv.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1547 2024-04-07 17:00:20.000000 ccxt-4.2.91/ccxt/test/base/test_open_interest.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3964 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_order.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3586 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_order_book.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3884 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_position.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    19998 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_shared_methods.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)      722 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_status.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     3123 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_throttle.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     5810 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_ticker.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     2336 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_trade.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1066 2024-04-07 17:00:21.000000 ccxt-4.2.91/ccxt/test/base/test_trading_fee.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)     1434 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/test/base/test_transaction.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    77013 2024-04-07 16:58:57.000000 ccxt-4.2.91/ccxt/test/test_async.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    75994 2024-04-07 16:58:57.000000 ccxt-4.2.91/ccxt/test/test_sync.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    71136 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/timex.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   123002 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/tokocrypto.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    23761 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/tradeogre.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    81600 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/upbit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   113400 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/wavesexchange.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    51191 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/wazirx.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   100934 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/whitebit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)   126326 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/woo.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    53066 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/yobit.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    27952 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/zaif.py
+-rw-rw-r--   0 travis    (2000) travis    (2000)    80552 2024-04-07 16:43:56.000000 ccxt-4.2.91/ccxt/zonda.py
+drwxrwxr-x   0 travis    (2000) travis    (2000)        0 2024-04-07 17:15:45.391772 ccxt-4.2.91/ccxt.egg-info/
+-rw-r--r--   0 travis    (2000) travis    (2000)   114404 2024-04-07 17:15:45.000000 ccxt-4.2.91/ccxt.egg-info/PKG-INFO
+-rw-rw-r--   0 travis    (2000) travis    (2000)    15741 2024-04-07 17:15:45.000000 ccxt-4.2.91/ccxt.egg-info/SOURCES.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        1 2024-04-07 17:15:45.000000 ccxt-4.2.91/ccxt.egg-info/dependency_links.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)      218 2024-04-07 17:15:45.000000 ccxt-4.2.91/ccxt.egg-info/requires.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)        5 2024-04-07 17:15:45.000000 ccxt-4.2.91/ccxt.egg-info/top_level.txt
+-rw-rw-r--   0 travis    (2000) travis    (2000)    12515 2024-04-07 17:14:29.000000 ccxt-4.2.91/package.json
+-rw-rw-r--   0 travis    (2000) travis    (2000)      205 2024-04-07 17:15:45.599789 ccxt-4.2.91/setup.cfg
+-rwxrwxr-x   0 travis    (2000) travis    (2000)     3071 2024-04-07 16:43:56.000000 ccxt-4.2.91/setup.py
```

### Comparing `ccxt-4.2.90/LICENSE.txt` & `ccxt-4.2.91/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/PKG-INFO` & `ccxt-4.2.91/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 4.2.90
+Version: 4.2.91
 Summary: A JavaScript / TypeScript / Python / C# / PHP cryptocurrency trading library with support for 100+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://github.com/ccxt/ccxt/wiki
@@ -221,21 +221,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@4.2.90/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@4.2.90/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@4.2.91/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@4.2.91/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@4.2.90/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@4.2.91/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-4.2.90/README.rst` & `ccxt-4.2.91/README.rst`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/__init__.py` & `ccxt-4.2.91/ccxt/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -18,15 +18,15 @@
 # AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 # LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 # OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 # SOFTWARE.
 
 # ----------------------------------------------------------------------------
 
-__version__ = '4.2.90'
+__version__ = '4.2.91'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.base.exchange import Exchange                     # noqa: F401
 from ccxt.base.precise import Precise                       # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
```

### Comparing `ccxt-4.2.90/ccxt/abstract/ace.py` & `ccxt-4.2.91/ccxt/abstract/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/alpaca.py` & `ccxt-4.2.91/ccxt/abstract/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/ascendex.py` & `ccxt-4.2.91/ccxt/abstract/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bequant.py` & `ccxt-4.2.91/ccxt/abstract/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bigone.py` & `ccxt-4.2.91/ccxt/abstract/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/binance.py` & `ccxt-4.2.91/ccxt/abstract/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/binancecoinm.py` & `ccxt-4.2.91/ccxt/abstract/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/binanceus.py` & `ccxt-4.2.91/ccxt/abstract/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/binanceusdm.py` & `ccxt-4.2.91/ccxt/abstract/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bingx.py` & `ccxt-4.2.91/ccxt/abstract/bingx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bit2c.py` & `ccxt-4.2.91/ccxt/abstract/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitbank.py` & `ccxt-4.2.91/ccxt/abstract/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitbay.py` & `ccxt-4.2.91/ccxt/abstract/bitbay.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitbns.py` & `ccxt-4.2.91/ccxt/abstract/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitcoincom.py` & `ccxt-4.2.91/ccxt/abstract/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitfinex.py` & `ccxt-4.2.91/ccxt/abstract/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitfinex2.py` & `ccxt-4.2.91/ccxt/abstract/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitflyer.py` & `ccxt-4.2.91/ccxt/abstract/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitget.py` & `ccxt-4.2.91/ccxt/abstract/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bithumb.py` & `ccxt-4.2.91/ccxt/abstract/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitmart.py` & `ccxt-4.2.91/ccxt/abstract/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitmex.py` & `ccxt-4.2.91/ccxt/abstract/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitopro.py` & `ccxt-4.2.91/ccxt/abstract/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitpanda.py` & `ccxt-4.2.91/ccxt/abstract/bitpanda.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitrue.py` & `ccxt-4.2.91/ccxt/abstract/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitso.py` & `ccxt-4.2.91/ccxt/abstract/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitstamp.py` & `ccxt-4.2.91/ccxt/abstract/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitteam.py` & `ccxt-4.2.91/ccxt/abstract/bitteam.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bitvavo.py` & `ccxt-4.2.91/ccxt/abstract/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bl3p.py` & `ccxt-4.2.91/ccxt/abstract/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/blockchaincom.py` & `ccxt-4.2.91/ccxt/abstract/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/blofin.py` & `ccxt-4.2.91/ccxt/abstract/blofin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/btcalpha.py` & `ccxt-4.2.91/ccxt/abstract/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/btcbox.py` & `ccxt-4.2.91/ccxt/abstract/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/btcmarkets.py` & `ccxt-4.2.91/ccxt/abstract/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/btcturk.py` & `ccxt-4.2.91/ccxt/abstract/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/bybit.py` & `ccxt-4.2.91/ccxt/abstract/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/cex.py` & `ccxt-4.2.91/ccxt/abstract/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinbase.py` & `ccxt-4.2.91/ccxt/abstract/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinbaseinternational.py` & `ccxt-4.2.91/ccxt/abstract/coinbaseinternational.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinbasepro.py` & `ccxt-4.2.91/ccxt/abstract/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coincheck.py` & `ccxt-4.2.91/ccxt/abstract/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinex.py` & `ccxt-4.2.91/ccxt/abstract/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinlist.py` & `ccxt-4.2.91/ccxt/abstract/coinlist.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinmate.py` & `ccxt-4.2.91/ccxt/abstract/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinmetro.py` & `ccxt-4.2.91/ccxt/abstract/coinmetro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinone.py` & `ccxt-4.2.91/ccxt/abstract/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinsph.py` & `ccxt-4.2.91/ccxt/abstract/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/coinspot.py` & `ccxt-4.2.91/ccxt/abstract/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/cryptocom.py` & `ccxt-4.2.91/ccxt/abstract/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/currencycom.py` & `ccxt-4.2.91/ccxt/abstract/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/delta.py` & `ccxt-4.2.91/ccxt/abstract/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/deribit.py` & `ccxt-4.2.91/ccxt/abstract/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/digifinex.py` & `ccxt-4.2.91/ccxt/abstract/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/exmo.py` & `ccxt-4.2.91/ccxt/abstract/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/fmfwio.py` & `ccxt-4.2.91/ccxt/abstract/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/gate.py` & `ccxt-4.2.91/ccxt/abstract/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/gateio.py` & `ccxt-4.2.91/ccxt/abstract/gateio.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/gemini.py` & `ccxt-4.2.91/ccxt/abstract/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/hitbtc.py` & `ccxt-4.2.91/ccxt/abstract/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/hitbtc3.py` & `ccxt-4.2.91/ccxt/abstract/hitbtc3.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/hollaex.py` & `ccxt-4.2.91/ccxt/abstract/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/htx.py` & `ccxt-4.2.91/ccxt/abstract/htx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/huobi.py` & `ccxt-4.2.91/ccxt/abstract/huobi.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/huobijp.py` & `ccxt-4.2.91/ccxt/abstract/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/idex.py` & `ccxt-4.2.91/ccxt/abstract/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/independentreserve.py` & `ccxt-4.2.91/ccxt/abstract/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/indodax.py` & `ccxt-4.2.91/ccxt/abstract/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/kraken.py` & `ccxt-4.2.91/ccxt/abstract/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/krakenfutures.py` & `ccxt-4.2.91/ccxt/abstract/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/kucoin.py` & `ccxt-4.2.91/ccxt/abstract/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/kucoinfutures.py` & `ccxt-4.2.91/ccxt/abstract/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/kuna.py` & `ccxt-4.2.91/ccxt/abstract/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/latoken.py` & `ccxt-4.2.91/ccxt/abstract/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/lbank.py` & `ccxt-4.2.91/ccxt/abstract/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/luno.py` & `ccxt-4.2.91/ccxt/abstract/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/lykke.py` & `ccxt-4.2.91/ccxt/abstract/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/mercado.py` & `ccxt-4.2.91/ccxt/abstract/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/mexc.py` & `ccxt-4.2.91/ccxt/abstract/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/ndax.py` & `ccxt-4.2.91/ccxt/abstract/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/novadax.py` & `ccxt-4.2.91/ccxt/abstract/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/oceanex.py` & `ccxt-4.2.91/ccxt/abstract/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/okcoin.py` & `ccxt-4.2.91/ccxt/abstract/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/okx.py` & `ccxt-4.2.91/ccxt/abstract/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/onetrading.py` & `ccxt-4.2.91/ccxt/abstract/onetrading.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/p2b.py` & `ccxt-4.2.91/ccxt/abstract/p2b.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/paymium.py` & `ccxt-4.2.91/ccxt/abstract/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/phemex.py` & `ccxt-4.2.91/ccxt/abstract/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/poloniex.py` & `ccxt-4.2.91/ccxt/abstract/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/poloniexfutures.py` & `ccxt-4.2.91/ccxt/abstract/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/probit.py` & `ccxt-4.2.91/ccxt/abstract/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/timex.py` & `ccxt-4.2.91/ccxt/abstract/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/tokocrypto.py` & `ccxt-4.2.91/ccxt/abstract/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/tradeogre.py` & `ccxt-4.2.91/ccxt/abstract/tradeogre.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/upbit.py` & `ccxt-4.2.91/ccxt/abstract/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/wavesexchange.py` & `ccxt-4.2.91/ccxt/abstract/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/wazirx.py` & `ccxt-4.2.91/ccxt/abstract/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/whitebit.py` & `ccxt-4.2.91/ccxt/abstract/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/woo.py` & `ccxt-4.2.91/ccxt/abstract/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/yobit.py` & `ccxt-4.2.91/ccxt/abstract/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/zaif.py` & `ccxt-4.2.91/ccxt/abstract/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/abstract/zonda.py` & `ccxt-4.2.91/ccxt/abstract/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/ace.py` & `ccxt-4.2.91/ccxt/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/alpaca.py` & `ccxt-4.2.91/ccxt/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/ascendex.py` & `ccxt-4.2.91/ccxt/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/__init__.py` & `ccxt-4.2.91/ccxt/async_support/__init__.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '4.2.90'
+__version__ = '4.2.91'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.async_support.base.exchange import Exchange                   # noqa: F401
 
 from ccxt.base.decimal_to_precision import decimal_to_precision  # noqa: F401
 from ccxt.base.decimal_to_precision import TRUNCATE              # noqa: F401
```

### Comparing `ccxt-4.2.90/ccxt/async_support/ace.py` & `ccxt-4.2.91/ccxt/async_support/ace.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/alpaca.py` & `ccxt-4.2.91/ccxt/async_support/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/ascendex.py` & `ccxt-4.2.91/ccxt/async_support/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/exchange.py` & `ccxt-4.2.91/ccxt/async_support/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 # -*- coding: utf-8 -*-
 
 # -----------------------------------------------------------------------------
 
-__version__ = '4.2.90'
+__version__ = '4.2.91'
 
 # -----------------------------------------------------------------------------
 
 import asyncio
 import concurrent.futures
 import socket
 import certifi
```

### Comparing `ccxt-4.2.90/ccxt/async_support/base/throttler.py` & `ccxt-4.2.91/ccxt/async_support/base/throttler.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/__init__.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/aiohttp_client.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/aiohttp_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/cache.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/cache.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/client.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/client.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/fast_client.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/fast_client.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/functions.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/future.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/future.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/order_book.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/base/ws/order_book_side.py` & `ccxt-4.2.91/ccxt/async_support/base/ws/order_book_side.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bequant.py` & `ccxt-4.2.91/ccxt/async_support/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bigone.py` & `ccxt-4.2.91/ccxt/async_support/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/binance.py` & `ccxt-4.2.91/ccxt/async_support/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/binancecoinm.py` & `ccxt-4.2.91/ccxt/async_support/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/binanceus.py` & `ccxt-4.2.91/ccxt/async_support/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/binanceusdm.py` & `ccxt-4.2.91/ccxt/async_support/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bingx.py` & `ccxt-4.2.91/ccxt/async_support/bingx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bit2c.py` & `ccxt-4.2.91/ccxt/async_support/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitbank.py` & `ccxt-4.2.91/ccxt/async_support/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitbns.py` & `ccxt-4.2.91/ccxt/async_support/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitcoincom.py` & `ccxt-4.2.91/ccxt/async_support/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitfinex.py` & `ccxt-4.2.91/ccxt/async_support/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitfinex2.py` & `ccxt-4.2.91/ccxt/async_support/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitflyer.py` & `ccxt-4.2.91/ccxt/async_support/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitget.py` & `ccxt-4.2.91/ccxt/async_support/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bithumb.py` & `ccxt-4.2.91/ccxt/async_support/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitmart.py` & `ccxt-4.2.91/ccxt/async_support/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitmex.py` & `ccxt-4.2.91/ccxt/async_support/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitopro.py` & `ccxt-4.2.91/ccxt/async_support/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitrue.py` & `ccxt-4.2.91/ccxt/async_support/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitso.py` & `ccxt-4.2.91/ccxt/async_support/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitstamp.py` & `ccxt-4.2.91/ccxt/async_support/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitteam.py` & `ccxt-4.2.91/ccxt/async_support/bitteam.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bitvavo.py` & `ccxt-4.2.91/ccxt/async_support/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bl3p.py` & `ccxt-4.2.91/ccxt/async_support/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/blockchaincom.py` & `ccxt-4.2.91/ccxt/async_support/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/blofin.py` & `ccxt-4.2.91/ccxt/async_support/blofin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/btcalpha.py` & `ccxt-4.2.91/ccxt/async_support/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/btcbox.py` & `ccxt-4.2.91/ccxt/async_support/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/btcmarkets.py` & `ccxt-4.2.91/ccxt/async_support/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/btcturk.py` & `ccxt-4.2.91/ccxt/async_support/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/bybit.py` & `ccxt-4.2.91/ccxt/async_support/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/cex.py` & `ccxt-4.2.91/ccxt/async_support/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinbase.py` & `ccxt-4.2.91/ccxt/async_support/coinbase.py`

 * *Files 0% similar despite different names*

```diff
@@ -334,14 +334,15 @@
                 '6h': 'SIX_HOUR',
                 '1d': 'ONE_DAY',
             },
             'commonCurrencies': {
                 'CGLD': 'CELO',
             },
             'options': {
+                'brokerId': 'ccxt',
                 'stablePairs': ['BUSD-USD', 'CBETH-ETH', 'DAI-USD', 'GUSD-USD', 'GYEN-USD', 'PAX-USD', 'PAX-USDT', 'USDC-EUR', 'USDC-GBP', 'USDT-EUR', 'USDT-GBP', 'USDT-USD', 'USDT-USDC', 'WBTC-BTC'],
                 'fetchCurrencies': {
                     'expires': 5000,
                 },
                 'accounts': [
                     'wallet',
                     'fiat',
@@ -2248,16 +2249,17 @@
         :param str [params.end_time]: '2023-05-25T17:01:05.092Z' for 'GTD' orders
         :param float [params.cost]: *spot market buy only* the quote quantity that can be used alternative for the amount
         :param boolean [params.preview]: default to False, wether to use the test/preview endpoint or not
         :returns dict: an `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         await self.load_markets()
         market = self.market(symbol)
+        id = self.safe_string(self.options, 'brokerId', 'ccxt')
         request = {
-            'client_order_id': self.uuid(),
+            'client_order_id': id + '-' + self.uuid(),
             'product_id': market['id'],
             'side': side.upper(),
         }
         stopPrice = self.safe_number_n(params, ['stopPrice', 'stop_price', 'triggerPrice'])
         stopLossPrice = self.safe_number(params, 'stopLossPrice')
         takeProfitPrice = self.safe_number(params, 'takeProfitPrice')
         isStop = stopPrice is not None
```

### Comparing `ccxt-4.2.90/ccxt/async_support/coinbaseinternational.py` & `ccxt-4.2.91/ccxt/async_support/coinbaseinternational.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinbasepro.py` & `ccxt-4.2.91/ccxt/async_support/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coincheck.py` & `ccxt-4.2.91/ccxt/async_support/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinex.py` & `ccxt-4.2.91/ccxt/async_support/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinlist.py` & `ccxt-4.2.91/ccxt/async_support/coinlist.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinmate.py` & `ccxt-4.2.91/ccxt/async_support/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinmetro.py` & `ccxt-4.2.91/ccxt/async_support/coinmetro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinone.py` & `ccxt-4.2.91/ccxt/async_support/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinsph.py` & `ccxt-4.2.91/ccxt/async_support/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/coinspot.py` & `ccxt-4.2.91/ccxt/async_support/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/cryptocom.py` & `ccxt-4.2.91/ccxt/async_support/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/currencycom.py` & `ccxt-4.2.91/ccxt/async_support/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/delta.py` & `ccxt-4.2.91/ccxt/async_support/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/deribit.py` & `ccxt-4.2.91/ccxt/async_support/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/digifinex.py` & `ccxt-4.2.91/ccxt/async_support/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/exmo.py` & `ccxt-4.2.91/ccxt/async_support/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/flowbtc.py` & `ccxt-4.2.91/ccxt/async_support/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/fmfwio.py` & `ccxt-4.2.91/ccxt/async_support/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/gate.py` & `ccxt-4.2.91/ccxt/async_support/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/gemini.py` & `ccxt-4.2.91/ccxt/async_support/gemini.py`

 * *Files 0% similar despite different names*

```diff
@@ -441,14 +441,15 @@
             #         '<td>btcusd',  # currency
             #         '<td>0.00001 BTC(1e-5)',  # min order size
             #         '<td>0.00000001 BTC(1e-8)',  # tick size
             #         '<td>0.01 USD',  # quote currency price increment
             #         '</tr>'
             #     ]
             marketId = cells[0].replace('<td>', '')
+            marketId = marketId.replace('*', '')
             # base = self.safe_currency_code(baseId)
             minAmountString = cells[1].replace('<td>', '')
             minAmountParts = minAmountString.split(' ')
             minAmount = self.safe_number(minAmountParts, 0)
             amountPrecisionString = cells[2].replace('<td>', '')
             amountPrecisionParts = amountPrecisionString.split(' ')
             idLength = len(marketId) - 0
```

### Comparing `ccxt-4.2.90/ccxt/async_support/hitbtc.py` & `ccxt-4.2.91/ccxt/async_support/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/hollaex.py` & `ccxt-4.2.91/ccxt/async_support/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/htx.py` & `ccxt-4.2.91/ccxt/async_support/htx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/huobijp.py` & `ccxt-4.2.91/ccxt/async_support/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/hyperliquid.py` & `ccxt-4.2.91/ccxt/async_support/hyperliquid.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/idex.py` & `ccxt-4.2.91/ccxt/async_support/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/independentreserve.py` & `ccxt-4.2.91/ccxt/async_support/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/indodax.py` & `ccxt-4.2.91/ccxt/async_support/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/kraken.py` & `ccxt-4.2.91/ccxt/async_support/kraken.py`

 * *Files 1% similar despite different names*

```diff
@@ -1692,5973 +1692,5970 @@
 000069b0: 6620 6c65 6e28 6375 7272 656e 6379 4964  f len(currencyId
 000069c0: 2920 3e20 333a 0a20 2020 2020 2020 2020  ) > 3:.         
 000069d0: 2020 2020 2020 2069 6620 2863 7572 7265         if (curre
 000069e0: 6e63 7949 642e 6669 6e64 2827 5827 2920  ncyId.find('X') 
 000069f0: 3d3d 2030 2920 6f72 2028 6375 7272 656e  == 0) or (curren
 00006a00: 6379 4964 2e66 696e 6428 275a 2729 203d  cyId.find('Z') =
 00006a10: 3d20 3029 3a0a 2020 2020 2020 2020 2020  = 0):.          
-00006a20: 2020 2020 2020 2020 2020 6966 2063 7572            if cur
-00006a30: 7265 6e63 7949 642e 6669 6e64 2827 2e27  rencyId.find('.'
-00006a40: 2920 3e20 303a 0a20 2020 2020 2020 2020  ) > 0:.         
-00006a50: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00006a60: 6574 7572 6e20 7375 7065 7228 6b72 616b  eturn super(krak
-00006a70: 656e 2c20 7365 6c66 292e 7361 6665 5f63  en, self).safe_c
-00006a80: 7572 7265 6e63 7928 6375 7272 656e 6379  urrency(currency
-00006a90: 4964 2c20 6375 7272 656e 6379 290a 2020  Id, currency).  
-00006aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ab0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00006ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ad0: 6375 7272 656e 6379 4964 203d 2063 7572  currencyId = cur
-00006ae0: 7265 6e63 7949 645b 313a 5d0a 2020 2020  rencyId[1:].    
-00006af0: 2020 2020 7265 7475 726e 2073 7570 6572      return super
-00006b00: 286b 7261 6b65 6e2c 2073 656c 6629 2e73  (kraken, self).s
-00006b10: 6166 655f 6375 7272 656e 6379 2863 7572  afe_currency(cur
-00006b20: 7265 6e63 7949 642c 2063 7572 7265 6e63  rencyId, currenc
-00006b30: 7929 0a0a 2020 2020 6465 6620 6170 7065  y)..    def appe
-00006b40: 6e64 5f69 6e61 6374 6976 655f 6d61 726b  nd_inactive_mark
-00006b50: 6574 7328 7365 6c66 2c20 7265 7375 6c74  ets(self, result
-00006b60: 293a 0a20 2020 2020 2020 2023 2072 6573  ):.        # res
-00006b70: 756c 7420 7368 6f75 6c64 2062 6520 616e  ult should be an
-00006b80: 2061 7272 6179 2074 6f20 6170 7065 6e64   array to append
-00006b90: 2074 6f0a 2020 2020 2020 2020 7072 6563   to.        prec
-00006ba0: 6973 696f 6e20 3d20 7b0a 2020 2020 2020  ision = {.      
-00006bb0: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
-00006bc0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00006bd0: 7228 2731 652d 3827 292c 0a20 2020 2020  r('1e-8'),.     
-00006be0: 2020 2020 2020 2027 7072 6963 6527 3a20         'price': 
-00006bf0: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
-00006c00: 7228 2731 652d 3827 292c 0a20 2020 2020  r('1e-8'),.     
-00006c10: 2020 207d 0a20 2020 2020 2020 2063 6f73     }.        cos
-00006c20: 744c 696d 6974 7320 3d20 7b27 6d69 6e27  tLimits = {'min'
-00006c30: 3a20 4e6f 6e65 2c20 276d 6178 273a 204e  : None, 'max': N
-00006c40: 6f6e 657d 0a20 2020 2020 2020 2070 7269  one}.        pri
-00006c50: 6365 4c69 6d69 7473 203d 207b 276d 696e  ceLimits = {'min
-00006c60: 273a 2070 7265 6369 7369 6f6e 5b27 7072  ': precision['pr
-00006c70: 6963 6527 5d2c 2027 6d61 7827 3a20 4e6f  ice'], 'max': No
-00006c80: 6e65 7d0a 2020 2020 2020 2020 616d 6f75  ne}.        amou
-00006c90: 6e74 4c69 6d69 7473 203d 207b 276d 696e  ntLimits = {'min
-00006ca0: 273a 2070 7265 6369 7369 6f6e 5b27 616d  ': precision['am
-00006cb0: 6f75 6e74 275d 2c20 276d 6178 273a 204e  ount'], 'max': N
-00006cc0: 6f6e 657d 0a20 2020 2020 2020 206c 696d  one}.        lim
-00006cd0: 6974 7320 3d20 7b27 616d 6f75 6e74 273a  its = {'amount':
-00006ce0: 2061 6d6f 756e 744c 696d 6974 732c 2027   amountLimits, '
-00006cf0: 7072 6963 6527 3a20 7072 6963 654c 696d  price': priceLim
-00006d00: 6974 732c 2027 636f 7374 273a 2063 6f73  its, 'cost': cos
-00006d10: 744c 696d 6974 737d 0a20 2020 2020 2020  tLimits}.       
-00006d20: 2064 6566 6175 6c74 7320 3d20 7b0a 2020   defaults = {.  
-00006d30: 2020 2020 2020 2020 2020 2764 6172 6b70            'darkp
-00006d40: 6f6f 6c27 3a20 4661 6c73 652c 0a20 2020  ool': False,.   
-00006d50: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00006d60: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00006d70: 2020 2027 6d61 6b65 7227 3a20 4e6f 6e65     'maker': None
-00006d80: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-00006d90: 616b 6572 273a 204e 6f6e 652c 0a20 2020  aker': None,.   
-00006da0: 2020 2020 2020 2020 2027 6163 7469 7665           'active
-00006db0: 273a 2046 616c 7365 2c0a 2020 2020 2020  ': False,.      
-00006dc0: 2020 2020 2020 2770 7265 6369 7369 6f6e        'precision
-00006dd0: 273a 2070 7265 6369 7369 6f6e 2c0a 2020  ': precision,.  
-00006de0: 2020 2020 2020 2020 2020 276c 696d 6974            'limit
-00006df0: 7327 3a20 6c69 6d69 7473 2c0a 2020 2020  s': limits,.    
-00006e00: 2020 2020 7d0a 2020 2020 2020 2020 6d61      }.        ma
-00006e10: 726b 6574 7320 3d20 5b0a 2020 2020 2020  rkets = [.      
-00006e20: 2020 2020 2020 2320 7b27 6964 273a 2027        # {'id': '
-00006e30: 5858 4c4d 5a45 5552 272c 2027 7379 6d62  XXLMZEUR', 'symb
-00006e40: 6f6c 273a 2027 584c 4d2f 4555 5227 2c20  ol': 'XLM/EUR', 
-00006e50: 2762 6173 6527 3a20 2758 4c4d 272c 2027  'base': 'XLM', '
-00006e60: 7175 6f74 6527 3a20 2745 5552 272c 2027  quote': 'EUR', '
-00006e70: 616c 746e 616d 6527 3a20 2758 4c4d 4555  altname': 'XLMEU
-00006e80: 5227 7d2c 0a20 2020 2020 2020 205d 0a20  R'},.        ]. 
-00006e90: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-00006ea0: 7261 6e67 6528 302c 206c 656e 286d 6172  range(0, len(mar
-00006eb0: 6b65 7473 2929 3a0a 2020 2020 2020 2020  kets)):.        
-00006ec0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-00006ed0: 6428 7365 6c66 2e65 7874 656e 6428 6465  d(self.extend(de
-00006ee0: 6661 756c 7473 2c20 6d61 726b 6574 735b  faults, markets[
-00006ef0: 695d 2929 0a20 2020 2020 2020 2072 6574  i])).        ret
-00006f00: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-00006f10: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-00006f20: 6375 7272 656e 6369 6573 2873 656c 662c  currencies(self,
-00006f30: 2070 6172 616d 733d 7b7d 2920 2d3e 2043   params={}) -> C
-00006f40: 7572 7265 6e63 6965 733a 0a20 2020 2020  urrencies:.     
-00006f50: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-00006f60: 6574 6368 6573 2061 6c6c 2061 7661 696c  etches all avail
-00006f70: 6162 6c65 2063 7572 7265 6e63 6965 7320  able currencies 
-00006f80: 6f6e 2061 6e20 6578 6368 616e 6765 0a20  on an exchange. 
-00006f90: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-00006fa0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-00006fb0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-00006fc0: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-00006fd0: 6f70 6572 6174 696f 6e2f 6765 7441 7373  operation/getAss
-00006fe0: 6574 496e 666f 0a20 2020 2020 2020 203a  etInfo.        :
-00006ff0: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
-00007000: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
-00007010: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00007020: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
-00007030: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
-00007040: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-00007050: 743a 2061 6e20 6173 736f 6369 6174 6976  t: an associativ
-00007060: 6520 6469 6374 696f 6e61 7279 206f 6620  e dictionary of 
-00007070: 6375 7272 656e 6369 6573 0a20 2020 2020  currencies.     
-00007080: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-00007090: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-000070a0: 7365 6c66 2e70 7562 6c69 6347 6574 4173  self.publicGetAs
-000070b0: 7365 7473 2870 6172 616d 7329 0a20 2020  sets(params).   
-000070c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-000070d0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-000070e0: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
-000070f0: 3a20 5b5d 2c0a 2020 2020 2020 2020 2320  : [],.        # 
-00007100: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
-00007110: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00007120: 2020 2020 2020 2020 2020 2241 4441 223a            "ADA":
-00007130: 207b 2261 636c 6173 7322 3a20 2263 7572   {"aclass": "cur
-00007140: 7265 6e63 7922 2c20 2261 6c74 6e61 6d65  rency", "altname
-00007150: 223a 2022 4144 4122 2c20 2264 6563 696d  ": "ADA", "decim
-00007160: 616c 7322 3a20 382c 2022 6469 7370 6c61  als": 8, "displa
-00007170: 795f 6465 6369 6d61 6c73 223a 2036 7d2c  y_decimals": 6},
-00007180: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007190: 2020 2020 2020 2022 4243 4822 3a20 7b22         "BCH": {"
-000071a0: 6163 6c61 7373 223a 2022 6375 7272 656e  aclass": "curren
-000071b0: 6379 222c 2022 616c 746e 616d 6522 3a20  cy", "altname": 
-000071c0: 2242 4348 222c 2022 6465 6369 6d61 6c73  "BCH", "decimals
-000071d0: 223a 2031 302c 2022 6469 7370 6c61 795f  ": 10, "display_
-000071e0: 6465 6369 6d61 6c73 223a 2035 7d2c 0a20  decimals": 5},. 
-000071f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00007200: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
-00007210: 2023 2020 2020 2020 2020 207d 2c0a 2020   #         },.  
-00007220: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-00007230: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00007240: 6375 7272 656e 6369 6573 203d 2073 656c  currencies = sel
-00007250: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-00007260: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-00007270: 207b 7d29 0a20 2020 2020 2020 2069 6473   {}).        ids
-00007280: 203d 206c 6973 7428 6375 7272 656e 6369   = list(currenci
-00007290: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
-000072a0: 2020 2072 6573 756c 7420 3d20 7b7d 0a20     result = {}. 
-000072b0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
-000072c0: 7261 6e67 6528 302c 206c 656e 2869 6473  range(0, len(ids
-000072d0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-000072e0: 6964 203d 2069 6473 5b69 5d0a 2020 2020  id = ids[i].    
-000072f0: 2020 2020 2020 2020 6375 7272 656e 6379          currency
-00007300: 203d 2063 7572 7265 6e63 6965 735b 6964   = currencies[id
-00007310: 5d0a 2020 2020 2020 2020 2020 2020 2320  ].            # 
-00007320: 746f 646f 3a20 7769 6c6c 206e 6565 6420  todo: will need 
-00007330: 746f 2072 6574 6869 6e6b 2074 6865 2066  to rethink the f
-00007340: 6565 730a 2020 2020 2020 2020 2020 2020  ees.            
-00007350: 2320 7365 653a 2068 7474 7073 3a2f 2f73  # see: https://s
-00007360: 7570 706f 7274 2e6b 7261 6b65 6e2e 636f  upport.kraken.co
-00007370: 6d2f 6863 2f65 6e2d 7573 2f61 7274 6963  m/hc/en-us/artic
-00007380: 6c65 732f 3230 3138 3933 3630 382d 5768  les/201893608-Wh
-00007390: 6174 2d61 7265 2d74 6865 2d77 6974 6864  at-are-the-withd
-000073a0: 7261 7761 6c2d 6665 6573 2d0a 2020 2020  rawal-fees-.    
-000073b0: 2020 2020 2020 2020 2320 746f 2061 6464          # to add
-000073c0: 2073 7570 706f 7274 2066 6f72 206d 756c   support for mul
-000073d0: 7469 706c 6520 7769 7468 6472 6177 616c  tiple withdrawal
-000073e0: 2f64 6570 6f73 6974 206d 6574 686f 6473  /deposit methods
-000073f0: 2061 6e64 0a20 2020 2020 2020 2020 2020   and.           
-00007400: 2023 2064 6966 6665 7265 6e74 6961 7465   # differentiate
-00007410: 6420 6665 6573 2066 6f72 2065 6163 6820  d fees for each 
-00007420: 7061 7274 6963 756c 6172 206d 6574 686f  particular metho
-00007430: 640a 2020 2020 2020 2020 2020 2020 636f  d.            co
-00007440: 6465 203d 2073 656c 662e 7361 6665 5f63  de = self.safe_c
-00007450: 7572 7265 6e63 795f 636f 6465 2873 656c  urrency_code(sel
-00007460: 662e 7361 6665 5f73 7472 696e 6728 6375  f.safe_string(cu
-00007470: 7272 656e 6379 2c20 2761 6c74 6e61 6d65  rrency, 'altname
-00007480: 2729 290a 2020 2020 2020 2020 2020 2020  ')).            
-00007490: 7072 6563 6973 696f 6e20 3d20 7365 6c66  precision = self
-000074a0: 2e70 6172 7365 5f6e 756d 6265 7228 7365  .parse_number(se
-000074b0: 6c66 2e70 6172 7365 5f70 7265 6369 7369  lf.parse_precisi
-000074c0: 6f6e 2873 656c 662e 7361 6665 5f73 7472  on(self.safe_str
-000074d0: 696e 6728 6375 7272 656e 6379 2c20 2764  ing(currency, 'd
-000074e0: 6563 696d 616c 7327 2929 290a 2020 2020  ecimals'))).    
-000074f0: 2020 2020 2020 2020 2320 6173 7375 6d65          # assume
-00007500: 7320 616c 6c20 6375 7272 656e 6369 6573  s all currencies
-00007510: 2061 7265 2061 6374 6976 6520 6578 6365   are active exce
-00007520: 7074 2074 686f 7365 206c 6973 7465 6420  pt those listed 
-00007530: 6162 6f76 650a 2020 2020 2020 2020 2020  above.          
-00007540: 2020 6163 7469 7665 203d 206e 6f74 2073    active = not s
-00007550: 656c 662e 696e 5f61 7272 6179 2863 6f64  elf.in_array(cod
-00007560: 652c 2073 656c 662e 6f70 7469 6f6e 735b  e, self.options[
-00007570: 2769 6e61 6374 6976 6543 7572 7265 6e63  'inactiveCurrenc
-00007580: 6965 7327 5d29 0a20 2020 2020 2020 2020  ies']).         
-00007590: 2020 2072 6573 756c 745b 636f 6465 5d20     result[code] 
-000075a0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-000075b0: 2020 2020 2769 6427 3a20 6964 2c0a 2020      'id': id,.  
-000075c0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
-000075d0: 6f64 6527 3a20 636f 6465 2c0a 2020 2020  ode': code,.    
-000075e0: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
-000075f0: 6f27 3a20 6375 7272 656e 6379 2c0a 2020  o': currency,.  
-00007600: 2020 2020 2020 2020 2020 2020 2020 276e                'n
-00007610: 616d 6527 3a20 636f 6465 2c0a 2020 2020  ame': code,.    
-00007620: 2020 2020 2020 2020 2020 2020 2761 6374              'act
-00007630: 6976 6527 3a20 6163 7469 7665 2c0a 2020  ive': active,.  
-00007640: 2020 2020 2020 2020 2020 2020 2020 2764                'd
-00007650: 6570 6f73 6974 273a 204e 6f6e 652c 0a20  eposit': None,. 
-00007660: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-00007670: 7769 7468 6472 6177 273a 204e 6f6e 652c  withdraw': None,
-00007680: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007690: 2027 6665 6527 3a20 4e6f 6e65 2c0a 2020   'fee': None,.  
-000076a0: 2020 2020 2020 2020 2020 2020 2020 2770                'p
-000076b0: 7265 6369 7369 6f6e 273a 2070 7265 6369  recision': preci
-000076c0: 7369 6f6e 2c0a 2020 2020 2020 2020 2020  sion,.          
-000076d0: 2020 2020 2020 276c 696d 6974 7327 3a20        'limits': 
-000076e0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-000076f0: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
-00007700: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-00007710: 2020 2020 2020 2020 2020 276d 696e 273a            'min':
-00007720: 2070 7265 6369 7369 6f6e 2c0a 2020 2020   precision,.    
-00007730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00007740: 2020 2020 276d 6178 273a 204e 6f6e 652c      'max': None,
-00007750: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00007760: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00007770: 2020 2020 2020 2020 2020 2020 2777 6974              'wit
-00007780: 6864 7261 7727 3a20 7b0a 2020 2020 2020  hdraw': {.      
-00007790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077a0: 2020 276d 696e 273a 204e 6f6e 652c 0a20    'min': None,. 
-000077b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077c0: 2020 2020 2020 2027 6d61 7827 3a20 4e6f         'max': No
-000077d0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-000077e0: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
-000077f0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-00007800: 2020 2020 2020 2020 2020 2020 2020 276e                'n
-00007810: 6574 776f 726b 7327 3a20 7b7d 2c0a 2020  etworks': {},.  
-00007820: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00007830: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
-00007840: 740a 0a20 2020 2061 7379 6e63 2064 6566  t..    async def
-00007850: 2066 6574 6368 5f74 7261 6469 6e67 5f66   fetch_trading_f
-00007860: 6565 2873 656c 662c 2073 796d 626f 6c3a  ee(self, symbol:
-00007870: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-00007880: 202d 3e20 5472 6164 696e 6746 6565 496e   -> TradingFeeIn
-00007890: 7465 7266 6163 653a 0a20 2020 2020 2020  terface:.       
-000078a0: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-000078b0: 6368 2074 6865 2074 7261 6469 6e67 2066  ch the trading f
-000078c0: 6565 7320 666f 7220 6120 6d61 726b 6574  ees for a market
-000078d0: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
-000078e0: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
-000078f0: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
-00007900: 2f41 6363 6f75 6e74 2d44 6174 612f 6f70  /Account-Data/op
-00007910: 6572 6174 696f 6e2f 6765 7454 7261 6465  eration/getTrade
-00007920: 566f 6c75 6d65 0a20 2020 2020 2020 203a  Volume.        :
-00007930: 7061 7261 6d20 7374 7220 7379 6d62 6f6c  param str symbol
-00007940: 3a20 756e 6966 6965 6420 6d61 726b 6574  : unified market
-00007950: 2073 796d 626f 6c0a 2020 2020 2020 2020   symbol.        
-00007960: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
-00007970: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
-00007980: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00007990: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
-000079a0: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
-000079b0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-000079c0: 6374 3a20 6120 6066 6565 2073 7472 7563  ct: a `fee struc
-000079d0: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-000079e0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-000079f0: 643d 6665 652d 7374 7275 6374 7572 653e  d=fee-structure>
-00007a00: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
-00007a10: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-00007a20: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00007a30: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00007a40: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00007a50: 626f 6c29 0a20 2020 2020 2020 2072 6571  bol).        req
-00007a60: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00007a70: 2020 2020 2027 7061 6972 273a 206d 6172       'pair': mar
-00007a80: 6b65 745b 2769 6427 5d2c 0a20 2020 2020  ket['id'],.     
-00007a90: 2020 2020 2020 2027 6665 652d 696e 666f         'fee-info
-00007aa0: 273a 2054 7275 652c 0a20 2020 2020 2020  ': True,.       
-00007ab0: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
-00007ac0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-00007ad0: 2e70 7269 7661 7465 506f 7374 5472 6164  .privatePostTrad
-00007ae0: 6556 6f6c 756d 6528 7365 6c66 2e65 7874  eVolume(self.ext
-00007af0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-00007b00: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
-00007b10: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-00007b20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00007b30: 2022 6572 726f 7222 3a20 5b5d 2c0a 2020   "error": [],.  
-00007b40: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
-00007b50: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
-00007b60: 2020 2023 2020 2020 2020 2020 2020 2263     #          "c
-00007b70: 7572 7265 6e63 7922 3a20 275a 5553 4427  urrency": 'ZUSD'
-00007b80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00007b90: 2020 2020 2022 766f 6c75 6d65 223a 2027       "volume": '
-00007ba0: 302e 3030 3030 272c 0a20 2020 2020 2020  0.0000',.       
-00007bb0: 2023 2020 2020 2020 2020 2020 2266 6565   #          "fee
-00007bc0: 7322 3a20 7b0a 2020 2020 2020 2020 2320  s": {.        # 
-00007bd0: 2020 2020 2020 2020 2020 2022 5858 4254             "XXBT
-00007be0: 5a55 5344 223a 207b 0a20 2020 2020 2020  ZUSD": {.       
-00007bf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00007c00: 2266 6565 223a 2027 302e 3236 3030 272c  "fee": '0.2600',
-00007c10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007c20: 2020 2020 2020 2020 226d 696e 6665 6522          "minfee"
-00007c30: 3a20 2730 2e31 3030 3027 2c0a 2020 2020  : '0.1000',.    
-00007c40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00007c50: 2020 2022 6d61 7866 6565 223a 2027 302e     "maxfee": '0.
-00007c60: 3236 3030 272c 0a20 2020 2020 2020 2023  2600',.        #
-00007c70: 2020 2020 2020 2020 2020 2020 2020 226e                "n
-00007c80: 6578 7466 6565 223a 2027 302e 3234 3030  extfee": '0.2400
-00007c90: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00007ca0: 2020 2020 2020 2020 2020 2274 6965 7276            "tierv
-00007cb0: 6f6c 756d 6522 3a20 2730 2e30 3030 3027  olume": '0.0000'
-00007cc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00007cd0: 2020 2020 2020 2020 2022 6e65 7874 766f           "nextvo
-00007ce0: 6c75 6d65 223a 2027 3530 3030 302e 3030  lume": '50000.00
-00007cf0: 3030 270a 2020 2020 2020 2020 2320 2020  00'.        #   
-00007d00: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-00007d10: 2020 2023 2020 2020 2020 2020 2020 7d2c     #          },
-00007d20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007d30: 2020 2020 2266 6565 735f 6d61 6b65 7222      "fees_maker"
-00007d40: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00007d50: 2020 2020 2020 2020 2022 5858 4254 5a55           "XXBTZU
-00007d60: 5344 223a 207b 0a20 2020 2020 2020 2023  SD": {.        #
-00007d70: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-00007d80: 6565 223a 2027 302e 3136 3030 272c 0a20  ee": '0.1600',. 
-00007d90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00007da0: 2020 2020 2020 226d 696e 6665 6522 3a20        "minfee": 
-00007db0: 2730 2e30 3030 3027 2c0a 2020 2020 2020  '0.0000',.      
-00007dc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00007dd0: 2022 6d61 7866 6565 223a 2027 302e 3136   "maxfee": '0.16
-00007de0: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
-00007df0: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
-00007e00: 7466 6565 223a 2027 302e 3134 3030 272c  tfee": '0.1400',
-00007e10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007e20: 2020 2020 2020 2020 2274 6965 7276 6f6c          "tiervol
-00007e30: 756d 6522 3a20 2730 2e30 3030 3027 2c0a  ume": '0.0000',.
-00007e40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00007e50: 2020 2020 2020 2022 6e65 7874 766f 6c75         "nextvolu
-00007e60: 6d65 223a 2027 3530 3030 302e 3030 3030  me": '50000.0000
-00007e70: 270a 2020 2020 2020 2020 2320 2020 2020  '.        #     
-00007e80: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00007e90: 2023 2020 2020 2020 2020 2020 7d0a 2020   #          }.  
-00007ea0: 2020 2020 2020 2320 2020 2020 2020 207d        #        }
-00007eb0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00007ec0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00007ed0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00007ee0: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00007ef0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00007f00: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
-00007f10: 726e 2073 656c 662e 7061 7273 655f 7472  rn self.parse_tr
-00007f20: 6164 696e 675f 6665 6528 7265 7375 6c74  ading_fee(result
-00007f30: 2c20 6d61 726b 6574 290a 0a20 2020 2064  , market)..    d
-00007f40: 6566 2070 6172 7365 5f74 7261 6469 6e67  ef parse_trading
-00007f50: 5f66 6565 2873 656c 662c 2072 6573 706f  _fee(self, respo
-00007f60: 6e73 652c 206d 6172 6b65 7429 3a0a 2020  nse, market):.  
-00007f70: 2020 2020 2020 6d61 6b65 7246 6565 7320        makerFees 
-00007f80: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00007f90: 6528 7265 7370 6f6e 7365 2c20 2766 6565  e(response, 'fee
-00007fa0: 735f 6d61 6b65 7227 2c20 7b7d 290a 2020  s_maker', {}).  
-00007fb0: 2020 2020 2020 7461 6b65 7246 6565 7320        takerFees 
-00007fc0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00007fd0: 6528 7265 7370 6f6e 7365 2c20 2766 6565  e(response, 'fee
-00007fe0: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
-00007ff0: 7379 6d62 6f6c 4d61 6b65 7246 6565 203d  symbolMakerFee =
-00008000: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00008010: 286d 616b 6572 4665 6573 2c20 6d61 726b  (makerFees, mark
-00008020: 6574 5b27 6964 275d 2c20 7b7d 290a 2020  et['id'], {}).  
-00008030: 2020 2020 2020 7379 6d62 6f6c 5461 6b65        symbolTake
-00008040: 7246 6565 203d 2073 656c 662e 7361 6665  rFee = self.safe
-00008050: 5f76 616c 7565 2874 616b 6572 4665 6573  _value(takerFees
-00008060: 2c20 6d61 726b 6574 5b27 6964 275d 2c20  , market['id'], 
-00008070: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
-00008080: 726e 207b 0a20 2020 2020 2020 2020 2020  rn {.           
-00008090: 2027 696e 666f 273a 2072 6573 706f 6e73   'info': respons
-000080a0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-000080b0: 7379 6d62 6f6c 273a 206d 6172 6b65 745b  symbol': market[
-000080c0: 2773 796d 626f 6c27 5d2c 0a20 2020 2020  'symbol'],.     
-000080d0: 2020 2020 2020 2027 6d61 6b65 7227 3a20         'maker': 
-000080e0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
-000080f0: 2873 796d 626f 6c4d 616b 6572 4665 652c  (symbolMakerFee,
-00008100: 2027 6665 6527 292c 0a20 2020 2020 2020   'fee'),.       
-00008110: 2020 2020 2027 7461 6b65 7227 3a20 7365       'taker': se
-00008120: 6c66 2e73 6166 655f 6e75 6d62 6572 2873  lf.safe_number(s
-00008130: 796d 626f 6c54 616b 6572 4665 652c 2027  ymbolTakerFee, '
-00008140: 6665 6527 292c 0a20 2020 2020 2020 2020  fee'),.         
-00008150: 2020 2027 7065 7263 656e 7461 6765 273a     'percentage':
-00008160: 2054 7275 652c 0a20 2020 2020 2020 2020   True,.         
-00008170: 2020 2027 7469 6572 4261 7365 6427 3a20     'tierBased': 
-00008180: 5472 7565 2c0a 2020 2020 2020 2020 7d0a  True,.        }.
-00008190: 0a20 2020 2064 6566 2070 6172 7365 5f62  .    def parse_b
-000081a0: 6964 5f61 736b 2873 656c 662c 2062 6964  id_ask(self, bid
-000081b0: 6173 6b2c 2070 7269 6365 4b65 793a 2049  ask, priceKey: I
-000081c0: 6e64 6578 5479 7065 203d 2030 2c20 616d  ndexType = 0, am
-000081d0: 6f75 6e74 4b65 793a 2049 6e64 6578 5479  ountKey: IndexTy
-000081e0: 7065 203d 2031 2c20 636f 756e 744f 7249  pe = 1, countOrI
-000081f0: 644b 6579 3a20 496e 6465 7854 7970 6520  dKey: IndexType 
-00008200: 3d20 3229 3a0a 2020 2020 2020 2020 7072  = 2):.        pr
-00008210: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00008220: 6e75 6d62 6572 2862 6964 6173 6b2c 2070  number(bidask, p
-00008230: 7269 6365 4b65 7929 0a20 2020 2020 2020  riceKey).       
-00008240: 2061 6d6f 756e 7420 3d20 7365 6c66 2e73   amount = self.s
-00008250: 6166 655f 6e75 6d62 6572 2862 6964 6173  afe_number(bidas
-00008260: 6b2c 2061 6d6f 756e 744b 6579 290a 2020  k, amountKey).  
-00008270: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-00008280: 3d20 7365 6c66 2e73 6166 655f 696e 7465  = self.safe_inte
-00008290: 6765 7228 6269 6461 736b 2c20 3229 0a20  ger(bidask, 2). 
-000082a0: 2020 2020 2020 2072 6574 7572 6e20 5b70         return [p
-000082b0: 7269 6365 2c20 616d 6f75 6e74 2c20 7469  rice, amount, ti
-000082c0: 6d65 7374 616d 705d 0a0a 2020 2020 6173  mestamp]..    as
-000082d0: 796e 6320 6465 6620 6665 7463 685f 6f72  ync def fetch_or
-000082e0: 6465 725f 626f 6f6b 2873 656c 662c 2073  der_book(self, s
-000082f0: 796d 626f 6c3a 2073 7472 2c20 6c69 6d69  ymbol: str, limi
-00008300: 743a 2049 6e74 203d 204e 6f6e 652c 2070  t: Int = None, p
-00008310: 6172 616d 733d 7b7d 2920 2d3e 204f 7264  arams={}) -> Ord
-00008320: 6572 426f 6f6b 3a0a 2020 2020 2020 2020  erBook:.        
-00008330: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-00008340: 6865 7320 696e 666f 726d 6174 696f 6e20  hes information 
-00008350: 6f6e 206f 7065 6e20 6f72 6465 7273 2077  on open orders w
-00008360: 6974 6820 6269 6428 6275 7929 2061 6e64  ith bid(buy) and
-00008370: 2061 736b 2873 656c 6c29 2070 7269 6365   ask(sell) price
-00008380: 732c 2076 6f6c 756d 6573 2061 6e64 206f  s, volumes and o
-00008390: 7468 6572 2064 6174 610a 2020 2020 2020  ther data.      
-000083a0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
-000083b0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
-000083c0: 7265 7374 2f23 7461 672f 5370 6f74 2d4d  rest/#tag/Spot-M
-000083d0: 6172 6b65 742d 4461 7461 2f6f 7065 7261  arket-Data/opera
-000083e0: 7469 6f6e 2f67 6574 4f72 6465 7242 6f6f  tion/getOrderBoo
-000083f0: 6b0a 2020 2020 2020 2020 3a70 6172 616d  k.        :param
-00008400: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
-00008410: 6669 6564 2073 796d 626f 6c20 6f66 2074  fied symbol of t
-00008420: 6865 206d 6172 6b65 7420 746f 2066 6574  he market to fet
-00008430: 6368 2074 6865 206f 7264 6572 2062 6f6f  ch the order boo
-00008440: 6b20 666f 720a 2020 2020 2020 2020 3a70  k for.        :p
-00008450: 6172 616d 2069 6e74 205b 6c69 6d69 745d  aram int [limit]
-00008460: 3a20 7468 6520 6d61 7869 6d75 6d20 616d  : the maximum am
-00008470: 6f75 6e74 206f 6620 6f72 6465 7220 626f  ount of order bo
-00008480: 6f6b 2065 6e74 7269 6573 2074 6f20 7265  ok entries to re
-00008490: 7475 726e 0a20 2020 2020 2020 203a 7061  turn.        :pa
-000084a0: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
-000084b0: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
-000084c0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-000084d0: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
-000084e0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-000084f0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-00008500: 2041 2064 6963 7469 6f6e 6172 7920 6f66   A dictionary of
-00008510: 2060 6f72 6465 7220 626f 6f6b 2073 7472   `order book str
-00008520: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-00008530: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-00008540: 2f3f 6964 3d6f 7264 6572 2d62 6f6f 6b2d  /?id=order-book-
-00008550: 7374 7275 6374 7572 653e 6020 696e 6465  structure>` inde
-00008560: 7865 6420 6279 206d 6172 6b65 7420 7379  xed by market sy
-00008570: 6d62 6f6c 730a 2020 2020 2020 2020 2222  mbols.        ""
-00008580: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-00008590: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-000085a0: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
-000085b0: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-000085c0: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-000085d0: 2069 6620 6d61 726b 6574 5b27 6461 726b   if market['dark
-000085e0: 706f 6f6c 275d 3a0a 2020 2020 2020 2020  pool']:.        
-000085f0: 2020 2020 7261 6973 6520 4578 6368 616e      raise Exchan
-00008600: 6765 4572 726f 7228 7365 6c66 2e69 6420  geError(self.id 
-00008610: 2b20 2720 6665 7463 684f 7264 6572 426f  + ' fetchOrderBo
-00008620: 6f6b 2829 2064 6f65 7320 6e6f 7420 7072  ok() does not pr
-00008630: 6f76 6964 6520 616e 206f 7264 6572 2062  ovide an order b
-00008640: 6f6f 6b20 666f 7220 6461 726b 706f 6f6c  ook for darkpool
-00008650: 2073 796d 626f 6c20 2720 2b20 7379 6d62   symbol ' + symb
-00008660: 6f6c 290a 2020 2020 2020 2020 7265 7175  ol).        requ
-00008670: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00008680: 2020 2020 2770 6169 7227 3a20 6d61 726b      'pair': mark
-00008690: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-000086a0: 2020 7d0a 2020 2020 2020 2020 6966 206c    }.        if l
-000086b0: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
-000086c0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000086d0: 7175 6573 745b 2763 6f75 6e74 275d 203d  quest['count'] =
-000086e0: 206c 696d 6974 2020 2320 3130 300a 2020   limit  # 100.  
-000086f0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00008700: 2061 7761 6974 2073 656c 662e 7075 626c   await self.publ
-00008710: 6963 4765 7444 6570 7468 2873 656c 662e  icGetDepth(self.
-00008720: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00008730: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-00008740: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00008750: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00008760: 2020 2020 2022 6572 726f 7222 3a5b 5d2c       "error":[],
-00008770: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00008780: 2020 2022 7265 7375 6c74 223a 7b0a 2020     "result":{.  
-00008790: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000087a0: 2020 2020 2258 4554 4858 5842 5422 3a7b      "XETHXXBT":{
-000087b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000087c0: 2020 2020 2020 2020 2020 2022 6173 6b73             "asks
-000087d0: 223a 5b0a 2020 2020 2020 2020 2320 2020  ":[.        #   
-000087e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000087f0: 2020 5b22 302e 3032 3334 3830 222c 2234    ["0.023480","4
-00008800: 2e30 3030 222c 3135 3836 3332 3133 3037  .000",1586321307
-00008810: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-00008820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008830: 205b 2230 2e30 3233 3439 3022 2c22 3530   ["0.023490","50
-00008840: 2e30 3935 222c 3135 3836 3332 3133 3036  .095",1586321306
-00008850: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-00008860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008870: 205b 2230 2e30 3233 3530 3022 2c22 3238   ["0.023500","28
-00008880: 2e35 3335 222c 3135 3836 3332 3133 3032  .535",1586321302
-00008890: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-000088a0: 2020 2020 2020 2020 2020 2020 205d 2c0a               ],.
-000088b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000088c0: 2020 2020 2020 2020 2020 2262 6964 7322            "bids"
-000088d0: 3a5b 0a20 2020 2020 2020 2023 2020 2020  :[.        #    
-000088e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000088f0: 205b 2230 2e30 3233 3437 3022 2c22 3539   ["0.023470","59
-00008900: 2e35 3830 222c 3135 3836 3332 3133 3037  .580",1586321307
-00008910: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-00008920: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008930: 205b 2230 2e30 3233 3436 3022 2c22 3230   ["0.023460","20
-00008940: 2e30 3030 222c 3135 3836 3332 3133 3031  .000",1586321301
-00008950: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-00008960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008970: 205b 2230 2e30 3233 3434 3022 2c22 3637   ["0.023440","67
-00008980: 2e38 3332 222c 3135 3836 3332 3133 3036  .832",1586321306
-00008990: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-000089a0: 2020 2020 2020 2020 2020 2020 205d 0a20               ]. 
-000089b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000089c0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-000089d0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
-000089e0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-000089f0: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
-00008a00: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00008a10: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00008a20: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-00008a30: 2020 2020 2020 6f72 6465 7262 6f6f 6b20        orderbook 
-00008a40: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00008a50: 6528 7265 7375 6c74 2c20 6d61 726b 6574  e(result, market
-00008a60: 5b27 6964 275d 290a 2020 2020 2020 2020  ['id']).        
-00008a70: 2320 736f 6d65 7469 6d65 7320 6b72 616b  # sometimes krak
-00008a80: 656e 2072 6574 7572 6e73 2077 736e 616d  en returns wsnam
-00008a90: 6520 696e 7374 6561 6420 6f66 206d 6172  e instead of mar
-00008aa0: 6b65 7420 6964 0a20 2020 2020 2020 2023  ket id.        #
-00008ab0: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
-00008ac0: 636f 6d2f 6363 7874 2f63 6378 742f 6973  com/ccxt/ccxt/is
-00008ad0: 7375 6573 2f38 3636 320a 2020 2020 2020  sues/8662.      
-00008ae0: 2020 6d61 726b 6574 496e 666f 203d 2073    marketInfo = s
+00006a20: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00006a30: 2028 6375 7272 656e 6379 4964 2e66 696e   (currencyId.fin
+00006a40: 6428 272e 2729 203e 2030 293a 0a20 2020  d('.') > 0):.   
+00006a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00006a60: 2020 2020 2063 7572 7265 6e63 7949 6420       currencyId 
+00006a70: 3d20 6375 7272 656e 6379 4964 5b31 3a5d  = currencyId[1:]
+00006a80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00006a90: 7375 7065 7228 6b72 616b 656e 2c20 7365  super(kraken, se
+00006aa0: 6c66 292e 7361 6665 5f63 7572 7265 6e63  lf).safe_currenc
+00006ab0: 7928 6375 7272 656e 6379 4964 2c20 6375  y(currencyId, cu
+00006ac0: 7272 656e 6379 290a 0a20 2020 2064 6566  rrency)..    def
+00006ad0: 2061 7070 656e 645f 696e 6163 7469 7665   append_inactive
+00006ae0: 5f6d 6172 6b65 7473 2873 656c 662c 2072  _markets(self, r
+00006af0: 6573 756c 7429 3a0a 2020 2020 2020 2020  esult):.        
+00006b00: 2320 7265 7375 6c74 2073 686f 756c 6420  # result should 
+00006b10: 6265 2061 6e20 6172 7261 7920 746f 2061  be an array to a
+00006b20: 7070 656e 6420 746f 0a20 2020 2020 2020  ppend to.       
+00006b30: 2070 7265 6369 7369 6f6e 203d 207b 0a20   precision = {. 
+00006b40: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
+00006b50: 6e74 273a 2073 656c 662e 7061 7273 655f  nt': self.parse_
+00006b60: 6e75 6d62 6572 2827 3165 2d38 2729 2c0a  number('1e-8'),.
+00006b70: 2020 2020 2020 2020 2020 2020 2770 7269              'pri
+00006b80: 6365 273a 2073 656c 662e 7061 7273 655f  ce': self.parse_
+00006b90: 6e75 6d62 6572 2827 3165 2d38 2729 2c0a  number('1e-8'),.
+00006ba0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00006bb0: 2020 636f 7374 4c69 6d69 7473 203d 207b    costLimits = {
+00006bc0: 276d 696e 273a 204e 6f6e 652c 2027 6d61  'min': None, 'ma
+00006bd0: 7827 3a20 4e6f 6e65 7d0a 2020 2020 2020  x': None}.      
+00006be0: 2020 7072 6963 654c 696d 6974 7320 3d20    priceLimits = 
+00006bf0: 7b27 6d69 6e27 3a20 7072 6563 6973 696f  {'min': precisio
+00006c00: 6e5b 2770 7269 6365 275d 2c20 276d 6178  n['price'], 'max
+00006c10: 273a 204e 6f6e 657d 0a20 2020 2020 2020  ': None}.       
+00006c20: 2061 6d6f 756e 744c 696d 6974 7320 3d20   amountLimits = 
+00006c30: 7b27 6d69 6e27 3a20 7072 6563 6973 696f  {'min': precisio
+00006c40: 6e5b 2761 6d6f 756e 7427 5d2c 2027 6d61  n['amount'], 'ma
+00006c50: 7827 3a20 4e6f 6e65 7d0a 2020 2020 2020  x': None}.      
+00006c60: 2020 6c69 6d69 7473 203d 207b 2761 6d6f    limits = {'amo
+00006c70: 756e 7427 3a20 616d 6f75 6e74 4c69 6d69  unt': amountLimi
+00006c80: 7473 2c20 2770 7269 6365 273a 2070 7269  ts, 'price': pri
+00006c90: 6365 4c69 6d69 7473 2c20 2763 6f73 7427  ceLimits, 'cost'
+00006ca0: 3a20 636f 7374 4c69 6d69 7473 7d0a 2020  : costLimits}.  
+00006cb0: 2020 2020 2020 6465 6661 756c 7473 203d        defaults =
+00006cc0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00006cd0: 6461 726b 706f 6f6c 273a 2046 616c 7365  darkpool': False
+00006ce0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+00006cf0: 6e66 6f27 3a20 4e6f 6e65 2c0a 2020 2020  nfo': None,.    
+00006d00: 2020 2020 2020 2020 276d 616b 6572 273a          'maker':
+00006d10: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+00006d20: 2020 2027 7461 6b65 7227 3a20 4e6f 6e65     'taker': None
+00006d30: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00006d40: 6374 6976 6527 3a20 4661 6c73 652c 0a20  ctive': False,. 
+00006d50: 2020 2020 2020 2020 2020 2027 7072 6563             'prec
+00006d60: 6973 696f 6e27 3a20 7072 6563 6973 696f  ision': precisio
+00006d70: 6e2c 0a20 2020 2020 2020 2020 2020 2027  n,.            '
+00006d80: 6c69 6d69 7473 273a 206c 696d 6974 732c  limits': limits,
+00006d90: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00006da0: 2020 206d 6172 6b65 7473 203d 205b 0a20     markets = [. 
+00006db0: 2020 2020 2020 2020 2020 2023 207b 2769             # {'i
+00006dc0: 6427 3a20 2758 584c 4d5a 4555 5227 2c20  d': 'XXLMZEUR', 
+00006dd0: 2773 796d 626f 6c27 3a20 2758 4c4d 2f45  'symbol': 'XLM/E
+00006de0: 5552 272c 2027 6261 7365 273a 2027 584c  UR', 'base': 'XL
+00006df0: 4d27 2c20 2771 756f 7465 273a 2027 4555  M', 'quote': 'EU
+00006e00: 5227 2c20 2761 6c74 6e61 6d65 273a 2027  R', 'altname': '
+00006e10: 584c 4d45 5552 277d 2c0a 2020 2020 2020  XLMEUR'},.      
+00006e20: 2020 5d0a 2020 2020 2020 2020 666f 7220    ].        for 
+00006e30: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+00006e40: 6e28 6d61 726b 6574 7329 293a 0a20 2020  n(markets)):.   
+00006e50: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00006e60: 6170 7065 6e64 2873 656c 662e 6578 7465  append(self.exte
+00006e70: 6e64 2864 6566 6175 6c74 732c 206d 6172  nd(defaults, mar
+00006e80: 6b65 7473 5b69 5d29 290a 2020 2020 2020  kets[i])).      
+00006e90: 2020 7265 7475 726e 2072 6573 756c 740a    return result.
+00006ea0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
+00006eb0: 6574 6368 5f63 7572 7265 6e63 6965 7328  etch_currencies(
+00006ec0: 7365 6c66 2c20 7061 7261 6d73 3d7b 7d29  self, params={})
+00006ed0: 202d 3e20 4375 7272 656e 6369 6573 3a0a   -> Currencies:.
+00006ee0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00006ef0: 2020 2020 6665 7463 6865 7320 616c 6c20      fetches all 
+00006f00: 6176 6169 6c61 626c 6520 6375 7272 656e  available curren
+00006f10: 6369 6573 206f 6e20 616e 2065 7863 6861  cies on an excha
+00006f20: 6e67 650a 2020 2020 2020 2020 3a73 6565  nge.        :see
+00006f30: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
+00006f40: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
+00006f50: 7461 672f 5370 6f74 2d4d 6172 6b65 742d  tag/Spot-Market-
+00006f60: 4461 7461 2f6f 7065 7261 7469 6f6e 2f67  Data/operation/g
+00006f70: 6574 4173 7365 7449 6e66 6f0a 2020 2020  etAssetInfo.    
+00006f80: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00006f90: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+00006fa0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00006fb0: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+00006fc0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+00006fd0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00006fe0: 7320 6469 6374 3a20 616e 2061 7373 6f63  s dict: an assoc
+00006ff0: 6961 7469 7665 2064 6963 7469 6f6e 6172  iative dictionar
+00007000: 7920 6f66 2063 7572 7265 6e63 6965 730a  y of currencies.
+00007010: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00007020: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00007030: 7761 6974 2073 656c 662e 7075 626c 6963  wait self.public
+00007040: 4765 7441 7373 6574 7328 7061 7261 6d73  GetAssets(params
+00007050: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00007060: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00007070: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+00007080: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
+00007090: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000070a0: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
+000070b0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000070c0: 4243 4822 3a20 7b0a 2020 2020 2020 2020  BCH": {.        
+000070d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000070e0: 2020 2261 636c 6173 7322 3a20 2263 7572    "aclass": "cur
+000070f0: 7265 6e63 7922 2c0a 2020 2020 2020 2020  rency",.        
+00007100: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00007110: 2020 2261 6c74 6e61 6d65 223a 2022 4243    "altname": "BC
+00007120: 4822 2c0a 2020 2020 2020 2020 2320 2020  H",.        #   
+00007130: 2020 2020 2020 2020 2020 2020 2020 2264                "d
+00007140: 6563 696d 616c 7322 3a20 3130 2c0a 2020  ecimals": 10,.  
+00007150: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007160: 2020 2020 2020 2020 2264 6973 706c 6179          "display
+00007170: 5f64 6563 696d 616c 7322 3a20 350a 2020  _decimals": 5.  
+00007180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007190: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
+000071a0: 3a20 2265 6e61 626c 6564 222c 0a20 2020  : "enabled",.   
+000071b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000071c0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
+000071d0: 2020 2020 2020 2020 2020 2020 2e2e 2e0a              ....
+000071e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000071f0: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
+00007200: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00007210: 2020 2020 2020 2063 7572 7265 6e63 6965         currencie
+00007220: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
+00007230: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
+00007240: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
+00007250: 2020 2020 6964 7320 3d20 6c69 7374 2863      ids = list(c
+00007260: 7572 7265 6e63 6965 732e 6b65 7973 2829  urrencies.keys()
+00007270: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+00007280: 203d 207b 7d0a 2020 2020 2020 2020 666f   = {}.        fo
+00007290: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
+000072a0: 6c65 6e28 6964 7329 293a 0a20 2020 2020  len(ids)):.     
+000072b0: 2020 2020 2020 2069 6420 3d20 6964 735b         id = ids[
+000072c0: 695d 0a20 2020 2020 2020 2020 2020 2063  i].            c
+000072d0: 7572 7265 6e63 7920 3d20 6375 7272 656e  urrency = curren
+000072e0: 6369 6573 5b69 645d 0a20 2020 2020 2020  cies[id].       
+000072f0: 2020 2020 2023 2074 6f64 6f3a 2077 696c       # todo: wil
+00007300: 6c20 6e65 6564 2074 6f20 7265 7468 696e  l need to rethin
+00007310: 6b20 7468 6520 6665 6573 0a20 2020 2020  k the fees.     
+00007320: 2020 2020 2020 2023 2073 6565 3a20 6874         # see: ht
+00007330: 7470 733a 2f2f 7375 7070 6f72 742e 6b72  tps://support.kr
+00007340: 616b 656e 2e63 6f6d 2f68 632f 656e 2d75  aken.com/hc/en-u
+00007350: 732f 6172 7469 636c 6573 2f32 3031 3839  s/articles/20189
+00007360: 3336 3038 2d57 6861 742d 6172 652d 7468  3608-What-are-th
+00007370: 652d 7769 7468 6472 6177 616c 2d66 6565  e-withdrawal-fee
+00007380: 732d 0a20 2020 2020 2020 2020 2020 2023  s-.            #
+00007390: 2074 6f20 6164 6420 7375 7070 6f72 7420   to add support 
+000073a0: 666f 7220 6d75 6c74 6970 6c65 2077 6974  for multiple wit
+000073b0: 6864 7261 7761 6c2f 6465 706f 7369 7420  hdrawal/deposit 
+000073c0: 6d65 7468 6f64 7320 616e 640a 2020 2020  methods and.    
+000073d0: 2020 2020 2020 2020 2320 6469 6666 6572          # differ
+000073e0: 656e 7469 6174 6564 2066 6565 7320 666f  entiated fees fo
+000073f0: 7220 6561 6368 2070 6172 7469 6375 6c61  r each particula
+00007400: 7220 6d65 7468 6f64 0a20 2020 2020 2020  r method.       
+00007410: 2020 2020 2063 6f64 6520 3d20 7365 6c66       code = self
+00007420: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
+00007430: 6f64 6528 6964 290a 2020 2020 2020 2020  ode(id).        
+00007440: 2020 2020 7072 6563 6973 696f 6e20 3d20      precision = 
+00007450: 7365 6c66 2e70 6172 7365 5f6e 756d 6265  self.parse_numbe
+00007460: 7228 7365 6c66 2e70 6172 7365 5f70 7265  r(self.parse_pre
+00007470: 6369 7369 6f6e 2873 656c 662e 7361 6665  cision(self.safe
+00007480: 5f73 7472 696e 6728 6375 7272 656e 6379  _string(currency
+00007490: 2c20 2764 6563 696d 616c 7327 2929 290a  , 'decimals'))).
+000074a0: 2020 2020 2020 2020 2020 2020 2320 6173              # as
+000074b0: 7375 6d65 7320 616c 6c20 6375 7272 656e  sumes all curren
+000074c0: 6369 6573 2061 7265 2061 6374 6976 6520  cies are active 
+000074d0: 6578 6365 7074 2074 686f 7365 206c 6973  except those lis
+000074e0: 7465 6420 6162 6f76 650a 2020 2020 2020  ted above.      
+000074f0: 2020 2020 2020 6163 7469 7665 203d 2073        active = s
+00007500: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00007510: 6375 7272 656e 6379 2c20 2773 7461 7475  currency, 'statu
+00007520: 7327 2920 3d3d 2027 656e 6162 6c65 6427  s') == 'enabled'
+00007530: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
+00007540: 756c 745b 636f 6465 5d20 3d20 7b0a 2020  ult[code] = {.  
+00007550: 2020 2020 2020 2020 2020 2020 2020 2769                'i
+00007560: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+00007570: 2020 2020 2020 2020 2763 6f64 6527 3a20          'code': 
+00007580: 636f 6465 2c0a 2020 2020 2020 2020 2020  code,.          
+00007590: 2020 2020 2020 2769 6e66 6f27 3a20 6375        'info': cu
+000075a0: 7272 656e 6379 2c0a 2020 2020 2020 2020  rrency,.        
+000075b0: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
+000075c0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000075d0: 2863 7572 7265 6e63 792c 2027 616c 746e  (currency, 'altn
+000075e0: 616d 6527 292c 0a20 2020 2020 2020 2020  ame'),.         
+000075f0: 2020 2020 2020 2027 6163 7469 7665 273a         'active':
+00007600: 2061 6374 6976 652c 0a20 2020 2020 2020   active,.       
+00007610: 2020 2020 2020 2020 2027 6465 706f 7369           'deposi
+00007620: 7427 3a20 4e6f 6e65 2c0a 2020 2020 2020  t': None,.      
+00007630: 2020 2020 2020 2020 2020 2777 6974 6864            'withd
+00007640: 7261 7727 3a20 4e6f 6e65 2c0a 2020 2020  raw': None,.    
+00007650: 2020 2020 2020 2020 2020 2020 2766 6565              'fee
+00007660: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00007670: 2020 2020 2020 2020 2027 7072 6563 6973           'precis
+00007680: 696f 6e27 3a20 7072 6563 6973 696f 6e2c  ion': precision,
+00007690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000076a0: 2027 6c69 6d69 7473 273a 207b 0a20 2020   'limits': {.   
+000076b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000076c0: 2027 616d 6f75 6e74 273a 207b 0a20 2020   'amount': {.   
+000076d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000076e0: 2020 2020 2027 6d69 6e27 3a20 7072 6563       'min': prec
+000076f0: 6973 696f 6e2c 0a20 2020 2020 2020 2020  ision,.         
+00007700: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00007710: 6d61 7827 3a20 4e6f 6e65 2c0a 2020 2020  max': None,.    
+00007720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007730: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+00007740: 2020 2020 2020 2027 7769 7468 6472 6177         'withdraw
+00007750: 273a 207b 0a20 2020 2020 2020 2020 2020  ': {.           
+00007760: 2020 2020 2020 2020 2020 2020 2027 6d69               'mi
+00007770: 6e27 3a20 4e6f 6e65 2c0a 2020 2020 2020  n': None,.      
+00007780: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007790: 2020 276d 6178 273a 204e 6f6e 652c 0a20    'max': None,. 
+000077a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000077b0: 2020 207d 2c0a 2020 2020 2020 2020 2020     },.          
+000077c0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+000077d0: 2020 2020 2020 2020 2027 6e65 7477 6f72           'networ
+000077e0: 6b73 273a 207b 7d2c 0a20 2020 2020 2020  ks': {},.       
+000077f0: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
+00007800: 6574 7572 6e20 7265 7375 6c74 0a0a 2020  eturn result..  
+00007810: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
+00007820: 685f 7472 6164 696e 675f 6665 6528 7365  h_trading_fee(se
+00007830: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
+00007840: 2070 6172 616d 733d 7b7d 2920 2d3e 2054   params={}) -> T
+00007850: 7261 6469 6e67 4665 6549 6e74 6572 6661  radingFeeInterfa
+00007860: 6365 3a0a 2020 2020 2020 2020 2222 220a  ce:.        """.
+00007870: 2020 2020 2020 2020 6665 7463 6820 7468          fetch th
+00007880: 6520 7472 6164 696e 6720 6665 6573 2066  e trading fees f
+00007890: 6f72 2061 206d 6172 6b65 740a 2020 2020  or a market.    
+000078a0: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
+000078b0: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
+000078c0: 6d2f 7265 7374 2f23 7461 672f 4163 636f  m/rest/#tag/Acco
+000078d0: 756e 742d 4461 7461 2f6f 7065 7261 7469  unt-Data/operati
+000078e0: 6f6e 2f67 6574 5472 6164 6556 6f6c 756d  on/getTradeVolum
+000078f0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+00007900: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
+00007910: 6669 6564 206d 6172 6b65 7420 7379 6d62  fied market symb
+00007920: 6f6c 0a20 2020 2020 2020 203a 7061 7261  ol.        :para
+00007930: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
+00007940: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00007950: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00007960: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
+00007970: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00007980: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
+00007990: 2060 6665 6520 7374 7275 6374 7572 6520   `fee structure 
+000079a0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+000079b0: 7874 2e63 6f6d 2f23 2f3f 6964 3d66 6565  xt.com/#/?id=fee
+000079c0: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
+000079d0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+000079e0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+000079f0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00007a00: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00007a10: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00007a20: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00007a30: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00007a40: 2770 6169 7227 3a20 6d61 726b 6574 5b27  'pair': market['
+00007a50: 6964 275d 2c0a 2020 2020 2020 2020 2020  id'],.          
+00007a60: 2020 2766 6565 2d69 6e66 6f27 3a20 5472    'fee-info': Tr
+00007a70: 7565 2c0a 2020 2020 2020 2020 7d0a 2020  ue,.        }.  
+00007a80: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00007a90: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+00007aa0: 6174 6550 6f73 7454 7261 6465 566f 6c75  atePostTradeVolu
+00007ab0: 6d65 2873 656c 662e 6578 7465 6e64 2872  me(self.extend(r
+00007ac0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+00007ad0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00007ae0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+00007af0: 2020 2023 2020 2020 2020 2020 2265 7272     #        "err
+00007b00: 6f72 223a 205b 5d2c 0a20 2020 2020 2020  or": [],.       
+00007b10: 2023 2020 2020 2020 2020 2272 6573 756c   #        "resul
+00007b20: 7422 3a20 7b0a 2020 2020 2020 2020 2320  t": {.        # 
+00007b30: 2020 2020 2020 2020 2022 6375 7272 656e           "curren
+00007b40: 6379 223a 2027 5a55 5344 272c 0a20 2020  cy": 'ZUSD',.   
+00007b50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00007b60: 2276 6f6c 756d 6522 3a20 2730 2e30 3030  "volume": '0.000
+00007b70: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+00007b80: 2020 2020 2020 2022 6665 6573 223a 207b         "fees": {
+00007b90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00007ba0: 2020 2020 2020 2258 5842 545a 5553 4422        "XXBTZUSD"
+00007bb0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+00007bc0: 2020 2020 2020 2020 2020 2022 6665 6522             "fee"
+00007bd0: 3a20 2730 2e32 3630 3027 2c0a 2020 2020  : '0.2600',.    
+00007be0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00007bf0: 2020 2022 6d69 6e66 6565 223a 2027 302e     "minfee": '0.
+00007c00: 3130 3030 272c 0a20 2020 2020 2020 2023  1000',.        #
+00007c10: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00007c20: 6178 6665 6522 3a20 2730 2e32 3630 3027  axfee": '0.2600'
+00007c30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00007c40: 2020 2020 2020 2020 2022 6e65 7874 6665           "nextfe
+00007c50: 6522 3a20 2730 2e32 3430 3027 2c0a 2020  e": '0.2400',.  
+00007c60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007c70: 2020 2020 2022 7469 6572 766f 6c75 6d65       "tiervolume
+00007c80: 223a 2027 302e 3030 3030 272c 0a20 2020  ": '0.0000',.   
+00007c90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00007ca0: 2020 2020 226e 6578 7476 6f6c 756d 6522      "nextvolume"
+00007cb0: 3a20 2735 3030 3030 2e30 3030 3027 0a20  : '50000.0000'. 
+00007cc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00007cd0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+00007ce0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00007cf0: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
+00007d00: 6665 6573 5f6d 616b 6572 223a 207b 0a20  fees_maker": {. 
+00007d10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00007d20: 2020 2020 2258 5842 545a 5553 4422 3a20      "XXBTZUSD": 
+00007d30: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00007d40: 2020 2020 2020 2020 2022 6665 6522 3a20           "fee": 
+00007d50: 2730 2e31 3630 3027 2c0a 2020 2020 2020  '0.1600',.      
+00007d60: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00007d70: 2022 6d69 6e66 6565 223a 2027 302e 3030   "minfee": '0.00
+00007d80: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
+00007d90: 2020 2020 2020 2020 2020 2020 226d 6178              "max
+00007da0: 6665 6522 3a20 2730 2e31 3630 3027 2c0a  fee": '0.1600',.
+00007db0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00007dc0: 2020 2020 2020 2022 6e65 7874 6665 6522         "nextfee"
+00007dd0: 3a20 2730 2e31 3430 3027 2c0a 2020 2020  : '0.1400',.    
+00007de0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00007df0: 2020 2022 7469 6572 766f 6c75 6d65 223a     "tiervolume":
+00007e00: 2027 302e 3030 3030 272c 0a20 2020 2020   '0.0000',.     
+00007e10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00007e20: 2020 226e 6578 7476 6f6c 756d 6522 3a20    "nextvolume": 
+00007e30: 2735 3030 3030 2e30 3030 3027 0a20 2020  '50000.0000'.   
+00007e40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00007e50: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00007e60: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00007e70: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
+00007e80: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00007e90: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00007ea0: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+00007eb0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+00007ec0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+00007ed0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00007ee0: 6c66 2e70 6172 7365 5f74 7261 6469 6e67  lf.parse_trading
+00007ef0: 5f66 6565 2872 6573 756c 742c 206d 6172  _fee(result, mar
+00007f00: 6b65 7429 0a0a 2020 2020 6465 6620 7061  ket)..    def pa
+00007f10: 7273 655f 7472 6164 696e 675f 6665 6528  rse_trading_fee(
+00007f20: 7365 6c66 2c20 7265 7370 6f6e 7365 2c20  self, response, 
+00007f30: 6d61 726b 6574 293a 0a20 2020 2020 2020  market):.       
+00007f40: 206d 616b 6572 4665 6573 203d 2073 656c   makerFees = sel
+00007f50: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00007f60: 706f 6e73 652c 2027 6665 6573 5f6d 616b  ponse, 'fees_mak
+00007f70: 6572 272c 207b 7d29 0a20 2020 2020 2020  er', {}).       
+00007f80: 2074 616b 6572 4665 6573 203d 2073 656c   takerFees = sel
+00007f90: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00007fa0: 706f 6e73 652c 2027 6665 6573 272c 207b  ponse, 'fees', {
+00007fb0: 7d29 0a20 2020 2020 2020 2073 796d 626f  }).        symbo
+00007fc0: 6c4d 616b 6572 4665 6520 3d20 7365 6c66  lMakerFee = self
+00007fd0: 2e73 6166 655f 7661 6c75 6528 6d61 6b65  .safe_value(make
+00007fe0: 7246 6565 732c 206d 6172 6b65 745b 2769  rFees, market['i
+00007ff0: 6427 5d2c 207b 7d29 0a20 2020 2020 2020  d'], {}).       
+00008000: 2073 796d 626f 6c54 616b 6572 4665 6520   symbolTakerFee 
+00008010: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00008020: 6528 7461 6b65 7246 6565 732c 206d 6172  e(takerFees, mar
+00008030: 6b65 745b 2769 6427 5d2c 207b 7d29 0a20  ket['id'], {}). 
+00008040: 2020 2020 2020 2072 6574 7572 6e20 7b0a         return {.
+00008050: 2020 2020 2020 2020 2020 2020 2769 6e66              'inf
+00008060: 6f27 3a20 7265 7370 6f6e 7365 2c0a 2020  o': response,.  
+00008070: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+00008080: 6c27 3a20 6d61 726b 6574 5b27 7379 6d62  l': market['symb
+00008090: 6f6c 275d 2c0a 2020 2020 2020 2020 2020  ol'],.          
+000080a0: 2020 276d 616b 6572 273a 2073 656c 662e    'maker': self.
+000080b0: 7361 6665 5f6e 756d 6265 7228 7379 6d62  safe_number(symb
+000080c0: 6f6c 4d61 6b65 7246 6565 2c20 2766 6565  olMakerFee, 'fee
+000080d0: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+000080e0: 2774 616b 6572 273a 2073 656c 662e 7361  'taker': self.sa
+000080f0: 6665 5f6e 756d 6265 7228 7379 6d62 6f6c  fe_number(symbol
+00008100: 5461 6b65 7246 6565 2c20 2766 6565 2729  TakerFee, 'fee')
+00008110: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
+00008120: 6572 6365 6e74 6167 6527 3a20 5472 7565  ercentage': True
+00008130: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+00008140: 6965 7242 6173 6564 273a 2054 7275 652c  ierBased': True,
+00008150: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+00008160: 6465 6620 7061 7273 655f 6269 645f 6173  def parse_bid_as
+00008170: 6b28 7365 6c66 2c20 6269 6461 736b 2c20  k(self, bidask, 
+00008180: 7072 6963 654b 6579 3a20 496e 6465 7854  priceKey: IndexT
+00008190: 7970 6520 3d20 302c 2061 6d6f 756e 744b  ype = 0, amountK
+000081a0: 6579 3a20 496e 6465 7854 7970 6520 3d20  ey: IndexType = 
+000081b0: 312c 2063 6f75 6e74 4f72 4964 4b65 793a  1, countOrIdKey:
+000081c0: 2049 6e64 6578 5479 7065 203d 2032 293a   IndexType = 2):
+000081d0: 0a20 2020 2020 2020 2070 7269 6365 203d  .        price =
+000081e0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+000081f0: 7228 6269 6461 736b 2c20 7072 6963 654b  r(bidask, priceK
+00008200: 6579 290a 2020 2020 2020 2020 616d 6f75  ey).        amou
+00008210: 6e74 203d 2073 656c 662e 7361 6665 5f6e  nt = self.safe_n
+00008220: 756d 6265 7228 6269 6461 736b 2c20 616d  umber(bidask, am
+00008230: 6f75 6e74 4b65 7929 0a20 2020 2020 2020  ountKey).       
+00008240: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+00008250: 662e 7361 6665 5f69 6e74 6567 6572 2862  f.safe_integer(b
+00008260: 6964 6173 6b2c 2032 290a 2020 2020 2020  idask, 2).      
+00008270: 2020 7265 7475 726e 205b 7072 6963 652c    return [price,
+00008280: 2061 6d6f 756e 742c 2074 696d 6573 7461   amount, timesta
+00008290: 6d70 5d0a 0a20 2020 2061 7379 6e63 2064  mp]..    async d
+000082a0: 6566 2066 6574 6368 5f6f 7264 6572 5f62  ef fetch_order_b
+000082b0: 6f6f 6b28 7365 6c66 2c20 7379 6d62 6f6c  ook(self, symbol
+000082c0: 3a20 7374 722c 206c 696d 6974 3a20 496e  : str, limit: In
+000082d0: 7420 3d20 4e6f 6e65 2c20 7061 7261 6d73  t = None, params
+000082e0: 3d7b 7d29 202d 3e20 4f72 6465 7242 6f6f  ={}) -> OrderBoo
+000082f0: 6b3a 0a20 2020 2020 2020 2022 2222 0a20  k:.        """. 
+00008300: 2020 2020 2020 2066 6574 6368 6573 2069         fetches i
+00008310: 6e66 6f72 6d61 7469 6f6e 206f 6e20 6f70  nformation on op
+00008320: 656e 206f 7264 6572 7320 7769 7468 2062  en orders with b
+00008330: 6964 2862 7579 2920 616e 6420 6173 6b28  id(buy) and ask(
+00008340: 7365 6c6c 2920 7072 6963 6573 2c20 766f  sell) prices, vo
+00008350: 6c75 6d65 7320 616e 6420 6f74 6865 7220  lumes and other 
+00008360: 6461 7461 0a20 2020 2020 2020 203a 7365  data.        :se
+00008370: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
+00008380: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
+00008390: 2374 6167 2f53 706f 742d 4d61 726b 6574  #tag/Spot-Market
+000083a0: 2d44 6174 612f 6f70 6572 6174 696f 6e2f  -Data/operation/
+000083b0: 6765 744f 7264 6572 426f 6f6b 0a20 2020  getOrderBook.   
+000083c0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+000083d0: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+000083e0: 7379 6d62 6f6c 206f 6620 7468 6520 6d61  symbol of the ma
+000083f0: 726b 6574 2074 6f20 6665 7463 6820 7468  rket to fetch th
+00008400: 6520 6f72 6465 7220 626f 6f6b 2066 6f72  e order book for
+00008410: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00008420: 696e 7420 5b6c 696d 6974 5d3a 2074 6865  int [limit]: the
+00008430: 206d 6178 696d 756d 2061 6d6f 756e 7420   maximum amount 
+00008440: 6f66 206f 7264 6572 2062 6f6f 6b20 656e  of order book en
+00008450: 7472 6965 7320 746f 2072 6574 7572 6e0a  tries to return.
+00008460: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+00008470: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
+00008480: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00008490: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
+000084a0: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
+000084b0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+000084c0: 7475 726e 7320 6469 6374 3a20 4120 6469  turns dict: A di
+000084d0: 6374 696f 6e61 7279 206f 6620 606f 7264  ctionary of `ord
+000084e0: 6572 2062 6f6f 6b20 7374 7275 6374 7572  er book structur
+000084f0: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
+00008500: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+00008510: 6f72 6465 722d 626f 6f6b 2d73 7472 7563  order-book-struc
+00008520: 7475 7265 3e60 2069 6e64 6578 6564 2062  ture>` indexed b
+00008530: 7920 6d61 726b 6574 2073 796d 626f 6c73  y market symbols
+00008540: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00008550: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+00008560: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00008570: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00008580: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+00008590: 6f6c 290a 2020 2020 2020 2020 6966 206d  ol).        if m
+000085a0: 6172 6b65 745b 2764 6172 6b70 6f6f 6c27  arket['darkpool'
+000085b0: 5d3a 0a20 2020 2020 2020 2020 2020 2072  ]:.            r
+000085c0: 6169 7365 2045 7863 6861 6e67 6545 7272  aise ExchangeErr
+000085d0: 6f72 2873 656c 662e 6964 202b 2027 2066  or(self.id + ' f
+000085e0: 6574 6368 4f72 6465 7242 6f6f 6b28 2920  etchOrderBook() 
+000085f0: 646f 6573 206e 6f74 2070 726f 7669 6465  does not provide
+00008600: 2061 6e20 6f72 6465 7220 626f 6f6b 2066   an order book f
+00008610: 6f72 2064 6172 6b70 6f6f 6c20 7379 6d62  or darkpool symb
+00008620: 6f6c 2027 202b 2073 796d 626f 6c29 0a20  ol ' + symbol). 
+00008630: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00008640: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00008650: 7061 6972 273a 206d 6172 6b65 745b 2769  pair': market['i
+00008660: 6427 5d2c 0a20 2020 2020 2020 207d 0a20  d'],.        }. 
+00008670: 2020 2020 2020 2069 6620 6c69 6d69 7420         if limit 
+00008680: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+00008690: 2020 2020 2020 2020 2072 6571 7565 7374           request
+000086a0: 5b27 636f 756e 7427 5d20 3d20 6c69 6d69  ['count'] = limi
+000086b0: 7420 2023 2031 3030 0a20 2020 2020 2020  t  # 100.       
+000086c0: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+000086d0: 7420 7365 6c66 2e70 7562 6c69 6347 6574  t self.publicGet
+000086e0: 4465 7074 6828 7365 6c66 2e65 7874 656e  Depth(self.exten
+000086f0: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00008700: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+00008710: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00008720: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00008730: 2265 7272 6f72 223a 5b5d 2c0a 2020 2020  "error":[],.    
+00008740: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00008750: 6573 756c 7422 3a7b 0a20 2020 2020 2020  esult":{.       
+00008760: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+00008770: 5845 5448 5858 4254 223a 7b0a 2020 2020  XETHXXBT":{.    
+00008780: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00008790: 2020 2020 2020 2261 736b 7322 3a5b 0a20        "asks":[. 
+000087a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000087b0: 2020 2020 2020 2020 2020 2020 205b 2230               ["0
+000087c0: 2e30 3233 3438 3022 2c22 342e 3030 3022  .023480","4.000"
+000087d0: 2c31 3538 3633 3231 3330 375d 2c0a 2020  ,1586321307],.  
+000087e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000087f0: 2020 2020 2020 2020 2020 2020 5b22 302e              ["0.
+00008800: 3032 3334 3930 222c 2235 302e 3039 3522  023490","50.095"
+00008810: 2c31 3538 3633 3231 3330 365d 2c0a 2020  ,1586321306],.  
+00008820: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00008830: 2020 2020 2020 2020 2020 2020 5b22 302e              ["0.
+00008840: 3032 3335 3030 222c 2232 382e 3533 3522  023500","28.535"
+00008850: 2c31 3538 3633 3231 3330 325d 2c0a 2020  ,1586321302],.  
+00008860: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00008870: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
+00008880: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00008890: 2020 2020 2022 6269 6473 223a 5b0a 2020       "bids":[.  
+000088a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000088b0: 2020 2020 2020 2020 2020 2020 5b22 302e              ["0.
+000088c0: 3032 3334 3730 222c 2235 392e 3538 3022  023470","59.580"
+000088d0: 2c31 3538 3633 3231 3330 375d 2c0a 2020  ,1586321307],.  
+000088e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000088f0: 2020 2020 2020 2020 2020 2020 5b22 302e              ["0.
+00008900: 3032 3334 3630 222c 2232 302e 3030 3022  023460","20.000"
+00008910: 2c31 3538 3633 3231 3330 315d 2c0a 2020  ,1586321301],.  
+00008920: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00008930: 2020 2020 2020 2020 2020 2020 5b22 302e              ["0.
+00008940: 3032 3334 3430 222c 2236 372e 3833 3222  023440","67.832"
+00008950: 2c31 3538 3633 3231 3330 365d 2c0a 2020  ,1586321306],.  
+00008960: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00008970: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00008980: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00008990: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+000089a0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
+000089b0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+000089c0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+000089d0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+000089e0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+000089f0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+00008a00: 206f 7264 6572 626f 6f6b 203d 2073 656c   orderbook = sel
+00008a10: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+00008a20: 756c 742c 206d 6172 6b65 745b 2769 6427  ult, market['id'
+00008a30: 5d29 0a20 2020 2020 2020 2023 2073 6f6d  ]).        # som
+00008a40: 6574 696d 6573 206b 7261 6b65 6e20 7265  etimes kraken re
+00008a50: 7475 726e 7320 7773 6e61 6d65 2069 6e73  turns wsname ins
+00008a60: 7465 6164 206f 6620 6d61 726b 6574 2069  tead of market i
+00008a70: 640a 2020 2020 2020 2020 2320 6874 7470  d.        # http
+00008a80: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
+00008a90: 6378 742f 6363 7874 2f69 7373 7565 732f  cxt/ccxt/issues/
+00008aa0: 3836 3632 0a20 2020 2020 2020 206d 6172  8662.        mar
+00008ab0: 6b65 7449 6e66 6f20 3d20 7365 6c66 2e73  ketInfo = self.s
+00008ac0: 6166 655f 7661 6c75 6528 6d61 726b 6574  afe_value(market
+00008ad0: 2c20 2769 6e66 6f27 2c20 7b7d 290a 2020  , 'info', {}).  
+00008ae0: 2020 2020 2020 7773 4e61 6d65 203d 2073        wsName = s
 00008af0: 656c 662e 7361 6665 5f76 616c 7565 286d  elf.safe_value(m
-00008b00: 6172 6b65 742c 2027 696e 666f 272c 207b  arket, 'info', {
-00008b10: 7d29 0a20 2020 2020 2020 2077 734e 616d  }).        wsNam
-00008b20: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
-00008b30: 6c75 6528 6d61 726b 6574 496e 666f 2c20  lue(marketInfo, 
-00008b40: 2777 736e 616d 6527 290a 2020 2020 2020  'wsname').      
-00008b50: 2020 6966 2077 734e 616d 6520 6973 206e    if wsName is n
-00008b60: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00008b70: 2020 2020 206f 7264 6572 626f 6f6b 203d       orderbook =
-00008b80: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00008b90: 2872 6573 756c 742c 2077 734e 616d 652c  (result, wsName,
-00008ba0: 206f 7264 6572 626f 6f6b 290a 2020 2020   orderbook).    
-00008bb0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00008bc0: 7061 7273 655f 6f72 6465 725f 626f 6f6b  parse_order_book
-00008bd0: 286f 7264 6572 626f 6f6b 2c20 7379 6d62  (orderbook, symb
-00008be0: 6f6c 290a 0a20 2020 2064 6566 2070 6172  ol)..    def par
-00008bf0: 7365 5f74 6963 6b65 7228 7365 6c66 2c20  se_ticker(self, 
-00008c00: 7469 636b 6572 2c20 6d61 726b 6574 3a20  ticker, market: 
-00008c10: 4d61 726b 6574 203d 204e 6f6e 6529 202d  Market = None) -
-00008c20: 3e20 5469 636b 6572 3a0a 2020 2020 2020  > Ticker:.      
-00008c30: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00008c40: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00008c50: 2020 2020 2020 2261 223a 5b22 3234 3332        "a":["2432
-00008c60: 2e37 3730 3030 222c 2231 222c 2231 2e30  .77000","1","1.0
-00008c70: 3030 225d 2c0a 2020 2020 2020 2020 2320  00"],.        # 
-00008c80: 2020 2020 2020 2020 2262 223a 5b22 3234          "b":["24
-00008c90: 3331 2e33 3730 3030 222c 2232 222c 2232  31.37000","2","2
-00008ca0: 2e30 3030 225d 2c0a 2020 2020 2020 2020  .000"],.        
-00008cb0: 2320 2020 2020 2020 2020 2263 223a 5b22  #         "c":["
-00008cc0: 3234 3330 2e35 3830 3030 222c 2230 2e30  2430.58000","0.0
-00008cd0: 3434 3038 3931 3022 5d2c 0a20 2020 2020  4408910"],.     
-00008ce0: 2020 2023 2020 2020 2020 2020 2022 7622     #         "v"
-00008cf0: 3a5b 2234 3134 372e 3934 3437 3439 3031  :["4147.94474901
-00008d00: 222c 2238 3839 362e 3936 3038 3633 3034  ","8896.96086304
-00008d10: 225d 2c0a 2020 2020 2020 2020 2320 2020  "],.        #   
-00008d20: 2020 2020 2020 2270 223a 5b22 3234 3536        "p":["2456
-00008d30: 2e32 3232 3339 222c 2232 3536 382e 3633  .22239","2568.63
-00008d40: 3033 3222 5d2c 0a20 2020 2020 2020 2023  032"],.        #
-00008d50: 2020 2020 2020 2020 2022 7422 3a5b 3339           "t":[39
-00008d60: 3037 2c31 3030 3536 5d2c 0a20 2020 2020  07,10056],.     
-00008d70: 2020 2023 2020 2020 2020 2020 2022 6c22     #         "l"
-00008d80: 3a5b 2232 3330 322e 3138 3030 3022 2c22  :["2302.18000","
-00008d90: 3233 3032 2e31 3830 3030 225d 2c0a 2020  2302.18000"],.  
-00008da0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00008db0: 2268 223a 5b22 3236 3231 2e31 3430 3030  "h":["2621.14000
-00008dc0: 222c 2232 3836 302e 3031 3030 3022 5d2c  ","2860.01000"],
-00008dd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00008de0: 2020 2022 6f22 3a22 3235 3731 2e35 3630     "o":"2571.560
-00008df0: 3030 220a 2020 2020 2020 2020 2320 2020  00".        #   
-00008e00: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00008e10: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
-00008e20: 656c 662e 7361 6665 5f73 796d 626f 6c28  elf.safe_symbol(
-00008e30: 4e6f 6e65 2c20 6d61 726b 6574 290a 2020  None, market).  
-00008e40: 2020 2020 2020 7620 3d20 7365 6c66 2e73        v = self.s
-00008e50: 6166 655f 7661 6c75 6528 7469 636b 6572  afe_value(ticker
-00008e60: 2c20 2776 272c 205b 5d29 0a20 2020 2020  , 'v', []).     
-00008e70: 2020 2062 6173 6556 6f6c 756d 6520 3d20     baseVolume = 
-00008e80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00008e90: 2876 2c20 3129 0a20 2020 2020 2020 2070  (v, 1).        p
-00008ea0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00008eb0: 7565 2874 6963 6b65 722c 2027 7027 2c20  ue(ticker, 'p', 
-00008ec0: 5b5d 290a 2020 2020 2020 2020 7677 6170  []).        vwap
-00008ed0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00008ee0: 696e 6728 702c 2031 290a 2020 2020 2020  ing(p, 1).      
-00008ef0: 2020 7175 6f74 6556 6f6c 756d 6520 3d20    quoteVolume = 
-00008f00: 5072 6563 6973 652e 7374 7269 6e67 5f6d  Precise.string_m
-00008f10: 756c 2862 6173 6556 6f6c 756d 652c 2076  ul(baseVolume, v
-00008f20: 7761 7029 0a20 2020 2020 2020 2063 203d  wap).        c =
-00008f30: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00008f40: 2874 6963 6b65 722c 2027 6327 2c20 5b5d  (ticker, 'c', []
-00008f50: 290a 2020 2020 2020 2020 6c61 7374 203d  ).        last =
-00008f60: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00008f70: 6728 632c 2030 290a 2020 2020 2020 2020  g(c, 0).        
-00008f80: 6869 6768 203d 2073 656c 662e 7361 6665  high = self.safe
-00008f90: 5f76 616c 7565 2874 6963 6b65 722c 2027  _value(ticker, '
-00008fa0: 6827 2c20 5b5d 290a 2020 2020 2020 2020  h', []).        
-00008fb0: 6c6f 7720 3d20 7365 6c66 2e73 6166 655f  low = self.safe_
-00008fc0: 7661 6c75 6528 7469 636b 6572 2c20 276c  value(ticker, 'l
-00008fd0: 272c 205b 5d29 0a20 2020 2020 2020 2062  ', []).        b
-00008fe0: 6964 203d 2073 656c 662e 7361 6665 5f76  id = self.safe_v
-00008ff0: 616c 7565 2874 6963 6b65 722c 2027 6227  alue(ticker, 'b'
-00009000: 2c20 5b5d 290a 2020 2020 2020 2020 6173  , []).        as
-00009010: 6b20 3d20 7365 6c66 2e73 6166 655f 7661  k = self.safe_va
-00009020: 6c75 6528 7469 636b 6572 2c20 2761 272c  lue(ticker, 'a',
-00009030: 205b 5d29 0a20 2020 2020 2020 2072 6574   []).        ret
-00009040: 7572 6e20 7365 6c66 2e73 6166 655f 7469  urn self.safe_ti
-00009050: 636b 6572 287b 0a20 2020 2020 2020 2020  cker({.         
-00009060: 2020 2027 7379 6d62 6f6c 273a 2073 796d     'symbol': sym
-00009070: 626f 6c2c 0a20 2020 2020 2020 2020 2020  bol,.           
-00009080: 2027 7469 6d65 7374 616d 7027 3a20 4e6f   'timestamp': No
-00009090: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-000090a0: 2764 6174 6574 696d 6527 3a20 4e6f 6e65  'datetime': None
-000090b0: 2c0a 2020 2020 2020 2020 2020 2020 2768  ,.            'h
-000090c0: 6967 6827 3a20 7365 6c66 2e73 6166 655f  igh': self.safe_
-000090d0: 7374 7269 6e67 2868 6967 682c 2031 292c  string(high, 1),
-000090e0: 0a20 2020 2020 2020 2020 2020 2027 6c6f  .            'lo
-000090f0: 7727 3a20 7365 6c66 2e73 6166 655f 7374  w': self.safe_st
-00009100: 7269 6e67 286c 6f77 2c20 3129 2c0a 2020  ring(low, 1),.  
-00009110: 2020 2020 2020 2020 2020 2762 6964 273a            'bid':
-00009120: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00009130: 6728 6269 642c 2030 292c 0a20 2020 2020  g(bid, 0),.     
-00009140: 2020 2020 2020 2027 6269 6456 6f6c 756d         'bidVolum
-00009150: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
-00009160: 2020 2020 2020 2761 736b 273a 2073 656c        'ask': sel
-00009170: 662e 7361 6665 5f73 7472 696e 6728 6173  f.safe_string(as
-00009180: 6b2c 2030 292c 0a20 2020 2020 2020 2020  k, 0),.         
-00009190: 2020 2027 6173 6b56 6f6c 756d 6527 3a20     'askVolume': 
-000091a0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-000091b0: 2020 2776 7761 7027 3a20 7677 6170 2c0a    'vwap': vwap,.
-000091c0: 2020 2020 2020 2020 2020 2020 276f 7065              'ope
-000091d0: 6e27 3a20 7365 6c66 2e73 6166 655f 7374  n': self.safe_st
-000091e0: 7269 6e67 2874 6963 6b65 722c 2027 6f27  ring(ticker, 'o'
-000091f0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00009200: 636c 6f73 6527 3a20 6c61 7374 2c0a 2020  close': last,.  
-00009210: 2020 2020 2020 2020 2020 276c 6173 7427            'last'
-00009220: 3a20 6c61 7374 2c0a 2020 2020 2020 2020  : last,.        
-00009230: 2020 2020 2770 7265 7669 6f75 7343 6c6f      'previousClo
-00009240: 7365 273a 204e 6f6e 652c 0a20 2020 2020  se': None,.     
-00009250: 2020 2020 2020 2027 6368 616e 6765 273a         'change':
-00009260: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00009270: 2020 2027 7065 7263 656e 7461 6765 273a     'percentage':
-00009280: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-00009290: 2020 2027 6176 6572 6167 6527 3a20 4e6f     'average': No
-000092a0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-000092b0: 2762 6173 6556 6f6c 756d 6527 3a20 6261  'baseVolume': ba
-000092c0: 7365 566f 6c75 6d65 2c0a 2020 2020 2020  seVolume,.      
-000092d0: 2020 2020 2020 2771 756f 7465 566f 6c75        'quoteVolu
-000092e0: 6d65 273a 2071 756f 7465 566f 6c75 6d65  me': quoteVolume
-000092f0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-00009300: 6e66 6f27 3a20 7469 636b 6572 2c0a 2020  nfo': ticker,.  
-00009310: 2020 2020 2020 7d2c 206d 6172 6b65 7429        }, market)
-00009320: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-00009330: 6665 7463 685f 7469 636b 6572 7328 7365  fetch_tickers(se
-00009340: 6c66 2c20 7379 6d62 6f6c 733a 2053 7472  lf, symbols: Str
-00009350: 696e 6773 203d 204e 6f6e 652c 2070 6172  ings = None, par
-00009360: 616d 733d 7b7d 2920 2d3e 2054 6963 6b65  ams={}) -> Ticke
-00009370: 7273 3a0a 2020 2020 2020 2020 2222 220a  rs:.        """.
-00009380: 2020 2020 2020 2020 6665 7463 6865 7320          fetches 
-00009390: 7072 6963 6520 7469 636b 6572 7320 666f  price tickers fo
-000093a0: 7220 6d75 6c74 6970 6c65 206d 6172 6b65  r multiple marke
-000093b0: 7473 2c20 7374 6174 6973 7469 6361 6c20  ts, statistical 
-000093c0: 696e 666f 726d 6174 696f 6e20 6361 6c63  information calc
-000093d0: 756c 6174 6564 206f 7665 7220 7468 6520  ulated over the 
-000093e0: 7061 7374 2032 3420 686f 7572 7320 666f  past 24 hours fo
-000093f0: 7220 6561 6368 206d 6172 6b65 740a 2020  r each market.  
-00009400: 2020 2020 2020 3a73 6565 3a20 6874 7470        :see: http
-00009410: 733a 2f2f 646f 6373 2e6b 7261 6b65 6e2e  s://docs.kraken.
-00009420: 636f 6d2f 7265 7374 2f23 7461 672f 5370  com/rest/#tag/Sp
-00009430: 6f74 2d4d 6172 6b65 742d 4461 7461 2f6f  ot-Market-Data/o
-00009440: 7065 7261 7469 6f6e 2f67 6574 5469 636b  peration/getTick
-00009450: 6572 496e 666f 726d 6174 696f 6e0a 2020  erInformation.  
-00009460: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00009470: 5b5d 7c4e 6f6e 6520 7379 6d62 6f6c 733a  []|None symbols:
-00009480: 2075 6e69 6669 6564 2073 796d 626f 6c73   unified symbols
-00009490: 206f 6620 7468 6520 6d61 726b 6574 7320   of the markets 
-000094a0: 746f 2066 6574 6368 2074 6865 2074 6963  to fetch the tic
-000094b0: 6b65 7220 666f 722c 2061 6c6c 206d 6172  ker for, all mar
-000094c0: 6b65 7420 7469 636b 6572 7320 6172 6520  ket tickers are 
-000094d0: 7265 7475 726e 6564 2069 6620 6e6f 7420  returned if not 
-000094e0: 6173 7369 676e 6564 0a20 2020 2020 2020  assigned.       
-000094f0: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-00009500: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-00009510: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00009520: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-00009530: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-00009540: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00009550: 6963 743a 2061 2064 6963 7469 6f6e 6172  ict: a dictionar
-00009560: 7920 6f66 2060 7469 636b 6572 2073 7472  y of `ticker str
-00009570: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-00009580: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-00009590: 2f3f 6964 3d74 6963 6b65 722d 7374 7275  /?id=ticker-stru
-000095a0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-000095b0: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-000095c0: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-000095d0: 6574 7328 290a 2020 2020 2020 2020 7265  ets().        re
-000095e0: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
-000095f0: 2020 2069 6620 7379 6d62 6f6c 7320 6973     if symbols is
-00009600: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00009610: 2020 2020 2020 2073 796d 626f 6c73 203d         symbols =
-00009620: 2073 656c 662e 6d61 726b 6574 5f73 796d   self.market_sym
-00009630: 626f 6c73 2873 796d 626f 6c73 290a 2020  bols(symbols).  
-00009640: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-00009650: 4964 7320 3d20 5b5d 0a20 2020 2020 2020  Ids = [].       
-00009660: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-00009670: 6e67 6528 302c 206c 656e 2873 796d 626f  nge(0, len(symbo
-00009680: 6c73 2929 3a0a 2020 2020 2020 2020 2020  ls)):.          
-00009690: 2020 2020 2020 7379 6d62 6f6c 203d 2073        symbol = s
-000096a0: 796d 626f 6c73 5b69 5d0a 2020 2020 2020  ymbols[i].      
-000096b0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-000096c0: 203d 2073 656c 662e 6d61 726b 6574 735b   = self.markets[
-000096d0: 7379 6d62 6f6c 5d0a 2020 2020 2020 2020  symbol].        
-000096e0: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-000096f0: 745b 2761 6374 6976 6527 5d20 616e 6420  t['active'] and 
-00009700: 6e6f 7420 6d61 726b 6574 5b27 6461 726b  not market['dark
-00009710: 706f 6f6c 275d 3a0a 2020 2020 2020 2020  pool']:.        
-00009720: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00009730: 6574 4964 732e 6170 7065 6e64 286d 6172  etIds.append(mar
-00009740: 6b65 745b 2769 6427 5d29 0a20 2020 2020  ket['id']).     
-00009750: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00009760: 7061 6972 275d 203d 2027 2c27 2e6a 6f69  pair'] = ','.joi
-00009770: 6e28 6d61 726b 6574 4964 7329 0a20 2020  n(marketIds).   
-00009780: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-00009790: 6177 6169 7420 7365 6c66 2e70 7562 6c69  await self.publi
-000097a0: 6347 6574 5469 636b 6572 2873 656c 662e  cGetTicker(self.
-000097b0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-000097c0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-000097d0: 2074 6963 6b65 7273 203d 2072 6573 706f   tickers = respo
-000097e0: 6e73 655b 2772 6573 756c 7427 5d0a 2020  nse['result'].  
-000097f0: 2020 2020 2020 6964 7320 3d20 6c69 7374        ids = list
-00009800: 2874 6963 6b65 7273 2e6b 6579 7328 2929  (tickers.keys())
-00009810: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-00009820: 3d20 7b7d 0a20 2020 2020 2020 2066 6f72  = {}.        for
-00009830: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
-00009840: 656e 2869 6473 2929 3a0a 2020 2020 2020  en(ids)):.      
-00009850: 2020 2020 2020 6964 203d 2069 6473 5b69        id = ids[i
-00009860: 5d0a 2020 2020 2020 2020 2020 2020 6d61  ].            ma
-00009870: 726b 6574 203d 2073 656c 662e 7361 6665  rket = self.safe
-00009880: 5f6d 6172 6b65 7428 6964 290a 2020 2020  _market(id).    
-00009890: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
-000098a0: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-000098b0: 5d0a 2020 2020 2020 2020 2020 2020 7469  ].            ti
-000098c0: 636b 6572 203d 2074 6963 6b65 7273 5b69  cker = tickers[i
-000098d0: 645d 0a20 2020 2020 2020 2020 2020 2072  d].            r
-000098e0: 6573 756c 745b 7379 6d62 6f6c 5d20 3d20  esult[symbol] = 
-000098f0: 7365 6c66 2e70 6172 7365 5f74 6963 6b65  self.parse_ticke
-00009900: 7228 7469 636b 6572 2c20 6d61 726b 6574  r(ticker, market
-00009910: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00009920: 2073 656c 662e 6669 6c74 6572 5f62 795f   self.filter_by_
-00009930: 6172 7261 795f 7469 636b 6572 7328 7265  array_tickers(re
-00009940: 7375 6c74 2c20 2773 796d 626f 6c27 2c20  sult, 'symbol', 
-00009950: 7379 6d62 6f6c 7329 0a0a 2020 2020 6173  symbols)..    as
-00009960: 796e 6320 6465 6620 6665 7463 685f 7469  ync def fetch_ti
-00009970: 636b 6572 2873 656c 662c 2073 796d 626f  cker(self, symbo
-00009980: 6c3a 2073 7472 2c20 7061 7261 6d73 3d7b  l: str, params={
-00009990: 7d29 202d 3e20 5469 636b 6572 3a0a 2020  }) -> Ticker:.  
-000099a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000099b0: 2020 6665 7463 6865 7320 6120 7072 6963    fetches a pric
-000099c0: 6520 7469 636b 6572 2c20 6120 7374 6174  e ticker, a stat
-000099d0: 6973 7469 6361 6c20 6361 6c63 756c 6174  istical calculat
-000099e0: 696f 6e20 7769 7468 2074 6865 2069 6e66  ion with the inf
-000099f0: 6f72 6d61 7469 6f6e 2063 616c 6375 6c61  ormation calcula
-00009a00: 7465 6420 6f76 6572 2074 6865 2070 6173  ted over the pas
-00009a10: 7420 3234 2068 6f75 7273 2066 6f72 2061  t 24 hours for a
-00009a20: 2073 7065 6369 6669 6320 6d61 726b 6574   specific market
-00009a30: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
-00009a40: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
-00009a50: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
-00009a60: 2f53 706f 742d 4d61 726b 6574 2d44 6174  /Spot-Market-Dat
-00009a70: 612f 6f70 6572 6174 696f 6e2f 6765 7454  a/operation/getT
-00009a80: 6963 6b65 7249 6e66 6f72 6d61 7469 6f6e  ickerInformation
-00009a90: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00009aa0: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
-00009ab0: 6965 6420 7379 6d62 6f6c 206f 6620 7468  ied symbol of th
-00009ac0: 6520 6d61 726b 6574 2074 6f20 6665 7463  e market to fetc
-00009ad0: 6820 7468 6520 7469 636b 6572 2066 6f72  h the ticker for
-00009ae0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00009af0: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
-00009b00: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00009b10: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00009b20: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
-00009b30: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00009b40: 6574 7572 6e73 2064 6963 743a 2061 2060  eturns dict: a `
-00009b50: 7469 636b 6572 2073 7472 7563 7475 7265  ticker structure
-00009b60: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-00009b70: 6378 742e 636f 6d2f 232f 3f69 643d 7469  cxt.com/#/?id=ti
-00009b80: 636b 6572 2d73 7472 7563 7475 7265 3e60  cker-structure>`
-00009b90: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00009ba0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-00009bb0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-00009bc0: 2020 2020 2020 2064 6172 6b70 6f6f 6c20         darkpool 
-00009bd0: 3d20 7379 6d62 6f6c 2e66 696e 6428 272e  = symbol.find('.
-00009be0: 6427 2920 3e3d 2030 0a20 2020 2020 2020  d') >= 0.       
-00009bf0: 2069 6620 6461 726b 706f 6f6c 3a0a 2020   if darkpool:.  
-00009c00: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00009c10: 4578 6368 616e 6765 4572 726f 7228 7365  ExchangeError(se
-00009c20: 6c66 2e69 6420 2b20 2720 6665 7463 6854  lf.id + ' fetchT
-00009c30: 6963 6b65 7228 2920 646f 6573 206e 6f74  icker() does not
-00009c40: 2070 726f 7669 6465 2061 2074 6963 6b65   provide a ticke
-00009c50: 7220 666f 7220 6461 726b 706f 6f6c 2073  r for darkpool s
-00009c60: 796d 626f 6c20 2720 2b20 7379 6d62 6f6c  ymbol ' + symbol
-00009c70: 290a 2020 2020 2020 2020 6d61 726b 6574  ).        market
-00009c80: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-00009c90: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-00009ca0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
-00009cb0: 2020 2020 2020 2027 7061 6972 273a 206d         'pair': m
-00009cc0: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
-00009cd0: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-00009ce0: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-00009cf0: 7365 6c66 2e70 7562 6c69 6347 6574 5469  self.publicGetTi
-00009d00: 636b 6572 2873 656c 662e 6578 7465 6e64  cker(self.extend
-00009d10: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
-00009d20: 2929 0a20 2020 2020 2020 2074 6963 6b65  )).        ticke
-00009d30: 7220 3d20 7265 7370 6f6e 7365 5b27 7265  r = response['re
-00009d40: 7375 6c74 275d 5b6d 6172 6b65 745b 2769  sult'][market['i
-00009d50: 6427 5d5d 0a20 2020 2020 2020 2072 6574  d']].        ret
-00009d60: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
-00009d70: 6963 6b65 7228 7469 636b 6572 2c20 6d61  icker(ticker, ma
-00009d80: 726b 6574 290a 0a20 2020 2064 6566 2070  rket)..    def p
-00009d90: 6172 7365 5f6f 686c 6376 2873 656c 662c  arse_ohlcv(self,
-00009da0: 206f 686c 6376 2c20 6d61 726b 6574 3a20   ohlcv, market: 
-00009db0: 4d61 726b 6574 203d 204e 6f6e 6529 202d  Market = None) -
-00009dc0: 3e20 6c69 7374 3a0a 2020 2020 2020 2020  > list:.        
-00009dd0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00009de0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-00009df0: 2020 2020 3135 3931 3437 3536 3430 2c0a      1591475640,.
-00009e00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00009e10: 2020 2230 2e30 3235 3030 222c 0a20 2020    "0.02500",.   
-00009e20: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00009e30: 302e 3032 3530 3022 2c0a 2020 2020 2020  0.02500",.      
-00009e40: 2020 2320 2020 2020 2020 2020 2230 2e30    #         "0.0
-00009e50: 3235 3030 222c 0a20 2020 2020 2020 2023  2500",.        #
-00009e60: 2020 2020 2020 2020 2022 302e 3032 3530           "0.0250
-00009e70: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-00009e80: 2020 2020 2020 2230 2e30 3235 3030 222c        "0.02500",
-00009e90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00009ea0: 2020 2022 392e 3132 3230 3130 3030 222c     "9.12201000",
-00009eb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00009ec0: 2020 2035 0a20 2020 2020 2020 2023 2020     5.        #  
-00009ed0: 2020 205d 0a20 2020 2020 2020 2023 0a20     ].        #. 
-00009ee0: 2020 2020 2020 2072 6574 7572 6e20 5b0a         return [.
-00009ef0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00009f00: 2e73 6166 655f 7469 6d65 7374 616d 7028  .safe_timestamp(
-00009f10: 6f68 6c63 762c 2030 292c 0a20 2020 2020  ohlcv, 0),.     
-00009f20: 2020 2020 2020 2073 656c 662e 7361 6665         self.safe
-00009f30: 5f6e 756d 6265 7228 6f68 6c63 762c 2031  _number(ohlcv, 1
-00009f40: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
-00009f50: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00009f60: 6f68 6c63 762c 2032 292c 0a20 2020 2020  ohlcv, 2),.     
-00009f70: 2020 2020 2020 2073 656c 662e 7361 6665         self.safe
-00009f80: 5f6e 756d 6265 7228 6f68 6c63 762c 2033  _number(ohlcv, 3
-00009f90: 292c 0a20 2020 2020 2020 2020 2020 2073  ),.            s
-00009fa0: 656c 662e 7361 6665 5f6e 756d 6265 7228  elf.safe_number(
-00009fb0: 6f68 6c63 762c 2034 292c 0a20 2020 2020  ohlcv, 4),.     
-00009fc0: 2020 2020 2020 2073 656c 662e 7361 6665         self.safe
-00009fd0: 5f6e 756d 6265 7228 6f68 6c63 762c 2036  _number(ohlcv, 6
-00009fe0: 292c 0a20 2020 2020 2020 205d 0a0a 2020  ),.        ]..  
-00009ff0: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-0000a000: 685f 6f68 6c63 7628 7365 6c66 2c20 7379  h_ohlcv(self, sy
-0000a010: 6d62 6f6c 3a20 7374 722c 2074 696d 6566  mbol: str, timef
-0000a020: 7261 6d65 3d27 316d 272c 2073 696e 6365  rame='1m', since
-0000a030: 3a20 496e 7420 3d20 4e6f 6e65 2c20 6c69  : Int = None, li
-0000a040: 6d69 743a 2049 6e74 203d 204e 6f6e 652c  mit: Int = None,
-0000a050: 2070 6172 616d 733d 7b7d 2920 2d3e 204c   params={}) -> L
-0000a060: 6973 745b 6c69 7374 5d3a 0a20 2020 2020  ist[list]:.     
-0000a070: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-0000a080: 6574 6368 6573 2068 6973 746f 7269 6361  etches historica
-0000a090: 6c20 6361 6e64 6c65 7374 6963 6b20 6461  l candlestick da
-0000a0a0: 7461 2063 6f6e 7461 696e 696e 6720 7468  ta containing th
-0000a0b0: 6520 6f70 656e 2c20 6869 6768 2c20 6c6f  e open, high, lo
-0000a0c0: 772c 2061 6e64 2063 6c6f 7365 2070 7269  w, and close pri
-0000a0d0: 6365 2c20 616e 6420 7468 6520 766f 6c75  ce, and the volu
-0000a0e0: 6d65 206f 6620 6120 6d61 726b 6574 0a20  me of a market. 
-0000a0f0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-0000a100: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-0000a110: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-0000a120: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-0000a130: 6f70 6572 6174 696f 6e2f 6765 744f 484c  operation/getOHL
-0000a140: 4344 6174 610a 2020 2020 2020 2020 3a70  CData.        :p
-0000a150: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-0000a160: 2075 6e69 6669 6564 2073 796d 626f 6c20   unified symbol 
-0000a170: 6f66 2074 6865 206d 6172 6b65 7420 746f  of the market to
-0000a180: 2066 6574 6368 204f 484c 4356 2064 6174   fetch OHLCV dat
-0000a190: 6120 666f 720a 2020 2020 2020 2020 3a70  a for.        :p
-0000a1a0: 6172 616d 2073 7472 2074 696d 6566 7261  aram str timefra
-0000a1b0: 6d65 3a20 7468 6520 6c65 6e67 7468 206f  me: the length o
-0000a1c0: 6620 7469 6d65 2065 6163 6820 6361 6e64  f time each cand
-0000a1d0: 6c65 2072 6570 7265 7365 6e74 730a 2020  le represents.  
-0000a1e0: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-0000a1f0: 205b 7369 6e63 655d 3a20 7469 6d65 7374   [since]: timest
-0000a200: 616d 7020 696e 206d 7320 6f66 2074 6865  amp in ms of the
-0000a210: 2065 6172 6c69 6573 7420 6361 6e64 6c65   earliest candle
-0000a220: 2074 6f20 6665 7463 680a 2020 2020 2020   to fetch.      
-0000a230: 2020 3a70 6172 616d 2069 6e74 205b 6c69    :param int [li
-0000a240: 6d69 745d 3a20 7468 6520 6d61 7869 6d75  mit]: the maximu
-0000a250: 6d20 616d 6f75 6e74 206f 6620 6361 6e64  m amount of cand
-0000a260: 6c65 7320 746f 2066 6574 6368 0a20 2020  les to fetch.   
-0000a270: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-0000a280: 205b 7061 7261 6d73 5d3a 2065 7874 7261   [params]: extra
-0000a290: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-0000a2a0: 6966 6963 2074 6f20 7468 6520 6578 6368  ific to the exch
-0000a2b0: 616e 6765 2041 5049 2065 6e64 706f 696e  ange API endpoin
-0000a2c0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-0000a2d0: 2062 6f6f 6c65 616e 205b 7061 7261 6d73   boolean [params
-0000a2e0: 2e70 6167 696e 6174 655d 3a20 6465 6661  .paginate]: defa
-0000a2f0: 756c 7420 4661 6c73 652c 2077 6865 6e20  ult False, when 
-0000a300: 5472 7565 2077 696c 6c20 6175 746f 6d61  True will automa
-0000a310: 7469 6361 6c6c 7920 7061 6769 6e61 7465  tically paginate
-0000a320: 2062 7920 6361 6c6c 696e 6720 7365 6c66   by calling self
-0000a330: 2065 6e64 706f 696e 7420 6d75 6c74 6970   endpoint multip
-0000a340: 6c65 2074 696d 6573 2e20 5365 6520 696e  le times. See in
-0000a350: 2074 6865 2064 6f63 7320 616c 6c20 7468   the docs all th
-0000a360: 6520 5b61 7661 696c 626c 6520 7061 7261  e [availble para
-0000a370: 6d65 7465 7273 5d28 6874 7470 733a 2f2f  meters](https://
-0000a380: 6769 7468 7562 2e63 6f6d 2f63 6378 742f  github.com/ccxt/
-0000a390: 6363 7874 2f77 696b 692f 4d61 6e75 616c  ccxt/wiki/Manual
-0000a3a0: 2370 6167 696e 6174 696f 6e2d 7061 7261  #pagination-para
-0000a3b0: 6d73 290a 2020 2020 2020 2020 3a72 6574  ms).        :ret
-0000a3c0: 7572 6e73 2069 6e74 5b5d 5b5d 3a20 4120  urns int[][]: A 
-0000a3d0: 6c69 7374 206f 6620 6361 6e64 6c65 7320  list of candles 
-0000a3e0: 6f72 6465 7265 642c 206f 7065 6e2c 2068  ordered, open, h
-0000a3f0: 6967 682c 206c 6f77 2c20 636c 6f73 652c  igh, low, close,
-0000a400: 2076 6f6c 756d 650a 2020 2020 2020 2020   volume.        
-0000a410: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-0000a420: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-0000a430: 6574 7328 290a 2020 2020 2020 2020 7061  ets().        pa
-0000a440: 6769 6e61 7465 203d 2046 616c 7365 0a20  ginate = False. 
-0000a450: 2020 2020 2020 2070 6167 696e 6174 652c         paginate,
-0000a460: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0000a470: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
-0000a480: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
-0000a490: 2766 6574 6368 4f48 4c43 5627 2c20 2770  'fetchOHLCV', 'p
-0000a4a0: 6167 696e 6174 6527 290a 2020 2020 2020  aginate').      
-0000a4b0: 2020 6966 2070 6167 696e 6174 653a 0a20    if paginate:. 
-0000a4c0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000a4d0: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
-0000a4e0: 6368 5f70 6167 696e 6174 6564 5f63 616c  ch_paginated_cal
-0000a4f0: 6c5f 6465 7465 726d 696e 6973 7469 6328  l_deterministic(
-0000a500: 2766 6574 6368 4f48 4c43 5627 2c20 7379  'fetchOHLCV', sy
-0000a510: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
-0000a520: 6974 2c20 7469 6d65 6672 616d 652c 2070  it, timeframe, p
-0000a530: 6172 616d 732c 2037 3230 290a 2020 2020  arams, 720).    
-0000a540: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0000a550: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0000a560: 0a20 2020 2020 2020 2070 6172 7365 6454  .        parsedT
-0000a570: 696d 6566 7261 6d65 203d 2073 656c 662e  imeframe = self.
-0000a580: 7361 6665 5f69 6e74 6567 6572 2873 656c  safe_integer(sel
-0000a590: 662e 7469 6d65 6672 616d 6573 2c20 7469  f.timeframes, ti
-0000a5a0: 6d65 6672 616d 6529 0a20 2020 2020 2020  meframe).       
-0000a5b0: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-0000a5c0: 2020 2020 2020 2020 2027 7061 6972 273a           'pair':
-0000a5d0: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
-0000a5e0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0000a5f0: 2069 6620 7061 7273 6564 5469 6d65 6672   if parsedTimefr
-0000a600: 616d 6520 6973 206e 6f74 204e 6f6e 653a  ame is not None:
-0000a610: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000a620: 7565 7374 5b27 696e 7465 7276 616c 275d  uest['interval']
-0000a630: 203d 2070 6172 7365 6454 696d 6566 7261   = parsedTimefra
-0000a640: 6d65 0a20 2020 2020 2020 2065 6c73 653a  me.        else:
-0000a650: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000a660: 7565 7374 5b27 696e 7465 7276 616c 275d  uest['interval']
-0000a670: 203d 2074 696d 6566 7261 6d65 0a20 2020   = timeframe.   
-0000a680: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
-0000a690: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000a6a0: 2020 2020 2020 2023 2063 6f6e 7472 6172         # contrar
-0000a6b0: 7920 746f 206b 7261 6b65 6e27 7320 6170  y to kraken's ap
-0000a6c0: 6920 646f 6375 6d65 6e74 6174 696f 6e2c  i documentation,
-0000a6d0: 2074 6865 2073 696e 6365 2070 6172 616d   the since param
-0000a6e0: 6574 6572 206d 7573 7420 6265 2070 6173  eter must be pas
-0000a6f0: 7365 6420 696e 206e 616e 6f73 6563 6f6e  sed in nanosecon
-0000a700: 6473 0a20 2020 2020 2020 2020 2020 2023  ds.            #
-0000a710: 2074 6865 2061 6464 696e 6720 6f66 2027   the adding of '
-0000a720: 3030 3030 3030 2720 6973 2063 6f70 6965  000000' is copie
-0000a730: 6420 6672 6f6d 2074 6865 2066 6574 6368  d from the fetch
-0000a740: 5472 6164 6573 2066 756e 6374 696f 6e0a  Trades function.
-0000a750: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0000a760: 6573 745b 2773 696e 6365 275d 203d 2073  est['since'] = s
-0000a770: 656c 662e 6e75 6d62 6572 5f74 6f5f 7374  elf.number_to_st
-0000a780: 7269 6e67 2873 696e 6365 2920 2b20 2730  ring(since) + '0
-0000a790: 3030 3030 3027 2020 2320 6578 7065 6374  00000'  # expect
-0000a7a0: 6564 2074 6f20 6265 2069 6e20 6e61 6e6f  ed to be in nano
-0000a7b0: 7365 636f 6e64 730a 2020 2020 2020 2020  seconds.        
-0000a7c0: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-0000a7d0: 2073 656c 662e 7075 626c 6963 4765 744f   self.publicGetO
-0000a7e0: 484c 4328 7365 6c66 2e65 7874 656e 6428  HLC(self.extend(
-0000a7f0: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0000a800: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0000a810: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0000a820: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0000a830: 7272 6f72 223a 5b5d 2c0a 2020 2020 2020  rror":[],.      
-0000a840: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-0000a850: 756c 7422 3a7b 0a20 2020 2020 2020 2023  ult":{.        #
-0000a860: 2020 2020 2020 2020 2020 2020 2022 5845               "XE
-0000a870: 5448 5858 4254 223a 5b0a 2020 2020 2020  THXXBT":[.      
-0000a880: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000a890: 2020 2020 5b31 3539 3134 3735 3538 302c      [1591475580,
-0000a8a0: 2230 2e30 3234 3939 222c 2230 2e30 3234  "0.02499","0.024
-0000a8b0: 3939 222c 2230 2e30 3234 3939 222c 2230  99","0.02499","0
-0000a8c0: 2e30 3234 3939 222c 2230 2e30 3030 3030  .02499","0.00000
-0000a8d0: 222c 2230 2e30 3030 3030 3030 3022 2c30  ","0.00000000",0
-0000a8e0: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-0000a8f0: 2020 2020 2020 2020 2020 2020 205b 3135               [15
-0000a900: 3931 3437 3536 3430 2c22 302e 3032 3530  91475640,"0.0250
-0000a910: 3022 2c22 302e 3032 3530 3022 2c22 302e  0","0.02500","0.
-0000a920: 3032 3530 3022 2c22 302e 3032 3530 3022  02500","0.02500"
-0000a930: 2c22 302e 3032 3530 3022 2c22 392e 3132  ,"0.02500","9.12
-0000a940: 3230 3130 3030 222c 355d 2c0a 2020 2020  201000",5],.    
-0000a950: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000a960: 2020 2020 2020 5b31 3539 3134 3735 3730        [159147570
-0000a970: 302c 2230 2e30 3234 3939 222c 2230 2e30  0,"0.02499","0.0
-0000a980: 3234 3939 222c 2230 2e30 3234 3939 222c  2499","0.02499",
-0000a990: 2230 2e30 3234 3939 222c 2230 2e30 3234  "0.02499","0.024
-0000a9a0: 3939 222c 2231 2e32 3836 3831 3431 3522  99","1.28681415"
-0000a9b0: 2c32 5d2c 0a20 2020 2020 2020 2023 2020  ,2],.        #  
-0000a9c0: 2020 2020 2020 2020 2020 2020 2020 205b                 [
-0000a9d0: 3135 3931 3437 3537 3630 2c22 302e 3032  1591475760,"0.02
-0000a9e0: 3439 3922 2c22 302e 3032 3439 3922 2c22  499","0.02499","
-0000a9f0: 302e 3032 3439 3922 2c22 302e 3032 3439  0.02499","0.0249
-0000aa00: 3922 2c22 302e 3032 3439 3922 2c22 302e  9","0.02499","0.
-0000aa10: 3038 3830 3030 3030 222c 315d 2c0a 2020  08800000",1],.  
-0000aa20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000aa30: 2020 2020 5d2c 0a20 2020 2020 2020 2023      ],.        #
-0000aa40: 2020 2020 2020 2020 2020 2020 2022 6c61               "la
-0000aa50: 7374 223a 3135 3931 3531 3735 3830 0a20  st":1591517580. 
-0000aa60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000aa70: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0000aa80: 207d 0a20 2020 2020 2020 2072 6573 756c   }.        resul
-0000aa90: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-0000aaa0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-0000aab0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-0000aac0: 2020 2020 6f68 6c63 7673 203d 2073 656c      ohlcvs = sel
-0000aad0: 662e 7361 6665 5f6c 6973 7428 7265 7375  f.safe_list(resu
-0000aae0: 6c74 2c20 6d61 726b 6574 5b27 6964 275d  lt, market['id']
-0000aaf0: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
-0000ab00: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
-0000ab10: 6f68 6c63 7673 286f 686c 6376 732c 206d  ohlcvs(ohlcvs, m
-0000ab20: 6172 6b65 742c 2074 696d 6566 7261 6d65  arket, timeframe
-0000ab30: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-0000ab40: 0a20 2020 2064 6566 2070 6172 7365 5f6c  .    def parse_l
-0000ab50: 6564 6765 725f 656e 7472 795f 7479 7065  edger_entry_type
-0000ab60: 2873 656c 662c 2074 7970 6529 3a0a 2020  (self, type):.  
-0000ab70: 2020 2020 2020 7479 7065 7320 3d20 7b0a        types = {.
-0000ab80: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
-0000ab90: 6465 273a 2027 7472 6164 6527 2c0a 2020  de': 'trade',.  
-0000aba0: 2020 2020 2020 2020 2020 2777 6974 6864            'withd
-0000abb0: 7261 7761 6c27 3a20 2774 7261 6e73 6163  rawal': 'transac
-0000abc0: 7469 6f6e 272c 0a20 2020 2020 2020 2020  tion',.         
-0000abd0: 2020 2027 6465 706f 7369 7427 3a20 2774     'deposit': 't
-0000abe0: 7261 6e73 6163 7469 6f6e 272c 0a20 2020  ransaction',.   
-0000abf0: 2020 2020 2020 2020 2027 7472 616e 7366           'transf
-0000ac00: 6572 273a 2027 7472 616e 7366 6572 272c  er': 'transfer',
-0000ac10: 0a20 2020 2020 2020 2020 2020 2027 6d61  .            'ma
-0000ac20: 7267 696e 273a 2027 6d61 7267 696e 272c  rgin': 'margin',
-0000ac30: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0000ac40: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
-0000ac50: 6166 655f 7374 7269 6e67 2874 7970 6573  afe_string(types
-0000ac60: 2c20 7479 7065 2c20 7479 7065 290a 0a20  , type, type).. 
-0000ac70: 2020 2064 6566 2070 6172 7365 5f6c 6564     def parse_led
-0000ac80: 6765 725f 656e 7472 7928 7365 6c66 2c20  ger_entry(self, 
-0000ac90: 6974 656d 2c20 6375 7272 656e 6379 3a20  item, currency: 
-0000aca0: 4375 7272 656e 6379 203d 204e 6f6e 6529  Currency = None)
-0000acb0: 3a0a 2020 2020 2020 2020 230a 2020 2020  :.        #.    
-0000acc0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0000acd0: 2020 2020 2320 2020 2020 2020 2020 274c      #         'L
-0000ace0: 5446 4b37 462d 4e32 4355 582d 504e 5934  TFK7F-N2CUX-PNY4
-0000acf0: 5358 273a 207b 0a20 2020 2020 2020 2023  SX': {.        #
-0000ad00: 2020 2020 2020 2020 2020 2020 2022 7265               "re
-0000ad10: 6669 6422 3a20 2254 534a 5447 542d 4454  fid": "TSJTGT-DT
-0000ad20: 3757 4e2d 4750 5051 4d4a 222c 0a20 2020  7WN-GPPQMJ",.   
-0000ad30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000ad40: 2020 2022 7469 6d65 223a 2020 3135 3230     "time":  1520
-0000ad50: 3130 3233 3230 2e35 3535 2c0a 2020 2020  102320.555,.    
-0000ad60: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000ad70: 2020 2274 7970 6522 3a20 2274 7261 6465    "type": "trade
-0000ad80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000ad90: 2020 2020 2020 2020 2022 6163 6c61 7373           "aclass
-0000ada0: 223a 2022 6375 7272 656e 6379 222c 0a20  ": "currency",. 
-0000adb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000adc0: 2020 2020 2022 6173 7365 7422 3a20 2258       "asset": "X
-0000add0: 4554 4822 2c0a 2020 2020 2020 2020 2320  ETH",.        # 
-0000ade0: 2020 2020 2020 2020 2020 2020 2261 6d6f              "amo
-0000adf0: 756e 7422 3a20 2230 2e31 3038 3731 3934  unt": "0.1087194
-0000ae00: 3630 3022 2c0a 2020 2020 2020 2020 2320  600",.        # 
-0000ae10: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
-0000ae20: 223a 2022 302e 3030 3030 3030 3030 3030  ": "0.0000000000
-0000ae30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000ae40: 2020 2020 2020 2020 2022 6261 6c61 6e63           "balanc
-0000ae50: 6522 3a20 2230 2e32 3835 3538 3531 3030  e": "0.285585100
-0000ae60: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
-0000ae70: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0000ae80: 2320 2020 2020 2020 2020 2e2e 2e0a 2020  #         ....  
-0000ae90: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
-0000aea0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0000aeb0: 6964 203d 2073 656c 662e 7361 6665 5f73  id = self.safe_s
-0000aec0: 7472 696e 6728 6974 656d 2c20 2769 6427  tring(item, 'id'
-0000aed0: 290a 2020 2020 2020 2020 6469 7265 6374  ).        direct
-0000aee0: 696f 6e20 3d20 4e6f 6e65 0a20 2020 2020  ion = None.     
-0000aef0: 2020 2061 6363 6f75 6e74 203d 204e 6f6e     account = Non
-0000af00: 650a 2020 2020 2020 2020 7265 6665 7265  e.        refere
-0000af10: 6e63 6549 6420 3d20 7365 6c66 2e73 6166  nceId = self.saf
-0000af20: 655f 7374 7269 6e67 2869 7465 6d2c 2027  e_string(item, '
-0000af30: 7265 6669 6427 290a 2020 2020 2020 2020  refid').        
-0000af40: 7265 6665 7265 6e63 6541 6363 6f75 6e74  referenceAccount
-0000af50: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000af60: 7479 7065 203d 2073 656c 662e 7061 7273  type = self.pars
-0000af70: 655f 6c65 6467 6572 5f65 6e74 7279 5f74  e_ledger_entry_t
-0000af80: 7970 6528 7365 6c66 2e73 6166 655f 7374  ype(self.safe_st
-0000af90: 7269 6e67 2869 7465 6d2c 2027 7479 7065  ring(item, 'type
-0000afa0: 2729 290a 2020 2020 2020 2020 636f 6465  ')).        code
-0000afb0: 203d 2073 656c 662e 7361 6665 5f63 7572   = self.safe_cur
-0000afc0: 7265 6e63 795f 636f 6465 2873 656c 662e  rency_code(self.
-0000afd0: 7361 6665 5f73 7472 696e 6728 6974 656d  safe_string(item
-0000afe0: 2c20 2761 7373 6574 2729 2c20 6375 7272  , 'asset'), curr
-0000aff0: 656e 6379 290a 2020 2020 2020 2020 616d  ency).        am
-0000b000: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
-0000b010: 5f73 7472 696e 6728 6974 656d 2c20 2761  _string(item, 'a
-0000b020: 6d6f 756e 7427 290a 2020 2020 2020 2020  mount').        
-0000b030: 6966 2050 7265 6369 7365 2e73 7472 696e  if Precise.strin
-0000b040: 675f 6c74 2861 6d6f 756e 742c 2027 3027  g_lt(amount, '0'
-0000b050: 293a 0a20 2020 2020 2020 2020 2020 2064  ):.            d
-0000b060: 6972 6563 7469 6f6e 203d 2027 6f75 7427  irection = 'out'
-0000b070: 0a20 2020 2020 2020 2020 2020 2061 6d6f  .            amo
-0000b080: 756e 7420 3d20 5072 6563 6973 652e 7374  unt = Precise.st
-0000b090: 7269 6e67 5f61 6273 2861 6d6f 756e 7429  ring_abs(amount)
-0000b0a0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-0000b0b0: 2020 2020 2020 2020 2020 2064 6972 6563             direc
-0000b0c0: 7469 6f6e 203d 2027 696e 270a 2020 2020  tion = 'in'.    
-0000b0d0: 2020 2020 7469 6d65 7374 616d 7020 3d20      timestamp = 
-0000b0e0: 7365 6c66 2e73 6166 655f 7469 6d65 7374  self.safe_timest
-0000b0f0: 616d 7028 6974 656d 2c20 2774 696d 6527  amp(item, 'time'
-0000b100: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0000b110: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-0000b120: 696e 666f 273a 2069 7465 6d2c 0a20 2020  info': item,.   
-0000b130: 2020 2020 2020 2020 2027 6964 273a 2069           'id': i
-0000b140: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
-0000b150: 6469 7265 6374 696f 6e27 3a20 6469 7265  direction': dire
-0000b160: 6374 696f 6e2c 0a20 2020 2020 2020 2020  ction,.         
-0000b170: 2020 2027 6163 636f 756e 7427 3a20 6163     'account': ac
-0000b180: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-0000b190: 2020 2027 7265 6665 7265 6e63 6549 6427     'referenceId'
-0000b1a0: 3a20 7265 6665 7265 6e63 6549 642c 0a20  : referenceId,. 
-0000b1b0: 2020 2020 2020 2020 2020 2027 7265 6665             'refe
-0000b1c0: 7265 6e63 6541 6363 6f75 6e74 273a 2072  renceAccount': r
-0000b1d0: 6566 6572 656e 6365 4163 636f 756e 742c  eferenceAccount,
-0000b1e0: 0a20 2020 2020 2020 2020 2020 2027 7479  .            'ty
-0000b1f0: 7065 273a 2074 7970 652c 0a20 2020 2020  pe': type,.     
-0000b200: 2020 2020 2020 2027 6375 7272 656e 6379         'currency
-0000b210: 273a 2063 6f64 652c 0a20 2020 2020 2020  ': code,.       
-0000b220: 2020 2020 2027 616d 6f75 6e74 273a 2073       'amount': s
-0000b230: 656c 662e 7061 7273 655f 6e75 6d62 6572  elf.parse_number
-0000b240: 2861 6d6f 756e 7429 2c0a 2020 2020 2020  (amount),.      
-0000b250: 2020 2020 2020 2762 6566 6f72 6527 3a20        'before': 
-0000b260: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0000b270: 2020 2761 6674 6572 273a 2073 656c 662e    'after': self.
-0000b280: 7361 6665 5f6e 756d 6265 7228 6974 656d  safe_number(item
-0000b290: 2c20 2762 616c 616e 6365 2729 2c0a 2020  , 'balance'),.  
-0000b2a0: 2020 2020 2020 2020 2020 2773 7461 7475            'statu
-0000b2b0: 7327 3a20 276f 6b27 2c0a 2020 2020 2020  s': 'ok',.      
-0000b2c0: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
-0000b2d0: 273a 2074 696d 6573 7461 6d70 2c0a 2020  ': timestamp,.  
-0000b2e0: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
-0000b2f0: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
-0000b300: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
-0000b310: 2020 2020 2020 2020 2020 2027 6665 6527             'fee'
-0000b320: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-0000b330: 2020 2020 2763 6f73 7427 3a20 7365 6c66      'cost': self
-0000b340: 2e73 6166 655f 6e75 6d62 6572 2869 7465  .safe_number(ite
-0000b350: 6d2c 2027 6665 6527 292c 0a20 2020 2020  m, 'fee'),.     
-0000b360: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-0000b370: 656e 6379 273a 2063 6f64 652c 0a20 2020  ency': code,.   
-0000b380: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-0000b390: 2020 2020 7d0a 0a20 2020 2061 7379 6e63      }..    async
-0000b3a0: 2064 6566 2066 6574 6368 5f6c 6564 6765   def fetch_ledge
-0000b3b0: 7228 7365 6c66 2c20 636f 6465 3a20 5374  r(self, code: St
-0000b3c0: 7220 3d20 4e6f 6e65 2c20 7369 6e63 653a  r = None, since:
-0000b3d0: 2049 6e74 203d 204e 6f6e 652c 206c 696d   Int = None, lim
-0000b3e0: 6974 3a20 496e 7420 3d20 4e6f 6e65 2c20  it: Int = None, 
-0000b3f0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-0000b400: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000b410: 6665 7463 6820 7468 6520 6869 7374 6f72  fetch the histor
-0000b420: 7920 6f66 2063 6861 6e67 6573 2c20 6163  y of changes, ac
-0000b430: 7469 6f6e 7320 646f 6e65 2062 7920 7468  tions done by th
-0000b440: 6520 7573 6572 206f 7220 6f70 6572 6174  e user or operat
-0000b450: 696f 6e73 2074 6861 7420 616c 7465 7265  ions that altere
-0000b460: 6420 6261 6c61 6e63 6520 6f66 2074 6865  d balance of the
-0000b470: 2075 7365 720a 2020 2020 2020 2020 3a73   user.        :s
-0000b480: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
-0000b490: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
-0000b4a0: 2f23 7461 672f 4163 636f 756e 742d 4461  /#tag/Account-Da
-0000b4b0: 7461 2f6f 7065 7261 7469 6f6e 2f67 6574  ta/operation/get
-0000b4c0: 4c65 6467 6572 730a 2020 2020 2020 2020  Ledgers.        
-0000b4d0: 3a70 6172 616d 2073 7472 2063 6f64 653a  :param str code:
-0000b4e0: 2075 6e69 6669 6564 2063 7572 7265 6e63   unified currenc
-0000b4f0: 7920 636f 6465 2c20 6465 6661 756c 7420  y code, default 
-0000b500: 6973 204e 6f6e 650a 2020 2020 2020 2020  is None.        
-0000b510: 3a70 6172 616d 2069 6e74 205b 7369 6e63  :param int [sinc
-0000b520: 655d 3a20 7469 6d65 7374 616d 7020 696e  e]: timestamp in
-0000b530: 206d 7320 6f66 2074 6865 2065 6172 6c69   ms of the earli
-0000b540: 6573 7420 6c65 6467 6572 2065 6e74 7279  est ledger entry
-0000b550: 2c20 6465 6661 756c 7420 6973 204e 6f6e  , default is Non
-0000b560: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0000b570: 2069 6e74 205b 6c69 6d69 745d 3a20 6d61   int [limit]: ma
-0000b580: 7820 6e75 6d62 6572 206f 6620 6c65 6467  x number of ledg
-0000b590: 6572 2065 6e74 7279 7320 746f 2072 6574  er entrys to ret
-0000b5a0: 7572 6e2c 2064 6566 6175 6c74 2069 7320  urn, default is 
-0000b5b0: 4e6f 6e65 0a20 2020 2020 2020 203a 7061  None.        :pa
-0000b5c0: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
-0000b5d0: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
-0000b5e0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-0000b5f0: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
-0000b600: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-0000b610: 2020 3a70 6172 616d 2069 6e74 205b 7061    :param int [pa
-0000b620: 7261 6d73 2e75 6e74 696c 5d3a 2074 696d  rams.until]: tim
-0000b630: 6573 7461 6d70 2069 6e20 6d73 206f 6620  estamp in ms of 
-0000b640: 7468 6520 6c61 7465 7374 206c 6564 6765  the latest ledge
-0000b650: 7220 656e 7472 790a 2020 2020 2020 2020  r entry.        
-0000b660: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-0000b670: 2060 6c65 6467 6572 2073 7472 7563 7475   `ledger structu
-0000b680: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-0000b690: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0000b6a0: 6c65 6467 6572 2d73 7472 7563 7475 7265  ledger-structure
-0000b6b0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0000b6c0: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-0000b6d0: 2f77 7777 2e6b 7261 6b65 6e2e 636f 6d2f  /www.kraken.com/
-0000b6e0: 6665 6174 7572 6573 2f61 7069 2367 6574  features/api#get
-0000b6f0: 2d6c 6564 6765 7273 2d69 6e66 6f0a 2020  -ledgers-info.  
-0000b700: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
-0000b710: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0000b720: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-0000b730: 3d20 7b7d 0a20 2020 2020 2020 2063 7572  = {}.        cur
-0000b740: 7265 6e63 7920 3d20 4e6f 6e65 0a20 2020  rency = None.   
-0000b750: 2020 2020 2069 6620 636f 6465 2069 7320       if code is 
-0000b760: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-0000b770: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-0000b780: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
-0000b790: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
-0000b7a0: 2072 6571 7565 7374 5b27 6173 7365 7427   request['asset'
-0000b7b0: 5d20 3d20 6375 7272 656e 6379 5b27 6964  ] = currency['id
-0000b7c0: 275d 0a20 2020 2020 2020 2069 6620 7369  '].        if si
-0000b7d0: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-0000b7e0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000b7f0: 7565 7374 5b27 7374 6172 7427 5d20 3d20  uest['start'] = 
-0000b800: 7365 6c66 2e70 6172 7365 5f74 6f5f 696e  self.parse_to_in
-0000b810: 7428 7369 6e63 6520 2f20 3130 3030 290a  t(since / 1000).
-0000b820: 2020 2020 2020 2020 7265 7175 6573 742c          request,
-0000b830: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
-0000b840: 616e 646c 655f 756e 7469 6c5f 6f70 7469  andle_until_opti
-0000b850: 6f6e 2827 656e 6427 2c20 7265 7175 6573  on('end', reques
-0000b860: 742c 2070 6172 616d 7329 0a20 2020 2020  t, params).     
-0000b870: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
-0000b880: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
-0000b890: 506f 7374 4c65 6467 6572 7328 7365 6c66  PostLedgers(self
-0000b8a0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
-0000b8b0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
-0000b8c0: 2020 2320 7b20 6572 726f 723a 205b 5d2c    # { error: [],
-0000b8d0: 0a20 2020 2020 2020 2023 2020 2022 7265  .        #   "re
-0000b8e0: 7375 6c74 223a 207b 6c65 6467 6572 3a20  sult": {ledger: 
-0000b8f0: 7b27 4c50 5541 4942 2d54 5337 3734 2d55  {'LPUAIB-TS774-U
-0000b900: 4b48 5037 5827 3a20 7b20 2072 6566 6964  KHP7X': {  refid
-0000b910: 3a20 2241 3242 3448 4256 2d4c 344d 4449  : "A2B4HBV-L4MDI
-0000b920: 452d 4a55 344e 334e 222c 0a20 2020 2020  E-JU4N3N",.     
-0000b930: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b960: 2020 2020 2020 2022 7469 6d65 223a 2020         "time":  
-0000b970: 3135 3230 3130 3334 3838 2e33 3134 2c0a  1520103488.314,.
-0000b980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000b990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9b0: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-0000b9c0: 6522 3a20 2277 6974 6864 7261 7761 6c22  e": "withdrawal"
-0000b9d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba00: 2020 2020 2020 2020 2020 2020 2261 636c              "acl
-0000ba10: 6173 7322 3a20 2263 7572 7265 6e63 7922  ass": "currency"
-0000ba20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000ba30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba50: 2020 2020 2020 2020 2020 2020 2022 6173               "as
-0000ba60: 7365 7422 3a20 2258 4554 4822 2c0a 2020  set": "XETH",.  
-0000ba70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baa0: 2020 2020 2020 2020 2261 6d6f 756e 7422          "amount"
-0000bab0: 3a20 222d 302e 3238 3035 3830 3030 3030  : "-0.2805800000
-0000bac0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008b00: 6172 6b65 7449 6e66 6f2c 2027 7773 6e61  arketInfo, 'wsna
+00008b10: 6d65 2729 0a20 2020 2020 2020 2069 6620  me').        if 
+00008b20: 7773 4e61 6d65 2069 7320 6e6f 7420 4e6f  wsName is not No
+00008b30: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00008b40: 6f72 6465 7262 6f6f 6b20 3d20 7365 6c66  orderbook = self
+00008b50: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+00008b60: 6c74 2c20 7773 4e61 6d65 2c20 6f72 6465  lt, wsName, orde
+00008b70: 7262 6f6f 6b29 0a20 2020 2020 2020 2072  rbook).        r
+00008b80: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00008b90: 5f6f 7264 6572 5f62 6f6f 6b28 6f72 6465  _order_book(orde
+00008ba0: 7262 6f6f 6b2c 2073 796d 626f 6c29 0a0a  rbook, symbol)..
+00008bb0: 2020 2020 6465 6620 7061 7273 655f 7469      def parse_ti
+00008bc0: 636b 6572 2873 656c 662c 2074 6963 6b65  cker(self, ticke
+00008bd0: 722c 206d 6172 6b65 743a 204d 6172 6b65  r, market: Marke
+00008be0: 7420 3d20 4e6f 6e65 2920 2d3e 2054 6963  t = None) -> Tic
+00008bf0: 6b65 723a 0a20 2020 2020 2020 2023 0a20  ker:.        #. 
+00008c00: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00008c10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00008c20: 2022 6122 3a5b 2232 3433 322e 3737 3030   "a":["2432.7700
+00008c30: 3022 2c22 3122 2c22 312e 3030 3022 5d2c  0","1","1.000"],
+00008c40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00008c50: 2020 2022 6222 3a5b 2232 3433 312e 3337     "b":["2431.37
+00008c60: 3030 3022 2c22 3222 2c22 322e 3030 3022  000","2","2.000"
+00008c70: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
+00008c80: 2020 2020 2022 6322 3a5b 2232 3433 302e       "c":["2430.
+00008c90: 3538 3030 3022 2c22 302e 3034 3430 3839  58000","0.044089
+00008ca0: 3130 225d 2c0a 2020 2020 2020 2020 2320  10"],.        # 
+00008cb0: 2020 2020 2020 2020 2276 223a 5b22 3431          "v":["41
+00008cc0: 3437 2e39 3434 3734 3930 3122 2c22 3838  47.94474901","88
+00008cd0: 3936 2e39 3630 3836 3330 3422 5d2c 0a20  96.96086304"],. 
+00008ce0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00008cf0: 2022 7022 3a5b 2232 3435 362e 3232 3233   "p":["2456.2223
+00008d00: 3922 2c22 3235 3638 2e36 3330 3332 225d  9","2568.63032"]
+00008d10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00008d20: 2020 2020 2274 223a 5b33 3930 372c 3130      "t":[3907,10
+00008d30: 3035 365d 2c0a 2020 2020 2020 2020 2320  056],.        # 
+00008d40: 2020 2020 2020 2020 226c 223a 5b22 3233          "l":["23
+00008d50: 3032 2e31 3830 3030 222c 2232 3330 322e  02.18000","2302.
+00008d60: 3138 3030 3022 5d2c 0a20 2020 2020 2020  18000"],.       
+00008d70: 2023 2020 2020 2020 2020 2022 6822 3a5b   #         "h":[
+00008d80: 2232 3632 312e 3134 3030 3022 2c22 3238  "2621.14000","28
+00008d90: 3630 2e30 3130 3030 225d 2c0a 2020 2020  60.01000"],.    
+00008da0: 2020 2020 2320 2020 2020 2020 2020 226f      #         "o
+00008db0: 223a 2232 3537 312e 3536 3030 3022 0a20  ":"2571.56000". 
+00008dc0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00008dd0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00008de0: 2073 796d 626f 6c20 3d20 7365 6c66 2e73   symbol = self.s
+00008df0: 6166 655f 7379 6d62 6f6c 284e 6f6e 652c  afe_symbol(None,
+00008e00: 206d 6172 6b65 7429 0a20 2020 2020 2020   market).       
+00008e10: 2076 203d 2073 656c 662e 7361 6665 5f76   v = self.safe_v
+00008e20: 616c 7565 2874 6963 6b65 722c 2027 7627  alue(ticker, 'v'
+00008e30: 2c20 5b5d 290a 2020 2020 2020 2020 6261  , []).        ba
+00008e40: 7365 566f 6c75 6d65 203d 2073 656c 662e  seVolume = self.
+00008e50: 7361 6665 5f73 7472 696e 6728 762c 2031  safe_string(v, 1
+00008e60: 290a 2020 2020 2020 2020 7020 3d20 7365  ).        p = se
+00008e70: 6c66 2e73 6166 655f 7661 6c75 6528 7469  lf.safe_value(ti
+00008e80: 636b 6572 2c20 2770 272c 205b 5d29 0a20  cker, 'p', []). 
+00008e90: 2020 2020 2020 2076 7761 7020 3d20 7365         vwap = se
+00008ea0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00008eb0: 2c20 3129 0a20 2020 2020 2020 2071 756f  , 1).        quo
+00008ec0: 7465 566f 6c75 6d65 203d 2050 7265 6369  teVolume = Preci
+00008ed0: 7365 2e73 7472 696e 675f 6d75 6c28 6261  se.string_mul(ba
+00008ee0: 7365 566f 6c75 6d65 2c20 7677 6170 290a  seVolume, vwap).
+00008ef0: 2020 2020 2020 2020 6320 3d20 7365 6c66          c = self
+00008f00: 2e73 6166 655f 7661 6c75 6528 7469 636b  .safe_value(tick
+00008f10: 6572 2c20 2763 272c 205b 5d29 0a20 2020  er, 'c', []).   
+00008f20: 2020 2020 206c 6173 7420 3d20 7365 6c66       last = self
+00008f30: 2e73 6166 655f 7374 7269 6e67 2863 2c20  .safe_string(c, 
+00008f40: 3029 0a20 2020 2020 2020 2068 6967 6820  0).        high 
+00008f50: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00008f60: 6528 7469 636b 6572 2c20 2768 272c 205b  e(ticker, 'h', [
+00008f70: 5d29 0a20 2020 2020 2020 206c 6f77 203d  ]).        low =
+00008f80: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00008f90: 2874 6963 6b65 722c 2027 6c27 2c20 5b5d  (ticker, 'l', []
+00008fa0: 290a 2020 2020 2020 2020 6269 6420 3d20  ).        bid = 
+00008fb0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00008fc0: 7469 636b 6572 2c20 2762 272c 205b 5d29  ticker, 'b', [])
+00008fd0: 0a20 2020 2020 2020 2061 736b 203d 2073  .        ask = s
+00008fe0: 656c 662e 7361 6665 5f76 616c 7565 2874  elf.safe_value(t
+00008ff0: 6963 6b65 722c 2027 6127 2c20 5b5d 290a  icker, 'a', []).
+00009000: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00009010: 656c 662e 7361 6665 5f74 6963 6b65 7228  elf.safe_ticker(
+00009020: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+00009030: 796d 626f 6c27 3a20 7379 6d62 6f6c 2c0a  ymbol': symbol,.
+00009040: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
+00009050: 6573 7461 6d70 273a 204e 6f6e 652c 0a20  estamp': None,. 
+00009060: 2020 2020 2020 2020 2020 2027 6461 7465             'date
+00009070: 7469 6d65 273a 204e 6f6e 652c 0a20 2020  time': None,.   
+00009080: 2020 2020 2020 2020 2027 6869 6768 273a           'high':
+00009090: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+000090a0: 6728 6869 6768 2c20 3129 2c0a 2020 2020  g(high, 1),.    
+000090b0: 2020 2020 2020 2020 276c 6f77 273a 2073          'low': s
+000090c0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000090d0: 6c6f 772c 2031 292c 0a20 2020 2020 2020  low, 1),.       
+000090e0: 2020 2020 2027 6269 6427 3a20 7365 6c66       'bid': self
+000090f0: 2e73 6166 655f 7374 7269 6e67 2862 6964  .safe_string(bid
+00009100: 2c20 3029 2c0a 2020 2020 2020 2020 2020  , 0),.          
+00009110: 2020 2762 6964 566f 6c75 6d65 273a 204e    'bidVolume': N
+00009120: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00009130: 2027 6173 6b27 3a20 7365 6c66 2e73 6166   'ask': self.saf
+00009140: 655f 7374 7269 6e67 2861 736b 2c20 3029  e_string(ask, 0)
+00009150: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00009160: 736b 566f 6c75 6d65 273a 204e 6f6e 652c  skVolume': None,
+00009170: 0a20 2020 2020 2020 2020 2020 2027 7677  .            'vw
+00009180: 6170 273a 2076 7761 702c 0a20 2020 2020  ap': vwap,.     
+00009190: 2020 2020 2020 2027 6f70 656e 273a 2073         'open': s
+000091a0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000091b0: 7469 636b 6572 2c20 276f 2729 2c0a 2020  ticker, 'o'),.  
+000091c0: 2020 2020 2020 2020 2020 2763 6c6f 7365            'close
+000091d0: 273a 206c 6173 742c 0a20 2020 2020 2020  ': last,.       
+000091e0: 2020 2020 2027 6c61 7374 273a 206c 6173       'last': las
+000091f0: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
+00009200: 7072 6576 696f 7573 436c 6f73 6527 3a20  previousClose': 
+00009210: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00009220: 2020 2763 6861 6e67 6527 3a20 4e6f 6e65    'change': None
+00009230: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
+00009240: 6572 6365 6e74 6167 6527 3a20 4e6f 6e65  ercentage': None
+00009250: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00009260: 7665 7261 6765 273a 204e 6f6e 652c 0a20  verage': None,. 
+00009270: 2020 2020 2020 2020 2020 2027 6261 7365             'base
+00009280: 566f 6c75 6d65 273a 2062 6173 6556 6f6c  Volume': baseVol
+00009290: 756d 652c 0a20 2020 2020 2020 2020 2020  ume,.           
+000092a0: 2027 7175 6f74 6556 6f6c 756d 6527 3a20   'quoteVolume': 
+000092b0: 7175 6f74 6556 6f6c 756d 652c 0a20 2020  quoteVolume,.   
+000092c0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+000092d0: 2074 6963 6b65 722c 0a20 2020 2020 2020   ticker,.       
+000092e0: 207d 2c20 6d61 726b 6574 290a 0a20 2020   }, market)..   
+000092f0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+00009300: 5f74 6963 6b65 7273 2873 656c 662c 2073  _tickers(self, s
+00009310: 796d 626f 6c73 3a20 5374 7269 6e67 7320  ymbols: Strings 
+00009320: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00009330: 7d29 202d 3e20 5469 636b 6572 733a 0a20  }) -> Tickers:. 
+00009340: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00009350: 2020 2066 6574 6368 6573 2070 7269 6365     fetches price
+00009360: 2074 6963 6b65 7273 2066 6f72 206d 756c   tickers for mul
+00009370: 7469 706c 6520 6d61 726b 6574 732c 2073  tiple markets, s
+00009380: 7461 7469 7374 6963 616c 2069 6e66 6f72  tatistical infor
+00009390: 6d61 7469 6f6e 2063 616c 6375 6c61 7465  mation calculate
+000093a0: 6420 6f76 6572 2074 6865 2070 6173 7420  d over the past 
+000093b0: 3234 2068 6f75 7273 2066 6f72 2065 6163  24 hours for eac
+000093c0: 6820 6d61 726b 6574 0a20 2020 2020 2020  h market.       
+000093d0: 203a 7365 653a 2068 7474 7073 3a2f 2f64   :see: https://d
+000093e0: 6f63 732e 6b72 616b 656e 2e63 6f6d 2f72  ocs.kraken.com/r
+000093f0: 6573 742f 2374 6167 2f53 706f 742d 4d61  est/#tag/Spot-Ma
+00009400: 726b 6574 2d44 6174 612f 6f70 6572 6174  rket-Data/operat
+00009410: 696f 6e2f 6765 7454 6963 6b65 7249 6e66  ion/getTickerInf
+00009420: 6f72 6d61 7469 6f6e 0a20 2020 2020 2020  ormation.       
+00009430: 203a 7061 7261 6d20 7374 725b 5d7c 4e6f   :param str[]|No
+00009440: 6e65 2073 796d 626f 6c73 3a20 756e 6966  ne symbols: unif
+00009450: 6965 6420 7379 6d62 6f6c 7320 6f66 2074  ied symbols of t
+00009460: 6865 206d 6172 6b65 7473 2074 6f20 6665  he markets to fe
+00009470: 7463 6820 7468 6520 7469 636b 6572 2066  tch the ticker f
+00009480: 6f72 2c20 616c 6c20 6d61 726b 6574 2074  or, all market t
+00009490: 6963 6b65 7273 2061 7265 2072 6574 7572  ickers are retur
+000094a0: 6e65 6420 6966 206e 6f74 2061 7373 6967  ned if not assig
+000094b0: 6e65 640a 2020 2020 2020 2020 3a70 6172  ned.        :par
+000094c0: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+000094d0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+000094e0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+000094f0: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+00009500: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+00009510: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+00009520: 6120 6469 6374 696f 6e61 7279 206f 6620  a dictionary of 
+00009530: 6074 6963 6b65 7220 7374 7275 6374 7572  `ticker structur
+00009540: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
+00009550: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+00009560: 7469 636b 6572 2d73 7472 7563 7475 7265  ticker-structure
+00009570: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00009580: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+00009590: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+000095a0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+000095b0: 203d 207b 7d0a 2020 2020 2020 2020 6966   = {}.        if
+000095c0: 2073 796d 626f 6c73 2069 7320 6e6f 7420   symbols is not 
+000095d0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000095e0: 2020 7379 6d62 6f6c 7320 3d20 7365 6c66    symbols = self
+000095f0: 2e6d 6172 6b65 745f 7379 6d62 6f6c 7328  .market_symbols(
+00009600: 7379 6d62 6f6c 7329 0a20 2020 2020 2020  symbols).       
+00009610: 2020 2020 206d 6172 6b65 7449 6473 203d       marketIds =
+00009620: 205b 5d0a 2020 2020 2020 2020 2020 2020   [].            
+00009630: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+00009640: 2c20 6c65 6e28 7379 6d62 6f6c 7329 293a  , len(symbols)):
+00009650: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00009660: 2073 796d 626f 6c20 3d20 7379 6d62 6f6c   symbol = symbol
+00009670: 735b 695d 0a20 2020 2020 2020 2020 2020  s[i].           
+00009680: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00009690: 6c66 2e6d 6172 6b65 7473 5b73 796d 626f  lf.markets[symbo
+000096a0: 6c5d 0a20 2020 2020 2020 2020 2020 2020  l].             
+000096b0: 2020 2069 6620 6d61 726b 6574 5b27 6163     if market['ac
+000096c0: 7469 7665 275d 2061 6e64 206e 6f74 206d  tive'] and not m
+000096d0: 6172 6b65 745b 2764 6172 6b70 6f6f 6c27  arket['darkpool'
+000096e0: 5d3a 0a20 2020 2020 2020 2020 2020 2020  ]:.             
+000096f0: 2020 2020 2020 206d 6172 6b65 7449 6473         marketIds
+00009700: 2e61 7070 656e 6428 6d61 726b 6574 5b27  .append(market['
+00009710: 6964 275d 290a 2020 2020 2020 2020 2020  id']).          
+00009720: 2020 7265 7175 6573 745b 2770 6169 7227    request['pair'
+00009730: 5d20 3d20 272c 272e 6a6f 696e 286d 6172  ] = ','.join(mar
+00009740: 6b65 7449 6473 290a 2020 2020 2020 2020  ketIds).        
+00009750: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+00009760: 2073 656c 662e 7075 626c 6963 4765 7454   self.publicGetT
+00009770: 6963 6b65 7228 7365 6c66 2e65 7874 656e  icker(self.exten
+00009780: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00009790: 7329 290a 2020 2020 2020 2020 7469 636b  s)).        tick
+000097a0: 6572 7320 3d20 7265 7370 6f6e 7365 5b27  ers = response['
+000097b0: 7265 7375 6c74 275d 0a20 2020 2020 2020  result'].       
+000097c0: 2069 6473 203d 206c 6973 7428 7469 636b   ids = list(tick
+000097d0: 6572 732e 6b65 7973 2829 290a 2020 2020  ers.keys()).    
+000097e0: 2020 2020 7265 7375 6c74 203d 207b 7d0a      result = {}.
+000097f0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00009800: 2072 616e 6765 2830 2c20 6c65 6e28 6964   range(0, len(id
+00009810: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+00009820: 2069 6420 3d20 6964 735b 695d 0a20 2020   id = ids[i].   
+00009830: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
+00009840: 3d20 7365 6c66 2e73 6166 655f 6d61 726b  = self.safe_mark
+00009850: 6574 2869 6429 0a20 2020 2020 2020 2020  et(id).         
+00009860: 2020 2073 796d 626f 6c20 3d20 6d61 726b     symbol = mark
+00009870: 6574 5b27 7379 6d62 6f6c 275d 0a20 2020  et['symbol'].   
+00009880: 2020 2020 2020 2020 2074 6963 6b65 7220           ticker 
+00009890: 3d20 7469 636b 6572 735b 6964 5d0a 2020  = tickers[id].  
+000098a0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
+000098b0: 5b73 796d 626f 6c5d 203d 2073 656c 662e  [symbol] = self.
+000098c0: 7061 7273 655f 7469 636b 6572 2874 6963  parse_ticker(tic
+000098d0: 6b65 722c 206d 6172 6b65 7429 0a20 2020  ker, market).   
+000098e0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000098f0: 2e66 696c 7465 725f 6279 5f61 7272 6179  .filter_by_array
+00009900: 5f74 6963 6b65 7273 2872 6573 756c 742c  _tickers(result,
+00009910: 2027 7379 6d62 6f6c 272c 2073 796d 626f   'symbol', symbo
+00009920: 6c73 290a 0a20 2020 2061 7379 6e63 2064  ls)..    async d
+00009930: 6566 2066 6574 6368 5f74 6963 6b65 7228  ef fetch_ticker(
+00009940: 7365 6c66 2c20 7379 6d62 6f6c 3a20 7374  self, symbol: st
+00009950: 722c 2070 6172 616d 733d 7b7d 2920 2d3e  r, params={}) ->
+00009960: 2054 6963 6b65 723a 0a20 2020 2020 2020   Ticker:.       
+00009970: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
+00009980: 6368 6573 2061 2070 7269 6365 2074 6963  ches a price tic
+00009990: 6b65 722c 2061 2073 7461 7469 7374 6963  ker, a statistic
+000099a0: 616c 2063 616c 6375 6c61 7469 6f6e 2077  al calculation w
+000099b0: 6974 6820 7468 6520 696e 666f 726d 6174  ith the informat
+000099c0: 696f 6e20 6361 6c63 756c 6174 6564 206f  ion calculated o
+000099d0: 7665 7220 7468 6520 7061 7374 2032 3420  ver the past 24 
+000099e0: 686f 7572 7320 666f 7220 6120 7370 6563  hours for a spec
+000099f0: 6966 6963 206d 6172 6b65 740a 2020 2020  ific market.    
+00009a00: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
+00009a10: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
+00009a20: 6d2f 7265 7374 2f23 7461 672f 5370 6f74  m/rest/#tag/Spot
+00009a30: 2d4d 6172 6b65 742d 4461 7461 2f6f 7065  -Market-Data/ope
+00009a40: 7261 7469 6f6e 2f67 6574 5469 636b 6572  ration/getTicker
+00009a50: 496e 666f 726d 6174 696f 6e0a 2020 2020  Information.    
+00009a60: 2020 2020 3a70 6172 616d 2073 7472 2073      :param str s
+00009a70: 796d 626f 6c3a 2075 6e69 6669 6564 2073  ymbol: unified s
+00009a80: 796d 626f 6c20 6f66 2074 6865 206d 6172  ymbol of the mar
+00009a90: 6b65 7420 746f 2066 6574 6368 2074 6865  ket to fetch the
+00009aa0: 2074 6963 6b65 7220 666f 720a 2020 2020   ticker for.    
+00009ab0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00009ac0: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+00009ad0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00009ae0: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+00009af0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+00009b00: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00009b10: 7320 6469 6374 3a20 6120 6074 6963 6b65  s dict: a `ticke
+00009b20: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+00009b30: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+00009b40: 6f6d 2f23 2f3f 6964 3d74 6963 6b65 722d  om/#/?id=ticker-
+00009b50: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00009b60: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00009b70: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+00009b80: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00009b90: 2020 6461 726b 706f 6f6c 203d 2073 796d    darkpool = sym
+00009ba0: 626f 6c2e 6669 6e64 2827 2e64 2729 203e  bol.find('.d') >
+00009bb0: 3d20 300a 2020 2020 2020 2020 6966 2064  = 0.        if d
+00009bc0: 6172 6b70 6f6f 6c3a 0a20 2020 2020 2020  arkpool:.       
+00009bd0: 2020 2020 2072 6169 7365 2045 7863 6861       raise Excha
+00009be0: 6e67 6545 7272 6f72 2873 656c 662e 6964  ngeError(self.id
+00009bf0: 202b 2027 2066 6574 6368 5469 636b 6572   + ' fetchTicker
+00009c00: 2829 2064 6f65 7320 6e6f 7420 7072 6f76  () does not prov
+00009c10: 6964 6520 6120 7469 636b 6572 2066 6f72  ide a ticker for
+00009c20: 2064 6172 6b70 6f6f 6c20 7379 6d62 6f6c   darkpool symbol
+00009c30: 2027 202b 2073 796d 626f 6c29 0a20 2020   ' + symbol).   
+00009c40: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00009c50: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+00009c60: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
+00009c70: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
+00009c80: 2020 2770 6169 7227 3a20 6d61 726b 6574    'pair': market
+00009c90: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+00009ca0: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
+00009cb0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+00009cc0: 7075 626c 6963 4765 7454 6963 6b65 7228  publicGetTicker(
+00009cd0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
+00009ce0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
+00009cf0: 2020 2020 2020 7469 636b 6572 203d 2072        ticker = r
+00009d00: 6573 706f 6e73 655b 2772 6573 756c 7427  esponse['result'
+00009d10: 5d5b 6d61 726b 6574 5b27 6964 275d 5d0a  ][market['id']].
+00009d20: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00009d30: 656c 662e 7061 7273 655f 7469 636b 6572  elf.parse_ticker
+00009d40: 2874 6963 6b65 722c 206d 6172 6b65 7429  (ticker, market)
+00009d50: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00009d60: 6f68 6c63 7628 7365 6c66 2c20 6f68 6c63  ohlcv(self, ohlc
+00009d70: 762c 206d 6172 6b65 743a 204d 6172 6b65  v, market: Marke
+00009d80: 7420 3d20 4e6f 6e65 2920 2d3e 206c 6973  t = None) -> lis
+00009d90: 743a 0a20 2020 2020 2020 2023 0a20 2020  t:.        #.   
+00009da0: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
+00009db0: 2020 2020 2023 2020 2020 2020 2020 2031       #         1
+00009dc0: 3539 3134 3735 3634 302c 0a20 2020 2020  591475640,.     
+00009dd0: 2020 2023 2020 2020 2020 2020 2022 302e     #         "0.
+00009de0: 3032 3530 3022 2c0a 2020 2020 2020 2020  02500",.        
+00009df0: 2320 2020 2020 2020 2020 2230 2e30 3235  #         "0.025
+00009e00: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00009e10: 2020 2020 2020 2022 302e 3032 3530 3022         "0.02500"
+00009e20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00009e30: 2020 2020 2230 2e30 3235 3030 222c 0a20      "0.02500",. 
+00009e40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00009e50: 2022 302e 3032 3530 3022 2c0a 2020 2020   "0.02500",.    
+00009e60: 2020 2020 2320 2020 2020 2020 2020 2239      #         "9
+00009e70: 2e31 3232 3031 3030 3022 2c0a 2020 2020  .12201000",.    
+00009e80: 2020 2020 2320 2020 2020 2020 2020 350a      #         5.
+00009e90: 2020 2020 2020 2020 2320 2020 2020 5d0a          #     ].
+00009ea0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00009eb0: 2020 7265 7475 726e 205b 0a20 2020 2020    return [.     
+00009ec0: 2020 2020 2020 2073 656c 662e 7361 6665         self.safe
+00009ed0: 5f74 696d 6573 7461 6d70 286f 686c 6376  _timestamp(ohlcv
+00009ee0: 2c20 3029 2c0a 2020 2020 2020 2020 2020  , 0),.          
+00009ef0: 2020 7365 6c66 2e73 6166 655f 6e75 6d62    self.safe_numb
+00009f00: 6572 286f 686c 6376 2c20 3129 2c0a 2020  er(ohlcv, 1),.  
+00009f10: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00009f20: 6166 655f 6e75 6d62 6572 286f 686c 6376  afe_number(ohlcv
+00009f30: 2c20 3229 2c0a 2020 2020 2020 2020 2020  , 2),.          
+00009f40: 2020 7365 6c66 2e73 6166 655f 6e75 6d62    self.safe_numb
+00009f50: 6572 286f 686c 6376 2c20 3329 2c0a 2020  er(ohlcv, 3),.  
+00009f60: 2020 2020 2020 2020 2020 7365 6c66 2e73            self.s
+00009f70: 6166 655f 6e75 6d62 6572 286f 686c 6376  afe_number(ohlcv
+00009f80: 2c20 3429 2c0a 2020 2020 2020 2020 2020  , 4),.          
+00009f90: 2020 7365 6c66 2e73 6166 655f 6e75 6d62    self.safe_numb
+00009fa0: 6572 286f 686c 6376 2c20 3629 2c0a 2020  er(ohlcv, 6),.  
+00009fb0: 2020 2020 2020 5d0a 0a20 2020 2061 7379        ]..    asy
+00009fc0: 6e63 2064 6566 2066 6574 6368 5f6f 686c  nc def fetch_ohl
+00009fd0: 6376 2873 656c 662c 2073 796d 626f 6c3a  cv(self, symbol:
+00009fe0: 2073 7472 2c20 7469 6d65 6672 616d 653d   str, timeframe=
+00009ff0: 2731 6d27 2c20 7369 6e63 653a 2049 6e74  '1m', since: Int
+0000a000: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+0000a010: 496e 7420 3d20 4e6f 6e65 2c20 7061 7261  Int = None, para
+0000a020: 6d73 3d7b 7d29 202d 3e20 4c69 7374 5b6c  ms={}) -> List[l
+0000a030: 6973 745d 3a0a 2020 2020 2020 2020 2222  ist]:.        ""
+0000a040: 220a 2020 2020 2020 2020 6665 7463 6865  ".        fetche
+0000a050: 7320 6869 7374 6f72 6963 616c 2063 616e  s historical can
+0000a060: 646c 6573 7469 636b 2064 6174 6120 636f  dlestick data co
+0000a070: 6e74 6169 6e69 6e67 2074 6865 206f 7065  ntaining the ope
+0000a080: 6e2c 2068 6967 682c 206c 6f77 2c20 616e  n, high, low, an
+0000a090: 6420 636c 6f73 6520 7072 6963 652c 2061  d close price, a
+0000a0a0: 6e64 2074 6865 2076 6f6c 756d 6520 6f66  nd the volume of
+0000a0b0: 2061 206d 6172 6b65 740a 2020 2020 2020   a market.      
+0000a0c0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+0000a0d0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+0000a0e0: 7265 7374 2f23 7461 672f 5370 6f74 2d4d  rest/#tag/Spot-M
+0000a0f0: 6172 6b65 742d 4461 7461 2f6f 7065 7261  arket-Data/opera
+0000a100: 7469 6f6e 2f67 6574 4f48 4c43 4461 7461  tion/getOHLCData
+0000a110: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000a120: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+0000a130: 6965 6420 7379 6d62 6f6c 206f 6620 7468  ied symbol of th
+0000a140: 6520 6d61 726b 6574 2074 6f20 6665 7463  e market to fetc
+0000a150: 6820 4f48 4c43 5620 6461 7461 2066 6f72  h OHLCV data for
+0000a160: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000a170: 7374 7220 7469 6d65 6672 616d 653a 2074  str timeframe: t
+0000a180: 6865 206c 656e 6774 6820 6f66 2074 696d  he length of tim
+0000a190: 6520 6561 6368 2063 616e 646c 6520 7265  e each candle re
+0000a1a0: 7072 6573 656e 7473 0a20 2020 2020 2020  presents.       
+0000a1b0: 203a 7061 7261 6d20 696e 7420 5b73 696e   :param int [sin
+0000a1c0: 6365 5d3a 2074 696d 6573 7461 6d70 2069  ce]: timestamp i
+0000a1d0: 6e20 6d73 206f 6620 7468 6520 6561 726c  n ms of the earl
+0000a1e0: 6965 7374 2063 616e 646c 6520 746f 2066  iest candle to f
+0000a1f0: 6574 6368 0a20 2020 2020 2020 203a 7061  etch.        :pa
+0000a200: 7261 6d20 696e 7420 5b6c 696d 6974 5d3a  ram int [limit]:
+0000a210: 2074 6865 206d 6178 696d 756d 2061 6d6f   the maximum amo
+0000a220: 756e 7420 6f66 2063 616e 646c 6573 2074  unt of candles t
+0000a230: 6f20 6665 7463 680a 2020 2020 2020 2020  o fetch.        
+0000a240: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
+0000a250: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
+0000a260: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+0000a270: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
+0000a280: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
+0000a290: 2020 2020 203a 7061 7261 6d20 626f 6f6c       :param bool
+0000a2a0: 6561 6e20 5b70 6172 616d 732e 7061 6769  ean [params.pagi
+0000a2b0: 6e61 7465 5d3a 2064 6566 6175 6c74 2046  nate]: default F
+0000a2c0: 616c 7365 2c20 7768 656e 2054 7275 6520  alse, when True 
+0000a2d0: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+0000a2e0: 6c79 2070 6167 696e 6174 6520 6279 2063  ly paginate by c
+0000a2f0: 616c 6c69 6e67 2073 656c 6620 656e 6470  alling self endp
+0000a300: 6f69 6e74 206d 756c 7469 706c 6520 7469  oint multiple ti
+0000a310: 6d65 732e 2053 6565 2069 6e20 7468 6520  mes. See in the 
+0000a320: 646f 6373 2061 6c6c 2074 6865 205b 6176  docs all the [av
+0000a330: 6169 6c62 6c65 2070 6172 616d 6574 6572  ailble parameter
+0000a340: 735d 2868 7474 7073 3a2f 2f67 6974 6875  s](https://githu
+0000a350: 622e 636f 6d2f 6363 7874 2f63 6378 742f  b.com/ccxt/ccxt/
+0000a360: 7769 6b69 2f4d 616e 7561 6c23 7061 6769  wiki/Manual#pagi
+0000a370: 6e61 7469 6f6e 2d70 6172 616d 7329 0a20  nation-params). 
+0000a380: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0000a390: 696e 745b 5d5b 5d3a 2041 206c 6973 7420  int[][]: A list 
+0000a3a0: 6f66 2063 616e 646c 6573 206f 7264 6572  of candles order
+0000a3b0: 6564 2c20 6f70 656e 2c20 6869 6768 2c20  ed, open, high, 
+0000a3c0: 6c6f 772c 2063 6c6f 7365 2c20 766f 6c75  low, close, volu
+0000a3d0: 6d65 0a20 2020 2020 2020 2022 2222 0a20  me.        """. 
+0000a3e0: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+0000a3f0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+0000a400: 0a20 2020 2020 2020 2070 6167 696e 6174  .        paginat
+0000a410: 6520 3d20 4661 6c73 650a 2020 2020 2020  e = False.      
+0000a420: 2020 7061 6769 6e61 7465 2c20 7061 7261    paginate, para
+0000a430: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0000a440: 5f6f 7074 696f 6e5f 616e 645f 7061 7261  _option_and_para
+0000a450: 6d73 2870 6172 616d 732c 2027 6665 7463  ms(params, 'fetc
+0000a460: 684f 484c 4356 272c 2027 7061 6769 6e61  hOHLCV', 'pagina
+0000a470: 7465 2729 0a20 2020 2020 2020 2069 6620  te').        if 
+0000a480: 7061 6769 6e61 7465 3a0a 2020 2020 2020  paginate:.      
+0000a490: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+0000a4a0: 6974 2073 656c 662e 6665 7463 685f 7061  it self.fetch_pa
+0000a4b0: 6769 6e61 7465 645f 6361 6c6c 5f64 6574  ginated_call_det
+0000a4c0: 6572 6d69 6e69 7374 6963 2827 6665 7463  erministic('fetc
+0000a4d0: 684f 484c 4356 272c 2073 796d 626f 6c2c  hOHLCV', symbol,
+0000a4e0: 2073 696e 6365 2c20 6c69 6d69 742c 2074   since, limit, t
+0000a4f0: 696d 6566 7261 6d65 2c20 7061 7261 6d73  imeframe, params
+0000a500: 2c20 3732 3029 0a20 2020 2020 2020 206d  , 720).        m
+0000a510: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+0000a520: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+0000a530: 2020 2020 7061 7273 6564 5469 6d65 6672      parsedTimefr
+0000a540: 616d 6520 3d20 7365 6c66 2e73 6166 655f  ame = self.safe_
+0000a550: 696e 7465 6765 7228 7365 6c66 2e74 696d  integer(self.tim
+0000a560: 6566 7261 6d65 732c 2074 696d 6566 7261  eframes, timefra
+0000a570: 6d65 290a 2020 2020 2020 2020 7265 7175  me).        requ
+0000a580: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0000a590: 2020 2020 2770 6169 7227 3a20 6d61 726b      'pair': mark
+0000a5a0: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+0000a5b0: 2020 7d0a 2020 2020 2020 2020 6966 2070    }.        if p
+0000a5c0: 6172 7365 6454 696d 6566 7261 6d65 2069  arsedTimeframe i
+0000a5d0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a5e0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000a5f0: 2769 6e74 6572 7661 6c27 5d20 3d20 7061  'interval'] = pa
+0000a600: 7273 6564 5469 6d65 6672 616d 650a 2020  rsedTimeframe.  
+0000a610: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000a620: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000a630: 2769 6e74 6572 7661 6c27 5d20 3d20 7469  'interval'] = ti
+0000a640: 6d65 6672 616d 650a 2020 2020 2020 2020  meframe.        
+0000a650: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+0000a660: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000a670: 2020 2320 636f 6e74 7261 7279 2074 6f20    # contrary to 
+0000a680: 6b72 616b 656e 2773 2061 7069 2064 6f63  kraken's api doc
+0000a690: 756d 656e 7461 7469 6f6e 2c20 7468 6520  umentation, the 
+0000a6a0: 7369 6e63 6520 7061 7261 6d65 7465 7220  since parameter 
+0000a6b0: 6d75 7374 2062 6520 7061 7373 6564 2069  must be passed i
+0000a6c0: 6e20 6e61 6e6f 7365 636f 6e64 730a 2020  n nanoseconds.  
+0000a6d0: 2020 2020 2020 2020 2020 2320 7468 6520            # the 
+0000a6e0: 6164 6469 6e67 206f 6620 2730 3030 3030  adding of '00000
+0000a6f0: 3027 2069 7320 636f 7069 6564 2066 726f  0' is copied fro
+0000a700: 6d20 7468 6520 6665 7463 6854 7261 6465  m the fetchTrade
+0000a710: 7320 6675 6e63 7469 6f6e 0a20 2020 2020  s function.     
+0000a720: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0000a730: 7369 6e63 6527 5d20 3d20 7365 6c66 2e6e  since'] = self.n
+0000a740: 756d 6265 725f 746f 5f73 7472 696e 6728  umber_to_string(
+0000a750: 7369 6e63 6529 202b 2027 3030 3030 3030  since) + '000000
+0000a760: 2720 2023 2065 7870 6563 7465 6420 746f  '  # expected to
+0000a770: 2062 6520 696e 206e 616e 6f73 6563 6f6e   be in nanosecon
+0000a780: 6473 0a20 2020 2020 2020 2072 6573 706f  ds.        respo
+0000a790: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+0000a7a0: 2e70 7562 6c69 6347 6574 4f48 4c43 2873  .publicGetOHLC(s
+0000a7b0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0000a7c0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0000a7d0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0000a7e0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0000a7f0: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
+0000a800: 3a5b 5d2c 0a20 2020 2020 2020 2023 2020  :[],.        #  
+0000a810: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+0000a820: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000a830: 2020 2020 2020 2020 2258 4554 4858 5842          "XETHXXB
+0000a840: 5422 3a5b 0a20 2020 2020 2020 2023 2020  T":[.        #  
+0000a850: 2020 2020 2020 2020 2020 2020 2020 205b                 [
+0000a860: 3135 3931 3437 3535 3830 2c22 302e 3032  1591475580,"0.02
+0000a870: 3439 3922 2c22 302e 3032 3439 3922 2c22  499","0.02499","
+0000a880: 302e 3032 3439 3922 2c22 302e 3032 3439  0.02499","0.0249
+0000a890: 3922 2c22 302e 3030 3030 3022 2c22 302e  9","0.00000","0.
+0000a8a0: 3030 3030 3030 3030 222c 305d 2c0a 2020  00000000",0],.  
+0000a8b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000a8c0: 2020 2020 2020 2020 5b31 3539 3134 3735          [1591475
+0000a8d0: 3634 302c 2230 2e30 3235 3030 222c 2230  640,"0.02500","0
+0000a8e0: 2e30 3235 3030 222c 2230 2e30 3235 3030  .02500","0.02500
+0000a8f0: 222c 2230 2e30 3235 3030 222c 2230 2e30  ","0.02500","0.0
+0000a900: 3235 3030 222c 2239 2e31 3232 3031 3030  2500","9.1220100
+0000a910: 3022 2c35 5d2c 0a20 2020 2020 2020 2023  0",5],.        #
+0000a920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000a930: 205b 3135 3931 3437 3537 3030 2c22 302e   [1591475700,"0.
+0000a940: 3032 3439 3922 2c22 302e 3032 3439 3922  02499","0.02499"
+0000a950: 2c22 302e 3032 3439 3922 2c22 302e 3032  ,"0.02499","0.02
+0000a960: 3439 3922 2c22 302e 3032 3439 3922 2c22  499","0.02499","
+0000a970: 312e 3238 3638 3134 3135 222c 325d 2c0a  1.28681415",2],.
+0000a980: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000a990: 2020 2020 2020 2020 2020 5b31 3539 3134            [15914
+0000a9a0: 3735 3736 302c 2230 2e30 3234 3939 222c  75760,"0.02499",
+0000a9b0: 2230 2e30 3234 3939 222c 2230 2e30 3234  "0.02499","0.024
+0000a9c0: 3939 222c 2230 2e30 3234 3939 222c 2230  99","0.02499","0
+0000a9d0: 2e30 3234 3939 222c 2230 2e30 3838 3030  .02499","0.08800
+0000a9e0: 3030 3022 2c31 5d2c 0a20 2020 2020 2020  000",1],.       
+0000a9f0: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
+0000aa00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000aa10: 2020 2020 2020 2020 226c 6173 7422 3a31          "last":1
+0000aa20: 3539 3135 3137 3538 300a 2020 2020 2020  591517580.      
+0000aa30: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
+0000aa40: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+0000aa50: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+0000aa60: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+0000aa70: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+0000aa80: 272c 207b 7d29 0a20 2020 2020 2020 206f  ', {}).        o
+0000aa90: 686c 6376 7320 3d20 7365 6c66 2e73 6166  hlcvs = self.saf
+0000aaa0: 655f 6c69 7374 2872 6573 756c 742c 206d  e_list(result, m
+0000aab0: 6172 6b65 745b 2769 6427 5d2c 205b 5d29  arket['id'], [])
+0000aac0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000aad0: 7365 6c66 2e70 6172 7365 5f6f 686c 6376  self.parse_ohlcv
+0000aae0: 7328 6f68 6c63 7673 2c20 6d61 726b 6574  s(ohlcvs, market
+0000aaf0: 2c20 7469 6d65 6672 616d 652c 2073 696e  , timeframe, sin
+0000ab00: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+0000ab10: 6465 6620 7061 7273 655f 6c65 6467 6572  def parse_ledger
+0000ab20: 5f65 6e74 7279 5f74 7970 6528 7365 6c66  _entry_type(self
+0000ab30: 2c20 7479 7065 293a 0a20 2020 2020 2020  , type):.       
+0000ab40: 2074 7970 6573 203d 207b 0a20 2020 2020   types = {.     
+0000ab50: 2020 2020 2020 2027 7472 6164 6527 3a20         'trade': 
+0000ab60: 2774 7261 6465 272c 0a20 2020 2020 2020  'trade',.       
+0000ab70: 2020 2020 2027 7769 7468 6472 6177 616c       'withdrawal
+0000ab80: 273a 2027 7472 616e 7361 6374 696f 6e27  ': 'transaction'
+0000ab90: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
+0000aba0: 6570 6f73 6974 273a 2027 7472 616e 7361  eposit': 'transa
+0000abb0: 6374 696f 6e27 2c0a 2020 2020 2020 2020  ction',.        
+0000abc0: 2020 2020 2774 7261 6e73 6665 7227 3a20      'transfer': 
+0000abd0: 2774 7261 6e73 6665 7227 2c0a 2020 2020  'transfer',.    
+0000abe0: 2020 2020 2020 2020 276d 6172 6769 6e27          'margin'
+0000abf0: 3a20 276d 6172 6769 6e27 2c0a 2020 2020  : 'margin',.    
+0000ac00: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+0000ac10: 7475 726e 2073 656c 662e 7361 6665 5f73  turn self.safe_s
+0000ac20: 7472 696e 6728 7479 7065 732c 2074 7970  tring(types, typ
+0000ac30: 652c 2074 7970 6529 0a0a 2020 2020 6465  e, type)..    de
+0000ac40: 6620 7061 7273 655f 6c65 6467 6572 5f65  f parse_ledger_e
+0000ac50: 6e74 7279 2873 656c 662c 2069 7465 6d2c  ntry(self, item,
+0000ac60: 2063 7572 7265 6e63 793a 2043 7572 7265   currency: Curre
+0000ac70: 6e63 7920 3d20 4e6f 6e65 293a 0a20 2020  ncy = None):.   
+0000ac80: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0000ac90: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0000aca0: 2020 2020 2020 2020 2027 4c54 464b 3746           'LTFK7F
+0000acb0: 2d4e 3243 5558 2d50 4e59 3453 5827 3a20  -N2CUX-PNY4SX': 
+0000acc0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000acd0: 2020 2020 2020 2020 2272 6566 6964 223a          "refid":
+0000ace0: 2022 5453 4a54 4754 2d44 5437 574e 2d47   "TSJTGT-DT7WN-G
+0000acf0: 5050 514d 4a22 2c0a 2020 2020 2020 2020  PPQMJ",.        
+0000ad00: 2320 2020 2020 2020 2020 2020 2020 2274  #             "t
+0000ad10: 696d 6522 3a20 2031 3532 3031 3032 3332  ime":  152010232
+0000ad20: 302e 3535 352c 0a20 2020 2020 2020 2023  0.555,.        #
+0000ad30: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
+0000ad40: 7065 223a 2022 7472 6164 6522 2c0a 2020  pe": "trade",.  
+0000ad50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000ad60: 2020 2020 2261 636c 6173 7322 3a20 2263      "aclass": "c
+0000ad70: 7572 7265 6e63 7922 2c0a 2020 2020 2020  urrency",.      
+0000ad80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000ad90: 2261 7373 6574 223a 2022 5845 5448 222c  "asset": "XETH",
+0000ada0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000adb0: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+0000adc0: 2022 302e 3130 3837 3139 3436 3030 222c   "0.1087194600",
+0000add0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000ade0: 2020 2020 2020 2022 6665 6522 3a20 2230         "fee": "0
+0000adf0: 2e30 3030 3030 3030 3030 3022 2c0a 2020  .0000000000",.  
+0000ae00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000ae10: 2020 2020 2262 616c 616e 6365 223a 2022      "balance": "
+0000ae20: 302e 3238 3535 3835 3130 3030 220a 2020  0.2855851000".  
+0000ae30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000ae40: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+0000ae50: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
+0000ae60: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
+0000ae70: 2023 0a20 2020 2020 2020 2069 6420 3d20   #.        id = 
+0000ae80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0000ae90: 2869 7465 6d2c 2027 6964 2729 0a20 2020  (item, 'id').   
+0000aea0: 2020 2020 2064 6972 6563 7469 6f6e 203d       direction =
+0000aeb0: 204e 6f6e 650a 2020 2020 2020 2020 6163   None.        ac
+0000aec0: 636f 756e 7420 3d20 4e6f 6e65 0a20 2020  count = None.   
+0000aed0: 2020 2020 2072 6566 6572 656e 6365 4964       referenceId
+0000aee0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0000aef0: 696e 6728 6974 656d 2c20 2772 6566 6964  ing(item, 'refid
+0000af00: 2729 0a20 2020 2020 2020 2072 6566 6572  ').        refer
+0000af10: 656e 6365 4163 636f 756e 7420 3d20 4e6f  enceAccount = No
+0000af20: 6e65 0a20 2020 2020 2020 2074 7970 6520  ne.        type 
+0000af30: 3d20 7365 6c66 2e70 6172 7365 5f6c 6564  = self.parse_led
+0000af40: 6765 725f 656e 7472 795f 7479 7065 2873  ger_entry_type(s
+0000af50: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0000af60: 6974 656d 2c20 2774 7970 6527 2929 0a20  item, 'type')). 
+0000af70: 2020 2020 2020 2063 6f64 6520 3d20 7365         code = se
+0000af80: 6c66 2e73 6166 655f 6375 7272 656e 6379  lf.safe_currency
+0000af90: 5f63 6f64 6528 7365 6c66 2e73 6166 655f  _code(self.safe_
+0000afa0: 7374 7269 6e67 2869 7465 6d2c 2027 6173  string(item, 'as
+0000afb0: 7365 7427 292c 2063 7572 7265 6e63 7929  set'), currency)
+0000afc0: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
+0000afd0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0000afe0: 6e67 2869 7465 6d2c 2027 616d 6f75 6e74  ng(item, 'amount
+0000aff0: 2729 0a20 2020 2020 2020 2069 6620 5072  ').        if Pr
+0000b000: 6563 6973 652e 7374 7269 6e67 5f6c 7428  ecise.string_lt(
+0000b010: 616d 6f75 6e74 2c20 2730 2729 3a0a 2020  amount, '0'):.  
+0000b020: 2020 2020 2020 2020 2020 6469 7265 6374            direct
+0000b030: 696f 6e20 3d20 276f 7574 270a 2020 2020  ion = 'out'.    
+0000b040: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
+0000b050: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+0000b060: 6162 7328 616d 6f75 6e74 290a 2020 2020  abs(amount).    
+0000b070: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000b080: 2020 2020 2020 6469 7265 6374 696f 6e20        direction 
+0000b090: 3d20 2769 6e27 0a20 2020 2020 2020 2074  = 'in'.        t
+0000b0a0: 696d 6573 7461 6d70 203d 2073 656c 662e  imestamp = self.
+0000b0b0: 7361 6665 5f74 696d 6573 7461 6d70 2869  safe_timestamp(i
+0000b0c0: 7465 6d2c 2027 7469 6d65 2729 0a20 2020  tem, 'time').   
+0000b0d0: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
+0000b0e0: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+0000b0f0: 3a20 6974 656d 2c0a 2020 2020 2020 2020  : item,.        
+0000b100: 2020 2020 2769 6427 3a20 6964 2c0a 2020      'id': id,.  
+0000b110: 2020 2020 2020 2020 2020 2764 6972 6563            'direc
+0000b120: 7469 6f6e 273a 2064 6972 6563 7469 6f6e  tion': direction
+0000b130: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0000b140: 6363 6f75 6e74 273a 2061 6363 6f75 6e74  ccount': account
+0000b150: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
+0000b160: 6566 6572 656e 6365 4964 273a 2072 6566  eferenceId': ref
+0000b170: 6572 656e 6365 4964 2c0a 2020 2020 2020  erenceId,.      
+0000b180: 2020 2020 2020 2772 6566 6572 656e 6365        'reference
+0000b190: 4163 636f 756e 7427 3a20 7265 6665 7265  Account': refere
+0000b1a0: 6e63 6541 6363 6f75 6e74 2c0a 2020 2020  nceAccount,.    
+0000b1b0: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
+0000b1c0: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0000b1d0: 2020 2763 7572 7265 6e63 7927 3a20 636f    'currency': co
+0000b1e0: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
+0000b1f0: 2761 6d6f 756e 7427 3a20 7365 6c66 2e70  'amount': self.p
+0000b200: 6172 7365 5f6e 756d 6265 7228 616d 6f75  arse_number(amou
+0000b210: 6e74 292c 0a20 2020 2020 2020 2020 2020  nt),.           
+0000b220: 2027 6265 666f 7265 273a 204e 6f6e 652c   'before': None,
+0000b230: 0a20 2020 2020 2020 2020 2020 2027 6166  .            'af
+0000b240: 7465 7227 3a20 7365 6c66 2e73 6166 655f  ter': self.safe_
+0000b250: 6e75 6d62 6572 2869 7465 6d2c 2027 6261  number(item, 'ba
+0000b260: 6c61 6e63 6527 292c 0a20 2020 2020 2020  lance'),.       
+0000b270: 2020 2020 2027 7374 6174 7573 273a 2027       'status': '
+0000b280: 6f6b 272c 0a20 2020 2020 2020 2020 2020  ok',.           
+0000b290: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
+0000b2a0: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
+0000b2b0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+0000b2c0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
+0000b2d0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
+0000b2e0: 2020 2020 2020 2766 6565 273a 207b 0a20        'fee': {. 
+0000b2f0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+0000b300: 636f 7374 273a 2073 656c 662e 7361 6665  cost': self.safe
+0000b310: 5f6e 756d 6265 7228 6974 656d 2c20 2766  _number(item, 'f
+0000b320: 6565 2729 2c0a 2020 2020 2020 2020 2020  ee'),.          
+0000b330: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+0000b340: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
+0000b350: 2020 2020 7d2c 0a20 2020 2020 2020 207d      },.        }
+0000b360: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
+0000b370: 6665 7463 685f 6c65 6467 6572 2873 656c  fetch_ledger(sel
+0000b380: 662c 2063 6f64 653a 2053 7472 203d 204e  f, code: Str = N
+0000b390: 6f6e 652c 2073 696e 6365 3a20 496e 7420  one, since: Int 
+0000b3a0: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 2049  = None, limit: I
+0000b3b0: 6e74 203d 204e 6f6e 652c 2070 6172 616d  nt = None, param
+0000b3c0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+0000b3d0: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+0000b3e0: 2074 6865 2068 6973 746f 7279 206f 6620   the history of 
+0000b3f0: 6368 616e 6765 732c 2061 6374 696f 6e73  changes, actions
+0000b400: 2064 6f6e 6520 6279 2074 6865 2075 7365   done by the use
+0000b410: 7220 6f72 206f 7065 7261 7469 6f6e 7320  r or operations 
+0000b420: 7468 6174 2061 6c74 6572 6564 2062 616c  that altered bal
+0000b430: 616e 6365 206f 6620 7468 6520 7573 6572  ance of the user
+0000b440: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
+0000b450: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
+0000b460: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
+0000b470: 2f41 6363 6f75 6e74 2d44 6174 612f 6f70  /Account-Data/op
+0000b480: 6572 6174 696f 6e2f 6765 744c 6564 6765  eration/getLedge
+0000b490: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
+0000b4a0: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
+0000b4b0: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
+0000b4c0: 652c 2064 6566 6175 6c74 2069 7320 4e6f  e, default is No
+0000b4d0: 6e65 0a20 2020 2020 2020 203a 7061 7261  ne.        :para
+0000b4e0: 6d20 696e 7420 5b73 696e 6365 5d3a 2074  m int [since]: t
+0000b4f0: 696d 6573 7461 6d70 2069 6e20 6d73 206f  imestamp in ms o
+0000b500: 6620 7468 6520 6561 726c 6965 7374 206c  f the earliest l
+0000b510: 6564 6765 7220 656e 7472 792c 2064 6566  edger entry, def
+0000b520: 6175 6c74 2069 7320 4e6f 6e65 0a20 2020  ault is None.   
+0000b530: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
+0000b540: 5b6c 696d 6974 5d3a 206d 6178 206e 756d  [limit]: max num
+0000b550: 6265 7220 6f66 206c 6564 6765 7220 656e  ber of ledger en
+0000b560: 7472 7973 2074 6f20 7265 7475 726e 2c20  trys to return, 
+0000b570: 6465 6661 756c 7420 6973 204e 6f6e 650a  default is None.
+0000b580: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0000b590: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
+0000b5a0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+0000b5b0: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
+0000b5c0: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
+0000b5d0: 6f69 6e74 0a20 2020 2020 2020 203a 7061  oint.        :pa
+0000b5e0: 7261 6d20 696e 7420 5b70 6172 616d 732e  ram int [params.
+0000b5f0: 756e 7469 6c5d 3a20 7469 6d65 7374 616d  until]: timestam
+0000b600: 7020 696e 206d 7320 6f66 2074 6865 206c  p in ms of the l
+0000b610: 6174 6573 7420 6c65 6467 6572 2065 6e74  atest ledger ent
+0000b620: 7279 0a20 2020 2020 2020 203a 7265 7475  ry.        :retu
+0000b630: 726e 7320 6469 6374 3a20 6120 606c 6564  rns dict: a `led
+0000b640: 6765 7220 7374 7275 6374 7572 6520 3c68  ger structure <h
+0000b650: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0000b660: 2e63 6f6d 2f23 2f3f 6964 3d6c 6564 6765  .com/#/?id=ledge
+0000b670: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
+0000b680: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0000b690: 2020 2320 6874 7470 733a 2f2f 7777 772e    # https://www.
+0000b6a0: 6b72 616b 656e 2e63 6f6d 2f66 6561 7475  kraken.com/featu
+0000b6b0: 7265 732f 6170 6923 6765 742d 6c65 6467  res/api#get-ledg
+0000b6c0: 6572 732d 696e 666f 0a20 2020 2020 2020  ers-info.       
+0000b6d0: 2061 7761 6974 2073 656c 662e 6c6f 6164   await self.load
+0000b6e0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0000b6f0: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
+0000b700: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0000b710: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0000b720: 6966 2063 6f64 6520 6973 206e 6f74 204e  if code is not N
+0000b730: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0000b740: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0000b750: 2e63 7572 7265 6e63 7928 636f 6465 290a  .currency(code).
+0000b760: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0000b770: 6573 745b 2761 7373 6574 275d 203d 2063  est['asset'] = c
+0000b780: 7572 7265 6e63 795b 2769 6427 5d0a 2020  urrency['id'].  
+0000b790: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
+0000b7a0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000b7b0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000b7c0: 2773 7461 7274 275d 203d 2073 656c 662e  'start'] = self.
+0000b7d0: 7061 7273 655f 746f 5f69 6e74 2873 696e  parse_to_int(sin
+0000b7e0: 6365 202f 2031 3030 3029 0a20 2020 2020  ce / 1000).     
+0000b7f0: 2020 2072 6571 7565 7374 2c20 7061 7261     request, para
+0000b800: 6d73 203d 2073 656c 662e 6861 6e64 6c65  ms = self.handle
+0000b810: 5f75 6e74 696c 5f6f 7074 696f 6e28 2765  _until_option('e
+0000b820: 6e64 272c 2072 6571 7565 7374 2c20 7061  nd', request, pa
+0000b830: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+0000b840: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
+0000b850: 656c 662e 7072 6976 6174 6550 6f73 744c  elf.privatePostL
+0000b860: 6564 6765 7273 2873 656c 662e 6578 7465  edgers(self.exte
+0000b870: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
+0000b880: 6d73 2929 0a20 2020 2020 2020 2023 207b  ms)).        # {
+0000b890: 2065 7272 6f72 3a20 5b5d 2c0a 2020 2020   error: [],.    
+0000b8a0: 2020 2020 2320 2020 2272 6573 756c 7422      #   "result"
+0000b8b0: 3a20 7b6c 6564 6765 723a 207b 274c 5055  : {ledger: {'LPU
+0000b8c0: 4149 422d 5453 3737 342d 554b 4850 3758  AIB-TS774-UKHP7X
+0000b8d0: 273a 207b 2020 7265 6669 643a 2022 4132  ': {  refid: "A2
+0000b8e0: 4234 4842 562d 4c34 4d44 4945 2d4a 5534  B4HBV-L4MDIE-JU4
+0000b8f0: 4e33 4e22 2c0a 2020 2020 2020 2020 2320  N3N",.        # 
+0000b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b930: 2020 2274 696d 6522 3a20 2031 3532 3031    "time":  15201
+0000b940: 3033 3438 382e 3331 342c 0a20 2020 2020  03488.314,.     
+0000b950: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b980: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
+0000b990: 7769 7468 6472 6177 616c 222c 0a20 2020  withdrawal",.   
+0000b9a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9d0: 2020 2020 2020 2022 6163 6c61 7373 223a         "aclass":
+0000b9e0: 2022 6375 7272 656e 6379 222c 0a20 2020   "currency",.   
+0000b9f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba20: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+0000ba30: 2022 5845 5448 222c 0a20 2020 2020 2020   "XETH",.       
+0000ba40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0000ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba70: 2020 2022 616d 6f75 6e74 223a 2022 2d30     "amount": "-0
+0000ba80: 2e32 3830 3538 3030 3030 3022 2c0a 2020  .2805800000",.  
+0000ba90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bac0: 2020 2020 2020 2020 2020 2022 6665 6522             "fee"
+0000bad0: 3a20 2230 2e30 3035 3030 3030 3030 3022  : "0.0050000000"
+0000bae0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 0000baf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb00: 2266 6565 223a 2022 302e 3030 3530 3030  "fee": "0.005000
-0000bb10: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-0000bb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bb50: 2262 616c 616e 6365 223a 2022 302e 3030  "balance": "0.00
-0000bb60: 3030 3035 3130 3030 2220 2020 2020 2020  00051000"       
-0000bb70: 2020 2020 7d2c 0a20 2020 2020 2020 2072      },.        r
-0000bb80: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-0000bb90: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-0000bba0: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-0000bbb0: 2020 2020 2020 2020 6c65 6467 6572 203d          ledger =
-0000bbc0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0000bbd0: 2872 6573 756c 742c 2027 6c65 6467 6572  (result, 'ledger
-0000bbe0: 272c 207b 7d29 0a20 2020 2020 2020 206b  ', {}).        k
-0000bbf0: 6579 7320 3d20 6c69 7374 286c 6564 6765  eys = list(ledge
-0000bc00: 722e 6b65 7973 2829 290a 2020 2020 2020  r.keys()).      
-0000bc10: 2020 6974 656d 7320 3d20 5b5d 0a20 2020    items = [].   
-0000bc20: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
-0000bc30: 6e67 6528 302c 206c 656e 286b 6579 7329  nge(0, len(keys)
-0000bc40: 293a 0a20 2020 2020 2020 2020 2020 206b  ):.            k
-0000bc50: 6579 203d 206b 6579 735b 695d 0a20 2020  ey = keys[i].   
-0000bc60: 2020 2020 2020 2020 2076 616c 7565 203d           value =
-0000bc70: 206c 6564 6765 725b 6b65 795d 0a20 2020   ledger[key].   
-0000bc80: 2020 2020 2020 2020 2076 616c 7565 5b27           value['
-0000bc90: 6964 275d 203d 206b 6579 0a20 2020 2020  id'] = key.     
-0000bca0: 2020 2020 2020 2069 7465 6d73 2e61 7070         items.app
-0000bcb0: 656e 6428 7661 6c75 6529 0a20 2020 2020  end(value).     
-0000bcc0: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-0000bcd0: 6172 7365 5f6c 6564 6765 7228 6974 656d  arse_ledger(item
-0000bce0: 732c 2063 7572 7265 6e63 792c 2073 696e  s, currency, sin
-0000bcf0: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
-0000bd00: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-0000bd10: 6c65 6467 6572 5f65 6e74 7269 6573 5f62  ledger_entries_b
-0000bd20: 795f 6964 7328 7365 6c66 2c20 6964 732c  y_ids(self, ids,
-0000bd30: 2063 6f64 653a 2053 7472 203d 204e 6f6e   code: Str = Non
-0000bd40: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0000bd50: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
-0000bd60: 2f77 7777 2e6b 7261 6b65 6e2e 636f 6d2f  /www.kraken.com/
-0000bd70: 6665 6174 7572 6573 2f61 7069 2371 7565  features/api#que
-0000bd80: 7279 2d6c 6564 6765 7273 0a20 2020 2020  ry-ledgers.     
-0000bd90: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0000bda0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0000bdb0: 2020 2020 2069 6473 203d 2027 2c27 2e6a       ids = ','.j
-0000bdc0: 6f69 6e28 6964 7329 0a20 2020 2020 2020  oin(ids).       
-0000bdd0: 2072 6571 7565 7374 203d 2073 656c 662e   request = self.
-0000bde0: 6578 7465 6e64 287b 0a20 2020 2020 2020  extend({.       
-0000bdf0: 2020 2020 2027 6964 273a 2069 6473 2c0a       'id': ids,.
-0000be00: 2020 2020 2020 2020 7d2c 2070 6172 616d          }, param
-0000be10: 7329 0a20 2020 2020 2020 2072 6573 706f  s).        respo
-0000be20: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-0000be30: 2e70 7269 7661 7465 506f 7374 5175 6572  .privatePostQuer
-0000be40: 794c 6564 6765 7273 2872 6571 7565 7374  yLedgers(request
-0000be50: 290a 2020 2020 2020 2020 2320 7b20 6572  ).        # { er
-0000be60: 726f 723a 205b 5d2c 0a20 2020 2020 2020  ror: [],.       
-0000be70: 2023 2020 2022 7265 7375 6c74 223a 207b   #   "result": {
-0000be80: 274c 5055 4149 422d 5453 3737 342d 554b  'LPUAIB-TS774-UK
-0000be90: 4850 3758 273a 207b 2020 7265 6669 643a  HP7X': {  refid:
-0000bea0: 2022 4132 4234 4842 562d 4c34 4d44 4945   "A2B4HBV-L4MDIE
-0000beb0: 2d4a 5534 4e33 4e22 2c0a 2020 2020 2020  -JU4N3N",.      
-0000bec0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bee0: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
-0000bef0: 6522 3a20 2031 3532 3031 3033 3438 382e  e":  1520103488.
-0000bf00: 3331 342c 0a20 2020 2020 2020 2023 2020  314,.        #  
-0000bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf30: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-0000bf40: 7769 7468 6472 6177 616c 222c 0a20 2020  withdrawal",.   
-0000bf50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf70: 2020 2020 2020 2020 2020 2020 2022 6163               "ac
-0000bf80: 6c61 7373 223a 2022 6375 7272 656e 6379  lass": "currency
-0000bf90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bb10: 2020 2020 2020 2020 2020 2022 6261 6c61             "bala
+0000bb20: 6e63 6522 3a20 2230 2e30 3030 3030 3531  nce": "0.0000051
+0000bb30: 3030 3022 2020 2020 2020 2020 2020 207d  000"           }
+0000bb40: 2c0a 2020 2020 2020 2020 7265 7375 6c74  ,.        result
+0000bb50: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+0000bb60: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+0000bb70: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+0000bb80: 2020 206c 6564 6765 7220 3d20 7365 6c66     ledger = self
+0000bb90: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+0000bba0: 6c74 2c20 276c 6564 6765 7227 2c20 7b7d  lt, 'ledger', {}
+0000bbb0: 290a 2020 2020 2020 2020 6b65 7973 203d  ).        keys =
+0000bbc0: 206c 6973 7428 6c65 6467 6572 2e6b 6579   list(ledger.key
+0000bbd0: 7328 2929 0a20 2020 2020 2020 2069 7465  s()).        ite
+0000bbe0: 6d73 203d 205b 5d0a 2020 2020 2020 2020  ms = [].        
+0000bbf0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
+0000bc00: 2c20 6c65 6e28 6b65 7973 2929 3a0a 2020  , len(keys)):.  
+0000bc10: 2020 2020 2020 2020 2020 6b65 7920 3d20            key = 
+0000bc20: 6b65 7973 5b69 5d0a 2020 2020 2020 2020  keys[i].        
+0000bc30: 2020 2020 7661 6c75 6520 3d20 6c65 6467      value = ledg
+0000bc40: 6572 5b6b 6579 5d0a 2020 2020 2020 2020  er[key].        
+0000bc50: 2020 2020 7661 6c75 655b 2769 6427 5d20      value['id'] 
+0000bc60: 3d20 6b65 790a 2020 2020 2020 2020 2020  = key.          
+0000bc70: 2020 6974 656d 732e 6170 7065 6e64 2876    items.append(v
+0000bc80: 616c 7565 290a 2020 2020 2020 2020 7265  alue).        re
+0000bc90: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+0000bca0: 6c65 6467 6572 2869 7465 6d73 2c20 6375  ledger(items, cu
+0000bcb0: 7272 656e 6379 2c20 7369 6e63 652c 206c  rrency, since, l
+0000bcc0: 696d 6974 290a 0a20 2020 2061 7379 6e63  imit)..    async
+0000bcd0: 2064 6566 2066 6574 6368 5f6c 6564 6765   def fetch_ledge
+0000bce0: 725f 656e 7472 6965 735f 6279 5f69 6473  r_entries_by_ids
+0000bcf0: 2873 656c 662c 2069 6473 2c20 636f 6465  (self, ids, code
+0000bd00: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7061  : Str = None, pa
+0000bd10: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+0000bd20: 2020 2320 6874 7470 733a 2f2f 7777 772e    # https://www.
+0000bd30: 6b72 616b 656e 2e63 6f6d 2f66 6561 7475  kraken.com/featu
+0000bd40: 7265 732f 6170 6923 7175 6572 792d 6c65  res/api#query-le
+0000bd50: 6467 6572 730a 2020 2020 2020 2020 6177  dgers.        aw
+0000bd60: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0000bd70: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0000bd80: 6964 7320 3d20 272c 272e 6a6f 696e 2869  ids = ','.join(i
+0000bd90: 6473 290a 2020 2020 2020 2020 7265 7175  ds).        requ
+0000bda0: 6573 7420 3d20 7365 6c66 2e65 7874 656e  est = self.exten
+0000bdb0: 6428 7b0a 2020 2020 2020 2020 2020 2020  d({.            
+0000bdc0: 2769 6427 3a20 6964 732c 0a20 2020 2020  'id': ids,.     
+0000bdd0: 2020 207d 2c20 7061 7261 6d73 290a 2020     }, params).  
+0000bde0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0000bdf0: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+0000be00: 6174 6550 6f73 7451 7565 7279 4c65 6467  atePostQueryLedg
+0000be10: 6572 7328 7265 7175 6573 7429 0a20 2020  ers(request).   
+0000be20: 2020 2020 2023 207b 2065 7272 6f72 3a20       # { error: 
+0000be30: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
+0000be40: 2272 6573 756c 7422 3a20 7b27 4c50 5541  "result": {'LPUA
+0000be50: 4942 2d54 5337 3734 2d55 4b48 5037 5827  IB-TS774-UKHP7X'
+0000be60: 3a20 7b20 2072 6566 6964 3a20 2241 3242  : {  refid: "A2B
+0000be70: 3448 4256 2d4c 344d 4449 452d 4a55 344e  4HBV-L4MDIE-JU4N
+0000be80: 334e 222c 0a20 2020 2020 2020 2023 2020  3N",.        #  
+0000be90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000beb0: 2020 2020 2020 2022 7469 6d65 223a 2020         "time":  
+0000bec0: 3135 3230 3130 3334 3838 2e33 3134 2c0a  1520103488.314,.
+0000bed0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000bee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf00: 2020 2274 7970 6522 3a20 2277 6974 6864    "type": "withd
+0000bf10: 7261 7761 6c22 2c0a 2020 2020 2020 2020  rawal",.        
+0000bf20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000bf30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf40: 2020 2020 2020 2020 2261 636c 6173 7322          "aclass"
+0000bf50: 3a20 2263 7572 7265 6e63 7922 2c0a 2020  : "currency",.  
+0000bf60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000bf70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000bf90: 6173 7365 7422 3a20 2258 4554 4822 2c0a  asset": "XETH",.
+0000bfa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
 0000bfb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfc0: 2020 2020 2261 7373 6574 223a 2022 5845      "asset": "XE
-0000bfd0: 5448 222c 0a20 2020 2020 2020 2023 2020  TH",.        #  
-0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c000: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
-0000c010: 2d30 2e32 3830 3538 3030 3030 3022 2c0a  -0.2805800000",.
-0000c020: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000c030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bfd0: 2261 6d6f 756e 7422 3a20 222d 302e 3238  "amount": "-0.28
+0000bfe0: 3035 3830 3030 3030 222c 0a20 2020 2020  05800000",.     
+0000bff0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000c000: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c010: 2020 2020 2020 2020 2020 2020 2020 2266                "f
+0000c020: 6565 223a 2022 302e 3030 3530 3030 3030  ee": "0.00500000
+0000c030: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
 0000c040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c050: 2020 2022 6665 6522 3a20 2230 2e30 3035     "fee": "0.005
-0000c060: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-0000c070: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000c080: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000c090: 2020 2020 2020 2020 2022 6261 6c61 6e63           "balanc
-0000c0a0: 6522 3a20 2230 2e30 3030 3030 3531 3030  e": "0.000005100
-0000c0b0: 3022 2020 2020 2020 2020 2020 207d 7d7d  0"           }}}
-0000c0c0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-0000c0d0: 3d20 7265 7370 6f6e 7365 5b27 7265 7375  = response['resu
-0000c0e0: 6c74 275d 0a20 2020 2020 2020 206b 6579  lt'].        key
-0000c0f0: 7320 3d20 6c69 7374 2872 6573 756c 742e  s = list(result.
-0000c100: 6b65 7973 2829 290a 2020 2020 2020 2020  keys()).        
-0000c110: 6974 656d 7320 3d20 5b5d 0a20 2020 2020  items = [].     
-0000c120: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-0000c130: 6528 302c 206c 656e 286b 6579 7329 293a  e(0, len(keys)):
-0000c140: 0a20 2020 2020 2020 2020 2020 206b 6579  .            key
-0000c150: 203d 206b 6579 735b 695d 0a20 2020 2020   = keys[i].     
-0000c160: 2020 2020 2020 2076 616c 7565 203d 2072         value = r
-0000c170: 6573 756c 745b 6b65 795d 0a20 2020 2020  esult[key].     
-0000c180: 2020 2020 2020 2076 616c 7565 5b27 6964         value['id
-0000c190: 275d 203d 206b 6579 0a20 2020 2020 2020  '] = key.       
-0000c1a0: 2020 2020 2069 7465 6d73 2e61 7070 656e       items.appen
-0000c1b0: 6428 7661 6c75 6529 0a20 2020 2020 2020  d(value).       
-0000c1c0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0000c1d0: 7365 5f6c 6564 6765 7228 6974 656d 7329  se_ledger(items)
-0000c1e0: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-0000c1f0: 6665 7463 685f 6c65 6467 6572 5f65 6e74  fetch_ledger_ent
-0000c200: 7279 2873 656c 662c 2069 643a 2073 7472  ry(self, id: str
-0000c210: 2c20 636f 6465 3a20 5374 7220 3d20 4e6f  , code: Str = No
-0000c220: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-0000c230: 2020 2020 2020 2020 6974 656d 7320 3d20          items = 
-0000c240: 6177 6169 7420 7365 6c66 2e66 6574 6368  await self.fetch
-0000c250: 5f6c 6564 6765 725f 656e 7472 6965 735f  _ledger_entries_
-0000c260: 6279 5f69 6473 285b 6964 5d2c 2063 6f64  by_ids([id], cod
-0000c270: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
-0000c280: 2020 2072 6574 7572 6e20 6974 656d 735b     return items[
-0000c290: 305d 0a0a 2020 2020 6465 6620 7061 7273  0]..    def pars
-0000c2a0: 655f 7472 6164 6528 7365 6c66 2c20 7472  e_trade(self, tr
-0000c2b0: 6164 652c 206d 6172 6b65 743a 204d 6172  ade, market: Mar
-0000c2c0: 6b65 7420 3d20 4e6f 6e65 2920 2d3e 2054  ket = None) -> T
-0000c2d0: 7261 6465 3a0a 2020 2020 2020 2020 230a  rade:.        #.
-0000c2e0: 2020 2020 2020 2020 2320 6665 7463 6854          # fetchT
-0000c2f0: 7261 6465 7328 7075 626c 6963 290a 2020  rades(public).  
-0000c300: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0000c310: 2320 2020 2020 5b0a 2020 2020 2020 2020  #     [.        
-0000c320: 2320 2020 2020 2020 2020 2230 2e30 3332  #         "0.032
-0000c330: 3331 3022 2c20 2023 2070 7269 6365 0a20  310",  # price. 
-0000c340: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000c350: 2022 342e 3238 3136 3934 3334 222c 2020   "4.28169434",  
-0000c360: 2320 616d 6f75 6e74 0a20 2020 2020 2020  # amount.       
-0000c370: 2023 2020 2020 2020 2020 2031 3534 3133   #         15413
-0000c380: 3930 3739 322e 3736 332c 2020 2320 7469  90792.763,  # ti
-0000c390: 6d65 7374 616d 700a 2020 2020 2020 2020  mestamp.        
-0000c3a0: 2320 2020 2020 2020 2020 2273 222c 2020  #         "s",  
-0000c3b0: 2320 7365 6c6c 206f 7220 6275 790a 2020  # sell or buy.  
-0000c3c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000c3d0: 226c 222c 2020 2320 6c69 6d69 7420 6f72  "l",  # limit or
-0000c3e0: 206d 6172 6b65 740a 2020 2020 2020 2020   market.        
-0000c3f0: 2320 2020 2020 2020 2020 2222 0a20 2020  #         "".   
-0000c400: 2020 2020 2023 2020 2020 205d 0a20 2020       #     ].   
-0000c410: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0000c420: 2066 6574 6368 4f72 6465 7254 7261 6465   fetchOrderTrade
-0000c430: 7328 7072 6976 6174 6529 0a20 2020 2020  s(private).     
-0000c440: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0000c450: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0000c460: 2020 2020 2020 2022 6964 223a 2027 5449         "id": 'TI
-0000c470: 4d49 5247 2d57 554e 4e45 2d52 524a 3647  MIRG-WUNNE-RRJ6G
-0000c480: 5427 2c20 2023 2069 6e6a 6563 7465 6420  T',  # injected 
-0000c490: 6672 6f6d 206f 7574 7369 6465 0a20 2020  from outside.   
-0000c4a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000c4b0: 6f72 6465 7274 7869 6422 3a20 274f 5152  ordertxid": 'OQR
-0000c4c0: 504e 322d 4c52 4846 592d 4849 4641 3744  PN2-LRHFY-HIFA7D
-0000c4d0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000c4e0: 2020 2020 2022 706f 7374 7869 6422 3a20       "postxid": 
-0000c4f0: 2754 4b48 3253 452d 4d37 4946 352d 4346  'TKH2SE-M7IF5-CF
-0000c500: 4937 4c54 272c 0a20 2020 2020 2020 2023  I7LT',.        #
-0000c510: 2020 2020 2020 2020 2022 7061 6972 223a           "pair":
-0000c520: 2027 5553 4443 5553 4454 272c 0a20 2020   'USDCUSDT',.   
-0000c530: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000c540: 7469 6d65 223a 2031 3538 3633 3430 3038  time": 158634008
-0000c550: 362e 3435 372c 0a20 2020 2020 2020 2023  6.457,.        #
-0000c560: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-0000c570: 2027 7365 6c6c 272c 0a20 2020 2020 2020   'sell',.       
-0000c580: 2023 2020 2020 2020 2020 2022 6f72 6465   #         "orde
-0000c590: 7274 7970 6522 3a20 276d 6172 6b65 7427  rtype": 'market'
-0000c5a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000c5b0: 2020 2020 2270 7269 6365 223a 2027 302e      "price": '0.
-0000c5c0: 3939 3836 3030 3030 272c 0a20 2020 2020  99860000',.     
-0000c5d0: 2020 2023 2020 2020 2020 2020 2022 636f     #         "co
-0000c5e0: 7374 223a 2027 3232 2e31 3638 3932 3030  st": '22.1689200
-0000c5f0: 3127 2c0a 2020 2020 2020 2020 2320 2020  1',.        #   
-0000c600: 2020 2020 2020 2266 6565 223a 2027 302e        "fee": '0.
-0000c610: 3034 3433 3337 3834 272c 0a20 2020 2020  04433784',.     
-0000c620: 2020 2023 2020 2020 2020 2020 2022 766f     #         "vo
-0000c630: 6c22 3a20 2732 322e 3230 3030 3030 3030  l": '22.20000000
-0000c640: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000c650: 2020 2020 2022 6d61 7267 696e 223a 2027       "margin": '
-0000c660: 302e 3030 3030 3030 3030 272c 0a20 2020  0.00000000',.   
-0000c670: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000c680: 6d69 7363 223a 2027 270a 2020 2020 2020  misc": ''.      
-0000c690: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0000c6a0: 2020 230a 2020 2020 2020 2020 7469 6d65    #.        time
-0000c6b0: 7374 616d 7020 3d20 4e6f 6e65 0a20 2020  stamp = None.   
-0000c6c0: 2020 2020 2073 6964 6520 3d20 4e6f 6e65       side = None
-0000c6d0: 0a20 2020 2020 2020 2074 7970 6520 3d20  .        type = 
-0000c6e0: 4e6f 6e65 0a20 2020 2020 2020 2070 7269  None.        pri
-0000c6f0: 6365 203d 204e 6f6e 650a 2020 2020 2020  ce = None.      
-0000c700: 2020 616d 6f75 6e74 203d 204e 6f6e 650a    amount = None.
-0000c710: 2020 2020 2020 2020 6964 203d 204e 6f6e          id = Non
-0000c720: 650a 2020 2020 2020 2020 6f72 6465 7249  e.        orderI
-0000c730: 6420 3d20 4e6f 6e65 0a20 2020 2020 2020  d = None.       
-0000c740: 2066 6565 203d 204e 6f6e 650a 2020 2020   fee = None.    
-0000c750: 2020 2020 7379 6d62 6f6c 203d 204e 6f6e      symbol = Non
-0000c760: 650a 2020 2020 2020 2020 6966 2069 7369  e.        if isi
-0000c770: 6e73 7461 6e63 6528 7472 6164 652c 206c  nstance(trade, l
-0000c780: 6973 7429 3a0a 2020 2020 2020 2020 2020  ist):.          
-0000c790: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
-0000c7a0: 6c66 2e73 6166 655f 7469 6d65 7374 616d  lf.safe_timestam
-0000c7b0: 7028 7472 6164 652c 2032 290a 2020 2020  p(trade, 2).    
-0000c7c0: 2020 2020 2020 2020 7369 6465 203d 2027          side = '
-0000c7d0: 7365 6c6c 2720 6966 2028 7472 6164 655b  sell' if (trade[
-0000c7e0: 335d 203d 3d20 2773 2729 2065 6c73 6520  3] == 's') else 
-0000c7f0: 2762 7579 270a 2020 2020 2020 2020 2020  'buy'.          
-0000c800: 2020 7479 7065 203d 2027 6c69 6d69 7427    type = 'limit'
-0000c810: 2069 6620 2874 7261 6465 5b34 5d20 3d3d   if (trade[4] ==
-0000c820: 2027 6c27 2920 656c 7365 2027 6d61 726b   'l') else 'mark
-0000c830: 6574 270a 2020 2020 2020 2020 2020 2020  et'.            
-0000c840: 7072 6963 6520 3d20 7365 6c66 2e73 6166  price = self.saf
-0000c850: 655f 7374 7269 6e67 2874 7261 6465 2c20  e_string(trade, 
-0000c860: 3029 0a20 2020 2020 2020 2020 2020 2061  0).            a
-0000c870: 6d6f 756e 7420 3d20 7365 6c66 2e73 6166  mount = self.saf
-0000c880: 655f 7374 7269 6e67 2874 7261 6465 2c20  e_string(trade, 
-0000c890: 3129 0a20 2020 2020 2020 2020 2020 2074  1).            t
-0000c8a0: 7261 6465 4c65 6e67 7468 203d 206c 656e  radeLength = len
-0000c8b0: 2874 7261 6465 290a 2020 2020 2020 2020  (trade).        
-0000c8c0: 2020 2020 6966 2074 7261 6465 4c65 6e67      if tradeLeng
-0000c8d0: 7468 203e 2036 3a0a 2020 2020 2020 2020  th > 6:.        
-0000c8e0: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
-0000c8f0: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0000c900: 6164 652c 2036 2920 2023 2061 7274 6966  ade, 6)  # artif
-0000c910: 6963 6961 6c6c 7920 6164 6465 6420 2023  icially added  #
-0000c920: 3137 3934 0a20 2020 2020 2020 2065 6c69  1794.        eli
-0000c930: 6620 6973 696e 7374 616e 6365 2874 7261  f isinstance(tra
-0000c940: 6465 2c20 7374 7229 3a0a 2020 2020 2020  de, str):.      
-0000c950: 2020 2020 2020 6964 203d 2074 7261 6465        id = trade
-0000c960: 0a20 2020 2020 2020 2065 6c69 6620 276f  .        elif 'o
-0000c970: 7264 6572 7478 6964 2720 696e 2074 7261  rdertxid' in tra
-0000c980: 6465 3a0a 2020 2020 2020 2020 2020 2020  de:.            
-0000c990: 6d61 726b 6574 4964 203d 2073 656c 662e  marketId = self.
-0000c9a0: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
-0000c9b0: 652c 2027 7061 6972 2729 0a20 2020 2020  e, 'pair').     
-0000c9c0: 2020 2020 2020 2066 6f75 6e64 4d61 726b         foundMark
-0000c9d0: 6574 203d 2073 656c 662e 6669 6e64 5f6d  et = self.find_m
-0000c9e0: 6172 6b65 745f 6279 5f61 6c74 6e61 6d65  arket_by_altname
-0000c9f0: 5f6f 725f 6964 286d 6172 6b65 7449 6429  _or_id(marketId)
-0000ca00: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000ca10: 666f 756e 644d 6172 6b65 7420 6973 206e  foundMarket is n
-0000ca20: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000ca30: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-0000ca40: 3d20 666f 756e 644d 6172 6b65 740a 2020  = foundMarket.  
-0000ca50: 2020 2020 2020 2020 2020 656c 6966 206d            elif m
-0000ca60: 6172 6b65 7449 6420 6973 206e 6f74 204e  arketId is not N
-0000ca70: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000ca80: 2020 2020 2023 2064 656c 6973 7465 6420       # delisted 
-0000ca90: 6d61 726b 6574 2069 6473 2067 6f20 6865  market ids go he
-0000caa0: 7265 0a20 2020 2020 2020 2020 2020 2020  re.             
-0000cab0: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
-0000cac0: 2e67 6574 5f64 656c 6973 7465 645f 6d61  .get_delisted_ma
-0000cad0: 726b 6574 5f62 795f 6964 286d 6172 6b65  rket_by_id(marke
-0000cae0: 7449 6429 0a20 2020 2020 2020 2020 2020  tId).           
-0000caf0: 206f 7264 6572 4964 203d 2073 656c 662e   orderId = self.
-0000cb00: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
-0000cb10: 652c 2027 6f72 6465 7274 7869 6427 290a  e, 'ordertxid').
-0000cb20: 2020 2020 2020 2020 2020 2020 6964 203d              id =
-0000cb30: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0000cb40: 675f 3228 7472 6164 652c 2027 6964 272c  g_2(trade, 'id',
-0000cb50: 2027 706f 7374 7869 6427 290a 2020 2020   'postxid').    
-0000cb60: 2020 2020 2020 2020 7469 6d65 7374 616d          timestam
-0000cb70: 7020 3d20 7365 6c66 2e73 6166 655f 7469  p = self.safe_ti
-0000cb80: 6d65 7374 616d 7028 7472 6164 652c 2027  mestamp(trade, '
-0000cb90: 7469 6d65 2729 0a20 2020 2020 2020 2020  time').         
-0000cba0: 2020 2073 6964 6520 3d20 7365 6c66 2e73     side = self.s
-0000cbb0: 6166 655f 7374 7269 6e67 2874 7261 6465  afe_string(trade
-0000cbc0: 2c20 2774 7970 6527 290a 2020 2020 2020  , 'type').      
-0000cbd0: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-0000cbe0: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-0000cbf0: 6164 652c 2027 6f72 6465 7274 7970 6527  ade, 'ordertype'
-0000cc00: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
-0000cc10: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-0000cc20: 7374 7269 6e67 2874 7261 6465 2c20 2770  string(trade, 'p
-0000cc30: 7269 6365 2729 0a20 2020 2020 2020 2020  rice').         
-0000cc40: 2020 2061 6d6f 756e 7420 3d20 7365 6c66     amount = self
-0000cc50: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
-0000cc60: 6465 2c20 2776 6f6c 2729 0a20 2020 2020  de, 'vol').     
-0000cc70: 2020 2020 2020 2069 6620 2766 6565 2720         if 'fee' 
-0000cc80: 696e 2074 7261 6465 3a0a 2020 2020 2020  in trade:.      
-0000cc90: 2020 2020 2020 2020 2020 6375 7272 656e            curren
-0000cca0: 6379 203d 204e 6f6e 650a 2020 2020 2020  cy = None.      
-0000ccb0: 2020 2020 2020 2020 2020 6966 206d 6172            if mar
-0000ccc0: 6b65 7420 6973 206e 6f74 204e 6f6e 653a  ket is not None:
-0000ccd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cce0: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-0000ccf0: 6d61 726b 6574 5b27 7175 6f74 6527 5d0a  market['quote'].
-0000cd00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cd10: 6665 6520 3d20 7b0a 2020 2020 2020 2020  fee = {.        
-0000cd20: 2020 2020 2020 2020 2020 2020 2763 6f73              'cos
-0000cd30: 7427 3a20 7365 6c66 2e73 6166 655f 7374  t': self.safe_st
-0000cd40: 7269 6e67 2874 7261 6465 2c20 2766 6565  ring(trade, 'fee
-0000cd50: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
-0000cd60: 2020 2020 2020 2020 2763 7572 7265 6e63          'currenc
-0000cd70: 7927 3a20 6375 7272 656e 6379 2c0a 2020  y': currency,.  
-0000cd80: 2020 2020 2020 2020 2020 2020 2020 7d0a                }.
-0000cd90: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
-0000cda0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-0000cdb0: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
-0000cdc0: 6c20 3d20 6d61 726b 6574 5b27 7379 6d62  l = market['symb
-0000cdd0: 6f6c 275d 0a20 2020 2020 2020 2063 6f73  ol'].        cos
-0000cde0: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
-0000cdf0: 7269 6e67 2874 7261 6465 2c20 2763 6f73  ring(trade, 'cos
-0000ce00: 7427 290a 2020 2020 2020 2020 7265 7475  t').        retu
-0000ce10: 726e 2073 656c 662e 7361 6665 5f74 7261  rn self.safe_tra
-0000ce20: 6465 287b 0a20 2020 2020 2020 2020 2020  de({.           
-0000ce30: 2027 6964 273a 2069 642c 0a20 2020 2020   'id': id,.     
-0000ce40: 2020 2020 2020 2027 6f72 6465 7227 3a20         'order': 
-0000ce50: 6f72 6465 7249 642c 0a20 2020 2020 2020  orderId,.       
-0000ce60: 2020 2020 2027 696e 666f 273a 2074 7261       'info': tra
-0000ce70: 6465 2c0a 2020 2020 2020 2020 2020 2020  de,.            
-0000ce80: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
-0000ce90: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
-0000cea0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
-0000ceb0: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
-0000cec0: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
-0000ced0: 2020 2020 2027 7379 6d62 6f6c 273a 2073       'symbol': s
-0000cee0: 796d 626f 6c2c 0a20 2020 2020 2020 2020  ymbol,.         
-0000cef0: 2020 2027 7479 7065 273a 2074 7970 652c     'type': type,
-0000cf00: 0a20 2020 2020 2020 2020 2020 2027 7369  .            'si
-0000cf10: 6465 273a 2073 6964 652c 0a20 2020 2020  de': side,.     
-0000cf20: 2020 2020 2020 2027 7461 6b65 724f 724d         'takerOrM
-0000cf30: 616b 6572 273a 204e 6f6e 652c 0a20 2020  aker': None,.   
-0000cf40: 2020 2020 2020 2020 2027 7072 6963 6527           'price'
-0000cf50: 3a20 7072 6963 652c 0a20 2020 2020 2020  : price,.       
-0000cf60: 2020 2020 2027 616d 6f75 6e74 273a 2061       'amount': a
-0000cf70: 6d6f 756e 742c 0a20 2020 2020 2020 2020  mount,.         
-0000cf80: 2020 2027 636f 7374 273a 2063 6f73 742c     'cost': cost,
-0000cf90: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
-0000cfa0: 6527 3a20 6665 652c 0a20 2020 2020 2020  e': fee,.       
-0000cfb0: 207d 2c20 6d61 726b 6574 290a 0a20 2020   }, market)..   
-0000cfc0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-0000cfd0: 5f74 7261 6465 7328 7365 6c66 2c20 7379  _trades(self, sy
-0000cfe0: 6d62 6f6c 3a20 7374 722c 2073 696e 6365  mbol: str, since
-0000cff0: 3a20 496e 7420 3d20 4e6f 6e65 2c20 6c69  : Int = None, li
-0000d000: 6d69 743a 2049 6e74 203d 204e 6f6e 652c  mit: Int = None,
-0000d010: 2070 6172 616d 733d 7b7d 2920 2d3e 204c   params={}) -> L
-0000d020: 6973 745b 5472 6164 655d 3a0a 2020 2020  ist[Trade]:.    
-0000d030: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000d040: 6765 7420 7468 6520 6c69 7374 206f 6620  get the list of 
-0000d050: 6d6f 7374 2072 6563 656e 7420 7472 6164  most recent trad
-0000d060: 6573 2066 6f72 2061 2070 6172 7469 6375  es for a particu
-0000d070: 6c61 7220 7379 6d62 6f6c 0a20 2020 2020  lar symbol.     
-0000d080: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
-0000d090: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
-0000d0a0: 2f72 6573 742f 2374 6167 2f53 706f 742d  /rest/#tag/Spot-
-0000d0b0: 4d61 726b 6574 2d44 6174 612f 6f70 6572  Market-Data/oper
-0000d0c0: 6174 696f 6e2f 6765 7452 6563 656e 7454  ation/getRecentT
-0000d0d0: 7261 6465 730a 2020 2020 2020 2020 3a70  rades.        :p
-0000d0e0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-0000d0f0: 2075 6e69 6669 6564 2073 796d 626f 6c20   unified symbol 
-0000d100: 6f66 2074 6865 206d 6172 6b65 7420 746f  of the market to
-0000d110: 2066 6574 6368 2074 7261 6465 7320 666f   fetch trades fo
-0000d120: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-0000d130: 2069 6e74 205b 7369 6e63 655d 3a20 7469   int [since]: ti
-0000d140: 6d65 7374 616d 7020 696e 206d 7320 6f66  mestamp in ms of
-0000d150: 2074 6865 2065 6172 6c69 6573 7420 7472   the earliest tr
-0000d160: 6164 6520 746f 2066 6574 6368 0a20 2020  ade to fetch.   
-0000d170: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
-0000d180: 5b6c 696d 6974 5d3a 2074 6865 206d 6178  [limit]: the max
-0000d190: 696d 756d 2061 6d6f 756e 7420 6f66 2074  imum amount of t
-0000d1a0: 7261 6465 7320 746f 2066 6574 6368 0a20  rades to fetch. 
-0000d1b0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0000d1c0: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
-0000d1d0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-0000d1e0: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
-0000d1f0: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
-0000d200: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-0000d210: 7572 6e73 2054 7261 6465 5b5d 3a20 6120  urns Trade[]: a 
-0000d220: 6c69 7374 206f 6620 6074 7261 6465 2073  list of `trade s
-0000d230: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
-0000d240: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-0000d250: 2f23 2f3f 6964 3d70 7562 6c69 632d 7472  /#/?id=public-tr
-0000d260: 6164 6573 3e60 0a20 2020 2020 2020 2022  ades>`.        "
-0000d270: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
-0000d280: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0000d290: 7473 2829 0a20 2020 2020 2020 206d 6172  ts().        mar
-0000d2a0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
-0000d2b0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
-0000d2c0: 2020 6964 203d 206d 6172 6b65 745b 2769    id = market['i
-0000d2d0: 6427 5d0a 2020 2020 2020 2020 7265 7175  d'].        requ
-0000d2e0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0000d2f0: 2020 2020 2770 6169 7227 3a20 6964 2c0a      'pair': id,.
-0000d300: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000d310: 2020 2320 6874 7470 733a 2f2f 7375 7070    # https://supp
-0000d320: 6f72 742e 6b72 616b 656e 2e63 6f6d 2f68  ort.kraken.com/h
-0000d330: 632f 656e 2d75 732f 6172 7469 636c 6573  c/en-us/articles
-0000d340: 2f32 3138 3139 3831 3937 2d48 6f77 2d74  /218198197-How-t
-0000d350: 6f2d 7075 6c6c 2d61 6c6c 2d74 7261 6465  o-pull-all-trade
-0000d360: 2d64 6174 612d 7573 696e 672d 7468 652d  -data-using-the-
-0000d370: 4b72 616b 656e 2d52 4553 542d 4150 490a  Kraken-REST-API.
-0000d380: 2020 2020 2020 2020 2320 6874 7470 733a          # https:
-0000d390: 2f2f 6769 7468 7562 2e63 6f6d 2f63 6378  //github.com/ccx
-0000d3a0: 742f 6363 7874 2f69 7373 7565 732f 3536  t/ccxt/issues/56
-0000d3b0: 3737 0a20 2020 2020 2020 2069 6620 7369  77.        if si
-0000d3c0: 6e63 6520 6973 206e 6f74 204e 6f6e 653a  nce is not None:
-0000d3d0: 0a20 2020 2020 2020 2020 2020 2023 2070  .            # p
-0000d3e0: 6870 2064 6f65 7320 6e6f 7420 666f 726d  hp does not form
-0000d3f0: 6174 2069 7420 7072 6f70 6572 6c79 0a20  at it properly. 
-0000d400: 2020 2020 2020 2020 2020 2023 2074 6865             # the
-0000d410: 7265 666f 7265 2077 6520 7573 6520 7374  refore we use st
-0000d420: 7269 6e67 2063 6f6e 6361 7465 6e61 7469  ring concatenati
-0000d430: 6f6e 2068 6572 650a 2020 2020 2020 2020  on here.        
-0000d440: 2020 2020 7265 7175 6573 745b 2773 696e      request['sin
-0000d450: 6365 275d 203d 2073 696e 6365 202a 2031  ce'] = since * 1
-0000d460: 6536 0a20 2020 2020 2020 2020 2020 2072  e6.            r
-0000d470: 6571 7565 7374 5b27 7369 6e63 6527 5d20  equest['since'] 
-0000d480: 3d20 7374 7228 7369 6e63 6529 202b 2027  = str(since) + '
-0000d490: 3030 3030 3030 2720 2023 2065 7870 6563  000000'  # expec
-0000d4a0: 7465 6420 746f 2062 6520 696e 206e 616e  ted to be in nan
-0000d4b0: 6f73 6563 6f6e 6473 0a20 2020 2020 2020  oseconds.       
-0000d4c0: 2069 6620 6c69 6d69 7420 6973 206e 6f74   if limit is not
-0000d4d0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-0000d4e0: 2020 2072 6571 7565 7374 5b27 636f 756e     request['coun
-0000d4f0: 7427 5d20 3d20 6c69 6d69 740a 2020 2020  t'] = limit.    
-0000d500: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
-0000d510: 7761 6974 2073 656c 662e 7075 626c 6963  wait self.public
-0000d520: 4765 7454 7261 6465 7328 7365 6c66 2e65  GetTrades(self.e
-0000d530: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-0000d540: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-0000d550: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0000d560: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0000d570: 2020 2020 2265 7272 6f72 223a 205b 5d2c      "error": [],
-0000d580: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000d590: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-0000d5a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000d5b0: 2020 2020 2022 5845 5448 5858 4254 223a       "XETHXXBT":
-0000d5c0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
-0000d5d0: 2020 2020 2020 2020 2020 2020 205b 2230               ["0
-0000d5e0: 2e30 3332 3331 3022 2c22 342e 3238 3136  .032310","4.2816
-0000d5f0: 3934 3334 222c 3135 3431 3339 3037 3932  9434",1541390792
-0000d600: 2e37 3633 2c22 7322 2c22 6c22 2c22 225d  .763,"s","l",""]
-0000d610: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000d620: 2020 2020 2020 205d 2c0a 2020 2020 2020         ],.      
-0000d630: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000d640: 226c 6173 7422 3a20 2231 3534 3134 3339  "last": "1541439
-0000d650: 3432 3132 3030 3637 3836 3537 220a 2020  421200678657".  
-0000d660: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000d670: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0000d680: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0000d690: 2020 2020 7265 7375 6c74 203d 2072 6573      result = res
-0000d6a0: 706f 6e73 655b 2772 6573 756c 7427 5d0a  ponse['result'].
-0000d6b0: 2020 2020 2020 2020 7472 6164 6573 203d          trades =
-0000d6c0: 2072 6573 756c 745b 6964 5d0a 2020 2020   result[id].    
-0000d6d0: 2020 2020 2320 7472 6164 6573 2069 7320      # trades is 
-0000d6e0: 6120 736f 7274 6564 2061 7272 6179 3a20  a sorted array: 
-0000d6f0: 6c61 7374 286d 6f73 7420 7265 6365 6e74  last(most recent
-0000d700: 2074 7261 6465 2920 676f 6573 206c 6173   trade) goes las
-0000d710: 740a 2020 2020 2020 2020 6c65 6e67 7468  t.        length
-0000d720: 203d 206c 656e 2874 7261 6465 7329 0a20   = len(trades). 
-0000d730: 2020 2020 2020 2069 6620 6c65 6e67 7468         if length
-0000d740: 203c 3d20 303a 0a20 2020 2020 2020 2020   <= 0:.         
-0000d750: 2020 2072 6574 7572 6e20 5b5d 0a20 2020     return [].   
-0000d760: 2020 2020 206c 6173 7454 7261 6465 203d       lastTrade =
-0000d770: 2074 7261 6465 735b 6c65 6e67 7468 202d   trades[length -
-0000d780: 2031 5d0a 2020 2020 2020 2020 6c61 7374   1].        last
-0000d790: 5472 6164 6549 6420 3d20 7365 6c66 2e73  TradeId = self.s
-0000d7a0: 6166 655f 7374 7269 6e67 2872 6573 756c  afe_string(resul
-0000d7b0: 742c 2027 6c61 7374 2729 0a20 2020 2020  t, 'last').     
-0000d7c0: 2020 206c 6173 7454 7261 6465 2e61 7070     lastTrade.app
-0000d7d0: 656e 6428 6c61 7374 5472 6164 6549 6429  end(lastTradeId)
-0000d7e0: 0a20 2020 2020 2020 2074 7261 6465 735b  .        trades[
-0000d7f0: 6c65 6e67 7468 202d 2031 5d20 3d20 6c61  length - 1] = la
-0000d800: 7374 5472 6164 650a 2020 2020 2020 2020  stTrade.        
-0000d810: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
-0000d820: 655f 7472 6164 6573 2874 7261 6465 732c  e_trades(trades,
-0000d830: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
-0000d840: 6c69 6d69 7429 0a0a 2020 2020 6465 6620  limit)..    def 
-0000d850: 7061 7273 655f 6261 6c61 6e63 6528 7365  parse_balance(se
-0000d860: 6c66 2c20 7265 7370 6f6e 7365 2920 2d3e  lf, response) ->
-0000d870: 2042 616c 616e 6365 733a 0a20 2020 2020   Balances:.     
-0000d880: 2020 2062 616c 616e 6365 7320 3d20 7365     balances = se
-0000d890: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0000d8a0: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0000d8b0: 2c20 7b7d 290a 2020 2020 2020 2020 7265  , {}).        re
-0000d8c0: 7375 6c74 203d 207b 0a20 2020 2020 2020  sult = {.       
-0000d8d0: 2020 2020 2027 696e 666f 273a 2072 6573       'info': res
-0000d8e0: 706f 6e73 652c 0a20 2020 2020 2020 2020  ponse,.         
-0000d8f0: 2020 2027 7469 6d65 7374 616d 7027 3a20     'timestamp': 
-0000d900: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-0000d910: 2020 2764 6174 6574 696d 6527 3a20 4e6f    'datetime': No
-0000d920: 6e65 2c0a 2020 2020 2020 2020 7d0a 2020  ne,.        }.  
-0000d930: 2020 2020 2020 6375 7272 656e 6379 4964        currencyId
-0000d940: 7320 3d20 6c69 7374 2862 616c 616e 6365  s = list(balance
-0000d950: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
-0000d960: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-0000d970: 2830 2c20 6c65 6e28 6375 7272 656e 6379  (0, len(currency
-0000d980: 4964 7329 293a 0a20 2020 2020 2020 2020  Ids)):.         
-0000d990: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
-0000d9a0: 6375 7272 656e 6379 4964 735b 695d 0a20  currencyIds[i]. 
-0000d9b0: 2020 2020 2020 2020 2020 2063 6f64 6520             code 
-0000d9c0: 3d20 7365 6c66 2e73 6166 655f 6375 7272  = self.safe_curr
-0000d9d0: 656e 6379 5f63 6f64 6528 6375 7272 656e  ency_code(curren
-0000d9e0: 6379 4964 290a 2020 2020 2020 2020 2020  cyId).          
-0000d9f0: 2020 6261 6c61 6e63 6520 3d20 7365 6c66    balance = self
-0000da00: 2e73 6166 655f 7661 6c75 6528 6261 6c61  .safe_value(bala
-0000da10: 6e63 6573 2c20 6375 7272 656e 6379 4964  nces, currencyId
-0000da20: 2c20 7b7d 290a 2020 2020 2020 2020 2020  , {}).          
-0000da30: 2020 6163 636f 756e 7420 3d20 7365 6c66    account = self
-0000da40: 2e61 6363 6f75 6e74 2829 0a20 2020 2020  .account().     
-0000da50: 2020 2020 2020 2061 6363 6f75 6e74 5b27         account['
-0000da60: 7573 6564 275d 203d 2073 656c 662e 7361  used'] = self.sa
-0000da70: 6665 5f73 7472 696e 6728 6261 6c61 6e63  fe_string(balanc
-0000da80: 652c 2027 686f 6c64 5f74 7261 6465 2729  e, 'hold_trade')
-0000da90: 0a20 2020 2020 2020 2020 2020 2061 6363  .            acc
-0000daa0: 6f75 6e74 5b27 746f 7461 6c27 5d20 3d20  ount['total'] = 
-0000dab0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0000dac0: 2862 616c 616e 6365 2c20 2762 616c 616e  (balance, 'balan
-0000dad0: 6365 2729 0a20 2020 2020 2020 2020 2020  ce').           
-0000dae0: 2072 6573 756c 745b 636f 6465 5d20 3d20   result[code] = 
-0000daf0: 6163 636f 756e 740a 2020 2020 2020 2020  account.        
-0000db00: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
-0000db10: 5f62 616c 616e 6365 2872 6573 756c 7429  _balance(result)
-0000db20: 0a0a 2020 2020 6173 796e 6320 6465 6620  ..    async def 
-0000db30: 6665 7463 685f 6261 6c61 6e63 6528 7365  fetch_balance(se
-0000db40: 6c66 2c20 7061 7261 6d73 3d7b 7d29 202d  lf, params={}) -
-0000db50: 3e20 4261 6c61 6e63 6573 3a0a 2020 2020  > Balances:.    
-0000db60: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000db70: 7175 6572 7920 666f 7220 6261 6c61 6e63  query for balanc
-0000db80: 6520 616e 6420 6765 7420 7468 6520 616d  e and get the am
-0000db90: 6f75 6e74 206f 6620 6675 6e64 7320 6176  ount of funds av
-0000dba0: 6169 6c61 626c 6520 666f 7220 7472 6164  ailable for trad
-0000dbb0: 696e 6720 6f72 2066 756e 6473 206c 6f63  ing or funds loc
-0000dbc0: 6b65 6420 696e 206f 7264 6572 730a 2020  ked in orders.  
-0000dbd0: 2020 2020 2020 3a73 6565 3a20 6874 7470        :see: http
-0000dbe0: 733a 2f2f 646f 6373 2e6b 7261 6b65 6e2e  s://docs.kraken.
-0000dbf0: 636f 6d2f 7265 7374 2f23 7461 672f 4163  com/rest/#tag/Ac
-0000dc00: 636f 756e 742d 4461 7461 2f6f 7065 7261  count-Data/opera
-0000dc10: 7469 6f6e 2f67 6574 4578 7465 6e64 6564  tion/getExtended
-0000dc20: 4261 6c61 6e63 650a 2020 2020 2020 2020  Balance.        
-0000dc30: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
-0000dc40: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
-0000dc50: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-0000dc60: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
-0000dc70: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
-0000dc80: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
-0000dc90: 6374 3a20 6120 6062 616c 616e 6365 2073  ct: a `balance s
-0000dca0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-0000dcb0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-0000dcc0: 232f 3f69 643d 6261 6c61 6e63 652d 7374  #/?id=balance-st
-0000dcd0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
-0000dce0: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
-0000dcf0: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
-0000dd00: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0000dd10: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-0000dd20: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-0000dd30: 7442 616c 616e 6365 4578 2870 6172 616d  tBalanceEx(param
-0000dd40: 7329 0a20 2020 2020 2020 2023 0a20 2020  s).        #.   
-0000dd50: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
-0000dd60: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000dd70: 6572 726f 7222 3a20 5b5d 2c0a 2020 2020  error": [],.    
-0000dd80: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-0000dd90: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-0000dda0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000ddb0: 225a 5553 4422 3a20 7b0a 2020 2020 2020  "ZUSD": {.      
-0000ddc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000ddd0: 2020 2020 2262 616c 616e 6365 223a 2032      "balance": 2
-0000dde0: 3534 3335 2e32 312c 0a20 2020 2020 2020  5435.21,.       
-0000ddf0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000de00: 2020 2022 686f 6c64 5f74 7261 6465 223a     "hold_trade":
-0000de10: 2038 3234 392e 3736 0a20 2020 2020 2020   8249.76.       
-0000de20: 2023 2020 2020 2020 2020 2020 2020 207d   #             }
-0000de30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000de40: 2020 2020 2020 2020 2258 5842 5422 3a20          "XXBT": 
-0000de50: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0000de60: 2020 2020 2020 2020 2020 2020 2262 616c              "bal
-0000de70: 616e 6365 223a 2031 2e32 3433 352c 0a20  ance": 1.2435,. 
-0000de80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000de90: 2020 2020 2020 2020 2022 686f 6c64 5f74           "hold_t
-0000dea0: 7261 6465 223a 2030 2e38 3432 330a 2020  rade": 0.8423.  
-0000deb0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000dec0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0000ded0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000dee0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0000def0: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
-0000df00: 726e 2073 656c 662e 7061 7273 655f 6261  rn self.parse_ba
-0000df10: 6c61 6e63 6528 7265 7370 6f6e 7365 290a  lance(response).
-0000df20: 0a20 2020 2061 7379 6e63 2064 6566 2063  .    async def c
-0000df30: 7265 6174 655f 6f72 6465 7228 7365 6c66  reate_order(self
-0000df40: 2c20 7379 6d62 6f6c 3a20 7374 722c 2074  , symbol: str, t
-0000df50: 7970 653a 204f 7264 6572 5479 7065 2c20  ype: OrderType, 
-0000df60: 7369 6465 3a20 4f72 6465 7253 6964 652c  side: OrderSide,
-0000df70: 2061 6d6f 756e 743a 2066 6c6f 6174 2c20   amount: float, 
-0000df80: 7072 6963 653a 204e 756d 203d 204e 6f6e  price: Num = Non
-0000df90: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0000dfa0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000dfb0: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
-0000dfc0: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
-0000dfd0: 2f72 6573 742f 2374 6167 2f54 7261 6469  /rest/#tag/Tradi
-0000dfe0: 6e67 2f6f 7065 7261 7469 6f6e 2f61 6464  ng/operation/add
-0000dff0: 4f72 6465 720a 2020 2020 2020 2020 6372  Order.        cr
-0000e000: 6561 7465 2061 2074 7261 6465 206f 7264  eate a trade ord
-0000e010: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
-0000e020: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-0000e030: 6966 6965 6420 7379 6d62 6f6c 206f 6620  ified symbol of 
-0000e040: 7468 6520 6d61 726b 6574 2074 6f20 6372  the market to cr
-0000e050: 6561 7465 2061 6e20 6f72 6465 7220 696e  eate an order in
-0000e060: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000e070: 7374 7220 7479 7065 3a20 276d 6172 6b65  str type: 'marke
-0000e080: 7427 206f 7220 276c 696d 6974 270a 2020  t' or 'limit'.  
-0000e090: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0000e0a0: 2073 6964 653a 2027 6275 7927 206f 7220   side: 'buy' or 
-0000e0b0: 2773 656c 6c27 0a20 2020 2020 2020 203a  'sell'.        :
-0000e0c0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-0000e0d0: 6e74 3a20 686f 7720 6d75 6368 206f 6620  nt: how much of 
-0000e0e0: 6375 7272 656e 6379 2079 6f75 2077 616e  currency you wan
-0000e0f0: 7420 746f 2074 7261 6465 2069 6e20 756e  t to trade in un
-0000e100: 6974 7320 6f66 2062 6173 6520 6375 7272  its of base curr
-0000e110: 656e 6379 0a20 2020 2020 2020 203a 7061  ency.        :pa
-0000e120: 7261 6d20 666c 6f61 7420 5b70 7269 6365  ram float [price
-0000e130: 5d3a 2074 6865 2070 7269 6365 2061 7420  ]: the price at 
-0000e140: 7768 6963 6820 7468 6520 6f72 6465 7220  which the order 
-0000e150: 6973 2074 6f20 6265 2066 756c 6c66 696c  is to be fullfil
-0000e160: 6c65 642c 2069 6e20 756e 6974 7320 6f66  led, in units of
-0000e170: 2074 6865 2071 756f 7465 2063 7572 7265   the quote curre
-0000e180: 6e63 792c 2069 676e 6f72 6564 2069 6e20  ncy, ignored in 
-0000e190: 6d61 726b 6574 206f 7264 6572 730a 2020  market orders.  
-0000e1a0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-0000e1b0: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
-0000e1c0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-0000e1d0: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
-0000e1e0: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
-0000e1f0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0000e200: 6d20 626f 6f6c 205b 7061 7261 6d73 2e70  m bool [params.p
-0000e210: 6f73 744f 6e6c 795d 3a20 6966 2054 7275  ostOnly]: if Tru
-0000e220: 652c 2074 6865 206f 7264 6572 2077 696c  e, the order wil
-0000e230: 6c20 6f6e 6c79 2062 6520 706f 7374 6564  l only be posted
-0000e240: 2074 6f20 7468 6520 6f72 6465 7220 626f   to the order bo
-0000e250: 6f6b 2061 6e64 206e 6f74 2065 7865 6375  ok and not execu
-0000e260: 7465 6420 696d 6d65 6469 6174 656c 790a  ted immediately.
-0000e270: 2020 2020 2020 2020 3a70 6172 616d 2062          :param b
-0000e280: 6f6f 6c20 5b70 6172 616d 732e 7265 6475  ool [params.redu
-0000e290: 6365 4f6e 6c79 5d3a 202a 6d61 7267 696e  ceOnly]: *margin
-0000e2a0: 206f 6e6c 792a 2069 6e64 6963 6174 6573   only* indicates
-0000e2b0: 2069 6620 7365 6c66 206f 7264 6572 2069   if self order i
-0000e2c0: 7320 746f 2072 6564 7563 6520 7468 6520  s to reduce the 
-0000e2d0: 7369 7a65 206f 6620 6120 706f 7369 7469  size of a positi
-0000e2e0: 6f6e 0a20 2020 2020 2020 203a 7061 7261  on.        :para
-0000e2f0: 6d20 666c 6f61 7420 5b70 6172 616d 732e  m float [params.
-0000e300: 7374 6f70 4c6f 7373 5072 6963 655d 3a20  stopLossPrice]: 
-0000e310: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 7468  *margin only* th
-0000e320: 6520 7072 6963 6520 7468 6174 2061 2073  e price that a s
-0000e330: 746f 7020 6c6f 7373 206f 7264 6572 2069  top loss order i
-0000e340: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
-0000e350: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
-0000e360: 6f61 7420 5b70 6172 616d 732e 7461 6b65  oat [params.take
-0000e370: 5072 6f66 6974 5072 6963 655d 3a20 2a6d  ProfitPrice]: *m
-0000e380: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
-0000e390: 7072 6963 6520 7468 6174 2061 2074 616b  price that a tak
-0000e3a0: 6520 7072 6f66 6974 206f 7264 6572 2069  e profit order i
-0000e3b0: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
-0000e3c0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0000e3d0: 7220 5b70 6172 616d 732e 7472 6169 6c69  r [params.traili
-0000e3e0: 6e67 416d 6f75 6e74 5d3a 202a 6d61 7267  ngAmount]: *marg
-0000e3f0: 696e 206f 6e6c 792a 2074 6865 2071 756f  in only* the quo
-0000e400: 7465 2061 6d6f 756e 7420 746f 2074 7261  te amount to tra
-0000e410: 696c 2061 7761 7920 6672 6f6d 2074 6865  il away from the
-0000e420: 2063 7572 7265 6e74 206d 6172 6b65 7420   current market 
-0000e430: 7072 6963 650a 2020 2020 2020 2020 3a70  price.        :p
-0000e440: 6172 616d 2073 7472 205b 7061 7261 6d73  aram str [params
-0000e450: 2e74 7261 696c 696e 674c 696d 6974 416d  .trailingLimitAm
-0000e460: 6f75 6e74 5d3a 202a 6d61 7267 696e 206f  ount]: *margin o
-0000e470: 6e6c 792a 2074 6865 2071 756f 7465 2061  nly* the quote a
-0000e480: 6d6f 756e 7420 6177 6179 2066 726f 6d20  mount away from 
-0000e490: 7468 6520 7472 6169 6c69 6e67 416d 6f75  the trailingAmou
-0000e4a0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0000e4b0: 6d20 7374 7220 5b70 6172 616d 732e 6f66  m str [params.of
-0000e4c0: 6673 6574 5d3a 202a 6d61 7267 696e 206f  fset]: *margin o
-0000e4d0: 6e6c 792a 2027 2b27 206f 7220 272d 2720  nly* '+' or '-' 
-0000e4e0: 7768 6574 6865 7220 796f 7520 7761 6e74  whether you want
-0000e4f0: 2074 6865 2074 7261 696c 696e 674c 696d   the trailingLim
-0000e500: 6974 416d 6f75 6e74 2076 616c 7565 2074  itAmount value t
-0000e510: 6f20 6265 2070 6f73 6974 6976 6520 6f72  o be positive or
-0000e520: 206e 6567 6174 6976 652c 2064 6566 6175   negative, defau
-0000e530: 6c74 2069 7320 6e65 6761 7469 7665 2027  lt is negative '
-0000e540: 2d27 0a20 2020 2020 2020 203a 7061 7261  -'.        :para
-0000e550: 6d20 7374 7220 5b70 6172 616d 732e 7472  m str [params.tr
-0000e560: 6967 6765 725d 3a20 2a6d 6172 6769 6e20  igger]: *margin 
-0000e570: 6f6e 6c79 2a20 7468 6520 6163 7469 7661  only* the activa
-0000e580: 7469 6f6e 2070 7269 6365 2074 7970 652c  tion price type,
-0000e590: 2027 6c61 7374 2720 6f72 2027 696e 6465   'last' or 'inde
-0000e5a0: 7827 2c20 6465 6661 756c 7420 6973 2027  x', default is '
-0000e5b0: 6c61 7374 270a 2020 2020 2020 2020 3a72  last'.        :r
-0000e5c0: 6574 7572 6e73 2064 6963 743a 2061 6e20  eturns dict: an 
-0000e5d0: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
-0000e5e0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0000e5f0: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
-0000e600: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
-0000e610: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000e620: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
-0000e630: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-0000e640: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-0000e650: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-0000e660: 6c29 0a20 2020 2020 2020 2072 6571 7565  l).        reque
-0000e670: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-0000e680: 2020 2027 7061 6972 273a 206d 6172 6b65     'pair': marke
-0000e690: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-0000e6a0: 2020 2020 2027 7479 7065 273a 2073 6964       'type': sid
-0000e6b0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0000e6c0: 6f72 6465 7274 7970 6527 3a20 7479 7065  ordertype': type
-0000e6d0: 2c0a 2020 2020 2020 2020 2020 2020 2776  ,.            'v
-0000e6e0: 6f6c 756d 6527 3a20 7365 6c66 2e61 6d6f  olume': self.amo
-0000e6f0: 756e 745f 746f 5f70 7265 6369 7369 6f6e  unt_to_precision
-0000e700: 2873 796d 626f 6c2c 2061 6d6f 756e 7429  (symbol, amount)
-0000e710: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-0000e720: 2020 2020 6f72 6465 7252 6571 7565 7374      orderRequest
-0000e730: 203d 2073 656c 662e 6f72 6465 725f 7265   = self.order_re
-0000e740: 7175 6573 7428 2763 7265 6174 654f 7264  quest('createOrd
-0000e750: 6572 2829 272c 2073 796d 626f 6c2c 2074  er()', symbol, t
-0000e760: 7970 652c 2072 6571 7565 7374 2c20 7072  ype, request, pr
-0000e770: 6963 652c 2070 6172 616d 7329 0a20 2020  ice, params).   
-0000e780: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
-0000e790: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-0000e7a0: 7465 506f 7374 4164 644f 7264 6572 2873  tePostAddOrder(s
-0000e7b0: 656c 662e 6578 7465 6e64 286f 7264 6572  elf.extend(order
-0000e7c0: 5265 7175 6573 745b 305d 2c20 6f72 6465  Request[0], orde
-0000e7d0: 7252 6571 7565 7374 5b31 5d29 290a 2020  rRequest[1])).  
-0000e7e0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0000e7f0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0000e800: 2320 2020 2020 2020 2020 2265 7272 6f72  #         "error
-0000e810: 223a 205b 5d2c 0a20 2020 2020 2020 2023  ": [],.        #
-0000e820: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0000e830: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-0000e840: 2020 2020 2020 2020 2020 2022 6465 7363             "desc
-0000e850: 7222 3a20 7b6f 7264 6572 3a20 2762 7579  r": {order: 'buy
-0000e860: 2030 2e30 3231 3030 3030 3020 4554 4855   0.02100000 ETHU
-0000e870: 5344 5420 4020 6c69 6d69 7420 3333 302e  SDT @ limit 330.
-0000e880: 3030 277d 2c0a 2020 2020 2020 2020 2320  00'},.        # 
-0000e890: 2020 2020 2020 2020 2020 2020 2274 7869              "txi
-0000e8a0: 6422 3a20 5b27 4f45 4b56 5632 2d49 4835  d": ['OEKVV2-IH5
-0000e8b0: 324f 2d54 504c 3647 5a27 5d0a 2020 2020  2O-TPL6GZ'].    
-0000e8c0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-0000e8d0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0000e8e0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000e8f0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0000e900: 7361 6665 5f64 6963 7428 7265 7370 6f6e  safe_dict(respon
-0000e910: 7365 2c20 2772 6573 756c 7427 290a 2020  se, 'result').  
-0000e920: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000e930: 662e 7061 7273 655f 6f72 6465 7228 7265  f.parse_order(re
-0000e940: 7375 6c74 290a 0a20 2020 2064 6566 2066  sult)..    def f
-0000e950: 696e 645f 6d61 726b 6574 5f62 795f 616c  ind_market_by_al
-0000e960: 746e 616d 655f 6f72 5f69 6428 7365 6c66  tname_or_id(self
-0000e970: 2c20 6964 293a 0a20 2020 2020 2020 206d  , id):.        m
-0000e980: 6172 6b65 7473 4279 416c 746e 616d 6520  arketsByAltname 
-0000e990: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0000e9a0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-0000e9b0: 276d 6172 6b65 7473 4279 416c 746e 616d  'marketsByAltnam
-0000e9c0: 6527 2c20 7b7d 290a 2020 2020 2020 2020  e', {}).        
-0000e9d0: 6966 2069 6420 696e 206d 6172 6b65 7473  if id in markets
-0000e9e0: 4279 416c 746e 616d 653a 0a20 2020 2020  ByAltname:.     
-0000e9f0: 2020 2020 2020 2072 6574 7572 6e20 6d61         return ma
-0000ea00: 726b 6574 7342 7941 6c74 6e61 6d65 5b69  rketsByAltname[i
-0000ea10: 645d 0a20 2020 2020 2020 2065 6c73 653a  d].        else:
-0000ea20: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000ea30: 7572 6e20 7365 6c66 2e73 6166 655f 6d61  urn self.safe_ma
-0000ea40: 726b 6574 2869 6429 0a0a 2020 2020 6465  rket(id)..    de
-0000ea50: 6620 6765 745f 6465 6c69 7374 6564 5f6d  f get_delisted_m
-0000ea60: 6172 6b65 745f 6279 5f69 6428 7365 6c66  arket_by_id(self
-0000ea70: 2c20 6964 293a 0a20 2020 2020 2020 2069  , id):.        i
-0000ea80: 6620 6964 2069 7320 4e6f 6e65 3a0a 2020  f id is None:.  
-0000ea90: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000eaa0: 2069 640a 2020 2020 2020 2020 6d61 726b   id.        mark
-0000eab0: 6574 203d 2073 656c 662e 7361 6665 5f76  et = self.safe_v
-0000eac0: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
-0000ead0: 735b 2764 656c 6973 7465 644d 6172 6b65  s['delistedMarke
-0000eae0: 7473 4279 4964 275d 2c20 6964 290a 2020  tsById'], id).  
-0000eaf0: 2020 2020 2020 6966 206d 6172 6b65 7420        if market 
-0000eb00: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000eb10: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000eb20: 6d61 726b 6574 0a20 2020 2020 2020 2062  market.        b
-0000eb30: 6173 6549 6453 7461 7274 203d 2030 0a20  aseIdStart = 0. 
-0000eb40: 2020 2020 2020 2062 6173 6549 6445 6e64         baseIdEnd
-0000eb50: 203d 2033 0a20 2020 2020 2020 2071 756f   = 3.        quo
-0000eb60: 7465 4964 5374 6172 7420 3d20 330a 2020  teIdStart = 3.  
-0000eb70: 2020 2020 2020 7175 6f74 6549 6445 6e64        quoteIdEnd
-0000eb80: 203d 2036 0a20 2020 2020 2020 2069 6620   = 6.        if 
-0000eb90: 6c65 6e28 6964 2920 3d3d 2038 3a0a 2020  len(id) == 8:.  
-0000eba0: 2020 2020 2020 2020 2020 6261 7365 4964            baseId
-0000ebb0: 456e 6420 3d20 340a 2020 2020 2020 2020  End = 4.        
-0000ebc0: 2020 2020 7175 6f74 6549 6453 7461 7274      quoteIdStart
-0000ebd0: 203d 2034 0a20 2020 2020 2020 2020 2020   = 4.           
-0000ebe0: 2071 756f 7465 4964 456e 6420 3d20 380a   quoteIdEnd = 8.
-0000ebf0: 2020 2020 2020 2020 656c 6966 206c 656e          elif len
-0000ec00: 2869 6429 203d 3d20 373a 0a20 2020 2020  (id) == 7:.     
-0000ec10: 2020 2020 2020 2062 6173 6549 6445 6e64         baseIdEnd
-0000ec20: 203d 2034 0a20 2020 2020 2020 2020 2020   = 4.           
-0000ec30: 2071 756f 7465 4964 5374 6172 7420 3d20   quoteIdStart = 
-0000ec40: 340a 2020 2020 2020 2020 2020 2020 7175  4.            qu
-0000ec50: 6f74 6549 6445 6e64 203d 2037 0a20 2020  oteIdEnd = 7.   
-0000ec60: 2020 2020 2062 6173 6549 6420 3d20 6964       baseId = id
-0000ec70: 5b62 6173 6549 6453 7461 7274 3a62 6173  [baseIdStart:bas
-0000ec80: 6549 6445 6e64 5d0a 2020 2020 2020 2020  eIdEnd].        
-0000ec90: 7175 6f74 6549 6420 3d20 6964 5b71 756f  quoteId = id[quo
-0000eca0: 7465 4964 5374 6172 743a 7175 6f74 6549  teIdStart:quoteI
-0000ecb0: 6445 6e64 5d0a 2020 2020 2020 2020 6261  dEnd].        ba
-0000ecc0: 7365 203d 2073 656c 662e 7361 6665 5f63  se = self.safe_c
-0000ecd0: 7572 7265 6e63 795f 636f 6465 2862 6173  urrency_code(bas
-0000ece0: 6549 6429 0a20 2020 2020 2020 2071 756f  eId).        quo
-0000ecf0: 7465 203d 2073 656c 662e 7361 6665 5f63  te = self.safe_c
-0000ed00: 7572 7265 6e63 795f 636f 6465 2871 756f  urrency_code(quo
-0000ed10: 7465 4964 290a 2020 2020 2020 2020 7379  teId).        sy
-0000ed20: 6d62 6f6c 203d 2062 6173 6520 2b20 272f  mbol = base + '/
-0000ed30: 2720 2b20 7175 6f74 650a 2020 2020 2020  ' + quote.      
-0000ed40: 2020 6d61 726b 6574 203d 207b 0a20 2020    market = {.   
-0000ed50: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-0000ed60: 273a 2073 796d 626f 6c2c 0a20 2020 2020  ': symbol,.     
-0000ed70: 2020 2020 2020 2027 6261 7365 273a 2062         'base': b
-0000ed80: 6173 652c 0a20 2020 2020 2020 2020 2020  ase,.           
-0000ed90: 2027 7175 6f74 6527 3a20 7175 6f74 652c   'quote': quote,
-0000eda0: 0a20 2020 2020 2020 2020 2020 2027 6261  .            'ba
-0000edb0: 7365 4964 273a 2062 6173 6549 642c 0a20  seId': baseId,. 
-0000edc0: 2020 2020 2020 2020 2020 2027 7175 6f74             'quot
-0000edd0: 6549 6427 3a20 7175 6f74 6549 642c 0a20  eId': quoteId,. 
-0000ede0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0000edf0: 2073 656c 662e 6f70 7469 6f6e 735b 2764   self.options['d
-0000ee00: 656c 6973 7465 644d 6172 6b65 7473 4279  elistedMarketsBy
-0000ee10: 4964 275d 5b69 645d 203d 206d 6172 6b65  Id'][id] = marke
-0000ee20: 740a 2020 2020 2020 2020 7265 7475 726e  t.        return
-0000ee30: 206d 6172 6b65 740a 0a20 2020 2064 6566   market..    def
-0000ee40: 2070 6172 7365 5f6f 7264 6572 5f73 7461   parse_order_sta
-0000ee50: 7475 7328 7365 6c66 2c20 7374 6174 7573  tus(self, status
-0000ee60: 293a 0a20 2020 2020 2020 2073 7461 7475  ):.        statu
-0000ee70: 7365 7320 3d20 7b0a 2020 2020 2020 2020  ses = {.        
-0000ee80: 2020 2020 2770 656e 6469 6e67 273a 2027      'pending': '
-0000ee90: 6f70 656e 272c 2020 2320 6f72 6465 7220  open',  # order 
-0000eea0: 7065 6e64 696e 6720 626f 6f6b 2065 6e74  pending book ent
-0000eeb0: 7279 0a20 2020 2020 2020 2020 2020 2027  ry.            '
-0000eec0: 6f70 656e 273a 2027 6f70 656e 272c 0a20  open': 'open',. 
-0000eed0: 2020 2020 2020 2020 2020 2027 636c 6f73             'clos
-0000eee0: 6564 273a 2027 636c 6f73 6564 272c 0a20  ed': 'closed',. 
-0000eef0: 2020 2020 2020 2020 2020 2027 6361 6e63             'canc
-0000ef00: 656c 6564 273a 2027 6361 6e63 656c 6564  eled': 'canceled
-0000ef10: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0000ef20: 6578 7069 7265 6427 3a20 2765 7870 6972  expired': 'expir
-0000ef30: 6564 272c 0a20 2020 2020 2020 207d 0a20  ed',.        }. 
-0000ef40: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000ef50: 6c66 2e73 6166 655f 7374 7269 6e67 2873  lf.safe_string(s
-0000ef60: 7461 7475 7365 732c 2073 7461 7475 732c  tatuses, status,
-0000ef70: 2073 7461 7475 7329 0a0a 2020 2020 6465   status)..    de
-0000ef80: 6620 7061 7273 655f 6f72 6465 725f 7479  f parse_order_ty
-0000ef90: 7065 2873 656c 662c 2073 7461 7475 7329  pe(self, status)
-0000efa0: 3a0a 2020 2020 2020 2020 7374 6174 7573  :.        status
-0000efb0: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
-0000efc0: 2020 2027 7461 6b65 2d70 726f 6669 7427     'take-profit'
-0000efd0: 3a20 276d 6172 6b65 7427 2c0a 2020 2020  : 'market',.    
-0000efe0: 2020 2020 2020 2020 2773 746f 702d 6c6f          'stop-lo
-0000eff0: 7373 2d6c 696d 6974 273a 2027 6c69 6d69  ss-limit': 'limi
-0000f000: 7427 2c0a 2020 2020 2020 2020 2020 2020  t',.            
-0000f010: 2773 746f 702d 6c6f 7373 273a 2027 6d61  'stop-loss': 'ma
-0000f020: 726b 6574 272c 0a20 2020 2020 2020 2020  rket',.         
-0000f030: 2020 2027 7461 6b65 2d70 726f 6669 742d     'take-profit-
-0000f040: 6c69 6d69 7427 3a20 276c 696d 6974 272c  limit': 'limit',
-0000f050: 0a20 2020 2020 2020 2020 2020 2027 7472  .            'tr
-0000f060: 6169 6c69 6e67 2d73 746f 702d 6c69 6d69  ailing-stop-limi
-0000f070: 7427 3a20 276c 696d 6974 272c 0a20 2020  t': 'limit',.   
-0000f080: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-0000f090: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-0000f0a0: 7374 7269 6e67 2873 7461 7475 7365 732c  string(statuses,
-0000f0b0: 2073 7461 7475 732c 2073 7461 7475 7329   status, status)
-0000f0c0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0000f0d0: 6f72 6465 7228 7365 6c66 2c20 6f72 6465  order(self, orde
-0000f0e0: 722c 206d 6172 6b65 743a 204d 6172 6b65  r, market: Marke
-0000f0f0: 7420 3d20 4e6f 6e65 2920 2d3e 204f 7264  t = None) -> Ord
-0000f100: 6572 3a0a 2020 2020 2020 2020 230a 2020  er:.        #.  
-0000f110: 2020 2020 2020 2320 6372 6561 7465 4f72        # createOr
-0000f120: 6465 7220 666f 7220 7265 6775 6c61 7220  der for regular 
-0000f130: 6f72 6465 7273 0a20 2020 2020 2020 2023  orders.        #
-0000f140: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-0000f150: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000f160: 2020 2022 6465 7363 7222 3a20 7b6f 7264     "descr": {ord
-0000f170: 6572 3a20 2762 7579 2030 2e30 3231 3030  er: 'buy 0.02100
-0000f180: 3030 3020 4554 4855 5344 5420 4020 6c69  000 ETHUSDT @ li
-0000f190: 6d69 7420 3333 302e 3030 277d 2c0a 2020  mit 330.00'},.  
-0000f1a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000f1b0: 2274 7869 6422 3a20 5b27 4f45 4b56 5632  "txid": ['OEKVV2
-0000f1c0: 2d49 4835 324f 2d54 504c 3647 5a27 5d0a  -IH52O-TPL6GZ'].
-0000f1d0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0000f1e0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0000f1f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000f200: 2020 2274 7869 6422 3a20 5b22 5458 5f49    "txid": ["TX_I
-0000f210: 445f 4845 5245 225d 2c0a 2020 2020 2020  D_HERE"],.      
-0000f220: 2020 2320 2020 2020 2020 2020 2264 6573    #         "des
-0000f230: 6372 223a 207b 226f 7264 6572 223a 2262  cr": {"order":"b
-0000f240: 7579 2030 2e31 3233 3435 3637 3820 4554  uy 0.12345678 ET
-0000f250: 4845 5552 2040 206d 6172 6b65 7422 7d2c  HEUR @ market"},
-0000f260: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0000f270: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0000f280: 2020 2023 0a20 2020 2020 2020 2023 2063     #.        # c
-0000f290: 7265 6174 654f 7264 6572 2066 6f72 2073  reateOrder for s
-0000f2a0: 746f 7020 6f72 6465 7273 0a20 2020 2020  top orders.     
-0000f2b0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0000f2c0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0000f2d0: 2020 2020 2020 2022 7478 6964 223a 5b22         "txid":["
-0000f2e0: 4f53 494c 4e43 2d56 5149 3551 2d37 3735  OSILNC-VQI5Q-775
-0000f2f0: 5a44 5122 5d2c 0a20 2020 2020 2020 2023  ZDQ"],.        #
-0000f300: 2020 2020 2020 2020 2022 6465 7363 7222           "descr"
-0000f310: 3a7b 226f 7264 6572 223a 2273 656c 6c20  :{"order":"sell 
-0000f320: 3136 372e 3238 3030 3236 3736 2041 4441  167.28002676 ADA
-0000f330: 5842 5420 4020 7374 6f70 206c 6f73 7320  XBT @ stop loss 
-0000f340: 302e 3030 3030 3332 3830 202d 3e20 6c69  0.00003280 -> li
-0000f350: 6d69 7420 302e 3030 3030 3332 3132 227d  mit 0.00003212"}
-0000f360: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0000f370: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0000f380: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0000f390: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0000f3a0: 2020 2020 2020 2022 7478 6964 223a 5b22         "txid":["
-0000f3b0: 4f56 484d 4a56 2d42 5a57 3256 2d36 4e5a  OVHMJV-BZW2V-6NZ
-0000f3c0: 4657 4622 5d2c 0a20 2020 2020 2020 2023  FWF"],.        #
-0000f3d0: 2020 2020 2020 2020 2022 6465 7363 7222           "descr"
-0000f3e0: 3a7b 226f 7264 6572 223a 2273 656c 6c20  :{"order":"sell 
-0000f3f0: 302e 3030 3130 3030 3030 2045 5448 5553  0.00100000 ETHUS
-0000f400: 4420 4020 7374 6f70 206c 6f73 7320 3236  D @ stop loss 26
-0000f410: 3737 2e30 3020 2d3e 206c 696d 6974 2032  77.00 -> limit 2
-0000f420: 3537 372e 3030 2077 6974 6820 353a 3120  577.00 with 5:1 
-0000f430: 6c65 7665 7261 6765 227d 0a20 2020 2020  leverage"}.     
-0000f440: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-0000f450: 2020 2023 0a20 2020 2020 2020 2023 2065     #.        # e
-0000f460: 6469 744f 7264 6572 0a20 2020 2020 2020  ditOrder.       
-0000f470: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0000f480: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0000f490: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-0000f4a0: 6f6b 222c 0a20 2020 2020 2020 2023 2020  ok",.        #  
-0000f4b0: 2020 2020 2020 2022 7478 6964 223a 2022         "txid": "
-0000f4c0: 4f41 5732 424f 2d37 5257 454b 2d50 5a59  OAW2BO-7RWEK-PZY
-0000f4d0: 3555 4f22 2c0a 2020 2020 2020 2020 2320  5UO",.        # 
-0000f4e0: 2020 2020 2020 2020 226f 7269 6769 6e61          "origina
-0000f4f0: 6c74 7869 6422 3a20 224f 584c 3653 532d  ltxid": "OXL6SS-
-0000f500: 5550 4e4d 432d 3236 5742 4537 222c 0a20  UPNMC-26WBE7",. 
-0000f510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000f520: 2022 766f 6c75 6d65 223a 2022 302e 3030   "volume": "0.00
-0000f530: 3037 3530 3030 222c 0a20 2020 2020 2020  075000",.       
-0000f540: 2023 2020 2020 2020 2020 2022 7072 6963   #         "pric
-0000f550: 6522 3a20 2231 3335 3030 2e30 222c 0a20  e": "13500.0",. 
-0000f560: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000f570: 2022 6f72 6465 7273 5f63 616e 6365 6c6c   "orders_cancell
-0000f580: 6564 223a 2031 2c0a 2020 2020 2020 2020  ed": 1,.        
-0000f590: 2320 2020 2020 2020 2020 2264 6573 6372  #         "descr
-0000f5a0: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
-0000f5b0: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0000f5c0: 7222 3a20 2262 7579 2030 2e30 3030 3735  r": "buy 0.00075
-0000f5d0: 3030 3020 5842 5455 5344 5420 4020 6c69  000 XBTUSDT @ li
-0000f5e0: 6d69 7420 3133 3530 302e 3022 0a20 2020  mit 13500.0".   
-0000f5f0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0000f600: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-0000f610: 0a20 2020 2020 2020 2023 2020 7773 202d  .        #  ws -
-0000f620: 2063 7265 6174 654f 7264 6572 0a20 2020   createOrder.   
-0000f630: 2020 2020 2023 2020 2020 7b0a 2020 2020       #    {.    
-0000f640: 2020 2020 2320 2020 2020 2020 2022 6465      #        "de
-0000f650: 7363 7222 3a20 2773 656c 6c20 302e 3030  scr": 'sell 0.00
-0000f660: 3031 3030 3030 2058 4254 5553 4454 2040  010000 XBTUSDT @
-0000f670: 206d 6172 6b65 7427 2c0a 2020 2020 2020   market',.      
-0000f680: 2020 2320 2020 2020 2020 2022 6576 656e    #        "even
-0000f690: 7422 3a20 2761 6464 4f72 6465 7253 7461  t": 'addOrderSta
-0000f6a0: 7475 7327 2c0a 2020 2020 2020 2020 2320  tus',.        # 
-0000f6b0: 2020 2020 2020 2022 7265 7169 6422 3a20         "reqid": 
-0000f6c0: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
-0000f6d0: 2020 2020 2273 7461 7475 7322 3a20 276f      "status": 'o
-0000f6e0: 6b27 2c0a 2020 2020 2020 2020 2320 2020  k',.        #   
-0000f6f0: 2020 2020 2022 7478 6964 223a 2027 4f41       "txid": 'OA
-0000f700: 5658 5a48 2d58 4945 3534 2d4a 4359 5944  VXZH-XIE54-JCYYD
-0000f710: 4727 0a20 2020 2020 2020 2023 2020 2020  G'.        #    
-0000f720: 7d0a 2020 2020 2020 2020 2320 2077 7320  }.        #  ws 
-0000f730: 2d20 6564 6974 4f72 6465 720a 2020 2020  - editOrder.    
-0000f740: 2020 2020 2320 2020 207b 0a20 2020 2020      #    {.     
-0000f750: 2020 2023 2020 2020 2020 2020 2264 6573     #        "des
-0000f760: 6372 223a 2022 6f72 6465 7220 6564 6974  cr": "order edit
-0000f770: 6564 2070 7269 6365 203d 2039 3030 302e  ed price = 9000.
-0000f780: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-0000f790: 2020 2023 2020 2020 2020 2020 2265 7665     #        "eve
-0000f7a0: 6e74 223a 2022 6564 6974 4f72 6465 7253  nt": "editOrderS
-0000f7b0: 7461 7475 7322 2c0a 2020 2020 2020 2020  tatus",.        
-0000f7c0: 2320 2020 2020 2020 2022 6f72 6967 696e  #        "origin
-0000f7d0: 616c 7478 6964 223a 2022 4f36 354b 5a57  altxid": "O65KZW
-0000f7e0: 2d4a 3441 5733 2d56 4653 3734 4122 2c0a  -J4AW3-VFS74A",.
-0000f7f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000f800: 2022 7265 7169 6422 3a20 332c 0a20 2020   "reqid": 3,.   
-0000f810: 2020 2020 2023 2020 2020 2020 2020 2273       #        "s
-0000f820: 7461 7475 7322 3a20 226f 6b22 2c0a 2020  tatus": "ok",.  
-0000f830: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
-0000f840: 7478 6964 223a 2022 4f54 4936 3732 2d48  txid": "OTI672-H
-0000f850: 4a46 414f 2d58 4f49 5050 4b22 0a20 2020  JFAO-XOIPPK".   
-0000f860: 2020 2020 2023 2020 2020 7d0a 2020 2020       #    }.    
-0000f870: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0000f880: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0000f890: 2020 2265 7272 6f72 223a 205b 5d2c 0a20    "error": [],. 
-0000f8a0: 2020 2020 2020 2023 2020 2020 2020 2272         #      "r
-0000f8b0: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-0000f8c0: 2020 2320 2020 2020 2020 2020 2022 6f70    #          "op
-0000f8d0: 656e 223a 207b 0a20 2020 2020 2020 2023  en": {.        #
-0000f8e0: 2020 2020 2020 2020 2020 2020 2020 224f                "O
-0000f8f0: 5856 5053 552d 5137 3236 462d 4c33 5344  XVPSU-Q726F-L3SD
-0000f900: 4550 223a 207b 0a20 2020 2020 2020 2023  EP": {.        #
-0000f910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f920: 2020 2272 6566 6964 223a 206e 756c 6c2c    "refid": null,
-0000f930: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000f940: 2020 2020 2020 2020 2020 2020 2275 7365              "use
-0000f950: 7272 6566 223a 2030 2c0a 2020 2020 2020  rref": 0,.      
-0000f960: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000f970: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-0000f980: 6f70 656e 222c 0a20 2020 2020 2020 2023  open",.        #
-0000f990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f9a0: 2020 226f 7065 6e74 6d22 3a20 3137 3036    "opentm": 1706
-0000f9b0: 3839 3333 3637 2e34 3635 3636 3439 2c0a  893367.4656649,.
-0000f9c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000f9d0: 2020 2020 2020 2020 2020 2022 7374 6172             "star
-0000f9e0: 7474 6d22 3a20 302c 0a20 2020 2020 2020  ttm": 0,.       
-0000f9f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fa00: 2020 2020 2265 7870 6972 6574 6d22 3a20      "expiretm": 
-0000fa10: 302c 0a20 2020 2020 2020 2023 2020 2020  0,.        #    
-0000fa20: 2020 2020 2020 2020 2020 2020 2020 2264                "d
-0000fa30: 6573 6372 223a 207b 0a20 2020 2020 2020  escr": {.       
-0000fa40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fa50: 2020 2020 2020 2020 2270 6169 7222 3a20          "pair": 
-0000fa60: 2258 5250 4555 5222 2c0a 2020 2020 2020  "XRPEUR",.      
-0000fa70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000fa80: 2020 2020 2020 2020 2022 7479 7065 223a           "type":
-0000fa90: 2022 7365 6c6c 222c 0a20 2020 2020 2020   "sell",.       
-0000faa0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fab0: 2020 2020 2020 2020 226f 7264 6572 7479          "orderty
-0000fac0: 7065 223a 2022 7472 6169 6c69 6e67 2d73  pe": "trailing-s
-0000fad0: 746f 7022 2c0a 2020 2020 2020 2020 2320  top",.        # 
+0000c050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c060: 2020 2020 2262 616c 616e 6365 223a 2022      "balance": "
+0000c070: 302e 3030 3030 3035 3130 3030 2220 2020  0.0000051000"   
+0000c080: 2020 2020 2020 2020 7d7d 7d0a 2020 2020          }}}.    
+0000c090: 2020 2020 7265 7375 6c74 203d 2072 6573      result = res
+0000c0a0: 706f 6e73 655b 2772 6573 756c 7427 5d0a  ponse['result'].
+0000c0b0: 2020 2020 2020 2020 6b65 7973 203d 206c          keys = l
+0000c0c0: 6973 7428 7265 7375 6c74 2e6b 6579 7328  ist(result.keys(
+0000c0d0: 2929 0a20 2020 2020 2020 2069 7465 6d73  )).        items
+0000c0e0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
+0000c0f0: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
+0000c100: 6c65 6e28 6b65 7973 2929 3a0a 2020 2020  len(keys)):.    
+0000c110: 2020 2020 2020 2020 6b65 7920 3d20 6b65          key = ke
+0000c120: 7973 5b69 5d0a 2020 2020 2020 2020 2020  ys[i].          
+0000c130: 2020 7661 6c75 6520 3d20 7265 7375 6c74    value = result
+0000c140: 5b6b 6579 5d0a 2020 2020 2020 2020 2020  [key].          
+0000c150: 2020 7661 6c75 655b 2769 6427 5d20 3d20    value['id'] = 
+0000c160: 6b65 790a 2020 2020 2020 2020 2020 2020  key.            
+0000c170: 6974 656d 732e 6170 7065 6e64 2876 616c  items.append(val
+0000c180: 7565 290a 2020 2020 2020 2020 7265 7475  ue).        retu
+0000c190: 726e 2073 656c 662e 7061 7273 655f 6c65  rn self.parse_le
+0000c1a0: 6467 6572 2869 7465 6d73 290a 0a20 2020  dger(items)..   
+0000c1b0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+0000c1c0: 5f6c 6564 6765 725f 656e 7472 7928 7365  _ledger_entry(se
+0000c1d0: 6c66 2c20 6964 3a20 7374 722c 2063 6f64  lf, id: str, cod
+0000c1e0: 653a 2053 7472 203d 204e 6f6e 652c 2070  e: Str = None, p
+0000c1f0: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0000c200: 2020 2069 7465 6d73 203d 2061 7761 6974     items = await
+0000c210: 2073 656c 662e 6665 7463 685f 6c65 6467   self.fetch_ledg
+0000c220: 6572 5f65 6e74 7269 6573 5f62 795f 6964  er_entries_by_id
+0000c230: 7328 5b69 645d 2c20 636f 6465 2c20 7061  s([id], code, pa
+0000c240: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+0000c250: 7475 726e 2069 7465 6d73 5b30 5d0a 0a20  turn items[0].. 
+0000c260: 2020 2064 6566 2070 6172 7365 5f74 7261     def parse_tra
+0000c270: 6465 2873 656c 662c 2074 7261 6465 2c20  de(self, trade, 
+0000c280: 6d61 726b 6574 3a20 4d61 726b 6574 203d  market: Market =
+0000c290: 204e 6f6e 6529 202d 3e20 5472 6164 653a   None) -> Trade:
+0000c2a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0000c2b0: 2020 2023 2066 6574 6368 5472 6164 6573     # fetchTrades
+0000c2c0: 2870 7562 6c69 6329 0a20 2020 2020 2020  (public).       
+0000c2d0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0000c2e0: 205b 0a20 2020 2020 2020 2023 2020 2020   [.        #    
+0000c2f0: 2020 2020 2022 302e 3033 3233 3130 222c       "0.032310",
+0000c300: 2020 2320 7072 6963 650a 2020 2020 2020    # price.      
+0000c310: 2020 2320 2020 2020 2020 2020 2234 2e32    #         "4.2
+0000c320: 3831 3639 3433 3422 2c20 2023 2061 6d6f  8169434",  # amo
+0000c330: 756e 740a 2020 2020 2020 2020 2320 2020  unt.        #   
+0000c340: 2020 2020 2020 3135 3431 3339 3037 3932        1541390792
+0000c350: 2e37 3633 2c20 2023 2074 696d 6573 7461  .763,  # timesta
+0000c360: 6d70 0a20 2020 2020 2020 2023 2020 2020  mp.        #    
+0000c370: 2020 2020 2022 7322 2c20 2023 2073 656c       "s",  # sel
+0000c380: 6c20 6f72 2062 7579 0a20 2020 2020 2020  l or buy.       
+0000c390: 2023 2020 2020 2020 2020 2022 6c22 2c20   #         "l", 
+0000c3a0: 2023 206c 696d 6974 206f 7220 6d61 726b   # limit or mark
+0000c3b0: 6574 0a20 2020 2020 2020 2023 2020 2020  et.        #    
+0000c3c0: 2020 2020 2022 220a 2020 2020 2020 2020       "".        
+0000c3d0: 2320 2020 2020 5d0a 2020 2020 2020 2020  #     ].        
+0000c3e0: 230a 2020 2020 2020 2020 2320 6665 7463  #.        # fetc
+0000c3f0: 684f 7264 6572 5472 6164 6573 2870 7269  hOrderTrades(pri
+0000c400: 7661 7465 290a 2020 2020 2020 2020 230a  vate).        #.
+0000c410: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0000c420: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000c430: 2020 2269 6422 3a20 2754 494d 4952 472d    "id": 'TIMIRG-
+0000c440: 5755 4e4e 452d 5252 4a36 4754 272c 2020  WUNNE-RRJ6GT',  
+0000c450: 2320 696e 6a65 6374 6564 2066 726f 6d20  # injected from 
+0000c460: 6f75 7473 6964 650a 2020 2020 2020 2020  outside.        
+0000c470: 2320 2020 2020 2020 2020 226f 7264 6572  #         "order
+0000c480: 7478 6964 223a 2027 4f51 5250 4e32 2d4c  txid": 'OQRPN2-L
+0000c490: 5248 4659 2d48 4946 4137 4427 2c0a 2020  RHFY-HIFA7D',.  
+0000c4a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000c4b0: 2270 6f73 7478 6964 223a 2027 544b 4832  "postxid": 'TKH2
+0000c4c0: 5345 2d4d 3749 4635 2d43 4649 374c 5427  SE-M7IF5-CFI7LT'
+0000c4d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000c4e0: 2020 2020 2270 6169 7222 3a20 2755 5344      "pair": 'USD
+0000c4f0: 4355 5344 5427 2c0a 2020 2020 2020 2020  CUSDT',.        
+0000c500: 2320 2020 2020 2020 2020 2274 696d 6522  #         "time"
+0000c510: 3a20 3135 3836 3334 3030 3836 2e34 3537  : 1586340086.457
+0000c520: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000c530: 2020 2020 2274 7970 6522 3a20 2773 656c      "type": 'sel
+0000c540: 6c27 2c0a 2020 2020 2020 2020 2320 2020  l',.        #   
+0000c550: 2020 2020 2020 226f 7264 6572 7479 7065        "ordertype
+0000c560: 223a 2027 6d61 726b 6574 272c 0a20 2020  ": 'market',.   
+0000c570: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000c580: 7072 6963 6522 3a20 2730 2e39 3938 3630  price": '0.99860
+0000c590: 3030 3027 2c0a 2020 2020 2020 2020 2320  000',.        # 
+0000c5a0: 2020 2020 2020 2020 2263 6f73 7422 3a20          "cost": 
+0000c5b0: 2732 322e 3136 3839 3230 3031 272c 0a20  '22.16892001',. 
+0000c5c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000c5d0: 2022 6665 6522 3a20 2730 2e30 3434 3333   "fee": '0.04433
+0000c5e0: 3738 3427 2c0a 2020 2020 2020 2020 2320  784',.        # 
+0000c5f0: 2020 2020 2020 2020 2276 6f6c 223a 2027          "vol": '
+0000c600: 3232 2e32 3030 3030 3030 3027 2c0a 2020  22.20000000',.  
+0000c610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000c620: 226d 6172 6769 6e22 3a20 2730 2e30 3030  "margin": '0.000
+0000c630: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
+0000c640: 2320 2020 2020 2020 2020 226d 6973 6322  #         "misc"
+0000c650: 3a20 2727 0a20 2020 2020 2020 2023 2020  : ''.        #  
+0000c660: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0000c670: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0000c680: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0000c690: 7369 6465 203d 204e 6f6e 650a 2020 2020  side = None.    
+0000c6a0: 2020 2020 7479 7065 203d 204e 6f6e 650a      type = None.
+0000c6b0: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
+0000c6c0: 4e6f 6e65 0a20 2020 2020 2020 2061 6d6f  None.        amo
+0000c6d0: 756e 7420 3d20 4e6f 6e65 0a20 2020 2020  unt = None.     
+0000c6e0: 2020 2069 6420 3d20 4e6f 6e65 0a20 2020     id = None.   
+0000c6f0: 2020 2020 206f 7264 6572 4964 203d 204e       orderId = N
+0000c700: 6f6e 650a 2020 2020 2020 2020 6665 6520  one.        fee 
+0000c710: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
+0000c720: 796d 626f 6c20 3d20 4e6f 6e65 0a20 2020  ymbol = None.   
+0000c730: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+0000c740: 6365 2874 7261 6465 2c20 6c69 7374 293a  ce(trade, list):
+0000c750: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+0000c760: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
+0000c770: 6665 5f74 696d 6573 7461 6d70 2874 7261  fe_timestamp(tra
+0000c780: 6465 2c20 3229 0a20 2020 2020 2020 2020  de, 2).         
+0000c790: 2020 2073 6964 6520 3d20 2773 656c 6c27     side = 'sell'
+0000c7a0: 2069 6620 2874 7261 6465 5b33 5d20 3d3d   if (trade[3] ==
+0000c7b0: 2027 7327 2920 656c 7365 2027 6275 7927   's') else 'buy'
+0000c7c0: 0a20 2020 2020 2020 2020 2020 2074 7970  .            typ
+0000c7d0: 6520 3d20 276c 696d 6974 2720 6966 2028  e = 'limit' if (
+0000c7e0: 7472 6164 655b 345d 203d 3d20 276c 2729  trade[4] == 'l')
+0000c7f0: 2065 6c73 6520 276d 6172 6b65 7427 0a20   else 'market'. 
+0000c800: 2020 2020 2020 2020 2020 2070 7269 6365             price
+0000c810: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0000c820: 696e 6728 7472 6164 652c 2030 290a 2020  ing(trade, 0).  
+0000c830: 2020 2020 2020 2020 2020 616d 6f75 6e74            amount
+0000c840: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0000c850: 696e 6728 7472 6164 652c 2031 290a 2020  ing(trade, 1).  
+0000c860: 2020 2020 2020 2020 2020 7472 6164 654c            tradeL
+0000c870: 656e 6774 6820 3d20 6c65 6e28 7472 6164  ength = len(trad
+0000c880: 6529 0a20 2020 2020 2020 2020 2020 2069  e).            i
+0000c890: 6620 7472 6164 654c 656e 6774 6820 3e20  f tradeLength > 
+0000c8a0: 363a 0a20 2020 2020 2020 2020 2020 2020  6:.             
+0000c8b0: 2020 2069 6420 3d20 7365 6c66 2e73 6166     id = self.saf
+0000c8c0: 655f 7374 7269 6e67 2874 7261 6465 2c20  e_string(trade, 
+0000c8d0: 3629 2020 2320 6172 7469 6669 6369 616c  6)  # artificial
+0000c8e0: 6c79 2061 6464 6564 2020 2331 3739 340a  ly added  #1794.
+0000c8f0: 2020 2020 2020 2020 656c 6966 2069 7369          elif isi
+0000c900: 6e73 7461 6e63 6528 7472 6164 652c 2073  nstance(trade, s
+0000c910: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+0000c920: 2069 6420 3d20 7472 6164 650a 2020 2020   id = trade.    
+0000c930: 2020 2020 656c 6966 2027 6f72 6465 7274      elif 'ordert
+0000c940: 7869 6427 2069 6e20 7472 6164 653a 0a20  xid' in trade:. 
+0000c950: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+0000c960: 7449 6420 3d20 7365 6c66 2e73 6166 655f  tId = self.safe_
+0000c970: 7374 7269 6e67 2874 7261 6465 2c20 2770  string(trade, 'p
+0000c980: 6169 7227 290a 2020 2020 2020 2020 2020  air').          
+0000c990: 2020 666f 756e 644d 6172 6b65 7420 3d20    foundMarket = 
+0000c9a0: 7365 6c66 2e66 696e 645f 6d61 726b 6574  self.find_market
+0000c9b0: 5f62 795f 616c 746e 616d 655f 6f72 5f69  _by_altname_or_i
+0000c9c0: 6428 6d61 726b 6574 4964 290a 2020 2020  d(marketId).    
+0000c9d0: 2020 2020 2020 2020 6966 2066 6f75 6e64          if found
+0000c9e0: 4d61 726b 6574 2069 7320 6e6f 7420 4e6f  Market is not No
+0000c9f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000ca00: 2020 2020 6d61 726b 6574 203d 2066 6f75      market = fou
+0000ca10: 6e64 4d61 726b 6574 0a20 2020 2020 2020  ndMarket.       
+0000ca20: 2020 2020 2065 6c69 6620 6d61 726b 6574       elif market
+0000ca30: 4964 2069 7320 6e6f 7420 4e6f 6e65 3a0a  Id is not None:.
+0000ca40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ca50: 2320 6465 6c69 7374 6564 206d 6172 6b65  # delisted marke
+0000ca60: 7420 6964 7320 676f 2068 6572 650a 2020  t ids go here.  
+0000ca70: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0000ca80: 726b 6574 203d 2073 656c 662e 6765 745f  rket = self.get_
+0000ca90: 6465 6c69 7374 6564 5f6d 6172 6b65 745f  delisted_market_
+0000caa0: 6279 5f69 6428 6d61 726b 6574 4964 290a  by_id(marketId).
+0000cab0: 2020 2020 2020 2020 2020 2020 6f72 6465              orde
+0000cac0: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
+0000cad0: 7374 7269 6e67 2874 7261 6465 2c20 276f  string(trade, 'o
+0000cae0: 7264 6572 7478 6964 2729 0a20 2020 2020  rdertxid').     
+0000caf0: 2020 2020 2020 2069 6420 3d20 7365 6c66         id = self
+0000cb00: 2e73 6166 655f 7374 7269 6e67 5f32 2874  .safe_string_2(t
+0000cb10: 7261 6465 2c20 2769 6427 2c20 2770 6f73  rade, 'id', 'pos
+0000cb20: 7478 6964 2729 0a20 2020 2020 2020 2020  txid').         
+0000cb30: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
+0000cb40: 656c 662e 7361 6665 5f74 696d 6573 7461  elf.safe_timesta
+0000cb50: 6d70 2874 7261 6465 2c20 2774 696d 6527  mp(trade, 'time'
+0000cb60: 290a 2020 2020 2020 2020 2020 2020 7369  ).            si
+0000cb70: 6465 203d 2073 656c 662e 7361 6665 5f73  de = self.safe_s
+0000cb80: 7472 696e 6728 7472 6164 652c 2027 7479  tring(trade, 'ty
+0000cb90: 7065 2729 0a20 2020 2020 2020 2020 2020  pe').           
+0000cba0: 2074 7970 6520 3d20 7365 6c66 2e73 6166   type = self.saf
+0000cbb0: 655f 7374 7269 6e67 2874 7261 6465 2c20  e_string(trade, 
+0000cbc0: 276f 7264 6572 7479 7065 2729 0a20 2020  'ordertype').   
+0000cbd0: 2020 2020 2020 2020 2070 7269 6365 203d           price =
+0000cbe0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0000cbf0: 6728 7472 6164 652c 2027 7072 6963 6527  g(trade, 'price'
+0000cc00: 290a 2020 2020 2020 2020 2020 2020 616d  ).            am
+0000cc10: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
+0000cc20: 5f73 7472 696e 6728 7472 6164 652c 2027  _string(trade, '
+0000cc30: 766f 6c27 290a 2020 2020 2020 2020 2020  vol').          
+0000cc40: 2020 6966 2027 6665 6527 2069 6e20 7472    if 'fee' in tr
+0000cc50: 6164 653a 0a20 2020 2020 2020 2020 2020  ade:.           
+0000cc60: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
+0000cc70: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0000cc80: 2020 2020 2069 6620 6d61 726b 6574 2069       if market i
+0000cc90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ccb0: 6375 7272 656e 6379 203d 206d 6172 6b65  currency = marke
+0000ccc0: 745b 2771 756f 7465 275d 0a20 2020 2020  t['quote'].     
+0000ccd0: 2020 2020 2020 2020 2020 2066 6565 203d             fee =
+0000cce0: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+0000ccf0: 2020 2020 2020 2027 636f 7374 273a 2073         'cost': s
+0000cd00: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0000cd10: 7472 6164 652c 2027 6665 6527 292c 0a20  trade, 'fee'),. 
+0000cd20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cd30: 2020 2027 6375 7272 656e 6379 273a 2063     'currency': c
+0000cd40: 7572 7265 6e63 792c 0a20 2020 2020 2020  urrency,.       
+0000cd50: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000cd60: 2020 2069 6620 6d61 726b 6574 2069 7320     if market is 
+0000cd70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000cd80: 2020 2020 2020 7379 6d62 6f6c 203d 206d        symbol = m
+0000cd90: 6172 6b65 745b 2773 796d 626f 6c27 5d0a  arket['symbol'].
+0000cda0: 2020 2020 2020 2020 636f 7374 203d 2073          cost = s
+0000cdb0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0000cdc0: 7472 6164 652c 2027 636f 7374 2729 0a20  trade, 'cost'). 
+0000cdd0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000cde0: 6c66 2e73 6166 655f 7472 6164 6528 7b0a  lf.safe_trade({.
+0000cdf0: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
+0000ce00: 3a20 6964 2c0a 2020 2020 2020 2020 2020  : id,.          
+0000ce10: 2020 276f 7264 6572 273a 206f 7264 6572    'order': order
+0000ce20: 4964 2c0a 2020 2020 2020 2020 2020 2020  Id,.            
+0000ce30: 2769 6e66 6f27 3a20 7472 6164 652c 0a20  'info': trade,. 
+0000ce40: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0000ce50: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0000ce60: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0000ce70: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0000ce80: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0000ce90: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0000cea0: 2773 796d 626f 6c27 3a20 7379 6d62 6f6c  'symbol': symbol
+0000ceb0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0000cec0: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
+0000ced0: 2020 2020 2020 2020 2773 6964 6527 3a20          'side': 
+0000cee0: 7369 6465 2c0a 2020 2020 2020 2020 2020  side,.          
+0000cef0: 2020 2774 616b 6572 4f72 4d61 6b65 7227    'takerOrMaker'
+0000cf00: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+0000cf10: 2020 2020 2770 7269 6365 273a 2070 7269      'price': pri
+0000cf20: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
+0000cf30: 2761 6d6f 756e 7427 3a20 616d 6f75 6e74  'amount': amount
+0000cf40: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
+0000cf50: 6f73 7427 3a20 636f 7374 2c0a 2020 2020  ost': cost,.    
+0000cf60: 2020 2020 2020 2020 2766 6565 273a 2066          'fee': f
+0000cf70: 6565 2c0a 2020 2020 2020 2020 7d2c 206d  ee,.        }, m
+0000cf80: 6172 6b65 7429 0a0a 2020 2020 6173 796e  arket)..    asyn
+0000cf90: 6320 6465 6620 6665 7463 685f 7472 6164  c def fetch_trad
+0000cfa0: 6573 2873 656c 662c 2073 796d 626f 6c3a  es(self, symbol:
+0000cfb0: 2073 7472 2c20 7369 6e63 653a 2049 6e74   str, since: Int
+0000cfc0: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+0000cfd0: 496e 7420 3d20 4e6f 6e65 2c20 7061 7261  Int = None, para
+0000cfe0: 6d73 3d7b 7d29 202d 3e20 4c69 7374 5b54  ms={}) -> List[T
+0000cff0: 7261 6465 5d3a 0a20 2020 2020 2020 2022  rade]:.        "
+0000d000: 2222 0a20 2020 2020 2020 2067 6574 2074  "".        get t
+0000d010: 6865 206c 6973 7420 6f66 206d 6f73 7420  he list of most 
+0000d020: 7265 6365 6e74 2074 7261 6465 7320 666f  recent trades fo
+0000d030: 7220 6120 7061 7274 6963 756c 6172 2073  r a particular s
+0000d040: 796d 626f 6c0a 2020 2020 2020 2020 3a73  ymbol.        :s
+0000d050: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
+0000d060: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
+0000d070: 2f23 7461 672f 5370 6f74 2d4d 6172 6b65  /#tag/Spot-Marke
+0000d080: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
+0000d090: 2f67 6574 5265 6365 6e74 5472 6164 6573  /getRecentTrades
+0000d0a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000d0b0: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+0000d0c0: 6965 6420 7379 6d62 6f6c 206f 6620 7468  ied symbol of th
+0000d0d0: 6520 6d61 726b 6574 2074 6f20 6665 7463  e market to fetc
+0000d0e0: 6820 7472 6164 6573 2066 6f72 0a20 2020  h trades for.   
+0000d0f0: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
+0000d100: 5b73 696e 6365 5d3a 2074 696d 6573 7461  [since]: timesta
+0000d110: 6d70 2069 6e20 6d73 206f 6620 7468 6520  mp in ms of the 
+0000d120: 6561 726c 6965 7374 2074 7261 6465 2074  earliest trade t
+0000d130: 6f20 6665 7463 680a 2020 2020 2020 2020  o fetch.        
+0000d140: 3a70 6172 616d 2069 6e74 205b 6c69 6d69  :param int [limi
+0000d150: 745d 3a20 7468 6520 6d61 7869 6d75 6d20  t]: the maximum 
+0000d160: 616d 6f75 6e74 206f 6620 7472 6164 6573  amount of trades
+0000d170: 2074 6f20 6665 7463 680a 2020 2020 2020   to fetch.      
+0000d180: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
+0000d190: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
+0000d1a0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0000d1b0: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
+0000d1c0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
+0000d1d0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0000d1e0: 5472 6164 655b 5d3a 2061 206c 6973 7420  Trade[]: a list 
+0000d1f0: 6f66 2060 7472 6164 6520 7374 7275 6374  of `trade struct
+0000d200: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+0000d210: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+0000d220: 643d 7075 626c 6963 2d74 7261 6465 733e  d=public-trades>
+0000d230: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0000d240: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+0000d250: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0000d260: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0000d270: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
+0000d280: 626f 6c29 0a20 2020 2020 2020 2069 6420  bol).        id 
+0000d290: 3d20 6d61 726b 6574 5b27 6964 275d 0a20  = market['id']. 
+0000d2a0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0000d2b0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0000d2c0: 7061 6972 273a 2069 642c 0a20 2020 2020  pair': id,.     
+0000d2d0: 2020 207d 0a20 2020 2020 2020 2023 2068     }.        # h
+0000d2e0: 7474 7073 3a2f 2f73 7570 706f 7274 2e6b  ttps://support.k
+0000d2f0: 7261 6b65 6e2e 636f 6d2f 6863 2f65 6e2d  raken.com/hc/en-
+0000d300: 7573 2f61 7274 6963 6c65 732f 3231 3831  us/articles/2181
+0000d310: 3938 3139 372d 486f 772d 746f 2d70 756c  98197-How-to-pul
+0000d320: 6c2d 616c 6c2d 7472 6164 652d 6461 7461  l-all-trade-data
+0000d330: 2d75 7369 6e67 2d74 6865 2d4b 7261 6b65  -using-the-Krake
+0000d340: 6e2d 5245 5354 2d41 5049 0a20 2020 2020  n-REST-API.     
+0000d350: 2020 2023 2068 7474 7073 3a2f 2f67 6974     # https://git
+0000d360: 6875 622e 636f 6d2f 6363 7874 2f63 6378  hub.com/ccxt/ccx
+0000d370: 742f 6973 7375 6573 2f35 3637 370a 2020  t/issues/5677.  
+0000d380: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
+0000d390: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000d3a0: 2020 2020 2020 2020 2320 7068 7020 646f          # php do
+0000d3b0: 6573 206e 6f74 2066 6f72 6d61 7420 6974  es not format it
+0000d3c0: 2070 726f 7065 726c 790a 2020 2020 2020   properly.      
+0000d3d0: 2020 2020 2020 2320 7468 6572 6566 6f72        # therefor
+0000d3e0: 6520 7765 2075 7365 2073 7472 696e 6720  e we use string 
+0000d3f0: 636f 6e63 6174 656e 6174 696f 6e20 6865  concatenation he
+0000d400: 7265 0a20 2020 2020 2020 2020 2020 2072  re.            r
+0000d410: 6571 7565 7374 5b27 7369 6e63 6527 5d20  equest['since'] 
+0000d420: 3d20 7369 6e63 6520 2a20 3165 360a 2020  = since * 1e6.  
+0000d430: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0000d440: 745b 2773 696e 6365 275d 203d 2073 7472  t['since'] = str
+0000d450: 2873 696e 6365 2920 2b20 2730 3030 3030  (since) + '00000
+0000d460: 3027 2020 2320 6578 7065 6374 6564 2074  0'  # expected t
+0000d470: 6f20 6265 2069 6e20 6e61 6e6f 7365 636f  o be in nanoseco
+0000d480: 6e64 730a 2020 2020 2020 2020 6966 206c  nds.        if l
+0000d490: 696d 6974 2069 7320 6e6f 7420 4e6f 6e65  imit is not None
+0000d4a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000d4b0: 7175 6573 745b 2763 6f75 6e74 275d 203d  quest['count'] =
+0000d4c0: 206c 696d 6974 0a20 2020 2020 2020 2072   limit.        r
+0000d4d0: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
+0000d4e0: 7365 6c66 2e70 7562 6c69 6347 6574 5472  self.publicGetTr
+0000d4f0: 6164 6573 2873 656c 662e 6578 7465 6e64  ades(self.extend
+0000d500: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+0000d510: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+0000d520: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+0000d530: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000d540: 6572 726f 7222 3a20 5b5d 2c0a 2020 2020  error": [],.    
+0000d550: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+0000d560: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
+0000d570: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000d580: 2258 4554 4858 5842 5422 3a20 5b0a 2020  "XETHXXBT": [.  
+0000d590: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000d5a0: 2020 2020 2020 2020 5b22 302e 3033 3233          ["0.0323
+0000d5b0: 3130 222c 2234 2e32 3831 3639 3433 3422  10","4.28169434"
+0000d5c0: 2c31 3534 3133 3930 3739 322e 3736 332c  ,1541390792.763,
+0000d5d0: 2273 222c 226c 222c 2222 5d0a 2020 2020  "s","l",""].    
+0000d5e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000d5f0: 2020 5d2c 0a20 2020 2020 2020 2023 2020    ],.        #  
+0000d600: 2020 2020 2020 2020 2020 2022 6c61 7374             "last
+0000d610: 223a 2022 3135 3431 3433 3934 3231 3230  ": "154143942120
+0000d620: 3036 3738 3635 3722 0a20 2020 2020 2020  0678657".       
+0000d630: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
+0000d640: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0000d650: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+0000d660: 6573 756c 7420 3d20 7265 7370 6f6e 7365  esult = response
+0000d670: 5b27 7265 7375 6c74 275d 0a20 2020 2020  ['result'].     
+0000d680: 2020 2074 7261 6465 7320 3d20 7265 7375     trades = resu
+0000d690: 6c74 5b69 645d 0a20 2020 2020 2020 2023  lt[id].        #
+0000d6a0: 2074 7261 6465 7320 6973 2061 2073 6f72   trades is a sor
+0000d6b0: 7465 6420 6172 7261 793a 206c 6173 7428  ted array: last(
+0000d6c0: 6d6f 7374 2072 6563 656e 7420 7472 6164  most recent trad
+0000d6d0: 6529 2067 6f65 7320 6c61 7374 0a20 2020  e) goes last.   
+0000d6e0: 2020 2020 206c 656e 6774 6820 3d20 6c65       length = le
+0000d6f0: 6e28 7472 6164 6573 290a 2020 2020 2020  n(trades).      
+0000d700: 2020 6966 206c 656e 6774 6820 3c3d 2030    if length <= 0
+0000d710: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000d720: 7475 726e 205b 5d0a 2020 2020 2020 2020  turn [].        
+0000d730: 6c61 7374 5472 6164 6520 3d20 7472 6164  lastTrade = trad
+0000d740: 6573 5b6c 656e 6774 6820 2d20 315d 0a20  es[length - 1]. 
+0000d750: 2020 2020 2020 206c 6173 7454 7261 6465         lastTrade
+0000d760: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
+0000d770: 7472 696e 6728 7265 7375 6c74 2c20 276c  tring(result, 'l
+0000d780: 6173 7427 290a 2020 2020 2020 2020 6c61  ast').        la
+0000d790: 7374 5472 6164 652e 6170 7065 6e64 286c  stTrade.append(l
+0000d7a0: 6173 7454 7261 6465 4964 290a 2020 2020  astTradeId).    
+0000d7b0: 2020 2020 7472 6164 6573 5b6c 656e 6774      trades[lengt
+0000d7c0: 6820 2d20 315d 203d 206c 6173 7454 7261  h - 1] = lastTra
+0000d7d0: 6465 0a20 2020 2020 2020 2072 6574 7572  de.        retur
+0000d7e0: 6e20 7365 6c66 2e70 6172 7365 5f74 7261  n self.parse_tra
+0000d7f0: 6465 7328 7472 6164 6573 2c20 6d61 726b  des(trades, mark
+0000d800: 6574 2c20 7369 6e63 652c 206c 696d 6974  et, since, limit
+0000d810: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
+0000d820: 5f62 616c 616e 6365 2873 656c 662c 2072  _balance(self, r
+0000d830: 6573 706f 6e73 6529 202d 3e20 4261 6c61  esponse) -> Bala
+0000d840: 6e63 6573 3a0a 2020 2020 2020 2020 6261  nces:.        ba
+0000d850: 6c61 6e63 6573 203d 2073 656c 662e 7361  lances = self.sa
+0000d860: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+0000d870: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0000d880: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
+0000d890: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0000d8a0: 2769 6e66 6f27 3a20 7265 7370 6f6e 7365  'info': response
+0000d8b0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0000d8c0: 696d 6573 7461 6d70 273a 204e 6f6e 652c  imestamp': None,
+0000d8d0: 0a20 2020 2020 2020 2020 2020 2027 6461  .            'da
+0000d8e0: 7465 7469 6d65 273a 204e 6f6e 652c 0a20  tetime': None,. 
+0000d8f0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0000d900: 2063 7572 7265 6e63 7949 6473 203d 206c   currencyIds = l
+0000d910: 6973 7428 6261 6c61 6e63 6573 2e6b 6579  ist(balances.key
+0000d920: 7328 2929 0a20 2020 2020 2020 2066 6f72  s()).        for
+0000d930: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+0000d940: 656e 2863 7572 7265 6e63 7949 6473 2929  en(currencyIds))
+0000d950: 3a0a 2020 2020 2020 2020 2020 2020 6375  :.            cu
+0000d960: 7272 656e 6379 4964 203d 2063 7572 7265  rrencyId = curre
+0000d970: 6e63 7949 6473 5b69 5d0a 2020 2020 2020  ncyIds[i].      
+0000d980: 2020 2020 2020 636f 6465 203d 2073 656c        code = sel
+0000d990: 662e 7361 6665 5f63 7572 7265 6e63 795f  f.safe_currency_
+0000d9a0: 636f 6465 2863 7572 7265 6e63 7949 6429  code(currencyId)
+0000d9b0: 0a20 2020 2020 2020 2020 2020 2062 616c  .            bal
+0000d9c0: 616e 6365 203d 2073 656c 662e 7361 6665  ance = self.safe
+0000d9d0: 5f76 616c 7565 2862 616c 616e 6365 732c  _value(balances,
+0000d9e0: 2063 7572 7265 6e63 7949 642c 207b 7d29   currencyId, {})
+0000d9f0: 0a20 2020 2020 2020 2020 2020 2061 6363  .            acc
+0000da00: 6f75 6e74 203d 2073 656c 662e 6163 636f  ount = self.acco
+0000da10: 756e 7428 290a 2020 2020 2020 2020 2020  unt().          
+0000da20: 2020 6163 636f 756e 745b 2775 7365 6427    account['used'
+0000da30: 5d20 3d20 7365 6c66 2e73 6166 655f 7374  ] = self.safe_st
+0000da40: 7269 6e67 2862 616c 616e 6365 2c20 2768  ring(balance, 'h
+0000da50: 6f6c 645f 7472 6164 6527 290a 2020 2020  old_trade').    
+0000da60: 2020 2020 2020 2020 6163 636f 756e 745b          account[
+0000da70: 2774 6f74 616c 275d 203d 2073 656c 662e  'total'] = self.
+0000da80: 7361 6665 5f73 7472 696e 6728 6261 6c61  safe_string(bala
+0000da90: 6e63 652c 2027 6261 6c61 6e63 6527 290a  nce, 'balance').
+0000daa0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000dab0: 6c74 5b63 6f64 655d 203d 2061 6363 6f75  lt[code] = accou
+0000dac0: 6e74 0a20 2020 2020 2020 2072 6574 7572  nt.        retur
+0000dad0: 6e20 7365 6c66 2e73 6166 655f 6261 6c61  n self.safe_bala
+0000dae0: 6e63 6528 7265 7375 6c74 290a 0a20 2020  nce(result)..   
+0000daf0: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
+0000db00: 5f62 616c 616e 6365 2873 656c 662c 2070  _balance(self, p
+0000db10: 6172 616d 733d 7b7d 2920 2d3e 2042 616c  arams={}) -> Bal
+0000db20: 616e 6365 733a 0a20 2020 2020 2020 2022  ances:.        "
+0000db30: 2222 0a20 2020 2020 2020 2071 7565 7279  "".        query
+0000db40: 2066 6f72 2062 616c 616e 6365 2061 6e64   for balance and
+0000db50: 2067 6574 2074 6865 2061 6d6f 756e 7420   get the amount 
+0000db60: 6f66 2066 756e 6473 2061 7661 696c 6162  of funds availab
+0000db70: 6c65 2066 6f72 2074 7261 6469 6e67 206f  le for trading o
+0000db80: 7220 6675 6e64 7320 6c6f 636b 6564 2069  r funds locked i
+0000db90: 6e20 6f72 6465 7273 0a20 2020 2020 2020  n orders.       
+0000dba0: 203a 7365 653a 2068 7474 7073 3a2f 2f64   :see: https://d
+0000dbb0: 6f63 732e 6b72 616b 656e 2e63 6f6d 2f72  ocs.kraken.com/r
+0000dbc0: 6573 742f 2374 6167 2f41 6363 6f75 6e74  est/#tag/Account
+0000dbd0: 2d44 6174 612f 6f70 6572 6174 696f 6e2f  -Data/operation/
+0000dbe0: 6765 7445 7874 656e 6465 6442 616c 616e  getExtendedBalan
+0000dbf0: 6365 0a20 2020 2020 2020 203a 7061 7261  ce.        :para
+0000dc00: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
+0000dc10: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+0000dc20: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+0000dc30: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
+0000dc40: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+0000dc50: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
+0000dc60: 2060 6261 6c61 6e63 6520 7374 7275 6374   `balance struct
+0000dc70: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
+0000dc80: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+0000dc90: 3d62 616c 616e 6365 2d73 7472 7563 7475  =balance-structu
+0000dca0: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
+0000dcb0: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
+0000dcc0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0000dcd0: 2829 0a20 2020 2020 2020 2072 6573 706f  ().        respo
+0000dce0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+0000dcf0: 2e70 7269 7661 7465 506f 7374 4261 6c61  .privatePostBala
+0000dd00: 6e63 6545 7828 7061 7261 6d73 290a 2020  nceEx(params).  
+0000dd10: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+0000dd20: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
+0000dd30: 2320 2020 2020 2020 2020 2265 7272 6f72  #         "error
+0000dd40: 223a 205b 5d2c 0a20 2020 2020 2020 2023  ": [],.        #
+0000dd50: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+0000dd60: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0000dd70: 2020 2020 2020 2020 2020 2022 5a55 5344             "ZUSD
+0000dd80: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0000dd90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000dda0: 6261 6c61 6e63 6522 3a20 3235 3433 352e  balance": 25435.
+0000ddb0: 3231 2c0a 2020 2020 2020 2020 2320 2020  21,.        #   
+0000ddc0: 2020 2020 2020 2020 2020 2020 2020 2268                "h
+0000ddd0: 6f6c 645f 7472 6164 6522 3a20 3832 3439  old_trade": 8249
+0000dde0: 2e37 360a 2020 2020 2020 2020 2320 2020  .76.        #   
+0000ddf0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+0000de00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000de10: 2020 2022 5858 4254 223a 207b 0a20 2020     "XXBT": {.   
+0000de20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000de30: 2020 2020 2020 2022 6261 6c61 6e63 6522         "balance"
+0000de40: 3a20 312e 3234 3335 2c0a 2020 2020 2020  : 1.2435,.      
+0000de50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000de60: 2020 2020 2268 6f6c 645f 7472 6164 6522      "hold_trade"
+0000de70: 3a20 302e 3834 3233 0a20 2020 2020 2020  : 0.8423.       
+0000de80: 2023 2020 2020 2020 2020 2020 2020 207d   #             }
+0000de90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000dea0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0000deb0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0000dec0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000ded0: 6c66 2e70 6172 7365 5f62 616c 616e 6365  lf.parse_balance
+0000dee0: 2872 6573 706f 6e73 6529 0a0a 2020 2020  (response)..    
+0000def0: 6173 796e 6320 6465 6620 6372 6561 7465  async def create
+0000df00: 5f6f 7264 6572 2873 656c 662c 2073 796d  _order(self, sym
+0000df10: 626f 6c3a 2073 7472 2c20 7479 7065 3a20  bol: str, type: 
+0000df20: 4f72 6465 7254 7970 652c 2073 6964 653a  OrderType, side:
+0000df30: 204f 7264 6572 5369 6465 2c20 616d 6f75   OrderSide, amou
+0000df40: 6e74 3a20 666c 6f61 742c 2070 7269 6365  nt: float, price
+0000df50: 3a20 4e75 6d20 3d20 4e6f 6e65 2c20 7061  : Num = None, pa
+0000df60: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+0000df70: 2020 2222 220a 2020 2020 2020 2020 3a73    """.        :s
+0000df80: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
+0000df90: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
+0000dfa0: 2f23 7461 672f 5472 6164 696e 672f 6f70  /#tag/Trading/op
+0000dfb0: 6572 6174 696f 6e2f 6164 644f 7264 6572  eration/addOrder
+0000dfc0: 0a20 2020 2020 2020 2063 7265 6174 6520  .        create 
+0000dfd0: 6120 7472 6164 6520 6f72 6465 720a 2020  a trade order.  
+0000dfe0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000dff0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+0000e000: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+0000e010: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
+0000e020: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
+0000e030: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+0000e040: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
+0000e050: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
+0000e060: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
+0000e070: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
+0000e080: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+0000e090: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
+0000e0a0: 6f77 206d 7563 6820 6f66 2063 7572 7265  ow much of curre
+0000e0b0: 6e63 7920 796f 7520 7761 6e74 2074 6f20  ncy you want to 
+0000e0c0: 7472 6164 6520 696e 2075 6e69 7473 206f  trade in units o
+0000e0d0: 6620 6261 7365 2063 7572 7265 6e63 790a  f base currency.
+0000e0e0: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+0000e0f0: 6c6f 6174 205b 7072 6963 655d 3a20 7468  loat [price]: th
+0000e100: 6520 7072 6963 6520 6174 2077 6869 6368  e price at which
+0000e110: 2074 6865 206f 7264 6572 2069 7320 746f   the order is to
+0000e120: 2062 6520 6675 6c6c 6669 6c6c 6564 2c20   be fullfilled, 
+0000e130: 696e 2075 6e69 7473 206f 6620 7468 6520  in units of the 
+0000e140: 7175 6f74 6520 6375 7272 656e 6379 2c20  quote currency, 
+0000e150: 6967 6e6f 7265 6420 696e 206d 6172 6b65  ignored in marke
+0000e160: 7420 6f72 6465 7273 0a20 2020 2020 2020  t orders.       
+0000e170: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
+0000e180: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
+0000e190: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0000e1a0: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
+0000e1b0: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
+0000e1c0: 2020 2020 2020 3a70 6172 616d 2062 6f6f        :param boo
+0000e1d0: 6c20 5b70 6172 616d 732e 706f 7374 4f6e  l [params.postOn
+0000e1e0: 6c79 5d3a 2069 6620 5472 7565 2c20 7468  ly]: if True, th
+0000e1f0: 6520 6f72 6465 7220 7769 6c6c 206f 6e6c  e order will onl
+0000e200: 7920 6265 2070 6f73 7465 6420 746f 2074  y be posted to t
+0000e210: 6865 206f 7264 6572 2062 6f6f 6b20 616e  he order book an
+0000e220: 6420 6e6f 7420 6578 6563 7574 6564 2069  d not executed i
+0000e230: 6d6d 6564 6961 7465 6c79 0a20 2020 2020  mmediately.     
+0000e240: 2020 203a 7061 7261 6d20 626f 6f6c 205b     :param bool [
+0000e250: 7061 7261 6d73 2e72 6564 7563 654f 6e6c  params.reduceOnl
+0000e260: 795d 3a20 2a6d 6172 6769 6e20 6f6e 6c79  y]: *margin only
+0000e270: 2a20 696e 6469 6361 7465 7320 6966 2073  * indicates if s
+0000e280: 656c 6620 6f72 6465 7220 6973 2074 6f20  elf order is to 
+0000e290: 7265 6475 6365 2074 6865 2073 697a 6520  reduce the size 
+0000e2a0: 6f66 2061 2070 6f73 6974 696f 6e0a 2020  of a position.  
+0000e2b0: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
+0000e2c0: 6174 205b 7061 7261 6d73 2e73 746f 704c  at [params.stopL
+0000e2d0: 6f73 7350 7269 6365 5d3a 202a 6d61 7267  ossPrice]: *marg
+0000e2e0: 696e 206f 6e6c 792a 2074 6865 2070 7269  in only* the pri
+0000e2f0: 6365 2074 6861 7420 6120 7374 6f70 206c  ce that a stop l
+0000e300: 6f73 7320 6f72 6465 7220 6973 2074 7269  oss order is tri
+0000e310: 6767 6572 6564 2061 740a 2020 2020 2020  ggered at.      
+0000e320: 2020 3a70 6172 616d 2066 6c6f 6174 205b    :param float [
+0000e330: 7061 7261 6d73 2e74 616b 6550 726f 6669  params.takeProfi
+0000e340: 7450 7269 6365 5d3a 202a 6d61 7267 696e  tPrice]: *margin
+0000e350: 206f 6e6c 792a 2074 6865 2070 7269 6365   only* the price
+0000e360: 2074 6861 7420 6120 7461 6b65 2070 726f   that a take pro
+0000e370: 6669 7420 6f72 6465 7220 6973 2074 7269  fit order is tri
+0000e380: 6767 6572 6564 2061 740a 2020 2020 2020  ggered at.      
+0000e390: 2020 3a70 6172 616d 2073 7472 205b 7061    :param str [pa
+0000e3a0: 7261 6d73 2e74 7261 696c 696e 6741 6d6f  rams.trailingAmo
+0000e3b0: 756e 745d 3a20 2a6d 6172 6769 6e20 6f6e  unt]: *margin on
+0000e3c0: 6c79 2a20 7468 6520 7175 6f74 6520 616d  ly* the quote am
+0000e3d0: 6f75 6e74 2074 6f20 7472 6169 6c20 6177  ount to trail aw
+0000e3e0: 6179 2066 726f 6d20 7468 6520 6375 7272  ay from the curr
+0000e3f0: 656e 7420 6d61 726b 6574 2070 7269 6365  ent market price
+0000e400: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000e410: 7374 7220 5b70 6172 616d 732e 7472 6169  str [params.trai
+0000e420: 6c69 6e67 4c69 6d69 7441 6d6f 756e 745d  lingLimitAmount]
+0000e430: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
+0000e440: 7468 6520 7175 6f74 6520 616d 6f75 6e74  the quote amount
+0000e450: 2061 7761 7920 6672 6f6d 2074 6865 2074   away from the t
+0000e460: 7261 696c 696e 6741 6d6f 756e 740a 2020  railingAmount.  
+0000e470: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000e480: 205b 7061 7261 6d73 2e6f 6666 7365 745d   [params.offset]
+0000e490: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
+0000e4a0: 272b 2720 6f72 2027 2d27 2077 6865 7468  '+' or '-' wheth
+0000e4b0: 6572 2079 6f75 2077 616e 7420 7468 6520  er you want the 
+0000e4c0: 7472 6169 6c69 6e67 4c69 6d69 7441 6d6f  trailingLimitAmo
+0000e4d0: 756e 7420 7661 6c75 6520 746f 2062 6520  unt value to be 
+0000e4e0: 706f 7369 7469 7665 206f 7220 6e65 6761  positive or nega
+0000e4f0: 7469 7665 2c20 6465 6661 756c 7420 6973  tive, default is
+0000e500: 206e 6567 6174 6976 6520 272d 270a 2020   negative '-'.  
+0000e510: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000e520: 205b 7061 7261 6d73 2e74 7269 6767 6572   [params.trigger
+0000e530: 5d3a 202a 6d61 7267 696e 206f 6e6c 792a  ]: *margin only*
+0000e540: 2074 6865 2061 6374 6976 6174 696f 6e20   the activation 
+0000e550: 7072 6963 6520 7479 7065 2c20 276c 6173  price type, 'las
+0000e560: 7427 206f 7220 2769 6e64 6578 272c 2064  t' or 'index', d
+0000e570: 6566 6175 6c74 2069 7320 276c 6173 7427  efault is 'last'
+0000e580: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0000e590: 7320 6469 6374 3a20 616e 2060 6f72 6465  s dict: an `orde
+0000e5a0: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+0000e5b0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0000e5c0: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
+0000e5d0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0000e5e0: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
+0000e5f0: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
+0000e600: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0000e610: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+0000e620: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+0000e630: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+0000e640: 7b0a 2020 2020 2020 2020 2020 2020 2770  {.            'p
+0000e650: 6169 7227 3a20 6d61 726b 6574 5b27 6964  air': market['id
+0000e660: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+0000e670: 2774 7970 6527 3a20 7369 6465 2c0a 2020  'type': side,.  
+0000e680: 2020 2020 2020 2020 2020 276f 7264 6572            'order
+0000e690: 7479 7065 273a 2074 7970 652c 0a20 2020  type': type,.   
+0000e6a0: 2020 2020 2020 2020 2027 766f 6c75 6d65           'volume
+0000e6b0: 273a 2073 656c 662e 616d 6f75 6e74 5f74  ': self.amount_t
+0000e6c0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+0000e6d0: 6f6c 2c20 616d 6f75 6e74 292c 0a20 2020  ol, amount),.   
+0000e6e0: 2020 2020 207d 0a20 2020 2020 2020 206f       }.        o
+0000e6f0: 7264 6572 5265 7175 6573 7420 3d20 7365  rderRequest = se
+0000e700: 6c66 2e6f 7264 6572 5f72 6571 7565 7374  lf.order_request
+0000e710: 2827 6372 6561 7465 4f72 6465 7228 2927  ('createOrder()'
+0000e720: 2c20 7379 6d62 6f6c 2c20 7479 7065 2c20  , symbol, type, 
+0000e730: 7265 7175 6573 742c 2070 7269 6365 2c20  request, price, 
+0000e740: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
+0000e750: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
+0000e760: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+0000e770: 7441 6464 4f72 6465 7228 7365 6c66 2e65  tAddOrder(self.e
+0000e780: 7874 656e 6428 6f72 6465 7252 6571 7565  xtend(orderReque
+0000e790: 7374 5b30 5d2c 206f 7264 6572 5265 7175  st[0], orderRequ
+0000e7a0: 6573 745b 315d 2929 0a20 2020 2020 2020  est[1])).       
+0000e7b0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0000e7c0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0000e7d0: 2020 2020 2022 6572 726f 7222 3a20 5b5d       "error": []
+0000e7e0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000e7f0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+0000e800: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000e810: 2020 2020 2020 2264 6573 6372 223a 207b        "descr": {
+0000e820: 6f72 6465 723a 2027 6275 7920 302e 3032  order: 'buy 0.02
+0000e830: 3130 3030 3030 2045 5448 5553 4454 2040  100000 ETHUSDT @
+0000e840: 206c 696d 6974 2033 3330 2e30 3027 7d2c   limit 330.00'},
+0000e850: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000e860: 2020 2020 2020 2022 7478 6964 223a 205b         "txid": [
+0000e870: 274f 454b 5656 322d 4948 3532 4f2d 5450  'OEKVV2-IH52O-TP
+0000e880: 4c36 475a 275d 0a20 2020 2020 2020 2023  L6GZ'].        #
+0000e890: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000e8a0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0000e8b0: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+0000e8c0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+0000e8d0: 6469 6374 2872 6573 706f 6e73 652c 2027  dict(response, '
+0000e8e0: 7265 7375 6c74 2729 0a20 2020 2020 2020  result').       
+0000e8f0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+0000e900: 7365 5f6f 7264 6572 2872 6573 756c 7429  se_order(result)
+0000e910: 0a0a 2020 2020 6465 6620 6669 6e64 5f6d  ..    def find_m
+0000e920: 6172 6b65 745f 6279 5f61 6c74 6e61 6d65  arket_by_altname
+0000e930: 5f6f 725f 6964 2873 656c 662c 2069 6429  _or_id(self, id)
+0000e940: 3a0a 2020 2020 2020 2020 6d61 726b 6574  :.        market
+0000e950: 7342 7941 6c74 6e61 6d65 203d 2073 656c  sByAltname = sel
+0000e960: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
+0000e970: 662e 6f70 7469 6f6e 732c 2027 6d61 726b  f.options, 'mark
+0000e980: 6574 7342 7941 6c74 6e61 6d65 272c 207b  etsByAltname', {
+0000e990: 7d29 0a20 2020 2020 2020 2069 6620 6964  }).        if id
+0000e9a0: 2069 6e20 6d61 726b 6574 7342 7941 6c74   in marketsByAlt
+0000e9b0: 6e61 6d65 3a0a 2020 2020 2020 2020 2020  name:.          
+0000e9c0: 2020 7265 7475 726e 206d 6172 6b65 7473    return markets
+0000e9d0: 4279 416c 746e 616d 655b 6964 5d0a 2020  ByAltname[id].  
+0000e9e0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000e9f0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000ea00: 656c 662e 7361 6665 5f6d 6172 6b65 7428  elf.safe_market(
+0000ea10: 6964 290a 0a20 2020 2064 6566 2067 6574  id)..    def get
+0000ea20: 5f64 656c 6973 7465 645f 6d61 726b 6574  _delisted_market
+0000ea30: 5f62 795f 6964 2873 656c 662c 2069 6429  _by_id(self, id)
+0000ea40: 3a0a 2020 2020 2020 2020 6966 2069 6420  :.        if id 
+0000ea50: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+0000ea60: 2020 2020 2072 6574 7572 6e20 6964 0a20       return id. 
+0000ea70: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+0000ea80: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0000ea90: 7365 6c66 2e6f 7074 696f 6e73 5b27 6465  self.options['de
+0000eaa0: 6c69 7374 6564 4d61 726b 6574 7342 7949  listedMarketsByI
+0000eab0: 6427 5d2c 2069 6429 0a20 2020 2020 2020  d'], id).       
+0000eac0: 2069 6620 6d61 726b 6574 2069 7320 6e6f   if market is no
+0000ead0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000eae0: 2020 2020 7265 7475 726e 206d 6172 6b65      return marke
+0000eaf0: 740a 2020 2020 2020 2020 6261 7365 4964  t.        baseId
+0000eb00: 5374 6172 7420 3d20 300a 2020 2020 2020  Start = 0.      
+0000eb10: 2020 6261 7365 4964 456e 6420 3d20 330a    baseIdEnd = 3.
+0000eb20: 2020 2020 2020 2020 7175 6f74 6549 6453          quoteIdS
+0000eb30: 7461 7274 203d 2033 0a20 2020 2020 2020  tart = 3.       
+0000eb40: 2071 756f 7465 4964 456e 6420 3d20 360a   quoteIdEnd = 6.
+0000eb50: 2020 2020 2020 2020 6966 206c 656e 2869          if len(i
+0000eb60: 6429 203d 3d20 383a 0a20 2020 2020 2020  d) == 8:.       
+0000eb70: 2020 2020 2062 6173 6549 6445 6e64 203d       baseIdEnd =
+0000eb80: 2034 0a20 2020 2020 2020 2020 2020 2071   4.            q
+0000eb90: 756f 7465 4964 5374 6172 7420 3d20 340a  uoteIdStart = 4.
+0000eba0: 2020 2020 2020 2020 2020 2020 7175 6f74              quot
+0000ebb0: 6549 6445 6e64 203d 2038 0a20 2020 2020  eIdEnd = 8.     
+0000ebc0: 2020 2065 6c69 6620 6c65 6e28 6964 2920     elif len(id) 
+0000ebd0: 3d3d 2037 3a0a 2020 2020 2020 2020 2020  == 7:.          
+0000ebe0: 2020 6261 7365 4964 456e 6420 3d20 340a    baseIdEnd = 4.
+0000ebf0: 2020 2020 2020 2020 2020 2020 7175 6f74              quot
+0000ec00: 6549 6453 7461 7274 203d 2034 0a20 2020  eIdStart = 4.   
+0000ec10: 2020 2020 2020 2020 2071 756f 7465 4964           quoteId
+0000ec20: 456e 6420 3d20 370a 2020 2020 2020 2020  End = 7.        
+0000ec30: 6261 7365 4964 203d 2069 645b 6261 7365  baseId = id[base
+0000ec40: 4964 5374 6172 743a 6261 7365 4964 456e  IdStart:baseIdEn
+0000ec50: 645d 0a20 2020 2020 2020 2071 756f 7465  d].        quote
+0000ec60: 4964 203d 2069 645b 7175 6f74 6549 6453  Id = id[quoteIdS
+0000ec70: 7461 7274 3a71 756f 7465 4964 456e 645d  tart:quoteIdEnd]
+0000ec80: 0a20 2020 2020 2020 2062 6173 6520 3d20  .        base = 
+0000ec90: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
+0000eca0: 6379 5f63 6f64 6528 6261 7365 4964 290a  cy_code(baseId).
+0000ecb0: 2020 2020 2020 2020 7175 6f74 6520 3d20          quote = 
+0000ecc0: 7365 6c66 2e73 6166 655f 6375 7272 656e  self.safe_curren
+0000ecd0: 6379 5f63 6f64 6528 7175 6f74 6549 6429  cy_code(quoteId)
+0000ece0: 0a20 2020 2020 2020 2073 796d 626f 6c20  .        symbol 
+0000ecf0: 3d20 6261 7365 202b 2027 2f27 202b 2071  = base + '/' + q
+0000ed00: 756f 7465 0a20 2020 2020 2020 206d 6172  uote.        mar
+0000ed10: 6b65 7420 3d20 7b0a 2020 2020 2020 2020  ket = {.        
+0000ed20: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
+0000ed30: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
+0000ed40: 2020 2762 6173 6527 3a20 6261 7365 2c0a    'base': base,.
+0000ed50: 2020 2020 2020 2020 2020 2020 2771 756f              'quo
+0000ed60: 7465 273a 2071 756f 7465 2c0a 2020 2020  te': quote,.    
+0000ed70: 2020 2020 2020 2020 2762 6173 6549 6427          'baseId'
+0000ed80: 3a20 6261 7365 4964 2c0a 2020 2020 2020  : baseId,.      
+0000ed90: 2020 2020 2020 2771 756f 7465 4964 273a        'quoteId':
+0000eda0: 2071 756f 7465 4964 2c0a 2020 2020 2020   quoteId,.      
+0000edb0: 2020 7d0a 2020 2020 2020 2020 7365 6c66    }.        self
+0000edc0: 2e6f 7074 696f 6e73 5b27 6465 6c69 7374  .options['delist
+0000edd0: 6564 4d61 726b 6574 7342 7949 6427 5d5b  edMarketsById'][
+0000ede0: 6964 5d20 3d20 6d61 726b 6574 0a20 2020  id] = market.   
+0000edf0: 2020 2020 2072 6574 7572 6e20 6d61 726b       return mark
+0000ee00: 6574 0a0a 2020 2020 6465 6620 7061 7273  et..    def pars
+0000ee10: 655f 6f72 6465 725f 7374 6174 7573 2873  e_order_status(s
+0000ee20: 656c 662c 2073 7461 7475 7329 3a0a 2020  elf, status):.  
+0000ee30: 2020 2020 2020 7374 6174 7573 6573 203d        statuses =
+0000ee40: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0000ee50: 7065 6e64 696e 6727 3a20 276f 7065 6e27  pending': 'open'
+0000ee60: 2c20 2023 206f 7264 6572 2070 656e 6469  ,  # order pendi
+0000ee70: 6e67 2062 6f6f 6b20 656e 7472 790a 2020  ng book entry.  
+0000ee80: 2020 2020 2020 2020 2020 276f 7065 6e27            'open'
+0000ee90: 3a20 276f 7065 6e27 2c0a 2020 2020 2020  : 'open',.      
+0000eea0: 2020 2020 2020 2763 6c6f 7365 6427 3a20        'closed': 
+0000eeb0: 2763 6c6f 7365 6427 2c0a 2020 2020 2020  'closed',.      
+0000eec0: 2020 2020 2020 2763 616e 6365 6c65 6427        'canceled'
+0000eed0: 3a20 2763 616e 6365 6c65 6427 2c0a 2020  : 'canceled',.  
+0000eee0: 2020 2020 2020 2020 2020 2765 7870 6972            'expir
+0000eef0: 6564 273a 2027 6578 7069 7265 6427 2c0a  ed': 'expired',.
+0000ef00: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0000ef10: 2020 7265 7475 726e 2073 656c 662e 7361    return self.sa
+0000ef20: 6665 5f73 7472 696e 6728 7374 6174 7573  fe_string(status
+0000ef30: 6573 2c20 7374 6174 7573 2c20 7374 6174  es, status, stat
+0000ef40: 7573 290a 0a20 2020 2064 6566 2070 6172  us)..    def par
+0000ef50: 7365 5f6f 7264 6572 5f74 7970 6528 7365  se_order_type(se
+0000ef60: 6c66 2c20 7374 6174 7573 293a 0a20 2020  lf, status):.   
+0000ef70: 2020 2020 2073 7461 7475 7365 7320 3d20       statuses = 
+0000ef80: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
+0000ef90: 616b 652d 7072 6f66 6974 273a 2027 6d61  ake-profit': 'ma
+0000efa0: 726b 6574 272c 0a20 2020 2020 2020 2020  rket',.         
+0000efb0: 2020 2027 7374 6f70 2d6c 6f73 732d 6c69     'stop-loss-li
+0000efc0: 6d69 7427 3a20 276c 696d 6974 272c 0a20  mit': 'limit',. 
+0000efd0: 2020 2020 2020 2020 2020 2027 7374 6f70             'stop
+0000efe0: 2d6c 6f73 7327 3a20 276d 6172 6b65 7427  -loss': 'market'
+0000eff0: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0000f000: 616b 652d 7072 6f66 6974 2d6c 696d 6974  ake-profit-limit
+0000f010: 273a 2027 6c69 6d69 7427 2c0a 2020 2020  ': 'limit',.    
+0000f020: 2020 2020 2020 2020 2774 7261 696c 696e          'trailin
+0000f030: 672d 7374 6f70 2d6c 696d 6974 273a 2027  g-stop-limit': '
+0000f040: 6c69 6d69 7427 2c0a 2020 2020 2020 2020  limit',.        
+0000f050: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
+0000f060: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0000f070: 6728 7374 6174 7573 6573 2c20 7374 6174  g(statuses, stat
+0000f080: 7573 2c20 7374 6174 7573 290a 0a20 2020  us, status)..   
+0000f090: 2064 6566 2070 6172 7365 5f6f 7264 6572   def parse_order
+0000f0a0: 2873 656c 662c 206f 7264 6572 2c20 6d61  (self, order, ma
+0000f0b0: 726b 6574 3a20 4d61 726b 6574 203d 204e  rket: Market = N
+0000f0c0: 6f6e 6529 202d 3e20 4f72 6465 723a 0a20  one) -> Order:. 
+0000f0d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0000f0e0: 2023 2063 7265 6174 654f 7264 6572 2066   # createOrder f
+0000f0f0: 6f72 2072 6567 756c 6172 206f 7264 6572  or regular order
+0000f100: 730a 2020 2020 2020 2020 230a 2020 2020  s.        #.    
+0000f110: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0000f120: 2020 2020 2320 2020 2020 2020 2020 2264      #         "d
+0000f130: 6573 6372 223a 207b 6f72 6465 723a 2027  escr": {order: '
+0000f140: 6275 7920 302e 3032 3130 3030 3030 2045  buy 0.02100000 E
+0000f150: 5448 5553 4454 2040 206c 696d 6974 2033  THUSDT @ limit 3
+0000f160: 3330 2e30 3027 7d2c 0a20 2020 2020 2020  30.00'},.       
+0000f170: 2023 2020 2020 2020 2020 2022 7478 6964   #         "txid
+0000f180: 223a 205b 274f 454b 5656 322d 4948 3532  ": ['OEKVV2-IH52
+0000f190: 4f2d 5450 4c36 475a 275d 0a20 2020 2020  O-TPL6GZ'].     
+0000f1a0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0000f1b0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0000f1c0: 2020 2023 2020 2020 2020 2020 2022 7478     #         "tx
+0000f1d0: 6964 223a 205b 2254 585f 4944 5f48 4552  id": ["TX_ID_HER
+0000f1e0: 4522 5d2c 0a20 2020 2020 2020 2023 2020  E"],.        #  
+0000f1f0: 2020 2020 2020 2022 6465 7363 7222 3a20         "descr": 
+0000f200: 7b22 6f72 6465 7222 3a22 6275 7920 302e  {"order":"buy 0.
+0000f210: 3132 3334 3536 3738 2045 5448 4555 5220  12345678 ETHEUR 
+0000f220: 4020 6d61 726b 6574 227d 2c0a 2020 2020  @ market"},.    
+0000f230: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0000f240: 2020 2020 230a 2020 2020 2020 2020 230a      #.        #.
+0000f250: 2020 2020 2020 2020 2320 6372 6561 7465          # create
+0000f260: 4f72 6465 7220 666f 7220 7374 6f70 206f  Order for stop o
+0000f270: 7264 6572 730a 2020 2020 2020 2020 230a  rders.        #.
+0000f280: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0000f290: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f2a0: 2020 2274 7869 6422 3a5b 224f 5349 4c4e    "txid":["OSILN
+0000f2b0: 432d 5651 4935 512d 3737 355a 4451 225d  C-VQI5Q-775ZDQ"]
+0000f2c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000f2d0: 2020 2020 2264 6573 6372 223a 7b22 6f72      "descr":{"or
+0000f2e0: 6465 7222 3a22 7365 6c6c 2031 3637 2e32  der":"sell 167.2
+0000f2f0: 3830 3032 3637 3620 4144 4158 4254 2040  8002676 ADAXBT @
+0000f300: 2073 746f 7020 6c6f 7373 2030 2e30 3030   stop loss 0.000
+0000f310: 3033 3238 3020 2d3e 206c 696d 6974 2030  03280 -> limit 0
+0000f320: 2e30 3030 3033 3231 3222 7d0a 2020 2020  .00003212"}.    
+0000f330: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0000f340: 2020 2020 230a 2020 2020 2020 2020 230a      #.        #.
+0000f350: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0000f360: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f370: 2020 2274 7869 6422 3a5b 224f 5648 4d4a    "txid":["OVHMJ
+0000f380: 562d 425a 5732 562d 364e 5a46 5746 225d  V-BZW2V-6NZFWF"]
+0000f390: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000f3a0: 2020 2020 2264 6573 6372 223a 7b22 6f72      "descr":{"or
+0000f3b0: 6465 7222 3a22 7365 6c6c 2030 2e30 3031  der":"sell 0.001
+0000f3c0: 3030 3030 3020 4554 4855 5344 2040 2073  00000 ETHUSD @ s
+0000f3d0: 746f 7020 6c6f 7373 2032 3637 372e 3030  top loss 2677.00
+0000f3e0: 202d 3e20 6c69 6d69 7420 3235 3737 2e30   -> limit 2577.0
+0000f3f0: 3020 7769 7468 2035 3a31 206c 6576 6572  0 with 5:1 lever
+0000f400: 6167 6522 7d0a 2020 2020 2020 2020 2320  age"}.        # 
+0000f410: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+0000f420: 2020 2020 2020 2020 2320 6564 6974 4f72          # editOr
+0000f430: 6465 720a 2020 2020 2020 2020 230a 2020  der.        #.  
+0000f440: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0000f450: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000f460: 2273 7461 7475 7322 3a20 226f 6b22 2c0a  "status": "ok",.
+0000f470: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f480: 2020 2274 7869 6422 3a20 224f 4157 3242    "txid": "OAW2B
+0000f490: 4f2d 3752 5745 4b2d 505a 5935 554f 222c  O-7RWEK-PZY5UO",
+0000f4a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000f4b0: 2020 2022 6f72 6967 696e 616c 7478 6964     "originaltxid
+0000f4c0: 223a 2022 4f58 4c36 5353 2d55 504e 4d43  ": "OXL6SS-UPNMC
+0000f4d0: 2d32 3657 4245 3722 2c0a 2020 2020 2020  -26WBE7",.      
+0000f4e0: 2020 2320 2020 2020 2020 2020 2276 6f6c    #         "vol
+0000f4f0: 756d 6522 3a20 2230 2e30 3030 3735 3030  ume": "0.0007500
+0000f500: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0000f510: 2020 2020 2020 2270 7269 6365 223a 2022        "price": "
+0000f520: 3133 3530 302e 3022 2c0a 2020 2020 2020  13500.0",.      
+0000f530: 2020 2320 2020 2020 2020 2020 226f 7264    #         "ord
+0000f540: 6572 735f 6361 6e63 656c 6c65 6422 3a20  ers_cancelled": 
+0000f550: 312c 0a20 2020 2020 2020 2023 2020 2020  1,.        #    
+0000f560: 2020 2020 2022 6465 7363 7222 3a20 7b0a       "descr": {.
+0000f570: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f580: 2020 2020 2020 226f 7264 6572 223a 2022        "order": "
+0000f590: 6275 7920 302e 3030 3037 3530 3030 2058  buy 0.00075000 X
+0000f5a0: 4254 5553 4454 2040 206c 696d 6974 2031  BTUSDT @ limit 1
+0000f5b0: 3335 3030 2e30 220a 2020 2020 2020 2020  3500.0".        
+0000f5c0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+0000f5d0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+0000f5e0: 2020 2020 2320 2077 7320 2d20 6372 6561      #  ws - crea
+0000f5f0: 7465 4f72 6465 720a 2020 2020 2020 2020  teOrder.        
+0000f600: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
+0000f610: 2020 2020 2020 2020 2264 6573 6372 223a          "descr":
+0000f620: 2027 7365 6c6c 2030 2e30 3030 3130 3030   'sell 0.0001000
+0000f630: 3020 5842 5455 5344 5420 4020 6d61 726b  0 XBTUSDT @ mark
+0000f640: 6574 272c 0a20 2020 2020 2020 2023 2020  et',.        #  
+0000f650: 2020 2020 2020 2265 7665 6e74 223a 2027        "event": '
+0000f660: 6164 644f 7264 6572 5374 6174 7573 272c  addOrderStatus',
+0000f670: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000f680: 2020 2272 6571 6964 223a 2031 2c0a 2020    "reqid": 1,.  
+0000f690: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
+0000f6a0: 7374 6174 7573 223a 2027 6f6b 272c 0a20  status": 'ok',. 
+0000f6b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000f6c0: 2274 7869 6422 3a20 274f 4156 585a 482d  "txid": 'OAVXZH-
+0000f6d0: 5849 4535 342d 4a43 5959 4447 270a 2020  XIE54-JCYYDG'.  
+0000f6e0: 2020 2020 2020 2320 2020 207d 0a20 2020        #    }.   
+0000f6f0: 2020 2020 2023 2020 7773 202d 2065 6469       #  ws - edi
+0000f700: 744f 7264 6572 0a20 2020 2020 2020 2023  tOrder.        #
+0000f710: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0000f720: 2020 2020 2020 2022 6465 7363 7222 3a20         "descr": 
+0000f730: 226f 7264 6572 2065 6469 7465 6420 7072  "order edited pr
+0000f740: 6963 6520 3d20 3930 3030 2e30 3030 3030  ice = 9000.00000
+0000f750: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0000f760: 2020 2020 2020 2022 6576 656e 7422 3a20         "event": 
+0000f770: 2265 6469 744f 7264 6572 5374 6174 7573  "editOrderStatus
+0000f780: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0000f790: 2020 2020 226f 7269 6769 6e61 6c74 7869      "originaltxi
+0000f7a0: 6422 3a20 224f 3635 4b5a 572d 4a34 4157  d": "O65KZW-J4AW
+0000f7b0: 332d 5646 5337 3441 222c 0a20 2020 2020  3-VFS74A",.     
+0000f7c0: 2020 2023 2020 2020 2020 2020 2272 6571     #        "req
+0000f7d0: 6964 223a 2033 2c0a 2020 2020 2020 2020  id": 3,.        
+0000f7e0: 2320 2020 2020 2020 2022 7374 6174 7573  #        "status
+0000f7f0: 223a 2022 6f6b 222c 0a20 2020 2020 2020  ": "ok",.       
+0000f800: 2023 2020 2020 2020 2020 2274 7869 6422   #        "txid"
+0000f810: 3a20 224f 5449 3637 322d 484a 4641 4f2d  : "OTI672-HJFAO-
+0000f820: 584f 4950 504b 220a 2020 2020 2020 2020  XOIPPK".        
+0000f830: 2320 2020 207d 0a20 2020 2020 2020 2023  #    }.        #
+0000f840: 0a20 2020 2020 2020 2023 2020 7b0a 2020  .        #  {.  
+0000f850: 2020 2020 2020 2320 2020 2020 2022 6572        #      "er
+0000f860: 726f 7222 3a20 5b5d 2c0a 2020 2020 2020  ror": [],.      
+0000f870: 2020 2320 2020 2020 2022 7265 7375 6c74    #      "result
+0000f880: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+0000f890: 2020 2020 2020 2020 226f 7065 6e22 3a20          "open": 
+0000f8a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000f8b0: 2020 2020 2020 2020 2022 4f58 5650 5355           "OXVPSU
+0000f8c0: 2d51 3732 3646 2d4c 3353 4445 5022 3a20  -Q726F-L3SDEP": 
+0000f8d0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000f8e0: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+0000f8f0: 6669 6422 3a20 6e75 6c6c 2c0a 2020 2020  fid": null,.    
+0000f900: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000f910: 2020 2020 2020 2022 7573 6572 7265 6622         "userref"
+0000f920: 3a20 302c 0a20 2020 2020 2020 2023 2020  : 0,.        #  
+0000f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f940: 2273 7461 7475 7322 3a20 226f 7065 6e22  "status": "open"
+0000f950: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000f960: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
+0000f970: 656e 746d 223a 2031 3730 3638 3933 3336  entm": 170689336
+0000f980: 372e 3436 3536 3634 392c 0a20 2020 2020  7.4656649,.     
+0000f990: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000f9a0: 2020 2020 2020 2273 7461 7274 746d 223a        "starttm":
+0000f9b0: 2030 2c0a 2020 2020 2020 2020 2320 2020   0,.        #   
+0000f9c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000f9d0: 6578 7069 7265 746d 223a 2030 2c0a 2020  expiretm": 0,.  
+0000f9e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000f9f0: 2020 2020 2020 2020 2022 6465 7363 7222           "descr"
+0000fa00: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0000fa10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fa20: 2020 2022 7061 6972 223a 2022 5852 5045     "pair": "XRPE
+0000fa30: 5552 222c 0a20 2020 2020 2020 2023 2020  UR",.        #  
+0000fa40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fa50: 2020 2020 2274 7970 6522 3a20 2273 656c      "type": "sel
+0000fa60: 6c22 2c0a 2020 2020 2020 2020 2320 2020  l",.        #   
+0000fa70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fa80: 2020 2022 6f72 6465 7274 7970 6522 3a20     "ordertype": 
+0000fa90: 2274 7261 696c 696e 672d 7374 6f70 222c  "trailing-stop",
+0000faa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000fab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fac0: 2270 7269 6365 223a 2022 2b35 302e 3030  "price": "+50.00
+0000fad0: 3030 2522 2c0a 2020 2020 2020 2020 2320  00%",.        # 
 0000fae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000faf0: 2020 2020 2022 7072 6963 6522 3a20 222b       "price": "+
-0000fb00: 3530 2e30 3030 3025 222c 0a20 2020 2020  50.0000%",.     
-0000fb10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000fb20: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-0000fb30: 3222 3a20 2230 222c 0a20 2020 2020 2020  2": "0",.       
-0000fb40: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fb50: 2020 2020 2020 2020 226c 6576 6572 6167          "leverag
-0000fb60: 6522 3a20 226e 6f6e 6522 2c0a 2020 2020  e": "none",.    
-0000fb70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000fb80: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-0000fb90: 7222 3a20 2273 656c 6c20 3130 2e30 3030  r": "sell 10.000
-0000fba0: 3030 3030 3020 5852 5045 5552 2040 2074  00000 XRPEUR @ t
-0000fbb0: 7261 696c 696e 6720 7374 6f70 202b 3530  railing stop +50
-0000fbc0: 2e30 3030 3025 222c 0a20 2020 2020 2020  .0000%",.       
-0000fbd0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fbe0: 2020 2020 2020 2020 2263 6c6f 7365 223a          "close":
-0000fbf0: 2022 220a 2020 2020 2020 2020 2320 2020   "".        #   
-0000fc00: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-0000fc10: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000fc20: 2020 2020 2020 2020 2020 2020 2022 766f               "vo
-0000fc30: 6c22 3a20 2231 302e 3030 3030 3030 3030  l": "10.00000000
+0000faf0: 2020 2020 2022 7072 6963 6532 223a 2022       "price2": "
+0000fb00: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0000fb10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fb20: 2020 2022 6c65 7665 7261 6765 223a 2022     "leverage": "
+0000fb30: 6e6f 6e65 222c 0a20 2020 2020 2020 2023  none",.        #
+0000fb40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fb50: 2020 2020 2020 226f 7264 6572 223a 2022        "order": "
+0000fb60: 7365 6c6c 2031 302e 3030 3030 3030 3030  sell 10.00000000
+0000fb70: 2058 5250 4555 5220 4020 7472 6169 6c69   XRPEUR @ traili
+0000fb80: 6e67 2073 746f 7020 2b35 302e 3030 3030  ng stop +50.0000
+0000fb90: 2522 2c0a 2020 2020 2020 2020 2320 2020  %",.        #   
+0000fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fbb0: 2020 2022 636c 6f73 6522 3a20 2222 0a20     "close": "". 
+0000fbc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000fbd0: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+0000fbe0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000fbf0: 2020 2020 2020 2020 2276 6f6c 223a 2022          "vol": "
+0000fc00: 3130 2e30 3030 3030 3030 3022 2c0a 2020  10.00000000",.  
+0000fc10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000fc20: 2020 2020 2020 2020 2022 766f 6c5f 6578           "vol_ex
+0000fc30: 6563 223a 2022 302e 3030 3030 3030 3030  ec": "0.00000000
 0000fc40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000fc50: 2020 2020 2020 2020 2020 2020 2020 2276                "v
-0000fc60: 6f6c 5f65 7865 6322 3a20 2230 2e30 3030  ol_exec": "0.000
-0000fc70: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-0000fc80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000fc90: 2020 2022 636f 7374 223a 2022 302e 3030     "cost": "0.00
-0000fca0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0000fcb0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fcc0: 2020 2020 2266 6565 223a 2022 302e 3030      "fee": "0.00
-0000fcd0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0000fce0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0000fcf0: 2020 2020 2270 7269 6365 223a 2022 302e      "price": "0.
-0000fd00: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-0000fd10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000fd20: 2020 2020 2020 2273 746f 7070 7269 6365        "stopprice
-0000fd30: 223a 2022 302e 3233 3432 3430 3030 222c  ": "0.23424000",
-0000fd40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000fd50: 2020 2020 2020 2020 2020 2020 226c 696d              "lim
-0000fd60: 6974 7072 6963 6522 3a20 2230 2e34 3638  itprice": "0.468
-0000fd70: 3437 3030 3022 2c0a 2020 2020 2020 2020  47000",.        
-0000fd80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000fd90: 2020 2022 6d69 7363 223a 2022 222c 0a20     "misc": "",. 
-0000fda0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000fdb0: 2020 2020 2020 2020 2020 226f 666c 6167            "oflag
-0000fdc0: 7322 3a20 2266 6369 7122 2c0a 2020 2020  s": "fciq",.    
-0000fdd0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000fde0: 2020 2020 2020 2022 7472 6967 6765 7222         "trigger"
-0000fdf0: 3a20 2269 6e64 6578 220a 2020 2020 2020  : "index".      
-0000fe00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000fe10: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-0000fe20: 2020 7d0a 2020 2020 2020 2020 2320 207d    }.        #  }
-0000fe30: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0000fe40: 2020 2064 6573 6372 6970 7469 6f6e 203d     description =
-0000fe50: 2073 656c 662e 7361 6665 5f64 6963 7428   self.safe_dict(
-0000fe60: 6f72 6465 722c 2027 6465 7363 7227 2c20  order, 'descr', 
-0000fe70: 7b7d 290a 2020 2020 2020 2020 6f72 6465  {}).        orde
-0000fe80: 7244 6573 6372 6970 7469 6f6e 203d 204e  rDescription = N
-0000fe90: 6f6e 650a 2020 2020 2020 2020 6966 2064  one.        if d
-0000fea0: 6573 6372 6970 7469 6f6e 2069 7320 6e6f  escription is no
-0000feb0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000fec0: 2020 2020 6f72 6465 7244 6573 6372 6970      orderDescrip
-0000fed0: 7469 6f6e 203d 2073 656c 662e 7361 6665  tion = self.safe
-0000fee0: 5f73 7472 696e 6728 6465 7363 7269 7074  _string(descript
-0000fef0: 696f 6e2c 2027 6f72 6465 7227 290a 2020  ion, 'order').  
-0000ff00: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000ff10: 2020 2020 2020 2020 6f72 6465 7244 6573          orderDes
-0000ff20: 6372 6970 7469 6f6e 203d 2073 656c 662e  cription = self.
-0000ff30: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
-0000ff40: 722c 2027 6465 7363 7227 290a 2020 2020  r, 'descr').    
-0000ff50: 2020 2020 7369 6465 203d 204e 6f6e 650a      side = None.
-0000ff60: 2020 2020 2020 2020 7479 7065 203d 204e          type = N
-0000ff70: 6f6e 650a 2020 2020 2020 2020 6d61 726b  one.        mark
-0000ff80: 6574 4964 203d 204e 6f6e 650a 2020 2020  etId = None.    
-0000ff90: 2020 2020 7072 6963 6520 3d20 4e6f 6e65      price = None
-0000ffa0: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
-0000ffb0: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-0000ffc0: 746f 7050 7269 6365 203d 204e 6f6e 650a  topPrice = None.
-0000ffd0: 2020 2020 2020 2020 6966 206f 7264 6572          if order
-0000ffe0: 4465 7363 7269 7074 696f 6e20 6973 206e  Description is n
-0000fff0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00010000: 2020 2020 2070 6172 7473 203d 206f 7264       parts = ord
-00010010: 6572 4465 7363 7269 7074 696f 6e2e 7370  erDescription.sp
-00010020: 6c69 7428 2720 2729 0a20 2020 2020 2020  lit(' ').       
-00010030: 2020 2020 2073 6964 6520 3d20 7365 6c66       side = self
-00010040: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-00010050: 7473 2c20 3029 0a20 2020 2020 2020 2020  ts, 0).         
-00010060: 2020 2061 6d6f 756e 7420 3d20 7365 6c66     amount = self
-00010070: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-00010080: 7473 2c20 3129 0a20 2020 2020 2020 2020  ts, 1).         
-00010090: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
-000100a0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-000100b0: 6172 7473 2c20 3229 0a20 2020 2020 2020  arts, 2).       
-000100c0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
-000100d0: 2e73 6166 655f 7374 7269 6e67 2870 6172  .safe_string(par
-000100e0: 7473 2c20 3429 0a20 2020 2020 2020 2020  ts, 4).         
-000100f0: 2020 2069 6620 7479 7065 203d 3d20 2773     if type == 's
-00010100: 746f 7027 3a0a 2020 2020 2020 2020 2020  top':.          
-00010110: 2020 2020 2020 7374 6f70 5072 6963 6520        stopPrice 
-00010120: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00010130: 6e67 2870 6172 7473 2c20 3629 0a20 2020  ng(parts, 6).   
-00010140: 2020 2020 2020 2020 2020 2020 2070 7269               pri
-00010150: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
-00010160: 7472 696e 6728 7061 7274 732c 2039 290a  tring(parts, 9).
-00010170: 2020 2020 2020 2020 2020 2020 656c 6966              elif
-00010180: 2074 7970 6520 3d3d 2027 6c69 6d69 7427   type == 'limit'
-00010190: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000101a0: 2020 7072 6963 6520 3d20 7365 6c66 2e73    price = self.s
-000101b0: 6166 655f 7374 7269 6e67 2870 6172 7473  afe_string(parts
-000101c0: 2c20 3529 0a20 2020 2020 2020 2073 6964  , 5).        sid
-000101d0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-000101e0: 7269 6e67 2864 6573 6372 6970 7469 6f6e  ring(description
-000101f0: 2c20 2774 7970 6527 2c20 7369 6465 290a  , 'type', side).
-00010200: 2020 2020 2020 2020 7479 7065 203d 2073          type = s
-00010210: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00010220: 6465 7363 7269 7074 696f 6e2c 2027 6f72  description, 'or
-00010230: 6465 7274 7970 6527 2c20 7479 7065 290a  dertype', type).
-00010240: 2020 2020 2020 2020 6d61 726b 6574 4964          marketId
-00010250: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00010260: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
-00010270: 2027 7061 6972 272c 206d 6172 6b65 7449   'pair', marketI
-00010280: 6429 0a20 2020 2020 2020 2066 6f75 6e64  d).        found
-00010290: 4d61 726b 6574 203d 2073 656c 662e 6669  Market = self.fi
-000102a0: 6e64 5f6d 6172 6b65 745f 6279 5f61 6c74  nd_market_by_alt
-000102b0: 6e61 6d65 5f6f 725f 6964 286d 6172 6b65  name_or_id(marke
-000102c0: 7449 6429 0a20 2020 2020 2020 2073 796d  tId).        sym
-000102d0: 626f 6c20 3d20 4e6f 6e65 0a20 2020 2020  bol = None.     
-000102e0: 2020 2069 6620 666f 756e 644d 6172 6b65     if foundMarke
-000102f0: 7420 6973 206e 6f74 204e 6f6e 653a 0a20  t is not None:. 
-00010300: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
-00010310: 7420 3d20 666f 756e 644d 6172 6b65 740a  t = foundMarket.
-00010320: 2020 2020 2020 2020 656c 6966 206d 6172          elif mar
-00010330: 6b65 7449 6420 6973 206e 6f74 204e 6f6e  ketId is not Non
-00010340: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-00010350: 2064 656c 6973 7465 6420 6d61 726b 6574   delisted market
-00010360: 2069 6473 2067 6f20 6865 7265 0a20 2020   ids go here.   
-00010370: 2020 2020 2020 2020 206d 6172 6b65 7420           market 
-00010380: 3d20 7365 6c66 2e67 6574 5f64 656c 6973  = self.get_delis
-00010390: 7465 645f 6d61 726b 6574 5f62 795f 6964  ted_market_by_id
-000103a0: 286d 6172 6b65 7449 6429 0a20 2020 2020  (marketId).     
-000103b0: 2020 2074 696d 6573 7461 6d70 203d 2073     timestamp = s
-000103c0: 656c 662e 7361 6665 5f74 696d 6573 7461  elf.safe_timesta
-000103d0: 6d70 286f 7264 6572 2c20 276f 7065 6e74  mp(order, 'opent
-000103e0: 6d27 290a 2020 2020 2020 2020 616d 6f75  m').        amou
-000103f0: 6e74 203d 2073 656c 662e 7361 6665 5f73  nt = self.safe_s
-00010400: 7472 696e 6728 6f72 6465 722c 2027 766f  tring(order, 'vo
-00010410: 6c27 2c20 616d 6f75 6e74 290a 2020 2020  l', amount).    
-00010420: 2020 2020 6669 6c6c 6564 203d 2073 656c      filled = sel
-00010430: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
-00010440: 6465 722c 2027 766f 6c5f 6578 6563 2729  der, 'vol_exec')
-00010450: 0a20 2020 2020 2020 2066 6565 203d 204e  .        fee = N
-00010460: 6f6e 650a 2020 2020 2020 2020 2320 6b72  one.        # kr
-00010470: 616b 656e 2074 7275 6e63 6174 6573 2074  aken truncates t
-00010480: 6865 2063 6f73 7420 696e 2074 6865 2061  he cost in the a
-00010490: 7069 2072 6573 706f 6e73 6520 736f 2077  pi response so w
-000104a0: 6520 7769 6c6c 2069 676e 6f72 6520 6974  e will ignore it
-000104b0: 2061 6e64 2063 616c 6375 6c61 7465 2069   and calculate i
-000104c0: 7420 6672 6f6d 2061 7665 7261 6765 2026  t from average &
-000104d0: 2066 696c 6c65 640a 2020 2020 2020 2020   filled.        
-000104e0: 2320 636f 7374 203d 2073 656c 662e 7361  # cost = self.sa
-000104f0: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
-00010500: 2027 636f 7374 2729 0a20 2020 2020 2020   'cost').       
-00010510: 2070 7269 6365 203d 2073 656c 662e 7361   price = self.sa
-00010520: 6665 5f73 7472 696e 6728 6465 7363 7269  fe_string(descri
-00010530: 7074 696f 6e2c 2027 7072 6963 6527 2c20  ption, 'price', 
-00010540: 7072 6963 6529 0a20 2020 2020 2020 2023  price).        #
-00010550: 2077 6865 6e20 7479 7065 203d 2074 7261   when type = tra
-00010560: 696c 6c69 6e67 2073 746f 7020 7265 7475  illing stop retu
-00010570: 726e 7320 7072 6963 6520 3d20 272b 3530  rns price = '+50
-00010580: 2e30 3030 3025 270a 2020 2020 2020 2020  .0000%'.        
-00010590: 6966 2028 7072 6963 6520 6973 206e 6f74  if (price is not
-000105a0: 204e 6f6e 6529 2061 6e64 2070 7269 6365   None) and price
-000105b0: 2e65 6e64 7377 6974 6828 2725 2729 3a0a  .endswith('%'):.
-000105c0: 2020 2020 2020 2020 2020 2020 7072 6963              pric
-000105d0: 6520 3d20 4e6f 6e65 2020 2320 7365 6c66  e = None  # self
-000105e0: 2069 7320 6e6f 7420 7468 6520 7072 6963   is not the pric
-000105f0: 6520 7765 2077 616e 740a 2020 2020 2020  e we want.      
-00010600: 2020 6966 2028 7072 6963 6520 6973 204e    if (price is N
-00010610: 6f6e 6529 206f 7220 5072 6563 6973 652e  one) or Precise.
-00010620: 7374 7269 6e67 5f65 7175 616c 7328 7072  string_equals(pr
-00010630: 6963 652c 2027 3027 293a 0a20 2020 2020  ice, '0'):.     
-00010640: 2020 2020 2020 2070 7269 6365 203d 2073         price = s
-00010650: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00010660: 6465 7363 7269 7074 696f 6e2c 2027 7072  description, 'pr
-00010670: 6963 6532 2729 0a20 2020 2020 2020 2069  ice2').        i
-00010680: 6620 2870 7269 6365 2069 7320 4e6f 6e65  f (price is None
-00010690: 2920 6f72 2050 7265 6369 7365 2e73 7472  ) or Precise.str
-000106a0: 696e 675f 6571 7561 6c73 2870 7269 6365  ing_equals(price
-000106b0: 2c20 2730 2729 3a0a 2020 2020 2020 2020  , '0'):.        
-000106c0: 2020 2020 7072 6963 6520 3d20 7365 6c66      price = self
-000106d0: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
-000106e0: 6572 2c20 2770 7269 6365 272c 2070 7269  er, 'price', pri
-000106f0: 6365 290a 2020 2020 2020 2020 666c 6167  ce).        flag
-00010700: 7320 3d20 7365 6c66 2e73 6166 655f 7374  s = self.safe_st
-00010710: 7269 6e67 286f 7264 6572 2c20 276f 666c  ring(order, 'ofl
-00010720: 6167 7327 2c20 2727 290a 2020 2020 2020  ags', '').      
-00010730: 2020 6973 506f 7374 4f6e 6c79 203d 2066    isPostOnly = f
-00010740: 6c61 6773 2e66 696e 6428 2770 6f73 7427  lags.find('post'
-00010750: 2920 3e20 2d31 0a20 2020 2020 2020 2061  ) > -1.        a
-00010760: 7665 7261 6765 203d 2073 656c 662e 7361  verage = self.sa
-00010770: 6665 5f6e 756d 6265 7228 6f72 6465 722c  fe_number(order,
-00010780: 2027 7072 6963 6527 290a 2020 2020 2020   'price').      
-00010790: 2020 6966 206d 6172 6b65 7420 6973 206e    if market is n
-000107a0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-000107b0: 2020 2020 2073 796d 626f 6c20 3d20 6d61       symbol = ma
-000107c0: 726b 6574 5b27 7379 6d62 6f6c 275d 0a20  rket['symbol']. 
-000107d0: 2020 2020 2020 2020 2020 2069 6620 2766             if 'f
-000107e0: 6565 2720 696e 206f 7264 6572 3a0a 2020  ee' in order:.  
-000107f0: 2020 2020 2020 2020 2020 2020 2020 6665                fe
-00010800: 6543 6f73 7420 3d20 7365 6c66 2e73 6166  eCost = self.saf
-00010810: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00010820: 2766 6565 2729 0a20 2020 2020 2020 2020  'fee').         
-00010830: 2020 2020 2020 2066 6565 203d 207b 0a20         fee = {. 
-00010840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010850: 2020 2027 636f 7374 273a 2066 6565 436f     'cost': feeCo
-00010860: 7374 2c0a 2020 2020 2020 2020 2020 2020  st,.            
-00010870: 2020 2020 2020 2020 2772 6174 6527 3a20          'rate': 
-00010880: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00010890: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-000108a0: 2020 2020 2020 2020 6966 2066 6c61 6773          if flags
-000108b0: 2e66 696e 6428 2766 6369 7127 2920 3e3d  .find('fciq') >=
-000108c0: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-000108d0: 2020 2020 2020 2020 6665 655b 2763 7572          fee['cur
-000108e0: 7265 6e63 7927 5d20 3d20 6d61 726b 6574  rency'] = market
-000108f0: 5b27 7175 6f74 6527 5d0a 2020 2020 2020  ['quote'].      
-00010900: 2020 2020 2020 2020 2020 656c 6966 2066            elif f
-00010910: 6c61 6773 2e66 696e 6428 2766 6369 6227  lags.find('fcib'
-00010920: 2920 3e3d 2030 3a0a 2020 2020 2020 2020  ) >= 0:.        
-00010930: 2020 2020 2020 2020 2020 2020 6665 655b              fee[
-00010940: 2763 7572 7265 6e63 7927 5d20 3d20 6d61  'currency'] = ma
-00010950: 726b 6574 5b27 6261 7365 275d 0a20 2020  rket['base'].   
-00010960: 2020 2020 2073 7461 7475 7320 3d20 7365       status = se
-00010970: 6c66 2e70 6172 7365 5f6f 7264 6572 5f73  lf.parse_order_s
-00010980: 7461 7475 7328 7365 6c66 2e73 6166 655f  tatus(self.safe_
-00010990: 7374 7269 6e67 286f 7264 6572 2c20 2773  string(order, 's
-000109a0: 7461 7475 7327 2929 0a20 2020 2020 2020  tatus')).       
-000109b0: 2069 6420 3d20 7365 6c66 2e73 6166 655f   id = self.safe_
-000109c0: 7374 7269 6e67 5f32 286f 7264 6572 2c20  string_2(order, 
-000109d0: 2769 6427 2c20 2774 7869 6427 290a 2020  'id', 'txid').  
-000109e0: 2020 2020 2020 6966 2028 6964 2069 7320        if (id is 
-000109f0: 4e6f 6e65 2920 6f72 2028 6964 5b30 3a31  None) or (id[0:1
-00010a00: 5d20 3d3d 2027 5b27 293a 0a20 2020 2020  ] == '['):.     
-00010a10: 2020 2020 2020 2074 7869 6420 3d20 7365         txid = se
-00010a20: 6c66 2e73 6166 655f 7661 6c75 6528 6f72  lf.safe_value(or
-00010a30: 6465 722c 2027 7478 6964 2729 0a20 2020  der, 'txid').   
-00010a40: 2020 2020 2020 2020 2069 6420 3d20 7365           id = se
-00010a50: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-00010a60: 7869 642c 2030 290a 2020 2020 2020 2020  xid, 0).        
-00010a70: 636c 6965 6e74 4f72 6465 7249 6420 3d20  clientOrderId = 
-00010a80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00010a90: 286f 7264 6572 2c20 2775 7365 7272 6566  (order, 'userref
-00010aa0: 2729 0a20 2020 2020 2020 2072 6177 5472  ').        rawTr
-00010ab0: 6164 6573 203d 2073 656c 662e 7361 6665  ades = self.safe
-00010ac0: 5f76 616c 7565 286f 7264 6572 2c20 2774  _value(order, 't
-00010ad0: 7261 6465 7327 2c20 5b5d 290a 2020 2020  rades', []).    
-00010ae0: 2020 2020 7472 6164 6573 203d 205b 5d0a      trades = [].
-00010af0: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00010b00: 2072 616e 6765 2830 2c20 6c65 6e28 7261   range(0, len(ra
-00010b10: 7754 7261 6465 7329 293a 0a20 2020 2020  wTrades)):.     
-00010b20: 2020 2020 2020 2072 6177 5472 6164 6520         rawTrade 
-00010b30: 3d20 7261 7754 7261 6465 735b 695d 0a20  = rawTrades[i]. 
-00010b40: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00010b50: 696e 7374 616e 6365 2872 6177 5472 6164  instance(rawTrad
-00010b60: 652c 2073 7472 293a 0a20 2020 2020 2020  e, str):.       
-00010b70: 2020 2020 2020 2020 2074 7261 6465 732e           trades.
-00010b80: 6170 7065 6e64 2873 656c 662e 7361 6665  append(self.safe
-00010b90: 5f74 7261 6465 287b 2769 6427 3a20 7261  _trade({'id': ra
-00010ba0: 7754 7261 6465 2c20 276f 7264 6572 4964  wTrade, 'orderId
-00010bb0: 273a 2069 642c 2027 7379 6d62 6f6c 273a  ': id, 'symbol':
-00010bc0: 2073 796d 626f 6c2c 2027 696e 666f 273a   symbol, 'info':
-00010bd0: 207b 7d7d 2929 0a20 2020 2020 2020 2020   {}})).         
-00010be0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00010bf0: 2020 2020 2020 2020 2074 7261 6465 732e           trades.
-00010c00: 6170 7065 6e64 2872 6177 5472 6164 6529  append(rawTrade)
-00010c10: 0a20 2020 2020 2020 2073 746f 7050 7269  .        stopPri
-00010c20: 6365 203d 2073 656c 662e 6f6d 6974 5f7a  ce = self.omit_z
-00010c30: 6572 6f28 7365 6c66 2e73 6166 655f 7374  ero(self.safe_st
-00010c40: 7269 6e67 286f 7264 6572 2c20 2773 746f  ring(order, 'sto
-00010c50: 7070 7269 6365 272c 2073 746f 7050 7269  pprice', stopPri
-00010c60: 6365 2929 0a20 2020 2020 2020 2073 746f  ce)).        sto
-00010c70: 704c 6f73 7350 7269 6365 203d 204e 6f6e  pLossPrice = Non
-00010c80: 650a 2020 2020 2020 2020 7461 6b65 5072  e.        takePr
-00010c90: 6f66 6974 5072 6963 6520 3d20 4e6f 6e65  ofitPrice = None
-00010ca0: 0a20 2020 2020 2020 2069 6620 7479 7065  .        if type
-00010cb0: 2e73 7461 7274 7377 6974 6828 2774 616b  .startswith('tak
-00010cc0: 652d 7072 6f66 6974 2729 3a0a 2020 2020  e-profit'):.    
-00010cd0: 2020 2020 2020 2020 7461 6b65 5072 6f66          takeProf
-00010ce0: 6974 5072 6963 6520 3d20 7365 6c66 2e73  itPrice = self.s
-00010cf0: 6166 655f 7374 7269 6e67 2864 6573 6372  afe_string(descr
-00010d00: 6970 7469 6f6e 2c20 2770 7269 6365 2729  iption, 'price')
-00010d10: 0a20 2020 2020 2020 2020 2020 2070 7269  .            pri
-00010d20: 6365 203d 2073 656c 662e 6f6d 6974 5f7a  ce = self.omit_z
-00010d30: 6572 6f28 7365 6c66 2e73 6166 655f 7374  ero(self.safe_st
-00010d40: 7269 6e67 2864 6573 6372 6970 7469 6f6e  ring(description
-00010d50: 2c20 2770 7269 6365 3227 2929 0a20 2020  , 'price2')).   
-00010d60: 2020 2020 2065 6c69 6620 7479 7065 2e73       elif type.s
-00010d70: 7461 7274 7377 6974 6828 2773 746f 702d  tartswith('stop-
-00010d80: 6c6f 7373 2729 3a0a 2020 2020 2020 2020  loss'):.        
-00010d90: 2020 2020 7374 6f70 4c6f 7373 5072 6963      stopLossPric
-00010da0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-00010db0: 7269 6e67 2864 6573 6372 6970 7469 6f6e  ring(description
-00010dc0: 2c20 2770 7269 6365 2729 0a20 2020 2020  , 'price').     
-00010dd0: 2020 2020 2020 2070 7269 6365 203d 2073         price = s
-00010de0: 656c 662e 6f6d 6974 5f7a 6572 6f28 7365  elf.omit_zero(se
-00010df0: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
-00010e00: 6573 6372 6970 7469 6f6e 2c20 2770 7269  escription, 'pri
-00010e10: 6365 3227 2929 0a20 2020 2020 2020 2072  ce2')).        r
-00010e20: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
-00010e30: 6f72 6465 7228 7b0a 2020 2020 2020 2020  order({.        
-00010e40: 2020 2020 2769 6427 3a20 6964 2c0a 2020      'id': id,.  
-00010e50: 2020 2020 2020 2020 2020 2763 6c69 656e            'clien
-00010e60: 744f 7264 6572 4964 273a 2063 6c69 656e  tOrderId': clien
-00010e70: 744f 7264 6572 4964 2c0a 2020 2020 2020  tOrderId,.      
-00010e80: 2020 2020 2020 2769 6e66 6f27 3a20 6f72        'info': or
-00010e90: 6465 722c 0a20 2020 2020 2020 2020 2020  der,.           
-00010ea0: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
-00010eb0: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
-00010ec0: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
-00010ed0: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
-00010ee0: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
-00010ef0: 2020 2020 2020 276c 6173 7454 7261 6465        'lastTrade
-00010f00: 5469 6d65 7374 616d 7027 3a20 4e6f 6e65  Timestamp': None
-00010f10: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-00010f20: 7461 7475 7327 3a20 7374 6174 7573 2c0a  tatus': status,.
-00010f30: 2020 2020 2020 2020 2020 2020 2773 796d              'sym
-00010f40: 626f 6c27 3a20 7379 6d62 6f6c 2c0a 2020  bol': symbol,.  
-00010f50: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
-00010f60: 3a20 7365 6c66 2e70 6172 7365 5f6f 7264  : self.parse_ord
-00010f70: 6572 5f74 7970 6528 7479 7065 292c 0a20  er_type(type),. 
-00010f80: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-00010f90: 496e 466f 7263 6527 3a20 4e6f 6e65 2c0a  InForce': None,.
-00010fa0: 2020 2020 2020 2020 2020 2020 2770 6f73              'pos
-00010fb0: 744f 6e6c 7927 3a20 6973 506f 7374 4f6e  tOnly': isPostOn
-00010fc0: 6c79 2c0a 2020 2020 2020 2020 2020 2020  ly,.            
-00010fd0: 2773 6964 6527 3a20 7369 6465 2c0a 2020  'side': side,.  
-00010fe0: 2020 2020 2020 2020 2020 2770 7269 6365            'price
-00010ff0: 273a 2070 7269 6365 2c0a 2020 2020 2020  ': price,.      
-00011000: 2020 2020 2020 2773 746f 7050 7269 6365        'stopPrice
-00011010: 273a 2073 746f 7050 7269 6365 2c0a 2020  ': stopPrice,.  
-00011020: 2020 2020 2020 2020 2020 2774 7269 6767            'trigg
-00011030: 6572 5072 6963 6527 3a20 7374 6f70 5072  erPrice': stopPr
-00011040: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
-00011050: 2027 7461 6b65 5072 6f66 6974 5072 6963   'takeProfitPric
-00011060: 6527 3a20 7461 6b65 5072 6f66 6974 5072  e': takeProfitPr
-00011070: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
-00011080: 2027 7374 6f70 4c6f 7373 5072 6963 6527   'stopLossPrice'
-00011090: 3a20 7374 6f70 4c6f 7373 5072 6963 652c  : stopLossPrice,
-000110a0: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-000110b0: 7374 273a 204e 6f6e 652c 0a20 2020 2020  st': None,.     
-000110c0: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
-000110d0: 2061 6d6f 756e 742c 0a20 2020 2020 2020   amount,.       
-000110e0: 2020 2020 2027 6669 6c6c 6564 273a 2066       'filled': f
-000110f0: 696c 6c65 642c 0a20 2020 2020 2020 2020  illed,.         
-00011100: 2020 2027 6176 6572 6167 6527 3a20 6176     'average': av
-00011110: 6572 6167 652c 0a20 2020 2020 2020 2020  erage,.         
-00011120: 2020 2027 7265 6d61 696e 696e 6727 3a20     'remaining': 
-00011130: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00011140: 2020 2766 6565 273a 2066 6565 2c0a 2020    'fee': fee,.  
-00011150: 2020 2020 2020 2020 2020 2774 7261 6465            'trade
-00011160: 7327 3a20 7472 6164 6573 2c0a 2020 2020  s': trades,.    
-00011170: 2020 2020 7d2c 206d 6172 6b65 7429 0a0a      }, market)..
-00011180: 2020 2020 6465 6620 6f72 6465 725f 7265      def order_re
-00011190: 7175 6573 7428 7365 6c66 2c20 6d65 7468  quest(self, meth
-000111a0: 6f64 2c20 7379 6d62 6f6c 2c20 7479 7065  od, symbol, type
-000111b0: 2c20 7265 7175 6573 742c 2070 7269 6365  , request, price
-000111c0: 3d4e 6f6e 652c 2070 6172 616d 733d 7b7d  =None, params={}
-000111d0: 293a 0a20 2020 2020 2020 2063 6c69 656e  ):.        clien
-000111e0: 744f 7264 6572 4964 203d 2073 656c 662e  tOrderId = self.
-000111f0: 7361 6665 5f73 7472 696e 675f 3228 7061  safe_string_2(pa
-00011200: 7261 6d73 2c20 2775 7365 7272 6566 272c  rams, 'userref',
-00011210: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00011220: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-00011230: 203d 2073 656c 662e 6f6d 6974 2870 6172   = self.omit(par
-00011240: 616d 732c 205b 2775 7365 7272 6566 272c  ams, ['userref',
-00011250: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
-00011260: 5d29 0a20 2020 2020 2020 2069 6620 636c  ]).        if cl
-00011270: 6965 6e74 4f72 6465 7249 6420 6973 206e  ientOrderId is n
-00011280: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00011290: 2020 2020 2072 6571 7565 7374 5b27 7573       request['us
-000112a0: 6572 7265 6627 5d20 3d20 636c 6965 6e74  erref'] = client
-000112b0: 4f72 6465 7249 640a 2020 2020 2020 2020  OrderId.        
-000112c0: 7374 6f70 4c6f 7373 5472 6967 6765 7250  stopLossTriggerP
-000112d0: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
-000112e0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-000112f0: 2773 746f 704c 6f73 7350 7269 6365 2729  'stopLossPrice')
-00011300: 0a20 2020 2020 2020 2074 616b 6550 726f  .        takePro
-00011310: 6669 7454 7269 6767 6572 5072 6963 6520  fitTriggerPrice 
-00011320: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00011330: 6e67 2870 6172 616d 732c 2027 7461 6b65  ng(params, 'take
-00011340: 5072 6f66 6974 5072 6963 6527 290a 2020  ProfitPrice').  
-00011350: 2020 2020 2020 6973 5374 6f70 4c6f 7373        isStopLoss
-00011360: 5472 6967 6765 724f 7264 6572 203d 2073  TriggerOrder = s
-00011370: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
-00011380: 6963 6520 6973 206e 6f74 204e 6f6e 650a  ice is not None.
-00011390: 2020 2020 2020 2020 6973 5461 6b65 5072          isTakePr
-000113a0: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-000113b0: 203d 2074 616b 6550 726f 6669 7454 7269   = takeProfitTri
-000113c0: 6767 6572 5072 6963 6520 6973 206e 6f74  ggerPrice is not
-000113d0: 204e 6f6e 650a 2020 2020 2020 2020 6973   None.        is
-000113e0: 5374 6f70 4c6f 7373 4f72 5461 6b65 5072  StopLossOrTakePr
-000113f0: 6f66 6974 5472 6967 6765 7220 3d20 6973  ofitTrigger = is
-00011400: 5374 6f70 4c6f 7373 5472 6967 6765 724f  StopLossTriggerO
-00011410: 7264 6572 206f 7220 6973 5461 6b65 5072  rder or isTakePr
-00011420: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-00011430: 0a20 2020 2020 2020 2074 7261 696c 696e  .        trailin
-00011440: 6741 6d6f 756e 7420 3d20 7365 6c66 2e73  gAmount = self.s
-00011450: 6166 655f 7374 7269 6e67 2870 6172 616d  afe_string(param
-00011460: 732c 2027 7472 6169 6c69 6e67 416d 6f75  s, 'trailingAmou
-00011470: 6e74 2729 0a20 2020 2020 2020 2074 7261  nt').        tra
-00011480: 696c 696e 674c 696d 6974 416d 6f75 6e74  ilingLimitAmount
-00011490: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-000114a0: 696e 6728 7061 7261 6d73 2c20 2774 7261  ing(params, 'tra
-000114b0: 696c 696e 674c 696d 6974 416d 6f75 6e74  ilingLimitAmount
-000114c0: 2729 0a20 2020 2020 2020 2069 7354 7261  ').        isTra
-000114d0: 696c 696e 6741 6d6f 756e 744f 7264 6572  ilingAmountOrder
-000114e0: 203d 2074 7261 696c 696e 6741 6d6f 756e   = trailingAmoun
-000114f0: 7420 6973 206e 6f74 204e 6f6e 650a 2020  t is not None.  
-00011500: 2020 2020 2020 6973 4c69 6d69 744f 7264        isLimitOrd
-00011510: 6572 203d 2074 7970 652e 656e 6473 7769  er = type.endswi
-00011520: 7468 2827 6c69 6d69 7427 2920 2023 2073  th('limit')  # s
-00011530: 7570 706f 7274 696e 6720 6c69 6d69 742c  upporting limit,
-00011540: 2073 746f 702d 6c6f 7373 2d6c 696d 6974   stop-loss-limit
-00011550: 2c20 7461 6b65 2d70 726f 6669 742d 6c69  , take-profit-li
-00011560: 6d69 742c 2065 7463 0a20 2020 2020 2020  mit, etc.       
-00011570: 2069 6620 6973 4c69 6d69 744f 7264 6572   if isLimitOrder
-00011580: 2061 6e64 206e 6f74 2069 7354 7261 696c   and not isTrail
-00011590: 696e 6741 6d6f 756e 744f 7264 6572 3a0a  ingAmountOrder:.
-000115a0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000115b0: 6573 745b 2770 7269 6365 275d 203d 2073  est['price'] = s
-000115c0: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
-000115d0: 6369 7369 6f6e 2873 796d 626f 6c2c 2070  cision(symbol, p
-000115e0: 7269 6365 290a 2020 2020 2020 2020 7265  rice).        re
-000115f0: 6475 6365 4f6e 6c79 203d 2073 656c 662e  duceOnly = self.
-00011600: 7361 6665 5f76 616c 7565 5f32 2870 6172  safe_value_2(par
-00011610: 616d 732c 2027 7265 6475 6365 4f6e 6c79  ams, 'reduceOnly
-00011620: 272c 2027 7265 6475 6365 5f6f 6e6c 7927  ', 'reduce_only'
-00011630: 290a 2020 2020 2020 2020 6966 2069 7353  ).        if isS
-00011640: 746f 704c 6f73 734f 7254 616b 6550 726f  topLossOrTakePro
-00011650: 6669 7454 7269 6767 6572 3a0a 2020 2020  fitTrigger:.    
-00011660: 2020 2020 2020 2020 6966 2069 7353 746f          if isSto
-00011670: 704c 6f73 7354 7269 6767 6572 4f72 6465  pLossTriggerOrde
-00011680: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
-00011690: 2020 2072 6571 7565 7374 5b27 7072 6963     request['pric
-000116a0: 6527 5d20 3d20 7365 6c66 2e70 7269 6365  e'] = self.price
-000116b0: 5f74 6f5f 7072 6563 6973 696f 6e28 7379  _to_precision(sy
-000116c0: 6d62 6f6c 2c20 7374 6f70 4c6f 7373 5472  mbol, stopLossTr
-000116d0: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
-000116e0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000116f0: 734c 696d 6974 4f72 6465 723a 0a20 2020  sLimitOrder:.   
-00011700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011710: 2072 6571 7565 7374 5b27 6f72 6465 7274   request['ordert
-00011720: 7970 6527 5d20 3d20 2773 746f 702d 6c6f  ype'] = 'stop-lo
-00011730: 7373 2d6c 696d 6974 270a 2020 2020 2020  ss-limit'.      
-00011740: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
-00011750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011760: 2020 2020 7265 7175 6573 745b 276f 7264      request['ord
-00011770: 6572 7479 7065 275d 203d 2027 7374 6f70  ertype'] = 'stop
-00011780: 2d6c 6f73 7327 0a20 2020 2020 2020 2020  -loss'.         
-00011790: 2020 2065 6c69 6620 6973 5461 6b65 5072     elif isTakePr
-000117a0: 6f66 6974 5472 6967 6765 724f 7264 6572  ofitTriggerOrder
-000117b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000117c0: 2020 7265 7175 6573 745b 2770 7269 6365    request['price
-000117d0: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
-000117e0: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
-000117f0: 626f 6c2c 2074 616b 6550 726f 6669 7454  bol, takeProfitT
-00011800: 7269 6767 6572 5072 6963 6529 0a20 2020  riggerPrice).   
-00011810: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00011820: 6973 4c69 6d69 744f 7264 6572 3a0a 2020  isLimitOrder:.  
-00011830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011840: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
-00011850: 7479 7065 275d 203d 2027 7461 6b65 2d70  type'] = 'take-p
-00011860: 726f 6669 742d 6c69 6d69 7427 0a20 2020  rofit-limit'.   
-00011870: 2020 2020 2020 2020 2020 2020 2065 6c73               els
-00011880: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00011890: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-000118a0: 6f72 6465 7274 7970 6527 5d20 3d20 2774  ordertype'] = 't
-000118b0: 616b 652d 7072 6f66 6974 270a 2020 2020  ake-profit'.    
-000118c0: 2020 2020 2020 2020 6966 2069 734c 696d          if isLim
-000118d0: 6974 4f72 6465 723a 0a20 2020 2020 2020  itOrder:.       
-000118e0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000118f0: 5b27 7072 6963 6532 275d 203d 2073 656c  ['price2'] = sel
-00011900: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
-00011910: 7369 6f6e 2873 796d 626f 6c2c 2070 7269  sion(symbol, pri
-00011920: 6365 290a 2020 2020 2020 2020 656c 6966  ce).        elif
-00011930: 2069 7354 7261 696c 696e 6741 6d6f 756e   isTrailingAmoun
-00011940: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
-00011950: 2020 2020 7472 6169 6c69 6e67 4163 7469      trailingActi
-00011960: 7661 7469 6f6e 5072 6963 6554 7970 6520  vationPriceType 
-00011970: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00011980: 6e67 2870 6172 616d 732c 2027 7472 6967  ng(params, 'trig
-00011990: 6765 7227 2c20 276c 6173 7427 290a 2020  ger', 'last').  
-000119a0: 2020 2020 2020 2020 2020 7472 6169 6c69            traili
-000119b0: 6e67 416d 6f75 6e74 5374 7269 6e67 203d  ngAmountString =
-000119c0: 2027 2b27 202b 2074 7261 696c 696e 6741   '+' + trailingA
-000119d0: 6d6f 756e 740a 2020 2020 2020 2020 2020  mount.          
-000119e0: 2020 7265 7175 6573 745b 2774 7269 6767    request['trigg
-000119f0: 6572 275d 203d 2074 7261 696c 696e 6741  er'] = trailingA
-00011a00: 6374 6976 6174 696f 6e50 7269 6365 5479  ctivationPriceTy
-00011a10: 7065 0a20 2020 2020 2020 2020 2020 2069  pe.            i
-00011a20: 6620 6973 4c69 6d69 744f 7264 6572 206f  f isLimitOrder o
-00011a30: 7220 2874 7261 696c 696e 674c 696d 6974  r (trailingLimit
-00011a40: 416d 6f75 6e74 2069 7320 6e6f 7420 4e6f  Amount is not No
-00011a50: 6e65 293a 0a20 2020 2020 2020 2020 2020  ne):.           
-00011a60: 2020 2020 206f 6666 7365 7420 3d20 7365       offset = se
-00011a70: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-00011a80: 6172 616d 732c 2027 6f66 6673 6574 272c  arams, 'offset',
-00011a90: 2027 2d27 290a 2020 2020 2020 2020 2020   '-').          
-00011aa0: 2020 2020 2020 7472 6169 6c69 6e67 4c69        trailingLi
-00011ab0: 6d69 7441 6d6f 756e 7453 7472 696e 6720  mitAmountString 
-00011ac0: 3d20 6f66 6673 6574 202b 2073 656c 662e  = offset + self.
-00011ad0: 6e75 6d62 6572 5f74 6f5f 7374 7269 6e67  number_to_string
-00011ae0: 2874 7261 696c 696e 674c 696d 6974 416d  (trailingLimitAm
-00011af0: 6f75 6e74 290a 2020 2020 2020 2020 2020  ount).          
-00011b00: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
-00011b10: 7269 6365 275d 203d 2074 7261 696c 696e  rice'] = trailin
-00011b20: 6741 6d6f 756e 7453 7472 696e 670a 2020  gAmountString.  
-00011b30: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00011b40: 7175 6573 745b 2770 7269 6365 3227 5d20  quest['price2'] 
-00011b50: 3d20 7472 6169 6c69 6e67 4c69 6d69 7441  = trailingLimitA
-00011b60: 6d6f 756e 7453 7472 696e 670a 2020 2020  mountString.    
-00011b70: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-00011b80: 6573 745b 276f 7264 6572 7479 7065 275d  est['ordertype']
-00011b90: 203d 2027 7472 6169 6c69 6e67 2d73 746f   = 'trailing-sto
-00011ba0: 702d 6c69 6d69 7427 0a20 2020 2020 2020  p-limit'.       
-00011bb0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00011bc0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00011bd0: 7374 5b27 7072 6963 6527 5d20 3d20 7472  st['price'] = tr
-00011be0: 6169 6c69 6e67 416d 6f75 6e74 5374 7269  ailingAmountStri
-00011bf0: 6e67 0a20 2020 2020 2020 2020 2020 2020  ng.             
-00011c00: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
-00011c10: 7274 7970 6527 5d20 3d20 2774 7261 696c  rtype'] = 'trail
-00011c20: 696e 672d 7374 6f70 270a 2020 2020 2020  ing-stop'.      
-00011c30: 2020 6966 2072 6564 7563 654f 6e6c 793a    if reduceOnly:
-00011c40: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00011c50: 7565 7374 5b27 7265 6475 6365 5f6f 6e6c  uest['reduce_onl
-00011c60: 7927 5d20 3d20 2774 7275 6527 2020 2320  y'] = 'true'  # 
-00011c70: 6e6f 7420 7573 696e 6720 6861 7361 7474  not using hasatt
-00011c80: 7228 7365 6c66 2c20 626f 6f6c 6561 6e29  r(self, boolean)
-00011c90: 2063 6173 652c 2062 6563 6175 7365 2074   case, because t
-00011ca0: 6865 2075 726c 656e 636f 6465 644e 6573  he urlencodedNes
-00011cb0: 7465 6420 7472 616e 7366 6f72 6d73 2069  ted transforms i
-00011cc0: 7420 696e 746f 2027 5472 7565 2720 7374  t into 'True' st
-00011cd0: 7269 6e67 0a20 2020 2020 2020 2063 6c6f  ring.        clo
-00011ce0: 7365 203d 2073 656c 662e 7361 6665 5f76  se = self.safe_v
-00011cf0: 616c 7565 2870 6172 616d 732c 2027 636c  alue(params, 'cl
-00011d00: 6f73 6527 290a 2020 2020 2020 2020 6966  ose').        if
-00011d10: 2063 6c6f 7365 2069 7320 6e6f 7420 4e6f   close is not No
-00011d20: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00011d30: 636c 6f73 6520 3d20 7365 6c66 2e65 7874  close = self.ext
-00011d40: 656e 6428 7b7d 2c20 636c 6f73 6529 0a20  end({}, close). 
-00011d50: 2020 2020 2020 2020 2020 2063 6c6f 7365             close
-00011d60: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
-00011d70: 655f 7661 6c75 6528 636c 6f73 652c 2027  e_value(close, '
-00011d80: 7072 6963 6527 290a 2020 2020 2020 2020  price').        
-00011d90: 2020 2020 6966 2063 6c6f 7365 5072 6963      if closePric
-00011da0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00011db0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-00011dc0: 6c6f 7365 5b27 7072 6963 6527 5d20 3d20  lose['price'] = 
-00011dd0: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
-00011de0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
-00011df0: 636c 6f73 6550 7269 6365 290a 2020 2020  closePrice).    
-00011e00: 2020 2020 2020 2020 636c 6f73 6550 7269          closePri
-00011e10: 6365 3220 3d20 7365 6c66 2e73 6166 655f  ce2 = self.safe_
-00011e20: 7661 6c75 6528 636c 6f73 652c 2027 7072  value(close, 'pr
-00011e30: 6963 6532 2729 2020 2320 7374 6f70 5072  ice2')  # stopPr
-00011e40: 6963 650a 2020 2020 2020 2020 2020 2020  ice.            
-00011e50: 6966 2063 6c6f 7365 5072 6963 6532 2069  if closePrice2 i
-00011e60: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00011e70: 2020 2020 2020 2020 2020 2020 636c 6f73              clos
-00011e80: 655b 2770 7269 6365 3227 5d20 3d20 7365  e['price2'] = se
-00011e90: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
-00011ea0: 6973 696f 6e28 7379 6d62 6f6c 2c20 636c  ision(symbol, cl
-00011eb0: 6f73 6550 7269 6365 3229 0a20 2020 2020  osePrice2).     
-00011ec0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00011ed0: 636c 6f73 6527 5d20 3d20 636c 6f73 650a  close'] = close.
-00011ee0: 2020 2020 2020 2020 7469 6d65 496e 466f          timeInFo
-00011ef0: 7263 6520 3d20 7365 6c66 2e73 6166 655f  rce = self.safe_
-00011f00: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
-00011f10: 2027 7469 6d65 496e 466f 7263 6527 2c20   'timeInForce', 
-00011f20: 2774 696d 6569 6e66 6f72 6365 2729 0a20  'timeinforce'). 
-00011f30: 2020 2020 2020 2069 6620 7469 6d65 496e         if timeIn
-00011f40: 466f 7263 6520 6973 206e 6f74 204e 6f6e  Force is not Non
-00011f50: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00011f60: 6571 7565 7374 5b27 7469 6d65 696e 666f  equest['timeinfo
-00011f70: 7263 6527 5d20 3d20 7469 6d65 496e 466f  rce'] = timeInFo
-00011f80: 7263 650a 2020 2020 2020 2020 6973 4d61  rce.        isMa
-00011f90: 726b 6574 203d 2028 7479 7065 203d 3d20  rket = (type == 
-00011fa0: 276d 6172 6b65 7427 290a 2020 2020 2020  'market').      
-00011fb0: 2020 706f 7374 4f6e 6c79 203d 204e 6f6e    postOnly = Non
-00011fc0: 650a 2020 2020 2020 2020 706f 7374 4f6e  e.        postOn
-00011fd0: 6c79 2c20 7061 7261 6d73 203d 2073 656c  ly, params = sel
-00011fe0: 662e 6861 6e64 6c65 5f70 6f73 745f 6f6e  f.handle_post_on
-00011ff0: 6c79 2869 734d 6172 6b65 742c 2046 616c  ly(isMarket, Fal
-00012000: 7365 2c20 7061 7261 6d73 290a 2020 2020  se, params).    
-00012010: 2020 2020 6966 2070 6f73 744f 6e6c 793a      if postOnly:
-00012020: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00012030: 7565 7374 5b27 6f66 6c61 6773 275d 203d  uest['oflags'] =
-00012040: 2027 706f 7374 270a 2020 2020 2020 2020   'post'.        
-00012050: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-00012060: 6974 2870 6172 616d 732c 205b 2774 696d  it(params, ['tim
-00012070: 6549 6e46 6f72 6365 272c 2027 7265 6475  eInForce', 'redu
-00012080: 6365 4f6e 6c79 272c 2027 7374 6f70 4c6f  ceOnly', 'stopLo
-00012090: 7373 5072 6963 6527 2c20 2774 616b 6550  ssPrice', 'takeP
-000120a0: 726f 6669 7450 7269 6365 272c 2027 7472  rofitPrice', 'tr
-000120b0: 6169 6c69 6e67 416d 6f75 6e74 272c 2027  ailingAmount', '
-000120c0: 7472 6169 6c69 6e67 4c69 6d69 7441 6d6f  trailingLimitAmo
-000120d0: 756e 7427 2c20 276f 6666 7365 7427 5d29  unt', 'offset'])
-000120e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-000120f0: 5b72 6571 7565 7374 2c20 7061 7261 6d73  [request, params
-00012100: 5d0a 0a20 2020 2061 7379 6e63 2064 6566  ]..    async def
-00012110: 2065 6469 745f 6f72 6465 7228 7365 6c66   edit_order(self
-00012120: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
-00012130: 6c3a 2073 7472 2c20 7479 7065 3a20 4f72  l: str, type: Or
-00012140: 6465 7254 7970 652c 2073 6964 653a 204f  derType, side: O
-00012150: 7264 6572 5369 6465 2c20 616d 6f75 6e74  rderSide, amount
-00012160: 3a20 4e75 6d20 3d20 4e6f 6e65 2c20 7072  : Num = None, pr
-00012170: 6963 653a 204e 756d 203d 204e 6f6e 652c  ice: Num = None,
-00012180: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-00012190: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-000121a0: 2065 6469 7420 6120 7472 6164 6520 6f72   edit a trade or
-000121b0: 6465 720a 2020 2020 2020 2020 3a73 6565  der.        :see
-000121c0: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
-000121d0: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
-000121e0: 7461 672f 5472 6164 696e 672f 6f70 6572  tag/Trading/oper
-000121f0: 6174 696f 6e2f 6564 6974 4f72 6465 720a  ation/editOrder.
-00012200: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00012210: 7472 2069 643a 206f 7264 6572 2069 640a  tr id: order id.
-00012220: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00012230: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
-00012240: 6564 2073 796d 626f 6c20 6f66 2074 6865  ed symbol of the
-00012250: 206d 6172 6b65 7420 746f 2063 7265 6174   market to creat
-00012260: 6520 616e 206f 7264 6572 2069 6e0a 2020  e an order in.  
-00012270: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00012280: 2074 7970 653a 2027 6d61 726b 6574 2720   type: 'market' 
-00012290: 6f72 2027 6c69 6d69 7427 0a20 2020 2020  or 'limit'.     
-000122a0: 2020 203a 7061 7261 6d20 7374 7220 7369     :param str si
-000122b0: 6465 3a20 2762 7579 2720 6f72 2027 7365  de: 'buy' or 'se
-000122c0: 6c6c 270a 2020 2020 2020 2020 3a70 6172  ll'.        :par
-000122d0: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
-000122e0: 2068 6f77 206d 7563 6820 6f66 2074 6865   how much of the
-000122f0: 2063 7572 7265 6e63 7920 796f 7520 7761   currency you wa
-00012300: 6e74 2074 6f20 7472 6164 6520 696e 2075  nt to trade in u
-00012310: 6e69 7473 206f 6620 7468 6520 6261 7365  nits of the base
-00012320: 2063 7572 7265 6e63 790a 2020 2020 2020   currency.      
-00012330: 2020 3a70 6172 616d 2066 6c6f 6174 205b    :param float [
-00012340: 7072 6963 655d 3a20 7468 6520 7072 6963  price]: the pric
-00012350: 6520 6174 2077 6869 6368 2074 6865 206f  e at which the o
-00012360: 7264 6572 2069 7320 746f 2062 6520 6675  rder is to be fu
-00012370: 6c6c 6669 6c6c 6564 2c20 696e 2075 6e69  llfilled, in uni
-00012380: 7473 206f 6620 7468 6520 7175 6f74 6520  ts of the quote 
-00012390: 6375 7272 656e 6379 2c20 6967 6e6f 7265  currency, ignore
-000123a0: 6420 696e 206d 6172 6b65 7420 6f72 6465  d in market orde
-000123b0: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
-000123c0: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
-000123d0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000123e0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-000123f0: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
-00012400: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-00012410: 3a70 6172 616d 2066 6c6f 6174 205b 7061  :param float [pa
-00012420: 7261 6d73 2e73 746f 704c 6f73 7350 7269  rams.stopLossPri
-00012430: 6365 5d3a 202a 6d61 7267 696e 206f 6e6c  ce]: *margin onl
-00012440: 792a 2074 6865 2070 7269 6365 2074 6861  y* the price tha
-00012450: 7420 6120 7374 6f70 206c 6f73 7320 6f72  t a stop loss or
-00012460: 6465 7220 6973 2074 7269 6767 6572 6564  der is triggered
-00012470: 2061 740a 2020 2020 2020 2020 3a70 6172   at.        :par
-00012480: 616d 2066 6c6f 6174 205b 7061 7261 6d73  am float [params
-00012490: 2e74 616b 6550 726f 6669 7450 7269 6365  .takeProfitPrice
-000124a0: 5d3a 202a 6d61 7267 696e 206f 6e6c 792a  ]: *margin only*
-000124b0: 2074 6865 2070 7269 6365 2074 6861 7420   the price that 
-000124c0: 6120 7461 6b65 2070 726f 6669 7420 6f72  a take profit or
-000124d0: 6465 7220 6973 2074 7269 6767 6572 6564  der is triggered
-000124e0: 2061 740a 2020 2020 2020 2020 3a70 6172   at.        :par
-000124f0: 616d 2073 7472 205b 7061 7261 6d73 2e74  am str [params.t
-00012500: 7261 696c 696e 6741 6d6f 756e 745d 3a20  railingAmount]: 
-00012510: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 7468  *margin only* th
-00012520: 6520 7175 6f74 6520 7072 6963 6520 6177  e quote price aw
-00012530: 6179 2066 726f 6d20 7468 6520 6375 7272  ay from the curr
-00012540: 656e 7420 6d61 726b 6574 2070 7269 6365  ent market price
-00012550: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00012560: 7374 7220 5b70 6172 616d 732e 7472 6169  str [params.trai
-00012570: 6c69 6e67 4c69 6d69 7441 6d6f 756e 745d  lingLimitAmount]
-00012580: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
-00012590: 7468 6520 7175 6f74 6520 616d 6f75 6e74  the quote amount
-000125a0: 2061 7761 7920 6672 6f6d 2074 6865 2074   away from the t
-000125b0: 7261 696c 696e 6741 6d6f 756e 740a 2020  railingAmount.  
-000125c0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-000125d0: 205b 7061 7261 6d73 2e6f 6666 7365 745d   [params.offset]
-000125e0: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
-000125f0: 272b 2720 6f72 2027 2d27 2077 6865 7468  '+' or '-' wheth
-00012600: 6572 2079 6f75 2077 616e 7420 7468 6520  er you want the 
-00012610: 7472 6169 6c69 6e67 4c69 6d69 7441 6d6f  trailingLimitAmo
-00012620: 756e 7420 7661 6c75 6520 746f 2062 6520  unt value to be 
-00012630: 706f 7369 7469 7665 206f 7220 6e65 6761  positive or nega
-00012640: 7469 7665 2c20 6465 6661 756c 7420 6973  tive, default is
-00012650: 206e 6567 6174 6976 6520 272d 270a 2020   negative '-'.  
-00012660: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00012670: 205b 7061 7261 6d73 2e74 7269 6767 6572   [params.trigger
-00012680: 5d3a 202a 6d61 7267 696e 206f 6e6c 792a  ]: *margin only*
-00012690: 2074 6865 2061 6374 6976 6174 696f 6e20   the activation 
-000126a0: 7072 6963 6520 7479 7065 2c20 276c 6173  price type, 'las
-000126b0: 7427 206f 7220 2769 6e64 6578 272c 2064  t' or 'index', d
-000126c0: 6566 6175 6c74 2069 7320 276c 6173 7427  efault is 'last'
-000126d0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-000126e0: 7320 6469 6374 3a20 616e 2060 6f72 6465  s dict: an `orde
-000126f0: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
-00012700: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-00012710: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
-00012720: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
-00012730: 2020 2022 2222 0a20 2020 2020 2020 2061     """.        a
-00012740: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00012750: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00012760: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
-00012770: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
-00012780: 2020 2020 2020 6966 206e 6f74 206d 6172        if not mar
-00012790: 6b65 745b 2773 706f 7427 5d3a 0a20 2020  ket['spot']:.   
-000127a0: 2020 2020 2020 2020 2072 6169 7365 204e           raise N
-000127b0: 6f74 5375 7070 6f72 7465 6428 7365 6c66  otSupported(self
-000127c0: 2e69 6420 2b20 2720 6564 6974 4f72 6465  .id + ' editOrde
-000127d0: 7228 2920 646f 6573 206e 6f74 2073 7570  r() does not sup
-000127e0: 706f 7274 2027 202b 206d 6172 6b65 745b  port ' + market[
-000127f0: 2774 7970 6527 5d20 2b20 2720 6f72 6465  'type'] + ' orde
-00012800: 7273 2c20 6f6e 6c79 2073 706f 7420 6f72  rs, only spot or
-00012810: 6465 7273 2061 7265 2061 6363 6570 7465  ders are accepte
-00012820: 6427 290a 2020 2020 2020 2020 7265 7175  d').        requ
-00012830: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00012840: 2020 2020 2774 7869 6427 3a20 6964 2c0a      'txid': id,.
-00012850: 2020 2020 2020 2020 2020 2020 2770 6169              'pai
-00012860: 7227 3a20 6d61 726b 6574 5b27 6964 275d  r': market['id']
-00012870: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00012880: 2020 2020 6966 2061 6d6f 756e 7420 6973      if amount is
-00012890: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-000128a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-000128b0: 766f 6c75 6d65 275d 203d 2073 656c 662e  volume'] = self.
-000128c0: 616d 6f75 6e74 5f74 6f5f 7072 6563 6973  amount_to_precis
-000128d0: 696f 6e28 7379 6d62 6f6c 2c20 616d 6f75  ion(symbol, amou
-000128e0: 6e74 290a 2020 2020 2020 2020 6f72 6465  nt).        orde
-000128f0: 7252 6571 7565 7374 203d 2073 656c 662e  rRequest = self.
-00012900: 6f72 6465 725f 7265 7175 6573 7428 2765  order_request('e
-00012910: 6469 744f 7264 6572 2829 272c 2073 796d  ditOrder()', sym
-00012920: 626f 6c2c 2074 7970 652c 2072 6571 7565  bol, type, reque
-00012930: 7374 2c20 7072 6963 652c 2070 6172 616d  st, price, param
-00012940: 7329 0a20 2020 2020 2020 2072 6573 706f  s).        respo
-00012950: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-00012960: 2e70 7269 7661 7465 506f 7374 4564 6974  .privatePostEdit
-00012970: 4f72 6465 7228 7365 6c66 2e65 7874 656e  Order(self.exten
-00012980: 6428 6f72 6465 7252 6571 7565 7374 5b30  d(orderRequest[0
-00012990: 5d2c 206f 7264 6572 5265 7175 6573 745b  ], orderRequest[
-000129a0: 315d 2929 0a20 2020 2020 2020 2023 0a20  1])).        #. 
-000129b0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-000129c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000129d0: 2022 6572 726f 7222 3a20 5b5d 2c0a 2020   "error": [],.  
-000129e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000129f0: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00012a00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00012a10: 2020 2273 7461 7475 7322 3a20 226f 6b22    "status": "ok"
+0000fc50: 2020 2020 2020 2020 2020 2020 2020 2263                "c
+0000fc60: 6f73 7422 3a20 2230 2e30 3030 3030 3030  ost": "0.0000000
+0000fc70: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0000fc80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000fc90: 6665 6522 3a20 2230 2e30 3030 3030 3030  fee": "0.0000000
+0000fca0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0000fcb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000fcc0: 7072 6963 6522 3a20 2230 2e30 3030 3030  price": "0.00000
+0000fcd0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+0000fce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fcf0: 2022 7374 6f70 7072 6963 6522 3a20 2230   "stopprice": "0
+0000fd00: 2e32 3334 3234 3030 3022 2c0a 2020 2020  .23424000",.    
+0000fd10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000fd20: 2020 2020 2020 2022 6c69 6d69 7470 7269         "limitpri
+0000fd30: 6365 223a 2022 302e 3436 3834 3730 3030  ce": "0.46847000
+0000fd40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0000fd50: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0000fd60: 6973 6322 3a20 2222 2c0a 2020 2020 2020  isc": "",.      
+0000fd70: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000fd80: 2020 2020 2022 6f66 6c61 6773 223a 2022       "oflags": "
+0000fd90: 6663 6971 222c 0a20 2020 2020 2020 2023  fciq",.        #
+0000fda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000fdb0: 2020 2274 7269 6767 6572 223a 2022 696e    "trigger": "in
+0000fdc0: 6465 7822 0a20 2020 2020 2020 2023 2020  dex".        #  
+0000fdd0: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+0000fde0: 2020 2020 2020 2320 2020 2020 207d 0a20        #      }. 
+0000fdf0: 2020 2020 2020 2023 2020 7d0a 2020 2020         #  }.    
+0000fe00: 2020 2020 230a 2020 2020 2020 2020 6465      #.        de
+0000fe10: 7363 7269 7074 696f 6e20 3d20 7365 6c66  scription = self
+0000fe20: 2e73 6166 655f 6469 6374 286f 7264 6572  .safe_dict(order
+0000fe30: 2c20 2764 6573 6372 272c 207b 7d29 0a20  , 'descr', {}). 
+0000fe40: 2020 2020 2020 206f 7264 6572 4465 7363         orderDesc
+0000fe50: 7269 7074 696f 6e20 3d20 4e6f 6e65 0a20  ription = None. 
+0000fe60: 2020 2020 2020 2069 6620 6465 7363 7269         if descri
+0000fe70: 7074 696f 6e20 6973 206e 6f74 204e 6f6e  ption is not Non
+0000fe80: 653a 0a20 2020 2020 2020 2020 2020 206f  e:.            o
+0000fe90: 7264 6572 4465 7363 7269 7074 696f 6e20  rderDescription 
+0000fea0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0000feb0: 6e67 2864 6573 6372 6970 7469 6f6e 2c20  ng(description, 
+0000fec0: 276f 7264 6572 2729 0a20 2020 2020 2020  'order').       
+0000fed0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000fee0: 2020 206f 7264 6572 4465 7363 7269 7074     orderDescript
+0000fef0: 696f 6e20 3d20 7365 6c66 2e73 6166 655f  ion = self.safe_
+0000ff00: 7374 7269 6e67 286f 7264 6572 2c20 2764  string(order, 'd
+0000ff10: 6573 6372 2729 0a20 2020 2020 2020 2073  escr').        s
+0000ff20: 6964 6520 3d20 4e6f 6e65 0a20 2020 2020  ide = None.     
+0000ff30: 2020 2074 7970 6520 3d20 4e6f 6e65 0a20     type = None. 
+0000ff40: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
+0000ff50: 3d20 4e6f 6e65 0a20 2020 2020 2020 2070  = None.        p
+0000ff60: 7269 6365 203d 204e 6f6e 650a 2020 2020  rice = None.    
+0000ff70: 2020 2020 616d 6f75 6e74 203d 204e 6f6e      amount = Non
+0000ff80: 650a 2020 2020 2020 2020 7374 6f70 5072  e.        stopPr
+0000ff90: 6963 6520 3d20 4e6f 6e65 0a20 2020 2020  ice = None.     
+0000ffa0: 2020 2069 6620 6f72 6465 7244 6573 6372     if orderDescr
+0000ffb0: 6970 7469 6f6e 2069 7320 6e6f 7420 4e6f  iption is not No
+0000ffc0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000ffd0: 7061 7274 7320 3d20 6f72 6465 7244 6573  parts = orderDes
+0000ffe0: 6372 6970 7469 6f6e 2e73 706c 6974 2827  cription.split('
+0000fff0: 2027 290a 2020 2020 2020 2020 2020 2020   ').            
+00010000: 7369 6465 203d 2073 656c 662e 7361 6665  side = self.safe
+00010010: 5f73 7472 696e 6728 7061 7274 732c 2030  _string(parts, 0
+00010020: 290a 2020 2020 2020 2020 2020 2020 616d  ).            am
+00010030: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
+00010040: 5f73 7472 696e 6728 7061 7274 732c 2031  _string(parts, 1
+00010050: 290a 2020 2020 2020 2020 2020 2020 6d61  ).            ma
+00010060: 726b 6574 4964 203d 2073 656c 662e 7361  rketId = self.sa
+00010070: 6665 5f73 7472 696e 6728 7061 7274 732c  fe_string(parts,
+00010080: 2032 290a 2020 2020 2020 2020 2020 2020   2).            
+00010090: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
+000100a0: 5f73 7472 696e 6728 7061 7274 732c 2034  _string(parts, 4
+000100b0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
+000100c0: 2074 7970 6520 3d3d 2027 7374 6f70 273a   type == 'stop':
+000100d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000100e0: 2073 746f 7050 7269 6365 203d 2073 656c   stopPrice = sel
+000100f0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00010100: 7274 732c 2036 290a 2020 2020 2020 2020  rts, 6).        
+00010110: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
+00010120: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00010130: 2870 6172 7473 2c20 3929 0a20 2020 2020  (parts, 9).     
+00010140: 2020 2020 2020 2065 6c69 6620 7479 7065         elif type
+00010150: 203d 3d20 276c 696d 6974 273a 0a20 2020   == 'limit':.   
+00010160: 2020 2020 2020 2020 2020 2020 2070 7269               pri
+00010170: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
+00010180: 7472 696e 6728 7061 7274 732c 2035 290a  tring(parts, 5).
+00010190: 2020 2020 2020 2020 7369 6465 203d 2073          side = s
+000101a0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000101b0: 6465 7363 7269 7074 696f 6e2c 2027 7479  description, 'ty
+000101c0: 7065 272c 2073 6964 6529 0a20 2020 2020  pe', side).     
+000101d0: 2020 2074 7970 6520 3d20 7365 6c66 2e73     type = self.s
+000101e0: 6166 655f 7374 7269 6e67 2864 6573 6372  afe_string(descr
+000101f0: 6970 7469 6f6e 2c20 276f 7264 6572 7479  iption, 'orderty
+00010200: 7065 272c 2074 7970 6529 0a20 2020 2020  pe', type).     
+00010210: 2020 206d 6172 6b65 7449 6420 3d20 7365     marketId = se
+00010220: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
+00010230: 6573 6372 6970 7469 6f6e 2c20 2770 6169  escription, 'pai
+00010240: 7227 2c20 6d61 726b 6574 4964 290a 2020  r', marketId).  
+00010250: 2020 2020 2020 666f 756e 644d 6172 6b65        foundMarke
+00010260: 7420 3d20 7365 6c66 2e66 696e 645f 6d61  t = self.find_ma
+00010270: 726b 6574 5f62 795f 616c 746e 616d 655f  rket_by_altname_
+00010280: 6f72 5f69 6428 6d61 726b 6574 4964 290a  or_id(marketId).
+00010290: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
+000102a0: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+000102b0: 2066 6f75 6e64 4d61 726b 6574 2069 7320   foundMarket is 
+000102c0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+000102d0: 2020 2020 2020 6d61 726b 6574 203d 2066        market = f
+000102e0: 6f75 6e64 4d61 726b 6574 0a20 2020 2020  oundMarket.     
+000102f0: 2020 2065 6c69 6620 6d61 726b 6574 4964     elif marketId
+00010300: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00010310: 2020 2020 2020 2020 2020 2320 6465 6c69            # deli
+00010320: 7374 6564 206d 6172 6b65 7420 6964 7320  sted market ids 
+00010330: 676f 2068 6572 650a 2020 2020 2020 2020  go here.        
+00010340: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00010350: 662e 6765 745f 6465 6c69 7374 6564 5f6d  f.get_delisted_m
+00010360: 6172 6b65 745f 6279 5f69 6428 6d61 726b  arket_by_id(mark
+00010370: 6574 4964 290a 2020 2020 2020 2020 7469  etId).        ti
+00010380: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
+00010390: 6166 655f 7469 6d65 7374 616d 7028 6f72  afe_timestamp(or
+000103a0: 6465 722c 2027 6f70 656e 746d 2729 0a20  der, 'opentm'). 
+000103b0: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
+000103c0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+000103d0: 286f 7264 6572 2c20 2776 6f6c 272c 2061  (order, 'vol', a
+000103e0: 6d6f 756e 7429 0a20 2020 2020 2020 2066  mount).        f
+000103f0: 696c 6c65 6420 3d20 7365 6c66 2e73 6166  illed = self.saf
+00010400: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
+00010410: 2776 6f6c 5f65 7865 6327 290a 2020 2020  'vol_exec').    
+00010420: 2020 2020 6665 6520 3d20 4e6f 6e65 0a20      fee = None. 
+00010430: 2020 2020 2020 2023 206b 7261 6b65 6e20         # kraken 
+00010440: 7472 756e 6361 7465 7320 7468 6520 636f  truncates the co
+00010450: 7374 2069 6e20 7468 6520 6170 6920 7265  st in the api re
+00010460: 7370 6f6e 7365 2073 6f20 7765 2077 696c  sponse so we wil
+00010470: 6c20 6967 6e6f 7265 2069 7420 616e 6420  l ignore it and 
+00010480: 6361 6c63 756c 6174 6520 6974 2066 726f  calculate it fro
+00010490: 6d20 6176 6572 6167 6520 2620 6669 6c6c  m average & fill
+000104a0: 6564 0a20 2020 2020 2020 2023 2063 6f73  ed.        # cos
+000104b0: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
+000104c0: 7269 6e67 286f 7264 6572 2c20 2763 6f73  ring(order, 'cos
+000104d0: 7427 290a 2020 2020 2020 2020 7072 6963  t').        pric
+000104e0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+000104f0: 7269 6e67 2864 6573 6372 6970 7469 6f6e  ring(description
+00010500: 2c20 2770 7269 6365 272c 2070 7269 6365  , 'price', price
+00010510: 290a 2020 2020 2020 2020 2320 7768 656e  ).        # when
+00010520: 2074 7970 6520 3d20 7472 6169 6c6c 696e   type = traillin
+00010530: 6720 7374 6f70 2072 6574 7572 6e73 2070  g stop returns p
+00010540: 7269 6365 203d 2027 2b35 302e 3030 3030  rice = '+50.0000
+00010550: 2527 0a20 2020 2020 2020 2069 6620 2870  %'.        if (p
+00010560: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+00010570: 2920 616e 6420 7072 6963 652e 656e 6473  ) and price.ends
+00010580: 7769 7468 2827 2527 293a 0a20 2020 2020  with('%'):.     
+00010590: 2020 2020 2020 2070 7269 6365 203d 204e         price = N
+000105a0: 6f6e 6520 2023 2073 656c 6620 6973 206e  one  # self is n
+000105b0: 6f74 2074 6865 2070 7269 6365 2077 6520  ot the price we 
+000105c0: 7761 6e74 0a20 2020 2020 2020 2069 6620  want.        if 
+000105d0: 2870 7269 6365 2069 7320 4e6f 6e65 2920  (price is None) 
+000105e0: 6f72 2050 7265 6369 7365 2e73 7472 696e  or Precise.strin
+000105f0: 675f 6571 7561 6c73 2870 7269 6365 2c20  g_equals(price, 
+00010600: 2730 2729 3a0a 2020 2020 2020 2020 2020  '0'):.          
+00010610: 2020 7072 6963 6520 3d20 7365 6c66 2e73    price = self.s
+00010620: 6166 655f 7374 7269 6e67 2864 6573 6372  afe_string(descr
+00010630: 6970 7469 6f6e 2c20 2770 7269 6365 3227  iption, 'price2'
+00010640: 290a 2020 2020 2020 2020 6966 2028 7072  ).        if (pr
+00010650: 6963 6520 6973 204e 6f6e 6529 206f 7220  ice is None) or 
+00010660: 5072 6563 6973 652e 7374 7269 6e67 5f65  Precise.string_e
+00010670: 7175 616c 7328 7072 6963 652c 2027 3027  quals(price, '0'
+00010680: 293a 0a20 2020 2020 2020 2020 2020 2070  ):.            p
+00010690: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+000106a0: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+000106b0: 7072 6963 6527 2c20 7072 6963 6529 0a20  price', price). 
+000106c0: 2020 2020 2020 2066 6c61 6773 203d 2073         flags = s
+000106d0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+000106e0: 6f72 6465 722c 2027 6f66 6c61 6773 272c  order, 'oflags',
+000106f0: 2027 2729 0a20 2020 2020 2020 2069 7350   '').        isP
+00010700: 6f73 744f 6e6c 7920 3d20 666c 6167 732e  ostOnly = flags.
+00010710: 6669 6e64 2827 706f 7374 2729 203e 202d  find('post') > -
+00010720: 310a 2020 2020 2020 2020 6176 6572 6167  1.        averag
+00010730: 6520 3d20 7365 6c66 2e73 6166 655f 6e75  e = self.safe_nu
+00010740: 6d62 6572 286f 7264 6572 2c20 2770 7269  mber(order, 'pri
+00010750: 6365 2729 0a20 2020 2020 2020 2069 6620  ce').        if 
+00010760: 6d61 726b 6574 2069 7320 6e6f 7420 4e6f  market is not No
+00010770: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00010780: 7379 6d62 6f6c 203d 206d 6172 6b65 745b  symbol = market[
+00010790: 2773 796d 626f 6c27 5d0a 2020 2020 2020  'symbol'].      
+000107a0: 2020 2020 2020 6966 2027 6665 6527 2069        if 'fee' i
+000107b0: 6e20 6f72 6465 723a 0a20 2020 2020 2020  n order:.       
+000107c0: 2020 2020 2020 2020 2066 6565 436f 7374           feeCost
+000107d0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000107e0: 696e 6728 6f72 6465 722c 2027 6665 6527  ing(order, 'fee'
+000107f0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00010800: 2020 6665 6520 3d20 7b0a 2020 2020 2020    fee = {.      
+00010810: 2020 2020 2020 2020 2020 2020 2020 2763                'c
+00010820: 6f73 7427 3a20 6665 6543 6f73 742c 0a20  ost': feeCost,. 
+00010830: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010840: 2020 2027 7261 7465 273a 204e 6f6e 652c     'rate': None,
+00010850: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010860: 207d 0a20 2020 2020 2020 2020 2020 2020   }.             
+00010870: 2020 2069 6620 666c 6167 732e 6669 6e64     if flags.find
+00010880: 2827 6663 6971 2729 203e 3d20 303a 0a20  ('fciq') >= 0:. 
+00010890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000108a0: 2020 2066 6565 5b27 6375 7272 656e 6379     fee['currency
+000108b0: 275d 203d 206d 6172 6b65 745b 2771 756f  '] = market['quo
+000108c0: 7465 275d 0a20 2020 2020 2020 2020 2020  te'].           
+000108d0: 2020 2020 2065 6c69 6620 666c 6167 732e       elif flags.
+000108e0: 6669 6e64 2827 6663 6962 2729 203e 3d20  find('fcib') >= 
+000108f0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+00010900: 2020 2020 2020 2066 6565 5b27 6375 7272         fee['curr
+00010910: 656e 6379 275d 203d 206d 6172 6b65 745b  ency'] = market[
+00010920: 2762 6173 6527 5d0a 2020 2020 2020 2020  'base'].        
+00010930: 7374 6174 7573 203d 2073 656c 662e 7061  status = self.pa
+00010940: 7273 655f 6f72 6465 725f 7374 6174 7573  rse_order_status
+00010950: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+00010960: 6728 6f72 6465 722c 2027 7374 6174 7573  g(order, 'status
+00010970: 2729 290a 2020 2020 2020 2020 6964 203d  ')).        id =
+00010980: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00010990: 675f 3228 6f72 6465 722c 2027 6964 272c  g_2(order, 'id',
+000109a0: 2027 7478 6964 2729 0a20 2020 2020 2020   'txid').       
+000109b0: 2069 6620 2869 6420 6973 204e 6f6e 6529   if (id is None)
+000109c0: 206f 7220 2869 645b 303a 315d 203d 3d20   or (id[0:1] == 
+000109d0: 275b 2729 3a0a 2020 2020 2020 2020 2020  '['):.          
+000109e0: 2020 7478 6964 203d 2073 656c 662e 7361    txid = self.sa
+000109f0: 6665 5f76 616c 7565 286f 7264 6572 2c20  fe_value(order, 
+00010a00: 2774 7869 6427 290a 2020 2020 2020 2020  'txid').        
+00010a10: 2020 2020 6964 203d 2073 656c 662e 7361      id = self.sa
+00010a20: 6665 5f73 7472 696e 6728 7478 6964 2c20  fe_string(txid, 
+00010a30: 3029 0a20 2020 2020 2020 2063 6c69 656e  0).        clien
+00010a40: 744f 7264 6572 4964 203d 2073 656c 662e  tOrderId = self.
+00010a50: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+00010a60: 722c 2027 7573 6572 7265 6627 290a 2020  r, 'userref').  
+00010a70: 2020 2020 2020 7261 7754 7261 6465 7320        rawTrades 
+00010a80: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00010a90: 6528 6f72 6465 722c 2027 7472 6164 6573  e(order, 'trades
+00010aa0: 272c 205b 5d29 0a20 2020 2020 2020 2074  ', []).        t
+00010ab0: 7261 6465 7320 3d20 5b5d 0a20 2020 2020  rades = [].     
+00010ac0: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00010ad0: 6528 302c 206c 656e 2872 6177 5472 6164  e(0, len(rawTrad
+00010ae0: 6573 2929 3a0a 2020 2020 2020 2020 2020  es)):.          
+00010af0: 2020 7261 7754 7261 6465 203d 2072 6177    rawTrade = raw
+00010b00: 5472 6164 6573 5b69 5d0a 2020 2020 2020  Trades[i].      
+00010b10: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00010b20: 6e63 6528 7261 7754 7261 6465 2c20 7374  nce(rawTrade, st
+00010b30: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
+00010b40: 2020 2020 7472 6164 6573 2e61 7070 656e      trades.appen
+00010b50: 6428 7365 6c66 2e73 6166 655f 7472 6164  d(self.safe_trad
+00010b60: 6528 7b27 6964 273a 2072 6177 5472 6164  e({'id': rawTrad
+00010b70: 652c 2027 6f72 6465 7249 6427 3a20 6964  e, 'orderId': id
+00010b80: 2c20 2773 796d 626f 6c27 3a20 7379 6d62  , 'symbol': symb
+00010b90: 6f6c 2c20 2769 6e66 6f27 3a20 7b7d 7d29  ol, 'info': {}})
+00010ba0: 290a 2020 2020 2020 2020 2020 2020 656c  ).            el
+00010bb0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+00010bc0: 2020 2020 7472 6164 6573 2e61 7070 656e      trades.appen
+00010bd0: 6428 7261 7754 7261 6465 290a 2020 2020  d(rawTrade).    
+00010be0: 2020 2020 7374 6f70 5072 6963 6520 3d20      stopPrice = 
+00010bf0: 7365 6c66 2e6f 6d69 745f 7a65 726f 2873  self.omit_zero(s
+00010c00: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00010c10: 6f72 6465 722c 2027 7374 6f70 7072 6963  order, 'stoppric
+00010c20: 6527 2c20 7374 6f70 5072 6963 6529 290a  e', stopPrice)).
+00010c30: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
+00010c40: 5072 6963 6520 3d20 4e6f 6e65 0a20 2020  Price = None.   
+00010c50: 2020 2020 2074 616b 6550 726f 6669 7450       takeProfitP
+00010c60: 7269 6365 203d 204e 6f6e 650a 2020 2020  rice = None.    
+00010c70: 2020 2020 6966 2074 7970 652e 7374 6172      if type.star
+00010c80: 7473 7769 7468 2827 7461 6b65 2d70 726f  tswith('take-pro
+00010c90: 6669 7427 293a 0a20 2020 2020 2020 2020  fit'):.         
+00010ca0: 2020 2074 616b 6550 726f 6669 7450 7269     takeProfitPri
+00010cb0: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
+00010cc0: 7472 696e 6728 6465 7363 7269 7074 696f  tring(descriptio
+00010cd0: 6e2c 2027 7072 6963 6527 290a 2020 2020  n, 'price').    
+00010ce0: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
+00010cf0: 7365 6c66 2e6f 6d69 745f 7a65 726f 2873  self.omit_zero(s
+00010d00: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00010d10: 6465 7363 7269 7074 696f 6e2c 2027 7072  description, 'pr
+00010d20: 6963 6532 2729 290a 2020 2020 2020 2020  ice2')).        
+00010d30: 656c 6966 2074 7970 652e 7374 6172 7473  elif type.starts
+00010d40: 7769 7468 2827 7374 6f70 2d6c 6f73 7327  with('stop-loss'
+00010d50: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
+00010d60: 746f 704c 6f73 7350 7269 6365 203d 2073  topLossPrice = s
+00010d70: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00010d80: 6465 7363 7269 7074 696f 6e2c 2027 7072  description, 'pr
+00010d90: 6963 6527 290a 2020 2020 2020 2020 2020  ice').          
+00010da0: 2020 7072 6963 6520 3d20 7365 6c66 2e6f    price = self.o
+00010db0: 6d69 745f 7a65 726f 2873 656c 662e 7361  mit_zero(self.sa
+00010dc0: 6665 5f73 7472 696e 6728 6465 7363 7269  fe_string(descri
+00010dd0: 7074 696f 6e2c 2027 7072 6963 6532 2729  ption, 'price2')
+00010de0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00010df0: 2073 656c 662e 7361 6665 5f6f 7264 6572   self.safe_order
+00010e00: 287b 0a20 2020 2020 2020 2020 2020 2027  ({.            '
+00010e10: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
+00010e20: 2020 2020 2027 636c 6965 6e74 4f72 6465       'clientOrde
+00010e30: 7249 6427 3a20 636c 6965 6e74 4f72 6465  rId': clientOrde
+00010e40: 7249 642c 0a20 2020 2020 2020 2020 2020  rId,.           
+00010e50: 2027 696e 666f 273a 206f 7264 6572 2c0a   'info': order,.
+00010e60: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
+00010e70: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
+00010e80: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
+00010e90: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
+00010ea0: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
+00010eb0: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
+00010ec0: 2027 6c61 7374 5472 6164 6554 696d 6573   'lastTradeTimes
+00010ed0: 7461 6d70 273a 204e 6f6e 652c 0a20 2020  tamp': None,.   
+00010ee0: 2020 2020 2020 2020 2027 7374 6174 7573           'status
+00010ef0: 273a 2073 7461 7475 732c 0a20 2020 2020  ': status,.     
+00010f00: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
+00010f10: 2073 796d 626f 6c2c 0a20 2020 2020 2020   symbol,.       
+00010f20: 2020 2020 2027 7479 7065 273a 2073 656c       'type': sel
+00010f30: 662e 7061 7273 655f 6f72 6465 725f 7479  f.parse_order_ty
+00010f40: 7065 2874 7970 6529 2c0a 2020 2020 2020  pe(type),.      
+00010f50: 2020 2020 2020 2774 696d 6549 6e46 6f72        'timeInFor
+00010f60: 6365 273a 204e 6f6e 652c 0a20 2020 2020  ce': None,.     
+00010f70: 2020 2020 2020 2027 706f 7374 4f6e 6c79         'postOnly
+00010f80: 273a 2069 7350 6f73 744f 6e6c 792c 0a20  ': isPostOnly,. 
+00010f90: 2020 2020 2020 2020 2020 2027 7369 6465             'side
+00010fa0: 273a 2073 6964 652c 0a20 2020 2020 2020  ': side,.       
+00010fb0: 2020 2020 2027 7072 6963 6527 3a20 7072       'price': pr
+00010fc0: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
+00010fd0: 2027 7374 6f70 5072 6963 6527 3a20 7374   'stopPrice': st
+00010fe0: 6f70 5072 6963 652c 0a20 2020 2020 2020  opPrice,.       
+00010ff0: 2020 2020 2027 7472 6967 6765 7250 7269       'triggerPri
+00011000: 6365 273a 2073 746f 7050 7269 6365 2c0a  ce': stopPrice,.
+00011010: 2020 2020 2020 2020 2020 2020 2774 616b              'tak
+00011020: 6550 726f 6669 7450 7269 6365 273a 2074  eProfitPrice': t
+00011030: 616b 6550 726f 6669 7450 7269 6365 2c0a  akeProfitPrice,.
+00011040: 2020 2020 2020 2020 2020 2020 2773 746f              'sto
+00011050: 704c 6f73 7350 7269 6365 273a 2073 746f  pLossPrice': sto
+00011060: 704c 6f73 7350 7269 6365 2c0a 2020 2020  pLossPrice,.    
+00011070: 2020 2020 2020 2020 2763 6f73 7427 3a20          'cost': 
+00011080: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00011090: 2020 2761 6d6f 756e 7427 3a20 616d 6f75    'amount': amou
+000110a0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+000110b0: 2766 696c 6c65 6427 3a20 6669 6c6c 6564  'filled': filled
+000110c0: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+000110d0: 7665 7261 6765 273a 2061 7665 7261 6765  verage': average
+000110e0: 2c0a 2020 2020 2020 2020 2020 2020 2772  ,.            'r
+000110f0: 656d 6169 6e69 6e67 273a 204e 6f6e 652c  emaining': None,
+00011100: 0a20 2020 2020 2020 2020 2020 2027 6665  .            'fe
+00011110: 6527 3a20 6665 652c 0a20 2020 2020 2020  e': fee,.       
+00011120: 2020 2020 2027 7472 6164 6573 273a 2074       'trades': t
+00011130: 7261 6465 732c 0a20 2020 2020 2020 207d  rades,.        }
+00011140: 2c20 6d61 726b 6574 290a 0a20 2020 2064  , market)..    d
+00011150: 6566 206f 7264 6572 5f72 6571 7565 7374  ef order_request
+00011160: 2873 656c 662c 206d 6574 686f 642c 2073  (self, method, s
+00011170: 796d 626f 6c2c 2074 7970 652c 2072 6571  ymbol, type, req
+00011180: 7565 7374 2c20 7072 6963 653d 4e6f 6e65  uest, price=None
+00011190: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000111a0: 2020 2020 2020 636c 6965 6e74 4f72 6465        clientOrde
+000111b0: 7249 6420 3d20 7365 6c66 2e73 6166 655f  rId = self.safe_
+000111c0: 7374 7269 6e67 5f32 2870 6172 616d 732c  string_2(params,
+000111d0: 2027 7573 6572 7265 6627 2c20 2763 6c69   'userref', 'cli
+000111e0: 656e 744f 7264 6572 4964 2729 0a20 2020  entOrderId').   
+000111f0: 2020 2020 2070 6172 616d 7320 3d20 7365       params = se
+00011200: 6c66 2e6f 6d69 7428 7061 7261 6d73 2c20  lf.omit(params, 
+00011210: 5b27 7573 6572 7265 6627 2c20 2763 6c69  ['userref', 'cli
+00011220: 656e 744f 7264 6572 4964 275d 290a 2020  entOrderId']).  
+00011230: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
+00011240: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
+00011250: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00011260: 7265 7175 6573 745b 2775 7365 7272 6566  request['userref
+00011270: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
+00011280: 4964 0a20 2020 2020 2020 2073 746f 704c  Id.        stopL
+00011290: 6f73 7354 7269 6767 6572 5072 6963 6520  ossTriggerPrice 
+000112a0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+000112b0: 6e67 2870 6172 616d 732c 2027 7374 6f70  ng(params, 'stop
+000112c0: 4c6f 7373 5072 6963 6527 290a 2020 2020  LossPrice').    
+000112d0: 2020 2020 7461 6b65 5072 6f66 6974 5472      takeProfitTr
+000112e0: 6967 6765 7250 7269 6365 203d 2073 656c  iggerPrice = sel
+000112f0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00011300: 7261 6d73 2c20 2774 616b 6550 726f 6669  rams, 'takeProfi
+00011310: 7450 7269 6365 2729 0a20 2020 2020 2020  tPrice').       
+00011320: 2069 7353 746f 704c 6f73 7354 7269 6767   isStopLossTrigg
+00011330: 6572 4f72 6465 7220 3d20 7374 6f70 4c6f  erOrder = stopLo
+00011340: 7373 5472 6967 6765 7250 7269 6365 2069  ssTriggerPrice i
+00011350: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00011360: 2020 2069 7354 616b 6550 726f 6669 7454     isTakeProfitT
+00011370: 7269 6767 6572 4f72 6465 7220 3d20 7461  riggerOrder = ta
+00011380: 6b65 5072 6f66 6974 5472 6967 6765 7250  keProfitTriggerP
+00011390: 7269 6365 2069 7320 6e6f 7420 4e6f 6e65  rice is not None
+000113a0: 0a20 2020 2020 2020 2069 7353 746f 704c  .        isStopL
+000113b0: 6f73 734f 7254 616b 6550 726f 6669 7454  ossOrTakeProfitT
+000113c0: 7269 6767 6572 203d 2069 7353 746f 704c  rigger = isStopL
+000113d0: 6f73 7354 7269 6767 6572 4f72 6465 7220  ossTriggerOrder 
+000113e0: 6f72 2069 7354 616b 6550 726f 6669 7454  or isTakeProfitT
+000113f0: 7269 6767 6572 4f72 6465 720a 2020 2020  riggerOrder.    
+00011400: 2020 2020 7472 6169 6c69 6e67 416d 6f75      trailingAmou
+00011410: 6e74 203d 2073 656c 662e 7361 6665 5f73  nt = self.safe_s
+00011420: 7472 696e 6728 7061 7261 6d73 2c20 2774  tring(params, 't
+00011430: 7261 696c 696e 6741 6d6f 756e 7427 290a  railingAmount').
+00011440: 2020 2020 2020 2020 7472 6169 6c69 6e67          trailing
+00011450: 4c69 6d69 7441 6d6f 756e 7420 3d20 7365  LimitAmount = se
+00011460: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+00011470: 6172 616d 732c 2027 7472 6169 6c69 6e67  arams, 'trailing
+00011480: 4c69 6d69 7441 6d6f 756e 7427 290a 2020  LimitAmount').  
+00011490: 2020 2020 2020 6973 5472 6169 6c69 6e67        isTrailing
+000114a0: 416d 6f75 6e74 4f72 6465 7220 3d20 7472  AmountOrder = tr
+000114b0: 6169 6c69 6e67 416d 6f75 6e74 2069 7320  ailingAmount is 
+000114c0: 6e6f 7420 4e6f 6e65 0a20 2020 2020 2020  not None.       
+000114d0: 2069 734c 696d 6974 4f72 6465 7220 3d20   isLimitOrder = 
+000114e0: 7479 7065 2e65 6e64 7377 6974 6828 276c  type.endswith('l
+000114f0: 696d 6974 2729 2020 2320 7375 7070 6f72  imit')  # suppor
+00011500: 7469 6e67 206c 696d 6974 2c20 7374 6f70  ting limit, stop
+00011510: 2d6c 6f73 732d 6c69 6d69 742c 2074 616b  -loss-limit, tak
+00011520: 652d 7072 6f66 6974 2d6c 696d 6974 2c20  e-profit-limit, 
+00011530: 6574 630a 2020 2020 2020 2020 6966 2069  etc.        if i
+00011540: 734c 696d 6974 4f72 6465 7220 616e 6420  sLimitOrder and 
+00011550: 6e6f 7420 6973 5472 6169 6c69 6e67 416d  not isTrailingAm
+00011560: 6f75 6e74 4f72 6465 723a 0a20 2020 2020  ountOrder:.     
+00011570: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00011580: 7072 6963 6527 5d20 3d20 7365 6c66 2e70  price'] = self.p
+00011590: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
+000115a0: 6e28 7379 6d62 6f6c 2c20 7072 6963 6529  n(symbol, price)
+000115b0: 0a20 2020 2020 2020 2072 6564 7563 654f  .        reduceO
+000115c0: 6e6c 7920 3d20 7365 6c66 2e73 6166 655f  nly = self.safe_
+000115d0: 7661 6c75 655f 3228 7061 7261 6d73 2c20  value_2(params, 
+000115e0: 2772 6564 7563 654f 6e6c 7927 2c20 2772  'reduceOnly', 'r
+000115f0: 6564 7563 655f 6f6e 6c79 2729 0a20 2020  educe_only').   
+00011600: 2020 2020 2069 6620 6973 5374 6f70 4c6f       if isStopLo
+00011610: 7373 4f72 5461 6b65 5072 6f66 6974 5472  ssOrTakeProfitTr
+00011620: 6967 6765 723a 0a20 2020 2020 2020 2020  igger:.         
+00011630: 2020 2069 6620 6973 5374 6f70 4c6f 7373     if isStopLoss
+00011640: 5472 6967 6765 724f 7264 6572 3a0a 2020  TriggerOrder:.  
+00011650: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00011660: 7175 6573 745b 2770 7269 6365 275d 203d  quest['price'] =
+00011670: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
+00011680: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
+00011690: 2073 746f 704c 6f73 7354 7269 6767 6572   stopLossTrigger
+000116a0: 5072 6963 6529 0a20 2020 2020 2020 2020  Price).         
+000116b0: 2020 2020 2020 2069 6620 6973 4c69 6d69         if isLimi
+000116c0: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
+000116d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000116e0: 6573 745b 276f 7264 6572 7479 7065 275d  est['ordertype']
+000116f0: 203d 2027 7374 6f70 2d6c 6f73 732d 6c69   = 'stop-loss-li
+00011700: 6d69 7427 0a20 2020 2020 2020 2020 2020  mit'.           
+00011710: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00011720: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00011730: 6571 7565 7374 5b27 6f72 6465 7274 7970  equest['ordertyp
+00011740: 6527 5d20 3d20 2773 746f 702d 6c6f 7373  e'] = 'stop-loss
+00011750: 270a 2020 2020 2020 2020 2020 2020 656c  '.            el
+00011760: 6966 2069 7354 616b 6550 726f 6669 7454  if isTakeProfitT
+00011770: 7269 6767 6572 4f72 6465 723a 0a20 2020  riggerOrder:.   
+00011780: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00011790: 7565 7374 5b27 7072 6963 6527 5d20 3d20  uest['price'] = 
+000117a0: 7365 6c66 2e70 7269 6365 5f74 6f5f 7072  self.price_to_pr
+000117b0: 6563 6973 696f 6e28 7379 6d62 6f6c 2c20  ecision(symbol, 
+000117c0: 7461 6b65 5072 6f66 6974 5472 6967 6765  takeProfitTrigge
+000117d0: 7250 7269 6365 290a 2020 2020 2020 2020  rPrice).        
+000117e0: 2020 2020 2020 2020 6966 2069 734c 696d          if isLim
+000117f0: 6974 4f72 6465 723a 0a20 2020 2020 2020  itOrder:.       
+00011800: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00011810: 7565 7374 5b27 6f72 6465 7274 7970 6527  uest['ordertype'
+00011820: 5d20 3d20 2774 616b 652d 7072 6f66 6974  ] = 'take-profit
+00011830: 2d6c 696d 6974 270a 2020 2020 2020 2020  -limit'.        
+00011840: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+00011850: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011860: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+00011870: 7479 7065 275d 203d 2027 7461 6b65 2d70  type'] = 'take-p
+00011880: 726f 6669 7427 0a20 2020 2020 2020 2020  rofit'.         
+00011890: 2020 2069 6620 6973 4c69 6d69 744f 7264     if isLimitOrd
+000118a0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+000118b0: 2020 2020 7265 7175 6573 745b 2770 7269      request['pri
+000118c0: 6365 3227 5d20 3d20 7365 6c66 2e70 7269  ce2'] = self.pri
+000118d0: 6365 5f74 6f5f 7072 6563 6973 696f 6e28  ce_to_precision(
+000118e0: 7379 6d62 6f6c 2c20 7072 6963 6529 0a20  symbol, price). 
+000118f0: 2020 2020 2020 2065 6c69 6620 6973 5472         elif isTr
+00011900: 6169 6c69 6e67 416d 6f75 6e74 4f72 6465  ailingAmountOrde
+00011910: 723a 0a20 2020 2020 2020 2020 2020 2074  r:.            t
+00011920: 7261 696c 696e 6741 6374 6976 6174 696f  railingActivatio
+00011930: 6e50 7269 6365 5479 7065 203d 2073 656c  nPriceType = sel
+00011940: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00011950: 7261 6d73 2c20 2774 7269 6767 6572 272c  rams, 'trigger',
+00011960: 2027 6c61 7374 2729 0a20 2020 2020 2020   'last').       
+00011970: 2020 2020 2074 7261 696c 696e 6741 6d6f       trailingAmo
+00011980: 756e 7453 7472 696e 6720 3d20 272b 2720  untString = '+' 
+00011990: 2b20 7472 6169 6c69 6e67 416d 6f75 6e74  + trailingAmount
+000119a0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000119b0: 7565 7374 5b27 7472 6967 6765 7227 5d20  uest['trigger'] 
+000119c0: 3d20 7472 6169 6c69 6e67 4163 7469 7661  = trailingActiva
+000119d0: 7469 6f6e 5072 6963 6554 7970 650a 2020  tionPriceType.  
+000119e0: 2020 2020 2020 2020 2020 6966 2069 734c            if isL
+000119f0: 696d 6974 4f72 6465 7220 6f72 2028 7472  imitOrder or (tr
+00011a00: 6169 6c69 6e67 4c69 6d69 7441 6d6f 756e  ailingLimitAmoun
+00011a10: 7420 6973 206e 6f74 204e 6f6e 6529 3a0a  t is not None):.
+00011a20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011a30: 6f66 6673 6574 203d 2073 656c 662e 7361  offset = self.sa
+00011a40: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+00011a50: 2c20 276f 6666 7365 7427 2c20 272d 2729  , 'offset', '-')
+00011a60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011a70: 2074 7261 696c 696e 674c 696d 6974 416d   trailingLimitAm
+00011a80: 6f75 6e74 5374 7269 6e67 203d 206f 6666  ountString = off
+00011a90: 7365 7420 2b20 7365 6c66 2e6e 756d 6265  set + self.numbe
+00011aa0: 725f 746f 5f73 7472 696e 6728 7472 6169  r_to_string(trai
+00011ab0: 6c69 6e67 4c69 6d69 7441 6d6f 756e 7429  lingLimitAmount)
+00011ac0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011ad0: 2072 6571 7565 7374 5b27 7072 6963 6527   request['price'
+00011ae0: 5d20 3d20 7472 6169 6c69 6e67 416d 6f75  ] = trailingAmou
+00011af0: 6e74 5374 7269 6e67 0a20 2020 2020 2020  ntString.       
+00011b00: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00011b10: 5b27 7072 6963 6532 275d 203d 2074 7261  ['price2'] = tra
+00011b20: 696c 696e 674c 696d 6974 416d 6f75 6e74  ilingLimitAmount
+00011b30: 5374 7269 6e67 0a20 2020 2020 2020 2020  String.         
+00011b40: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+00011b50: 6f72 6465 7274 7970 6527 5d20 3d20 2774  ordertype'] = 't
+00011b60: 7261 696c 696e 672d 7374 6f70 2d6c 696d  railing-stop-lim
+00011b70: 6974 270a 2020 2020 2020 2020 2020 2020  it'.            
+00011b80: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00011b90: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
+00011ba0: 7269 6365 275d 203d 2074 7261 696c 696e  rice'] = trailin
+00011bb0: 6741 6d6f 756e 7453 7472 696e 670a 2020  gAmountString.  
+00011bc0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00011bd0: 7175 6573 745b 276f 7264 6572 7479 7065  quest['ordertype
+00011be0: 275d 203d 2027 7472 6169 6c69 6e67 2d73  '] = 'trailing-s
+00011bf0: 746f 7027 0a20 2020 2020 2020 2069 6620  top'.        if 
+00011c00: 7265 6475 6365 4f6e 6c79 3a0a 2020 2020  reduceOnly:.    
+00011c10: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00011c20: 2772 6564 7563 655f 6f6e 6c79 275d 203d  'reduce_only'] =
+00011c30: 2027 7472 7565 2720 2023 206e 6f74 2075   'true'  # not u
+00011c40: 7369 6e67 2068 6173 6174 7472 2873 656c  sing hasattr(sel
+00011c50: 662c 2062 6f6f 6c65 616e 2920 6361 7365  f, boolean) case
+00011c60: 2c20 6265 6361 7573 6520 7468 6520 7572  , because the ur
+00011c70: 6c65 6e63 6f64 6564 4e65 7374 6564 2074  lencodedNested t
+00011c80: 7261 6e73 666f 726d 7320 6974 2069 6e74  ransforms it int
+00011c90: 6f20 2754 7275 6527 2073 7472 696e 670a  o 'True' string.
+00011ca0: 2020 2020 2020 2020 636c 6f73 6520 3d20          close = 
+00011cb0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00011cc0: 7061 7261 6d73 2c20 2763 6c6f 7365 2729  params, 'close')
+00011cd0: 0a20 2020 2020 2020 2069 6620 636c 6f73  .        if clos
+00011ce0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+00011cf0: 2020 2020 2020 2020 2020 2063 6c6f 7365             close
+00011d00: 203d 2073 656c 662e 6578 7465 6e64 287b   = self.extend({
+00011d10: 7d2c 2063 6c6f 7365 290a 2020 2020 2020  }, close).      
+00011d20: 2020 2020 2020 636c 6f73 6550 7269 6365        closePrice
+00011d30: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00011d40: 7565 2863 6c6f 7365 2c20 2770 7269 6365  ue(close, 'price
+00011d50: 2729 0a20 2020 2020 2020 2020 2020 2069  ').            i
+00011d60: 6620 636c 6f73 6550 7269 6365 2069 7320  f closePrice is 
+00011d70: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00011d80: 2020 2020 2020 2020 2020 636c 6f73 655b            close[
+00011d90: 2770 7269 6365 275d 203d 2073 656c 662e  'price'] = self.
+00011da0: 7072 6963 655f 746f 5f70 7265 6369 7369  price_to_precisi
+00011db0: 6f6e 2873 796d 626f 6c2c 2063 6c6f 7365  on(symbol, close
+00011dc0: 5072 6963 6529 0a20 2020 2020 2020 2020  Price).         
+00011dd0: 2020 2063 6c6f 7365 5072 6963 6532 203d     closePrice2 =
+00011de0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00011df0: 2863 6c6f 7365 2c20 2770 7269 6365 3227  (close, 'price2'
+00011e00: 2920 2023 2073 746f 7050 7269 6365 0a20  )  # stopPrice. 
+00011e10: 2020 2020 2020 2020 2020 2069 6620 636c             if cl
+00011e20: 6f73 6550 7269 6365 3220 6973 206e 6f74  osePrice2 is not
+00011e30: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00011e40: 2020 2020 2020 2063 6c6f 7365 5b27 7072         close['pr
+00011e50: 6963 6532 275d 203d 2073 656c 662e 7072  ice2'] = self.pr
+00011e60: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
+00011e70: 2873 796d 626f 6c2c 2063 6c6f 7365 5072  (symbol, closePr
+00011e80: 6963 6532 290a 2020 2020 2020 2020 2020  ice2).          
+00011e90: 2020 7265 7175 6573 745b 2763 6c6f 7365    request['close
+00011ea0: 275d 203d 2063 6c6f 7365 0a20 2020 2020  '] = close.     
+00011eb0: 2020 2074 696d 6549 6e46 6f72 6365 203d     timeInForce =
+00011ec0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00011ed0: 675f 3228 7061 7261 6d73 2c20 2774 696d  g_2(params, 'tim
+00011ee0: 6549 6e46 6f72 6365 272c 2027 7469 6d65  eInForce', 'time
+00011ef0: 696e 666f 7263 6527 290a 2020 2020 2020  inforce').      
+00011f00: 2020 6966 2074 696d 6549 6e46 6f72 6365    if timeInForce
+00011f10: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00011f20: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00011f30: 745b 2774 696d 6569 6e66 6f72 6365 275d  t['timeinforce']
+00011f40: 203d 2074 696d 6549 6e46 6f72 6365 0a20   = timeInForce. 
+00011f50: 2020 2020 2020 2069 734d 6172 6b65 7420         isMarket 
+00011f60: 3d20 2874 7970 6520 3d3d 2027 6d61 726b  = (type == 'mark
+00011f70: 6574 2729 0a20 2020 2020 2020 2070 6f73  et').        pos
+00011f80: 744f 6e6c 7920 3d20 4e6f 6e65 0a20 2020  tOnly = None.   
+00011f90: 2020 2020 2070 6f73 744f 6e6c 792c 2070       postOnly, p
+00011fa0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
+00011fb0: 646c 655f 706f 7374 5f6f 6e6c 7928 6973  dle_post_only(is
+00011fc0: 4d61 726b 6574 2c20 4661 6c73 652c 2070  Market, False, p
+00011fd0: 6172 616d 7329 0a20 2020 2020 2020 2069  arams).        i
+00011fe0: 6620 706f 7374 4f6e 6c79 3a0a 2020 2020  f postOnly:.    
+00011ff0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00012000: 276f 666c 6167 7327 5d20 3d20 2770 6f73  'oflags'] = 'pos
+00012010: 7427 0a20 2020 2020 2020 2070 6172 616d  t'.        param
+00012020: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+00012030: 7261 6d73 2c20 5b27 7469 6d65 496e 466f  rams, ['timeInFo
+00012040: 7263 6527 2c20 2772 6564 7563 654f 6e6c  rce', 'reduceOnl
+00012050: 7927 2c20 2773 746f 704c 6f73 7350 7269  y', 'stopLossPri
+00012060: 6365 272c 2027 7461 6b65 5072 6f66 6974  ce', 'takeProfit
+00012070: 5072 6963 6527 2c20 2774 7261 696c 696e  Price', 'trailin
+00012080: 6741 6d6f 756e 7427 2c20 2774 7261 696c  gAmount', 'trail
+00012090: 696e 674c 696d 6974 416d 6f75 6e74 272c  ingLimitAmount',
+000120a0: 2027 6f66 6673 6574 275d 290a 2020 2020   'offset']).    
+000120b0: 2020 2020 7265 7475 726e 205b 7265 7175      return [requ
+000120c0: 6573 742c 2070 6172 616d 735d 0a0a 2020  est, params]..  
+000120d0: 2020 6173 796e 6320 6465 6620 6564 6974    async def edit
+000120e0: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
+000120f0: 2073 7472 2c20 7379 6d62 6f6c 3a20 7374   str, symbol: st
+00012100: 722c 2074 7970 653a 204f 7264 6572 5479  r, type: OrderTy
+00012110: 7065 2c20 7369 6465 3a20 4f72 6465 7253  pe, side: OrderS
+00012120: 6964 652c 2061 6d6f 756e 743a 204e 756d  ide, amount: Num
+00012130: 203d 204e 6f6e 652c 2070 7269 6365 3a20   = None, price: 
+00012140: 4e75 6d20 3d20 4e6f 6e65 2c20 7061 7261  Num = None, para
+00012150: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+00012160: 2222 220a 2020 2020 2020 2020 6564 6974  """.        edit
+00012170: 2061 2074 7261 6465 206f 7264 6572 0a20   a trade order. 
+00012180: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
+00012190: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
+000121a0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f54  .com/rest/#tag/T
+000121b0: 7261 6469 6e67 2f6f 7065 7261 7469 6f6e  rading/operation
+000121c0: 2f65 6469 744f 7264 6572 0a20 2020 2020  /editOrder.     
+000121d0: 2020 203a 7061 7261 6d20 7374 7220 6964     :param str id
+000121e0: 3a20 6f72 6465 7220 6964 0a20 2020 2020  : order id.     
+000121f0: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
+00012200: 6d62 6f6c 3a20 756e 6966 6965 6420 7379  mbol: unified sy
+00012210: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
+00012220: 6574 2074 6f20 6372 6561 7465 2061 6e20  et to create an 
+00012230: 6f72 6465 7220 696e 0a20 2020 2020 2020  order in.       
+00012240: 203a 7061 7261 6d20 7374 7220 7479 7065   :param str type
+00012250: 3a20 276d 6172 6b65 7427 206f 7220 276c  : 'market' or 'l
+00012260: 696d 6974 270a 2020 2020 2020 2020 3a70  imit'.        :p
+00012270: 6172 616d 2073 7472 2073 6964 653a 2027  aram str side: '
+00012280: 6275 7927 206f 7220 2773 656c 6c27 0a20  buy' or 'sell'. 
+00012290: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
+000122a0: 6f61 7420 616d 6f75 6e74 3a20 686f 7720  oat amount: how 
+000122b0: 6d75 6368 206f 6620 7468 6520 6375 7272  much of the curr
+000122c0: 656e 6379 2079 6f75 2077 616e 7420 746f  ency you want to
+000122d0: 2074 7261 6465 2069 6e20 756e 6974 7320   trade in units 
+000122e0: 6f66 2074 6865 2062 6173 6520 6375 7272  of the base curr
+000122f0: 656e 6379 0a20 2020 2020 2020 203a 7061  ency.        :pa
+00012300: 7261 6d20 666c 6f61 7420 5b70 7269 6365  ram float [price
+00012310: 5d3a 2074 6865 2070 7269 6365 2061 7420  ]: the price at 
+00012320: 7768 6963 6820 7468 6520 6f72 6465 7220  which the order 
+00012330: 6973 2074 6f20 6265 2066 756c 6c66 696c  is to be fullfil
+00012340: 6c65 642c 2069 6e20 756e 6974 7320 6f66  led, in units of
+00012350: 2074 6865 2071 756f 7465 2063 7572 7265   the quote curre
+00012360: 6e63 792c 2069 676e 6f72 6564 2069 6e20  ncy, ignored in 
+00012370: 6d61 726b 6574 206f 7264 6572 730a 2020  market orders.  
+00012380: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00012390: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
+000123a0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+000123b0: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
+000123c0: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
+000123d0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
+000123e0: 6d20 666c 6f61 7420 5b70 6172 616d 732e  m float [params.
+000123f0: 7374 6f70 4c6f 7373 5072 6963 655d 3a20  stopLossPrice]: 
+00012400: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 7468  *margin only* th
+00012410: 6520 7072 6963 6520 7468 6174 2061 2073  e price that a s
+00012420: 746f 7020 6c6f 7373 206f 7264 6572 2069  top loss order i
+00012430: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
+00012440: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
+00012450: 6f61 7420 5b70 6172 616d 732e 7461 6b65  oat [params.take
+00012460: 5072 6f66 6974 5072 6963 655d 3a20 2a6d  ProfitPrice]: *m
+00012470: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
+00012480: 7072 6963 6520 7468 6174 2061 2074 616b  price that a tak
+00012490: 6520 7072 6f66 6974 206f 7264 6572 2069  e profit order i
+000124a0: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
+000124b0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+000124c0: 7220 5b70 6172 616d 732e 7472 6169 6c69  r [params.traili
+000124d0: 6e67 416d 6f75 6e74 5d3a 202a 6d61 7267  ngAmount]: *marg
+000124e0: 696e 206f 6e6c 792a 2074 6865 2071 756f  in only* the quo
+000124f0: 7465 2070 7269 6365 2061 7761 7920 6672  te price away fr
+00012500: 6f6d 2074 6865 2063 7572 7265 6e74 206d  om the current m
+00012510: 6172 6b65 7420 7072 6963 650a 2020 2020  arket price.    
+00012520: 2020 2020 3a70 6172 616d 2073 7472 205b      :param str [
+00012530: 7061 7261 6d73 2e74 7261 696c 696e 674c  params.trailingL
+00012540: 696d 6974 416d 6f75 6e74 5d3a 202a 6d61  imitAmount]: *ma
+00012550: 7267 696e 206f 6e6c 792a 2074 6865 2071  rgin only* the q
+00012560: 756f 7465 2061 6d6f 756e 7420 6177 6179  uote amount away
+00012570: 2066 726f 6d20 7468 6520 7472 6169 6c69   from the traili
+00012580: 6e67 416d 6f75 6e74 0a20 2020 2020 2020  ngAmount.       
+00012590: 203a 7061 7261 6d20 7374 7220 5b70 6172   :param str [par
+000125a0: 616d 732e 6f66 6673 6574 5d3a 202a 6d61  ams.offset]: *ma
+000125b0: 7267 696e 206f 6e6c 792a 2027 2b27 206f  rgin only* '+' o
+000125c0: 7220 272d 2720 7768 6574 6865 7220 796f  r '-' whether yo
+000125d0: 7520 7761 6e74 2074 6865 2074 7261 696c  u want the trail
+000125e0: 696e 674c 696d 6974 416d 6f75 6e74 2076  ingLimitAmount v
+000125f0: 616c 7565 2074 6f20 6265 2070 6f73 6974  alue to be posit
+00012600: 6976 6520 6f72 206e 6567 6174 6976 652c  ive or negative,
+00012610: 2064 6566 6175 6c74 2069 7320 6e65 6761   default is nega
+00012620: 7469 7665 2027 2d27 0a20 2020 2020 2020  tive '-'.       
+00012630: 203a 7061 7261 6d20 7374 7220 5b70 6172   :param str [par
+00012640: 616d 732e 7472 6967 6765 725d 3a20 2a6d  ams.trigger]: *m
+00012650: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
+00012660: 6163 7469 7661 7469 6f6e 2070 7269 6365  activation price
+00012670: 2074 7970 652c 2027 6c61 7374 2720 6f72   type, 'last' or
+00012680: 2027 696e 6465 7827 2c20 6465 6661 756c   'index', defaul
+00012690: 7420 6973 2027 6c61 7374 270a 2020 2020  t is 'last'.    
+000126a0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+000126b0: 743a 2061 6e20 606f 7264 6572 2073 7472  t: an `order str
+000126c0: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
+000126d0: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+000126e0: 3f69 643d 6f72 6465 722d 7374 7275 6374  ?id=order-struct
+000126f0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
+00012700: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
+00012710: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00012720: 7328 290a 2020 2020 2020 2020 6d61 726b  s().        mark
+00012730: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
+00012740: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
+00012750: 2069 6620 6e6f 7420 6d61 726b 6574 5b27   if not market['
+00012760: 7370 6f74 275d 3a0a 2020 2020 2020 2020  spot']:.        
+00012770: 2020 2020 7261 6973 6520 4e6f 7453 7570      raise NotSup
+00012780: 706f 7274 6564 2873 656c 662e 6964 202b  ported(self.id +
+00012790: 2027 2065 6469 744f 7264 6572 2829 2064   ' editOrder() d
+000127a0: 6f65 7320 6e6f 7420 7375 7070 6f72 7420  oes not support 
+000127b0: 2720 2b20 6d61 726b 6574 5b27 7479 7065  ' + market['type
+000127c0: 275d 202b 2027 206f 7264 6572 732c 206f  '] + ' orders, o
+000127d0: 6e6c 7920 7370 6f74 206f 7264 6572 7320  nly spot orders 
+000127e0: 6172 6520 6163 6365 7074 6564 2729 0a20  are accepted'). 
+000127f0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00012800: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00012810: 7478 6964 273a 2069 642c 0a20 2020 2020  txid': id,.     
+00012820: 2020 2020 2020 2027 7061 6972 273a 206d         'pair': m
+00012830: 6172 6b65 745b 2769 6427 5d2c 0a20 2020  arket['id'],.   
+00012840: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
+00012850: 6620 616d 6f75 6e74 2069 7320 6e6f 7420  f amount is not 
+00012860: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00012870: 2020 7265 7175 6573 745b 2776 6f6c 756d    request['volum
+00012880: 6527 5d20 3d20 7365 6c66 2e61 6d6f 756e  e'] = self.amoun
+00012890: 745f 746f 5f70 7265 6369 7369 6f6e 2873  t_to_precision(s
+000128a0: 796d 626f 6c2c 2061 6d6f 756e 7429 0a20  ymbol, amount). 
+000128b0: 2020 2020 2020 206f 7264 6572 5265 7175         orderRequ
+000128c0: 6573 7420 3d20 7365 6c66 2e6f 7264 6572  est = self.order
+000128d0: 5f72 6571 7565 7374 2827 6564 6974 4f72  _request('editOr
+000128e0: 6465 7228 2927 2c20 7379 6d62 6f6c 2c20  der()', symbol, 
+000128f0: 7479 7065 2c20 7265 7175 6573 742c 2070  type, request, p
+00012900: 7269 6365 2c20 7061 7261 6d73 290a 2020  rice, params).  
+00012910: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00012920: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+00012930: 6174 6550 6f73 7445 6469 744f 7264 6572  atePostEditOrder
+00012940: 2873 656c 662e 6578 7465 6e64 286f 7264  (self.extend(ord
+00012950: 6572 5265 7175 6573 745b 305d 2c20 6f72  erRequest[0], or
+00012960: 6465 7252 6571 7565 7374 5b31 5d29 290a  derRequest[1])).
+00012970: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00012980: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00012990: 2020 2320 2020 2020 2020 2020 2265 7272    #         "err
+000129a0: 6f72 223a 205b 5d2c 0a20 2020 2020 2020  or": [],.       
+000129b0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+000129c0: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+000129d0: 2020 2020 2020 2020 2020 2020 2022 7374               "st
+000129e0: 6174 7573 223a 2022 6f6b 222c 0a20 2020  atus": "ok",.   
+000129f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00012a00: 2020 2022 7478 6964 223a 2022 4f41 5732     "txid": "OAW2
+00012a10: 424f 2d37 5257 454b 2d50 5a59 3555 4f22  BO-7RWEK-PZY5UO"
 00012a20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00012a30: 2020 2020 2020 2020 2274 7869 6422 3a20          "txid": 
-00012a40: 224f 4157 3242 4f2d 3752 5745 4b2d 505a  "OAW2BO-7RWEK-PZ
-00012a50: 5935 554f 222c 0a20 2020 2020 2020 2023  Y5UO",.        #
-00012a60: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
-00012a70: 6967 696e 616c 7478 6964 223a 2022 4f58  iginaltxid": "OX
-00012a80: 4c36 5353 2d55 504e 4d43 2d32 3657 4245  L6SS-UPNMC-26WBE
-00012a90: 3722 2c0a 2020 2020 2020 2020 2320 2020  7",.        #   
-00012aa0: 2020 2020 2020 2020 2020 2276 6f6c 756d            "volum
-00012ab0: 6522 3a20 2230 2e30 3030 3735 3030 3022  e": "0.00075000"
-00012ac0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00012ad0: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
-00012ae0: 2022 3133 3530 302e 3022 2c0a 2020 2020   "13500.0",.    
-00012af0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00012b00: 2020 226f 7264 6572 735f 6361 6e63 656c    "orders_cancel
-00012b10: 6c65 6422 3a20 312c 0a20 2020 2020 2020  led": 1,.       
-00012b20: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00012b30: 6465 7363 7222 3a20 7b0a 2020 2020 2020  descr": {.      
-00012b40: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00012b50: 2020 2020 226f 7264 6572 223a 2022 6275      "order": "bu
-00012b60: 7920 302e 3030 3037 3530 3030 2058 4254  y 0.00075000 XBT
-00012b70: 5553 4454 2040 206c 696d 6974 2031 3335  USDT @ limit 135
-00012b80: 3030 2e30 220a 2020 2020 2020 2020 2320  00.0".        # 
-00012b90: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-00012ba0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00012bb0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-00012bc0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-00012bd0: 2020 2020 6461 7461 203d 2073 656c 662e      data = self.
-00012be0: 7361 6665 5f64 6963 7428 7265 7370 6f6e  safe_dict(respon
-00012bf0: 7365 2c20 2772 6573 756c 7427 2c20 7b7d  se, 'result', {}
-00012c00: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00012c10: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00012c20: 7228 6461 7461 2c20 6d61 726b 6574 290a  r(data, market).
-00012c30: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00012c40: 6574 6368 5f6f 7264 6572 2873 656c 662c  etch_order(self,
-00012c50: 2069 643a 2073 7472 2c20 7379 6d62 6f6c   id: str, symbol
-00012c60: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7061  : Str = None, pa
-00012c70: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00012c80: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-00012c90: 7463 6865 7320 696e 666f 726d 6174 696f  tches informatio
-00012ca0: 6e20 6f6e 2061 6e20 6f72 6465 7220 6d61  n on an order ma
-00012cb0: 6465 2062 7920 7468 6520 7573 6572 0a20  de by the user. 
-00012cc0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-00012cd0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-00012ce0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f41  .com/rest/#tag/A
-00012cf0: 6363 6f75 6e74 2d44 6174 612f 6f70 6572  ccount-Data/oper
-00012d00: 6174 696f 6e2f 6765 744f 7264 6572 7349  ation/getOrdersI
-00012d10: 6e66 6f0a 2020 2020 2020 2020 3a70 6172  nfo.        :par
-00012d20: 616d 2073 7472 2073 796d 626f 6c3a 206e  am str symbol: n
-00012d30: 6f74 2075 7365 6420 6279 206b 7261 6b65  ot used by krake
-00012d40: 6e20 6665 7463 684f 7264 6572 0a20 2020  n fetchOrder.   
-00012d50: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00012d60: 205b 7061 7261 6d73 5d3a 2065 7874 7261   [params]: extra
-00012d70: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-00012d80: 6966 6963 2074 6f20 7468 6520 6578 6368  ific to the exch
-00012d90: 616e 6765 2041 5049 2065 6e64 706f 696e  ange API endpoin
-00012da0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-00012db0: 6e73 2064 6963 743a 2041 6e20 606f 7264  ns dict: An `ord
-00012dc0: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-00012dd0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00012de0: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-00012df0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00012e00: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00012e10: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00012e20: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00012e30: 2020 636c 6965 6e74 4f72 6465 7249 6420    clientOrderId 
-00012e40: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00012e50: 655f 3228 7061 7261 6d73 2c20 2775 7365  e_2(params, 'use
-00012e60: 7272 6566 272c 2027 636c 6965 6e74 4f72  rref', 'clientOr
-00012e70: 6465 7249 6427 290a 2020 2020 2020 2020  derId').        
-00012e80: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00012e90: 2020 2020 2020 2020 2774 7261 6465 7327          'trades'
-00012ea0: 3a20 5472 7565 2c20 2023 2077 6865 7468  : True,  # wheth
-00012eb0: 6572 206f 7220 6e6f 7420 746f 2069 6e63  er or not to inc
-00012ec0: 6c75 6465 2074 7261 6465 7320 696e 206f  lude trades in o
-00012ed0: 7574 7075 7428 6f70 7469 6f6e 616c 2c20  utput(optional, 
-00012ee0: 6465 6661 756c 7420 4661 6c73 6529 0a20  default False). 
-00012ef0: 2020 2020 2020 2020 2020 2023 2027 7478             # 'tx
-00012f00: 6964 273a 2069 642c 2020 2320 646f 206e  id': id,  # do n
-00012f10: 6f74 2063 6f6d 6d61 2073 6570 6172 6174  ot comma separat
-00012f20: 6520 6120 6c69 7374 206f 6620 6964 7320  e a list of ids 
-00012f30: 2d20 7573 6520 6665 7463 684f 7264 6572  - use fetchOrder
-00012f40: 7342 7949 6473 2069 6e73 7465 6164 0a20  sByIds instead. 
-00012f50: 2020 2020 2020 2020 2020 2023 2027 7573             # 'us
-00012f60: 6572 7265 6627 3a20 276f 7074 696f 6e61  erref': 'optiona
-00012f70: 6c27 2c20 2023 2072 6573 7472 6963 7420  l',  # restrict 
-00012f80: 7265 7375 6c74 7320 746f 2067 6976 656e  results to given
-00012f90: 2075 7365 7220 7265 6665 7265 6e63 6520   user reference 
-00012fa0: 6964 286f 7074 696f 6e61 6c29 0a20 2020  id(optional).   
-00012fb0: 2020 2020 207d 0a20 2020 2020 2020 2071       }.        q
-00012fc0: 7565 7279 203d 2070 6172 616d 730a 2020  uery = params.  
-00012fd0: 2020 2020 2020 6966 2063 6c69 656e 744f        if clientO
-00012fe0: 7264 6572 4964 2069 7320 6e6f 7420 4e6f  rderId is not No
-00012ff0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00013000: 7265 7175 6573 745b 2775 7365 7272 6566  request['userref
-00013010: 275d 203d 2063 6c69 656e 744f 7264 6572  '] = clientOrder
-00013020: 4964 0a20 2020 2020 2020 2020 2020 2071  Id.            q
-00013030: 7565 7279 203d 2073 656c 662e 6f6d 6974  uery = self.omit
-00013040: 2870 6172 616d 732c 205b 2775 7365 7272  (params, ['userr
-00013050: 6566 272c 2027 636c 6965 6e74 4f72 6465  ef', 'clientOrde
-00013060: 7249 6427 5d29 0a20 2020 2020 2020 2065  rId']).        e
-00013070: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00013080: 2072 6571 7565 7374 5b27 7478 6964 275d   request['txid']
-00013090: 203d 2069 640a 2020 2020 2020 2020 7265   = id.        re
-000130a0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
-000130b0: 656c 662e 7072 6976 6174 6550 6f73 7451  elf.privatePostQ
-000130c0: 7565 7279 4f72 6465 7273 2873 656c 662e  ueryOrders(self.
-000130d0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-000130e0: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-000130f0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00013100: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00013110: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
-00013120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00013130: 2020 2272 6573 756c 7422 3a7b 0a20 2020    "result":{.   
-00013140: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00013150: 2020 2022 4f54 4c41 5333 2d52 5248 5546     "OTLAS3-RRHUF
-00013160: 2d4e 4457 4835 4122 3a7b 0a20 2020 2020  -NDWH5A":{.     
-00013170: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013180: 2020 2020 2022 7265 6669 6422 3a6e 756c       "refid":nul
-00013190: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-000131a0: 2020 2020 2020 2020 2020 2020 2022 7573               "us
-000131b0: 6572 7265 6622 3a6e 756c 6c2c 0a20 2020  erref":null,.   
-000131c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000131d0: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-000131e0: 2263 6c6f 7365 6422 2c0a 2020 2020 2020  "closed",.      
-000131f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00013200: 2020 2020 2272 6561 736f 6e22 3a6e 756c      "reason":nul
-00013210: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-00013220: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
-00013230: 656e 746d 223a 3135 3836 3832 3239 3139  entm":1586822919
-00013240: 2e33 3334 322c 0a20 2020 2020 2020 2023  .3342,.        #
+00012a30: 2020 2020 2020 2020 226f 7269 6769 6e61          "origina
+00012a40: 6c74 7869 6422 3a20 224f 584c 3653 532d  ltxid": "OXL6SS-
+00012a50: 5550 4e4d 432d 3236 5742 4537 222c 0a20  UPNMC-26WBE7",. 
+00012a60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00012a70: 2020 2020 2022 766f 6c75 6d65 223a 2022       "volume": "
+00012a80: 302e 3030 3037 3530 3030 222c 0a20 2020  0.00075000",.   
+00012a90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00012aa0: 2020 2022 7072 6963 6522 3a20 2231 3335     "price": "135
+00012ab0: 3030 2e30 222c 0a20 2020 2020 2020 2023  00.0",.        #
+00012ac0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00012ad0: 6465 7273 5f63 616e 6365 6c6c 6564 223a  ders_cancelled":
+00012ae0: 2031 2c0a 2020 2020 2020 2020 2320 2020   1,.        #   
+00012af0: 2020 2020 2020 2020 2020 2264 6573 6372            "descr
+00012b00: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+00012b10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00012b20: 6f72 6465 7222 3a20 2262 7579 2030 2e30  order": "buy 0.0
+00012b30: 3030 3735 3030 3020 5842 5455 5344 5420  0075000 XBTUSDT 
+00012b40: 4020 6c69 6d69 7420 3133 3530 302e 3022  @ limit 13500.0"
+00012b50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00012b60: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+00012b70: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
+00012b80: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+00012b90: 2020 2020 2023 0a20 2020 2020 2020 2064       #.        d
+00012ba0: 6174 6120 3d20 7365 6c66 2e73 6166 655f  ata = self.safe_
+00012bb0: 6469 6374 2872 6573 706f 6e73 652c 2027  dict(response, '
+00012bc0: 7265 7375 6c74 272c 207b 7d29 0a20 2020  result', {}).   
+00012bd0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00012be0: 2e70 6172 7365 5f6f 7264 6572 2864 6174  .parse_order(dat
+00012bf0: 612c 206d 6172 6b65 7429 0a0a 2020 2020  a, market)..    
+00012c00: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+00012c10: 6f72 6465 7228 7365 6c66 2c20 6964 3a20  order(self, id: 
+00012c20: 7374 722c 2073 796d 626f 6c3a 2053 7472  str, symbol: Str
+00012c30: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
+00012c40: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00012c50: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+00012c60: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
+00012c70: 616e 206f 7264 6572 206d 6164 6520 6279  an order made by
+00012c80: 2074 6865 2075 7365 720a 2020 2020 2020   the user.      
+00012c90: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+00012ca0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+00012cb0: 7265 7374 2f23 7461 672f 4163 636f 756e  rest/#tag/Accoun
+00012cc0: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
+00012cd0: 2f67 6574 4f72 6465 7273 496e 666f 0a20  /getOrdersInfo. 
+00012ce0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00012cf0: 7220 7379 6d62 6f6c 3a20 6e6f 7420 7573  r symbol: not us
+00012d00: 6564 2062 7920 6b72 616b 656e 2066 6574  ed by kraken fet
+00012d10: 6368 4f72 6465 720a 2020 2020 2020 2020  chOrder.        
+00012d20: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
+00012d30: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
+00012d40: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+00012d50: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
+00012d60: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
+00012d70: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+00012d80: 6374 3a20 416e 2060 6f72 6465 7220 7374  ct: An `order st
+00012d90: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+00012da0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00012db0: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+00012dc0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00012dd0: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00012de0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00012df0: 7473 2829 0a20 2020 2020 2020 2063 6c69  ts().        cli
+00012e00: 656e 744f 7264 6572 4964 203d 2073 656c  entOrderId = sel
+00012e10: 662e 7361 6665 5f76 616c 7565 5f32 2870  f.safe_value_2(p
+00012e20: 6172 616d 732c 2027 7573 6572 7265 6627  arams, 'userref'
+00012e30: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+00012e40: 2729 0a20 2020 2020 2020 2072 6571 7565  ').        reque
+00012e50: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+00012e60: 2020 2027 7472 6164 6573 273a 2054 7275     'trades': Tru
+00012e70: 652c 2020 2320 7768 6574 6865 7220 6f72  e,  # whether or
+00012e80: 206e 6f74 2074 6f20 696e 636c 7564 6520   not to include 
+00012e90: 7472 6164 6573 2069 6e20 6f75 7470 7574  trades in output
+00012ea0: 286f 7074 696f 6e61 6c2c 2064 6566 6175  (optional, defau
+00012eb0: 6c74 2046 616c 7365 290a 2020 2020 2020  lt False).      
+00012ec0: 2020 2020 2020 2320 2774 7869 6427 3a20        # 'txid': 
+00012ed0: 6964 2c20 2023 2064 6f20 6e6f 7420 636f  id,  # do not co
+00012ee0: 6d6d 6120 7365 7061 7261 7465 2061 206c  mma separate a l
+00012ef0: 6973 7420 6f66 2069 6473 202d 2075 7365  ist of ids - use
+00012f00: 2066 6574 6368 4f72 6465 7273 4279 4964   fetchOrdersById
+00012f10: 7320 696e 7374 6561 640a 2020 2020 2020  s instead.      
+00012f20: 2020 2020 2020 2320 2775 7365 7272 6566        # 'userref
+00012f30: 273a 2027 6f70 7469 6f6e 616c 272c 2020  ': 'optional',  
+00012f40: 2320 7265 7374 7269 6374 2072 6573 756c  # restrict resul
+00012f50: 7473 2074 6f20 6769 7665 6e20 7573 6572  ts to given user
+00012f60: 2072 6566 6572 656e 6365 2069 6428 6f70   reference id(op
+00012f70: 7469 6f6e 616c 290a 2020 2020 2020 2020  tional).        
+00012f80: 7d0a 2020 2020 2020 2020 7175 6572 7920  }.        query 
+00012f90: 3d20 7061 7261 6d73 0a20 2020 2020 2020  = params.       
+00012fa0: 2069 6620 636c 6965 6e74 4f72 6465 7249   if clientOrderI
+00012fb0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
+00012fc0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00012fd0: 7374 5b27 7573 6572 7265 6627 5d20 3d20  st['userref'] = 
+00012fe0: 636c 6965 6e74 4f72 6465 7249 640a 2020  clientOrderId.  
+00012ff0: 2020 2020 2020 2020 2020 7175 6572 7920            query 
+00013000: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00013010: 6d73 2c20 5b27 7573 6572 7265 6627 2c20  ms, ['userref', 
+00013020: 2763 6c69 656e 744f 7264 6572 4964 275d  'clientOrderId']
+00013030: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00013040: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00013050: 6573 745b 2774 7869 6427 5d20 3d20 6964  est['txid'] = id
+00013060: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
+00013070: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
+00013080: 7269 7661 7465 506f 7374 5175 6572 794f  rivatePostQueryO
+00013090: 7264 6572 7328 7365 6c66 2e65 7874 656e  rders(self.exten
+000130a0: 6428 7265 7175 6573 742c 2071 7565 7279  d(request, query
+000130b0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+000130c0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+000130d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000130e0: 6572 726f 7222 3a5b 5d2c 0a20 2020 2020  error":[],.     
+000130f0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00013100: 7375 6c74 223a 7b0a 2020 2020 2020 2020  sult":{.        
+00013110: 2320 2020 2020 2020 2020 2020 2020 224f  #             "O
+00013120: 544c 4153 332d 5252 4855 462d 4e44 5748  TLAS3-RRHUF-NDWH
+00013130: 3541 223a 7b0a 2020 2020 2020 2020 2320  5A":{.        # 
+00013140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013150: 2272 6566 6964 223a 6e75 6c6c 2c0a 2020  "refid":null,.  
+00013160: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00013170: 2020 2020 2020 2020 2275 7365 7272 6566          "userref
+00013180: 223a 6e75 6c6c 2c0a 2020 2020 2020 2020  ":null,.        
+00013190: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000131a0: 2020 2273 7461 7475 7322 3a22 636c 6f73    "status":"clos
+000131b0: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
+000131c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000131d0: 7265 6173 6f6e 223a 6e75 6c6c 2c0a 2020  reason":null,.  
+000131e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000131f0: 2020 2020 2020 2020 226f 7065 6e74 6d22          "opentm"
+00013200: 3a31 3538 3638 3232 3931 392e 3333 3432  :1586822919.3342
+00013210: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013220: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
+00013230: 7365 746d 223a 3135 3836 3832 3239 3139  setm":1586822919
+00013240: 2e33 3635 2c0a 2020 2020 2020 2020 2320  .365,.        # 
 00013250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013260: 2022 636c 6f73 6574 6d22 3a31 3538 3638   "closetm":15868
-00013270: 3232 3931 392e 3336 352c 0a20 2020 2020  22919.365,.     
-00013280: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013290: 2020 2020 2022 7374 6172 7474 6d22 3a30       "starttm":0
-000132a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000132b0: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
-000132c0: 6972 6574 6d22 3a30 2c0a 2020 2020 2020  iretm":0,.      
-000132d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000132e0: 2020 2020 2264 6573 6372 223a 7b0a 2020      "descr":{.  
-000132f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00013300: 2020 2020 2020 2020 2020 2020 2270 6169              "pai
-00013310: 7222 3a22 5842 5455 5344 5422 2c0a 2020  r":"XBTUSDT",.  
-00013320: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00013330: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-00013340: 6522 3a22 7365 6c6c 222c 0a20 2020 2020  e":"sell",.     
-00013350: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013360: 2020 2020 2020 2020 2022 6f72 6465 7274           "ordert
-00013370: 7970 6522 3a22 6d61 726b 6574 222c 0a20  ype":"market",. 
-00013380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00013390: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-000133a0: 6963 6522 3a22 3022 2c0a 2020 2020 2020  ice":"0",.      
-000133b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000133c0: 2020 2020 2020 2020 2270 7269 6365 3222          "price2"
-000133d0: 3a22 3022 2c0a 2020 2020 2020 2020 2320  :"0",.        # 
+00013260: 2273 7461 7274 746d 223a 302c 0a20 2020  "starttm":0,.   
+00013270: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00013280: 2020 2020 2020 2022 6578 7069 7265 746d         "expiretm
+00013290: 223a 302c 0a20 2020 2020 2020 2023 2020  ":0,.        #  
+000132a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000132b0: 6465 7363 7222 3a7b 0a20 2020 2020 2020  descr":{.       
+000132c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000132d0: 2020 2020 2020 2022 7061 6972 223a 2258         "pair":"X
+000132e0: 4254 5553 4454 222c 0a20 2020 2020 2020  BTUSDT",.       
+000132f0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00013300: 2020 2020 2020 2022 7479 7065 223a 2273         "type":"s
+00013310: 656c 6c22 2c0a 2020 2020 2020 2020 2320  ell",.        # 
+00013320: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013330: 2020 2020 226f 7264 6572 7479 7065 223a      "ordertype":
+00013340: 226d 6172 6b65 7422 2c0a 2020 2020 2020  "market",.      
+00013350: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00013360: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
+00013370: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+00013380: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013390: 2020 2022 7072 6963 6532 223a 2230 222c     "price2":"0",
+000133a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000133b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000133c0: 6c65 7665 7261 6765 223a 226e 6f6e 6522  leverage":"none"
+000133d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 000133e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000133f0: 2020 2020 226c 6576 6572 6167 6522 3a22      "leverage":"
-00013400: 6e6f 6e65 222c 0a20 2020 2020 2020 2023  none",.        #
-00013410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013420: 2020 2020 2022 6f72 6465 7222 3a22 7365       "order":"se
-00013430: 6c6c 2030 2e32 3138 3034 3030 3020 5842  ll 0.21804000 XB
-00013440: 5455 5344 5420 4020 6d61 726b 6574 222c  TUSDT @ market",
-00013450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00013460: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00013470: 636c 6f73 6522 3a22 220a 2020 2020 2020  close":"".      
-00013480: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00013490: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-000134a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000134b0: 2022 766f 6c22 3a22 302e 3231 3830 3430   "vol":"0.218040
-000134c0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-000134d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000134e0: 766f 6c5f 6578 6563 223a 2230 2e32 3138  vol_exec":"0.218
-000134f0: 3034 3030 3022 2c0a 2020 2020 2020 2020  04000",.        
-00013500: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00013510: 2020 2263 6f73 7422 3a22 3134 3933 2e39    "cost":"1493.9
-00013520: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00013530: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
-00013540: 6522 3a22 332e 3822 2c0a 2020 2020 2020  e":"3.8",.      
-00013550: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00013560: 2020 2020 2270 7269 6365 223a 2236 3835      "price":"685
-00013570: 312e 3522 2c0a 2020 2020 2020 2020 2320  1.5",.        # 
-00013580: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013590: 2273 746f 7070 7269 6365 223a 2230 2e30  "stopprice":"0.0
-000135a0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-000135b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000135c0: 2022 6c69 6d69 7470 7269 6365 223a 2230   "limitprice":"0
-000135d0: 2e30 3030 3030 222c 0a20 2020 2020 2020  .00000",.       
-000135e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000135f0: 2020 2022 6d69 7363 223a 2222 2c0a 2020     "misc":"",.  
-00013600: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00013610: 2020 2020 2020 2020 226f 666c 6167 7322          "oflags"
-00013620: 3a22 6663 6971 222c 0a20 2020 2020 2020  :"fciq",.       
-00013630: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00013640: 2020 2022 7472 6164 6573 223a 5b22 5454     "trades":["TT
-00013650: 3555 4333 2d47 4f49 5257 2d36 415a 5a36  5UC3-GOIRW-6AZZ6
-00013660: 5222 5d0a 2020 2020 2020 2020 2320 2020  R"].        #   
-00013670: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00013680: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-00013690: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-000136a0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000136b0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-000136c0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-000136d0: 6e73 652c 2027 7265 7375 6c74 272c 205b  nse, 'result', [
-000136e0: 5d29 0a20 2020 2020 2020 2069 6620 6e6f  ]).        if no
-000136f0: 7420 2869 6420 696e 2072 6573 756c 7429  t (id in result)
-00013700: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00013710: 6973 6520 4f72 6465 724e 6f74 466f 756e  ise OrderNotFoun
-00013720: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
-00013730: 7463 684f 7264 6572 2829 2063 6f75 6c64  tchOrder() could
-00013740: 206e 6f74 2066 696e 6420 6f72 6465 7220   not find order 
-00013750: 6964 2027 202b 2069 6429 0a20 2020 2020  id ' + id).     
-00013760: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-00013770: 6172 7365 5f6f 7264 6572 2873 656c 662e  arse_order(self.
-00013780: 6578 7465 6e64 287b 2769 6427 3a20 6964  extend({'id': id
-00013790: 7d2c 2072 6573 756c 745b 6964 5d29 290a  }, result[id])).
-000137a0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-000137b0: 6574 6368 5f6f 7264 6572 5f74 7261 6465  etch_order_trade
-000137c0: 7328 7365 6c66 2c20 6964 3a20 7374 722c  s(self, id: str,
-000137d0: 2073 796d 626f 6c3a 2053 7472 203d 204e   symbol: Str = N
-000137e0: 6f6e 652c 2073 696e 6365 3a20 496e 7420  one, since: Int 
-000137f0: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 2049  = None, limit: I
-00013800: 6e74 203d 204e 6f6e 652c 2070 6172 616d  nt = None, param
-00013810: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-00013820: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-00013830: 2061 6c6c 2074 6865 2074 7261 6465 7320   all the trades 
-00013840: 6d61 6465 2066 726f 6d20 6120 7369 6e67  made from a sing
-00013850: 6c65 206f 7264 6572 0a20 2020 2020 2020  le order.       
-00013860: 203a 7365 653a 2068 7474 7073 3a2f 2f64   :see: https://d
-00013870: 6f63 732e 6b72 616b 656e 2e63 6f6d 2f72  ocs.kraken.com/r
-00013880: 6573 742f 2374 6167 2f41 6363 6f75 6e74  est/#tag/Account
-00013890: 2d44 6174 612f 6f70 6572 6174 696f 6e2f  -Data/operation/
-000138a0: 6765 7454 7261 6465 7349 6e66 6f0a 2020  getTradesInfo.  
-000138b0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-000138c0: 2069 643a 206f 7264 6572 2069 640a 2020   id: order id.  
-000138d0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-000138e0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-000138f0: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
-00013900: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00013910: 7420 5b73 696e 6365 5d3a 2074 6865 2065  t [since]: the e
-00013920: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
-00013930: 6d73 2074 6f20 6665 7463 6820 7472 6164  ms to fetch trad
-00013940: 6573 2066 6f72 0a20 2020 2020 2020 203a  es for.        :
-00013950: 7061 7261 6d20 696e 7420 5b6c 696d 6974  param int [limit
-00013960: 5d3a 2074 6865 206d 6178 696d 756d 206e  ]: the maximum n
-00013970: 756d 6265 7220 6f66 2074 7261 6465 7320  umber of trades 
-00013980: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
-00013990: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-000139a0: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
-000139b0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-000139c0: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
-000139d0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
-000139e0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-000139f0: 7320 6469 6374 5b5d 3a20 6120 6c69 7374  s dict[]: a list
-00013a00: 206f 6620 6074 7261 6465 2073 7472 7563   of `trade struc
-00013a10: 7475 7265 7320 3c68 7474 7073 3a2f 2f64  tures <https://d
-00013a20: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
-00013a30: 6964 3d74 7261 6465 2d73 7472 7563 7475  id=trade-structu
-00013a40: 7265 3e60 0a20 2020 2020 2020 2022 2222  re>`.        """
-00013a50: 0a20 2020 2020 2020 206f 7264 6572 5472  .        orderTr
-00013a60: 6164 6573 203d 2073 656c 662e 7361 6665  ades = self.safe
-00013a70: 5f76 616c 7565 2870 6172 616d 732c 2027  _value(params, '
-00013a80: 7472 6164 6573 2729 0a20 2020 2020 2020  trades').       
-00013a90: 2074 7261 6465 4964 7320 3d20 5b5d 0a20   tradeIds = []. 
-00013aa0: 2020 2020 2020 2069 6620 6f72 6465 7254         if orderT
-00013ab0: 7261 6465 7320 6973 204e 6f6e 653a 0a20  rades is None:. 
-00013ac0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00013ad0: 2041 7267 756d 656e 7473 5265 7175 6972   ArgumentsRequir
-00013ae0: 6564 2873 656c 662e 6964 202b 2022 2066  ed(self.id + " f
-00013af0: 6574 6368 4f72 6465 7254 7261 6465 7328  etchOrderTrades(
-00013b00: 2920 7265 7175 6972 6573 2061 2075 6e69  ) requires a uni
-00013b10: 6669 6564 206f 7264 6572 2073 7472 7563  fied order struc
-00013b20: 7475 7265 2069 6e20 7468 6520 7061 7261  ture in the para
-00013b30: 6d73 2061 7267 756d 656e 7420 6f72 2061  ms argument or a
-00013b40: 2027 7472 6164 6573 2720 7061 7261 6d28   'trades' param(
-00013b50: 616e 2061 7272 6179 206f 6620 7472 6164  an array of trad
-00013b60: 6520 6964 2073 7472 696e 6773 2922 290a  e id strings)").
-00013b70: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00013b80: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
-00013b90: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-00013ba0: 6f72 6465 7254 7261 6465 7329 293a 0a20  orderTrades)):. 
-00013bb0: 2020 2020 2020 2020 2020 2020 2020 206f                 o
-00013bc0: 7264 6572 5472 6164 6520 3d20 6f72 6465  rderTrade = orde
-00013bd0: 7254 7261 6465 735b 695d 0a20 2020 2020  rTrades[i].     
-00013be0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
-00013bf0: 696e 7374 616e 6365 286f 7264 6572 5472  instance(orderTr
-00013c00: 6164 652c 2073 7472 293a 0a20 2020 2020  ade, str):.     
-00013c10: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00013c20: 7261 6465 4964 732e 6170 7065 6e64 286f  radeIds.append(o
-00013c30: 7264 6572 5472 6164 6529 0a20 2020 2020  rderTrade).     
-00013c40: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00013c50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013c60: 2020 2020 2074 7261 6465 4964 732e 6170       tradeIds.ap
-00013c70: 7065 6e64 286f 7264 6572 5472 6164 655b  pend(orderTrade[
-00013c80: 2769 6427 5d29 0a20 2020 2020 2020 2061  'id']).        a
-00013c90: 7761 6974 2073 656c 662e 6c6f 6164 5f6d  wait self.load_m
-00013ca0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00013cb0: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-00013cc0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00013cd0: 2020 2020 7379 6d62 6f6c 203d 2073 656c      symbol = sel
-00013ce0: 662e 7379 6d62 6f6c 2873 796d 626f 6c29  f.symbol(symbol)
-00013cf0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
-00013d00: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00013d10: 7565 2873 656c 662e 6f70 7469 6f6e 732c  ue(self.options,
-00013d20: 2027 6665 7463 684f 7264 6572 5472 6164   'fetchOrderTrad
-00013d30: 6573 272c 207b 7d29 0a20 2020 2020 2020  es', {}).       
-00013d40: 2062 6174 6368 5369 7a65 203d 2073 656c   batchSize = sel
-00013d50: 662e 7361 6665 5f69 6e74 6567 6572 286f  f.safe_integer(o
-00013d60: 7074 696f 6e73 2c20 2762 6174 6368 5369  ptions, 'batchSi
-00013d70: 7a65 272c 2032 3029 0a20 2020 2020 2020  ze', 20).       
-00013d80: 206e 756d 5472 6164 6549 6473 203d 206c   numTradeIds = l
-00013d90: 656e 2874 7261 6465 4964 7329 0a20 2020  en(tradeIds).   
-00013da0: 2020 2020 206e 756d 4261 7463 6865 7320       numBatches 
-00013db0: 3d20 7365 6c66 2e70 6172 7365 5f74 6f5f  = self.parse_to_
-00013dc0: 696e 7428 6e75 6d54 7261 6465 4964 7320  int(numTradeIds 
-00013dd0: 2f20 6261 7463 6853 697a 6529 0a20 2020  / batchSize).   
-00013de0: 2020 2020 206e 756d 4261 7463 6865 7320       numBatches 
-00013df0: 3d20 7365 6c66 2e73 756d 286e 756d 4261  = self.sum(numBa
-00013e00: 7463 6865 732c 2031 290a 2020 2020 2020  tches, 1).      
-00013e10: 2020 7265 7375 6c74 203d 205b 5d0a 2020    result = [].  
-00013e20: 2020 2020 2020 666f 7220 6a20 696e 2072        for j in r
-00013e30: 616e 6765 2830 2c20 6e75 6d42 6174 6368  ange(0, numBatch
-00013e40: 6573 293a 0a20 2020 2020 2020 2020 2020  es):.           
-00013e50: 2072 6571 7565 7374 4964 7320 3d20 5b5d   requestIds = []
-00013e60: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00013e70: 206b 2069 6e20 7261 6e67 6528 302c 2062   k in range(0, b
-00013e80: 6174 6368 5369 7a65 293a 0a20 2020 2020  atchSize):.     
-00013e90: 2020 2020 2020 2020 2020 2069 6e64 6578             index
-00013ea0: 203d 2073 656c 662e 7375 6d28 6a20 2a20   = self.sum(j * 
-00013eb0: 6261 7463 6853 697a 652c 206b 290a 2020  batchSize, k).  
-00013ec0: 2020 2020 2020 2020 2020 2020 2020 6966                if
-00013ed0: 2069 6e64 6578 203c 206e 756d 5472 6164   index < numTrad
-00013ee0: 6549 6473 3a0a 2020 2020 2020 2020 2020  eIds:.          
-00013ef0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00013f00: 7449 6473 2e61 7070 656e 6428 7472 6164  tIds.append(trad
-00013f10: 6549 6473 5b69 6e64 6578 5d29 0a20 2020  eIds[index]).   
-00013f20: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00013f30: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-00013f40: 2020 2020 2027 7478 6964 273a 2027 2c27       'txid': ','
-00013f50: 2e6a 6f69 6e28 7265 7175 6573 7449 6473  .join(requestIds
-00013f60: 292c 0a20 2020 2020 2020 2020 2020 207d  ),.            }
-00013f70: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00013f80: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
-00013f90: 6c66 2e70 7269 7661 7465 506f 7374 5175  lf.privatePostQu
-00013fa0: 6572 7954 7261 6465 7328 7265 7175 6573  eryTrades(reques
-00013fb0: 7429 0a20 2020 2020 2020 2020 2020 2023  t).            #
-00013fc0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00013fd0: 2020 207b 0a20 2020 2020 2020 2020 2020     {.           
-00013fe0: 2023 2020 2020 2020 2020 2022 6572 726f   #         "erro
-00013ff0: 7222 3a20 5b5d 2c0a 2020 2020 2020 2020  r": [],.        
-00014000: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
-00014010: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-00014020: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00014030: 2020 2020 2754 494d 4952 472d 5755 4e4e      'TIMIRG-WUNN
-00014040: 452d 5252 4a36 4754 273a 207b 0a20 2020  E-RRJ6GT': {.   
-00014050: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00014060: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00014070: 7274 7869 6422 3a20 274f 5152 504e 322d  rtxid": 'OQRPN2-
-00014080: 4c52 4846 592d 4849 4641 3744 272c 0a20  LRHFY-HIFA7D',. 
-00014090: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000140a0: 2020 2020 2020 2020 2020 2020 2022 706f               "po
-000140b0: 7374 7869 6422 3a20 2754 4b48 3253 452d  stxid": 'TKH2SE-
-000140c0: 4d37 4946 352d 4346 4937 4c54 272c 0a20  M7IF5-CFI7LT',. 
-000140d0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000140e0: 2020 2020 2020 2020 2020 2020 2022 7061               "pa
-000140f0: 6972 223a 2027 5553 4443 5553 4454 272c  ir": 'USDCUSDT',
-00014100: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-00014110: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00014120: 7469 6d65 223a 2031 3538 3633 3430 3038  time": 158634008
-00014130: 362e 3435 372c 0a20 2020 2020 2020 2020  6.457,.         
-00014140: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00014150: 2020 2020 2022 7479 7065 223a 2027 7365       "type": 'se
-00014160: 6c6c 272c 0a20 2020 2020 2020 2020 2020  ll',.           
+000133f0: 226f 7264 6572 223a 2273 656c 6c20 302e  "order":"sell 0.
+00013400: 3231 3830 3430 3030 2058 4254 5553 4454  21804000 XBTUSDT
+00013410: 2040 206d 6172 6b65 7422 2c0a 2020 2020   @ market",.    
+00013420: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00013430: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
+00013440: 223a 2222 0a20 2020 2020 2020 2023 2020  ":"".        #  
+00013450: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00013460: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013470: 2020 2020 2020 2020 2020 2020 2276 6f6c              "vol
+00013480: 223a 2230 2e32 3138 3034 3030 3022 2c0a  ":"0.21804000",.
+00013490: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000134a0: 2020 2020 2020 2020 2020 2276 6f6c 5f65            "vol_e
+000134b0: 7865 6322 3a22 302e 3231 3830 3430 3030  xec":"0.21804000
+000134c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000134d0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+000134e0: 7374 223a 2231 3439 332e 3922 2c0a 2020  st":"1493.9",.  
+000134f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00013500: 2020 2020 2020 2020 2266 6565 223a 2233          "fee":"3
+00013510: 2e38 222c 0a20 2020 2020 2020 2023 2020  .8",.        #  
+00013520: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00013530: 7072 6963 6522 3a22 3638 3531 2e35 222c  price":"6851.5",
+00013540: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00013550: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00013560: 7072 6963 6522 3a22 302e 3030 3030 3022  price":"0.00000"
+00013570: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013580: 2020 2020 2020 2020 2020 2020 226c 696d              "lim
+00013590: 6974 7072 6963 6522 3a22 302e 3030 3030  itprice":"0.0000
+000135a0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000135b0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+000135c0: 6973 6322 3a22 222c 0a20 2020 2020 2020  isc":"",.       
+000135d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000135e0: 2020 2022 6f66 6c61 6773 223a 2266 6369     "oflags":"fci
+000135f0: 7122 2c0a 2020 2020 2020 2020 2320 2020  q",.        #   
+00013600: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00013610: 7261 6465 7322 3a5b 2254 5435 5543 332d  rades":["TT5UC3-
+00013620: 474f 4952 572d 3641 5a5a 3652 225d 0a20  GOIRW-6AZZ6R"]. 
+00013630: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00013640: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00013650: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00013660: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+00013670: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+00013680: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+00013690: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+000136a0: 2772 6573 756c 7427 2c20 5b5d 290a 2020  'result', []).  
+000136b0: 2020 2020 2020 6966 206e 6f74 2028 6964        if not (id
+000136c0: 2069 6e20 7265 7375 6c74 293a 0a20 2020   in result):.   
+000136d0: 2020 2020 2020 2020 2072 6169 7365 204f           raise O
+000136e0: 7264 6572 4e6f 7446 6f75 6e64 2873 656c  rderNotFound(sel
+000136f0: 662e 6964 202b 2027 2066 6574 6368 4f72  f.id + ' fetchOr
+00013700: 6465 7228 2920 636f 756c 6420 6e6f 7420  der() could not 
+00013710: 6669 6e64 206f 7264 6572 2069 6420 2720  find order id ' 
+00013720: 2b20 6964 290a 2020 2020 2020 2020 7265  + id).        re
+00013730: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+00013740: 6f72 6465 7228 7365 6c66 2e65 7874 656e  order(self.exten
+00013750: 6428 7b27 6964 273a 2069 647d 2c20 7265  d({'id': id}, re
+00013760: 7375 6c74 5b69 645d 2929 0a0a 2020 2020  sult[id]))..    
+00013770: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+00013780: 6f72 6465 725f 7472 6164 6573 2873 656c  order_trades(sel
+00013790: 662c 2069 643a 2073 7472 2c20 7379 6d62  f, id: str, symb
+000137a0: 6f6c 3a20 5374 7220 3d20 4e6f 6e65 2c20  ol: Str = None, 
+000137b0: 7369 6e63 653a 2049 6e74 203d 204e 6f6e  since: Int = Non
+000137c0: 652c 206c 696d 6974 3a20 496e 7420 3d20  e, limit: Int = 
+000137d0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+000137e0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+000137f0: 2020 2020 2020 6665 7463 6820 616c 6c20        fetch all 
+00013800: 7468 6520 7472 6164 6573 206d 6164 6520  the trades made 
+00013810: 6672 6f6d 2061 2073 696e 676c 6520 6f72  from a single or
+00013820: 6465 720a 2020 2020 2020 2020 3a73 6565  der.        :see
+00013830: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
+00013840: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
+00013850: 7461 672f 4163 636f 756e 742d 4461 7461  tag/Account-Data
+00013860: 2f6f 7065 7261 7469 6f6e 2f67 6574 5472  /operation/getTr
+00013870: 6164 6573 496e 666f 0a20 2020 2020 2020  adesInfo.       
+00013880: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
+00013890: 6f72 6465 7220 6964 0a20 2020 2020 2020  order id.       
+000138a0: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
+000138b0: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
+000138c0: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
+000138d0: 2020 3a70 6172 616d 2069 6e74 205b 7369    :param int [si
+000138e0: 6e63 655d 3a20 7468 6520 6561 726c 6965  nce]: the earlie
+000138f0: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
+00013900: 2066 6574 6368 2074 7261 6465 7320 666f   fetch trades fo
+00013910: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
+00013920: 2069 6e74 205b 6c69 6d69 745d 3a20 7468   int [limit]: th
+00013930: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
+00013940: 206f 6620 7472 6164 6573 2074 6f20 7265   of trades to re
+00013950: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
+00013960: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
+00013970: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
+00013980: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00013990: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
+000139a0: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
+000139b0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+000139c0: 745b 5d3a 2061 206c 6973 7420 6f66 2060  t[]: a list of `
+000139d0: 7472 6164 6520 7374 7275 6374 7572 6573  trade structures
+000139e0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
+000139f0: 6378 742e 636f 6d2f 232f 3f69 643d 7472  cxt.com/#/?id=tr
+00013a00: 6164 652d 7374 7275 6374 7572 653e 600a  ade-structure>`.
+00013a10: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00013a20: 2020 2020 6f72 6465 7254 7261 6465 7320      orderTrades 
+00013a30: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00013a40: 6528 7061 7261 6d73 2c20 2774 7261 6465  e(params, 'trade
+00013a50: 7327 290a 2020 2020 2020 2020 7472 6164  s').        trad
+00013a60: 6549 6473 203d 205b 5d0a 2020 2020 2020  eIds = [].      
+00013a70: 2020 6966 206f 7264 6572 5472 6164 6573    if orderTrades
+00013a80: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00013a90: 2020 2020 2020 7261 6973 6520 4172 6775        raise Argu
+00013aa0: 6d65 6e74 7352 6571 7569 7265 6428 7365  mentsRequired(se
+00013ab0: 6c66 2e69 6420 2b20 2220 6665 7463 684f  lf.id + " fetchO
+00013ac0: 7264 6572 5472 6164 6573 2829 2072 6571  rderTrades() req
+00013ad0: 7569 7265 7320 6120 756e 6966 6965 6420  uires a unified 
+00013ae0: 6f72 6465 7220 7374 7275 6374 7572 6520  order structure 
+00013af0: 696e 2074 6865 2070 6172 616d 7320 6172  in the params ar
+00013b00: 6775 6d65 6e74 206f 7220 6120 2774 7261  gument or a 'tra
+00013b10: 6465 7327 2070 6172 616d 2861 6e20 6172  des' param(an ar
+00013b20: 7261 7920 6f66 2074 7261 6465 2069 6420  ray of trade id 
+00013b30: 7374 7269 6e67 7329 2229 0a20 2020 2020  strings)").     
+00013b40: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00013b50: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+00013b60: 6e67 6528 302c 206c 656e 286f 7264 6572  nge(0, len(order
+00013b70: 5472 6164 6573 2929 3a0a 2020 2020 2020  Trades)):.      
+00013b80: 2020 2020 2020 2020 2020 6f72 6465 7254            orderT
+00013b90: 7261 6465 203d 206f 7264 6572 5472 6164  rade = orderTrad
+00013ba0: 6573 5b69 5d0a 2020 2020 2020 2020 2020  es[i].          
+00013bb0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
+00013bc0: 6e63 6528 6f72 6465 7254 7261 6465 2c20  nce(orderTrade, 
+00013bd0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
+00013be0: 2020 2020 2020 2020 2020 7472 6164 6549            tradeI
+00013bf0: 6473 2e61 7070 656e 6428 6f72 6465 7254  ds.append(orderT
+00013c00: 7261 6465 290a 2020 2020 2020 2020 2020  rade).          
+00013c10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00013c20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013c30: 7472 6164 6549 6473 2e61 7070 656e 6428  tradeIds.append(
+00013c40: 6f72 6465 7254 7261 6465 5b27 6964 275d  orderTrade['id']
+00013c50: 290a 2020 2020 2020 2020 6177 6169 7420  ).        await 
+00013c60: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+00013c70: 7328 290a 2020 2020 2020 2020 6966 2073  s().        if s
+00013c80: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
+00013c90: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00013ca0: 796d 626f 6c20 3d20 7365 6c66 2e73 796d  ymbol = self.sym
+00013cb0: 626f 6c28 7379 6d62 6f6c 290a 2020 2020  bol(symbol).    
+00013cc0: 2020 2020 6f70 7469 6f6e 7320 3d20 7365      options = se
+00013cd0: 6c66 2e73 6166 655f 7661 6c75 6528 7365  lf.safe_value(se
+00013ce0: 6c66 2e6f 7074 696f 6e73 2c20 2766 6574  lf.options, 'fet
+00013cf0: 6368 4f72 6465 7254 7261 6465 7327 2c20  chOrderTrades', 
+00013d00: 7b7d 290a 2020 2020 2020 2020 6261 7463  {}).        batc
+00013d10: 6853 697a 6520 3d20 7365 6c66 2e73 6166  hSize = self.saf
+00013d20: 655f 696e 7465 6765 7228 6f70 7469 6f6e  e_integer(option
+00013d30: 732c 2027 6261 7463 6853 697a 6527 2c20  s, 'batchSize', 
+00013d40: 3230 290a 2020 2020 2020 2020 6e75 6d54  20).        numT
+00013d50: 7261 6465 4964 7320 3d20 6c65 6e28 7472  radeIds = len(tr
+00013d60: 6164 6549 6473 290a 2020 2020 2020 2020  adeIds).        
+00013d70: 6e75 6d42 6174 6368 6573 203d 2073 656c  numBatches = sel
+00013d80: 662e 7061 7273 655f 746f 5f69 6e74 286e  f.parse_to_int(n
+00013d90: 756d 5472 6164 6549 6473 202f 2062 6174  umTradeIds / bat
+00013da0: 6368 5369 7a65 290a 2020 2020 2020 2020  chSize).        
+00013db0: 6e75 6d42 6174 6368 6573 203d 2073 656c  numBatches = sel
+00013dc0: 662e 7375 6d28 6e75 6d42 6174 6368 6573  f.sum(numBatches
+00013dd0: 2c20 3129 0a20 2020 2020 2020 2072 6573  , 1).        res
+00013de0: 756c 7420 3d20 5b5d 0a20 2020 2020 2020  ult = [].       
+00013df0: 2066 6f72 206a 2069 6e20 7261 6e67 6528   for j in range(
+00013e00: 302c 206e 756d 4261 7463 6865 7329 3a0a  0, numBatches):.
+00013e10: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00013e20: 6573 7449 6473 203d 205b 5d0a 2020 2020  estIds = [].    
+00013e30: 2020 2020 2020 2020 666f 7220 6b20 696e          for k in
+00013e40: 2072 616e 6765 2830 2c20 6261 7463 6853   range(0, batchS
+00013e50: 697a 6529 3a0a 2020 2020 2020 2020 2020  ize):.          
+00013e60: 2020 2020 2020 696e 6465 7820 3d20 7365        index = se
+00013e70: 6c66 2e73 756d 286a 202a 2062 6174 6368  lf.sum(j * batch
+00013e80: 5369 7a65 2c20 6b29 0a20 2020 2020 2020  Size, k).       
+00013e90: 2020 2020 2020 2020 2069 6620 696e 6465           if inde
+00013ea0: 7820 3c20 6e75 6d54 7261 6465 4964 733a  x < numTradeIds:
+00013eb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ec0: 2020 2020 2072 6571 7565 7374 4964 732e       requestIds.
+00013ed0: 6170 7065 6e64 2874 7261 6465 4964 735b  append(tradeIds[
+00013ee0: 696e 6465 785d 290a 2020 2020 2020 2020  index]).        
+00013ef0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+00013f00: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013f10: 2774 7869 6427 3a20 272c 272e 6a6f 696e  'txid': ','.join
+00013f20: 2872 6571 7565 7374 4964 7329 2c0a 2020  (requestIds),.  
+00013f30: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00013f40: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
+00013f50: 203d 2061 7761 6974 2073 656c 662e 7072   = await self.pr
+00013f60: 6976 6174 6550 6f73 7451 7565 7279 5472  ivatePostQueryTr
+00013f70: 6164 6573 2872 6571 7565 7374 290a 2020  ades(request).  
+00013f80: 2020 2020 2020 2020 2020 230a 2020 2020            #.    
+00013f90: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00013fa0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00013fb0: 2020 2020 2020 2265 7272 6f72 223a 205b        "error": [
+00013fc0: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
+00013fd0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
+00013fe0: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
+00013ff0: 2023 2020 2020 2020 2020 2020 2020 2027   #             '
+00014000: 5449 4d49 5247 2d57 554e 4e45 2d52 524a  TIMIRG-WUNNE-RRJ
+00014010: 3647 5427 3a20 7b0a 2020 2020 2020 2020  6GT': {.        
+00014020: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00014030: 2020 2020 2020 226f 7264 6572 7478 6964        "ordertxid
+00014040: 223a 2027 4f51 5250 4e32 2d4c 5248 4659  ": 'OQRPN2-LRHFY
+00014050: 2d48 4946 4137 4427 2c0a 2020 2020 2020  -HIFA7D',.      
+00014060: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00014070: 2020 2020 2020 2020 2270 6f73 7478 6964          "postxid
+00014080: 223a 2027 544b 4832 5345 2d4d 3749 4635  ": 'TKH2SE-M7IF5
+00014090: 2d43 4649 374c 5427 2c0a 2020 2020 2020  -CFI7LT',.      
+000140a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000140b0: 2020 2020 2020 2020 2270 6169 7222 3a20          "pair": 
+000140c0: 2755 5344 4355 5344 5427 2c0a 2020 2020  'USDCUSDT',.    
+000140d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000140e0: 2020 2020 2020 2020 2020 2274 696d 6522            "time"
+000140f0: 3a20 3135 3836 3334 3030 3836 2e34 3537  : 1586340086.457
+00014100: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00014110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014120: 2274 7970 6522 3a20 2773 656c 6c27 2c0a  "type": 'sell',.
+00014130: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00014140: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+00014150: 7264 6572 7479 7065 223a 2027 6d61 726b  rdertype": 'mark
+00014160: 6574 272c 0a20 2020 2020 2020 2020 2020  et',.           
 00014170: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00014180: 2020 2022 6f72 6465 7274 7970 6522 3a20     "ordertype": 
-00014190: 276d 6172 6b65 7427 2c0a 2020 2020 2020  'market',.      
+00014180: 2020 2022 7072 6963 6522 3a20 2730 2e39     "price": '0.9
+00014190: 3938 3630 3030 3027 2c0a 2020 2020 2020  9860000',.      
 000141a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000141b0: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
-000141c0: 2027 302e 3939 3836 3030 3030 272c 0a20   '0.99860000',. 
+000141b0: 2020 2020 2020 2020 2263 6f73 7422 3a20          "cost": 
+000141c0: 2732 322e 3136 3839 3230 3031 272c 0a20  '22.16892001',. 
 000141d0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-000141e0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
-000141f0: 7374 223a 2027 3232 2e31 3638 3932 3030  st": '22.1689200
-00014200: 3127 2c0a 2020 2020 2020 2020 2020 2020  1',.            
-00014210: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00014220: 2020 2266 6565 223a 2027 302e 3034 3433    "fee": '0.0443
-00014230: 3337 3834 272c 0a20 2020 2020 2020 2020  3784',.         
-00014240: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00014250: 2020 2020 2022 766f 6c22 3a20 2732 322e       "vol": '22.
-00014260: 3230 3030 3030 3030 272c 0a20 2020 2020  20000000',.     
-00014270: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00014280: 2020 2020 2020 2020 2022 6d61 7267 696e           "margin
-00014290: 223a 2027 302e 3030 3030 3030 3030 272c  ": '0.00000000',
-000142a0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
-000142b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000142c0: 6d69 7363 223a 2027 270a 2020 2020 2020  misc": ''.      
-000142d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000142e0: 2020 2020 7d0a 2020 2020 2020 2020 2020      }.          
-000142f0: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
-00014300: 2020 2020 2020 2020 2020 2320 2020 2020            #     
-00014310: 7d0a 2020 2020 2020 2020 2020 2020 230a  }.            #.
-00014320: 2020 2020 2020 2020 2020 2020 7261 7754              rawT
-00014330: 7261 6465 7320 3d20 7365 6c66 2e73 6166  rades = self.saf
-00014340: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-00014350: 2c20 2772 6573 756c 7427 290a 2020 2020  , 'result').    
-00014360: 2020 2020 2020 2020 6964 7320 3d20 6c69          ids = li
-00014370: 7374 2872 6177 5472 6164 6573 2e6b 6579  st(rawTrades.key
-00014380: 7328 2929 0a20 2020 2020 2020 2020 2020  s()).           
-00014390: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-000143a0: 302c 206c 656e 2869 6473 2929 3a0a 2020  0, len(ids)):.  
-000143b0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-000143c0: 7754 7261 6465 735b 6964 735b 695d 5d5b  wTrades[ids[i]][
-000143d0: 2769 6427 5d20 3d20 6964 735b 695d 0a20  'id'] = ids[i]. 
-000143e0: 2020 2020 2020 2020 2020 2074 7261 6465             trade
-000143f0: 7320 3d20 7365 6c66 2e70 6172 7365 5f74  s = self.parse_t
-00014400: 7261 6465 7328 7261 7754 7261 6465 732c  rades(rawTrades,
-00014410: 204e 6f6e 652c 2073 696e 6365 2c20 6c69   None, since, li
-00014420: 6d69 7429 0a20 2020 2020 2020 2020 2020  mit).           
-00014430: 2074 7261 6465 7346 696c 7465 7265 6442   tradesFilteredB
-00014440: 7953 796d 626f 6c20 3d20 7365 6c66 2e66  ySymbol = self.f
-00014450: 696c 7465 725f 6279 5f73 796d 626f 6c28  ilter_by_symbol(
-00014460: 7472 6164 6573 2c20 7379 6d62 6f6c 290a  trades, symbol).
-00014470: 2020 2020 2020 2020 2020 2020 7265 7375              resu
-00014480: 6c74 203d 2073 656c 662e 6172 7261 795f  lt = self.array_
-00014490: 636f 6e63 6174 2872 6573 756c 742c 2074  concat(result, t
-000144a0: 7261 6465 7346 696c 7465 7265 6442 7953  radesFilteredByS
-000144b0: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-000144c0: 6574 7572 6e20 7265 7375 6c74 0a0a 2020  eturn result..  
-000144d0: 2020 6173 796e 6320 6465 6620 6665 7463    async def fetc
-000144e0: 685f 6f72 6465 7273 5f62 795f 6964 7328  h_orders_by_ids(
-000144f0: 7365 6c66 2c20 6964 732c 2073 796d 626f  self, ids, symbo
-00014500: 6c3a 2053 7472 203d 204e 6f6e 652c 2070  l: Str = None, p
-00014510: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00014520: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-00014530: 6574 6368 206f 7264 6572 7320 6279 2074  etch orders by t
-00014540: 6865 206c 6973 7420 6f66 206f 7264 6572  he list of order
-00014550: 2069 640a 2020 2020 2020 2020 3a73 6565   id.        :see
-00014560: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
-00014570: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
-00014580: 7461 672f 4163 636f 756e 742d 4461 7461  tag/Account-Data
-00014590: 2f6f 7065 7261 7469 6f6e 2f67 6574 436c  /operation/getCl
-000145a0: 6f73 6564 4f72 6465 7273 0a20 2020 2020  osedOrders.     
-000145b0: 2020 203a 7061 7261 6d20 7374 725b 5d7c     :param str[]|
-000145c0: 4e6f 6e65 2069 6473 3a20 6c69 7374 206f  None ids: list o
-000145d0: 6620 6f72 6465 7220 6964 0a20 2020 2020  f order id.     
-000145e0: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
-000145f0: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
-00014600: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-00014610: 6963 2074 6f20 7468 6520 6b72 616b 656e  ic to the kraken
-00014620: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
-00014630: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00014640: 6963 745b 5d3a 2061 206c 6973 7420 6f66  ict[]: a list of
-00014650: 2060 6f72 6465 7220 7374 7275 6374 7572   `order structur
-00014660: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
-00014670: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
-00014680: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
-00014690: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000146a0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-000146b0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-000146c0: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-000146d0: 3d20 6177 6169 7420 7365 6c66 2e70 7269  = await self.pri
-000146e0: 7661 7465 506f 7374 5175 6572 794f 7264  vatePostQueryOrd
-000146f0: 6572 7328 7365 6c66 2e65 7874 656e 6428  ers(self.extend(
-00014700: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-00014710: 7261 6465 7327 3a20 5472 7565 2c20 2023  rades': True,  #
-00014720: 2077 6865 7468 6572 206f 7220 6e6f 7420   whether or not 
-00014730: 746f 2069 6e63 6c75 6465 2074 7261 6465  to include trade
-00014740: 7320 696e 206f 7574 7075 7428 6f70 7469  s in output(opti
-00014750: 6f6e 616c 2c20 6465 6661 756c 7420 4661  onal, default Fa
-00014760: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-00014770: 2027 7478 6964 273a 2027 2c27 2e6a 6f69   'txid': ','.joi
-00014780: 6e28 6964 7329 2c20 2023 2063 6f6d 6d61  n(ids),  # comma
-00014790: 2064 656c 696d 6974 6564 206c 6973 7420   delimited list 
-000147a0: 6f66 2074 7261 6e73 6163 7469 6f6e 2069  of transaction i
-000147b0: 6473 2074 6f20 7175 6572 7920 696e 666f  ds to query info
-000147c0: 2061 626f 7574 2832 3020 6d61 7869 6d75   about(20 maximu
-000147d0: 6d29 0a20 2020 2020 2020 207d 2c20 7061  m).        }, pa
-000147e0: 7261 6d73 2929 0a20 2020 2020 2020 2072  rams)).        r
-000147f0: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
-00014800: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
-00014810: 2c20 2772 6573 756c 7427 2c20 7b7d 290a  , 'result', {}).
-00014820: 2020 2020 2020 2020 6f72 6465 7273 203d          orders =
-00014830: 205b 5d0a 2020 2020 2020 2020 6f72 6465   [].        orde
-00014840: 7249 6473 203d 206c 6973 7428 7265 7375  rIds = list(resu
-00014850: 6c74 2e6b 6579 7328 2929 0a20 2020 2020  lt.keys()).     
-00014860: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
-00014870: 6528 302c 206c 656e 286f 7264 6572 4964  e(0, len(orderId
-00014880: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-00014890: 2069 6420 3d20 6f72 6465 7249 6473 5b69   id = orderIds[i
-000148a0: 5d0a 2020 2020 2020 2020 2020 2020 6974  ].            it
-000148b0: 656d 203d 2072 6573 756c 745b 6964 5d0a  em = result[id].
-000148c0: 2020 2020 2020 2020 2020 2020 6f72 6465              orde
-000148d0: 7220 3d20 7365 6c66 2e70 6172 7365 5f6f  r = self.parse_o
-000148e0: 7264 6572 2873 656c 662e 6578 7465 6e64  rder(self.extend
-000148f0: 287b 2769 6427 3a20 6964 7d2c 2069 7465  ({'id': id}, ite
-00014900: 6d29 290a 2020 2020 2020 2020 2020 2020  m)).            
-00014910: 6f72 6465 7273 2e61 7070 656e 6428 6f72  orders.append(or
-00014920: 6465 7229 0a20 2020 2020 2020 2072 6574  der).        ret
-00014930: 7572 6e20 6f72 6465 7273 0a0a 2020 2020  urn orders..    
-00014940: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-00014950: 6d79 5f74 7261 6465 7328 7365 6c66 2c20  my_trades(self, 
-00014960: 7379 6d62 6f6c 3a20 5374 7220 3d20 4e6f  symbol: Str = No
-00014970: 6e65 2c20 7369 6e63 653a 2049 6e74 203d  ne, since: Int =
-00014980: 204e 6f6e 652c 206c 696d 6974 3a20 496e   None, limit: In
-00014990: 7420 3d20 4e6f 6e65 2c20 7061 7261 6d73  t = None, params
-000149a0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-000149b0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-000149c0: 616c 6c20 7472 6164 6573 206d 6164 6520  all trades made 
-000149d0: 6279 2074 6865 2075 7365 720a 2020 2020  by the user.    
-000149e0: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-000149f0: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-00014a00: 6d2f 7265 7374 2f23 7461 672f 4163 636f  m/rest/#tag/Acco
-00014a10: 756e 742d 4461 7461 2f6f 7065 7261 7469  unt-Data/operati
-00014a20: 6f6e 2f67 6574 5472 6164 6548 6973 746f  on/getTradeHisto
-00014a30: 7279 0a20 2020 2020 2020 203a 7061 7261  ry.        :para
-00014a40: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-00014a50: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-00014a60: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
-00014a70: 616d 2069 6e74 205b 7369 6e63 655d 3a20  am int [since]: 
-00014a80: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
-00014a90: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
-00014aa0: 2074 7261 6465 7320 666f 720a 2020 2020   trades for.    
-00014ab0: 2020 2020 3a70 6172 616d 2069 6e74 205b      :param int [
-00014ac0: 6c69 6d69 745d 3a20 7468 6520 6d61 7869  limit]: the maxi
-00014ad0: 6d75 6d20 6e75 6d62 6572 206f 6620 7472  mum number of tr
-00014ae0: 6164 6573 2073 7472 7563 7475 7265 7320  ades structures 
-00014af0: 746f 2072 6574 7269 6576 650a 2020 2020  to retrieve.    
-00014b00: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-00014b10: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
-00014b20: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-00014b30: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
-00014b40: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
-00014b50: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00014b60: 7320 5472 6164 655b 5d3a 2061 206c 6973  s Trade[]: a lis
-00014b70: 7420 6f66 2060 7472 6164 6520 7374 7275  t of `trade stru
-00014b80: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
-00014b90: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-00014ba0: 3f69 643d 7472 6164 652d 7374 7275 6374  ?id=trade-struct
-00014bb0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-00014bc0: 220a 2020 2020 2020 2020 6177 6169 7420  ".        await 
-00014bd0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00014be0: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
-00014bf0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00014c00: 2020 2020 2320 2774 7970 6527 3a20 2761      # 'type': 'a
-00014c10: 6c6c 272c 2020 2320 616e 7920 706f 7369  ll',  # any posi
-00014c20: 7469 6f6e 2c20 636c 6f73 6564 2070 6f73  tion, closed pos
-00014c30: 6974 696f 6e2c 2063 6c6f 7369 6e67 2070  ition, closing p
-00014c40: 6f73 6974 696f 6e2c 206e 6f20 706f 7369  osition, no posi
-00014c50: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-00014c60: 2023 2027 7472 6164 6573 273a 2046 616c   # 'trades': Fal
-00014c70: 7365 2c20 2023 2077 6865 7468 6572 206f  se,  # whether o
-00014c80: 7220 6e6f 7420 746f 2069 6e63 6c75 6465  r not to include
-00014c90: 2074 7261 6465 7320 7265 6c61 7465 6420   trades related 
-00014ca0: 746f 2070 6f73 6974 696f 6e20 696e 206f  to position in o
-00014cb0: 7574 7075 740a 2020 2020 2020 2020 2020  utput.          
-00014cc0: 2020 2320 2773 7461 7274 273a 2031 3233    # 'start': 123
-00014cd0: 3435 3637 3839 302c 2020 2320 7374 6172  4567890,  # star
-00014ce0: 7469 6e67 2075 6e69 7820 7469 6d65 7374  ting unix timest
-00014cf0: 616d 7020 6f72 2074 7261 6465 2074 7820  amp or trade tx 
-00014d00: 6964 206f 6620 7265 7375 6c74 7328 6578  id of results(ex
-00014d10: 636c 7573 6976 6529 0a20 2020 2020 2020  clusive).       
-00014d20: 2020 2020 2023 2027 656e 6427 3a20 3132       # 'end': 12
-00014d30: 3334 3536 3738 3930 2c20 2023 2065 6e64  34567890,  # end
-00014d40: 696e 6720 756e 6978 2074 696d 6573 7461  ing unix timesta
-00014d50: 6d70 206f 7220 7472 6164 6520 7478 2069  mp or trade tx i
-00014d60: 6420 6f66 2072 6573 756c 7473 2869 6e63  d of results(inc
-00014d70: 6c75 7369 7665 290a 2020 2020 2020 2020  lusive).        
-00014d80: 2020 2020 2320 276f 6673 2720 3d20 7265      # 'ofs' = re
-00014d90: 7375 6c74 206f 6666 7365 740a 2020 2020  sult offset.    
-00014da0: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
-00014db0: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-00014dc0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00014dd0: 7265 7175 6573 745b 2773 7461 7274 275d  request['start']
-00014de0: 203d 2073 656c 662e 7061 7273 655f 746f   = self.parse_to
-00014df0: 5f69 6e74 2873 696e 6365 202f 2031 3030  _int(since / 100
-00014e00: 3029 0a20 2020 2020 2020 2072 6573 706f  0).        respo
-00014e10: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-00014e20: 2e70 7269 7661 7465 506f 7374 5472 6164  .privatePostTrad
-00014e30: 6573 4869 7374 6f72 7928 7365 6c66 2e65  esHistory(self.e
-00014e40: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
-00014e50: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
-00014e60: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00014e70: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00014e80: 2020 2020 2265 7272 6f72 223a 205b 5d2c      "error": [],
-00014e90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00014ea0: 2020 2022 7265 7375 6c74 223a 207b 0a20     "result": {. 
-00014eb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00014ec0: 2020 2020 2022 7472 6164 6573 223a 207b       "trades": {
-00014ed0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00014ee0: 2020 2020 2020 2020 2020 2022 474a 334e             "GJ3N
-00014ef0: 5951 2d58 4a52 5446 2d54 485a 4142 4622  YQ-XJRTF-THZABF"
-00014f00: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
-00014f10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014f20: 2020 226f 7264 6572 7478 6964 223a 2022    "ordertxid": "
-00014f30: 544b 4832 5345 2d5a 4946 3545 2d43 4649  TKH2SE-ZIF5E-CFI
-00014f40: 374c 5422 2c0a 2020 2020 2020 2020 2320  7LT",.        # 
-00014f50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014f60: 2020 2020 2270 6f73 7478 6964 223a 2022      "postxid": "
-00014f70: 4f45 4e33 5658 2d4d 3749 4635 2d4a 4e42  OEN3VX-M7IF5-JNB
-00014f80: 4a41 4d22 2c0a 2020 2020 2020 2020 2320  JAM",.        # 
+000141e0: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
+000141f0: 6522 3a20 2730 2e30 3434 3333 3738 3427  e": '0.04433784'
+00014200: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
+00014210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014220: 2276 6f6c 223a 2027 3232 2e32 3030 3030  "vol": '22.20000
+00014230: 3030 3027 2c0a 2020 2020 2020 2020 2020  000',.          
+00014240: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00014250: 2020 2020 226d 6172 6769 6e22 3a20 2730      "margin": '0
+00014260: 2e30 3030 3030 3030 3027 2c0a 2020 2020  .00000000',.    
+00014270: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00014280: 2020 2020 2020 2020 2020 226d 6973 6322            "misc"
+00014290: 3a20 2727 0a20 2020 2020 2020 2020 2020  : ''.           
+000142a0: 2023 2020 2020 2020 2020 2020 2020 207d   #             }
+000142b0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+000142c0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+000142d0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+000142e0: 2020 2020 2020 2020 2023 0a20 2020 2020           #.     
+000142f0: 2020 2020 2020 2072 6177 5472 6164 6573         rawTrades
+00014300: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00014310: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+00014320: 7375 6c74 2729 0a20 2020 2020 2020 2020  sult').         
+00014330: 2020 2069 6473 203d 206c 6973 7428 7261     ids = list(ra
+00014340: 7754 7261 6465 732e 6b65 7973 2829 290a  wTrades.keys()).
+00014350: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00014360: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+00014370: 6e28 6964 7329 293a 0a20 2020 2020 2020  n(ids)):.       
+00014380: 2020 2020 2020 2020 2072 6177 5472 6164           rawTrad
+00014390: 6573 5b69 6473 5b69 5d5d 5b27 6964 275d  es[ids[i]]['id']
+000143a0: 203d 2069 6473 5b69 5d0a 2020 2020 2020   = ids[i].      
+000143b0: 2020 2020 2020 7472 6164 6573 203d 2073        trades = s
+000143c0: 656c 662e 7061 7273 655f 7472 6164 6573  elf.parse_trades
+000143d0: 2872 6177 5472 6164 6573 2c20 4e6f 6e65  (rawTrades, None
+000143e0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
+000143f0: 2020 2020 2020 2020 2020 2020 7472 6164              trad
+00014400: 6573 4669 6c74 6572 6564 4279 5379 6d62  esFilteredBySymb
+00014410: 6f6c 203d 2073 656c 662e 6669 6c74 6572  ol = self.filter
+00014420: 5f62 795f 7379 6d62 6f6c 2874 7261 6465  _by_symbol(trade
+00014430: 732c 2073 796d 626f 6c29 0a20 2020 2020  s, symbol).     
+00014440: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+00014450: 7365 6c66 2e61 7272 6179 5f63 6f6e 6361  self.array_conca
+00014460: 7428 7265 7375 6c74 2c20 7472 6164 6573  t(result, trades
+00014470: 4669 6c74 6572 6564 4279 5379 6d62 6f6c  FilteredBySymbol
+00014480: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00014490: 2072 6573 756c 740a 0a20 2020 2061 7379   result..    asy
+000144a0: 6e63 2064 6566 2066 6574 6368 5f6f 7264  nc def fetch_ord
+000144b0: 6572 735f 6279 5f69 6473 2873 656c 662c  ers_by_ids(self,
+000144c0: 2069 6473 2c20 7379 6d62 6f6c 3a20 5374   ids, symbol: St
+000144d0: 7220 3d20 4e6f 6e65 2c20 7061 7261 6d73  r = None, params
+000144e0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+000144f0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00014500: 6f72 6465 7273 2062 7920 7468 6520 6c69  orders by the li
+00014510: 7374 206f 6620 6f72 6465 7220 6964 0a20  st of order id. 
+00014520: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
+00014530: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
+00014540: 2e63 6f6d 2f72 6573 742f 2374 6167 2f41  .com/rest/#tag/A
+00014550: 6363 6f75 6e74 2d44 6174 612f 6f70 6572  ccount-Data/oper
+00014560: 6174 696f 6e2f 6765 7443 6c6f 7365 644f  ation/getClosedO
+00014570: 7264 6572 730a 2020 2020 2020 2020 3a70  rders.        :p
+00014580: 6172 616d 2073 7472 5b5d 7c4e 6f6e 6520  aram str[]|None 
+00014590: 6964 733a 206c 6973 7420 6f66 206f 7264  ids: list of ord
+000145a0: 6572 2069 640a 2020 2020 2020 2020 3a70  er id.        :p
+000145b0: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
+000145c0: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
+000145d0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+000145e0: 2074 6865 206b 7261 6b65 6e20 6170 6920   the kraken api 
+000145f0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+00014600: 203a 7265 7475 726e 7320 6469 6374 5b5d   :returns dict[]
+00014610: 3a20 6120 6c69 7374 206f 6620 606f 7264  : a list of `ord
+00014620: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
+00014630: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00014640: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
+00014650: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+00014660: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+00014670: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+00014680: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+00014690: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
+000146a0: 6974 2073 656c 662e 7072 6976 6174 6550  it self.privateP
+000146b0: 6f73 7451 7565 7279 4f72 6465 7273 2873  ostQueryOrders(s
+000146c0: 656c 662e 6578 7465 6e64 287b 0a20 2020  elf.extend({.   
+000146d0: 2020 2020 2020 2020 2027 7472 6164 6573           'trades
+000146e0: 273a 2054 7275 652c 2020 2320 7768 6574  ': True,  # whet
+000146f0: 6865 7220 6f72 206e 6f74 2074 6f20 696e  her or not to in
+00014700: 636c 7564 6520 7472 6164 6573 2069 6e20  clude trades in 
+00014710: 6f75 7470 7574 286f 7074 696f 6e61 6c2c  output(optional,
+00014720: 2064 6566 6175 6c74 2046 616c 7365 290a   default False).
+00014730: 2020 2020 2020 2020 2020 2020 2774 7869              'txi
+00014740: 6427 3a20 272c 272e 6a6f 696e 2869 6473  d': ','.join(ids
+00014750: 292c 2020 2320 636f 6d6d 6120 6465 6c69  ),  # comma deli
+00014760: 6d69 7465 6420 6c69 7374 206f 6620 7472  mited list of tr
+00014770: 616e 7361 6374 696f 6e20 6964 7320 746f  ansaction ids to
+00014780: 2071 7565 7279 2069 6e66 6f20 6162 6f75   query info abou
+00014790: 7428 3230 206d 6178 696d 756d 290a 2020  t(20 maximum).  
+000147a0: 2020 2020 2020 7d2c 2070 6172 616d 7329        }, params)
+000147b0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
+000147c0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000147d0: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
+000147e0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
+000147f0: 2020 206f 7264 6572 7320 3d20 5b5d 0a20     orders = []. 
+00014800: 2020 2020 2020 206f 7264 6572 4964 7320         orderIds 
+00014810: 3d20 6c69 7374 2872 6573 756c 742e 6b65  = list(result.ke
+00014820: 7973 2829 290a 2020 2020 2020 2020 666f  ys()).        fo
+00014830: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
+00014840: 6c65 6e28 6f72 6465 7249 6473 2929 3a0a  len(orderIds)):.
+00014850: 2020 2020 2020 2020 2020 2020 6964 203d              id =
+00014860: 206f 7264 6572 4964 735b 695d 0a20 2020   orderIds[i].   
+00014870: 2020 2020 2020 2020 2069 7465 6d20 3d20           item = 
+00014880: 7265 7375 6c74 5b69 645d 0a20 2020 2020  result[id].     
+00014890: 2020 2020 2020 206f 7264 6572 203d 2073         order = s
+000148a0: 656c 662e 7061 7273 655f 6f72 6465 7228  elf.parse_order(
+000148b0: 7365 6c66 2e65 7874 656e 6428 7b27 6964  self.extend({'id
+000148c0: 273a 2069 647d 2c20 6974 656d 2929 0a20  ': id}, item)). 
+000148d0: 2020 2020 2020 2020 2020 206f 7264 6572             order
+000148e0: 732e 6170 7065 6e64 286f 7264 6572 290a  s.append(order).
+000148f0: 2020 2020 2020 2020 7265 7475 726e 206f          return o
+00014900: 7264 6572 730a 0a20 2020 2061 7379 6e63  rders..    async
+00014910: 2064 6566 2066 6574 6368 5f6d 795f 7472   def fetch_my_tr
+00014920: 6164 6573 2873 656c 662c 2073 796d 626f  ades(self, symbo
+00014930: 6c3a 2053 7472 203d 204e 6f6e 652c 2073  l: Str = None, s
+00014940: 696e 6365 3a20 496e 7420 3d20 4e6f 6e65  ince: Int = None
+00014950: 2c20 6c69 6d69 743a 2049 6e74 203d 204e  , limit: Int = N
+00014960: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00014970: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00014980: 2020 2020 2066 6574 6368 2061 6c6c 2074       fetch all t
+00014990: 7261 6465 7320 6d61 6465 2062 7920 7468  rades made by th
+000149a0: 6520 7573 6572 0a20 2020 2020 2020 203a  e user.        :
+000149b0: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+000149c0: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+000149d0: 742f 2374 6167 2f41 6363 6f75 6e74 2d44  t/#tag/Account-D
+000149e0: 6174 612f 6f70 6572 6174 696f 6e2f 6765  ata/operation/ge
+000149f0: 7454 7261 6465 4869 7374 6f72 790a 2020  tTradeHistory.  
+00014a00: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00014a10: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00014a20: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
+00014a30: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00014a40: 7420 5b73 696e 6365 5d3a 2074 6865 2065  t [since]: the e
+00014a50: 6172 6c69 6573 7420 7469 6d65 2069 6e20  arliest time in 
+00014a60: 6d73 2074 6f20 6665 7463 6820 7472 6164  ms to fetch trad
+00014a70: 6573 2066 6f72 0a20 2020 2020 2020 203a  es for.        :
+00014a80: 7061 7261 6d20 696e 7420 5b6c 696d 6974  param int [limit
+00014a90: 5d3a 2074 6865 206d 6178 696d 756d 206e  ]: the maximum n
+00014aa0: 756d 6265 7220 6f66 2074 7261 6465 7320  umber of trades 
+00014ab0: 7374 7275 6374 7572 6573 2074 6f20 7265  structures to re
+00014ac0: 7472 6965 7665 0a20 2020 2020 2020 203a  trieve.        :
+00014ad0: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
+00014ae0: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
+00014af0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00014b00: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
+00014b10: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
+00014b20: 2020 2020 3a72 6574 7572 6e73 2054 7261      :returns Tra
+00014b30: 6465 5b5d 3a20 6120 6c69 7374 206f 6620  de[]: a list of 
+00014b40: 6074 7261 6465 2073 7472 7563 7475 7265  `trade structure
+00014b50: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
+00014b60: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d74  ccxt.com/#/?id=t
+00014b70: 7261 6465 2d73 7472 7563 7475 7265 3e60  rade-structure>`
+00014b80: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00014b90: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
+00014ba0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00014bb0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00014bc0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00014bd0: 2027 7479 7065 273a 2027 616c 6c27 2c20   'type': 'all', 
+00014be0: 2023 2061 6e79 2070 6f73 6974 696f 6e2c   # any position,
+00014bf0: 2063 6c6f 7365 6420 706f 7369 7469 6f6e   closed position
+00014c00: 2c20 636c 6f73 696e 6720 706f 7369 7469  , closing positi
+00014c10: 6f6e 2c20 6e6f 2070 6f73 6974 696f 6e0a  on, no position.
+00014c20: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+00014c30: 7261 6465 7327 3a20 4661 6c73 652c 2020  rades': False,  
+00014c40: 2320 7768 6574 6865 7220 6f72 206e 6f74  # whether or not
+00014c50: 2074 6f20 696e 636c 7564 6520 7472 6164   to include trad
+00014c60: 6573 2072 656c 6174 6564 2074 6f20 706f  es related to po
+00014c70: 7369 7469 6f6e 2069 6e20 6f75 7470 7574  sition in output
+00014c80: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00014c90: 7374 6172 7427 3a20 3132 3334 3536 3738  start': 12345678
+00014ca0: 3930 2c20 2023 2073 7461 7274 696e 6720  90,  # starting 
+00014cb0: 756e 6978 2074 696d 6573 7461 6d70 206f  unix timestamp o
+00014cc0: 7220 7472 6164 6520 7478 2069 6420 6f66  r trade tx id of
+00014cd0: 2072 6573 756c 7473 2865 7863 6c75 7369   results(exclusi
+00014ce0: 7665 290a 2020 2020 2020 2020 2020 2020  ve).            
+00014cf0: 2320 2765 6e64 273a 2031 3233 3435 3637  # 'end': 1234567
+00014d00: 3839 302c 2020 2320 656e 6469 6e67 2075  890,  # ending u
+00014d10: 6e69 7820 7469 6d65 7374 616d 7020 6f72  nix timestamp or
+00014d20: 2074 7261 6465 2074 7820 6964 206f 6620   trade tx id of 
+00014d30: 7265 7375 6c74 7328 696e 636c 7573 6976  results(inclusiv
+00014d40: 6529 0a20 2020 2020 2020 2020 2020 2023  e).            #
+00014d50: 2027 6f66 7327 203d 2072 6573 756c 7420   'ofs' = result 
+00014d60: 6f66 6673 6574 0a20 2020 2020 2020 207d  offset.        }
+00014d70: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+00014d80: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+00014d90: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00014da0: 7374 5b27 7374 6172 7427 5d20 3d20 7365  st['start'] = se
+00014db0: 6c66 2e70 6172 7365 5f74 6f5f 696e 7428  lf.parse_to_int(
+00014dc0: 7369 6e63 6520 2f20 3130 3030 290a 2020  since / 1000).  
+00014dd0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00014de0: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+00014df0: 6174 6550 6f73 7454 7261 6465 7348 6973  atePostTradesHis
+00014e00: 746f 7279 2873 656c 662e 6578 7465 6e64  tory(self.extend
+00014e10: 2872 6571 7565 7374 2c20 7061 7261 6d73  (request, params
+00014e20: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+00014e30: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+00014e40: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00014e50: 6572 726f 7222 3a20 5b5d 2c0a 2020 2020  error": [],.    
+00014e60: 2020 2020 2320 2020 2020 2020 2020 2272      #         "r
+00014e70: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
+00014e80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00014e90: 2274 7261 6465 7322 3a20 7b0a 2020 2020  "trades": {.    
+00014ea0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00014eb0: 2020 2020 2020 2247 4a33 4e59 512d 584a        "GJ3NYQ-XJ
+00014ec0: 5254 462d 5448 5a41 4246 223a 207b 0a20  RTF-THZABF": {. 
+00014ed0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00014ee0: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+00014ef0: 6465 7274 7869 6422 3a20 2254 4b48 3253  dertxid": "TKH2S
+00014f00: 452d 5a49 4635 452d 4346 4937 4c54 222c  E-ZIF5E-CFI7LT",
+00014f10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00014f20: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00014f30: 706f 7374 7869 6422 3a20 224f 454e 3356  postxid": "OEN3V
+00014f40: 582d 4d37 4946 352d 4a4e 424a 414d 222c  X-M7IF5-JNBJAM",
+00014f50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00014f60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00014f70: 7061 6972 223a 2022 5849 434e 5845 5448  pair": "XICNXETH
+00014f80: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 00014f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014fa0: 2020 2020 2270 6169 7222 3a20 2258 4943      "pair": "XIC
-00014fb0: 4e58 4554 4822 2c0a 2020 2020 2020 2020  NXETH",.        
-00014fc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00014fd0: 2020 2020 2020 2274 696d 6522 3a20 3135        "time": 15
-00014fe0: 3237 3231 3332 3239 2e34 3439 312c 0a20  27213229.4491,. 
-00014ff0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00015000: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
-00015010: 7065 223a 2022 7365 6c6c 222c 0a20 2020  pe": "sell",.   
-00015020: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00015030: 2020 2020 2020 2020 2020 2022 6f72 6465             "orde
-00015040: 7274 7970 6522 3a20 226c 696d 6974 222c  rtype": "limit",
-00015050: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00015060: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015070: 7072 6963 6522 3a20 2230 2e30 3031 3631  price": "0.00161
-00015080: 3222 2c0a 2020 2020 2020 2020 2320 2020  2",.        #   
-00015090: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000150a0: 2020 2263 6f73 7422 3a20 2230 2e30 3235    "cost": "0.025
-000150b0: 3739 3222 2c0a 2020 2020 2020 2020 2320  792",.        # 
+00014fa0: 2022 7469 6d65 223a 2031 3532 3732 3133   "time": 1527213
+00014fb0: 3232 392e 3434 3931 2c0a 2020 2020 2020  229.4491,.      
+00014fc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00014fd0: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
+00014fe0: 2273 656c 6c22 2c0a 2020 2020 2020 2020  "sell",.        
+00014ff0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00015000: 2020 2020 2020 226f 7264 6572 7479 7065        "ordertype
+00015010: 223a 2022 6c69 6d69 7422 2c0a 2020 2020  ": "limit",.    
+00015020: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00015030: 2020 2020 2020 2020 2020 2270 7269 6365            "price
+00015040: 223a 2022 302e 3030 3136 3132 222c 0a20  ": "0.001612",. 
+00015050: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00015060: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+00015070: 7374 223a 2022 302e 3032 3537 3932 222c  st": "0.025792",
+00015080: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00015090: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000150a0: 6665 6522 3a20 2230 2e30 3030 3032 3622  fee": "0.000026"
+000150b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 000150c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000150d0: 2020 2020 2266 6565 223a 2022 302e 3030      "fee": "0.00
-000150e0: 3030 3236 222c 0a20 2020 2020 2020 2023  0026",.        #
+000150d0: 2276 6f6c 223a 2022 3136 2e30 3030 3030  "vol": "16.00000
+000150e0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
 000150f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015100: 2020 2020 2022 766f 6c22 3a20 2231 362e       "vol": "16.
-00015110: 3030 3030 3030 3030 222c 0a20 2020 2020  00000000",.     
-00015120: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00015130: 2020 2020 2020 2020 2022 6d61 7267 696e           "margin
-00015140: 223a 2022 302e 3030 3030 3030 222c 0a20  ": "0.000000",. 
-00015150: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00015160: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
-00015170: 7363 223a 2022 220a 2020 2020 2020 2020  sc": "".        
-00015180: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00015190: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-000151a0: 2020 2020 2020 2020 2020 2020 2020 202e                 .
-000151b0: 2e2e 0a20 2020 2020 2020 2023 2020 2020  ...        #    
-000151c0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-000151d0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000151e0: 2020 2263 6f75 6e74 223a 2039 3736 302c    "count": 9760,
-000151f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00015200: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00015210: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-00015220: 2020 2020 2020 2020 7472 6164 6573 203d          trades =
-00015230: 2072 6573 706f 6e73 655b 2772 6573 756c   response['resul
-00015240: 7427 5d5b 2774 7261 6465 7327 5d0a 2020  t']['trades'].  
-00015250: 2020 2020 2020 6964 7320 3d20 6c69 7374        ids = list
-00015260: 2874 7261 6465 732e 6b65 7973 2829 290a  (trades.keys()).
-00015270: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
-00015280: 2072 616e 6765 2830 2c20 6c65 6e28 6964   range(0, len(id
-00015290: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
-000152a0: 2074 7261 6465 735b 6964 735b 695d 5d5b   trades[ids[i]][
-000152b0: 2769 6427 5d20 3d20 6964 735b 695d 0a20  'id'] = ids[i]. 
-000152c0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
-000152d0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-000152e0: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
-000152f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00015300: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-00015310: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-00015320: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00015330: 2e70 6172 7365 5f74 7261 6465 7328 7472  .parse_trades(tr
-00015340: 6164 6573 2c20 6d61 726b 6574 2c20 7369  ades, market, si
-00015350: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
-00015360: 2061 7379 6e63 2064 6566 2063 616e 6365   async def cance
-00015370: 6c5f 6f72 6465 7228 7365 6c66 2c20 6964  l_order(self, id
-00015380: 3a20 7374 722c 2073 796d 626f 6c3a 2053  : str, symbol: S
-00015390: 7472 203d 204e 6f6e 652c 2070 6172 616d  tr = None, param
-000153a0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-000153b0: 2222 0a20 2020 2020 2020 2063 616e 6365  "".        cance
-000153c0: 6c73 2061 6e20 6f70 656e 206f 7264 6572  ls an open order
-000153d0: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
-000153e0: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
-000153f0: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
-00015400: 2f54 7261 6469 6e67 2f6f 7065 7261 7469  /Trading/operati
-00015410: 6f6e 2f63 616e 6365 6c4f 7264 6572 0a20  on/cancelOrder. 
-00015420: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00015430: 7220 6964 3a20 6f72 6465 7220 6964 0a20  r id: order id. 
-00015440: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00015450: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
-00015460: 6420 7379 6d62 6f6c 206f 6620 7468 6520  d symbol of the 
-00015470: 6d61 726b 6574 2074 6865 206f 7264 6572  market the order
-00015480: 2077 6173 206d 6164 6520 696e 0a20 2020   was made in.   
-00015490: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-000154a0: 205b 7061 7261 6d73 5d3a 2065 7874 7261   [params]: extra
-000154b0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
-000154c0: 6966 6963 2074 6f20 7468 6520 6578 6368  ific to the exch
-000154d0: 616e 6765 2041 5049 2065 6e64 706f 696e  ange API endpoin
-000154e0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
-000154f0: 6e73 2064 6963 743a 2041 6e20 606f 7264  ns dict: An `ord
-00015500: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-00015510: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00015520: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-00015530: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00015540: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00015550: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
-00015560: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
-00015570: 2020 7265 7370 6f6e 7365 203d 204e 6f6e    response = Non
-00015580: 650a 2020 2020 2020 2020 636c 6965 6e74  e.        client
-00015590: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
-000155a0: 6166 655f 7661 6c75 655f 3228 7061 7261  afe_value_2(para
-000155b0: 6d73 2c20 2775 7365 7272 6566 272c 2027  ms, 'userref', '
-000155c0: 636c 6965 6e74 4f72 6465 7249 6427 2c20  clientOrderId', 
-000155d0: 6964 290a 2020 2020 2020 2020 7265 7175  id).        requ
-000155e0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-000155f0: 2020 2020 2774 7869 6427 3a20 636c 6965      'txid': clie
-00015600: 6e74 4f72 6465 7249 642c 2020 2320 6f72  ntOrderId,  # or
-00015610: 6465 7220 6964 206f 7220 7573 6572 7265  der id or userre
-00015620: 660a 2020 2020 2020 2020 7d0a 2020 2020  f.        }.    
-00015630: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00015640: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00015650: 2775 7365 7272 6566 272c 2027 636c 6965  'userref', 'clie
-00015660: 6e74 4f72 6465 7249 6427 5d29 0a20 2020  ntOrderId']).   
-00015670: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00015680: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00015690: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
-000156a0: 6174 6550 6f73 7443 616e 6365 6c4f 7264  atePostCancelOrd
-000156b0: 6572 2873 656c 662e 6578 7465 6e64 2872  er(self.extend(r
-000156c0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-000156d0: 0a20 2020 2020 2020 2065 7863 6570 7420  .        except 
-000156e0: 4578 6365 7074 696f 6e20 6173 2065 3a0a  Exception as e:.
-000156f0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00015700: 656c 662e 6c61 7374 5f68 7474 705f 7265  elf.last_http_re
-00015710: 7370 6f6e 7365 3a0a 2020 2020 2020 2020  sponse:.        
-00015720: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00015730: 6c61 7374 5f68 7474 705f 7265 7370 6f6e  last_http_respon
-00015740: 7365 2e66 696e 6428 2745 4f72 6465 723a  se.find('EOrder:
-00015750: 556e 6b6e 6f77 6e20 6f72 6465 7227 2920  Unknown order') 
-00015760: 3e3d 2030 3a0a 2020 2020 2020 2020 2020  >= 0:.          
-00015770: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00015780: 4f72 6465 724e 6f74 466f 756e 6428 7365  OrderNotFound(se
-00015790: 6c66 2e69 6420 2b20 2720 6361 6e63 656c  lf.id + ' cancel
-000157a0: 4f72 6465 7228 2920 6572 726f 7220 2720  Order() error ' 
-000157b0: 2b20 7365 6c66 2e6c 6173 745f 6874 7470  + self.last_http
-000157c0: 5f72 6573 706f 6e73 6529 0a20 2020 2020  _response).     
-000157d0: 2020 2020 2020 2072 6169 7365 2065 0a20         raise e. 
-000157e0: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-000157f0: 7370 6f6e 7365 0a0a 2020 2020 6173 796e  sponse..    asyn
-00015800: 6320 6465 6620 6361 6e63 656c 5f6f 7264  c def cancel_ord
-00015810: 6572 7328 7365 6c66 2c20 6964 732c 2073  ers(self, ids, s
-00015820: 796d 626f 6c3a 2053 7472 203d 204e 6f6e  ymbol: Str = Non
-00015830: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-00015840: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00015850: 2020 2063 616e 6365 6c20 6d75 6c74 6970     cancel multip
-00015860: 6c65 206f 7264 6572 730a 2020 2020 2020  le orders.      
-00015870: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
-00015880: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
-00015890: 7265 7374 2f23 7461 672f 5472 6164 696e  rest/#tag/Tradin
-000158a0: 672f 6f70 6572 6174 696f 6e2f 6361 6e63  g/operation/canc
-000158b0: 656c 4f72 6465 7242 6174 6368 0a20 2020  elOrderBatch.   
-000158c0: 2020 2020 203a 7061 7261 6d20 7374 725b       :param str[
-000158d0: 5d20 6964 733a 206f 7065 6e20 6f72 6465  ] ids: open orde
-000158e0: 7273 2074 7261 6e73 6163 7469 6f6e 2049  rs transaction I
-000158f0: 4428 7478 6964 2920 6f72 2075 7365 7220  D(txid) or user 
-00015900: 7265 6665 7265 6e63 6528 7573 6572 7265  reference(userre
-00015910: 6629 0a20 2020 2020 2020 203a 7061 7261  f).        :para
-00015920: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-00015930: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
-00015940: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
-00015950: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
-00015960: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-00015970: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00015980: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
-00015990: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-000159a0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
-000159b0: 616e 206c 6973 7420 6f66 2060 6f72 6465  an list of `orde
-000159c0: 7220 7374 7275 6374 7572 6573 203c 6874  r structures <ht
-000159d0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-000159e0: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
-000159f0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00015a00: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00015a10: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
-00015a20: 2020 2020 2020 2020 276f 7264 6572 7327          'orders'
-00015a30: 3a20 6964 732c 0a20 2020 2020 2020 207d  : ids,.        }
-00015a40: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00015a50: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
-00015a60: 7269 7661 7465 506f 7374 4361 6e63 656c  rivatePostCancel
-00015a70: 4f72 6465 7242 6174 6368 2873 656c 662e  OrderBatch(self.
-00015a80: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00015a90: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-00015aa0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-00015ab0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00015ac0: 2020 2020 2022 6572 726f 7222 3a20 5b5d       "error": []
-00015ad0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00015ae0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-00015af0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00015b00: 2020 2020 2263 6f75 6e74 223a 2032 0a20      "count": 2. 
-00015b10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00015b20: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00015b30: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-00015b40: 2020 2020 2072 6574 7572 6e20 7265 7370       return resp
-00015b50: 6f6e 7365 0a0a 2020 2020 6173 796e 6320  onse..    async 
-00015b60: 6465 6620 6361 6e63 656c 5f61 6c6c 5f6f  def cancel_all_o
-00015b70: 7264 6572 7328 7365 6c66 2c20 7379 6d62  rders(self, symb
-00015b80: 6f6c 3a20 5374 7220 3d20 4e6f 6e65 2c20  ol: Str = None, 
-00015b90: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00015ba0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00015bb0: 6361 6e63 656c 2061 6c6c 206f 7065 6e20  cancel all open 
-00015bc0: 6f72 6465 7273 0a20 2020 2020 2020 203a  orders.        :
-00015bd0: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
-00015be0: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
-00015bf0: 742f 2374 6167 2f54 7261 6469 6e67 2f6f  t/#tag/Trading/o
-00015c00: 7065 7261 7469 6f6e 2f63 616e 6365 6c41  peration/cancelA
-00015c10: 6c6c 4f72 6465 7273 0a20 2020 2020 2020  llOrders.       
-00015c20: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00015c30: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-00015c40: 6574 2073 796d 626f 6c2c 206f 6e6c 7920  et symbol, only 
-00015c50: 6f72 6465 7273 2069 6e20 7468 6520 6d61  orders in the ma
-00015c60: 726b 6574 206f 6620 7365 6c66 2073 796d  rket of self sym
-00015c70: 626f 6c20 6172 6520 6361 6e63 656c 6c65  bol are cancelle
-00015c80: 6420 7768 656e 2073 796d 626f 6c20 6973  d when symbol is
-00015c90: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-00015ca0: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
-00015cb0: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
-00015cc0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00015cd0: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
-00015ce0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
-00015cf0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00015d00: 6469 6374 5b5d 3a20 6120 6c69 7374 206f  dict[]: a list o
-00015d10: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
-00015d20: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00015d30: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00015d40: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
-00015d50: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00015d60: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
-00015d70: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00015d80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00015d90: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
-00015da0: 7465 506f 7374 4361 6e63 656c 416c 6c28  tePostCancelAll(
-00015db0: 7061 7261 6d73 290a 0a20 2020 2061 7379  params)..    asy
-00015dc0: 6e63 2064 6566 2066 6574 6368 5f6f 7065  nc def fetch_ope
-00015dd0: 6e5f 6f72 6465 7273 2873 656c 662c 2073  n_orders(self, s
-00015de0: 796d 626f 6c3a 2053 7472 203d 204e 6f6e  ymbol: Str = Non
-00015df0: 652c 2073 696e 6365 3a20 496e 7420 3d20  e, since: Int = 
-00015e00: 4e6f 6e65 2c20 6c69 6d69 743a 2049 6e74  None, limit: Int
-00015e10: 203d 204e 6f6e 652c 2070 6172 616d 733d   = None, params=
-00015e20: 7b7d 2920 2d3e 204c 6973 745b 4f72 6465  {}) -> List[Orde
-00015e30: 725d 3a0a 2020 2020 2020 2020 2222 220a  r]:.        """.
-00015e40: 2020 2020 2020 2020 6665 7463 6820 616c          fetch al
-00015e50: 6c20 756e 6669 6c6c 6564 2063 7572 7265  l unfilled curre
-00015e60: 6e74 6c79 206f 7065 6e20 6f72 6465 7273  ntly open orders
-00015e70: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
-00015e80: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
-00015e90: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
-00015ea0: 2f41 6363 6f75 6e74 2d44 6174 612f 6f70  /Account-Data/op
-00015eb0: 6572 6174 696f 6e2f 6765 744f 7065 6e4f  eration/getOpenO
-00015ec0: 7264 6572 730a 2020 2020 2020 2020 3a70  rders.        :p
-00015ed0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-00015ee0: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00015ef0: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
-00015f00: 7061 7261 6d20 696e 7420 5b73 696e 6365  param int [since
-00015f10: 5d3a 2074 6865 2065 6172 6c69 6573 7420  ]: the earliest 
-00015f20: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
-00015f30: 7463 6820 6f70 656e 206f 7264 6572 7320  tch open orders 
-00015f40: 666f 720a 2020 2020 2020 2020 3a70 6172  for.        :par
-00015f50: 616d 2069 6e74 205b 6c69 6d69 745d 3a20  am int [limit]: 
-00015f60: 7468 6520 6d61 7869 6d75 6d20 6e75 6d62  the maximum numb
-00015f70: 6572 206f 6620 206f 7065 6e20 6f72 6465  er of  open orde
-00015f80: 7273 2073 7472 7563 7475 7265 7320 746f  rs structures to
-00015f90: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
-00015fa0: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
-00015fb0: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
-00015fc0: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00015fd0: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
-00015fe0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
-00015ff0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-00016000: 4f72 6465 725b 5d3a 2061 206c 6973 7420  Order[]: a list 
-00016010: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
-00016020: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
-00016030: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-00016040: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
-00016050: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-00016060: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-00016070: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-00016080: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00016090: 7420 3d20 7b7d 0a20 2020 2020 2020 2069  t = {}.        i
-000160a0: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
-000160b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000160c0: 2072 6571 7565 7374 5b27 7374 6172 7427   request['start'
-000160d0: 5d20 3d20 7365 6c66 2e70 6172 7365 5f74  ] = self.parse_t
-000160e0: 6f5f 696e 7428 7369 6e63 6520 2f20 3130  o_int(since / 10
-000160f0: 3030 290a 2020 2020 2020 2020 7175 6572  00).        quer
-00016100: 7920 3d20 7061 7261 6d73 0a20 2020 2020  y = params.     
-00016110: 2020 2063 6c69 656e 744f 7264 6572 4964     clientOrderId
-00016120: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-00016130: 7565 5f32 2870 6172 616d 732c 2027 7573  ue_2(params, 'us
-00016140: 6572 7265 6627 2c20 2763 6c69 656e 744f  erref', 'clientO
-00016150: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
-00016160: 2069 6620 636c 6965 6e74 4f72 6465 7249   if clientOrderI
-00016170: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-00016180: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00016190: 7374 5b27 7573 6572 7265 6627 5d20 3d20  st['userref'] = 
-000161a0: 636c 6965 6e74 4f72 6465 7249 640a 2020  clientOrderId.  
-000161b0: 2020 2020 2020 2020 2020 7175 6572 7920            query 
-000161c0: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
-000161d0: 6d73 2c20 5b27 7573 6572 7265 6627 2c20  ms, ['userref', 
-000161e0: 2763 6c69 656e 744f 7264 6572 4964 275d  'clientOrderId']
-000161f0: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
-00016200: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-00016210: 7072 6976 6174 6550 6f73 744f 7065 6e4f  privatePostOpenO
-00016220: 7264 6572 7328 7365 6c66 2e65 7874 656e  rders(self.exten
-00016230: 6428 7265 7175 6573 742c 2071 7565 7279  d(request, query
-00016240: 2929 0a20 2020 2020 2020 206d 6172 6b65  )).        marke
-00016250: 7420 3d20 4e6f 6e65 0a20 2020 2020 2020  t = None.       
-00016260: 2069 6620 7379 6d62 6f6c 2069 7320 6e6f   if symbol is no
-00016270: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00016280: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00016290: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-000162a0: 0a20 2020 2020 2020 2072 6573 756c 7420  .        result 
-000162b0: 3d20 7365 6c66 2e73 6166 655f 6469 6374  = self.safe_dict
-000162c0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
-000162d0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
-000162e0: 206f 7264 6572 7320 3d20 7365 6c66 2e73   orders = self.s
-000162f0: 6166 655f 6469 6374 2872 6573 756c 742c  afe_dict(result,
-00016300: 2027 6f70 656e 272c 207b 7d29 0a20 2020   'open', {}).   
-00016310: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00016320: 2e70 6172 7365 5f6f 7264 6572 7328 6f72  .parse_orders(or
-00016330: 6465 7273 2c20 6d61 726b 6574 2c20 7369  ders, market, si
-00016340: 6e63 652c 206c 696d 6974 290a 0a20 2020  nce, limit)..   
-00016350: 2061 7379 6e63 2064 6566 2066 6574 6368   async def fetch
-00016360: 5f63 6c6f 7365 645f 6f72 6465 7273 2873  _closed_orders(s
-00016370: 656c 662c 2073 796d 626f 6c3a 2053 7472  elf, symbol: Str
-00016380: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
-00016390: 496e 7420 3d20 4e6f 6e65 2c20 6c69 6d69  Int = None, limi
-000163a0: 743a 2049 6e74 203d 204e 6f6e 652c 2070  t: Int = None, p
-000163b0: 6172 616d 733d 7b7d 2920 2d3e 204c 6973  arams={}) -> Lis
-000163c0: 745b 4f72 6465 725d 3a0a 2020 2020 2020  t[Order]:.      
-000163d0: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-000163e0: 7463 6865 7320 696e 666f 726d 6174 696f  tches informatio
-000163f0: 6e20 6f6e 206d 756c 7469 706c 6520 636c  n on multiple cl
-00016400: 6f73 6564 206f 7264 6572 7320 6d61 6465  osed orders made
-00016410: 2062 7920 7468 6520 7573 6572 0a20 2020   by the user.   
-00016420: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
-00016430: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
-00016440: 6f6d 2f72 6573 742f 2374 6167 2f41 6363  om/rest/#tag/Acc
-00016450: 6f75 6e74 2d44 6174 612f 6f70 6572 6174  ount-Data/operat
-00016460: 696f 6e2f 6765 7443 6c6f 7365 644f 7264  ion/getClosedOrd
-00016470: 6572 730a 2020 2020 2020 2020 3a70 6172  ers.        :par
-00016480: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
-00016490: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
-000164a0: 6d62 6f6c 206f 6620 7468 6520 6d61 726b  mbol of the mark
-000164b0: 6574 206f 7264 6572 7320 7765 7265 206d  et orders were m
-000164c0: 6164 6520 696e 0a20 2020 2020 2020 203a  ade in.        :
-000164d0: 7061 7261 6d20 696e 7420 5b73 696e 6365  param int [since
-000164e0: 5d3a 2074 6865 2065 6172 6c69 6573 7420  ]: the earliest 
-000164f0: 7469 6d65 2069 6e20 6d73 2074 6f20 6665  time in ms to fe
-00016500: 7463 6820 6f72 6465 7273 2066 6f72 0a20  tch orders for. 
-00016510: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
-00016520: 7420 5b6c 696d 6974 5d3a 2074 6865 206d  t [limit]: the m
-00016530: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
-00016540: 206f 7264 6572 2073 7472 7563 7475 7265   order structure
-00016550: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
-00016560: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00016570: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
-00016580: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00016590: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
-000165a0: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
-000165b0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-000165c0: 6d20 696e 7420 5b70 6172 616d 732e 756e  m int [params.un
-000165d0: 7469 6c5d 3a20 7469 6d65 7374 616d 7020  til]: timestamp 
-000165e0: 696e 206d 7320 6f66 2074 6865 206c 6174  in ms of the lat
-000165f0: 6573 7420 656e 7472 790a 2020 2020 2020  est entry.      
-00016600: 2020 3a72 6574 7572 6e73 204f 7264 6572    :returns Order
-00016610: 5b5d 3a20 6120 6c69 7374 206f 6620 606f  []: a list of `o
-00016620: 7264 6572 2073 7472 7563 7475 7265 7320  rder structures 
-00016630: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-00016640: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
-00016650: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-00016660: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00016670: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-00016680: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00016690: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-000166a0: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
-000166b0: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
-000166c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-000166d0: 6573 745b 2773 7461 7274 275d 203d 2073  est['start'] = s
-000166e0: 656c 662e 7061 7273 655f 746f 5f69 6e74  elf.parse_to_int
-000166f0: 2873 696e 6365 202f 2031 3030 3029 0a20  (since / 1000). 
-00016700: 2020 2020 2020 2071 7565 7279 203d 2070         query = p
-00016710: 6172 616d 730a 2020 2020 2020 2020 636c  arams.        cl
-00016720: 6965 6e74 4f72 6465 7249 6420 3d20 7365  ientOrderId = se
-00016730: 6c66 2e73 6166 655f 7661 6c75 655f 3228  lf.safe_value_2(
-00016740: 7061 7261 6d73 2c20 2775 7365 7272 6566  params, 'userref
-00016750: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
-00016760: 6427 290a 2020 2020 2020 2020 6966 2063  d').        if c
-00016770: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
-00016780: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00016790: 2020 2020 2020 7265 7175 6573 745b 2775        request['u
-000167a0: 7365 7272 6566 275d 203d 2063 6c69 656e  serref'] = clien
-000167b0: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-000167c0: 2020 2020 2071 7565 7279 203d 2073 656c       query = sel
-000167d0: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-000167e0: 2775 7365 7272 6566 272c 2027 636c 6965  'userref', 'clie
-000167f0: 6e74 4f72 6465 7249 6427 5d29 0a20 2020  ntOrderId']).   
-00016800: 2020 2020 2072 6571 7565 7374 2c20 7061       request, pa
-00016810: 7261 6d73 203d 2073 656c 662e 6861 6e64  rams = self.hand
-00016820: 6c65 5f75 6e74 696c 5f6f 7074 696f 6e28  le_until_option(
-00016830: 2765 6e64 272c 2072 6571 7565 7374 2c20  'end', request, 
-00016840: 7061 7261 6d73 290a 2020 2020 2020 2020  params).        
-00016850: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-00016860: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-00016870: 7443 6c6f 7365 644f 7264 6572 7328 7365  tClosedOrders(se
-00016880: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-00016890: 742c 2071 7565 7279 2929 0a20 2020 2020  t, query)).     
-000168a0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-000168b0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-000168c0: 2020 2020 2020 2022 6572 726f 7222 3a5b         "error":[
-000168d0: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-000168e0: 2020 2020 2022 7265 7375 6c74 223a 7b0a       "result":{.
-000168f0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00016900: 2020 2020 2020 2263 6c6f 7365 6422 3a7b        "closed":{
-00016910: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00016920: 2020 2020 2020 2020 2020 2022 4f45 545a             "OETZ
-00016930: 594f 2d55 4c35 3234 2d51 4a4d 5843 5422  YO-UL524-QJMXCT"
-00016940: 3a7b 0a20 2020 2020 2020 2023 2020 2020  :{.        #    
-00016950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016960: 2022 7265 6669 6422 3a6e 756c 6c2c 0a20   "refid":null,. 
-00016970: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00016980: 2020 2020 2020 2020 2020 2020 2022 7573               "us
-00016990: 6572 7265 6622 3a6e 756c 6c2c 0a20 2020  erref":null,.   
-000169a0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000169b0: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-000169c0: 7573 223a 2263 616e 6365 6c65 6422 2c0a  us":"canceled",.
-000169d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000169e0: 2020 2020 2020 2020 2020 2020 2020 2272                "r
-000169f0: 6561 736f 6e22 3a22 5573 6572 2072 6571  eason":"User req
-00016a00: 7565 7374 6564 222c 0a20 2020 2020 2020  uested",.       
-00016a10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00016a20: 2020 2020 2020 2022 6f70 656e 746d 223a         "opentm":
-00016a30: 3136 3031 3438 3933 3133 2e33 3839 382c  1601489313.3898,
-00016a40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00016a50: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016a60: 636c 6f73 6574 6d22 3a31 3630 3134 3839  closetm":1601489
-00016a70: 3334 362e 3535 3037 2c0a 2020 2020 2020  346.5507,.      
-00016a80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00016a90: 2020 2020 2020 2020 2273 7461 7274 746d          "starttm
-00016aa0: 223a 302c 0a20 2020 2020 2020 2023 2020  ":0,.        #  
-00016ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ac0: 2020 2022 6578 7069 7265 746d 223a 302c     "expiretm":0,
-00016ad0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00016ae0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016af0: 6465 7363 7222 3a7b 0a20 2020 2020 2020  descr":{.       
-00016b00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00016b10: 2020 2020 2020 2020 2020 2022 7061 6972             "pair
-00016b20: 223a 2245 5448 5553 4454 222c 0a20 2020  ":"ETHUSDT",.   
-00016b30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016b40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016b50: 7479 7065 223a 2262 7579 222c 0a20 2020  type":"buy",.   
-00016b60: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016b70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016b80: 6f72 6465 7274 7970 6522 3a22 6c69 6d69  ordertype":"limi
-00016b90: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
+00015100: 2020 2020 226d 6172 6769 6e22 3a20 2230      "margin": "0
+00015110: 2e30 3030 3030 3022 2c0a 2020 2020 2020  .000000",.      
+00015120: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015130: 2020 2020 2020 2020 226d 6973 6322 3a20          "misc": 
+00015140: 2222 0a20 2020 2020 2020 2023 2020 2020  "".        #    
+00015150: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00015160: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00015170: 2020 2020 2020 2020 2020 2e2e 2e0a 2020            ....  
+00015180: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00015190: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+000151a0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+000151b0: 756e 7422 3a20 3937 3630 2c0a 2020 2020  unt": 9760,.    
+000151c0: 2020 2020 2320 2020 2020 2020 2020 7d2c      #         },
+000151d0: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+000151e0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+000151f0: 2020 2074 7261 6465 7320 3d20 7265 7370     trades = resp
+00015200: 6f6e 7365 5b27 7265 7375 6c74 275d 5b27  onse['result']['
+00015210: 7472 6164 6573 275d 0a20 2020 2020 2020  trades'].       
+00015220: 2069 6473 203d 206c 6973 7428 7472 6164   ids = list(trad
+00015230: 6573 2e6b 6579 7328 2929 0a20 2020 2020  es.keys()).     
+00015240: 2020 2066 6f72 2069 2069 6e20 7261 6e67     for i in rang
+00015250: 6528 302c 206c 656e 2869 6473 2929 3a0a  e(0, len(ids)):.
+00015260: 2020 2020 2020 2020 2020 2020 7472 6164              trad
+00015270: 6573 5b69 6473 5b69 5d5d 5b27 6964 275d  es[ids[i]]['id']
+00015280: 203d 2069 6473 5b69 5d0a 2020 2020 2020   = ids[i].      
+00015290: 2020 6d61 726b 6574 203d 204e 6f6e 650a    market = None.
+000152a0: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+000152b0: 6c20 6973 206e 6f74 204e 6f6e 653a 0a20  l is not None:. 
+000152c0: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+000152d0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+000152e0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+000152f0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
+00015300: 655f 7472 6164 6573 2874 7261 6465 732c  e_trades(trades,
+00015310: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
+00015320: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
+00015330: 6320 6465 6620 6361 6e63 656c 5f6f 7264  c def cancel_ord
+00015340: 6572 2873 656c 662c 2069 643a 2073 7472  er(self, id: str
+00015350: 2c20 7379 6d62 6f6c 3a20 5374 7220 3d20  , symbol: Str = 
+00015360: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+00015370: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00015380: 2020 2020 2020 6361 6e63 656c 7320 616e        cancels an
+00015390: 206f 7065 6e20 6f72 6465 720a 2020 2020   open order.    
+000153a0: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
+000153b0: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
+000153c0: 6d2f 7265 7374 2f23 7461 672f 5472 6164  m/rest/#tag/Trad
+000153d0: 696e 672f 6f70 6572 6174 696f 6e2f 6361  ing/operation/ca
+000153e0: 6e63 656c 4f72 6465 720a 2020 2020 2020  ncelOrder.      
+000153f0: 2020 3a70 6172 616d 2073 7472 2069 643a    :param str id:
+00015400: 206f 7264 6572 2069 640a 2020 2020 2020   order id.      
+00015410: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+00015420: 626f 6c3a 2075 6e69 6669 6564 2073 796d  bol: unified sym
+00015430: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
+00015440: 7420 7468 6520 6f72 6465 7220 7761 7320  t the order was 
+00015450: 6d61 6465 2069 6e0a 2020 2020 2020 2020  made in.        
+00015460: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
+00015470: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
+00015480: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
+00015490: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
+000154a0: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
+000154b0: 2020 2020 203a 7265 7475 726e 7320 6469       :returns di
+000154c0: 6374 3a20 416e 2060 6f72 6465 7220 7374  ct: An `order st
+000154d0: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+000154e0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+000154f0: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+00015500: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00015510: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
+00015520: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
+00015530: 7473 2829 0a20 2020 2020 2020 2072 6573  ts().        res
+00015540: 706f 6e73 6520 3d20 4e6f 6e65 0a20 2020  ponse = None.   
+00015550: 2020 2020 2063 6c69 656e 744f 7264 6572       clientOrder
+00015560: 4964 203d 2073 656c 662e 7361 6665 5f76  Id = self.safe_v
+00015570: 616c 7565 5f32 2870 6172 616d 732c 2027  alue_2(params, '
+00015580: 7573 6572 7265 6627 2c20 2763 6c69 656e  userref', 'clien
+00015590: 744f 7264 6572 4964 272c 2069 6429 0a20  tOrderId', id). 
+000155a0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+000155b0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+000155c0: 7478 6964 273a 2063 6c69 656e 744f 7264  txid': clientOrd
+000155d0: 6572 4964 2c20 2023 206f 7264 6572 2069  erId,  # order i
+000155e0: 6420 6f72 2075 7365 7272 6566 0a20 2020  d or userref.   
+000155f0: 2020 2020 207d 0a20 2020 2020 2020 2070       }.        p
+00015600: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+00015610: 7428 7061 7261 6d73 2c20 5b27 7573 6572  t(params, ['user
+00015620: 7265 6627 2c20 2763 6c69 656e 744f 7264  ref', 'clientOrd
+00015630: 6572 4964 275d 290a 2020 2020 2020 2020  erId']).        
+00015640: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00015650: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
+00015660: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
+00015670: 7374 4361 6e63 656c 4f72 6465 7228 7365  stCancelOrder(se
+00015680: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+00015690: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+000156a0: 2020 2020 6578 6365 7074 2045 7863 6570      except Excep
+000156b0: 7469 6f6e 2061 7320 653a 0a20 2020 2020  tion as e:.     
+000156c0: 2020 2020 2020 2069 6620 7365 6c66 2e6c         if self.l
+000156d0: 6173 745f 6874 7470 5f72 6573 706f 6e73  ast_http_respons
+000156e0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+000156f0: 2020 2069 6620 7365 6c66 2e6c 6173 745f     if self.last_
+00015700: 6874 7470 5f72 6573 706f 6e73 652e 6669  http_response.fi
+00015710: 6e64 2827 454f 7264 6572 3a55 6e6b 6e6f  nd('EOrder:Unkno
+00015720: 776e 206f 7264 6572 2729 203e 3d20 303a  wn order') >= 0:
+00015730: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00015740: 2020 2020 2072 6169 7365 204f 7264 6572       raise Order
+00015750: 4e6f 7446 6f75 6e64 2873 656c 662e 6964  NotFound(self.id
+00015760: 202b 2027 2063 616e 6365 6c4f 7264 6572   + ' cancelOrder
+00015770: 2829 2065 7272 6f72 2027 202b 2073 656c  () error ' + sel
+00015780: 662e 6c61 7374 5f68 7474 705f 7265 7370  f.last_http_resp
+00015790: 6f6e 7365 290a 2020 2020 2020 2020 2020  onse).          
+000157a0: 2020 7261 6973 6520 650a 2020 2020 2020    raise e.      
+000157b0: 2020 7265 7475 726e 2072 6573 706f 6e73    return respons
+000157c0: 650a 0a20 2020 2061 7379 6e63 2064 6566  e..    async def
+000157d0: 2063 616e 6365 6c5f 6f72 6465 7273 2873   cancel_orders(s
+000157e0: 656c 662c 2069 6473 2c20 7379 6d62 6f6c  elf, ids, symbol
+000157f0: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7061  : Str = None, pa
+00015800: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+00015810: 2020 2222 220a 2020 2020 2020 2020 6361    """.        ca
+00015820: 6e63 656c 206d 756c 7469 706c 6520 6f72  ncel multiple or
+00015830: 6465 7273 0a20 2020 2020 2020 203a 7365  ders.        :se
+00015840: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
+00015850: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
+00015860: 2374 6167 2f54 7261 6469 6e67 2f6f 7065  #tag/Trading/ope
+00015870: 7261 7469 6f6e 2f63 616e 6365 6c4f 7264  ration/cancelOrd
+00015880: 6572 4261 7463 680a 2020 2020 2020 2020  erBatch.        
+00015890: 3a70 6172 616d 2073 7472 5b5d 2069 6473  :param str[] ids
+000158a0: 3a20 6f70 656e 206f 7264 6572 7320 7472  : open orders tr
+000158b0: 616e 7361 6374 696f 6e20 4944 2874 7869  ansaction ID(txi
+000158c0: 6429 206f 7220 7573 6572 2072 6566 6572  d) or user refer
+000158d0: 656e 6365 2875 7365 7272 6566 290a 2020  ence(userref).  
+000158e0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000158f0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+00015900: 206d 6172 6b65 7420 7379 6d62 6f6c 0a20   market symbol. 
+00015910: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+00015920: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
+00015930: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00015940: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
+00015950: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
+00015960: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00015970: 7572 6e73 2064 6963 743a 2061 6e20 6c69  urns dict: an li
+00015980: 7374 206f 6620 606f 7264 6572 2073 7472  st of `order str
+00015990: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+000159a0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+000159b0: 2f3f 6964 3d6f 7264 6572 2d73 7472 7563  /?id=order-struc
+000159c0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+000159d0: 2222 0a20 2020 2020 2020 2072 6571 7565  "".        reque
+000159e0: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
+000159f0: 2020 2027 6f72 6465 7273 273a 2069 6473     'orders': ids
+00015a00: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00015a10: 2020 2020 7265 7370 6f6e 7365 203d 2061      response = a
+00015a20: 7761 6974 2073 656c 662e 7072 6976 6174  wait self.privat
+00015a30: 6550 6f73 7443 616e 6365 6c4f 7264 6572  ePostCancelOrder
+00015a40: 4261 7463 6828 7365 6c66 2e65 7874 656e  Batch(self.exten
+00015a50: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00015a60: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+00015a70: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00015a80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00015a90: 2265 7272 6f72 223a 205b 5d2c 0a20 2020  "error": [],.   
+00015aa0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00015ab0: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+00015ac0: 2020 2023 2020 2020 2020 2020 2020 2022     #           "
+00015ad0: 636f 756e 7422 3a20 320a 2020 2020 2020  count": 2.      
+00015ae0: 2020 2320 2020 2020 2020 2020 7d0a 2020    #         }.  
+00015af0: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+00015b00: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+00015b10: 7265 7475 726e 2072 6573 706f 6e73 650a  return response.
+00015b20: 0a20 2020 2061 7379 6e63 2064 6566 2063  .    async def c
+00015b30: 616e 6365 6c5f 616c 6c5f 6f72 6465 7273  ancel_all_orders
+00015b40: 2873 656c 662c 2073 796d 626f 6c3a 2053  (self, symbol: S
+00015b50: 7472 203d 204e 6f6e 652c 2070 6172 616d  tr = None, param
+00015b60: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00015b70: 2222 0a20 2020 2020 2020 2063 616e 6365  "".        cance
+00015b80: 6c20 616c 6c20 6f70 656e 206f 7264 6572  l all open order
+00015b90: 730a 2020 2020 2020 2020 3a73 6565 3a20  s.        :see: 
+00015ba0: 6874 7470 733a 2f2f 646f 6373 2e6b 7261  https://docs.kra
+00015bb0: 6b65 6e2e 636f 6d2f 7265 7374 2f23 7461  ken.com/rest/#ta
+00015bc0: 672f 5472 6164 696e 672f 6f70 6572 6174  g/Trading/operat
+00015bd0: 696f 6e2f 6361 6e63 656c 416c 6c4f 7264  ion/cancelAllOrd
+00015be0: 6572 730a 2020 2020 2020 2020 3a70 6172  ers.        :par
+00015bf0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+00015c00: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+00015c10: 6d62 6f6c 2c20 6f6e 6c79 206f 7264 6572  mbol, only order
+00015c20: 7320 696e 2074 6865 206d 6172 6b65 7420  s in the market 
+00015c30: 6f66 2073 656c 6620 7379 6d62 6f6c 2061  of self symbol a
+00015c40: 7265 2063 616e 6365 6c6c 6564 2077 6865  re cancelled whe
+00015c50: 6e20 7379 6d62 6f6c 2069 7320 6e6f 7420  n symbol is not 
+00015c60: 4e6f 6e65 0a20 2020 2020 2020 203a 7061  None.        :pa
+00015c70: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
+00015c80: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
+00015c90: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00015ca0: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
+00015cb0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00015cc0: 2020 3a72 6574 7572 6e73 2064 6963 745b    :returns dict[
+00015cd0: 5d3a 2061 206c 6973 7420 6f66 2060 6f72  ]: a list of `or
+00015ce0: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
+00015cf0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+00015d00: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
+00015d10: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
+00015d20: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00015d30: 2020 6177 6169 7420 7365 6c66 2e6c 6f61    await self.loa
+00015d40: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00015d50: 2020 2020 7265 7475 726e 2061 7761 6974      return await
+00015d60: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00015d70: 7443 616e 6365 6c41 6c6c 2870 6172 616d  tCancelAll(param
+00015d80: 7329 0a0a 2020 2020 6173 796e 6320 6465  s)..    async de
+00015d90: 6620 6665 7463 685f 6f70 656e 5f6f 7264  f fetch_open_ord
+00015da0: 6572 7328 7365 6c66 2c20 7379 6d62 6f6c  ers(self, symbol
+00015db0: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7369  : Str = None, si
+00015dc0: 6e63 653a 2049 6e74 203d 204e 6f6e 652c  nce: Int = None,
+00015dd0: 206c 696d 6974 3a20 496e 7420 3d20 4e6f   limit: Int = No
+00015de0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 202d  ne, params={}) -
+00015df0: 3e20 4c69 7374 5b4f 7264 6572 5d3a 0a20  > List[Order]:. 
+00015e00: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00015e10: 2020 2066 6574 6368 2061 6c6c 2075 6e66     fetch all unf
+00015e20: 696c 6c65 6420 6375 7272 656e 746c 7920  illed currently 
+00015e30: 6f70 656e 206f 7264 6572 730a 2020 2020  open orders.    
+00015e40: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
+00015e50: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
+00015e60: 6d2f 7265 7374 2f23 7461 672f 4163 636f  m/rest/#tag/Acco
+00015e70: 756e 742d 4461 7461 2f6f 7065 7261 7469  unt-Data/operati
+00015e80: 6f6e 2f67 6574 4f70 656e 4f72 6465 7273  on/getOpenOrders
+00015e90: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00015ea0: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+00015eb0: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+00015ec0: 6c0a 2020 2020 2020 2020 3a70 6172 616d  l.        :param
+00015ed0: 2069 6e74 205b 7369 6e63 655d 3a20 7468   int [since]: th
+00015ee0: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
+00015ef0: 696e 206d 7320 746f 2066 6574 6368 206f  in ms to fetch o
+00015f00: 7065 6e20 6f72 6465 7273 2066 6f72 0a20  pen orders for. 
+00015f10: 2020 2020 2020 203a 7061 7261 6d20 696e         :param in
+00015f20: 7420 5b6c 696d 6974 5d3a 2074 6865 206d  t [limit]: the m
+00015f30: 6178 696d 756d 206e 756d 6265 7220 6f66  aximum number of
+00015f40: 2020 6f70 656e 206f 7264 6572 7320 7374    open orders st
+00015f50: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
+00015f60: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
+00015f70: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
+00015f80: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
+00015f90: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00015fa0: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
+00015fb0: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00015fc0: 2020 3a72 6574 7572 6e73 204f 7264 6572    :returns Order
+00015fd0: 5b5d 3a20 6120 6c69 7374 206f 6620 606f  []: a list of `o
+00015fe0: 7264 6572 2073 7472 7563 7475 7265 7320  rder structures 
+00015ff0: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+00016000: 7874 2e63 6f6d 2f23 2f3f 6964 3d6f 7264  xt.com/#/?id=ord
+00016010: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
+00016020: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00016030: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+00016040: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+00016050: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00016060: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
+00016070: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+00016080: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00016090: 6573 745b 2773 7461 7274 275d 203d 2073  est['start'] = s
+000160a0: 656c 662e 7061 7273 655f 746f 5f69 6e74  elf.parse_to_int
+000160b0: 2873 696e 6365 202f 2031 3030 3029 0a20  (since / 1000). 
+000160c0: 2020 2020 2020 2071 7565 7279 203d 2070         query = p
+000160d0: 6172 616d 730a 2020 2020 2020 2020 636c  arams.        cl
+000160e0: 6965 6e74 4f72 6465 7249 6420 3d20 7365  ientOrderId = se
+000160f0: 6c66 2e73 6166 655f 7661 6c75 655f 3228  lf.safe_value_2(
+00016100: 7061 7261 6d73 2c20 2775 7365 7272 6566  params, 'userref
+00016110: 272c 2027 636c 6965 6e74 4f72 6465 7249  ', 'clientOrderI
+00016120: 6427 290a 2020 2020 2020 2020 6966 2063  d').        if c
+00016130: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
+00016140: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00016150: 2020 2020 2020 7265 7175 6573 745b 2775        request['u
+00016160: 7365 7272 6566 275d 203d 2063 6c69 656e  serref'] = clien
+00016170: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
+00016180: 2020 2020 2071 7565 7279 203d 2073 656c       query = sel
+00016190: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
+000161a0: 2775 7365 7272 6566 272c 2027 636c 6965  'userref', 'clie
+000161b0: 6e74 4f72 6465 7249 6427 5d29 0a20 2020  ntOrderId']).   
+000161c0: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+000161d0: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
+000161e0: 7465 506f 7374 4f70 656e 4f72 6465 7273  tePostOpenOrders
+000161f0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
+00016200: 7565 7374 2c20 7175 6572 7929 290a 2020  uest, query)).  
+00016210: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
+00016220: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
+00016230: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
+00016240: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
+00016250: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+00016260: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+00016270: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
+00016280: 662e 7361 6665 5f64 6963 7428 7265 7370  f.safe_dict(resp
+00016290: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
+000162a0: 7b7d 290a 2020 2020 2020 2020 6f72 6465  {}).        orde
+000162b0: 7273 203d 2073 656c 662e 7361 6665 5f64  rs = self.safe_d
+000162c0: 6963 7428 7265 7375 6c74 2c20 276f 7065  ict(result, 'ope
+000162d0: 6e27 2c20 7b7d 290a 2020 2020 2020 2020  n', {}).        
+000162e0: 7265 7475 726e 2073 656c 662e 7061 7273  return self.pars
+000162f0: 655f 6f72 6465 7273 286f 7264 6572 732c  e_orders(orders,
+00016300: 206d 6172 6b65 742c 2073 696e 6365 2c20   market, since, 
+00016310: 6c69 6d69 7429 0a0a 2020 2020 6173 796e  limit)..    asyn
+00016320: 6320 6465 6620 6665 7463 685f 636c 6f73  c def fetch_clos
+00016330: 6564 5f6f 7264 6572 7328 7365 6c66 2c20  ed_orders(self, 
+00016340: 7379 6d62 6f6c 3a20 5374 7220 3d20 4e6f  symbol: Str = No
+00016350: 6e65 2c20 7369 6e63 653a 2049 6e74 203d  ne, since: Int =
+00016360: 204e 6f6e 652c 206c 696d 6974 3a20 496e   None, limit: In
+00016370: 7420 3d20 4e6f 6e65 2c20 7061 7261 6d73  t = None, params
+00016380: 3d7b 7d29 202d 3e20 4c69 7374 5b4f 7264  ={}) -> List[Ord
+00016390: 6572 5d3a 0a20 2020 2020 2020 2022 2222  er]:.        """
+000163a0: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+000163b0: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
+000163c0: 6d75 6c74 6970 6c65 2063 6c6f 7365 6420  multiple closed 
+000163d0: 6f72 6465 7273 206d 6164 6520 6279 2074  orders made by t
+000163e0: 6865 2075 7365 720a 2020 2020 2020 2020  he user.        
+000163f0: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
+00016400: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
+00016410: 7374 2f23 7461 672f 4163 636f 756e 742d  st/#tag/Account-
+00016420: 4461 7461 2f6f 7065 7261 7469 6f6e 2f67  Data/operation/g
+00016430: 6574 436c 6f73 6564 4f72 6465 7273 0a20  etClosedOrders. 
+00016440: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00016450: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
+00016460: 6420 6d61 726b 6574 2073 796d 626f 6c20  d market symbol 
+00016470: 6f66 2074 6865 206d 6172 6b65 7420 6f72  of the market or
+00016480: 6465 7273 2077 6572 6520 6d61 6465 2069  ders were made i
+00016490: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+000164a0: 2069 6e74 205b 7369 6e63 655d 3a20 7468   int [since]: th
+000164b0: 6520 6561 726c 6965 7374 2074 696d 6520  e earliest time 
+000164c0: 696e 206d 7320 746f 2066 6574 6368 206f  in ms to fetch o
+000164d0: 7264 6572 7320 666f 720a 2020 2020 2020  rders for.      
+000164e0: 2020 3a70 6172 616d 2069 6e74 205b 6c69    :param int [li
+000164f0: 6d69 745d 3a20 7468 6520 6d61 7869 6d75  mit]: the maximu
+00016500: 6d20 6e75 6d62 6572 206f 6620 6f72 6465  m number of orde
+00016510: 7220 7374 7275 6374 7572 6573 2074 6f20  r structures to 
+00016520: 7265 7472 6965 7665 0a20 2020 2020 2020  retrieve.       
+00016530: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
+00016540: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
+00016550: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+00016560: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
+00016570: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
+00016580: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+00016590: 205b 7061 7261 6d73 2e75 6e74 696c 5d3a   [params.until]:
+000165a0: 2074 696d 6573 7461 6d70 2069 6e20 6d73   timestamp in ms
+000165b0: 206f 6620 7468 6520 6c61 7465 7374 2065   of the latest e
+000165c0: 6e74 7279 0a20 2020 2020 2020 203a 7265  ntry.        :re
+000165d0: 7475 726e 7320 4f72 6465 725b 5d3a 2061  turns Order[]: a
+000165e0: 206c 6973 7420 6f66 2060 6f72 6465 7220   list of `order 
+000165f0: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
+00016600: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+00016610: 6d2f 232f 3f69 643d 6f72 6465 722d 7374  m/#/?id=order-st
+00016620: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00016630: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+00016640: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+00016650: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00016660: 7265 7175 6573 7420 3d20 7b7d 0a20 2020  request = {}.   
+00016670: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
+00016680: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00016690: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+000166a0: 7374 6172 7427 5d20 3d20 7365 6c66 2e70  start'] = self.p
+000166b0: 6172 7365 5f74 6f5f 696e 7428 7369 6e63  arse_to_int(sinc
+000166c0: 6520 2f20 3130 3030 290a 2020 2020 2020  e / 1000).      
+000166d0: 2020 7175 6572 7920 3d20 7061 7261 6d73    query = params
+000166e0: 0a20 2020 2020 2020 2063 6c69 656e 744f  .        clientO
+000166f0: 7264 6572 4964 203d 2073 656c 662e 7361  rderId = self.sa
+00016700: 6665 5f76 616c 7565 5f32 2870 6172 616d  fe_value_2(param
+00016710: 732c 2027 7573 6572 7265 6627 2c20 2763  s, 'userref', 'c
+00016720: 6c69 656e 744f 7264 6572 4964 2729 0a20  lientOrderId'). 
+00016730: 2020 2020 2020 2069 6620 636c 6965 6e74         if client
+00016740: 4f72 6465 7249 6420 6973 206e 6f74 204e  OrderId is not N
+00016750: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00016760: 2072 6571 7565 7374 5b27 7573 6572 7265   request['userre
+00016770: 6627 5d20 3d20 636c 6965 6e74 4f72 6465  f'] = clientOrde
+00016780: 7249 640a 2020 2020 2020 2020 2020 2020  rId.            
+00016790: 7175 6572 7920 3d20 7365 6c66 2e6f 6d69  query = self.omi
+000167a0: 7428 7061 7261 6d73 2c20 5b27 7573 6572  t(params, ['user
+000167b0: 7265 6627 2c20 2763 6c69 656e 744f 7264  ref', 'clientOrd
+000167c0: 6572 4964 275d 290a 2020 2020 2020 2020  erId']).        
+000167d0: 7265 7175 6573 742c 2070 6172 616d 7320  request, params 
+000167e0: 3d20 7365 6c66 2e68 616e 646c 655f 756e  = self.handle_un
+000167f0: 7469 6c5f 6f70 7469 6f6e 2827 656e 6427  til_option('end'
+00016800: 2c20 7265 7175 6573 742c 2070 6172 616d  , request, param
+00016810: 7329 0a20 2020 2020 2020 2072 6573 706f  s).        respo
+00016820: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+00016830: 2e70 7269 7661 7465 506f 7374 436c 6f73  .privatePostClos
+00016840: 6564 4f72 6465 7273 2873 656c 662e 6578  edOrders(self.ex
+00016850: 7465 6e64 2872 6571 7565 7374 2c20 7175  tend(request, qu
+00016860: 6572 7929 290a 2020 2020 2020 2020 230a  ery)).        #.
+00016870: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+00016880: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00016890: 2020 2265 7272 6f72 223a 5b5d 2c0a 2020    "error":[],.  
+000168a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000168b0: 2272 6573 756c 7422 3a7b 0a20 2020 2020  "result":{.     
+000168c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000168d0: 2022 636c 6f73 6564 223a 7b0a 2020 2020   "closed":{.    
+000168e0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000168f0: 2020 2020 2020 224f 4554 5a59 4f2d 554c        "OETZYO-UL
+00016900: 3532 342d 514a 4d58 4354 223a 7b0a 2020  524-QJMXCT":{.  
+00016910: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00016920: 2020 2020 2020 2020 2020 2020 2272 6566              "ref
+00016930: 6964 223a 6e75 6c6c 2c0a 2020 2020 2020  id":null,.      
+00016940: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00016950: 2020 2020 2020 2020 2275 7365 7272 6566          "userref
+00016960: 223a 6e75 6c6c 2c0a 2020 2020 2020 2020  ":null,.        
+00016970: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016980: 2020 2020 2020 2273 7461 7475 7322 3a22        "status":"
+00016990: 6361 6e63 656c 6564 222c 0a20 2020 2020  canceled",.     
+000169a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000169b0: 2020 2020 2020 2020 2022 7265 6173 6f6e           "reason
+000169c0: 223a 2255 7365 7220 7265 7175 6573 7465  ":"User requeste
+000169d0: 6422 2c0a 2020 2020 2020 2020 2320 2020  d",.        #   
+000169e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000169f0: 2020 226f 7065 6e74 6d22 3a31 3630 3134    "opentm":16014
+00016a00: 3839 3331 332e 3338 3938 2c0a 2020 2020  89313.3898,.    
+00016a10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00016a20: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
+00016a30: 746d 223a 3136 3031 3438 3933 3436 2e35  tm":1601489346.5
+00016a40: 3530 372c 0a20 2020 2020 2020 2023 2020  507,.        #  
+00016a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016a60: 2020 2022 7374 6172 7474 6d22 3a30 2c0a     "starttm":0,.
+00016a70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00016a80: 2020 2020 2020 2020 2020 2020 2020 2265                "e
+00016a90: 7870 6972 6574 6d22 3a30 2c0a 2020 2020  xpiretm":0,.    
+00016aa0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00016ab0: 2020 2020 2020 2020 2020 2264 6573 6372            "descr
+00016ac0: 223a 7b0a 2020 2020 2020 2020 2320 2020  ":{.        #   
+00016ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ae0: 2020 2020 2020 2270 6169 7222 3a22 4554        "pair":"ET
+00016af0: 4855 5344 5422 2c0a 2020 2020 2020 2020  HUSDT",.        
+00016b00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016b10: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
+00016b20: 3a22 6275 7922 2c0a 2020 2020 2020 2020  :"buy",.        
+00016b30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016b40: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00016b50: 7479 7065 223a 226c 696d 6974 222c 0a20  type":"limit",. 
+00016b60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00016b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016b80: 2022 7072 6963 6522 3a22 3333 302e 3030   "price":"330.00
+00016b90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 00016ba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016bb0: 2020 2020 2020 2270 7269 6365 223a 2233        "price":"3
-00016bc0: 3330 2e30 3022 2c0a 2020 2020 2020 2020  30.00",.        
-00016bd0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00016be0: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-00016bf0: 3222 3a22 3022 2c0a 2020 2020 2020 2020  2":"0",.        
+00016bb0: 2020 2020 2022 7072 6963 6532 223a 2230       "price2":"0
+00016bc0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00016bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016be0: 2020 2020 2022 6c65 7665 7261 6765 223a       "leverage":
+00016bf0: 226e 6f6e 6522 2c0a 2020 2020 2020 2020  "none",.        
 00016c00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00016c10: 2020 2020 2020 2020 2020 226c 6576 6572            "lever
-00016c20: 6167 6522 3a22 6e6f 6e65 222c 0a20 2020  age":"none",.   
-00016c30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016c40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016c50: 6f72 6465 7222 3a22 6275 7920 302e 3032  order":"buy 0.02
-00016c60: 3130 3030 3030 2045 5448 5553 4454 2040  100000 ETHUSDT @
-00016c70: 206c 696d 6974 2033 3330 2e30 3022 2c0a   limit 330.00",.
-00016c80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00016c90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ca0: 2020 2263 6c6f 7365 223a 2222 0a20 2020    "close":"".   
-00016cb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016cc0: 2020 2020 2020 2020 2020 207d 2c0a 2020             },.  
-00016cd0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00016ce0: 2020 2020 2020 2020 2020 2020 2276 6f6c              "vol
-00016cf0: 223a 2230 2e30 3231 3030 3030 3022 2c0a  ":"0.02100000",.
-00016d00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00016d10: 2020 2020 2020 2020 2020 2020 2020 2276                "v
-00016d20: 6f6c 5f65 7865 6322 3a22 302e 3030 3030  ol_exec":"0.0000
-00016d30: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00016c10: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+00016c20: 223a 2262 7579 2030 2e30 3231 3030 3030  ":"buy 0.0210000
+00016c30: 3020 4554 4855 5344 5420 4020 6c69 6d69  0 ETHUSDT @ limi
+00016c40: 7420 3333 302e 3030 222c 0a20 2020 2020  t 330.00",.     
+00016c50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00016c60: 2020 2020 2020 2020 2020 2020 2022 636c               "cl
+00016c70: 6f73 6522 3a22 220a 2020 2020 2020 2020  ose":"".        
+00016c80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016c90: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
+00016ca0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00016cb0: 2020 2020 2020 2022 766f 6c22 3a22 302e         "vol":"0.
+00016cc0: 3032 3130 3030 3030 222c 0a20 2020 2020  02100000",.     
+00016cd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00016ce0: 2020 2020 2020 2020 2022 766f 6c5f 6578           "vol_ex
+00016cf0: 6563 223a 2230 2e30 3030 3030 3030 3022  ec":"0.00000000"
+00016d00: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00016d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016d20: 2263 6f73 7422 3a22 302e 3030 3030 3022  "cost":"0.00000"
+00016d30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 00016d40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016d50: 2020 2020 2022 636f 7374 223a 2230 2e30       "cost":"0.0
-00016d60: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-00016d70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016d80: 2020 2020 2022 6665 6522 3a22 302e 3030       "fee":"0.00
-00016d90: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
+00016d50: 2266 6565 223a 2230 2e30 3030 3030 222c  "fee":"0.00000",
+00016d60: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016d70: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00016d80: 7072 6963 6522 3a22 302e 3030 3030 3022  price":"0.00000"
+00016d90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 00016da0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016db0: 2020 2020 2270 7269 6365 223a 2230 2e30      "price":"0.0
+00016db0: 2273 746f 7070 7269 6365 223a 2230 2e30  "stopprice":"0.0
 00016dc0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
 00016dd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016de0: 2020 2020 2022 7374 6f70 7072 6963 6522       "stopprice"
-00016df0: 3a22 302e 3030 3030 3022 2c0a 2020 2020  :"0.00000",.    
-00016e00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00016e10: 2020 2020 2020 2020 2020 226c 696d 6974            "limit
-00016e20: 7072 6963 6522 3a22 302e 3030 3030 3022  price":"0.00000"
-00016e30: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00016e40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016e50: 226d 6973 6322 3a22 222c 0a20 2020 2020  "misc":"",.     
-00016e60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00016e70: 2020 2020 2020 2020 2022 6f66 6c61 6773           "oflags
-00016e80: 223a 2266 6369 7122 0a20 2020 2020 2020  ":"fciq".       
-00016e90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00016ea0: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00016eb0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00016ec0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00016ed0: 2020 2020 2022 636f 756e 7422 3a31 360a       "count":16.
-00016ee0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00016ef0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-00016f00: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00016f10: 2020 2020 2020 6d61 726b 6574 203d 204e        market = N
-00016f20: 6f6e 650a 2020 2020 2020 2020 6966 2073  one.        if s
-00016f30: 796d 626f 6c20 6973 206e 6f74 204e 6f6e  ymbol is not Non
-00016f40: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00016f50: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
-00016f60: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
-00016f70: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-00016f80: 662e 7361 6665 5f64 6963 7428 7265 7370  f.safe_dict(resp
-00016f90: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00016fa0: 7b7d 290a 2020 2020 2020 2020 6f72 6465  {}).        orde
-00016fb0: 7273 203d 2073 656c 662e 7361 6665 5f64  rs = self.safe_d
-00016fc0: 6963 7428 7265 7375 6c74 2c20 2763 6c6f  ict(result, 'clo
-00016fd0: 7365 6427 2c20 7b7d 290a 2020 2020 2020  sed', {}).      
-00016fe0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00016ff0: 7273 655f 6f72 6465 7273 286f 7264 6572  rse_orders(order
-00017000: 732c 206d 6172 6b65 742c 2073 696e 6365  s, market, since
-00017010: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
-00017020: 6620 7061 7273 655f 7472 616e 7361 6374  f parse_transact
-00017030: 696f 6e5f 7374 6174 7573 2873 656c 662c  ion_status(self,
-00017040: 2073 7461 7475 7329 3a0a 2020 2020 2020   status):.      
-00017050: 2020 2320 4946 4558 2074 7261 6e73 6163    # IFEX transac
-00017060: 7469 6f6e 2073 7461 7465 730a 2020 2020  tion states.    
-00017070: 2020 2020 7374 6174 7573 6573 203d 207b      statuses = {
-00017080: 0a20 2020 2020 2020 2020 2020 2027 496e  .            'In
-00017090: 6974 6961 6c27 3a20 2770 656e 6469 6e67  itial': 'pending
-000170a0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-000170b0: 5065 6e64 696e 6727 3a20 2770 656e 6469  Pending': 'pendi
-000170c0: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
-000170d0: 2027 5375 6363 6573 7327 3a20 276f 6b27   'Success': 'ok'
-000170e0: 2c0a 2020 2020 2020 2020 2020 2020 2753  ,.            'S
-000170f0: 6574 746c 6564 273a 2027 7065 6e64 696e  ettled': 'pendin
-00017100: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
-00017110: 2746 6169 6c75 7265 273a 2027 6661 696c  'Failure': 'fail
-00017120: 6564 272c 0a20 2020 2020 2020 2020 2020  ed',.           
-00017130: 2027 5061 7274 6961 6c27 3a20 276f 6b27   'Partial': 'ok'
-00017140: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00017150: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00017160: 7361 6665 5f73 7472 696e 6728 7374 6174  safe_string(stat
-00017170: 7573 6573 2c20 7374 6174 7573 2c20 7374  uses, status, st
-00017180: 6174 7573 290a 0a20 2020 2064 6566 2070  atus)..    def p
-00017190: 6172 7365 5f6e 6574 776f 726b 2873 656c  arse_network(sel
-000171a0: 662c 206e 6574 776f 726b 293a 0a20 2020  f, network):.   
-000171b0: 2020 2020 2077 6974 6864 7261 774d 6574       withdrawMet
-000171c0: 686f 6473 203d 2073 656c 662e 7361 6665  hods = self.safe
-000171d0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-000171e0: 6f6e 732c 2027 7769 7468 6472 6177 4d65  ons, 'withdrawMe
-000171f0: 7468 6f64 7327 2c20 7b7d 290a 2020 2020  thods', {}).    
-00017200: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00017210: 7361 6665 5f73 7472 696e 6728 7769 7468  safe_string(with
-00017220: 6472 6177 4d65 7468 6f64 732c 206e 6574  drawMethods, net
-00017230: 776f 726b 2c20 6e65 7477 6f72 6b29 0a0a  work, network)..
-00017240: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
-00017250: 616e 7361 6374 696f 6e28 7365 6c66 2c20  ansaction(self, 
-00017260: 7472 616e 7361 6374 696f 6e2c 2063 7572  transaction, cur
-00017270: 7265 6e63 793a 2043 7572 7265 6e63 7920  rency: Currency 
-00017280: 3d20 4e6f 6e65 2920 2d3e 2054 7261 6e73  = None) -> Trans
-00017290: 6163 7469 6f6e 3a0a 2020 2020 2020 2020  action:.        
-000172a0: 230a 2020 2020 2020 2020 2320 6665 7463  #.        # fetc
-000172b0: 6844 6570 6f73 6974 730a 2020 2020 2020  hDeposits.      
-000172c0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-000172d0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-000172e0: 2020 2020 2020 226d 6574 686f 6422 3a20        "method": 
-000172f0: 2245 7468 6572 2848 6578 2922 2c0a 2020  "Ether(Hex)",.  
-00017300: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017310: 2261 636c 6173 7322 3a20 2263 7572 7265  "aclass": "curre
-00017320: 6e63 7922 2c0a 2020 2020 2020 2020 2320  ncy",.        # 
-00017330: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
-00017340: 2022 5845 5448 222c 0a20 2020 2020 2020   "XETH",.       
-00017350: 2023 2020 2020 2020 2020 2022 7265 6669   #         "refi
-00017360: 6422 3a20 2251 3243 414e 4b4c 2d4c 4246  d": "Q2CANKL-LBF
-00017370: 5645 452d 5534 5932 5751 222c 0a20 2020  VEE-U4Y2WQ",.   
-00017380: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00017390: 7478 6964 223a 2022 3078 3537 6664 3730  txid": "0x57fd70
-000173a0: 3464 6162 3161 3733 6332 3065 3234 6338  4dab1a73c20e24c8
-000173b0: 3639 3630 3939 6236 3935 6435 3936 3932  696099b695d59692
-000173c0: 3462 3430 3162 3236 3135 3133 6366 6461  4b401b261513cfda
-000173d0: 6232 33e2 80a6 222c 0a20 2020 2020 2020  b23...",.       
-000173e0: 2023 2020 2020 2020 2020 2022 696e 666f   #         "info
-000173f0: 223a 2022 3078 3631 3566 3962 6137 6139  ": "0x615f9ba7a9
-00017400: 3537 3562 3061 6234 6435 3731 6232 6233  575b0ab4d571b2b3
-00017410: 3662 3162 3332 3462 6438 3332 3930 222c  6b1b324bd83290",
-00017420: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00017430: 2020 2022 616d 6f75 6e74 223a 2022 372e     "amount": "7.
-00017440: 3939 3939 3235 3739 3030 222c 0a20 2020  9999257900",.   
-00017450: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00017460: 6665 6522 3a20 2230 2e30 3030 3030 3030  fee": "0.0000000
-00017470: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00017480: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00017490: 2031 3532 3932 3233 3231 322c 0a20 2020   1529223212,.   
-000174a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-000174b0: 7374 6174 7573 223a 2022 5375 6363 6573  status": "Succes
-000174c0: 7322 0a20 2020 2020 2020 2023 2020 2020  s".        #    
-000174d0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
-000174e0: 2020 2020 2023 2074 6865 7265 2063 616e       # there can
-000174f0: 2062 6520 616e 2061 6464 6974 696f 6e61   be an additiona
-00017500: 6c20 2773 7461 7475 732d 7072 6f70 2720  l 'status-prop' 
-00017510: 6669 656c 6420 7072 6573 656e 740a 2020  field present.  
-00017520: 2020 2020 2020 2320 6465 706f 7369 7420        # deposit 
-00017530: 7065 6e64 696e 6720 7265 7669 6577 2062  pending review b
-00017540: 7920 6578 6368 616e 6765 203d 3e20 276f  y exchange => 'o
-00017550: 6e2d 686f 6c64 270a 2020 2020 2020 2020  n-hold'.        
-00017560: 2320 7468 6520 6465 706f 7369 7420 6973  # the deposit is
-00017570: 2069 6e69 7469 6174 6564 2062 7920 7468   initiated by th
-00017580: 6520 6578 6368 616e 6765 203d 3e20 2772  e exchange => 'r
-00017590: 6574 7572 6e27 0a20 2020 2020 2020 2023  eturn'.        #
-000175a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000175b0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-000175c0: 2020 2020 2022 7479 7065 223a 2027 6465       "type": 'de
-000175d0: 706f 7369 7427 2c0a 2020 2020 2020 2020  posit',.        
-000175e0: 2320 2020 2020 2020 2020 2022 6d65 7468  #          "meth
-000175f0: 6f64 223a 2027 4669 646f 7220 4261 6e6b  od": 'Fidor Bank
-00017600: 2041 4728 5769 7265 2054 7261 6e73 6665   AG(Wire Transfe
-00017610: 7229 272c 0a20 2020 2020 2020 2023 2020  r)',.        #  
-00017620: 2020 2020 2020 2020 2261 636c 6173 7322          "aclass"
-00017630: 3a20 2763 7572 7265 6e63 7927 2c0a 2020  : 'currency',.  
-00017640: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017650: 2022 6173 7365 7422 3a20 275a 4555 5227   "asset": 'ZEUR'
-00017660: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00017670: 2020 2020 2022 7265 6669 6422 3a20 2778       "refid": 'x
-00017680: 7878 2d78 7878 2d78 7878 272c 0a20 2020  xx-xxx-xxx',.   
-00017690: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000176a0: 2274 7869 6422 3a20 2731 3233 3431 3233  "txid": '1234123
-000176b0: 3427 2c0a 2020 2020 2020 2020 2320 2020  4',.        #   
-000176c0: 2020 2020 2020 2022 696e 666f 223a 2027         "info": '
-000176d0: 4241 4e4b 434f 4445 5858 5827 2c0a 2020  BANKCODEXXX',.  
-000176e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000176f0: 2022 616d 6f75 6e74 223a 2027 3338 3736   "amount": '3876
-00017700: 392e 3038 272c 0a20 2020 2020 2020 2023  9.08',.        #
-00017710: 2020 2020 2020 2020 2020 2266 6565 223a            "fee":
-00017720: 2027 302e 3030 3030 272c 0a20 2020 2020   '0.0000',.     
-00017730: 2020 2023 2020 2020 2020 2020 2020 2274     #          "t
-00017740: 696d 6522 3a20 3136 3434 3330 3635 3532  ime": 1644306552
-00017750: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00017760: 2020 2020 2022 7374 6174 7573 223a 2027       "status": '
-00017770: 5375 6363 6573 7327 2c0a 2020 2020 2020  Success',.      
-00017780: 2020 2320 2020 2020 2020 2020 2073 7461    #          sta
-00017790: 7475 732d 7072 6f70 3a20 276f 6e2d 686f  tus-prop: 'on-ho
-000177a0: 6c64 270a 2020 2020 2020 2020 2320 2020  ld'.        #   
-000177b0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-000177c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-000177d0: 2023 2066 6574 6368 5769 7468 6472 6177   # fetchWithdraw
-000177e0: 616c 730a 2020 2020 2020 2020 230a 2020  als.        #.  
-000177f0: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00017800: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017810: 226d 6574 686f 6422 3a20 2245 7468 6572  "method": "Ether
-00017820: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00017830: 2020 2020 2022 6163 6c61 7373 223a 2022       "aclass": "
-00017840: 6375 7272 656e 6379 222c 0a20 2020 2020  currency",.     
-00017850: 2020 2023 2020 2020 2020 2020 2022 6173     #         "as
-00017860: 7365 7422 3a20 2258 4554 4822 2c0a 2020  set": "XETH",.  
-00017870: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017880: 2272 6566 6964 223a 2022 4132 4246 3334  "refid": "A2BF34
-00017890: 532d 4f37 4c42 4e51 2d55 4534 5934 4f22  S-O7LBNQ-UE4Y4O"
-000178a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000178b0: 2020 2020 2274 7869 6422 3a20 2230 7832      "txid": "0x2
-000178c0: 3838 6238 3363 3662 3039 3034 6438 3430  88b83c6b0904d840
-000178d0: 3065 6634 3465 3163 3965 3231 3837 6235  0ef44e1c9e2187b5
-000178e0: 6338 6637 6561 3364 3833 3832 3232 6435  c8f7ea3d838222d5
-000178f0: 3366 3730 3161 3135 6235 6332 3734 6422  3f701a15b5c274d"
-00017900: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00017910: 2020 2020 2269 6e66 6f22 3a20 2230 7837      "info": "0x7
-00017920: 6362 3237 3561 3565 3037 6261 3934 3366  cb275a5e07ba943f
-00017930: 6565 3937 3265 3136 3564 3830 6461 6136  ee972e165d80daa6
-00017940: 3763 6232 6464 3022 2c0a 2020 2020 2020  7cb2dd0",.      
-00017950: 2020 2320 2020 2020 2020 2020 2261 6d6f    #         "amo
-00017960: 756e 7422 3a20 2239 2e39 3935 3030 3030  unt": "9.9950000
-00017970: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00017980: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-00017990: 302e 3030 3530 3030 3030 3030 222c 0a20  0.0050000000",. 
-000179a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000179b0: 2022 7469 6d65 223a 2020 3135 3330 3438   "time":  153048
-000179c0: 3137 3530 2c0a 2020 2020 2020 2020 2320  1750,.        # 
-000179d0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-000179e0: 3a20 2253 7563 6365 7373 220a 2020 2020  : "Success".    
-000179f0: 2020 2020 2320 2020 2020 2020 2020 226b      #         "k
-00017a00: 6579 223a 2248 756f 6269 2077 616c 6c65  ey":"Huobi walle
-00017a10: 7422 2c0a 2020 2020 2020 2020 2320 2020  t",.        #   
-00017a20: 2020 2020 2020 226e 6574 776f 726b 223a        "network":
-00017a30: 2254 726f 6e22 0a20 2020 2020 2020 2023  "Tron".        #
-00017a40: 2020 2020 2020 2020 2073 7461 7475 732d           status-
-00017a50: 7072 6f70 3a20 276f 6e2d 686f 6c64 2720  prop: 'on-hold' 
-00017a60: 2023 2073 656c 6620 6669 656c 6420 6d69   # self field mi
-00017a70: 6768 7420 6e6f 7420 6265 2070 7265 7365  ght not be prese
-00017a80: 6e74 2069 6e20 736f 6d65 2063 6173 6573  nt in some cases
-00017a90: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00017aa0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00017ab0: 2020 2023 2077 6974 6864 7261 770a 2020     # withdraw.  
-00017ac0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00017ad0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00017ae0: 2320 2020 2020 2020 2020 2272 6566 6964  #         "refid
-00017af0: 223a 2022 4147 4253 4f36 542d 5546 4d54  ": "AGBSO6T-UFMT
-00017b00: 5451 2d49 374b 4753 3622 0a20 2020 2020  TQ-I7KGS6".     
-00017b10: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
-00017b20: 2020 2023 0a20 2020 2020 2020 2069 6420     #.        id 
-00017b30: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00017b40: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
-00017b50: 2772 6566 6964 2729 0a20 2020 2020 2020  'refid').       
-00017b60: 2074 7869 6420 3d20 7365 6c66 2e73 6166   txid = self.saf
-00017b70: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-00017b80: 7469 6f6e 2c20 2774 7869 6427 290a 2020  tion, 'txid').  
-00017b90: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-00017ba0: 3d20 7365 6c66 2e73 6166 655f 7469 6d65  = self.safe_time
-00017bb0: 7374 616d 7028 7472 616e 7361 6374 696f  stamp(transactio
-00017bc0: 6e2c 2027 7469 6d65 2729 0a20 2020 2020  n, 'time').     
-00017bd0: 2020 2063 7572 7265 6e63 7949 6420 3d20     currencyId = 
-00017be0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-00017bf0: 2874 7261 6e73 6163 7469 6f6e 2c20 2761  (transaction, 'a
-00017c00: 7373 6574 2729 0a20 2020 2020 2020 2063  sset').        c
-00017c10: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
-00017c20: 6375 7272 656e 6379 5f63 6f64 6528 6375  currency_code(cu
-00017c30: 7272 656e 6379 4964 2c20 6375 7272 656e  rrencyId, curren
-00017c40: 6379 290a 2020 2020 2020 2020 6164 6472  cy).        addr
-00017c50: 6573 7320 3d20 7365 6c66 2e73 6166 655f  ess = self.safe_
-00017c60: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-00017c70: 6f6e 2c20 2769 6e66 6f27 290a 2020 2020  on, 'info').    
-00017c80: 2020 2020 616d 6f75 6e74 203d 2073 656c      amount = sel
-00017c90: 662e 7361 6665 5f6e 756d 6265 7228 7472  f.safe_number(tr
-00017ca0: 616e 7361 6374 696f 6e2c 2027 616d 6f75  ansaction, 'amou
-00017cb0: 6e74 2729 0a20 2020 2020 2020 2073 7461  nt').        sta
-00017cc0: 7475 7320 3d20 7365 6c66 2e70 6172 7365  tus = self.parse
-00017cd0: 5f74 7261 6e73 6163 7469 6f6e 5f73 7461  _transaction_sta
-00017ce0: 7475 7328 7365 6c66 2e73 6166 655f 7374  tus(self.safe_st
-00017cf0: 7269 6e67 2874 7261 6e73 6163 7469 6f6e  ring(transaction
-00017d00: 2c20 2773 7461 7475 7327 2929 0a20 2020  , 'status')).   
-00017d10: 2020 2020 2073 7461 7475 7350 726f 7020       statusProp 
-00017d20: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00017d30: 6e67 2874 7261 6e73 6163 7469 6f6e 2c20  ng(transaction, 
-00017d40: 2773 7461 7475 732d 7072 6f70 2729 0a20  'status-prop'). 
-00017d50: 2020 2020 2020 2069 734f 6e48 6f6c 6444         isOnHoldD
-00017d60: 6570 6f73 6974 203d 2073 7461 7475 7350  eposit = statusP
-00017d70: 726f 7020 3d3d 2027 6f6e 2d68 6f6c 6427  rop == 'on-hold'
-00017d80: 0a20 2020 2020 2020 2069 7343 616e 6365  .        isCance
-00017d90: 6c6c 6174 696f 6e52 6571 7565 7374 203d  llationRequest =
-00017da0: 2073 7461 7475 7350 726f 7020 3d3d 2027   statusProp == '
-00017db0: 6361 6e63 656c 2d70 656e 6469 6e67 270a  cancel-pending'.
-00017dc0: 2020 2020 2020 2020 6973 4f6e 486f 6c64          isOnHold
-00017dd0: 5769 7468 6472 6177 616c 203d 2073 7461  Withdrawal = sta
-00017de0: 7475 7350 726f 7020 3d3d 2027 6f6e 686f  tusProp == 'onho
-00017df0: 6c64 270a 2020 2020 2020 2020 6966 2069  ld'.        if i
-00017e00: 734f 6e48 6f6c 6444 6570 6f73 6974 206f  sOnHoldDeposit o
-00017e10: 7220 6973 4361 6e63 656c 6c61 7469 6f6e  r isCancellation
-00017e20: 5265 7175 6573 7420 6f72 2069 734f 6e48  Request or isOnH
-00017e30: 6f6c 6457 6974 6864 7261 7761 6c3a 0a20  oldWithdrawal:. 
-00017e40: 2020 2020 2020 2020 2020 2073 7461 7475             statu
-00017e50: 7320 3d20 2770 656e 6469 6e67 270a 2020  s = 'pending'.  
-00017e60: 2020 2020 2020 7479 7065 203d 2073 656c        type = sel
-00017e70: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
-00017e80: 616e 7361 6374 696f 6e2c 2027 7479 7065  ansaction, 'type
-00017e90: 2729 2020 2320 696e 6a65 6374 6564 2066  ')  # injected f
-00017ea0: 726f 6d20 7468 6520 6f75 7473 6964 650a  rom the outside.
-00017eb0: 2020 2020 2020 2020 6665 6543 6f73 7420          feeCost 
-00017ec0: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00017ed0: 6572 2874 7261 6e73 6163 7469 6f6e 2c20  er(transaction, 
-00017ee0: 2766 6565 2729 0a20 2020 2020 2020 2069  'fee').        i
-00017ef0: 6620 6665 6543 6f73 7420 6973 204e 6f6e  f feeCost is Non
-00017f00: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-00017f10: 6620 7479 7065 203d 3d20 2764 6570 6f73  f type == 'depos
-00017f20: 6974 273a 0a20 2020 2020 2020 2020 2020  it':.           
-00017f30: 2020 2020 2066 6565 436f 7374 203d 2030       feeCost = 0
-00017f40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017f50: 7b0a 2020 2020 2020 2020 2020 2020 2769  {.            'i
-00017f60: 6e66 6f27 3a20 7472 616e 7361 6374 696f  nfo': transactio
-00017f70: 6e2c 0a20 2020 2020 2020 2020 2020 2027  n,.            '
-00017f80: 6964 273a 2069 642c 0a20 2020 2020 2020  id': id,.       
-00017f90: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
-00017fa0: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
-00017fb0: 2020 2027 616d 6f75 6e74 273a 2061 6d6f     'amount': amo
-00017fc0: 756e 742c 0a20 2020 2020 2020 2020 2020  unt,.           
-00017fd0: 2027 6e65 7477 6f72 6b27 3a20 7365 6c66   'network': self
-00017fe0: 2e70 6172 7365 5f6e 6574 776f 726b 2873  .parse_network(s
-00017ff0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-00018000: 7472 616e 7361 6374 696f 6e2c 2027 6e65  transaction, 'ne
-00018010: 7477 6f72 6b27 2929 2c0a 2020 2020 2020  twork')),.      
-00018020: 2020 2020 2020 2761 6464 7265 7373 273a        'address':
-00018030: 2061 6464 7265 7373 2c0a 2020 2020 2020   address,.      
-00018040: 2020 2020 2020 2761 6464 7265 7373 546f        'addressTo
-00018050: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-00018060: 2020 2020 2027 6164 6472 6573 7346 726f       'addressFro
-00018070: 6d27 3a20 4e6f 6e65 2c0a 2020 2020 2020  m': None,.      
-00018080: 2020 2020 2020 2774 6167 273a 204e 6f6e        'tag': Non
-00018090: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-000180a0: 7461 6754 6f27 3a20 4e6f 6e65 2c0a 2020  tagTo': None,.  
-000180b0: 2020 2020 2020 2020 2020 2774 6167 4672            'tagFr
-000180c0: 6f6d 273a 204e 6f6e 652c 0a20 2020 2020  om': None,.     
-000180d0: 2020 2020 2020 2027 7374 6174 7573 273a         'status':
-000180e0: 2073 7461 7475 732c 0a20 2020 2020 2020   status,.       
-000180f0: 2020 2020 2027 7479 7065 273a 2074 7970       'type': typ
-00018100: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00018110: 7570 6461 7465 6427 3a20 4e6f 6e65 2c0a  updated': None,.
-00018120: 2020 2020 2020 2020 2020 2020 2774 7869              'txi
-00018130: 6427 3a20 7478 6964 2c0a 2020 2020 2020  d': txid,.      
-00018140: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
-00018150: 273a 2074 696d 6573 7461 6d70 2c0a 2020  ': timestamp,.  
-00018160: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
-00018170: 696d 6527 3a20 7365 6c66 2e69 736f 3836  ime': self.iso86
-00018180: 3031 2874 696d 6573 7461 6d70 292c 0a20  01(timestamp),. 
-00018190: 2020 2020 2020 2020 2020 2027 636f 6d6d             'comm
-000181a0: 656e 7427 3a20 4e6f 6e65 2c0a 2020 2020  ent': None,.    
-000181b0: 2020 2020 2020 2020 2769 6e74 6572 6e61          'interna
-000181c0: 6c27 3a20 4e6f 6e65 2c0a 2020 2020 2020  l': None,.      
-000181d0: 2020 2020 2020 2766 6565 273a 207b 0a20        'fee': {. 
-000181e0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
-000181f0: 6375 7272 656e 6379 273a 2063 6f64 652c  currency': code,
-00018200: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018210: 2027 636f 7374 273a 2066 6565 436f 7374   'cost': feeCost
-00018220: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
-00018230: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
-00018240: 6465 6620 7061 7273 655f 7472 616e 7361  def parse_transa
-00018250: 6374 696f 6e73 5f62 795f 7479 7065 2873  ctions_by_type(s
-00018260: 656c 662c 2074 7970 652c 2074 7261 6e73  elf, type, trans
-00018270: 6163 7469 6f6e 732c 2063 6f64 653a 2053  actions, code: S
-00018280: 7472 203d 204e 6f6e 652c 2073 696e 6365  tr = None, since
-00018290: 3a20 496e 7420 3d20 4e6f 6e65 2c20 6c69  : Int = None, li
-000182a0: 6d69 743a 2049 6e74 203d 204e 6f6e 6529  mit: Int = None)
-000182b0: 3a0a 2020 2020 2020 2020 7265 7375 6c74  :.        result
-000182c0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
-000182d0: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-000182e0: 6c65 6e28 7472 616e 7361 6374 696f 6e73  len(transactions
-000182f0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
-00018300: 7472 616e 7361 6374 696f 6e20 3d20 7365  transaction = se
-00018310: 6c66 2e70 6172 7365 5f74 7261 6e73 6163  lf.parse_transac
-00018320: 7469 6f6e 2873 656c 662e 6578 7465 6e64  tion(self.extend
-00018330: 287b 0a20 2020 2020 2020 2020 2020 2020  ({.             
-00018340: 2020 2027 7479 7065 273a 2074 7970 652c     'type': type,
-00018350: 0a20 2020 2020 2020 2020 2020 207d 2c20  .            }, 
-00018360: 7472 616e 7361 6374 696f 6e73 5b69 5d29  transactions[i])
-00018370: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00018380: 7375 6c74 2e61 7070 656e 6428 7472 616e  sult.append(tran
-00018390: 7361 6374 696f 6e29 0a20 2020 2020 2020  saction).       
-000183a0: 2072 6574 7572 6e20 7365 6c66 2e66 696c   return self.fil
-000183b0: 7465 725f 6279 5f63 7572 7265 6e63 795f  ter_by_currency_
-000183c0: 7369 6e63 655f 6c69 6d69 7428 7265 7375  since_limit(resu
-000183d0: 6c74 2c20 636f 6465 2c20 7369 6e63 652c  lt, code, since,
-000183e0: 206c 696d 6974 290a 0a20 2020 2061 7379   limit)..    asy
-000183f0: 6e63 2064 6566 2066 6574 6368 5f64 6570  nc def fetch_dep
-00018400: 6f73 6974 7328 7365 6c66 2c20 636f 6465  osits(self, code
-00018410: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7369  : Str = None, si
-00018420: 6e63 653a 2049 6e74 203d 204e 6f6e 652c  nce: Int = None,
-00018430: 206c 696d 6974 3a20 496e 7420 3d20 4e6f   limit: Int = No
-00018440: 6e65 2c20 7061 7261 6d73 3d7b 7d29 202d  ne, params={}) -
-00018450: 3e20 4c69 7374 5b54 7261 6e73 6163 7469  > List[Transacti
-00018460: 6f6e 5d3a 0a20 2020 2020 2020 2022 2222  on]:.        """
-00018470: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-00018480: 6c6c 2064 6570 6f73 6974 7320 6d61 6465  ll deposits made
-00018490: 2074 6f20 616e 2061 6363 6f75 6e74 0a20   to an account. 
-000184a0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-000184b0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-000184c0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f46  .com/rest/#tag/F
-000184d0: 756e 6469 6e67 2f6f 7065 7261 7469 6f6e  unding/operation
-000184e0: 2f67 6574 5374 6174 7573 5265 6365 6e74  /getStatusRecent
-000184f0: 4465 706f 7369 7473 0a20 2020 2020 2020  Deposits.       
-00018500: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
-00018510: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
-00018520: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
-00018530: 3a70 6172 616d 2069 6e74 205b 7369 6e63  :param int [sinc
-00018540: 655d 3a20 7468 6520 6561 726c 6965 7374  e]: the earliest
-00018550: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
-00018560: 6574 6368 2064 6570 6f73 6974 7320 666f  etch deposits fo
-00018570: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-00018580: 2069 6e74 205b 6c69 6d69 745d 3a20 7468   int [limit]: th
-00018590: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-000185a0: 206f 6620 6465 706f 7369 7473 2073 7472   of deposits str
-000185b0: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
-000185c0: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
-000185d0: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
-000185e0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-000185f0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00018600: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
-00018610: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00018620: 203a 7265 7475 726e 7320 6469 6374 5b5d   :returns dict[]
-00018630: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-00018640: 6e73 6163 7469 6f6e 2073 7472 7563 7475  nsaction structu
-00018650: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-00018660: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-00018670: 3d74 7261 6e73 6163 7469 6f6e 2d73 7472  =transaction-str
-00018680: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00018690: 2022 2222 0a20 2020 2020 2020 2023 2068   """.        # h
-000186a0: 7474 7073 3a2f 2f77 7777 2e6b 7261 6b65  ttps://www.krake
-000186b0: 6e2e 636f 6d2f 656e 2d75 732f 6865 6c70  n.com/en-us/help
-000186c0: 2f61 7069 2364 6570 6f73 6974 2d73 7461  /api#deposit-sta
-000186d0: 7475 730a 2020 2020 2020 2020 6966 2063  tus.        if c
-000186e0: 6f64 6520 6973 204e 6f6e 653a 0a20 2020  ode is None:.   
-000186f0: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
-00018700: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
-00018710: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-00018720: 6368 4465 706f 7369 7473 2829 2072 6571  chDeposits() req
-00018730: 7569 7265 7320 6120 6375 7272 656e 6379  uires a currency
-00018740: 2063 6f64 6520 6172 6775 6d65 6e74 2729   code argument')
-00018750: 0a20 2020 2020 2020 2061 7761 6974 2073  .        await s
-00018760: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-00018770: 2829 0a20 2020 2020 2020 2063 7572 7265  ().        curre
-00018780: 6e63 7920 3d20 7365 6c66 2e63 7572 7265  ncy = self.curre
-00018790: 6e63 7928 636f 6465 290a 2020 2020 2020  ncy(code).      
-000187a0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-000187b0: 2020 2020 2020 2020 2020 2761 7373 6574            'asset
-000187c0: 273a 2063 7572 7265 6e63 795b 2769 6427  ': currency['id'
-000187d0: 5d2c 0a20 2020 2020 2020 207d 0a20 2020  ],.        }.   
-000187e0: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
-000187f0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-00018800: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00018810: 7374 6172 7427 5d20 3d20 7369 6e63 650a  start'] = since.
-00018820: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00018830: 203d 2061 7761 6974 2073 656c 662e 7072   = await self.pr
-00018840: 6976 6174 6550 6f73 7444 6570 6f73 6974  ivatePostDeposit
-00018850: 5374 6174 7573 2873 656c 662e 6578 7465  Status(self.exte
-00018860: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00018870: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-00018880: 2020 2020 2020 2023 2020 2020 207b 2065         #     { e
-00018890: 7272 6f72 3a20 5b5d 2c0a 2020 2020 2020  rror: [],.      
-000188a0: 2020 2320 2020 2020 2020 2272 6573 756c    #       "resul
-000188b0: 7422 3a20 5b7b 226d 6574 686f 6422 3a20  t": [{"method": 
-000188c0: 2245 7468 6572 2848 6578 2922 2c0a 2020  "Ether(Hex)",.  
-000188d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000188e0: 2020 2020 2020 2020 2020 2020 2261 636c              "acl
-000188f0: 6173 7322 3a20 2263 7572 7265 6e63 7922  ass": "currency"
-00018900: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00018910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018920: 2022 6173 7365 7422 3a20 2258 4554 4822   "asset": "XETH"
-00018930: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00018940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018950: 2022 7265 6669 6422 3a20 2251 3243 414e   "refid": "Q2CAN
-00018960: 4b4c 2d4c 4246 5645 452d 5534 5932 5751  KL-LBFVEE-U4Y2WQ
-00018970: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00018980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018990: 2020 2022 7478 6964 223a 2022 3078 3537     "txid": "0x57
-000189a0: 6664 3730 3464 6162 3161 3733 6332 3065  fd704dab1a73c20e
-000189b0: 3234 6338 3639 3630 3939 6236 3935 6435  24c8696099b695d5
-000189c0: 3936 3932 3462 3430 3162 3236 3135 3133  96924b401b261513
-000189d0: 6366 6461 6232 33e2 80a6 222c 0a20 2020  cfdab23...",.   
-000189e0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000189f0: 2020 2020 2020 2020 2020 2020 2022 696e               "in
-00018a00: 666f 223a 2022 3078 3631 3566 3962 6137  fo": "0x615f9ba7
-00018a10: 6139 3537 3562 3061 6234 6435 3731 6232  a9575b0ab4d571b2
-00018a20: 6233 3662 3162 3332 3462 6438 3332 3930  b36b1b324bd83290
-00018a30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00016de0: 2020 2020 2022 6c69 6d69 7470 7269 6365       "limitprice
+00016df0: 223a 2230 2e30 3030 3030 222c 0a20 2020  ":"0.00000",.   
+00016e00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00016e10: 2020 2020 2020 2020 2020 2022 6d69 7363             "misc
+00016e20: 223a 2222 2c0a 2020 2020 2020 2020 2320  ":"",.        # 
+00016e30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016e40: 2020 2020 226f 666c 6167 7322 3a22 6663      "oflags":"fc
+00016e50: 6971 220a 2020 2020 2020 2020 2320 2020  iq".        #   
+00016e60: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+00016e70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016e80: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00016e90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00016ea0: 2263 6f75 6e74 223a 3136 0a20 2020 2020  "count":16.     
+00016eb0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
+00016ec0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00016ed0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00016ee0: 206d 6172 6b65 7420 3d20 4e6f 6e65 0a20   market = None. 
+00016ef0: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
+00016f00: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00016f10: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+00016f20: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
+00016f30: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
+00016f40: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+00016f50: 655f 6469 6374 2872 6573 706f 6e73 652c  e_dict(response,
+00016f60: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+00016f70: 2020 2020 2020 206f 7264 6572 7320 3d20         orders = 
+00016f80: 7365 6c66 2e73 6166 655f 6469 6374 2872  self.safe_dict(r
+00016f90: 6573 756c 742c 2027 636c 6f73 6564 272c  esult, 'closed',
+00016fa0: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
+00016fb0: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
+00016fc0: 7264 6572 7328 6f72 6465 7273 2c20 6d61  rders(orders, ma
+00016fd0: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
+00016fe0: 6974 290a 0a20 2020 2064 6566 2070 6172  it)..    def par
+00016ff0: 7365 5f74 7261 6e73 6163 7469 6f6e 5f73  se_transaction_s
+00017000: 7461 7475 7328 7365 6c66 2c20 7374 6174  tatus(self, stat
+00017010: 7573 293a 0a20 2020 2020 2020 2023 2049  us):.        # I
+00017020: 4645 5820 7472 616e 7361 6374 696f 6e20  FEX transaction 
+00017030: 7374 6174 6573 0a20 2020 2020 2020 2073  states.        s
+00017040: 7461 7475 7365 7320 3d20 7b0a 2020 2020  tatuses = {.    
+00017050: 2020 2020 2020 2020 2749 6e69 7469 616c          'Initial
+00017060: 273a 2027 7065 6e64 696e 6727 2c0a 2020  ': 'pending',.  
+00017070: 2020 2020 2020 2020 2020 2750 656e 6469            'Pendi
+00017080: 6e67 273a 2027 7065 6e64 696e 6727 2c0a  ng': 'pending',.
+00017090: 2020 2020 2020 2020 2020 2020 2753 7563              'Suc
+000170a0: 6365 7373 273a 2027 6f6b 272c 0a20 2020  cess': 'ok',.   
+000170b0: 2020 2020 2020 2020 2027 5365 7474 6c65           'Settle
+000170c0: 6427 3a20 2770 656e 6469 6e67 272c 0a20  d': 'pending',. 
+000170d0: 2020 2020 2020 2020 2020 2027 4661 696c             'Fail
+000170e0: 7572 6527 3a20 2766 6169 6c65 6427 2c0a  ure': 'failed',.
+000170f0: 2020 2020 2020 2020 2020 2020 2750 6172              'Par
+00017100: 7469 616c 273a 2027 6f6b 272c 0a20 2020  tial': 'ok',.   
+00017110: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
+00017120: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+00017130: 7374 7269 6e67 2873 7461 7475 7365 732c  string(statuses,
+00017140: 2073 7461 7475 732c 2073 7461 7475 7329   status, status)
+00017150: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
+00017160: 6e65 7477 6f72 6b28 7365 6c66 2c20 6e65  network(self, ne
+00017170: 7477 6f72 6b29 3a0a 2020 2020 2020 2020  twork):.        
+00017180: 7769 7468 6472 6177 4d65 7468 6f64 7320  withdrawMethods 
+00017190: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+000171a0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
+000171b0: 2777 6974 6864 7261 774d 6574 686f 6473  'withdrawMethods
+000171c0: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+000171d0: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+000171e0: 7374 7269 6e67 2877 6974 6864 7261 774d  string(withdrawM
+000171f0: 6574 686f 6473 2c20 6e65 7477 6f72 6b2c  ethods, network,
+00017200: 206e 6574 776f 726b 290a 0a20 2020 2064   network)..    d
+00017210: 6566 2070 6172 7365 5f74 7261 6e73 6163  ef parse_transac
+00017220: 7469 6f6e 2873 656c 662c 2074 7261 6e73  tion(self, trans
+00017230: 6163 7469 6f6e 2c20 6375 7272 656e 6379  action, currency
+00017240: 3a20 4375 7272 656e 6379 203d 204e 6f6e  : Currency = Non
+00017250: 6529 202d 3e20 5472 616e 7361 6374 696f  e) -> Transactio
+00017260: 6e3a 0a20 2020 2020 2020 2023 0a20 2020  n:.        #.   
+00017270: 2020 2020 2023 2066 6574 6368 4465 706f       # fetchDepo
+00017280: 7369 7473 0a20 2020 2020 2020 2023 0a20  sits.        #. 
+00017290: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+000172a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000172b0: 2022 6d65 7468 6f64 223a 2022 4574 6865   "method": "Ethe
+000172c0: 7228 4865 7829 222c 0a20 2020 2020 2020  r(Hex)",.       
+000172d0: 2023 2020 2020 2020 2020 2022 6163 6c61   #         "acla
+000172e0: 7373 223a 2022 6375 7272 656e 6379 222c  ss": "currency",
+000172f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00017300: 2020 2022 6173 7365 7422 3a20 2258 4554     "asset": "XET
+00017310: 4822 2c0a 2020 2020 2020 2020 2320 2020  H",.        #   
+00017320: 2020 2020 2020 2272 6566 6964 223a 2022        "refid": "
+00017330: 5132 4341 4e4b 4c2d 4c42 4656 4545 2d55  Q2CANKL-LBFVEE-U
+00017340: 3459 3257 5122 2c0a 2020 2020 2020 2020  4Y2WQ",.        
+00017350: 2320 2020 2020 2020 2020 2274 7869 6422  #         "txid"
+00017360: 3a20 2230 7835 3766 6437 3034 6461 6231  : "0x57fd704dab1
+00017370: 6137 3363 3230 6532 3463 3836 3936 3039  a73c20e24c869609
+00017380: 3962 3639 3564 3539 3639 3234 6234 3031  9b695d596924b401
+00017390: 6232 3631 3531 3363 6664 6162 3233 e280  b261513cfdab23..
+000173a0: a622 2c0a 2020 2020 2020 2020 2320 2020  .",.        #   
+000173b0: 2020 2020 2020 2269 6e66 6f22 3a20 2230        "info": "0
+000173c0: 7836 3135 6639 6261 3761 3935 3735 6230  x615f9ba7a9575b0
+000173d0: 6162 3464 3537 3162 3262 3336 6231 6233  ab4d571b2b36b1b3
+000173e0: 3234 6264 3833 3239 3022 2c0a 2020 2020  24bd83290",.    
+000173f0: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+00017400: 6d6f 756e 7422 3a20 2237 2e39 3939 3932  mount": "7.99992
+00017410: 3537 3930 3022 2c0a 2020 2020 2020 2020  57900",.        
+00017420: 2320 2020 2020 2020 2020 2266 6565 223a  #         "fee":
+00017430: 2022 302e 3030 3030 3030 3030 3030 222c   "0.0000000000",
+00017440: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00017450: 2020 2022 7469 6d65 223a 2020 3135 3239     "time":  1529
+00017460: 3232 3332 3132 2c0a 2020 2020 2020 2020  223212,.        
+00017470: 2320 2020 2020 2020 2020 2273 7461 7475  #         "statu
+00017480: 7322 3a20 2253 7563 6365 7373 220a 2020  s": "Success".  
+00017490: 2020 2020 2020 2320 2020 2020 7d0a 2020        #     }.  
+000174a0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
+000174b0: 2320 7468 6572 6520 6361 6e20 6265 2061  # there can be a
+000174c0: 6e20 6164 6469 7469 6f6e 616c 2027 7374  n additional 'st
+000174d0: 6174 7573 2d70 726f 7027 2066 6965 6c64  atus-prop' field
+000174e0: 2070 7265 7365 6e74 0a20 2020 2020 2020   present.       
+000174f0: 2023 2064 6570 6f73 6974 2070 656e 6469   # deposit pendi
+00017500: 6e67 2072 6576 6965 7720 6279 2065 7863  ng review by exc
+00017510: 6861 6e67 6520 3d3e 2027 6f6e 2d68 6f6c  hange => 'on-hol
+00017520: 6427 0a20 2020 2020 2020 2023 2074 6865  d'.        # the
+00017530: 2064 6570 6f73 6974 2069 7320 696e 6974   deposit is init
+00017540: 6961 7465 6420 6279 2074 6865 2065 7863  iated by the exc
+00017550: 6861 6e67 6520 3d3e 2027 7265 7475 726e  hange => 'return
+00017560: 270a 2020 2020 2020 2020 230a 2020 2020  '.        #.    
+00017570: 2020 2020 2320 2020 2020 207b 0a20 2020      #      {.   
+00017580: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00017590: 2274 7970 6522 3a20 2764 6570 6f73 6974  "type": 'deposit
+000175a0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+000175b0: 2020 2020 2020 226d 6574 686f 6422 3a20        "method": 
+000175c0: 2746 6964 6f72 2042 616e 6b20 4147 2857  'Fidor Bank AG(W
+000175d0: 6972 6520 5472 616e 7366 6572 2927 2c0a  ire Transfer)',.
+000175e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000175f0: 2020 2022 6163 6c61 7373 223a 2027 6375     "aclass": 'cu
+00017600: 7272 656e 6379 272c 0a20 2020 2020 2020  rrency',.       
+00017610: 2023 2020 2020 2020 2020 2020 2261 7373   #          "ass
+00017620: 6574 223a 2027 5a45 5552 272c 0a20 2020  et": 'ZEUR',.   
+00017630: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00017640: 2272 6566 6964 223a 2027 7878 782d 7878  "refid": 'xxx-xx
+00017650: 782d 7878 7827 2c0a 2020 2020 2020 2020  x-xxx',.        
+00017660: 2320 2020 2020 2020 2020 2022 7478 6964  #          "txid
+00017670: 223a 2027 3132 3334 3132 3334 272c 0a20  ": '12341234',. 
+00017680: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00017690: 2020 2269 6e66 6f22 3a20 2742 414e 4b43    "info": 'BANKC
+000176a0: 4f44 4558 5858 272c 0a20 2020 2020 2020  ODEXXX',.       
+000176b0: 2023 2020 2020 2020 2020 2020 2261 6d6f   #          "amo
+000176c0: 756e 7422 3a20 2733 3837 3639 2e30 3827  unt": '38769.08'
+000176d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000176e0: 2020 2020 2022 6665 6522 3a20 2730 2e30       "fee": '0.0
+000176f0: 3030 3027 2c0a 2020 2020 2020 2020 2320  000',.        # 
+00017700: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+00017710: 2031 3634 3433 3036 3535 322c 0a20 2020   1644306552,.   
+00017720: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00017730: 2273 7461 7475 7322 3a20 2753 7563 6365  "status": 'Succe
+00017740: 7373 272c 0a20 2020 2020 2020 2023 2020  ss',.        #  
+00017750: 2020 2020 2020 2020 7374 6174 7573 2d70          status-p
+00017760: 726f 703a 2027 6f6e 2d68 6f6c 6427 0a20  rop: 'on-hold'. 
+00017770: 2020 2020 2020 2023 2020 2020 2020 7d0a         #      }.
+00017780: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00017790: 2020 230a 2020 2020 2020 2020 2320 6665    #.        # fe
+000177a0: 7463 6857 6974 6864 7261 7761 6c73 0a20  tchWithdrawals. 
+000177b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000177c0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+000177d0: 2023 2020 2020 2020 2020 2022 6d65 7468   #         "meth
+000177e0: 6f64 223a 2022 4574 6865 7222 2c0a 2020  od": "Ether",.  
+000177f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00017800: 2261 636c 6173 7322 3a20 2263 7572 7265  "aclass": "curre
+00017810: 6e63 7922 2c0a 2020 2020 2020 2020 2320  ncy",.        # 
+00017820: 2020 2020 2020 2020 2261 7373 6574 223a          "asset":
+00017830: 2022 5845 5448 222c 0a20 2020 2020 2020   "XETH",.       
+00017840: 2023 2020 2020 2020 2020 2022 7265 6669   #         "refi
+00017850: 6422 3a20 2241 3242 4633 3453 2d4f 374c  d": "A2BF34S-O7L
+00017860: 424e 512d 5545 3459 344f 222c 0a20 2020  BNQ-UE4Y4O",.   
+00017870: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00017880: 7478 6964 223a 2022 3078 3238 3862 3833  txid": "0x288b83
+00017890: 6336 6230 3930 3464 3834 3030 6566 3434  c6b0904d8400ef44
+000178a0: 6531 6339 6532 3138 3762 3563 3866 3765  e1c9e2187b5c8f7e
+000178b0: 6133 6438 3338 3232 3264 3533 6637 3031  a3d838222d53f701
+000178c0: 6131 3562 3563 3237 3464 222c 0a20 2020  a15b5c274d",.   
+000178d0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+000178e0: 696e 666f 223a 2022 3078 3763 6232 3735  info": "0x7cb275
+000178f0: 6135 6530 3762 6139 3433 6665 6539 3732  a5e07ba943fee972
+00017900: 6531 3635 6438 3064 6161 3637 6362 3264  e165d80daa67cb2d
+00017910: 6430 222c 0a20 2020 2020 2020 2023 2020  d0",.        #  
+00017920: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
+00017930: 2022 392e 3939 3530 3030 3030 3030 222c   "9.9950000000",
+00017940: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00017950: 2020 2022 6665 6522 3a20 2230 2e30 3035     "fee": "0.005
+00017960: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+00017970: 2020 2320 2020 2020 2020 2020 2274 696d    #         "tim
+00017980: 6522 3a20 2031 3533 3034 3831 3735 302c  e":  1530481750,
+00017990: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000179a0: 2020 2022 7374 6174 7573 223a 2022 5375     "status": "Su
+000179b0: 6363 6573 7322 0a20 2020 2020 2020 2023  ccess".        #
+000179c0: 2020 2020 2020 2020 2022 6b65 7922 3a22           "key":"
+000179d0: 4875 6f62 6920 7761 6c6c 6574 222c 0a20  Huobi wallet",. 
+000179e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000179f0: 2022 6e65 7477 6f72 6b22 3a22 5472 6f6e   "network":"Tron
+00017a00: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00017a10: 2020 2020 7374 6174 7573 2d70 726f 703a      status-prop:
+00017a20: 2027 6f6e 2d68 6f6c 6427 2020 2320 7365   'on-hold'  # se
+00017a30: 6c66 2066 6965 6c64 206d 6967 6874 206e  lf field might n
+00017a40: 6f74 2062 6520 7072 6573 656e 7420 696e  ot be present in
+00017a50: 2073 6f6d 6520 6361 7365 730a 2020 2020   some cases.    
+00017a60: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00017a70: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00017a80: 7769 7468 6472 6177 0a20 2020 2020 2020  withdraw.       
+00017a90: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00017aa0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00017ab0: 2020 2020 2022 7265 6669 6422 3a20 2241       "refid": "A
+00017ac0: 4742 534f 3654 2d55 464d 5454 512d 4937  GBSO6T-UFMTTQ-I7
+00017ad0: 4b47 5336 220a 2020 2020 2020 2020 2320  KGS6".        # 
+00017ae0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+00017af0: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
+00017b00: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+00017b10: 616e 7361 6374 696f 6e2c 2027 7265 6669  ansaction, 'refi
+00017b20: 6427 290a 2020 2020 2020 2020 7478 6964  d').        txid
+00017b30: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00017b40: 696e 6728 7472 616e 7361 6374 696f 6e2c  ing(transaction,
+00017b50: 2027 7478 6964 2729 0a20 2020 2020 2020   'txid').       
+00017b60: 2074 696d 6573 7461 6d70 203d 2073 656c   timestamp = sel
+00017b70: 662e 7361 6665 5f74 696d 6573 7461 6d70  f.safe_timestamp
+00017b80: 2874 7261 6e73 6163 7469 6f6e 2c20 2774  (transaction, 't
+00017b90: 696d 6527 290a 2020 2020 2020 2020 6375  ime').        cu
+00017ba0: 7272 656e 6379 4964 203d 2073 656c 662e  rrencyId = self.
+00017bb0: 7361 6665 5f73 7472 696e 6728 7472 616e  safe_string(tran
+00017bc0: 7361 6374 696f 6e2c 2027 6173 7365 7427  saction, 'asset'
+00017bd0: 290a 2020 2020 2020 2020 636f 6465 203d  ).        code =
+00017be0: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
+00017bf0: 6e63 795f 636f 6465 2863 7572 7265 6e63  ncy_code(currenc
+00017c00: 7949 642c 2063 7572 7265 6e63 7929 0a20  yId, currency). 
+00017c10: 2020 2020 2020 2061 6464 7265 7373 203d         address =
+00017c20: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00017c30: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
+00017c40: 696e 666f 2729 0a20 2020 2020 2020 2061  info').        a
+00017c50: 6d6f 756e 7420 3d20 7365 6c66 2e73 6166  mount = self.saf
+00017c60: 655f 6e75 6d62 6572 2874 7261 6e73 6163  e_number(transac
+00017c70: 7469 6f6e 2c20 2761 6d6f 756e 7427 290a  tion, 'amount').
+00017c80: 2020 2020 2020 2020 7374 6174 7573 203d          status =
+00017c90: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
+00017ca0: 7361 6374 696f 6e5f 7374 6174 7573 2873  saction_status(s
+00017cb0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00017cc0: 7472 616e 7361 6374 696f 6e2c 2027 7374  transaction, 'st
+00017cd0: 6174 7573 2729 290a 2020 2020 2020 2020  atus')).        
+00017ce0: 7374 6174 7573 5072 6f70 203d 2073 656c  statusProp = sel
+00017cf0: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+00017d00: 616e 7361 6374 696f 6e2c 2027 7374 6174  ansaction, 'stat
+00017d10: 7573 2d70 726f 7027 290a 2020 2020 2020  us-prop').      
+00017d20: 2020 6973 4f6e 486f 6c64 4465 706f 7369    isOnHoldDeposi
+00017d30: 7420 3d20 7374 6174 7573 5072 6f70 203d  t = statusProp =
+00017d40: 3d20 276f 6e2d 686f 6c64 270a 2020 2020  = 'on-hold'.    
+00017d50: 2020 2020 6973 4361 6e63 656c 6c61 7469      isCancellati
+00017d60: 6f6e 5265 7175 6573 7420 3d20 7374 6174  onRequest = stat
+00017d70: 7573 5072 6f70 203d 3d20 2763 616e 6365  usProp == 'cance
+00017d80: 6c2d 7065 6e64 696e 6727 0a20 2020 2020  l-pending'.     
+00017d90: 2020 2069 734f 6e48 6f6c 6457 6974 6864     isOnHoldWithd
+00017da0: 7261 7761 6c20 3d20 7374 6174 7573 5072  rawal = statusPr
+00017db0: 6f70 203d 3d20 276f 6e68 6f6c 6427 0a20  op == 'onhold'. 
+00017dc0: 2020 2020 2020 2069 6620 6973 4f6e 486f         if isOnHo
+00017dd0: 6c64 4465 706f 7369 7420 6f72 2069 7343  ldDeposit or isC
+00017de0: 616e 6365 6c6c 6174 696f 6e52 6571 7565  ancellationReque
+00017df0: 7374 206f 7220 6973 4f6e 486f 6c64 5769  st or isOnHoldWi
+00017e00: 7468 6472 6177 616c 3a0a 2020 2020 2020  thdrawal:.      
+00017e10: 2020 2020 2020 7374 6174 7573 203d 2027        status = '
+00017e20: 7065 6e64 696e 6727 0a20 2020 2020 2020  pending'.       
+00017e30: 2074 7970 6520 3d20 7365 6c66 2e73 6166   type = self.saf
+00017e40: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
+00017e50: 7469 6f6e 2c20 2774 7970 6527 2920 2023  tion, 'type')  #
+00017e60: 2069 6e6a 6563 7465 6420 6672 6f6d 2074   injected from t
+00017e70: 6865 206f 7574 7369 6465 0a20 2020 2020  he outside.     
+00017e80: 2020 2066 6565 436f 7374 203d 2073 656c     feeCost = sel
+00017e90: 662e 7361 6665 5f6e 756d 6265 7228 7472  f.safe_number(tr
+00017ea0: 616e 7361 6374 696f 6e2c 2027 6665 6527  ansaction, 'fee'
+00017eb0: 290a 2020 2020 2020 2020 6966 2066 6565  ).        if fee
+00017ec0: 436f 7374 2069 7320 4e6f 6e65 3a0a 2020  Cost is None:.  
+00017ed0: 2020 2020 2020 2020 2020 6966 2074 7970            if typ
+00017ee0: 6520 3d3d 2027 6465 706f 7369 7427 3a0a  e == 'deposit':.
+00017ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017f00: 6665 6543 6f73 7420 3d20 300a 2020 2020  feeCost = 0.    
+00017f10: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
+00017f20: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+00017f30: 2074 7261 6e73 6163 7469 6f6e 2c0a 2020   transaction,.  
+00017f40: 2020 2020 2020 2020 2020 2769 6427 3a20            'id': 
+00017f50: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
+00017f60: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
+00017f70: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+00017f80: 6d6f 756e 7427 3a20 616d 6f75 6e74 2c0a  mount': amount,.
+00017f90: 2020 2020 2020 2020 2020 2020 276e 6574              'net
+00017fa0: 776f 726b 273a 2073 656c 662e 7061 7273  work': self.pars
+00017fb0: 655f 6e65 7477 6f72 6b28 7365 6c66 2e73  e_network(self.s
+00017fc0: 6166 655f 7374 7269 6e67 2874 7261 6e73  afe_string(trans
+00017fd0: 6163 7469 6f6e 2c20 276e 6574 776f 726b  action, 'network
+00017fe0: 2729 292c 0a20 2020 2020 2020 2020 2020  ')),.           
+00017ff0: 2027 6164 6472 6573 7327 3a20 6164 6472   'address': addr
+00018000: 6573 732c 0a20 2020 2020 2020 2020 2020  ess,.           
+00018010: 2027 6164 6472 6573 7354 6f27 3a20 4e6f   'addressTo': No
+00018020: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00018030: 2761 6464 7265 7373 4672 6f6d 273a 204e  'addressFrom': N
+00018040: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00018050: 2027 7461 6727 3a20 4e6f 6e65 2c0a 2020   'tag': None,.  
+00018060: 2020 2020 2020 2020 2020 2774 6167 546f            'tagTo
+00018070: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00018080: 2020 2020 2027 7461 6746 726f 6d27 3a20       'tagFrom': 
+00018090: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+000180a0: 2020 2773 7461 7475 7327 3a20 7374 6174    'status': stat
+000180b0: 7573 2c0a 2020 2020 2020 2020 2020 2020  us,.            
+000180c0: 2774 7970 6527 3a20 7479 7065 2c0a 2020  'type': type,.  
+000180d0: 2020 2020 2020 2020 2020 2775 7064 6174            'updat
+000180e0: 6564 273a 204e 6f6e 652c 0a20 2020 2020  ed': None,.     
+000180f0: 2020 2020 2020 2027 7478 6964 273a 2074         'txid': t
+00018100: 7869 642c 0a20 2020 2020 2020 2020 2020  xid,.           
+00018110: 2027 7469 6d65 7374 616d 7027 3a20 7469   'timestamp': ti
+00018120: 6d65 7374 616d 702c 0a20 2020 2020 2020  mestamp,.       
+00018130: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+00018140: 2073 656c 662e 6973 6f38 3630 3128 7469   self.iso8601(ti
+00018150: 6d65 7374 616d 7029 2c0a 2020 2020 2020  mestamp),.      
+00018160: 2020 2020 2020 2763 6f6d 6d65 6e74 273a        'comment':
+00018170: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+00018180: 2020 2027 696e 7465 726e 616c 273a 204e     'internal': N
+00018190: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+000181a0: 2027 6665 6527 3a20 7b0a 2020 2020 2020   'fee': {.      
+000181b0: 2020 2020 2020 2020 2020 2763 7572 7265            'curre
+000181c0: 6e63 7927 3a20 636f 6465 2c0a 2020 2020  ncy': code,.    
+000181d0: 2020 2020 2020 2020 2020 2020 2763 6f73              'cos
+000181e0: 7427 3a20 6665 6543 6f73 742c 0a20 2020  t': feeCost,.   
+000181f0: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
+00018200: 2020 2020 7d0a 0a20 2020 2064 6566 2070      }..    def p
+00018210: 6172 7365 5f74 7261 6e73 6163 7469 6f6e  arse_transaction
+00018220: 735f 6279 5f74 7970 6528 7365 6c66 2c20  s_by_type(self, 
+00018230: 7479 7065 2c20 7472 616e 7361 6374 696f  type, transactio
+00018240: 6e73 2c20 636f 6465 3a20 5374 7220 3d20  ns, code: Str = 
+00018250: 4e6f 6e65 2c20 7369 6e63 653a 2049 6e74  None, since: Int
+00018260: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+00018270: 496e 7420 3d20 4e6f 6e65 293a 0a20 2020  Int = None):.   
+00018280: 2020 2020 2072 6573 756c 7420 3d20 5b5d       result = []
+00018290: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
+000182a0: 6e20 7261 6e67 6528 302c 206c 656e 2874  n range(0, len(t
+000182b0: 7261 6e73 6163 7469 6f6e 7329 293a 0a20  ransactions)):. 
+000182c0: 2020 2020 2020 2020 2020 2074 7261 6e73             trans
+000182d0: 6163 7469 6f6e 203d 2073 656c 662e 7061  action = self.pa
+000182e0: 7273 655f 7472 616e 7361 6374 696f 6e28  rse_transaction(
+000182f0: 7365 6c66 2e65 7874 656e 6428 7b0a 2020  self.extend({.  
+00018300: 2020 2020 2020 2020 2020 2020 2020 2774                't
+00018310: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
+00018320: 2020 2020 2020 2020 7d2c 2074 7261 6e73          }, trans
+00018330: 6163 7469 6f6e 735b 695d 2929 0a20 2020  actions[i])).   
+00018340: 2020 2020 2020 2020 2072 6573 756c 742e           result.
+00018350: 6170 7065 6e64 2874 7261 6e73 6163 7469  append(transacti
+00018360: 6f6e 290a 2020 2020 2020 2020 7265 7475  on).        retu
+00018370: 726e 2073 656c 662e 6669 6c74 6572 5f62  rn self.filter_b
+00018380: 795f 6375 7272 656e 6379 5f73 696e 6365  y_currency_since
+00018390: 5f6c 696d 6974 2872 6573 756c 742c 2063  _limit(result, c
+000183a0: 6f64 652c 2073 696e 6365 2c20 6c69 6d69  ode, since, limi
+000183b0: 7429 0a0a 2020 2020 6173 796e 6320 6465  t)..    async de
+000183c0: 6620 6665 7463 685f 6465 706f 7369 7473  f fetch_deposits
+000183d0: 2873 656c 662c 2063 6f64 653a 2053 7472  (self, code: Str
+000183e0: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
+000183f0: 496e 7420 3d20 4e6f 6e65 2c20 6c69 6d69  Int = None, limi
+00018400: 743a 2049 6e74 203d 204e 6f6e 652c 2070  t: Int = None, p
+00018410: 6172 616d 733d 7b7d 2920 2d3e 204c 6973  arams={}) -> Lis
+00018420: 745b 5472 616e 7361 6374 696f 6e5d 3a0a  t[Transaction]:.
+00018430: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00018440: 2020 2020 6665 7463 6820 616c 6c20 6465      fetch all de
+00018450: 706f 7369 7473 206d 6164 6520 746f 2061  posits made to a
+00018460: 6e20 6163 636f 756e 740a 2020 2020 2020  n account.      
+00018470: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+00018480: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+00018490: 7265 7374 2f23 7461 672f 4675 6e64 696e  rest/#tag/Fundin
+000184a0: 672f 6f70 6572 6174 696f 6e2f 6765 7453  g/operation/getS
+000184b0: 7461 7475 7352 6563 656e 7444 6570 6f73  tatusRecentDepos
+000184c0: 6974 730a 2020 2020 2020 2020 3a70 6172  its.        :par
+000184d0: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+000184e0: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+000184f0: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00018500: 6d20 696e 7420 5b73 696e 6365 5d3a 2074  m int [since]: t
+00018510: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00018520: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+00018530: 6465 706f 7369 7473 2066 6f72 0a20 2020  deposits for.   
+00018540: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
+00018550: 5b6c 696d 6974 5d3a 2074 6865 206d 6178  [limit]: the max
+00018560: 696d 756d 206e 756d 6265 7220 6f66 2064  imum number of d
+00018570: 6570 6f73 6974 7320 7374 7275 6374 7572  eposits structur
+00018580: 6573 2074 6f20 7265 7472 6965 7665 0a20  es to retrieve. 
+00018590: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+000185a0: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
+000185b0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+000185c0: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
+000185d0: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
+000185e0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+000185f0: 7572 6e73 2064 6963 745b 5d3a 2061 206c  urns dict[]: a l
+00018600: 6973 7420 6f66 2060 7472 616e 7361 6374  ist of `transact
+00018610: 696f 6e20 7374 7275 6374 7572 6573 203c  ion structures <
+00018620: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+00018630: 742e 636f 6d2f 232f 3f69 643d 7472 616e  t.com/#/?id=tran
+00018640: 7361 6374 696f 6e2d 7374 7275 6374 7572  saction-structur
+00018650: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00018660: 2020 2020 2020 2020 2320 6874 7470 733a          # https:
+00018670: 2f2f 7777 772e 6b72 616b 656e 2e63 6f6d  //www.kraken.com
+00018680: 2f65 6e2d 7573 2f68 656c 702f 6170 6923  /en-us/help/api#
+00018690: 6465 706f 7369 742d 7374 6174 7573 0a20  deposit-status. 
+000186a0: 2020 2020 2020 2069 6620 636f 6465 2069         if code i
+000186b0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000186c0: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+000186d0: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+000186e0: 2e69 6420 2b20 2720 6665 7463 6844 6570  .id + ' fetchDep
+000186f0: 6f73 6974 7328 2920 7265 7175 6972 6573  osits() requires
+00018700: 2061 2063 7572 7265 6e63 7920 636f 6465   a currency code
+00018710: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
+00018720: 2020 2020 6177 6169 7420 7365 6c66 2e6c      await self.l
+00018730: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+00018740: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
+00018750: 2073 656c 662e 6375 7272 656e 6379 2863   self.currency(c
+00018760: 6f64 6529 0a20 2020 2020 2020 2072 6571  ode).        req
+00018770: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00018780: 2020 2020 2027 6173 7365 7427 3a20 6375       'asset': cu
+00018790: 7272 656e 6379 5b27 6964 275d 2c0a 2020  rrency['id'],.  
+000187a0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+000187b0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+000187c0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+000187d0: 2020 7265 7175 6573 745b 2773 7461 7274    request['start
+000187e0: 275d 203d 2073 696e 6365 0a20 2020 2020  '] = since.     
+000187f0: 2020 2072 6573 706f 6e73 6520 3d20 6177     response = aw
+00018800: 6169 7420 7365 6c66 2e70 7269 7661 7465  ait self.private
+00018810: 506f 7374 4465 706f 7369 7453 7461 7475  PostDepositStatu
+00018820: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
+00018830: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00018840: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00018850: 2020 2320 2020 2020 7b20 6572 726f 723a    #     { error:
+00018860: 205b 5d2c 0a20 2020 2020 2020 2023 2020   [],.        #  
+00018870: 2020 2020 2022 7265 7375 6c74 223a 205b       "result": [
+00018880: 7b22 6d65 7468 6f64 223a 2022 4574 6865  {"method": "Ethe
+00018890: 7228 4865 7829 222c 0a20 2020 2020 2020  r(Hex)",.       
+000188a0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000188b0: 2020 2020 2020 2022 6163 6c61 7373 223a         "aclass":
+000188c0: 2022 6375 7272 656e 6379 222c 0a20 2020   "currency",.   
+000188d0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000188e0: 2020 2020 2020 2020 2020 2020 2261 7373              "ass
+000188f0: 6574 223a 2022 5845 5448 222c 0a20 2020  et": "XETH",.   
+00018900: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00018910: 2020 2020 2020 2020 2020 2020 2272 6566              "ref
+00018920: 6964 223a 2022 5132 4341 4e4b 4c2d 4c42  id": "Q2CANKL-LB
+00018930: 4656 4545 2d55 3459 3257 5122 2c0a 2020  FVEE-U4Y2WQ",.  
+00018940: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00018950: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00018960: 7869 6422 3a20 2230 7835 3766 6437 3034  xid": "0x57fd704
+00018970: 6461 6231 6137 3363 3230 6532 3463 3836  dab1a73c20e24c86
+00018980: 3936 3039 3962 3639 3564 3539 3639 3234  96099b695d596924
+00018990: 6234 3031 6232 3631 3531 3363 6664 6162  b401b261513cfdab
+000189a0: 3233 e280 a622 2c0a 2020 2020 2020 2020  23...",.        
+000189b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+000189c0: 2020 2020 2020 2020 2269 6e66 6f22 3a20          "info": 
+000189d0: 2230 7836 3135 6639 6261 3761 3935 3735  "0x615f9ba7a9575
+000189e0: 6230 6162 3464 3537 3162 3262 3336 6231  b0ab4d571b2b36b1
+000189f0: 6233 3234 6264 3833 3239 3022 2c0a 2020  b324bd83290",.  
+00018a00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00018a10: 2020 2020 2020 2020 2020 2020 2261 6d6f              "amo
+00018a20: 756e 7422 3a20 2237 2e39 3939 3932 3537  unt": "7.9999257
+00018a30: 3930 3022 2c0a 2020 2020 2020 2020 2320  900",.        # 
 00018a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018a50: 2022 616d 6f75 6e74 223a 2022 372e 3939   "amount": "7.99
-00018a60: 3939 3235 3739 3030 222c 0a20 2020 2020  99257900",.     
-00018a70: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00018a80: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
-00018a90: 223a 2022 302e 3030 3030 3030 3030 3030  ": "0.0000000000
-00018aa0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00018a50: 2020 2020 2020 2022 6665 6522 3a20 2230         "fee": "0
+00018a60: 2e30 3030 3030 3030 3030 3022 2c0a 2020  .0000000000",.  
+00018a70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00018a80: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00018a90: 696d 6522 3a20 2031 3532 3932 3233 3231  ime":  152922321
+00018aa0: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
 00018ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018ac0: 2020 2022 7469 6d65 223a 2020 3135 3239     "time":  1529
-00018ad0: 3232 3332 3132 2c0a 2020 2020 2020 2020  223212,.        
-00018ae0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00018af0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
-00018b00: 2253 7563 6365 7373 2220 2020 2020 2020  "Success"       
-00018b10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018b40: 7d5d 7d0a 2020 2020 2020 2020 230a 2020  }]}.        #.  
-00018b50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00018b60: 662e 7061 7273 655f 7472 616e 7361 6374  f.parse_transact
-00018b70: 696f 6e73 5f62 795f 7479 7065 2827 6465  ions_by_type('de
-00018b80: 706f 7369 7427 2c20 7265 7370 6f6e 7365  posit', response
-00018b90: 5b27 7265 7375 6c74 275d 2c20 636f 6465  ['result'], code
-00018ba0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-00018bb0: 0a20 2020 2061 7379 6e63 2064 6566 2066  .    async def f
-00018bc0: 6574 6368 5f74 696d 6528 7365 6c66 2c20  etch_time(self, 
-00018bd0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00018be0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00018bf0: 6665 7463 6865 7320 7468 6520 6375 7272  fetches the curr
-00018c00: 656e 7420 696e 7465 6765 7220 7469 6d65  ent integer time
-00018c10: 7374 616d 7020 696e 206d 696c 6c69 7365  stamp in millise
-00018c20: 636f 6e64 7320 6672 6f6d 2074 6865 2065  conds from the e
-00018c30: 7863 6861 6e67 6520 7365 7276 6572 0a20  xchange server. 
-00018c40: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-00018c50: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-00018c60: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-00018c70: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-00018c80: 6f70 6572 6174 696f 6e2f 6765 7453 6572  operation/getSer
-00018c90: 7665 7254 696d 650a 2020 2020 2020 2020  verTime.        
-00018ca0: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
-00018cb0: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
-00018cc0: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00018cd0: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
-00018ce0: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
-00018cf0: 2020 2020 203a 7265 7475 726e 7320 696e       :returns in
-00018d00: 743a 2074 6865 2063 7572 7265 6e74 2069  t: the current i
-00018d10: 6e74 6567 6572 2074 696d 6573 7461 6d70  nteger timestamp
-00018d20: 2069 6e20 6d69 6c6c 6973 6563 6f6e 6473   in milliseconds
-00018d30: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
-00018d40: 6765 2073 6572 7665 720a 2020 2020 2020  ge server.      
-00018d50: 2020 2222 220a 2020 2020 2020 2020 2320    """.        # 
-00018d60: 6874 7470 733a 2f2f 7777 772e 6b72 616b  https://www.krak
-00018d70: 656e 2e63 6f6d 2f65 6e2d 7573 2f66 6561  en.com/en-us/fea
-00018d80: 7475 7265 732f 6170 6923 6765 742d 7365  tures/api#get-se
-00018d90: 7276 6572 2d74 696d 650a 2020 2020 2020  rver-time.      
-00018da0: 2020 7265 7370 6f6e 7365 203d 2061 7761    response = awa
-00018db0: 6974 2073 656c 662e 7075 626c 6963 4765  it self.publicGe
-00018dc0: 7454 696d 6528 7061 7261 6d73 290a 2020  tTime(params).  
-00018dd0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00018de0: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
-00018df0: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
-00018e00: 205b 5d2c 0a20 2020 2020 2020 2023 2020   [],.        #  
-00018e10: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
-00018e20: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00018e30: 2020 2020 2020 2022 756e 6978 7469 6d65         "unixtime
-00018e40: 223a 2031 3539 3135 3032 3837 332c 0a20  ": 1591502873,. 
-00018e50: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00018e60: 2020 2020 2272 6663 3131 3233 223a 2022      "rfc1123": "
-00018e70: 5375 6e2c 2020 3720 4a75 6e20 3230 2030  Sun,  7 Jun 20 0
-00018e80: 343a 3037 3a35 3320 2b30 3030 3022 0a20  4:07:53 +0000". 
-00018e90: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00018ea0: 7d0a 2020 2020 2020 2020 2320 2020 207d  }.        #    }
-00018eb0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00018ec0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-00018ed0: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-00018ee0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00018ef0: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
-00018f00: 726e 2073 656c 662e 7361 6665 5f74 696d  rn self.safe_tim
-00018f10: 6573 7461 6d70 2872 6573 756c 742c 2027  estamp(result, '
-00018f20: 756e 6978 7469 6d65 2729 0a0a 2020 2020  unixtime')..    
-00018f30: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
-00018f40: 7769 7468 6472 6177 616c 7328 7365 6c66  withdrawals(self
-00018f50: 2c20 636f 6465 3a20 5374 7220 3d20 4e6f  , code: Str = No
-00018f60: 6e65 2c20 7369 6e63 653a 2049 6e74 203d  ne, since: Int =
-00018f70: 204e 6f6e 652c 206c 696d 6974 3a20 496e   None, limit: In
-00018f80: 7420 3d20 4e6f 6e65 2c20 7061 7261 6d73  t = None, params
-00018f90: 3d7b 7d29 202d 3e20 4c69 7374 5b54 7261  ={}) -> List[Tra
-00018fa0: 6e73 6163 7469 6f6e 5d3a 0a20 2020 2020  nsaction]:.     
-00018fb0: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-00018fc0: 6574 6368 2061 6c6c 2077 6974 6864 7261  etch all withdra
-00018fd0: 7761 6c73 206d 6164 6520 6672 6f6d 2061  wals made from a
-00018fe0: 6e20 6163 636f 756e 740a 2020 2020 2020  n account.      
-00018ff0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
-00019000: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
-00019010: 7265 7374 2f23 7461 672f 4675 6e64 696e  rest/#tag/Fundin
-00019020: 672f 6f70 6572 6174 696f 6e2f 6765 7453  g/operation/getS
-00019030: 7461 7475 7352 6563 656e 7457 6974 6864  tatusRecentWithd
-00019040: 7261 7761 6c73 0a20 2020 2020 2020 203a  rawals.        :
-00019050: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
-00019060: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
-00019070: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
-00019080: 6172 616d 2069 6e74 205b 7369 6e63 655d  aram int [since]
-00019090: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
-000190a0: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
-000190b0: 6368 2077 6974 6864 7261 7761 6c73 2066  ch withdrawals f
-000190c0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
-000190d0: 6d20 696e 7420 5b6c 696d 6974 5d3a 2074  m int [limit]: t
-000190e0: 6865 206d 6178 696d 756d 206e 756d 6265  he maximum numbe
-000190f0: 7220 6f66 2077 6974 6864 7261 7761 6c73  r of withdrawals
-00019100: 2073 7472 7563 7475 7265 7320 746f 2072   structures to r
-00019110: 6574 7269 6576 650a 2020 2020 2020 2020  etrieve.        
-00019120: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
-00019130: 616d 735d 3a20 6578 7472 6120 7061 7261  ams]: extra para
-00019140: 6d65 7465 7273 2073 7065 6369 6669 6320  meters specific 
-00019150: 746f 2074 6865 2065 7863 6861 6e67 6520  to the exchange 
-00019160: 4150 4920 656e 6470 6f69 6e74 0a20 2020  API endpoint.   
-00019170: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
-00019180: 205b 7061 7261 6d73 2e65 6e64 5d3a 2045   [params.end]: E
-00019190: 6e64 2074 696d 6573 7461 6d70 2c20 7769  nd timestamp, wi
-000191a0: 7468 6472 6177 616c 7320 6372 6561 7465  thdrawals create
-000191b0: 6420 7374 7269 6374 6c79 2061 6674 6572  d strictly after
-000191c0: 2077 696c 6c20 6265 206e 6f74 2062 6520   will be not be 
-000191d0: 696e 636c 7564 6564 2069 6e20 7468 6520  included in the 
-000191e0: 7265 7370 6f6e 7365 0a20 2020 2020 2020  response.       
-000191f0: 203a 7061 7261 6d20 626f 6f6c 6561 6e20   :param boolean 
-00019200: 5b70 6172 616d 732e 7061 6769 6e61 7465  [params.paginate
-00019210: 5d3a 2020 6465 6661 756c 7420 4661 6c73  ]:  default Fals
-00019220: 652c 2077 6865 6e20 5472 7565 2077 696c  e, when True wil
-00019230: 6c20 6175 746f 6d61 7469 6361 6c6c 7920  l automatically 
-00019240: 7061 6769 6e61 7465 2062 7920 6361 6c6c  paginate by call
-00019250: 696e 6720 7365 6c66 2065 6e64 706f 696e  ing self endpoin
-00019260: 7420 6d75 6c74 6970 6c65 2074 696d 6573  t multiple times
-00019270: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00019280: 7320 6469 6374 5b5d 3a20 6120 6c69 7374  s dict[]: a list
-00019290: 206f 6620 6074 7261 6e73 6163 7469 6f6e   of `transaction
-000192a0: 2073 7472 7563 7475 7265 7320 3c68 7474   structures <htt
-000192b0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
-000192c0: 6f6d 2f23 2f3f 6964 3d74 7261 6e73 6163  om/#/?id=transac
-000192d0: 7469 6f6e 2d73 7472 7563 7475 7265 3e60  tion-structure>`
-000192e0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000192f0: 2020 2020 2061 7761 6974 2073 656c 662e       await self.
-00019300: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
-00019310: 2020 2020 2020 2070 6167 696e 6174 6520         paginate 
-00019320: 3d20 4661 6c73 650a 2020 2020 2020 2020  = False.        
-00019330: 7061 6769 6e61 7465 2c20 7061 7261 6d73  paginate, params
-00019340: 203d 2073 656c 662e 6861 6e64 6c65 5f6f   = self.handle_o
-00019350: 7074 696f 6e5f 616e 645f 7061 7261 6d73  ption_and_params
-00019360: 2870 6172 616d 732c 2027 6665 7463 6857  (params, 'fetchW
-00019370: 6974 6864 7261 7761 6c73 272c 2027 7061  ithdrawals', 'pa
-00019380: 6769 6e61 7465 2729 0a20 2020 2020 2020  ginate').       
-00019390: 2069 6620 7061 6769 6e61 7465 3a0a 2020   if paginate:.  
-000193a0: 2020 2020 2020 2020 2020 7061 7261 6d73            params
-000193b0: 5b27 6375 7273 6f72 275d 203d 2054 7275  ['cursor'] = Tru
-000193c0: 650a 2020 2020 2020 2020 2020 2020 7265  e.            re
-000193d0: 7475 726e 2061 7761 6974 2073 656c 662e  turn await self.
-000193e0: 6665 7463 685f 7061 6769 6e61 7465 645f  fetch_paginated_
-000193f0: 6361 6c6c 5f63 7572 736f 7228 2766 6574  call_cursor('fet
-00019400: 6368 5769 7468 6472 6177 616c 7327 2c20  chWithdrawals', 
-00019410: 636f 6465 2c20 7369 6e63 652c 206c 696d  code, since, lim
-00019420: 6974 2c20 7061 7261 6d73 2c20 276e 6578  it, params, 'nex
-00019430: 745f 6375 7273 6f72 272c 2027 6375 7273  t_cursor', 'curs
-00019440: 6f72 2729 0a20 2020 2020 2020 2072 6571  or').        req
-00019450: 7565 7374 203d 207b 7d0a 2020 2020 2020  uest = {}.      
-00019460: 2020 6966 2063 6f64 6520 6973 206e 6f74    if code is not
-00019470: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00019480: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
-00019490: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
-000194a0: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-000194b0: 7175 6573 745b 2761 7373 6574 275d 203d  quest['asset'] =
-000194c0: 2063 7572 7265 6e63 795b 2769 6427 5d0a   currency['id'].
-000194d0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
-000194e0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000194f0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00019500: 745b 2773 696e 6365 275d 203d 2073 7472  t['since'] = str
-00019510: 2873 696e 6365 290a 2020 2020 2020 2020  (since).        
-00019520: 7265 7370 6f6e 7365 203d 2061 7761 6974  response = await
-00019530: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-00019540: 7457 6974 6864 7261 7753 7461 7475 7328  tWithdrawStatus(
-00019550: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00019560: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00019570: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00019580: 2320 7769 7468 206e 6f20 7061 6769 6e61  # with no pagina
-00019590: 7469 6f6e 0a20 2020 2020 2020 2023 2020  tion.        #  
-000195a0: 2020 207b 2065 7272 6f72 3a20 5b5d 2c0a     { error: [],.
-000195b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000195c0: 2272 6573 756c 7422 3a20 5b7b 226d 6574  "result": [{"met
-000195d0: 686f 6422 3a20 2245 7468 6572 222c 0a20  hod": "Ether",. 
-000195e0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000195f0: 2020 2020 2020 2020 2020 2020 2022 6163               "ac
-00019600: 6c61 7373 223a 2022 6375 7272 656e 6379  lass": "currency
-00019610: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019620: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019630: 2020 2261 7373 6574 223a 2022 5845 5448    "asset": "XETH
-00019640: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019660: 2020 2272 6566 6964 223a 2022 4132 4246    "refid": "A2BF
-00019670: 3334 532d 4f37 4c42 4e51 2d55 4534 5934  34S-O7LBNQ-UE4Y4
-00019680: 4f22 2c0a 2020 2020 2020 2020 2320 2020  O",.        #   
-00019690: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000196a0: 2020 2020 2274 7869 6422 3a20 2230 7832      "txid": "0x2
-000196b0: 3938 6338 3363 3762 3039 3034 6438 3430  98c83c7b0904d840
-000196c0: 3065 6634 3365 3163 3965 3232 3837 6235  0ef43e1c9e2287b5
-000196d0: 3138 6637 6561 3364 3833 3838 3232 6435  18f7ea3d838822d5
-000196e0: 3366 3730 3461 3135 3635 6332 3734 6422  3f704a1565c274d"
-000196f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00019700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019710: 2020 2269 6e66 6f22 3a20 2230 7837 6362    "info": "0x7cb
-00019720: 3237 3561 3565 3037 6261 3934 3366 6565  275a5e07ba943fee
-00019730: 3937 3265 3136 3564 3830 6461 6136 3763  972e165d80daa67c
-00019740: 6232 6464 3022 2c0a 2020 2020 2020 2020  b2dd0",.        
-00019750: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019760: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-00019770: 2239 2e39 3935 3030 3030 3030 3022 2c0a  "9.9950000000",.
-00019780: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00018ac0: 2022 7374 6174 7573 223a 2022 5375 6363   "status": "Succ
+00018ad0: 6573 7322 2020 2020 2020 2020 2020 2020  ess"            
+00018ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018b00: 2020 2020 2020 2020 2020 207d 5d7d 0a20             }]}. 
+00018b10: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00018b20: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+00018b30: 7365 5f74 7261 6e73 6163 7469 6f6e 735f  se_transactions_
+00018b40: 6279 5f74 7970 6528 2764 6570 6f73 6974  by_type('deposit
+00018b50: 272c 2072 6573 706f 6e73 655b 2772 6573  ', response['res
+00018b60: 756c 7427 5d2c 2063 6f64 652c 2073 696e  ult'], code, sin
+00018b70: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+00018b80: 6173 796e 6320 6465 6620 6665 7463 685f  async def fetch_
+00018b90: 7469 6d65 2873 656c 662c 2070 6172 616d  time(self, param
+00018ba0: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00018bb0: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00018bc0: 6573 2074 6865 2063 7572 7265 6e74 2069  es the current i
+00018bd0: 6e74 6567 6572 2074 696d 6573 7461 6d70  nteger timestamp
+00018be0: 2069 6e20 6d69 6c6c 6973 6563 6f6e 6473   in milliseconds
+00018bf0: 2066 726f 6d20 7468 6520 6578 6368 616e   from the exchan
+00018c00: 6765 2073 6572 7665 720a 2020 2020 2020  ge server.      
+00018c10: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+00018c20: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+00018c30: 7265 7374 2f23 7461 672f 5370 6f74 2d4d  rest/#tag/Spot-M
+00018c40: 6172 6b65 742d 4461 7461 2f6f 7065 7261  arket-Data/opera
+00018c50: 7469 6f6e 2f67 6574 5365 7276 6572 5469  tion/getServerTi
+00018c60: 6d65 0a20 2020 2020 2020 203a 7061 7261  me.        :para
+00018c70: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
+00018c80: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00018c90: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00018ca0: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
+00018cb0: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00018cc0: 3a72 6574 7572 6e73 2069 6e74 3a20 7468  :returns int: th
+00018cd0: 6520 6375 7272 656e 7420 696e 7465 6765  e current intege
+00018ce0: 7220 7469 6d65 7374 616d 7020 696e 206d  r timestamp in m
+00018cf0: 696c 6c69 7365 636f 6e64 7320 6672 6f6d  illiseconds from
+00018d00: 2074 6865 2065 7863 6861 6e67 6520 7365   the exchange se
+00018d10: 7276 6572 0a20 2020 2020 2020 2022 2222  rver.        """
+00018d20: 0a20 2020 2020 2020 2023 2068 7474 7073  .        # https
+00018d30: 3a2f 2f77 7777 2e6b 7261 6b65 6e2e 636f  ://www.kraken.co
+00018d40: 6d2f 656e 2d75 732f 6665 6174 7572 6573  m/en-us/features
+00018d50: 2f61 7069 2367 6574 2d73 6572 7665 722d  /api#get-server-
+00018d60: 7469 6d65 0a20 2020 2020 2020 2072 6573  time.        res
+00018d70: 706f 6e73 6520 3d20 6177 6169 7420 7365  ponse = await se
+00018d80: 6c66 2e70 7562 6c69 6347 6574 5469 6d65  lf.publicGetTime
+00018d90: 2870 6172 616d 7329 0a20 2020 2020 2020  (params).       
+00018da0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00018db0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00018dc0: 2020 2022 6572 726f 7222 3a20 5b5d 2c0a     "error": [],.
+00018dd0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00018de0: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
+00018df0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00018e00: 2020 2275 6e69 7874 696d 6522 3a20 3135    "unixtime": 15
+00018e10: 3931 3530 3238 3733 2c0a 2020 2020 2020  91502873,.      
+00018e20: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
+00018e30: 7266 6331 3132 3322 3a20 2253 756e 2c20  rfc1123": "Sun, 
+00018e40: 2037 204a 756e 2032 3020 3034 3a30 373a   7 Jun 20 04:07:
+00018e50: 3533 202b 3030 3030 220a 2020 2020 2020  53 +0000".      
+00018e60: 2020 2320 2020 2020 2020 207d 0a20 2020    #        }.   
+00018e70: 2020 2020 2023 2020 2020 7d0a 2020 2020       #    }.    
+00018e80: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00018e90: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+00018ea0: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+00018eb0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+00018ec0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00018ed0: 6c66 2e73 6166 655f 7469 6d65 7374 616d  lf.safe_timestam
+00018ee0: 7028 7265 7375 6c74 2c20 2775 6e69 7874  p(result, 'unixt
+00018ef0: 696d 6527 290a 0a20 2020 2061 7379 6e63  ime')..    async
+00018f00: 2064 6566 2066 6574 6368 5f77 6974 6864   def fetch_withd
+00018f10: 7261 7761 6c73 2873 656c 662c 2063 6f64  rawals(self, cod
+00018f20: 653a 2053 7472 203d 204e 6f6e 652c 2073  e: Str = None, s
+00018f30: 696e 6365 3a20 496e 7420 3d20 4e6f 6e65  ince: Int = None
+00018f40: 2c20 6c69 6d69 743a 2049 6e74 203d 204e  , limit: Int = N
+00018f50: 6f6e 652c 2070 6172 616d 733d 7b7d 2920  one, params={}) 
+00018f60: 2d3e 204c 6973 745b 5472 616e 7361 6374  -> List[Transact
+00018f70: 696f 6e5d 3a0a 2020 2020 2020 2020 2222  ion]:.        ""
+00018f80: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
+00018f90: 616c 6c20 7769 7468 6472 6177 616c 7320  all withdrawals 
+00018fa0: 6d61 6465 2066 726f 6d20 616e 2061 6363  made from an acc
+00018fb0: 6f75 6e74 0a20 2020 2020 2020 203a 7365  ount.        :se
+00018fc0: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
+00018fd0: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
+00018fe0: 2374 6167 2f46 756e 6469 6e67 2f6f 7065  #tag/Funding/ope
+00018ff0: 7261 7469 6f6e 2f67 6574 5374 6174 7573  ration/getStatus
+00019000: 5265 6365 6e74 5769 7468 6472 6177 616c  RecentWithdrawal
+00019010: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
+00019020: 2073 7472 2063 6f64 653a 2075 6e69 6669   str code: unifi
+00019030: 6564 2063 7572 7265 6e63 7920 636f 6465  ed currency code
+00019040: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00019050: 696e 7420 5b73 696e 6365 5d3a 2074 6865  int [since]: the
+00019060: 2065 6172 6c69 6573 7420 7469 6d65 2069   earliest time i
+00019070: 6e20 6d73 2074 6f20 6665 7463 6820 7769  n ms to fetch wi
+00019080: 7468 6472 6177 616c 7320 666f 720a 2020  thdrawals for.  
+00019090: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
+000190a0: 205b 6c69 6d69 745d 3a20 7468 6520 6d61   [limit]: the ma
+000190b0: 7869 6d75 6d20 6e75 6d62 6572 206f 6620  ximum number of 
+000190c0: 7769 7468 6472 6177 616c 7320 7374 7275  withdrawals stru
+000190d0: 6374 7572 6573 2074 6f20 7265 7472 6965  ctures to retrie
+000190e0: 7665 0a20 2020 2020 2020 203a 7061 7261  ve.        :para
+000190f0: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
+00019100: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
+00019110: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
+00019120: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
+00019130: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
+00019140: 3a70 6172 616d 2064 6963 7420 5b70 6172  :param dict [par
+00019150: 616d 732e 656e 645d 3a20 456e 6420 7469  ams.end]: End ti
+00019160: 6d65 7374 616d 702c 2077 6974 6864 7261  mestamp, withdra
+00019170: 7761 6c73 2063 7265 6174 6564 2073 7472  wals created str
+00019180: 6963 746c 7920 6166 7465 7220 7769 6c6c  ictly after will
+00019190: 2062 6520 6e6f 7420 6265 2069 6e63 6c75   be not be inclu
+000191a0: 6465 6420 696e 2074 6865 2072 6573 706f  ded in the respo
+000191b0: 6e73 650a 2020 2020 2020 2020 3a70 6172  nse.        :par
+000191c0: 616d 2062 6f6f 6c65 616e 205b 7061 7261  am boolean [para
+000191d0: 6d73 2e70 6167 696e 6174 655d 3a20 2064  ms.paginate]:  d
+000191e0: 6566 6175 6c74 2046 616c 7365 2c20 7768  efault False, wh
+000191f0: 656e 2054 7275 6520 7769 6c6c 2061 7574  en True will aut
+00019200: 6f6d 6174 6963 616c 6c79 2070 6167 696e  omatically pagin
+00019210: 6174 6520 6279 2063 616c 6c69 6e67 2073  ate by calling s
+00019220: 656c 6620 656e 6470 6f69 6e74 206d 756c  elf endpoint mul
+00019230: 7469 706c 6520 7469 6d65 730a 2020 2020  tiple times.    
+00019240: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+00019250: 745b 5d3a 2061 206c 6973 7420 6f66 2060  t[]: a list of `
+00019260: 7472 616e 7361 6374 696f 6e20 7374 7275  transaction stru
+00019270: 6374 7572 6573 203c 6874 7470 733a 2f2f  ctures <https://
+00019280: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
+00019290: 3f69 643d 7472 616e 7361 6374 696f 6e2d  ?id=transaction-
+000192a0: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+000192b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000192c0: 6177 6169 7420 7365 6c66 2e6c 6f61 645f  await self.load_
+000192d0: 6d61 726b 6574 7328 290a 2020 2020 2020  markets().      
+000192e0: 2020 7061 6769 6e61 7465 203d 2046 616c    paginate = Fal
+000192f0: 7365 0a20 2020 2020 2020 2070 6167 696e  se.        pagin
+00019300: 6174 652c 2070 6172 616d 7320 3d20 7365  ate, params = se
+00019310: 6c66 2e68 616e 646c 655f 6f70 7469 6f6e  lf.handle_option
+00019320: 5f61 6e64 5f70 6172 616d 7328 7061 7261  _and_params(para
+00019330: 6d73 2c20 2766 6574 6368 5769 7468 6472  ms, 'fetchWithdr
+00019340: 6177 616c 7327 2c20 2770 6167 696e 6174  awals', 'paginat
+00019350: 6527 290a 2020 2020 2020 2020 6966 2070  e').        if p
+00019360: 6167 696e 6174 653a 0a20 2020 2020 2020  aginate:.       
+00019370: 2020 2020 2070 6172 616d 735b 2763 7572       params['cur
+00019380: 736f 7227 5d20 3d20 5472 7565 0a20 2020  sor'] = True.   
+00019390: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000193a0: 6177 6169 7420 7365 6c66 2e66 6574 6368  await self.fetch
+000193b0: 5f70 6167 696e 6174 6564 5f63 616c 6c5f  _paginated_call_
+000193c0: 6375 7273 6f72 2827 6665 7463 6857 6974  cursor('fetchWit
+000193d0: 6864 7261 7761 6c73 272c 2063 6f64 652c  hdrawals', code,
+000193e0: 2073 696e 6365 2c20 6c69 6d69 742c 2070   since, limit, p
+000193f0: 6172 616d 732c 2027 6e65 7874 5f63 7572  arams, 'next_cur
+00019400: 736f 7227 2c20 2763 7572 736f 7227 290a  sor', 'cursor').
+00019410: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00019420: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
+00019430: 636f 6465 2069 7320 6e6f 7420 4e6f 6e65  code is not None
+00019440: 3a0a 2020 2020 2020 2020 2020 2020 6375  :.            cu
+00019450: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
+00019460: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
+00019470: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00019480: 5b27 6173 7365 7427 5d20 3d20 6375 7272  ['asset'] = curr
+00019490: 656e 6379 5b27 6964 275d 0a20 2020 2020  ency['id'].     
+000194a0: 2020 2069 6620 7369 6e63 6520 6973 206e     if since is n
+000194b0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+000194c0: 2020 2020 2072 6571 7565 7374 5b27 7369       request['si
+000194d0: 6e63 6527 5d20 3d20 7374 7228 7369 6e63  nce'] = str(sinc
+000194e0: 6529 0a20 2020 2020 2020 2072 6573 706f  e).        respo
+000194f0: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
+00019500: 2e70 7269 7661 7465 506f 7374 5769 7468  .privatePostWith
+00019510: 6472 6177 5374 6174 7573 2873 656c 662e  drawStatus(self.
+00019520: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+00019530: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+00019540: 2023 0a20 2020 2020 2020 2023 2077 6974   #.        # wit
+00019550: 6820 6e6f 2070 6167 696e 6174 696f 6e0a  h no pagination.
+00019560: 2020 2020 2020 2020 2320 2020 2020 7b20          #     { 
+00019570: 6572 726f 723a 205b 5d2c 0a20 2020 2020  error: [],.     
+00019580: 2020 2023 2020 2020 2020 2022 7265 7375     #       "resu
+00019590: 6c74 223a 205b 7b22 6d65 7468 6f64 223a  lt": [{"method":
+000195a0: 2022 4574 6865 7222 2c0a 2020 2020 2020   "Ether",.      
+000195b0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000195c0: 2020 2020 2020 2020 2261 636c 6173 7322          "aclass"
+000195d0: 3a20 2263 7572 7265 6e63 7922 2c0a 2020  : "currency",.  
+000195e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000195f0: 2020 2020 2020 2020 2020 2020 2022 6173               "as
+00019600: 7365 7422 3a20 2258 4554 4822 2c0a 2020  set": "XETH",.  
+00019610: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019620: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+00019630: 6669 6422 3a20 2241 3242 4633 3453 2d4f  fid": "A2BF34S-O
+00019640: 374c 424e 512d 5545 3459 344f 222c 0a20  7LBNQ-UE4Y4O",. 
+00019650: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00019660: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019670: 7478 6964 223a 2022 3078 3239 3863 3833  txid": "0x298c83
+00019680: 6337 6230 3930 3464 3834 3030 6566 3433  c7b0904d8400ef43
+00019690: 6531 6339 6532 3238 3762 3531 3866 3765  e1c9e2287b518f7e
+000196a0: 6133 6438 3338 3832 3264 3533 6637 3034  a3d838822d53f704
+000196b0: 6131 3536 3563 3237 3464 222c 0a20 2020  a1565c274d",.   
+000196c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+000196d0: 2020 2020 2020 2020 2020 2020 2022 696e               "in
+000196e0: 666f 223a 2022 3078 3763 6232 3735 6135  fo": "0x7cb275a5
+000196f0: 6530 3762 6139 3433 6665 6539 3732 6531  e07ba943fee972e1
+00019700: 3635 6438 3064 6161 3637 6362 3264 6430  65d80daa67cb2dd0
+00019710: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00019720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019730: 2022 616d 6f75 6e74 223a 2022 392e 3939   "amount": "9.99
+00019740: 3530 3030 3030 3030 222c 0a20 2020 2020  50000000",.     
+00019750: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00019760: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
+00019770: 223a 2022 302e 3030 3530 3030 3030 3030  ": "0.0050000000
+00019780: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 00019790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000197a0: 2022 6665 6522 3a20 2230 2e30 3035 3030   "fee": "0.00500
-000197b0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+000197a0: 2020 2022 7469 6d65 223a 2020 3135 3330     "time":  1530
+000197b0: 3438 3137 3530 2c0a 2020 2020 2020 2020  481750,.        
 000197c0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-000197d0: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-000197e0: 2031 3533 3034 3831 3735 302c 0a20 2020   1530481750,.   
-000197f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00019800: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-00019810: 7573 223a 2022 5375 6363 6573 7322 2020  us": "Success"  
-00019820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019850: 2020 2020 2020 2020 2020 207d 5d7d 0a20             }]}. 
-00019860: 2020 2020 2020 2023 2077 6974 6820 7061         # with pa
-00019870: 6769 6e61 7469 6f6e 0a20 2020 2020 2020  gination.       
-00019880: 2023 2020 2020 7b0a 2020 2020 2020 2020   #    {.        
-00019890: 2320 2020 2020 2020 2022 6572 726f 7222  #        "error"
-000198a0: 3a5b 5d2c 0a20 2020 2020 2020 2023 2020  :[],.        #  
-000198b0: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
-000198c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000198d0: 2020 2020 2022 7769 7468 6472 6177 616c       "withdrawal
-000198e0: 7322 3a5b 0a20 2020 2020 2020 2023 2020  s":[.        #  
-000198f0: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00019900: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019910: 2020 2020 2020 2020 226d 6574 686f 6422          "method"
-00019920: 3a22 5465 7468 6572 2055 5344 2854 5243  :"Tether USD(TRC
-00019930: 3230 2922 2c0a 2020 2020 2020 2020 2320  20)",.        # 
-00019940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019950: 2261 636c 6173 7322 3a22 6375 7272 656e  "aclass":"curren
-00019960: 6379 222c 0a20 2020 2020 2020 2023 2020  cy",.        #  
-00019970: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019980: 6173 7365 7422 3a22 5553 4454 222c 0a20  asset":"USDT",. 
-00019990: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000199a0: 2020 2020 2020 2020 2022 7265 6669 6422           "refid"
-000199b0: 3a22 4253 4e46 5a55 322d 4d45 464e 3447  :"BSNFZU2-MEFN4G
-000199c0: 2d4a 334e 455a 5622 2c0a 2020 2020 2020  -J3NEZV",.      
-000199d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000199e0: 2020 2020 2274 7869 6422 3a22 3163 3761      "txid":"1c7a
-000199f0: 3634 3266 6237 3338 3762 6263 3263 3661  642fb7387bbc2c6a
-00019a00: 3263 3530 3966 6431 6165 3134 3639 3337  2c509fd1ae146937
-00019a10: 6634 6366 3739 3362 3430 3739 6134 6630  f4cf793b4079a4f0
-00019a20: 3731 3565 3361 3032 3631 3561 222c 0a20  715e3a02615a",. 
-00019a30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019a40: 2020 2020 2020 2020 2022 696e 666f 223a           "info":
-00019a50: 2254 516d 6478 5375 4331 3645 6846 6738  "TQmdxSuC16EhFg8
-00019a60: 465a 5774 5967 7266 4652 6f73 6f52 4637  FZWtYgrfFRosoRF7
-00019a70: 6243 7022 2c0a 2020 2020 2020 2020 2320  bCp",.        # 
-00019a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019a90: 2261 6d6f 756e 7422 3a22 3139 3936 2e35  "amount":"1996.5
-00019aa0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-00019ab0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00019ac0: 2020 2020 2266 6565 223a 2232 2e35 3030      "fee":"2.500
-00019ad0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00019ae0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019af0: 2020 2274 696d 6522 3a31 3636 3931 3236    "time":1669126
-00019b00: 3635 372c 0a20 2020 2020 2020 2023 2020  657,.        #  
-00019b10: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019b20: 7374 6174 7573 223a 2253 7563 6365 7373  status":"Success
-00019b30: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019b40: 2020 2020 2020 2020 2020 2020 2022 6b65               "ke
-00019b50: 7922 3a22 706f 6c6f 6e69 6578 222c 0a20  y":"poloniex",. 
-00019b60: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019b70: 2020 2020 2020 2020 2022 6e65 7477 6f72           "networ
-00019b80: 6b22 3a22 5472 6f6e 220a 2020 2020 2020  k":"Tron".      
-00019b90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00019ba0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00019bb0: 2020 2020 2020 2020 2020 2e2e 2e0a 2020            ....  
-00019bc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019bd0: 2020 5d2c 0a20 2020 2020 2020 2023 2020    ],.        #  
-00019be0: 2020 2020 2020 2020 2022 6e65 7874 5f63           "next_c
-00019bf0: 7572 736f 7222 3a22 4867 4141 4141 4141  ursor":"HgAAAAAA
-00019c00: 4141 4247 5646 5253 6433 6b31 4c56 4634  AABGVFRSd3k1LVF4
-00019c10: 5930 4a51 5930 3547 6430 7852 5930 4e78  Y0JQY05Gd0xRY0Nx
-00019c20: 656e 466e 6448 7079 626b 7742 4151 4832  enFndHpybkwBAQH2
-00019c30: 4177 4542 4141 4141 4151 4141 4141 4141  AwEBAAAAAQAAAAAA
-00019c40: 4141 4142 4141 4141 4141 415a 4141 4141  AAABAAAAAAAZAAAA
-00019c50: 4141 4141 4141 3d3d 220a 2020 2020 2020  AAAAAA==".      
-00019c60: 2020 2320 2020 2020 2020 207d 0a20 2020    #        }.   
-00019c70: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00019c80: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00019c90: 6177 5769 7468 6472 6177 616c 7320 3d20  awWithdrawals = 
-00019ca0: 4e6f 6e65 0a20 2020 2020 2020 2072 6573  None.        res
-00019cb0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00019cc0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00019cd0: 2772 6573 756c 7427 290a 2020 2020 2020  'result').      
-00019ce0: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00019cf0: 6e63 6528 7265 7375 6c74 2c20 6c69 7374  nce(result, list
-00019d00: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00019d10: 6177 5769 7468 6472 6177 616c 7320 3d20  awWithdrawals = 
-00019d20: 7365 6c66 2e61 6464 5f70 6167 696e 6174  self.add_paginat
-00019d30: 696f 6e5f 6375 7273 6f72 5f74 6f5f 7265  ion_cursor_to_re
-00019d40: 7375 6c74 2872 6573 756c 7429 0a20 2020  sult(result).   
-00019d50: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00019d60: 2020 2020 2020 2072 6177 5769 7468 6472         rawWithdr
-00019d70: 6177 616c 7320 3d20 7265 7375 6c74 0a20  awals = result. 
-00019d80: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00019d90: 6c66 2e70 6172 7365 5f74 7261 6e73 6163  lf.parse_transac
-00019da0: 7469 6f6e 735f 6279 5f74 7970 6528 2777  tions_by_type('w
-00019db0: 6974 6864 7261 7761 6c27 2c20 7261 7757  ithdrawal', rawW
-00019dc0: 6974 6864 7261 7761 6c73 2c20 636f 6465  ithdrawals, code
-00019dd0: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-00019de0: 0a20 2020 2064 6566 2061 6464 5f70 6167  .    def add_pag
-00019df0: 696e 6174 696f 6e5f 6375 7273 6f72 5f74  ination_cursor_t
-00019e00: 6f5f 7265 7375 6c74 2873 656c 662c 2072  o_result(self, r
-00019e10: 6573 756c 7429 3a0a 2020 2020 2020 2020  esult):.        
-00019e20: 6375 7273 6f72 203d 2073 656c 662e 7361  cursor = self.sa
-00019e30: 6665 5f73 7472 696e 6728 7265 7375 6c74  fe_string(result
-00019e40: 2c20 276e 6578 745f 6375 7273 6f72 2729  , 'next_cursor')
-00019e50: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-00019e60: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00019e70: 7265 7375 6c74 2c20 2777 6974 6864 7261  result, 'withdra
-00019e80: 7761 6c73 2729 0a20 2020 2020 2020 2064  wals').        d
-00019e90: 6174 614c 656e 6774 6820 3d20 6c65 6e28  ataLength = len(
-00019ea0: 6461 7461 290a 2020 2020 2020 2020 6966  data).        if
-00019eb0: 2063 7572 736f 7220 6973 206e 6f74 204e   cursor is not N
-00019ec0: 6f6e 6520 616e 6420 6461 7461 4c65 6e67  one and dataLeng
-00019ed0: 7468 203e 2030 3a0a 2020 2020 2020 2020  th > 0:.        
-00019ee0: 2020 2020 6c61 7374 203d 2064 6174 615b      last = data[
-00019ef0: 6461 7461 4c65 6e67 7468 202d 2031 5d0a  dataLength - 1].
-00019f00: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-00019f10: 5b27 6e65 7874 5f63 7572 736f 7227 5d20  ['next_cursor'] 
-00019f20: 3d20 6375 7273 6f72 0a20 2020 2020 2020  = cursor.       
-00019f30: 2020 2020 2064 6174 615b 6461 7461 4c65       data[dataLe
-00019f40: 6e67 7468 202d 2031 5d20 3d20 6c61 7374  ngth - 1] = last
-00019f50: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00019f60: 6461 7461 0a0a 2020 2020 6173 796e 6320  data..    async 
-00019f70: 6465 6620 6372 6561 7465 5f64 6570 6f73  def create_depos
-00019f80: 6974 5f61 6464 7265 7373 2873 656c 662c  it_address(self,
-00019f90: 2063 6f64 653a 2073 7472 2c20 7061 7261   code: str, para
-00019fa0: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
-00019fb0: 2222 220a 2020 2020 2020 2020 6372 6561  """.        crea
-00019fc0: 7465 2061 2063 7572 7265 6e63 7920 6465  te a currency de
-00019fd0: 706f 7369 7420 6164 6472 6573 730a 2020  posit address.  
-00019fe0: 2020 2020 2020 3a73 6565 3a20 6874 7470        :see: http
-00019ff0: 733a 2f2f 646f 6373 2e6b 7261 6b65 6e2e  s://docs.kraken.
-0001a000: 636f 6d2f 7265 7374 2f23 7461 672f 4675  com/rest/#tag/Fu
-0001a010: 6e64 696e 672f 6f70 6572 6174 696f 6e2f  nding/operation/
-0001a020: 6765 7444 6570 6f73 6974 4164 6472 6573  getDepositAddres
-0001a030: 7365 730a 2020 2020 2020 2020 3a70 6172  ses.        :par
-0001a040: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
-0001a050: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
-0001a060: 6465 206f 6620 7468 6520 6375 7272 656e  de of the curren
-0001a070: 6379 2066 6f72 2074 6865 2064 6570 6f73  cy for the depos
-0001a080: 6974 2061 6464 7265 7373 0a20 2020 2020  it address.     
-0001a090: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
-0001a0a0: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
-0001a0b0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-0001a0c0: 6963 2074 6f20 7468 6520 6578 6368 616e  ic to the exchan
-0001a0d0: 6765 2041 5049 2065 6e64 706f 696e 740a  ge API endpoint.
-0001a0e0: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0001a0f0: 2064 6963 743a 2061 6e20 6061 6464 7265   dict: an `addre
-0001a100: 7373 2073 7472 7563 7475 7265 203c 6874  ss structure <ht
-0001a110: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-0001a120: 636f 6d2f 232f 3f69 643d 6164 6472 6573  com/#/?id=addres
-0001a130: 732d 7374 7275 6374 7572 653e 600a 2020  s-structure>`.  
-0001a140: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0001a150: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-0001a160: 2020 2020 2020 2020 2020 276e 6577 273a            'new':
-0001a170: 2027 7472 7565 272c 0a20 2020 2020 2020   'true',.       
-0001a180: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
-0001a190: 6e20 6177 6169 7420 7365 6c66 2e66 6574  n await self.fet
-0001a1a0: 6368 5f64 6570 6f73 6974 5f61 6464 7265  ch_deposit_addre
-0001a1b0: 7373 2863 6f64 652c 2073 656c 662e 6578  ss(code, self.ex
-0001a1c0: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-0001a1d0: 7261 6d73 2929 0a0a 2020 2020 6173 796e  rams))..    asyn
-0001a1e0: 6320 6465 6620 6665 7463 685f 6465 706f  c def fetch_depo
-0001a1f0: 7369 745f 6d65 7468 6f64 7328 7365 6c66  sit_methods(self
-0001a200: 2c20 636f 6465 3a20 7374 722c 2070 6172  , code: str, par
-0001a210: 616d 733d 7b7d 293a 0a20 2020 2020 2020  ams={}):.       
-0001a220: 2022 2222 0a20 2020 2020 2020 2066 6574   """.        fet
-0001a230: 6368 2064 6570 6f73 6974 206d 6574 686f  ch deposit metho
-0001a240: 6473 2066 6f72 2061 2063 7572 7265 6e63  ds for a currenc
-0001a250: 7920 6173 736f 6369 6174 6564 2077 6974  y associated wit
-0001a260: 6820 7365 6c66 2061 6363 6f75 6e74 0a20  h self account. 
-0001a270: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-0001a280: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-0001a290: 2e63 6f6d 2f72 6573 742f 2374 6167 2f46  .com/rest/#tag/F
-0001a2a0: 756e 6469 6e67 2f6f 7065 7261 7469 6f6e  unding/operation
-0001a2b0: 2f67 6574 4465 706f 7369 744d 6574 686f  /getDepositMetho
-0001a2c0: 6473 0a20 2020 2020 2020 203a 7061 7261  ds.        :para
-0001a2d0: 6d20 7374 7220 636f 6465 3a20 756e 6966  m str code: unif
-0001a2e0: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
-0001a2f0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-0001a300: 2064 6963 7420 5b70 6172 616d 735d 3a20   dict [params]: 
-0001a310: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-0001a320: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-0001a330: 206b 7261 6b65 6e20 6170 6920 656e 6470   kraken api endp
-0001a340: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-0001a350: 7475 726e 7320 6469 6374 3a20 6f66 2064  turns dict: of d
-0001a360: 6570 6f73 6974 206d 6574 686f 6473 0a20  eposit methods. 
-0001a370: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001a380: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0001a390: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0001a3a0: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-0001a3b0: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-0001a3c0: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
-0001a3d0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0001a3e0: 2020 2020 2761 7373 6574 273a 2063 7572      'asset': cur
-0001a3f0: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-0001a400: 2020 2020 207d 0a20 2020 2020 2020 2072       }.        r
-0001a410: 6573 706f 6e73 6520 3d20 6177 6169 7420  esponse = await 
-0001a420: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
-0001a430: 4465 706f 7369 744d 6574 686f 6473 2873  DepositMethods(s
-0001a440: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-0001a450: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-0001a460: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0001a470: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0001a480: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
-0001a490: 3a5b 5d2c 0a20 2020 2020 2020 2023 2020  :[],.        #  
-0001a4a0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0001a4b0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0001a4c0: 2020 2020 2020 2020 7b22 6d65 7468 6f64          {"method
-0001a4d0: 223a 2245 7468 6572 2848 6578 2922 2c22  ":"Ether(Hex)","
-0001a4e0: 6c69 6d69 7422 3a66 616c 7365 2c22 6765  limit":false,"ge
-0001a4f0: 6e2d 6164 6472 6573 7322 3a74 7275 657d  n-address":true}
-0001a500: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0001a510: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
-0001a520: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0001a530: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0001a540: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001a550: 2022 6572 726f 7222 3a5b 5d2c 0a20 2020   "error":[],.   
-0001a560: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0001a570: 7265 7375 6c74 223a 5b0a 2020 2020 2020  result":[.      
-0001a580: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001a590: 7b22 6d65 7468 6f64 223a 2254 6574 6865  {"method":"Tethe
-0001a5a0: 7220 5553 4428 4552 4332 3029 222c 226c  r USD(ERC20)","l
-0001a5b0: 696d 6974 223a 6661 6c73 652c 2261 6464  imit":false,"add
-0001a5c0: 7265 7373 2d73 6574 7570 2d66 6565 223a  ress-setup-fee":
-0001a5d0: 2230 2e30 3030 3030 3030 3022 2c22 6765  "0.00000000","ge
-0001a5e0: 6e2d 6164 6472 6573 7322 3a74 7275 657d  n-address":true}
-0001a5f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0001a600: 2020 2020 2020 2020 7b22 6d65 7468 6f64          {"method
-0001a610: 223a 2254 6574 6865 7220 5553 4428 5452  ":"Tether USD(TR
-0001a620: 4332 3029 222c 226c 696d 6974 223a 6661  C20)","limit":fa
-0001a630: 6c73 652c 2261 6464 7265 7373 2d73 6574  lse,"address-set
-0001a640: 7570 2d66 6565 223a 2230 2e30 3030 3030  up-fee":"0.00000
-0001a650: 3030 3022 2c22 6765 6e2d 6164 6472 6573  000","gen-addres
-0001a660: 7322 3a74 7275 657d 0a20 2020 2020 2020  s":true}.       
-0001a670: 2023 2020 2020 2020 2020 205d 0a20 2020   #         ].   
-0001a680: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0001a690: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0001a6a0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0001a6b0: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
-0001a6c0: 3a5b 5d2c 0a20 2020 2020 2020 2023 2020  :[],.        #  
-0001a6d0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0001a6e0: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0001a6f0: 2020 2020 2020 2020 7b22 6d65 7468 6f64          {"method
-0001a700: 223a 2242 6974 636f 696e 222c 226c 696d  ":"Bitcoin","lim
-0001a710: 6974 223a 6661 6c73 652c 2266 6565 223a  it":false,"fee":
-0001a720: 2230 2e30 3030 3030 3030 3030 3022 2c22  "0.0000000000","
-0001a730: 6765 6e2d 6164 6472 6573 7322 3a74 7275  gen-address":tru
-0001a740: 657d 0a20 2020 2020 2020 2023 2020 2020  e}.        #    
-0001a750: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-0001a760: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0001a770: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001a780: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0001a790: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
-0001a7a0: 7427 290a 0a20 2020 2061 7379 6e63 2064  t')..    async d
-0001a7b0: 6566 2066 6574 6368 5f64 6570 6f73 6974  ef fetch_deposit
-0001a7c0: 5f61 6464 7265 7373 2873 656c 662c 2063  _address(self, c
-0001a7d0: 6f64 653a 2073 7472 2c20 7061 7261 6d73  ode: str, params
-0001a7e0: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-0001a7f0: 220a 2020 2020 2020 2020 6665 7463 6820  ".        fetch 
-0001a800: 7468 6520 6465 706f 7369 7420 6164 6472  the deposit addr
-0001a810: 6573 7320 666f 7220 6120 6375 7272 656e  ess for a curren
-0001a820: 6379 2061 7373 6f63 6961 7465 6420 7769  cy associated wi
-0001a830: 7468 2073 656c 6620 6163 636f 756e 740a  th self account.
-0001a840: 2020 2020 2020 2020 3a73 6565 3a20 6874          :see: ht
-0001a850: 7470 733a 2f2f 646f 6373 2e6b 7261 6b65  tps://docs.krake
-0001a860: 6e2e 636f 6d2f 7265 7374 2f23 7461 672f  n.com/rest/#tag/
-0001a870: 4675 6e64 696e 672f 6f70 6572 6174 696f  Funding/operatio
-0001a880: 6e2f 6765 7444 6570 6f73 6974 4164 6472  n/getDepositAddr
-0001a890: 6573 7365 730a 2020 2020 2020 2020 3a70  esses.        :p
-0001a8a0: 6172 616d 2073 7472 2063 6f64 653a 2075  aram str code: u
-0001a8b0: 6e69 6669 6564 2063 7572 7265 6e63 7920  nified currency 
-0001a8c0: 636f 6465 0a20 2020 2020 2020 203a 7061  code.        :pa
-0001a8d0: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
-0001a8e0: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
-0001a8f0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-0001a900: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
-0001a910: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-0001a920: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-0001a930: 2061 6e20 6061 6464 7265 7373 2073 7472   an `address str
-0001a940: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
-0001a950: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0001a960: 3f69 643d 6164 6472 6573 732d 7374 7275  ?id=address-stru
-0001a970: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-0001a980: 2222 220a 2020 2020 2020 2020 6177 6169  """.        awai
-0001a990: 7420 7365 6c66 2e6c 6f61 645f 6d61 726b  t self.load_mark
-0001a9a0: 6574 7328 290a 2020 2020 2020 2020 6375  ets().        cu
-0001a9b0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0001a9c0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0001a9d0: 2020 2020 206e 6574 776f 726b 203d 2073       network = s
-0001a9e0: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-0001a9f0: 7570 7065 7228 7061 7261 6d73 2c20 276e  upper(params, 'n
-0001aa00: 6574 776f 726b 2729 0a20 2020 2020 2020  etwork').       
-0001aa10: 206e 6574 776f 726b 7320 3d20 7365 6c66   networks = self
-0001aa20: 2e73 6166 655f 7661 6c75 6528 7365 6c66  .safe_value(self
-0001aa30: 2e6f 7074 696f 6e73 2c20 276e 6574 776f  .options, 'netwo
-0001aa40: 726b 7327 2c20 7b7d 290a 2020 2020 2020  rks', {}).      
-0001aa50: 2020 6e65 7477 6f72 6b20 3d20 7365 6c66    network = self
-0001aa60: 2e73 6166 655f 7374 7269 6e67 286e 6574  .safe_string(net
-0001aa70: 776f 726b 732c 206e 6574 776f 726b 2c20  works, network, 
-0001aa80: 6e65 7477 6f72 6b29 2020 2320 7375 7070  network)  # supp
-0001aa90: 6f72 7420 4554 4820 3e20 4552 4332 3020  ort ETH > ERC20 
-0001aaa0: 616c 6961 7365 730a 2020 2020 2020 2020  aliases.        
-0001aab0: 7061 7261 6d73 203d 2073 656c 662e 6f6d  params = self.om
-0001aac0: 6974 2870 6172 616d 732c 2027 6e65 7477  it(params, 'netw
-0001aad0: 6f72 6b27 290a 2020 2020 2020 2020 6966  ork').        if
-0001aae0: 2028 636f 6465 203d 3d20 2755 5344 5427   (code == 'USDT'
-0001aaf0: 2920 616e 6420 286e 6574 776f 726b 203d  ) and (network =
-0001ab00: 3d20 2754 5243 3230 2729 3a0a 2020 2020  = 'TRC20'):.    
-0001ab10: 2020 2020 2020 2020 636f 6465 203d 2063          code = c
-0001ab20: 6f64 6520 2b20 272d 2720 2b20 6e65 7477  ode + '-' + netw
-0001ab30: 6f72 6b0a 2020 2020 2020 2020 6465 6661  ork.        defa
-0001ab40: 756c 7444 6570 6f73 6974 4d65 7468 6f64  ultDepositMethod
-0001ab50: 7320 3d20 7365 6c66 2e73 6166 655f 7661  s = self.safe_va
-0001ab60: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
-0001ab70: 2c20 2764 6570 6f73 6974 4d65 7468 6f64  , 'depositMethod
-0001ab80: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
-0001ab90: 6465 6661 756c 7444 6570 6f73 6974 4d65  defaultDepositMe
-0001aba0: 7468 6f64 203d 2073 656c 662e 7361 6665  thod = self.safe
-0001abb0: 5f73 7472 696e 6728 6465 6661 756c 7444  _string(defaultD
-0001abc0: 6570 6f73 6974 4d65 7468 6f64 732c 2063  epositMethods, c
-0001abd0: 6f64 6529 0a20 2020 2020 2020 2064 6570  ode).        dep
-0001abe0: 6f73 6974 4d65 7468 6f64 203d 2073 656c  ositMethod = sel
-0001abf0: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
-0001ac00: 7261 6d73 2c20 276d 6574 686f 6427 2c20  rams, 'method', 
-0001ac10: 6465 6661 756c 7444 6570 6f73 6974 4d65  defaultDepositMe
-0001ac20: 7468 6f64 290a 2020 2020 2020 2020 2320  thod).        # 
-0001ac30: 6966 2074 6865 2075 7365 7220 6861 7320  if the user has 
-0001ac40: 7370 6563 6966 6965 6420 616e 2065 7863  specified an exc
-0001ac50: 6861 6e67 652d 7370 6563 6966 6963 206d  hange-specific m
-0001ac60: 6574 686f 6420 696e 2070 6172 616d 730a  ethod in params.
-0001ac70: 2020 2020 2020 2020 2320 7765 2070 6173          # we pas
-0001ac80: 7320 6974 2c20 6f74 6865 7277 6973 6520  s it, otherwise 
-0001ac90: 7765 2074 616b 6520 7468 6520 276e 6574  we take the 'net
-0001aca0: 776f 726b 2720 756e 6966 6965 6420 7061  work' unified pa
-0001acb0: 7261 6d0a 2020 2020 2020 2020 6966 2064  ram.        if d
-0001acc0: 6570 6f73 6974 4d65 7468 6f64 2069 7320  epositMethod is 
-0001acd0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0001ace0: 2020 6465 706f 7369 744d 6574 686f 6473    depositMethods
-0001acf0: 203d 2061 7761 6974 2073 656c 662e 6665   = await self.fe
-0001ad00: 7463 685f 6465 706f 7369 745f 6d65 7468  tch_deposit_meth
-0001ad10: 6f64 7328 636f 6465 290a 2020 2020 2020  ods(code).      
-0001ad20: 2020 2020 2020 6966 206e 6574 776f 726b        if network
-0001ad30: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0001ad40: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001ad50: 6669 6e64 2062 6573 7420 6d61 7463 6869  find best matchi
-0001ad60: 6e67 2064 6570 6f73 6974 206d 6574 686f  ng deposit metho
-0001ad70: 642c 206f 7220 6661 6c6c 6261 636b 2074  d, or fallback t
-0001ad80: 6f20 7468 6520 6669 7273 7420 6f6e 650a  o the first one.
-0001ad90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ada0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0001adb0: 2c20 6c65 6e28 6465 706f 7369 744d 6574  , len(depositMet
-0001adc0: 686f 6473 2929 3a0a 2020 2020 2020 2020  hods)):.        
-0001add0: 2020 2020 2020 2020 2020 2020 656e 7472              entr
-0001ade0: 7920 3d20 7365 6c66 2e73 6166 655f 7374  y = self.safe_st
-0001adf0: 7269 6e67 2864 6570 6f73 6974 4d65 7468  ring(depositMeth
-0001ae00: 6f64 735b 695d 2c20 276d 6574 686f 6427  ods[i], 'method'
-0001ae10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ae20: 2020 2020 2020 6966 2065 6e74 7279 2e66        if entry.f
-0001ae30: 696e 6428 6e65 7477 6f72 6b29 203e 3d20  ind(network) >= 
-0001ae40: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-0001ae50: 2020 2020 2020 2020 2020 2064 6570 6f73             depos
-0001ae60: 6974 4d65 7468 6f64 203d 2065 6e74 7279  itMethod = entry
-0001ae70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ae80: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0001ae90: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-0001aea0: 6465 706f 7369 744d 6574 686f 6420 7761  depositMethod wa
-0001aeb0: 7320 6e6f 7420 7370 6563 6966 6965 642c  s not specified,
-0001aec0: 2066 616c 6c62 6163 6b20 746f 2074 6865   fallback to the
-0001aed0: 2066 6972 7374 2061 7661 696c 6162 6c65   first available
-0001aee0: 2064 6570 6f73 6974 206d 6574 686f 640a   deposit method.
-0001aef0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0001af00: 6570 6f73 6974 4d65 7468 6f64 2069 7320  epositMethod is 
-0001af10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0001af20: 2020 2020 2020 6669 7273 7444 6570 6f73        firstDepos
-0001af30: 6974 4d65 7468 6f64 203d 2073 656c 662e  itMethod = self.
-0001af40: 7361 6665 5f76 616c 7565 2864 6570 6f73  safe_value(depos
-0001af50: 6974 4d65 7468 6f64 732c 2030 2c20 7b7d  itMethods, 0, {}
-0001af60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001af70: 2020 6465 706f 7369 744d 6574 686f 6420    depositMethod 
-0001af80: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0001af90: 6e67 2866 6972 7374 4465 706f 7369 744d  ng(firstDepositM
-0001afa0: 6574 686f 642c 2027 6d65 7468 6f64 2729  ethod, 'method')
-0001afb0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0001afc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001afd0: 2027 6173 7365 7427 3a20 6375 7272 656e   'asset': curren
-0001afe0: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
-0001aff0: 2020 2020 2020 276d 6574 686f 6427 3a20        'method': 
-0001b000: 6465 706f 7369 744d 6574 686f 642c 0a20  depositMethod,. 
-0001b010: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0001b020: 2072 6573 706f 6e73 6520 3d20 6177 6169   response = awai
-0001b030: 7420 7365 6c66 2e70 7269 7661 7465 506f  t self.privatePo
-0001b040: 7374 4465 706f 7369 7441 6464 7265 7373  stDepositAddress
-0001b050: 6573 2873 656c 662e 6578 7465 6e64 2872  es(self.extend(r
-0001b060: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0001b070: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0001b080: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0001b090: 2020 2023 2020 2020 2020 2020 2022 6572     #         "er
-0001b0a0: 726f 7222 3a5b 5d2c 0a20 2020 2020 2020  ror":[],.       
-0001b0b0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-0001b0c0: 6c74 223a 5b0a 2020 2020 2020 2020 2320  lt":[.        # 
-0001b0d0: 2020 2020 2020 2020 2020 2020 7b22 6164              {"ad
-0001b0e0: 6472 6573 7322 3a22 3078 3737 6235 3035  dress":"0x77b505
-0001b0f0: 3166 3937 6566 6139 6363 3532 6339 6164  1f97efa9cc52c9ad
-0001b100: 3562 3032 3361 3533 6663 3135 6332 3030  5b023a53fc15c200
-0001b110: 6433 222c 2265 7870 6972 6574 6d22 3a22  d3","expiretm":"
-0001b120: 3022 7d0a 2020 2020 2020 2020 2320 2020  0"}.        #   
-0001b130: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
-0001b140: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-0001b150: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
-0001b160: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0001b170: 7565 2872 6573 706f 6e73 652c 2027 7265  ue(response, 're
-0001b180: 7375 6c74 272c 205b 5d29 0a20 2020 2020  sult', []).     
-0001b190: 2020 2066 6972 7374 5265 7375 6c74 203d     firstResult =
-0001b1a0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-0001b1b0: 2872 6573 756c 742c 2030 2c20 7b7d 290a  (result, 0, {}).
-0001b1c0: 2020 2020 2020 2020 6966 2066 6972 7374          if first
-0001b1d0: 5265 7375 6c74 2069 7320 4e6f 6e65 3a0a  Result is None:.
-0001b1e0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001b1f0: 6520 496e 7661 6c69 6441 6464 7265 7373  e InvalidAddress
-0001b200: 2873 656c 662e 6964 202b 2027 2070 7269  (self.id + ' pri
-0001b210: 7661 7465 506f 7374 4465 706f 7369 7441  vatePostDepositA
-0001b220: 6464 7265 7373 6573 2829 2072 6574 7572  ddresses() retur
-0001b230: 6e65 6420 6e6f 2061 6464 7265 7373 6573  ned no addresses
-0001b240: 2066 6f72 2027 202b 2063 6f64 6529 0a20   for ' + code). 
-0001b250: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0001b260: 6c66 2e70 6172 7365 5f64 6570 6f73 6974  lf.parse_deposit
-0001b270: 5f61 6464 7265 7373 2866 6972 7374 5265  _address(firstRe
-0001b280: 7375 6c74 2c20 6375 7272 656e 6379 290a  sult, currency).
-0001b290: 0a20 2020 2064 6566 2070 6172 7365 5f64  .    def parse_d
-0001b2a0: 6570 6f73 6974 5f61 6464 7265 7373 2873  eposit_address(s
-0001b2b0: 656c 662c 2064 6570 6f73 6974 4164 6472  elf, depositAddr
-0001b2c0: 6573 732c 2063 7572 7265 6e63 793a 2043  ess, currency: C
-0001b2d0: 7572 7265 6e63 7920 3d20 4e6f 6e65 293a  urrency = None):
-0001b2e0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0001b2f0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-0001b300: 2020 2023 2020 2020 2020 2020 2022 6164     #         "ad
-0001b310: 6472 6573 7322 3a22 3078 3737 6235 3035  dress":"0x77b505
-0001b320: 3166 3937 6566 6139 6363 3532 6339 6164  1f97efa9cc52c9ad
-0001b330: 3562 3032 3361 3533 6663 3135 6332 3030  5b023a53fc15c200
-0001b340: 6433 222c 0a20 2020 2020 2020 2023 2020  d3",.        #  
-0001b350: 2020 2020 2020 2022 6578 7069 7265 746d         "expiretm
-0001b360: 223a 2230 220a 2020 2020 2020 2020 2320  ":"0".        # 
-0001b370: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
-0001b380: 2020 2020 2020 2020 6164 6472 6573 7320          address 
-0001b390: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0001b3a0: 6e67 2864 6570 6f73 6974 4164 6472 6573  ng(depositAddres
-0001b3b0: 732c 2027 6164 6472 6573 7327 290a 2020  s, 'address').  
-0001b3c0: 2020 2020 2020 7461 6720 3d20 7365 6c66        tag = self
-0001b3d0: 2e73 6166 655f 7374 7269 6e67 2864 6570  .safe_string(dep
-0001b3e0: 6f73 6974 4164 6472 6573 732c 2027 7461  ositAddress, 'ta
-0001b3f0: 6727 290a 2020 2020 2020 2020 6375 7272  g').        curr
-0001b400: 656e 6379 203d 2073 656c 662e 7361 6665  ency = self.safe
-0001b410: 5f63 7572 7265 6e63 7928 4e6f 6e65 2c20  _currency(None, 
-0001b420: 6375 7272 656e 6379 290a 2020 2020 2020  currency).      
-0001b430: 2020 636f 6465 203d 2063 7572 7265 6e63    code = currenc
-0001b440: 795b 2763 6f64 6527 5d0a 2020 2020 2020  y['code'].      
-0001b450: 2020 7365 6c66 2e63 6865 636b 5f61 6464    self.check_add
-0001b460: 7265 7373 2861 6464 7265 7373 290a 2020  ress(address).  
-0001b470: 2020 2020 2020 7265 7475 726e 207b 0a20        return {. 
-0001b480: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-0001b490: 656e 6379 273a 2063 6f64 652c 0a20 2020  ency': code,.   
-0001b4a0: 2020 2020 2020 2020 2027 6164 6472 6573           'addres
-0001b4b0: 7327 3a20 6164 6472 6573 732c 0a20 2020  s': address,.   
-0001b4c0: 2020 2020 2020 2020 2027 7461 6727 3a20           'tag': 
-0001b4d0: 7461 672c 0a20 2020 2020 2020 2020 2020  tag,.           
-0001b4e0: 2027 6e65 7477 6f72 6b27 3a20 4e6f 6e65   'network': None
-0001b4f0: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-0001b500: 6e66 6f27 3a20 6465 706f 7369 7441 6464  nfo': depositAdd
-0001b510: 7265 7373 2c0a 2020 2020 2020 2020 7d0a  ress,.        }.
-0001b520: 0a20 2020 2061 7379 6e63 2064 6566 2077  .    async def w
-0001b530: 6974 6864 7261 7728 7365 6c66 2c20 636f  ithdraw(self, co
-0001b540: 6465 3a20 7374 722c 2061 6d6f 756e 743a  de: str, amount:
-0001b550: 2066 6c6f 6174 2c20 6164 6472 6573 732c   float, address,
-0001b560: 2074 6167 3d4e 6f6e 652c 2070 6172 616d   tag=None, param
-0001b570: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0001b580: 2222 0a20 2020 2020 2020 206d 616b 6520  "".        make 
-0001b590: 6120 7769 7468 6472 6177 616c 0a20 2020  a withdrawal.   
-0001b5a0: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
-0001b5b0: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
-0001b5c0: 6f6d 2f72 6573 742f 2374 6167 2f46 756e  om/rest/#tag/Fun
-0001b5d0: 6469 6e67 2f6f 7065 7261 7469 6f6e 2f77  ding/operation/w
-0001b5e0: 6974 6864 7261 7746 756e 6473 0a20 2020  ithdrawFunds.   
-0001b5f0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0001b600: 636f 6465 3a20 756e 6966 6965 6420 6375  code: unified cu
-0001b610: 7272 656e 6379 2063 6f64 650a 2020 2020  rrency code.    
-0001b620: 2020 2020 3a70 6172 616d 2066 6c6f 6174      :param float
-0001b630: 2061 6d6f 756e 743a 2074 6865 2061 6d6f   amount: the amo
-0001b640: 756e 7420 746f 2077 6974 6864 7261 770a  unt to withdraw.
-0001b650: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-0001b660: 7472 2061 6464 7265 7373 3a20 7468 6520  tr address: the 
-0001b670: 6164 6472 6573 7320 746f 2077 6974 6864  address to withd
-0001b680: 7261 7720 746f 0a20 2020 2020 2020 203a  raw to.        :
-0001b690: 7061 7261 6d20 7374 7220 7461 673a 0a20  param str tag:. 
-0001b6a0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-0001b6b0: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
-0001b6c0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-0001b6d0: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
-0001b6e0: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
-0001b6f0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-0001b700: 7572 6e73 2064 6963 743a 2061 2060 7472  urns dict: a `tr
-0001b710: 616e 7361 6374 696f 6e20 7374 7275 6374  ansaction struct
-0001b720: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
-0001b730: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-0001b740: 3d74 7261 6e73 6163 7469 6f6e 2d73 7472  =transaction-str
-0001b750: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-0001b760: 2022 2222 0a20 2020 2020 2020 2074 6167   """.        tag
-0001b770: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
-0001b780: 6861 6e64 6c65 5f77 6974 6864 7261 775f  handle_withdraw_
-0001b790: 7461 675f 616e 645f 7061 7261 6d73 2874  tag_and_params(t
-0001b7a0: 6167 2c20 7061 7261 6d73 290a 2020 2020  ag, params).    
-0001b7b0: 2020 2020 7365 6c66 2e63 6865 636b 5f61      self.check_a
-0001b7c0: 6464 7265 7373 2861 6464 7265 7373 290a  ddress(address).
-0001b7d0: 2020 2020 2020 2020 6966 2027 6b65 7927          if 'key'
-0001b7e0: 2069 6e20 7061 7261 6d73 3a0a 2020 2020   in params:.    
-0001b7f0: 2020 2020 2020 2020 6177 6169 7420 7365          await se
-0001b800: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
-0001b810: 290a 2020 2020 2020 2020 2020 2020 6375  ).            cu
-0001b820: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
-0001b830: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
-0001b840: 2020 2020 2020 2020 2072 6571 7565 7374           request
-0001b850: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001b860: 2020 2020 2027 6173 7365 7427 3a20 6375       'asset': cu
-0001b870: 7272 656e 6379 5b27 6964 275d 2c0a 2020  rrency['id'],.  
-0001b880: 2020 2020 2020 2020 2020 2020 2020 2761                'a
-0001b890: 6d6f 756e 7427 3a20 616d 6f75 6e74 2c0a  mount': amount,.
-0001b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b8b0: 2761 6464 7265 7373 273a 2061 6464 7265  'address': addre
-0001b8c0: 7373 2c0a 2020 2020 2020 2020 2020 2020  ss,.            
-0001b8d0: 7d0a 2020 2020 2020 2020 2020 2020 7265  }.            re
-0001b8e0: 7370 6f6e 7365 203d 2061 7761 6974 2073  sponse = await s
-0001b8f0: 656c 662e 7072 6976 6174 6550 6f73 7457  elf.privatePostW
-0001b900: 6974 6864 7261 7728 7365 6c66 2e65 7874  ithdraw(self.ext
-0001b910: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
-0001b920: 616d 7329 290a 2020 2020 2020 2020 2020  ams)).          
-0001b930: 2020 230a 2020 2020 2020 2020 2020 2020    #.            
-0001b940: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0001b950: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0001b960: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
-0001b970: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001b980: 2022 7265 7375 6c74 223a 207b 0a20 2020   "result": {.   
-0001b990: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-0001b9a0: 2020 2020 2020 2022 7265 6669 6422 3a20         "refid": 
-0001b9b0: 2241 4742 534f 3654 2d55 464d 5454 512d  "AGBSO6T-UFMTTQ-
-0001b9c0: 4937 4b47 5336 220a 2020 2020 2020 2020  I7KGS6".        
-0001b9d0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-0001b9e0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0001b9f0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-0001ba00: 230a 2020 2020 2020 2020 2020 2020 7265  #.            re
-0001ba10: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
-0001ba20: 5f64 6963 7428 7265 7370 6f6e 7365 2c20  _dict(response, 
-0001ba30: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-0001ba40: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0001ba50: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-0001ba60: 7361 6374 696f 6e28 7265 7375 6c74 2c20  saction(result, 
-0001ba70: 6375 7272 656e 6379 290a 2020 2020 2020  currency).      
-0001ba80: 2020 7261 6973 6520 4578 6368 616e 6765    raise Exchange
-0001ba90: 4572 726f 7228 7365 6c66 2e69 6420 2b20  Error(self.id + 
-0001baa0: 2220 7769 7468 6472 6177 2829 2072 6571  " withdraw() req
-0001bab0: 7569 7265 7320 6120 276b 6579 2720 7061  uires a 'key' pa
-0001bac0: 7261 6d65 7465 7228 7769 7468 6472 6177  rameter(withdraw
-0001bad0: 616c 206b 6579 206e 616d 652c 2075 7020  al key name, up 
-0001bae0: 6f6e 2079 6f75 7220 6163 636f 756e 7429  on your account)
-0001baf0: 2229 0a0a 2020 2020 6173 796e 6320 6465  ")..    async de
-0001bb00: 6620 6665 7463 685f 706f 7369 7469 6f6e  f fetch_position
-0001bb10: 7328 7365 6c66 2c20 7379 6d62 6f6c 733a  s(self, symbols:
-0001bb20: 2053 7472 696e 6773 203d 204e 6f6e 652c   Strings = None,
-0001bb30: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
-0001bb40: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001bb50: 2066 6574 6368 2061 6c6c 206f 7065 6e20   fetch all open 
-0001bb60: 706f 7369 7469 6f6e 730a 2020 2020 2020  positions.      
-0001bb70: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
-0001bb80: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
-0001bb90: 7265 7374 2f23 7461 672f 4163 636f 756e  rest/#tag/Accoun
-0001bba0: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
-0001bbb0: 2f67 6574 4f70 656e 506f 7369 7469 6f6e  /getOpenPosition
-0001bbc0: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-0001bbd0: 2073 7472 5b5d 7c4e 6f6e 6520 7379 6d62   str[]|None symb
-0001bbe0: 6f6c 733a 206e 6f74 2075 7365 6420 6279  ols: not used by
-0001bbf0: 206b 7261 6b65 6e20 6665 7463 6850 6f73   kraken fetchPos
-0001bc00: 6974 696f 6e73 2829 0a20 2020 2020 2020  itions().       
-0001bc10: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-0001bc20: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-0001bc30: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0001bc40: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-0001bc50: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-0001bc60: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-0001bc70: 6963 745b 5d3a 2061 206c 6973 7420 6f66  ict[]: a list of
-0001bc80: 2060 706f 7369 7469 6f6e 2073 7472 7563   `position struc
-0001bc90: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
-0001bca0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
-0001bcb0: 643d 706f 7369 7469 6f6e 2d73 7472 7563  d=position-struc
-0001bcc0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-0001bcd0: 2222 0a20 2020 2020 2020 2061 7761 6974  "".        await
-0001bce0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0001bcf0: 7473 2829 0a20 2020 2020 2020 2072 6571  ts().        req
-0001bd00: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-0001bd10: 2020 2020 2023 2027 7478 6964 273a 2027       # 'txid': '
-0001bd20: 636f 6d6d 6120 6465 6c69 6d69 7465 6420  comma delimited 
-0001bd30: 6c69 7374 206f 6620 7472 616e 7361 6374  list of transact
-0001bd40: 696f 6e20 6964 7320 746f 2072 6573 7472  ion ids to restr
-0001bd50: 6963 7420 6f75 7470 7574 2074 6f27 2c0a  ict output to',.
-0001bd60: 2020 2020 2020 2020 2020 2020 2320 2764              # 'd
-0001bd70: 6f63 616c 6373 273a 2046 616c 7365 2c20  ocalcs': False, 
-0001bd80: 2023 2077 6865 7468 6572 206f 7220 6e6f   # whether or no
-0001bd90: 7420 746f 2069 6e63 6c75 6465 2070 726f  t to include pro
-0001bda0: 6669 742f 6c6f 7373 2063 616c 6375 6c61  fit/loss calcula
-0001bdb0: 7469 6f6e 730a 2020 2020 2020 2020 2020  tions.          
-0001bdc0: 2020 2320 2763 6f6e 736f 6c69 6461 7469    # 'consolidati
-0001bdd0: 6f6e 273a 2027 6d61 726b 6574 272c 2020  on': 'market',  
-0001bde0: 2320 7768 6174 2074 6f20 636f 6e73 6f6c  # what to consol
-0001bdf0: 6964 6174 6520 7468 6520 706f 7369 7469  idate the positi
-0001be00: 6f6e 7320 6461 7461 2061 726f 756e 642c  ons data around,
-0001be10: 206d 6172 6b65 7420 7769 6c6c 2063 6f6e   market will con
-0001be20: 736f 6c69 6461 7465 2070 6f73 6974 696f  solidate positio
-0001be30: 6e73 2062 6173 6564 206f 6e20 6d61 726b  ns based on mark
-0001be40: 6574 2070 6169 720a 2020 2020 2020 2020  et pair.        
-0001be50: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
-0001be60: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
-0001be70: 7072 6976 6174 6550 6f73 744f 7065 6e50  privatePostOpenP
-0001be80: 6f73 6974 696f 6e73 2873 656c 662e 6578  ositions(self.ex
-0001be90: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
-0001bea0: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
-0001beb0: 0a20 2020 2020 2020 2023 206e 6f20 636f  .        # no co
-0001bec0: 6e73 6f6c 6964 6174 696f 6e0a 2020 2020  nsolidation.    
-0001bed0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0001bee0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0001bef0: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
-0001bf00: 205b 5d2c 0a20 2020 2020 2020 2023 2020   [],.        #  
-0001bf10: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0001bf20: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0001bf30: 2020 2020 2020 2020 2027 5447 5546 4d59           'TGUFMY
-0001bf40: 2d46 4c45 534a 2d56 5949 5833 4a27 3a20  -FLESJ-VYIX3J': 
-0001bf50: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0001bf60: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0001bf70: 6572 7478 6964 223a 2022 4f33 4c52 4e55  ertxid": "O3LRNU
-0001bf80: 2d5a 4b44 4735 2d58 4e43 4446 5222 2c0a  -ZKDG5-XNCDFR",.
-0001bf90: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001bfa0: 2020 2020 2020 2020 2020 2270 6f73 7374            "posst
-0001bfb0: 6174 7573 223a 2022 6f70 656e 222c 0a20  atus": "open",. 
-0001bfc0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001bfd0: 2020 2020 2020 2020 2022 7061 6972 223a           "pair":
-0001bfe0: 2022 4554 4855 5344 5422 2c0a 2020 2020   "ETHUSDT",.    
-0001bff0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0001c000: 2020 2020 2020 2274 696d 6522 3a20 2031        "time":  1
-0001c010: 3631 3135 3537 3233 312e 3435 3834 2c0a  611557231.4584,.
-0001c020: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001c030: 2020 2020 2020 2020 2020 2274 7970 6522            "type"
-0001c040: 3a20 2262 7579 222c 0a20 2020 2020 2020  : "buy",.       
-0001c050: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001c060: 2020 2022 6f72 6465 7274 7970 6522 3a20     "ordertype": 
-0001c070: 226d 6172 6b65 7422 2c0a 2020 2020 2020  "market",.      
-0001c080: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001c090: 2020 2020 2263 6f73 7422 3a20 2232 382e      "cost": "28.
-0001c0a0: 3439 3830 3022 2c0a 2020 2020 2020 2020  49800",.        
-0001c0b0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0001c0c0: 2020 2266 6565 223a 2022 302e 3037 3937    "fee": "0.0797
-0001c0d0: 3922 2c0a 2020 2020 2020 2020 2320 2020  9",.        #   
-0001c0e0: 2020 2020 2020 2020 2020 2020 2020 2276                "v
-0001c0f0: 6f6c 223a 2022 302e 3032 3030 3030 3030  ol": "0.02000000
-0001c100: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0001c110: 2020 2020 2020 2020 2020 2020 2022 766f               "vo
-0001c120: 6c5f 636c 6f73 6564 223a 2022 302e 3030  l_closed": "0.00
-0001c130: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0001c140: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001c150: 2020 2022 6d61 7267 696e 223a 2022 3134     "margin": "14
-0001c160: 2e32 3439 3030 222c 0a20 2020 2020 2020  .24900",.       
-0001c170: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001c180: 2020 2022 7465 726d 7322 3a20 2230 2e30     "terms": "0.0
-0001c190: 3230 3025 2070 6572 2034 2068 6f75 7273  200% per 4 hours
-0001c1a0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0001c1b0: 2020 2020 2020 2020 2020 2020 2022 726f               "ro
-0001c1c0: 6c6c 6f76 6572 746d 223a 2022 3136 3131  llovertm": "1611
-0001c1d0: 3537 3136 3331 222c 0a20 2020 2020 2020  571631",.       
-0001c1e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001c1f0: 2020 2022 6d69 7363 223a 2022 222c 0a20     "misc": "",. 
-0001c200: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001c210: 2020 2020 2020 2020 2022 6f66 6c61 6773           "oflags
-0001c220: 223a 2022 220a 2020 2020 2020 2020 2320  ": "".        # 
-0001c230: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
-0001c240: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001c250: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
-0001c260: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0001c270: 2020 2020 2320 636f 6e73 6f6c 6964 6174      # consolidat
-0001c280: 696f 6e20 6279 206d 6172 6b65 740a 2020  ion by market.  
-0001c290: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0001c2a0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-0001c2b0: 2320 2020 2020 2020 2020 2265 7272 6f72  #         "error
-0001c2c0: 223a 205b 5d2c 0a20 2020 2020 2020 2023  ": [],.        #
-0001c2d0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0001c2e0: 223a 205b 0a20 2020 2020 2020 2023 2020  ": [.        #  
-0001c2f0: 2020 2020 2020 2020 2020 207b 0a20 2020             {.   
-0001c300: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0001c310: 2020 2020 2020 2022 7061 6972 223a 2022         "pair": "
-0001c320: 4554 4855 5344 5422 2c0a 2020 2020 2020  ETHUSDT",.      
-0001c330: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001c340: 2020 2020 2270 6f73 6974 696f 6e73 223a      "positions":
-0001c350: 2022 3122 2c0a 2020 2020 2020 2020 2320   "1",.        # 
-0001c360: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c370: 2274 7970 6522 3a20 2262 7579 222c 0a20  "type": "buy",. 
-0001c380: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001c390: 2020 2020 2020 2020 2022 6c65 7665 7261           "levera
-0001c3a0: 6765 223a 2022 322e 3030 3030 3022 2c0a  ge": "2.00000",.
-0001c3b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001c3c0: 2020 2020 2020 2020 2020 2263 6f73 7422            "cost"
-0001c3d0: 3a20 2232 382e 3439 3830 3022 2c0a 2020  : "28.49800",.  
-0001c3e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001c3f0: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-0001c400: 302e 3037 3937 3922 2c0a 2020 2020 2020  0.07979",.      
-0001c410: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001c420: 2020 2020 2276 6f6c 223a 2022 302e 3032      "vol": "0.02
-0001c430: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0001c440: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001c450: 2020 2022 766f 6c5f 636c 6f73 6564 223a     "vol_closed":
-0001c460: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-0001c470: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001c480: 2020 2020 2020 2020 2022 6d61 7267 696e           "margin
-0001c490: 223a 2022 3134 2e32 3439 3030 220a 2020  ": "14.24900".  
-0001c4a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001c4b0: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0001c4c0: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
-0001c4d0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0001c4e0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0001c4f0: 6c74 203d 2073 656c 662e 7361 6665 5f76  lt = self.safe_v
-0001c500: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
-0001c510: 7265 7375 6c74 2729 0a20 2020 2020 2020  result').       
-0001c520: 2023 2074 6f64 6f20 756e 6966 7920 7061   # todo unify pa
-0001c530: 7273 6550 6f73 6974 696f 6e2f 7061 7273  rsePosition/pars
-0001c540: 6550 6f73 6974 696f 6e73 0a20 2020 2020  ePositions.     
-0001c550: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-0001c560: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-0001c570: 6163 636f 756e 745f 7479 7065 2873 656c  account_type(sel
-0001c580: 662c 2061 6363 6f75 6e74 293a 0a20 2020  f, account):.   
-0001c590: 2020 2020 2061 6363 6f75 6e74 4279 5479       accountByTy
-0001c5a0: 7065 203d 207b 0a20 2020 2020 2020 2020  pe = {.         
-0001c5b0: 2020 2027 7370 6f74 273a 2027 5370 6f74     'spot': 'Spot
-0001c5c0: 2057 616c 6c65 7427 2c0a 2020 2020 2020   Wallet',.      
-0001c5d0: 2020 2020 2020 2773 7761 7027 3a20 2746        'swap': 'F
-0001c5e0: 7574 7572 6573 2057 616c 6c65 7427 2c0a  utures Wallet',.
-0001c5f0: 2020 2020 2020 2020 2020 2020 2766 7574              'fut
-0001c600: 7572 6527 3a20 2746 7574 7572 6573 2057  ure': 'Futures W
-0001c610: 616c 6c65 7427 2c0a 2020 2020 2020 2020  allet',.        
-0001c620: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
-0001c630: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0001c640: 6728 6163 636f 756e 7442 7954 7970 652c  g(accountByType,
-0001c650: 2061 6363 6f75 6e74 2c20 6163 636f 756e   account, accoun
-0001c660: 7429 0a0a 2020 2020 6173 796e 6320 6465  t)..    async de
-0001c670: 6620 7472 616e 7366 6572 5f6f 7574 2873  f transfer_out(s
-0001c680: 656c 662c 2063 6f64 653a 2073 7472 2c20  elf, code: str, 
-0001c690: 616d 6f75 6e74 2c20 7061 7261 6d73 3d7b  amount, params={
-0001c6a0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0001c6b0: 2020 2020 2020 2020 7472 616e 7366 6572          transfer
-0001c6c0: 2066 726f 6d20 7370 6f74 2077 616c 6c65   from spot walle
-0001c6d0: 7420 746f 2066 7574 7572 6573 2077 616c  t to futures wal
-0001c6e0: 6c65 740a 2020 2020 2020 2020 3a73 6565  let.        :see
-0001c6f0: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
-0001c700: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
-0001c710: 7461 672f 5573 6572 2d46 756e 6469 6e67  tag/User-Funding
-0001c720: 2f6f 7065 7261 7469 6f6e 2f77 616c 6c65  /operation/walle
-0001c730: 7454 7261 6e73 6665 720a 2020 2020 2020  tTransfer.      
-0001c740: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
-0001c750: 653a 2055 6e69 6669 6564 2063 7572 7265  e: Unified curre
-0001c760: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
-0001c770: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
-0001c780: 6f75 6e74 3a20 5369 7a65 206f 6620 7468  ount: Size of th
-0001c790: 6520 7472 616e 7366 6572 0a20 2020 2020  e transfer.     
-0001c7a0: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
-0001c7b0: 7061 7261 6d73 5d3a 2045 7863 6861 6e67  params]: Exchang
-0001c7c0: 6520 7370 6563 6966 6963 2070 6172 616d  e specific param
-0001c7d0: 6574 6572 730a 2020 2020 2020 2020 3a72  eters.        :r
-0001c7e0: 6574 7572 6e73 3a20 6120 6074 7261 6e73  eturns: a `trans
-0001c7f0: 6665 7220 7374 7275 6374 7572 6520 3c68  fer structure <h
-0001c800: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-0001c810: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
-0001c820: 6665 722d 7374 7275 6374 7572 653e 600a  fer-structure>`.
-0001c830: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001c840: 2020 2020 7265 7475 726e 2061 7761 6974      return await
-0001c850: 2073 656c 662e 7472 616e 7366 6572 2863   self.transfer(c
-0001c860: 6f64 652c 2061 6d6f 756e 742c 2027 7370  ode, amount, 'sp
-0001c870: 6f74 272c 2027 7377 6170 272c 2070 6172  ot', 'swap', par
-0001c880: 616d 7329 0a0a 2020 2020 6173 796e 6320  ams)..    async 
-0001c890: 6465 6620 7472 616e 7366 6572 2873 656c  def transfer(sel
-0001c8a0: 662c 2063 6f64 653a 2073 7472 2c20 616d  f, code: str, am
-0001c8b0: 6f75 6e74 3a20 666c 6f61 742c 2066 726f  ount: float, fro
-0001c8c0: 6d41 6363 6f75 6e74 3a20 7374 722c 2074  mAccount: str, t
-0001c8d0: 6f41 6363 6f75 6e74 3a20 7374 722c 2070  oAccount: str, p
-0001c8e0: 6172 616d 733d 7b7d 2920 2d3e 2054 7261  arams={}) -> Tra
-0001c8f0: 6e73 6665 7245 6e74 7279 3a0a 2020 2020  nsferEntry:.    
-0001c900: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0001c910: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
-0001c920: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
-0001c930: 7374 2f23 7461 672f 5573 6572 2d46 756e  st/#tag/User-Fun
-0001c940: 6469 6e67 2f6f 7065 7261 7469 6f6e 2f77  ding/operation/w
-0001c950: 616c 6c65 7454 7261 6e73 6665 720a 2020  alletTransfer.  
-0001c960: 2020 2020 2020 7472 616e 7366 6572 7320        transfers 
-0001c970: 6375 7272 656e 6369 6573 2062 6574 7765  currencies betwe
-0001c980: 656e 2073 7562 2d61 6363 6f75 6e74 7328  en sub-accounts(
-0001c990: 6f6e 6c79 2073 706f 742d 3e73 7761 7020  only spot->swap 
-0001c9a0: 6469 7265 6374 696f 6e20 6973 2073 7570  direction is sup
-0001c9b0: 706f 7274 6564 290a 2020 2020 2020 2020  ported).        
-0001c9c0: 3a70 6172 616d 2073 7472 2063 6f64 653a  :param str code:
-0001c9d0: 2055 6e69 6669 6564 2063 7572 7265 6e63   Unified currenc
-0001c9e0: 7920 636f 6465 0a20 2020 2020 2020 203a  y code.        :
-0001c9f0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-0001ca00: 6e74 3a20 5369 7a65 206f 6620 7468 6520  nt: Size of the 
-0001ca10: 7472 616e 7366 6572 0a20 2020 2020 2020  transfer.       
-0001ca20: 203a 7061 7261 6d20 7374 7220 6672 6f6d   :param str from
-0001ca30: 4163 636f 756e 743a 2027 7370 6f74 2720  Account: 'spot' 
-0001ca40: 6f72 2027 5370 6f74 2057 616c 6c65 7427  or 'Spot Wallet'
-0001ca50: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0001ca60: 7374 7220 746f 4163 636f 756e 743a 2027  str toAccount: '
-0001ca70: 7377 6170 2720 6f72 2027 4675 7475 7265  swap' or 'Future
-0001ca80: 7320 5761 6c6c 6574 270a 2020 2020 2020  s Wallet'.      
-0001ca90: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
-0001caa0: 6172 616d 735d 3a20 4578 6368 616e 6765  arams]: Exchange
-0001cab0: 2073 7065 6369 6669 6320 7061 7261 6d65   specific parame
-0001cac0: 7465 7273 0a20 2020 2020 2020 203a 7265  ters.        :re
-0001cad0: 7475 726e 733a 2061 2060 7472 616e 7366  turns: a `transf
-0001cae0: 6572 2073 7472 7563 7475 7265 203c 6874  er structure <ht
-0001caf0: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-0001cb00: 636f 6d2f 232f 3f69 643d 7472 616e 7366  com/#/?id=transf
-0001cb10: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-0001cb20: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001cb30: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
-0001cb40: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-0001cb50: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-0001cb60: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-0001cb70: 6465 290a 2020 2020 2020 2020 6672 6f6d  de).        from
-0001cb80: 4163 636f 756e 7420 3d20 7365 6c66 2e70  Account = self.p
-0001cb90: 6172 7365 5f61 6363 6f75 6e74 5f74 7970  arse_account_typ
-0001cba0: 6528 6672 6f6d 4163 636f 756e 7429 0a20  e(fromAccount). 
-0001cbb0: 2020 2020 2020 2074 6f41 6363 6f75 6e74         toAccount
-0001cbc0: 203d 2073 656c 662e 7061 7273 655f 6163   = self.parse_ac
-0001cbd0: 636f 756e 745f 7479 7065 2874 6f41 6363  count_type(toAcc
-0001cbe0: 6f75 6e74 290a 2020 2020 2020 2020 7265  ount).        re
-0001cbf0: 7175 6573 7420 3d20 7b0a 2020 2020 2020  quest = {.      
-0001cc00: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
-0001cc10: 7365 6c66 2e63 7572 7265 6e63 795f 746f  self.currency_to
-0001cc20: 5f70 7265 6369 7369 6f6e 2863 6f64 652c  _precision(code,
-0001cc30: 2061 6d6f 756e 7429 2c0a 2020 2020 2020   amount),.      
-0001cc40: 2020 2020 2020 2766 726f 6d27 3a20 6672        'from': fr
-0001cc50: 6f6d 4163 636f 756e 742c 0a20 2020 2020  omAccount,.     
-0001cc60: 2020 2020 2020 2027 746f 273a 2074 6f41         'to': toA
-0001cc70: 6363 6f75 6e74 2c0a 2020 2020 2020 2020  ccount,.        
-0001cc80: 2020 2020 2761 7373 6574 273a 2063 7572      'asset': cur
-0001cc90: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-0001cca0: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
-0001ccb0: 6620 6672 6f6d 4163 636f 756e 7420 213d  f fromAccount !=
-0001ccc0: 2027 5370 6f74 2057 616c 6c65 7427 3a0a   'Spot Wallet':.
-0001ccd0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001cce0: 6520 4261 6452 6571 7565 7374 2873 656c  e BadRequest(sel
-0001ccf0: 662e 6964 202b 2027 2074 7261 6e73 6665  f.id + ' transfe
-0001cd00: 7220 6361 6e6e 6f74 2074 7261 6e73 6665  r cannot transfe
-0001cd10: 7220 6672 6f6d 2027 202b 2066 726f 6d41  r from ' + fromA
-0001cd20: 6363 6f75 6e74 202b 2027 2074 6f20 2720  ccount + ' to ' 
-0001cd30: 2b20 746f 4163 636f 756e 7420 2b20 272e  + toAccount + '.
-0001cd40: 2055 7365 206b 7261 6b65 6e66 7574 7572   Use krakenfutur
-0001cd50: 6573 2069 6e73 7465 6164 2074 6f20 7472  es instead to tr
-0001cd60: 616e 7366 6572 2066 726f 6d20 7468 6520  ansfer from the 
-0001cd70: 6675 7475 7265 7320 6163 636f 756e 742e  futures account.
-0001cd80: 2729 0a20 2020 2020 2020 2072 6573 706f  ').        respo
-0001cd90: 6e73 6520 3d20 6177 6169 7420 7365 6c66  nse = await self
-0001cda0: 2e70 7269 7661 7465 506f 7374 5761 6c6c  .privatePostWall
-0001cdb0: 6574 5472 616e 7366 6572 2873 656c 662e  etTransfer(self.
-0001cdc0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-0001cdd0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-0001cde0: 2023 0a20 2020 2020 2020 2023 2020 207b   #.        #   {
-0001cdf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0001ce00: 2022 6572 726f 7222 3a5b 0a20 2020 2020   "error":[.     
-0001ce10: 2020 2023 2020 2020 2020 205d 2c0a 2020     #       ],.  
-0001ce20: 2020 2020 2020 2320 2020 2020 2020 2272        #       "r
-0001ce30: 6573 756c 7422 3a7b 0a20 2020 2020 2020  esult":{.       
-0001ce40: 2023 2020 2020 2020 2020 2020 2272 6566   #          "ref
-0001ce50: 6964 223a 2242 4f49 5553 4946 2d4d 3744  id":"BOIUSIF-M7D
-0001ce60: 4c4d 4e2d 5558 5a33 5035 220a 2020 2020  LMN-UXZ3P5".    
-0001ce70: 2020 2020 2320 2020 2020 2020 7d0a 2020      #       }.  
-0001ce80: 2020 2020 2020 2320 2020 7d0a 2020 2020        #   }.    
-0001ce90: 2020 2020 230a 2020 2020 2020 2020 7472      #.        tr
-0001cea0: 616e 7366 6572 203d 2073 656c 662e 7061  ansfer = self.pa
-0001ceb0: 7273 655f 7472 616e 7366 6572 2872 6573  rse_transfer(res
-0001cec0: 706f 6e73 652c 2063 7572 7265 6e63 7929  ponse, currency)
-0001ced0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001cee0: 7365 6c66 2e65 7874 656e 6428 7472 616e  self.extend(tran
-0001cef0: 7366 6572 2c20 7b0a 2020 2020 2020 2020  sfer, {.        
-0001cf00: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
-0001cf10: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-0001cf20: 2020 2766 726f 6d41 6363 6f75 6e74 273a    'fromAccount':
-0001cf30: 2066 726f 6d41 6363 6f75 6e74 2c0a 2020   fromAccount,.  
-0001cf40: 2020 2020 2020 2020 2020 2774 6f41 6363            'toAcc
-0001cf50: 6f75 6e74 273a 2074 6f41 6363 6f75 6e74  ount': toAccount
-0001cf60: 2c0a 2020 2020 2020 2020 7d29 0a0a 2020  ,.        })..  
-0001cf70: 2020 6465 6620 7061 7273 655f 7472 616e    def parse_tran
-0001cf80: 7366 6572 2873 656c 662c 2074 7261 6e73  sfer(self, trans
-0001cf90: 6665 722c 2063 7572 7265 6e63 793a 2043  fer, currency: C
-0001cfa0: 7572 7265 6e63 7920 3d20 4e6f 6e65 293a  urrency = None):
-0001cfb0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0001cfc0: 2020 2023 2074 7261 6e73 6665 720a 2020     # transfer.  
-0001cfd0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-0001cfe0: 2320 2020 207b 0a20 2020 2020 2020 2023  #    {.        #
-0001cff0: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
-0001d000: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0001d010: 2020 205d 2c0a 2020 2020 2020 2020 2320     ],.        # 
-0001d020: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-0001d030: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-0001d040: 2020 2020 2020 2272 6566 6964 223a 2242        "refid":"B
-0001d050: 4f49 5553 4946 2d4d 3744 4c4d 4e2d 5558  OIUSIF-M7DLMN-UX
-0001d060: 5a33 5035 220a 2020 2020 2020 2020 2320  Z3P5".        # 
-0001d070: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0001d080: 2023 2020 2020 7d0a 2020 2020 2020 2020   #    }.        
-0001d090: 230a 2020 2020 2020 2020 7265 7375 6c74  #.        result
-0001d0a0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
-0001d0b0: 7565 2874 7261 6e73 6665 722c 2027 7265  ue(transfer, 're
-0001d0c0: 7375 6c74 272c 207b 7d29 0a20 2020 2020  sult', {}).     
-0001d0d0: 2020 2072 6566 6964 203d 2073 656c 662e     refid = self.
-0001d0e0: 7361 6665 5f73 7472 696e 6728 7265 7375  safe_string(resu
-0001d0f0: 6c74 2c20 2772 6566 6964 2729 0a20 2020  lt, 'refid').   
-0001d100: 2020 2020 2072 6574 7572 6e20 7b0a 2020       return {.  
-0001d110: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-0001d120: 3a20 7472 616e 7366 6572 2c0a 2020 2020  : transfer,.    
-0001d130: 2020 2020 2020 2020 2769 6427 3a20 7265          'id': re
-0001d140: 6669 642c 0a20 2020 2020 2020 2020 2020  fid,.           
-0001d150: 2027 7469 6d65 7374 616d 7027 3a20 4e6f   'timestamp': No
-0001d160: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-0001d170: 2764 6174 6574 696d 6527 3a20 4e6f 6e65  'datetime': None
-0001d180: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
-0001d190: 7572 7265 6e63 7927 3a20 7365 6c66 2e73  urrency': self.s
-0001d1a0: 6166 655f 7374 7269 6e67 2863 7572 7265  afe_string(curre
-0001d1b0: 6e63 792c 2027 636f 6465 2729 2c0a 2020  ncy, 'code'),.  
-0001d1c0: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
-0001d1d0: 7427 3a20 4e6f 6e65 2c0a 2020 2020 2020  t': None,.      
-0001d1e0: 2020 2020 2020 2766 726f 6d41 6363 6f75        'fromAccou
-0001d1f0: 6e74 273a 204e 6f6e 652c 0a20 2020 2020  nt': None,.     
-0001d200: 2020 2020 2020 2027 746f 4163 636f 756e         'toAccoun
-0001d210: 7427 3a20 4e6f 6e65 2c0a 2020 2020 2020  t': None,.      
-0001d220: 2020 2020 2020 2773 7461 7475 7327 3a20        'status': 
-0001d230: 2773 7563 6573 7327 2c0a 2020 2020 2020  'sucess',.      
-0001d240: 2020 7d0a 0a20 2020 2064 6566 2073 6967    }..    def sig
-0001d250: 6e28 7365 6c66 2c20 7061 7468 2c20 6170  n(self, path, ap
-0001d260: 693d 2770 7562 6c69 6327 2c20 6d65 7468  i='public', meth
-0001d270: 6f64 3d27 4745 5427 2c20 7061 7261 6d73  od='GET', params
-0001d280: 3d7b 7d2c 2068 6561 6465 7273 3d4e 6f6e  ={}, headers=Non
-0001d290: 652c 2062 6f64 793d 4e6f 6e65 293a 0a20  e, body=None):. 
-0001d2a0: 2020 2020 2020 2075 726c 203d 2027 2f27         url = '/'
-0001d2b0: 202b 2073 656c 662e 7665 7273 696f 6e20   + self.version 
-0001d2c0: 2b20 272f 2720 2b20 6170 6920 2b20 272f  + '/' + api + '/
-0001d2d0: 2720 2b20 7061 7468 0a20 2020 2020 2020  ' + path.       
-0001d2e0: 2069 6620 6170 6920 3d3d 2027 7075 626c   if api == 'publ
-0001d2f0: 6963 273a 0a20 2020 2020 2020 2020 2020  ic':.           
-0001d300: 2069 6620 7061 7261 6d73 3a0a 2020 2020   if params:.    
-0001d310: 2020 2020 2020 2020 2020 2020 2320 7572              # ur
-0001d320: 6c65 6e63 6f64 654e 6573 7465 6420 6973  lencodeNested is
-0001d330: 2075 7365 6420 746f 2061 6464 7265 7373   used to address
-0001d340: 2068 7474 7073 3a2f 2f67 6974 6875 622e   https://github.
-0001d350: 636f 6d2f 6363 7874 2f63 6378 742f 6973  com/ccxt/ccxt/is
-0001d360: 7375 6573 2f31 3238 3732 0a20 2020 2020  sues/12872.     
-0001d370: 2020 2020 2020 2020 2020 2075 726c 202b             url +
-0001d380: 3d20 273f 2720 2b20 7365 6c66 2e75 726c  = '?' + self.url
-0001d390: 656e 636f 6465 5f6e 6573 7465 6428 7061  encode_nested(pa
-0001d3a0: 7261 6d73 290a 2020 2020 2020 2020 656c  rams).        el
-0001d3b0: 6966 2061 7069 203d 3d20 2770 7269 7661  if api == 'priva
-0001d3c0: 7465 273a 0a20 2020 2020 2020 2020 2020  te':.           
-0001d3d0: 2069 7343 616e 6365 6c4f 7264 6572 4261   isCancelOrderBa
-0001d3e0: 7463 6820 3d20 2870 6174 6820 3d3d 2027  tch = (path == '
-0001d3f0: 4361 6e63 656c 4f72 6465 7242 6174 6368  CancelOrderBatch
-0001d400: 2729 0a20 2020 2020 2020 2020 2020 2073  ').            s
-0001d410: 656c 662e 6368 6563 6b5f 7265 7175 6972  elf.check_requir
-0001d420: 6564 5f63 7265 6465 6e74 6961 6c73 2829  ed_credentials()
-0001d430: 0a20 2020 2020 2020 2020 2020 206e 6f6e  .            non
-0001d440: 6365 203d 2073 7472 2873 656c 662e 6e6f  ce = str(self.no
-0001d450: 6e63 6528 2929 0a20 2020 2020 2020 2020  nce()).         
-0001d460: 2020 2023 2075 726c 656e 636f 6465 4e65     # urlencodeNe
-0001d470: 7374 6564 2069 7320 7573 6564 2074 6f20  sted is used to 
-0001d480: 6164 6472 6573 7320 6874 7470 733a 2f2f  address https://
-0001d490: 6769 7468 7562 2e63 6f6d 2f63 6378 742f  github.com/ccxt/
-0001d4a0: 6363 7874 2f69 7373 7565 732f 3132 3837  ccxt/issues/1287
-0001d4b0: 320a 2020 2020 2020 2020 2020 2020 6966  2.            if
-0001d4c0: 2069 7343 616e 6365 6c4f 7264 6572 4261   isCancelOrderBa
-0001d4d0: 7463 683a 0a20 2020 2020 2020 2020 2020  tch:.           
-0001d4e0: 2020 2020 2062 6f64 7920 3d20 7365 6c66       body = self
-0001d4f0: 2e6a 736f 6e28 7365 6c66 2e65 7874 656e  .json(self.exten
-0001d500: 6428 7b27 6e6f 6e63 6527 3a20 6e6f 6e63  d({'nonce': nonc
-0001d510: 657d 2c20 7061 7261 6d73 2929 0a20 2020  e}, params)).   
-0001d520: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001d530: 2020 2020 2020 2020 2020 2020 2020 2062                 b
-0001d540: 6f64 7920 3d20 7365 6c66 2e75 726c 656e  ody = self.urlen
-0001d550: 636f 6465 5f6e 6573 7465 6428 7365 6c66  code_nested(self
-0001d560: 2e65 7874 656e 6428 7b27 6e6f 6e63 6527  .extend({'nonce'
-0001d570: 3a20 6e6f 6e63 657d 2c20 7061 7261 6d73  : nonce}, params
-0001d580: 2929 0a20 2020 2020 2020 2020 2020 2061  )).            a
-0001d590: 7574 6820 3d20 7365 6c66 2e65 6e63 6f64  uth = self.encod
-0001d5a0: 6528 6e6f 6e63 6520 2b20 626f 6479 290a  e(nonce + body).
-0001d5b0: 2020 2020 2020 2020 2020 2020 6861 7368              hash
-0001d5c0: 203d 2073 656c 662e 6861 7368 2861 7574   = self.hash(aut
-0001d5d0: 682c 2027 7368 6132 3536 272c 2027 6269  h, 'sha256', 'bi
-0001d5e0: 6e61 7279 2729 0a20 2020 2020 2020 2020  nary').         
-0001d5f0: 2020 2062 696e 6172 7920 3d20 7365 6c66     binary = self
-0001d600: 2e65 6e63 6f64 6528 7572 6c29 0a20 2020  .encode(url).   
-0001d610: 2020 2020 2020 2020 2062 696e 6861 7368           binhash
-0001d620: 203d 2073 656c 662e 6269 6e61 7279 5f63   = self.binary_c
-0001d630: 6f6e 6361 7428 6269 6e61 7279 2c20 6861  oncat(binary, ha
-0001d640: 7368 290a 2020 2020 2020 2020 2020 2020  sh).            
-0001d650: 7365 6372 6574 203d 2073 656c 662e 6261  secret = self.ba
-0001d660: 7365 3634 5f74 6f5f 6269 6e61 7279 2873  se64_to_binary(s
-0001d670: 656c 662e 7365 6372 6574 290a 2020 2020  elf.secret).    
-0001d680: 2020 2020 2020 2020 7369 676e 6174 7572          signatur
-0001d690: 6520 3d20 7365 6c66 2e68 6d61 6328 6269  e = self.hmac(bi
-0001d6a0: 6e68 6173 682c 2073 6563 7265 742c 2068  nhash, secret, h
-0001d6b0: 6173 686c 6962 2e73 6861 3531 322c 2027  ashlib.sha512, '
-0001d6c0: 6261 7365 3634 2729 0a20 2020 2020 2020  base64').       
-0001d6d0: 2020 2020 2068 6561 6465 7273 203d 207b       headers = {
-0001d6e0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d6f0: 2027 4150 492d 4b65 7927 3a20 7365 6c66   'API-Key': self
-0001d700: 2e61 7069 4b65 792c 0a20 2020 2020 2020  .apiKey,.       
-0001d710: 2020 2020 2020 2020 2027 4150 492d 5369           'API-Si
-0001d720: 676e 273a 2073 6967 6e61 7475 7265 2c0a  gn': signature,.
-0001d730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d740: 2320 2743 6f6e 7465 6e74 2d54 7970 6527  # 'Content-Type'
-0001d750: 3a20 2761 7070 6c69 6361 7469 6f6e 2f78  : 'application/x
-0001d760: 2d77 7777 2d66 6f72 6d2d 7572 6c65 6e63  -www-form-urlenc
-0001d770: 6f64 6564 272c 0a20 2020 2020 2020 2020  oded',.         
-0001d780: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-0001d790: 2069 6620 6973 4361 6e63 656c 4f72 6465   if isCancelOrde
-0001d7a0: 7242 6174 6368 3a0a 2020 2020 2020 2020  rBatch:.        
-0001d7b0: 2020 2020 2020 2020 6865 6164 6572 735b          headers[
-0001d7c0: 2743 6f6e 7465 6e74 2d54 7970 6527 5d20  'Content-Type'] 
-0001d7d0: 3d20 2761 7070 6c69 6361 7469 6f6e 2f6a  = 'application/j
-0001d7e0: 736f 6e27 0a20 2020 2020 2020 2020 2020  son'.           
-0001d7f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001d800: 2020 2020 2020 2068 6561 6465 7273 5b27         headers['
-0001d810: 436f 6e74 656e 742d 5479 7065 275d 203d  Content-Type'] =
-0001d820: 2027 6170 706c 6963 6174 696f 6e2f 782d   'application/x-
-0001d830: 7777 772d 666f 726d 2d75 726c 656e 636f  www-form-urlenco
-0001d840: 6465 6427 0a20 2020 2020 2020 2065 6c73  ded'.        els
-0001d850: 653a 0a20 2020 2020 2020 2020 2020 2075  e:.            u
-0001d860: 726c 203d 2027 2f27 202b 2070 6174 680a  rl = '/' + path.
-0001d870: 2020 2020 2020 2020 7572 6c20 3d20 7365          url = se
-0001d880: 6c66 2e75 726c 735b 2761 7069 275d 5b61  lf.urls['api'][a
-0001d890: 7069 5d20 2b20 7572 6c0a 2020 2020 2020  pi] + url.      
-0001d8a0: 2020 7265 7475 726e 207b 2775 726c 273a    return {'url':
-0001d8b0: 2075 726c 2c20 276d 6574 686f 6427 3a20   url, 'method': 
-0001d8c0: 6d65 7468 6f64 2c20 2762 6f64 7927 3a20  method, 'body': 
-0001d8d0: 626f 6479 2c20 2768 6561 6465 7273 273a  body, 'headers':
-0001d8e0: 2068 6561 6465 7273 7d0a 0a20 2020 2064   headers}..    d
-0001d8f0: 6566 206e 6f6e 6365 2873 656c 6629 3a0a  ef nonce(self):.
-0001d900: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0001d910: 656c 662e 6d69 6c6c 6973 6563 6f6e 6473  elf.milliseconds
-0001d920: 2829 0a0a 2020 2020 6465 6620 6861 6e64  ()..    def hand
-0001d930: 6c65 5f65 7272 6f72 7328 7365 6c66 2c20  le_errors(self, 
-0001d940: 636f 6465 2c20 7265 6173 6f6e 2c20 7572  code, reason, ur
-0001d950: 6c2c 206d 6574 686f 642c 2068 6561 6465  l, method, heade
-0001d960: 7273 2c20 626f 6479 2c20 7265 7370 6f6e  rs, body, respon
-0001d970: 7365 2c20 7265 7175 6573 7448 6561 6465  se, requestHeade
-0001d980: 7273 2c20 7265 7175 6573 7442 6f64 7929  rs, requestBody)
-0001d990: 3a0a 2020 2020 2020 2020 6966 2063 6f64  :.        if cod
-0001d9a0: 6520 3d3d 2035 3230 3a0a 2020 2020 2020  e == 520:.      
-0001d9b0: 2020 2020 2020 7261 6973 6520 4578 6368        raise Exch
-0001d9c0: 616e 6765 4e6f 7441 7661 696c 6162 6c65  angeNotAvailable
-0001d9d0: 2873 656c 662e 6964 202b 2027 2027 202b  (self.id + ' ' +
-0001d9e0: 2073 7472 2863 6f64 6529 202b 2027 2027   str(code) + ' '
-0001d9f0: 202b 2072 6561 736f 6e29 0a20 2020 2020   + reason).     
-0001da00: 2020 2023 2074 6f64 6f3a 2072 6577 7269     # todo: rewri
-0001da10: 7465 2073 656c 6620 666f 7220 2262 726f  te self for "bro
-0001da20: 6164 2220 6578 6365 7074 696f 6e73 206d  ad" exceptions m
-0001da30: 6174 6368 696e 670a 2020 2020 2020 2020  atching.        
-0001da40: 6966 2062 6f64 792e 6669 6e64 2827 496e  if body.find('In
-0001da50: 7661 6c69 6420 6f72 6465 7227 2920 3e3d  valid order') >=
-0001da60: 2030 3a0a 2020 2020 2020 2020 2020 2020   0:.            
-0001da70: 7261 6973 6520 496e 7661 6c69 644f 7264  raise InvalidOrd
-0001da80: 6572 2873 656c 662e 6964 202b 2027 2027  er(self.id + ' '
-0001da90: 202b 2062 6f64 7929 0a20 2020 2020 2020   + body).       
-0001daa0: 2069 6620 626f 6479 2e66 696e 6428 2749   if body.find('I
-0001dab0: 6e76 616c 6964 206e 6f6e 6365 2729 203e  nvalid nonce') >
-0001dac0: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
-0001dad0: 2072 6169 7365 2049 6e76 616c 6964 4e6f   raise InvalidNo
-0001dae0: 6e63 6528 7365 6c66 2e69 6420 2b20 2720  nce(self.id + ' 
-0001daf0: 2720 2b20 626f 6479 290a 2020 2020 2020  ' + body).      
-0001db00: 2020 6966 2062 6f64 792e 6669 6e64 2827    if body.find('
-0001db10: 496e 7375 6666 6963 6965 6e74 2066 756e  Insufficient fun
-0001db20: 6473 2729 203e 3d20 303a 0a20 2020 2020  ds') >= 0:.     
-0001db30: 2020 2020 2020 2072 6169 7365 2049 6e73         raise Ins
-0001db40: 7566 6669 6369 656e 7446 756e 6473 2873  ufficientFunds(s
-0001db50: 656c 662e 6964 202b 2027 2027 202b 2062  elf.id + ' ' + b
-0001db60: 6f64 7929 0a20 2020 2020 2020 2069 6620  ody).        if 
-0001db70: 626f 6479 2e66 696e 6428 2743 616e 6365  body.find('Cance
-0001db80: 6c20 7065 6e64 696e 6727 2920 3e3d 2030  l pending') >= 0
-0001db90: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0001dba0: 6973 6520 4361 6e63 656c 5065 6e64 696e  ise CancelPendin
-0001dbb0: 6728 7365 6c66 2e69 6420 2b20 2720 2720  g(self.id + ' ' 
-0001dbc0: 2b20 626f 6479 290a 2020 2020 2020 2020  + body).        
-0001dbd0: 6966 2062 6f64 792e 6669 6e64 2827 496e  if body.find('In
-0001dbe0: 7661 6c69 6420 6172 6775 6d65 6e74 733a  valid arguments:
-0001dbf0: 766f 6c75 6d65 2729 203e 3d20 303a 0a20  volume') >= 0:. 
-0001dc00: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001dc10: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
-0001dc20: 6c66 2e69 6420 2b20 2720 2720 2b20 626f  lf.id + ' ' + bo
-0001dc30: 6479 290a 2020 2020 2020 2020 6966 2062  dy).        if b
-0001dc40: 6f64 792e 6669 6e64 2827 5261 7465 206c  ody.find('Rate l
-0001dc50: 696d 6974 2065 7863 6565 6465 6427 2920  imit exceeded') 
-0001dc60: 3e3d 2030 3a0a 2020 2020 2020 2020 2020  >= 0:.          
-0001dc70: 2020 7261 6973 6520 5261 7465 4c69 6d69    raise RateLimi
-0001dc80: 7445 7863 6565 6465 6428 7365 6c66 2e69  tExceeded(self.i
-0001dc90: 6420 2b20 2720 2720 2b20 626f 6479 290a  d + ' ' + body).
-0001dca0: 2020 2020 2020 2020 6966 2072 6573 706f          if respo
-0001dcb0: 6e73 6520 6973 204e 6f6e 653a 0a20 2020  nse is None:.   
-0001dcc0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0001dcd0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-0001dce0: 626f 6479 5b30 5d20 3d3d 2027 7b27 3a0a  body[0] == '{':.
-0001dcf0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-0001dd00: 6f74 2069 7369 6e73 7461 6e63 6528 7265  ot isinstance(re
-0001dd10: 7370 6f6e 7365 2c20 7374 7229 3a0a 2020  sponse, str):.  
-0001dd20: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001dd30: 2027 6572 726f 7227 2069 6e20 7265 7370   'error' in resp
-0001dd40: 6f6e 7365 3a0a 2020 2020 2020 2020 2020  onse:.          
-0001dd50: 2020 2020 2020 2020 2020 6e75 6d45 7272            numErr
-0001dd60: 6f72 7320 3d20 6c65 6e28 7265 7370 6f6e  ors = len(respon
-0001dd70: 7365 5b27 6572 726f 7227 5d29 0a20 2020  se['error']).   
-0001dd80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dd90: 2069 6620 6e75 6d45 7272 6f72 733a 0a20   if numErrors:. 
-0001dda0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ddb0: 2020 2020 2020 206d 6573 7361 6765 203d         message =
-0001ddc0: 2073 656c 662e 6964 202b 2027 2027 202b   self.id + ' ' +
-0001ddd0: 2062 6f64 790a 2020 2020 2020 2020 2020   body.          
-0001dde0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-0001ddf0: 7220 6920 696e 2072 616e 6765 2830 2c20  r i in range(0, 
-0001de00: 6c65 6e28 7265 7370 6f6e 7365 5b27 6572  len(response['er
-0001de10: 726f 7227 5d29 293a 0a20 2020 2020 2020  ror'])):.       
+000197d0: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+000197e0: 2253 7563 6365 7373 2220 2020 2020 2020  "Success"       
+000197f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019800: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019820: 2020 2020 2020 7d5d 7d0a 2020 2020 2020        }]}.      
+00019830: 2020 2320 7769 7468 2070 6167 696e 6174    # with paginat
+00019840: 696f 6e0a 2020 2020 2020 2020 2320 2020  ion.        #   
+00019850: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00019860: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
+00019870: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019880: 2022 7265 7375 6c74 223a 7b0a 2020 2020   "result":{.    
+00019890: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000198a0: 2277 6974 6864 7261 7761 6c73 223a 5b0a  "withdrawals":[.
+000198b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000198c0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+000198d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000198e0: 2020 2022 6d65 7468 6f64 223a 2254 6574     "method":"Tet
+000198f0: 6865 7220 5553 4428 5452 4332 3029 222c  her USD(TRC20)",
+00019900: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00019910: 2020 2020 2020 2020 2020 2022 6163 6c61             "acla
+00019920: 7373 223a 2263 7572 7265 6e63 7922 2c0a  ss":"currency",.
+00019930: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019940: 2020 2020 2020 2020 2020 2261 7373 6574            "asset
+00019950: 223a 2255 5344 5422 2c0a 2020 2020 2020  ":"USDT",.      
+00019960: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019970: 2020 2020 2272 6566 6964 223a 2242 534e      "refid":"BSN
+00019980: 465a 5532 2d4d 4546 4e34 472d 4a33 4e45  FZU2-MEFN4G-J3NE
+00019990: 5a56 222c 0a20 2020 2020 2020 2023 2020  ZV",.        #  
+000199a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000199b0: 7478 6964 223a 2231 6337 6136 3432 6662  txid":"1c7a642fb
+000199c0: 3733 3837 6262 6332 6336 6132 6335 3039  7387bbc2c6a2c509
+000199d0: 6664 3161 6531 3436 3933 3766 3463 6637  fd1ae146937f4cf7
+000199e0: 3933 6234 3037 3961 3466 3037 3135 6533  93b4079a4f0715e3
+000199f0: 6130 3236 3135 6122 2c0a 2020 2020 2020  a02615a",.      
+00019a00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019a10: 2020 2020 2269 6e66 6f22 3a22 5451 6d64      "info":"TQmd
+00019a20: 7853 7543 3136 4568 4667 3846 5a57 7459  xSuC16EhFg8FZWtY
+00019a30: 6772 6646 526f 736f 5246 3762 4370 222c  grfFRosoRF7bCp",
+00019a40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00019a50: 2020 2020 2020 2020 2020 2022 616d 6f75             "amou
+00019a60: 6e74 223a 2231 3939 362e 3530 3030 3030  nt":"1996.500000
+00019a70: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00019a80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00019a90: 6665 6522 3a22 322e 3530 3030 3030 3030  fee":"2.50000000
+00019aa0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00019ab0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+00019ac0: 6d65 223a 3136 3639 3132 3636 3537 2c0a  me":1669126657,.
+00019ad0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019ae0: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+00019af0: 7322 3a22 5375 6363 6573 7322 2c0a 2020  s":"Success",.  
+00019b00: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019b10: 2020 2020 2020 2020 226b 6579 223a 2270          "key":"p
+00019b20: 6f6c 6f6e 6965 7822 2c0a 2020 2020 2020  oloniex",.      
+00019b30: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019b40: 2020 2020 226e 6574 776f 726b 223a 2254      "network":"T
+00019b50: 726f 6e22 0a20 2020 2020 2020 2023 2020  ron".        #  
+00019b60: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00019b70: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00019b80: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
+00019b90: 2023 2020 2020 2020 2020 2020 205d 2c0a   #           ],.
+00019ba0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019bb0: 2020 2020 226e 6578 745f 6375 7273 6f72      "next_cursor
+00019bc0: 223a 2248 6741 4141 4141 4141 4142 4756  ":"HgAAAAAAAABGV
+00019bd0: 4652 5364 336b 314c 5646 3459 304a 5159  FRSd3k1LVF4Y0JQY
+00019be0: 3035 4764 3078 5259 304e 7865 6e46 6e64  05Gd0xRY0NxenFnd
+00019bf0: 4870 7962 6b77 4241 5148 3241 7745 4241  HpybkwBAQH2AwEBA
+00019c00: 4141 4141 5141 4141 4141 4141 4141 4241  AAAAQAAAAAAAAABA
+00019c10: 4141 4141 4141 5a41 4141 4141 4141 4141  AAAAAAZAAAAAAAAA
+00019c20: 413d 3d22 0a20 2020 2020 2020 2023 2020  A==".        #  
+00019c30: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00019c40: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00019c50: 230a 2020 2020 2020 2020 7261 7757 6974  #.        rawWit
+00019c60: 6864 7261 7761 6c73 203d 204e 6f6e 650a  hdrawals = None.
+00019c70: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00019c80: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00019c90: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00019ca0: 6c74 2729 0a20 2020 2020 2020 2069 6620  lt').        if 
+00019cb0: 6e6f 7420 6973 696e 7374 616e 6365 2872  not isinstance(r
+00019cc0: 6573 756c 742c 206c 6973 7429 3a0a 2020  esult, list):.  
+00019cd0: 2020 2020 2020 2020 2020 7261 7757 6974            rawWit
+00019ce0: 6864 7261 7761 6c73 203d 2073 656c 662e  hdrawals = self.
+00019cf0: 6164 645f 7061 6769 6e61 7469 6f6e 5f63  add_pagination_c
+00019d00: 7572 736f 725f 746f 5f72 6573 756c 7428  ursor_to_result(
+00019d10: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
+00019d20: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00019d30: 2020 7261 7757 6974 6864 7261 7761 6c73    rawWithdrawals
+00019d40: 203d 2072 6573 756c 740a 2020 2020 2020   = result.      
+00019d50: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00019d60: 7273 655f 7472 616e 7361 6374 696f 6e73  rse_transactions
+00019d70: 5f62 795f 7479 7065 2827 7769 7468 6472  _by_type('withdr
+00019d80: 6177 616c 272c 2072 6177 5769 7468 6472  awal', rawWithdr
+00019d90: 6177 616c 732c 2063 6f64 652c 2073 696e  awals, code, sin
+00019da0: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+00019db0: 6465 6620 6164 645f 7061 6769 6e61 7469  def add_paginati
+00019dc0: 6f6e 5f63 7572 736f 725f 746f 5f72 6573  on_cursor_to_res
+00019dd0: 756c 7428 7365 6c66 2c20 7265 7375 6c74  ult(self, result
+00019de0: 293a 0a20 2020 2020 2020 2063 7572 736f  ):.        curso
+00019df0: 7220 3d20 7365 6c66 2e73 6166 655f 7374  r = self.safe_st
+00019e00: 7269 6e67 2872 6573 756c 742c 2027 6e65  ring(result, 'ne
+00019e10: 7874 5f63 7572 736f 7227 290a 2020 2020  xt_cursor').    
+00019e20: 2020 2020 6461 7461 203d 2073 656c 662e      data = self.
+00019e30: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
+00019e40: 742c 2027 7769 7468 6472 6177 616c 7327  t, 'withdrawals'
+00019e50: 290a 2020 2020 2020 2020 6461 7461 4c65  ).        dataLe
+00019e60: 6e67 7468 203d 206c 656e 2864 6174 6129  ngth = len(data)
+00019e70: 0a20 2020 2020 2020 2069 6620 6375 7273  .        if curs
+00019e80: 6f72 2069 7320 6e6f 7420 4e6f 6e65 2061  or is not None a
+00019e90: 6e64 2064 6174 614c 656e 6774 6820 3e20  nd dataLength > 
+00019ea0: 303a 0a20 2020 2020 2020 2020 2020 206c  0:.            l
+00019eb0: 6173 7420 3d20 6461 7461 5b64 6174 614c  ast = data[dataL
+00019ec0: 656e 6774 6820 2d20 315d 0a20 2020 2020  ength - 1].     
+00019ed0: 2020 2020 2020 206c 6173 745b 276e 6578         last['nex
+00019ee0: 745f 6375 7273 6f72 275d 203d 2063 7572  t_cursor'] = cur
+00019ef0: 736f 720a 2020 2020 2020 2020 2020 2020  sor.            
+00019f00: 6461 7461 5b64 6174 614c 656e 6774 6820  data[dataLength 
+00019f10: 2d20 315d 203d 206c 6173 740a 2020 2020  - 1] = last.    
+00019f20: 2020 2020 7265 7475 726e 2064 6174 610a      return data.
+00019f30: 0a20 2020 2061 7379 6e63 2064 6566 2063  .    async def c
+00019f40: 7265 6174 655f 6465 706f 7369 745f 6164  reate_deposit_ad
+00019f50: 6472 6573 7328 7365 6c66 2c20 636f 6465  dress(self, code
+00019f60: 3a20 7374 722c 2070 6172 616d 733d 7b7d  : str, params={}
+00019f70: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
+00019f80: 2020 2020 2020 2063 7265 6174 6520 6120         create a 
+00019f90: 6375 7272 656e 6379 2064 6570 6f73 6974  currency deposit
+00019fa0: 2061 6464 7265 7373 0a20 2020 2020 2020   address.       
+00019fb0: 203a 7365 653a 2068 7474 7073 3a2f 2f64   :see: https://d
+00019fc0: 6f63 732e 6b72 616b 656e 2e63 6f6d 2f72  ocs.kraken.com/r
+00019fd0: 6573 742f 2374 6167 2f46 756e 6469 6e67  est/#tag/Funding
+00019fe0: 2f6f 7065 7261 7469 6f6e 2f67 6574 4465  /operation/getDe
+00019ff0: 706f 7369 7441 6464 7265 7373 6573 0a20  positAddresses. 
+0001a000: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0001a010: 7220 636f 6465 3a20 756e 6966 6965 6420  r code: unified 
+0001a020: 6375 7272 656e 6379 2063 6f64 6520 6f66  currency code of
+0001a030: 2074 6865 2063 7572 7265 6e63 7920 666f   the currency fo
+0001a040: 7220 7468 6520 6465 706f 7369 7420 6164  r the deposit ad
+0001a050: 6472 6573 730a 2020 2020 2020 2020 3a70  dress.        :p
+0001a060: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
+0001a070: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
+0001a080: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+0001a090: 2074 6865 2065 7863 6861 6e67 6520 4150   the exchange AP
+0001a0a0: 4920 656e 6470 6f69 6e74 0a20 2020 2020  I endpoint.     
+0001a0b0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+0001a0c0: 3a20 616e 2060 6164 6472 6573 7320 7374  : an `address st
+0001a0d0: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+0001a0e0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+0001a0f0: 2f3f 6964 3d61 6464 7265 7373 2d73 7472  /?id=address-str
+0001a100: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+0001a110: 2022 2222 0a20 2020 2020 2020 2072 6571   """.        req
+0001a120: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+0001a130: 2020 2020 2027 6e65 7727 3a20 2774 7275       'new': 'tru
+0001a140: 6527 2c0a 2020 2020 2020 2020 7d0a 2020  e',.        }.  
+0001a150: 2020 2020 2020 7265 7475 726e 2061 7761        return awa
+0001a160: 6974 2073 656c 662e 6665 7463 685f 6465  it self.fetch_de
+0001a170: 706f 7369 745f 6164 6472 6573 7328 636f  posit_address(co
+0001a180: 6465 2c20 7365 6c66 2e65 7874 656e 6428  de, self.extend(
+0001a190: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+0001a1a0: 290a 0a20 2020 2061 7379 6e63 2064 6566  )..    async def
+0001a1b0: 2066 6574 6368 5f64 6570 6f73 6974 5f6d   fetch_deposit_m
+0001a1c0: 6574 686f 6473 2873 656c 662c 2063 6f64  ethods(self, cod
+0001a1d0: 653a 2073 7472 2c20 7061 7261 6d73 3d7b  e: str, params={
+0001a1e0: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
+0001a1f0: 2020 2020 2020 2020 6665 7463 6820 6465          fetch de
+0001a200: 706f 7369 7420 6d65 7468 6f64 7320 666f  posit methods fo
+0001a210: 7220 6120 6375 7272 656e 6379 2061 7373  r a currency ass
+0001a220: 6f63 6961 7465 6420 7769 7468 2073 656c  ociated with sel
+0001a230: 6620 6163 636f 756e 740a 2020 2020 2020  f account.      
+0001a240: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+0001a250: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+0001a260: 7265 7374 2f23 7461 672f 4675 6e64 696e  rest/#tag/Fundin
+0001a270: 672f 6f70 6572 6174 696f 6e2f 6765 7444  g/operation/getD
+0001a280: 6570 6f73 6974 4d65 7468 6f64 730a 2020  epositMethods.  
+0001a290: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0001a2a0: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
+0001a2b0: 7572 7265 6e63 7920 636f 6465 0a20 2020  urrency code.   
+0001a2c0: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+0001a2d0: 205b 7061 7261 6d73 5d3a 2065 7874 7261   [params]: extra
+0001a2e0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+0001a2f0: 6966 6963 2074 6f20 7468 6520 6b72 616b  ific to the krak
+0001a300: 656e 2061 7069 2065 6e64 706f 696e 740a  en api endpoint.
+0001a310: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0001a320: 2064 6963 743a 206f 6620 6465 706f 7369   dict: of deposi
+0001a330: 7420 6d65 7468 6f64 730a 2020 2020 2020  t methods.      
+0001a340: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+0001a350: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0001a360: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0001a370: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
+0001a380: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
+0001a390: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0001a3a0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0001a3b0: 6173 7365 7427 3a20 6375 7272 656e 6379  asset': currency
+0001a3c0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0001a3d0: 7d0a 2020 2020 2020 2020 7265 7370 6f6e  }.        respon
+0001a3e0: 7365 203d 2061 7761 6974 2073 656c 662e  se = await self.
+0001a3f0: 7072 6976 6174 6550 6f73 7444 6570 6f73  privatePostDepos
+0001a400: 6974 4d65 7468 6f64 7328 7365 6c66 2e65  itMethods(self.e
+0001a410: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+0001a420: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0001a430: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0001a440: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0001a450: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
+0001a460: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001a470: 2020 2272 6573 756c 7422 3a5b 0a20 2020    "result":[.   
+0001a480: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001a490: 2020 207b 226d 6574 686f 6422 3a22 4574     {"method":"Et
+0001a4a0: 6865 7228 4865 7829 222c 226c 696d 6974  her(Hex)","limit
+0001a4b0: 223a 6661 6c73 652c 2267 656e 2d61 6464  ":false,"gen-add
+0001a4c0: 7265 7373 223a 7472 7565 7d0a 2020 2020  ress":true}.    
+0001a4d0: 2020 2020 2320 2020 2020 2020 2020 5d0a      #         ].
+0001a4e0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0001a4f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0001a500: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0001a510: 2020 2320 2020 2020 2020 2020 2265 7272    #         "err
+0001a520: 6f72 223a 5b5d 2c0a 2020 2020 2020 2020  or":[],.        
+0001a530: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+0001a540: 7422 3a5b 0a20 2020 2020 2020 2023 2020  t":[.        #  
+0001a550: 2020 2020 2020 2020 2020 207b 226d 6574             {"met
+0001a560: 686f 6422 3a22 5465 7468 6572 2055 5344  hod":"Tether USD
+0001a570: 2845 5243 3230 2922 2c22 6c69 6d69 7422  (ERC20)","limit"
+0001a580: 3a66 616c 7365 2c22 6164 6472 6573 732d  :false,"address-
+0001a590: 7365 7475 702d 6665 6522 3a22 302e 3030  setup-fee":"0.00
+0001a5a0: 3030 3030 3030 222c 2267 656e 2d61 6464  000000","gen-add
+0001a5b0: 7265 7373 223a 7472 7565 7d2c 0a20 2020  ress":true},.   
+0001a5c0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001a5d0: 2020 207b 226d 6574 686f 6422 3a22 5465     {"method":"Te
+0001a5e0: 7468 6572 2055 5344 2854 5243 3230 2922  ther USD(TRC20)"
+0001a5f0: 2c22 6c69 6d69 7422 3a66 616c 7365 2c22  ,"limit":false,"
+0001a600: 6164 6472 6573 732d 7365 7475 702d 6665  address-setup-fe
+0001a610: 6522 3a22 302e 3030 3030 3030 3030 222c  e":"0.00000000",
+0001a620: 2267 656e 2d61 6464 7265 7373 223a 7472  "gen-address":tr
+0001a630: 7565 7d0a 2020 2020 2020 2020 2320 2020  ue}.        #   
+0001a640: 2020 2020 2020 5d0a 2020 2020 2020 2020        ].        
+0001a650: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0001a660: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0001a670: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0001a680: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
+0001a690: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001a6a0: 2020 2272 6573 756c 7422 3a5b 0a20 2020    "result":[.   
+0001a6b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001a6c0: 2020 207b 226d 6574 686f 6422 3a22 4269     {"method":"Bi
+0001a6d0: 7463 6f69 6e22 2c22 6c69 6d69 7422 3a66  tcoin","limit":f
+0001a6e0: 616c 7365 2c22 6665 6522 3a22 302e 3030  alse,"fee":"0.00
+0001a6f0: 3030 3030 3030 3030 222c 2267 656e 2d61  00000000","gen-a
+0001a700: 6464 7265 7373 223a 7472 7565 7d0a 2020  ddress":true}.  
+0001a710: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001a720: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+0001a730: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0001a740: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0001a750: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
+0001a760: 6e73 652c 2027 7265 7375 6c74 2729 0a0a  nse, 'result')..
+0001a770: 2020 2020 6173 796e 6320 6465 6620 6665      async def fe
+0001a780: 7463 685f 6465 706f 7369 745f 6164 6472  tch_deposit_addr
+0001a790: 6573 7328 7365 6c66 2c20 636f 6465 3a20  ess(self, code: 
+0001a7a0: 7374 722c 2070 6172 616d 733d 7b7d 293a  str, params={}):
+0001a7b0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+0001a7c0: 2020 2020 2066 6574 6368 2074 6865 2064       fetch the d
+0001a7d0: 6570 6f73 6974 2061 6464 7265 7373 2066  eposit address f
+0001a7e0: 6f72 2061 2063 7572 7265 6e63 7920 6173  or a currency as
+0001a7f0: 736f 6369 6174 6564 2077 6974 6820 7365  sociated with se
+0001a800: 6c66 2061 6363 6f75 6e74 0a20 2020 2020  lf account.     
+0001a810: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
+0001a820: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
+0001a830: 2f72 6573 742f 2374 6167 2f46 756e 6469  /rest/#tag/Fundi
+0001a840: 6e67 2f6f 7065 7261 7469 6f6e 2f67 6574  ng/operation/get
+0001a850: 4465 706f 7369 7441 6464 7265 7373 6573  DepositAddresses
+0001a860: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0001a870: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
+0001a880: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
+0001a890: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+0001a8a0: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
+0001a8b0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+0001a8c0: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
+0001a8d0: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
+0001a8e0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+0001a8f0: 7475 726e 7320 6469 6374 3a20 616e 2060  turns dict: an `
+0001a900: 6164 6472 6573 7320 7374 7275 6374 7572  address structur
+0001a910: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+0001a920: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d61  ccxt.com/#/?id=a
+0001a930: 6464 7265 7373 2d73 7472 7563 7475 7265  ddress-structure
+0001a940: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+0001a950: 2020 2020 2020 2061 7761 6974 2073 656c         await sel
+0001a960: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
+0001a970: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+0001a980: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+0001a990: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+0001a9a0: 6e65 7477 6f72 6b20 3d20 7365 6c66 2e73  network = self.s
+0001a9b0: 6166 655f 7374 7269 6e67 5f75 7070 6572  afe_string_upper
+0001a9c0: 2870 6172 616d 732c 2027 6e65 7477 6f72  (params, 'networ
+0001a9d0: 6b27 290a 2020 2020 2020 2020 6e65 7477  k').        netw
+0001a9e0: 6f72 6b73 203d 2073 656c 662e 7361 6665  orks = self.safe
+0001a9f0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
+0001aa00: 6f6e 732c 2027 6e65 7477 6f72 6b73 272c  ons, 'networks',
+0001aa10: 207b 7d29 0a20 2020 2020 2020 206e 6574   {}).        net
+0001aa20: 776f 726b 203d 2073 656c 662e 7361 6665  work = self.safe
+0001aa30: 5f73 7472 696e 6728 6e65 7477 6f72 6b73  _string(networks
+0001aa40: 2c20 6e65 7477 6f72 6b2c 206e 6574 776f  , network, netwo
+0001aa50: 726b 2920 2023 2073 7570 706f 7274 2045  rk)  # support E
+0001aa60: 5448 203e 2045 5243 3230 2061 6c69 6173  TH > ERC20 alias
+0001aa70: 6573 0a20 2020 2020 2020 2070 6172 616d  es.        param
+0001aa80: 7320 3d20 7365 6c66 2e6f 6d69 7428 7061  s = self.omit(pa
+0001aa90: 7261 6d73 2c20 276e 6574 776f 726b 2729  rams, 'network')
+0001aaa0: 0a20 2020 2020 2020 2069 6620 2863 6f64  .        if (cod
+0001aab0: 6520 3d3d 2027 5553 4454 2729 2061 6e64  e == 'USDT') and
+0001aac0: 2028 6e65 7477 6f72 6b20 3d3d 2027 5452   (network == 'TR
+0001aad0: 4332 3027 293a 0a20 2020 2020 2020 2020  C20'):.         
+0001aae0: 2020 2063 6f64 6520 3d20 636f 6465 202b     code = code +
+0001aaf0: 2027 2d27 202b 206e 6574 776f 726b 0a20   '-' + network. 
+0001ab00: 2020 2020 2020 2064 6566 6175 6c74 4465         defaultDe
+0001ab10: 706f 7369 744d 6574 686f 6473 203d 2073  positMethods = s
+0001ab20: 656c 662e 7361 6665 5f76 616c 7565 2873  elf.safe_value(s
+0001ab30: 656c 662e 6f70 7469 6f6e 732c 2027 6465  elf.options, 'de
+0001ab40: 706f 7369 744d 6574 686f 6473 272c 207b  positMethods', {
+0001ab50: 7d29 0a20 2020 2020 2020 2064 6566 6175  }).        defau
+0001ab60: 6c74 4465 706f 7369 744d 6574 686f 6420  ltDepositMethod 
+0001ab70: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0001ab80: 6e67 2864 6566 6175 6c74 4465 706f 7369  ng(defaultDeposi
+0001ab90: 744d 6574 686f 6473 2c20 636f 6465 290a  tMethods, code).
+0001aba0: 2020 2020 2020 2020 6465 706f 7369 744d          depositM
+0001abb0: 6574 686f 6420 3d20 7365 6c66 2e73 6166  ethod = self.saf
+0001abc0: 655f 7374 7269 6e67 2870 6172 616d 732c  e_string(params,
+0001abd0: 2027 6d65 7468 6f64 272c 2064 6566 6175   'method', defau
+0001abe0: 6c74 4465 706f 7369 744d 6574 686f 6429  ltDepositMethod)
+0001abf0: 0a20 2020 2020 2020 2023 2069 6620 7468  .        # if th
+0001ac00: 6520 7573 6572 2068 6173 2073 7065 6369  e user has speci
+0001ac10: 6669 6564 2061 6e20 6578 6368 616e 6765  fied an exchange
+0001ac20: 2d73 7065 6369 6669 6320 6d65 7468 6f64  -specific method
+0001ac30: 2069 6e20 7061 7261 6d73 0a20 2020 2020   in params.     
+0001ac40: 2020 2023 2077 6520 7061 7373 2069 742c     # we pass it,
+0001ac50: 206f 7468 6572 7769 7365 2077 6520 7461   otherwise we ta
+0001ac60: 6b65 2074 6865 2027 6e65 7477 6f72 6b27  ke the 'network'
+0001ac70: 2075 6e69 6669 6564 2070 6172 616d 0a20   unified param. 
+0001ac80: 2020 2020 2020 2069 6620 6465 706f 7369         if deposi
+0001ac90: 744d 6574 686f 6420 6973 204e 6f6e 653a  tMethod is None:
+0001aca0: 0a20 2020 2020 2020 2020 2020 2064 6570  .            dep
+0001acb0: 6f73 6974 4d65 7468 6f64 7320 3d20 6177  ositMethods = aw
+0001acc0: 6169 7420 7365 6c66 2e66 6574 6368 5f64  ait self.fetch_d
+0001acd0: 6570 6f73 6974 5f6d 6574 686f 6473 2863  eposit_methods(c
+0001ace0: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
+0001acf0: 2069 6620 6e65 7477 6f72 6b20 6973 206e   if network is n
+0001ad00: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0001ad10: 2020 2020 2020 2020 2023 2066 696e 6420           # find 
+0001ad20: 6265 7374 206d 6174 6368 696e 6720 6465  best matching de
+0001ad30: 706f 7369 7420 6d65 7468 6f64 2c20 6f72  posit method, or
+0001ad40: 2066 616c 6c62 6163 6b20 746f 2074 6865   fallback to the
+0001ad50: 2066 6972 7374 206f 6e65 0a20 2020 2020   first one.     
+0001ad60: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0001ad70: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
+0001ad80: 2864 6570 6f73 6974 4d65 7468 6f64 7329  (depositMethods)
+0001ad90: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001ada0: 2020 2020 2020 2065 6e74 7279 203d 2073         entry = s
+0001adb0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0001adc0: 6465 706f 7369 744d 6574 686f 6473 5b69  depositMethods[i
+0001add0: 5d2c 2027 6d65 7468 6f64 2729 0a20 2020  ], 'method').   
+0001ade0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001adf0: 2069 6620 656e 7472 792e 6669 6e64 286e   if entry.find(n
+0001ae00: 6574 776f 726b 2920 3e3d 2030 3a0a 2020  etwork) >= 0:.  
+0001ae10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae20: 2020 2020 2020 6465 706f 7369 744d 6574        depositMet
+0001ae30: 686f 6420 3d20 656e 7472 790a 2020 2020  hod = entry.    
+0001ae40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ae50: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+0001ae60: 2020 2020 2020 2320 6966 2064 6570 6f73        # if depos
+0001ae70: 6974 4d65 7468 6f64 2077 6173 206e 6f74  itMethod was not
+0001ae80: 2073 7065 6369 6669 6564 2c20 6661 6c6c   specified, fall
+0001ae90: 6261 636b 2074 6f20 7468 6520 6669 7273  back to the firs
+0001aea0: 7420 6176 6169 6c61 626c 6520 6465 706f  t available depo
+0001aeb0: 7369 7420 6d65 7468 6f64 0a20 2020 2020  sit method.     
+0001aec0: 2020 2020 2020 2069 6620 6465 706f 7369         if deposi
+0001aed0: 744d 6574 686f 6420 6973 204e 6f6e 653a  tMethod is None:
+0001aee0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001aef0: 2066 6972 7374 4465 706f 7369 744d 6574   firstDepositMet
+0001af00: 686f 6420 3d20 7365 6c66 2e73 6166 655f  hod = self.safe_
+0001af10: 7661 6c75 6528 6465 706f 7369 744d 6574  value(depositMet
+0001af20: 686f 6473 2c20 302c 207b 7d29 0a20 2020  hods, 0, {}).   
+0001af30: 2020 2020 2020 2020 2020 2020 2064 6570               dep
+0001af40: 6f73 6974 4d65 7468 6f64 203d 2073 656c  ositMethod = sel
+0001af50: 662e 7361 6665 5f73 7472 696e 6728 6669  f.safe_string(fi
+0001af60: 7273 7444 6570 6f73 6974 4d65 7468 6f64  rstDepositMethod
+0001af70: 2c20 276d 6574 686f 6427 290a 2020 2020  , 'method').    
+0001af80: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0001af90: 2020 2020 2020 2020 2020 2020 2761 7373              'ass
+0001afa0: 6574 273a 2063 7572 7265 6e63 795b 2769  et': currency['i
+0001afb0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+0001afc0: 2027 6d65 7468 6f64 273a 2064 6570 6f73   'method': depos
+0001afd0: 6974 4d65 7468 6f64 2c0a 2020 2020 2020  itMethod,.      
+0001afe0: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+0001aff0: 6f6e 7365 203d 2061 7761 6974 2073 656c  onse = await sel
+0001b000: 662e 7072 6976 6174 6550 6f73 7444 6570  f.privatePostDep
+0001b010: 6f73 6974 4164 6472 6573 7365 7328 7365  ositAddresses(se
+0001b020: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0001b030: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0001b040: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0001b050: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0001b060: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
+0001b070: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
+0001b080: 2020 2020 2020 2272 6573 756c 7422 3a5b        "result":[
+0001b090: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001b0a0: 2020 2020 2020 207b 2261 6464 7265 7373         {"address
+0001b0b0: 223a 2230 7837 3762 3530 3531 6639 3765  ":"0x77b5051f97e
+0001b0c0: 6661 3963 6335 3263 3961 6435 6230 3233  fa9cc52c9ad5b023
+0001b0d0: 6135 3366 6331 3563 3230 3064 3322 2c22  a53fc15c200d3","
+0001b0e0: 6578 7069 7265 746d 223a 2230 227d 0a20  expiretm":"0"}. 
+0001b0f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001b100: 205d 0a20 2020 2020 2020 2023 2020 2020   ].        #    
+0001b110: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0001b120: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+0001b130: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+0001b140: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+0001b150: 2c20 5b5d 290a 2020 2020 2020 2020 6669  , []).        fi
+0001b160: 7273 7452 6573 756c 7420 3d20 7365 6c66  rstResult = self
+0001b170: 2e73 6166 655f 7661 6c75 6528 7265 7375  .safe_value(resu
+0001b180: 6c74 2c20 302c 207b 7d29 0a20 2020 2020  lt, 0, {}).     
+0001b190: 2020 2069 6620 6669 7273 7452 6573 756c     if firstResul
+0001b1a0: 7420 6973 204e 6f6e 653a 0a20 2020 2020  t is None:.     
+0001b1b0: 2020 2020 2020 2072 6169 7365 2049 6e76         raise Inv
+0001b1c0: 616c 6964 4164 6472 6573 7328 7365 6c66  alidAddress(self
+0001b1d0: 2e69 6420 2b20 2720 7072 6976 6174 6550  .id + ' privateP
+0001b1e0: 6f73 7444 6570 6f73 6974 4164 6472 6573  ostDepositAddres
+0001b1f0: 7365 7328 2920 7265 7475 726e 6564 206e  ses() returned n
+0001b200: 6f20 6164 6472 6573 7365 7320 666f 7220  o addresses for 
+0001b210: 2720 2b20 636f 6465 290a 2020 2020 2020  ' + code).      
+0001b220: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0001b230: 7273 655f 6465 706f 7369 745f 6164 6472  rse_deposit_addr
+0001b240: 6573 7328 6669 7273 7452 6573 756c 742c  ess(firstResult,
+0001b250: 2063 7572 7265 6e63 7929 0a0a 2020 2020   currency)..    
+0001b260: 6465 6620 7061 7273 655f 6465 706f 7369  def parse_deposi
+0001b270: 745f 6164 6472 6573 7328 7365 6c66 2c20  t_address(self, 
+0001b280: 6465 706f 7369 7441 6464 7265 7373 2c20  depositAddress, 
+0001b290: 6375 7272 656e 6379 3a20 4375 7272 656e  currency: Curren
+0001b2a0: 6379 203d 204e 6f6e 6529 3a0a 2020 2020  cy = None):.    
+0001b2b0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0001b2c0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+0001b2d0: 2020 2020 2020 2020 2261 6464 7265 7373          "address
+0001b2e0: 223a 2230 7837 3762 3530 3531 6639 3765  ":"0x77b5051f97e
+0001b2f0: 6661 3963 6335 3263 3961 6435 6230 3233  fa9cc52c9ad5b023
+0001b300: 6135 3366 6331 3563 3230 3064 3322 2c0a  a53fc15c200d3",.
+0001b310: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001b320: 2020 2265 7870 6972 6574 6d22 3a22 3022    "expiretm":"0"
+0001b330: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
+0001b340: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0001b350: 2020 2061 6464 7265 7373 203d 2073 656c     address = sel
+0001b360: 662e 7361 6665 5f73 7472 696e 6728 6465  f.safe_string(de
+0001b370: 706f 7369 7441 6464 7265 7373 2c20 2761  positAddress, 'a
+0001b380: 6464 7265 7373 2729 0a20 2020 2020 2020  ddress').       
+0001b390: 2074 6167 203d 2073 656c 662e 7361 6665   tag = self.safe
+0001b3a0: 5f73 7472 696e 6728 6465 706f 7369 7441  _string(depositA
+0001b3b0: 6464 7265 7373 2c20 2774 6167 2729 0a20  ddress, 'tag'). 
+0001b3c0: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+0001b3d0: 3d20 7365 6c66 2e73 6166 655f 6375 7272  = self.safe_curr
+0001b3e0: 656e 6379 284e 6f6e 652c 2063 7572 7265  ency(None, curre
+0001b3f0: 6e63 7929 0a20 2020 2020 2020 2063 6f64  ncy).        cod
+0001b400: 6520 3d20 6375 7272 656e 6379 5b27 636f  e = currency['co
+0001b410: 6465 275d 0a20 2020 2020 2020 2073 656c  de'].        sel
+0001b420: 662e 6368 6563 6b5f 6164 6472 6573 7328  f.check_address(
+0001b430: 6164 6472 6573 7329 0a20 2020 2020 2020  address).       
+0001b440: 2072 6574 7572 6e20 7b0a 2020 2020 2020   return {.      
+0001b450: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+0001b460: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
+0001b470: 2020 2020 2761 6464 7265 7373 273a 2061      'address': a
+0001b480: 6464 7265 7373 2c0a 2020 2020 2020 2020  ddress,.        
+0001b490: 2020 2020 2774 6167 273a 2074 6167 2c0a      'tag': tag,.
+0001b4a0: 2020 2020 2020 2020 2020 2020 276e 6574              'net
+0001b4b0: 776f 726b 273a 204e 6f6e 652c 0a20 2020  work': None,.   
+0001b4c0: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
+0001b4d0: 2064 6570 6f73 6974 4164 6472 6573 732c   depositAddress,
+0001b4e0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+0001b4f0: 6173 796e 6320 6465 6620 7769 7468 6472  async def withdr
+0001b500: 6177 2873 656c 662c 2063 6f64 653a 2073  aw(self, code: s
+0001b510: 7472 2c20 616d 6f75 6e74 3a20 666c 6f61  tr, amount: floa
+0001b520: 742c 2061 6464 7265 7373 2c20 7461 673d  t, address, tag=
+0001b530: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+0001b540: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0001b550: 2020 2020 2020 6d61 6b65 2061 2077 6974        make a wit
+0001b560: 6864 7261 7761 6c0a 2020 2020 2020 2020  hdrawal.        
+0001b570: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
+0001b580: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
+0001b590: 7374 2f23 7461 672f 4675 6e64 696e 672f  st/#tag/Funding/
+0001b5a0: 6f70 6572 6174 696f 6e2f 7769 7468 6472  operation/withdr
+0001b5b0: 6177 4675 6e64 730a 2020 2020 2020 2020  awFunds.        
+0001b5c0: 3a70 6172 616d 2073 7472 2063 6f64 653a  :param str code:
+0001b5d0: 2075 6e69 6669 6564 2063 7572 7265 6e63   unified currenc
+0001b5e0: 7920 636f 6465 0a20 2020 2020 2020 203a  y code.        :
+0001b5f0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
+0001b600: 6e74 3a20 7468 6520 616d 6f75 6e74 2074  nt: the amount t
+0001b610: 6f20 7769 7468 6472 6177 0a20 2020 2020  o withdraw.     
+0001b620: 2020 203a 7061 7261 6d20 7374 7220 6164     :param str ad
+0001b630: 6472 6573 733a 2074 6865 2061 6464 7265  dress: the addre
+0001b640: 7373 2074 6f20 7769 7468 6472 6177 2074  ss to withdraw t
+0001b650: 6f0a 2020 2020 2020 2020 3a70 6172 616d  o.        :param
+0001b660: 2073 7472 2074 6167 3a0a 2020 2020 2020   str tag:.      
+0001b670: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
+0001b680: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
+0001b690: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+0001b6a0: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
+0001b6b0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
+0001b6c0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+0001b6d0: 6469 6374 3a20 6120 6074 7261 6e73 6163  dict: a `transac
+0001b6e0: 7469 6f6e 2073 7472 7563 7475 7265 203c  tion structure <
+0001b6f0: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+0001b700: 742e 636f 6d2f 232f 3f69 643d 7472 616e  t.com/#/?id=tran
+0001b710: 7361 6374 696f 6e2d 7374 7275 6374 7572  saction-structur
+0001b720: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+0001b730: 2020 2020 2020 2020 7461 672c 2070 6172          tag, par
+0001b740: 616d 7320 3d20 7365 6c66 2e68 616e 646c  ams = self.handl
+0001b750: 655f 7769 7468 6472 6177 5f74 6167 5f61  e_withdraw_tag_a
+0001b760: 6e64 5f70 6172 616d 7328 7461 672c 2070  nd_params(tag, p
+0001b770: 6172 616d 7329 0a20 2020 2020 2020 2073  arams).        s
+0001b780: 656c 662e 6368 6563 6b5f 6164 6472 6573  elf.check_addres
+0001b790: 7328 6164 6472 6573 7329 0a20 2020 2020  s(address).     
+0001b7a0: 2020 2069 6620 276b 6579 2720 696e 2070     if 'key' in p
+0001b7b0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+0001b7c0: 2020 2061 7761 6974 2073 656c 662e 6c6f     await self.lo
+0001b7d0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
+0001b7e0: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+0001b7f0: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
+0001b800: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
+0001b810: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0001b820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b830: 2761 7373 6574 273a 2063 7572 7265 6e63  'asset': currenc
+0001b840: 795b 2769 6427 5d2c 0a20 2020 2020 2020  y['id'],.       
+0001b850: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
+0001b860: 273a 2061 6d6f 756e 742c 0a20 2020 2020  ': amount,.     
+0001b870: 2020 2020 2020 2020 2020 2027 6164 6472             'addr
+0001b880: 6573 7327 3a20 6164 6472 6573 732c 0a20  ess': address,. 
+0001b890: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+0001b8a0: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+0001b8b0: 6520 3d20 6177 6169 7420 7365 6c66 2e70  e = await self.p
+0001b8c0: 7269 7661 7465 506f 7374 5769 7468 6472  rivatePostWithdr
+0001b8d0: 6177 2873 656c 662e 6578 7465 6e64 2872  aw(self.extend(r
+0001b8e0: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
+0001b8f0: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
+0001b900: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+0001b910: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+0001b920: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
+0001b930: 3a20 5b5d 2c0a 2020 2020 2020 2020 2020  : [],.          
+0001b940: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+0001b950: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
+0001b960: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0001b970: 2020 2272 6566 6964 223a 2022 4147 4253    "refid": "AGBS
+0001b980: 4f36 542d 5546 4d54 5451 2d49 374b 4753  O6T-UFMTTQ-I7KGS
+0001b990: 3622 0a20 2020 2020 2020 2020 2020 2023  6".            #
+0001b9a0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0001b9b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0001b9c0: 2020 2020 2020 2020 2020 2023 0a20 2020             #.   
+0001b9d0: 2020 2020 2020 2020 2072 6573 756c 7420           result 
+0001b9e0: 3d20 7365 6c66 2e73 6166 655f 6469 6374  = self.safe_dict
+0001b9f0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+0001ba00: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+0001ba10: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001ba20: 2e70 6172 7365 5f74 7261 6e73 6163 7469  .parse_transacti
+0001ba30: 6f6e 2872 6573 756c 742c 2063 7572 7265  on(result, curre
+0001ba40: 6e63 7929 0a20 2020 2020 2020 2072 6169  ncy).        rai
+0001ba50: 7365 2045 7863 6861 6e67 6545 7272 6f72  se ExchangeError
+0001ba60: 2873 656c 662e 6964 202b 2022 2077 6974  (self.id + " wit
+0001ba70: 6864 7261 7728 2920 7265 7175 6972 6573  hdraw() requires
+0001ba80: 2061 2027 6b65 7927 2070 6172 616d 6574   a 'key' paramet
+0001ba90: 6572 2877 6974 6864 7261 7761 6c20 6b65  er(withdrawal ke
+0001baa0: 7920 6e61 6d65 2c20 7570 206f 6e20 796f  y name, up on yo
+0001bab0: 7572 2061 6363 6f75 6e74 2922 290a 0a20  ur account)").. 
+0001bac0: 2020 2061 7379 6e63 2064 6566 2066 6574     async def fet
+0001bad0: 6368 5f70 6f73 6974 696f 6e73 2873 656c  ch_positions(sel
+0001bae0: 662c 2073 796d 626f 6c73 3a20 5374 7269  f, symbols: Stri
+0001baf0: 6e67 7320 3d20 4e6f 6e65 2c20 7061 7261  ngs = None, para
+0001bb00: 6d73 3d7b 7d29 3a0a 2020 2020 2020 2020  ms={}):.        
+0001bb10: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+0001bb20: 6820 616c 6c20 6f70 656e 2070 6f73 6974  h all open posit
+0001bb30: 696f 6e73 0a20 2020 2020 2020 203a 7365  ions.        :se
+0001bb40: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
+0001bb50: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
+0001bb60: 2374 6167 2f41 6363 6f75 6e74 2d44 6174  #tag/Account-Dat
+0001bb70: 612f 6f70 6572 6174 696f 6e2f 6765 744f  a/operation/getO
+0001bb80: 7065 6e50 6f73 6974 696f 6e73 0a20 2020  penPositions.   
+0001bb90: 2020 2020 203a 7061 7261 6d20 7374 725b       :param str[
+0001bba0: 5d7c 4e6f 6e65 2073 796d 626f 6c73 3a20  ]|None symbols: 
+0001bbb0: 6e6f 7420 7573 6564 2062 7920 6b72 616b  not used by krak
+0001bbc0: 656e 2066 6574 6368 506f 7369 7469 6f6e  en fetchPosition
+0001bbd0: 7328 290a 2020 2020 2020 2020 3a70 6172  s().        :par
+0001bbe0: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+0001bbf0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+0001bc00: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+0001bc10: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+0001bc20: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0001bc30: 203a 7265 7475 726e 7320 6469 6374 5b5d   :returns dict[]
+0001bc40: 3a20 6120 6c69 7374 206f 6620 6070 6f73  : a list of `pos
+0001bc50: 6974 696f 6e20 7374 7275 6374 7572 6520  ition structure 
+0001bc60: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
+0001bc70: 7874 2e63 6f6d 2f23 2f3f 6964 3d70 6f73  xt.com/#/?id=pos
+0001bc80: 6974 696f 6e2d 7374 7275 6374 7572 653e  ition-structure>
+0001bc90: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0001bca0: 2020 2020 2020 6177 6169 7420 7365 6c66        await self
+0001bcb0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0001bcc0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0001bcd0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0001bce0: 2320 2774 7869 6427 3a20 2763 6f6d 6d61  # 'txid': 'comma
+0001bcf0: 2064 656c 696d 6974 6564 206c 6973 7420   delimited list 
+0001bd00: 6f66 2074 7261 6e73 6163 7469 6f6e 2069  of transaction i
+0001bd10: 6473 2074 6f20 7265 7374 7269 6374 206f  ds to restrict o
+0001bd20: 7574 7075 7420 746f 272c 0a20 2020 2020  utput to',.     
+0001bd30: 2020 2020 2020 2023 2027 646f 6361 6c63         # 'docalc
+0001bd40: 7327 3a20 4661 6c73 652c 2020 2320 7768  s': False,  # wh
+0001bd50: 6574 6865 7220 6f72 206e 6f74 2074 6f20  ether or not to 
+0001bd60: 696e 636c 7564 6520 7072 6f66 6974 2f6c  include profit/l
+0001bd70: 6f73 7320 6361 6c63 756c 6174 696f 6e73  oss calculations
+0001bd80: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+0001bd90: 636f 6e73 6f6c 6964 6174 696f 6e27 3a20  consolidation': 
+0001bda0: 276d 6172 6b65 7427 2c20 2023 2077 6861  'market',  # wha
+0001bdb0: 7420 746f 2063 6f6e 736f 6c69 6461 7465  t to consolidate
+0001bdc0: 2074 6865 2070 6f73 6974 696f 6e73 2064   the positions d
+0001bdd0: 6174 6120 6172 6f75 6e64 2c20 6d61 726b  ata around, mark
+0001bde0: 6574 2077 696c 6c20 636f 6e73 6f6c 6964  et will consolid
+0001bdf0: 6174 6520 706f 7369 7469 6f6e 7320 6261  ate positions ba
+0001be00: 7365 6420 6f6e 206d 6172 6b65 7420 7061  sed on market pa
+0001be10: 6972 0a20 2020 2020 2020 207d 0a20 2020  ir.        }.   
+0001be20: 2020 2020 2072 6573 706f 6e73 6520 3d20       response = 
+0001be30: 6177 6169 7420 7365 6c66 2e70 7269 7661  await self.priva
+0001be40: 7465 506f 7374 4f70 656e 506f 7369 7469  tePostOpenPositi
+0001be50: 6f6e 7328 7365 6c66 2e65 7874 656e 6428  ons(self.extend(
+0001be60: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
+0001be70: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+0001be80: 2020 2020 2320 6e6f 2063 6f6e 736f 6c69      # no consoli
+0001be90: 6461 7469 6f6e 0a20 2020 2020 2020 2023  dation.        #
+0001bea0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0001beb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001bec0: 2020 2022 6572 726f 7222 3a20 5b5d 2c0a     "error": [],.
+0001bed0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001bee0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+0001bef0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001bf00: 2020 2020 2754 4755 464d 592d 464c 4553      'TGUFMY-FLES
+0001bf10: 4a2d 5659 4958 334a 273a 207b 0a20 2020  J-VYIX3J': {.   
+0001bf20: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001bf30: 2020 2020 2020 2022 6f72 6465 7274 7869         "ordertxi
+0001bf40: 6422 3a20 224f 334c 524e 552d 5a4b 4447  d": "O3LRNU-ZKDG
+0001bf50: 352d 584e 4344 4652 222c 0a20 2020 2020  5-XNCDFR",.     
+0001bf60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001bf70: 2020 2020 2022 706f 7373 7461 7475 7322       "posstatus"
+0001bf80: 3a20 226f 7065 6e22 2c0a 2020 2020 2020  : "open",.      
+0001bf90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001bfa0: 2020 2020 2270 6169 7222 3a20 2245 5448      "pair": "ETH
+0001bfb0: 5553 4454 222c 0a20 2020 2020 2020 2023  USDT",.        #
+0001bfc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bfd0: 2022 7469 6d65 223a 2020 3136 3131 3535   "time":  161155
+0001bfe0: 3732 3331 2e34 3538 342c 0a20 2020 2020  7231.4584,.     
+0001bff0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001c000: 2020 2020 2022 7479 7065 223a 2022 6275       "type": "bu
+0001c010: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
+0001c020: 2020 2020 2020 2020 2020 2020 2020 226f                "o
+0001c030: 7264 6572 7479 7065 223a 2022 6d61 726b  rdertype": "mark
+0001c040: 6574 222c 0a20 2020 2020 2020 2023 2020  et",.        #  
+0001c050: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001c060: 636f 7374 223a 2022 3238 2e34 3938 3030  cost": "28.49800
+0001c070: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+0001c080: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
+0001c090: 6522 3a20 2230 2e30 3739 3739 222c 0a20  e": "0.07979",. 
+0001c0a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001c0b0: 2020 2020 2020 2020 2022 766f 6c22 3a20           "vol": 
+0001c0c0: 2230 2e30 3230 3030 3030 3022 2c0a 2020  "0.02000000",.  
+0001c0d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001c0e0: 2020 2020 2020 2020 2276 6f6c 5f63 6c6f          "vol_clo
+0001c0f0: 7365 6422 3a20 2230 2e30 3030 3030 3030  sed": "0.0000000
+0001c100: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0001c110: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0001c120: 6172 6769 6e22 3a20 2231 342e 3234 3930  argin": "14.2490
+0001c130: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0001c140: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+0001c150: 6572 6d73 223a 2022 302e 3032 3030 2520  erms": "0.0200% 
+0001c160: 7065 7220 3420 686f 7572 7322 2c0a 2020  per 4 hours",.  
+0001c170: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001c180: 2020 2020 2020 2020 2272 6f6c 6c6f 7665          "rollove
+0001c190: 7274 6d22 3a20 2231 3631 3135 3731 3633  rtm": "161157163
+0001c1a0: 3122 2c0a 2020 2020 2020 2020 2320 2020  1",.        #   
+0001c1b0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+0001c1c0: 6973 6322 3a20 2222 2c0a 2020 2020 2020  isc": "",.      
+0001c1d0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001c1e0: 2020 2020 226f 666c 6167 7322 3a20 2222      "oflags": ""
+0001c1f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001c200: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001c210: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
+0001c220: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0001c230: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0001c240: 2063 6f6e 736f 6c69 6461 7469 6f6e 2062   consolidation b
+0001c250: 7920 6d61 726b 6574 0a20 2020 2020 2020  y market.       
+0001c260: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0001c270: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0001c280: 2020 2020 2022 6572 726f 7222 3a20 5b5d       "error": []
+0001c290: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0001c2a0: 2020 2020 2272 6573 756c 7422 3a20 5b0a      "result": [.
+0001c2b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001c2c0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
+0001c2d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0001c2e0: 2020 2270 6169 7222 3a20 2245 5448 5553    "pair": "ETHUS
+0001c2f0: 4454 222c 0a20 2020 2020 2020 2023 2020  DT",.        #  
+0001c300: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001c310: 706f 7369 7469 6f6e 7322 3a20 2231 222c  positions": "1",
+0001c320: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001c330: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+0001c340: 223a 2022 6275 7922 2c0a 2020 2020 2020  ": "buy",.      
+0001c350: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001c360: 2020 2020 226c 6576 6572 6167 6522 3a20      "leverage": 
+0001c370: 2232 2e30 3030 3030 222c 0a20 2020 2020  "2.00000",.     
+0001c380: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001c390: 2020 2020 2022 636f 7374 223a 2022 3238       "cost": "28
+0001c3a0: 2e34 3938 3030 222c 0a20 2020 2020 2020  .49800",.       
+0001c3b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0001c3c0: 2020 2022 6665 6522 3a20 2230 2e30 3739     "fee": "0.079
+0001c3d0: 3739 222c 0a20 2020 2020 2020 2023 2020  79",.        #  
+0001c3e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001c3f0: 766f 6c22 3a20 2230 2e30 3230 3030 3030  vol": "0.0200000
+0001c400: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0001c410: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+0001c420: 6f6c 5f63 6c6f 7365 6422 3a20 2230 2e30  ol_closed": "0.0
+0001c430: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0001c440: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001c450: 2020 2020 226d 6172 6769 6e22 3a20 2231      "margin": "1
+0001c460: 342e 3234 3930 3022 0a20 2020 2020 2020  4.24900".       
+0001c470: 2023 2020 2020 2020 2020 2020 2020 207d   #             }
+0001c480: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001c490: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
+0001c4a0: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0001c4b0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0001c4c0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+0001c4d0: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
+0001c4e0: 7427 290a 2020 2020 2020 2020 2320 746f  t').        # to
+0001c4f0: 646f 2075 6e69 6679 2070 6172 7365 506f  do unify parsePo
+0001c500: 7369 7469 6f6e 2f70 6172 7365 506f 7369  sition/parsePosi
+0001c510: 7469 6f6e 730a 2020 2020 2020 2020 7265  tions.        re
+0001c520: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
+0001c530: 2064 6566 2070 6172 7365 5f61 6363 6f75   def parse_accou
+0001c540: 6e74 5f74 7970 6528 7365 6c66 2c20 6163  nt_type(self, ac
+0001c550: 636f 756e 7429 3a0a 2020 2020 2020 2020  count):.        
+0001c560: 6163 636f 756e 7442 7954 7970 6520 3d20  accountByType = 
+0001c570: 7b0a 2020 2020 2020 2020 2020 2020 2773  {.            's
+0001c580: 706f 7427 3a20 2753 706f 7420 5761 6c6c  pot': 'Spot Wall
+0001c590: 6574 272c 0a20 2020 2020 2020 2020 2020  et',.           
+0001c5a0: 2027 7377 6170 273a 2027 4675 7475 7265   'swap': 'Future
+0001c5b0: 7320 5761 6c6c 6574 272c 0a20 2020 2020  s Wallet',.     
+0001c5c0: 2020 2020 2020 2027 6675 7475 7265 273a         'future':
+0001c5d0: 2027 4675 7475 7265 7320 5761 6c6c 6574   'Futures Wallet
+0001c5e0: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
+0001c5f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0001c600: 2e73 6166 655f 7374 7269 6e67 2861 6363  .safe_string(acc
+0001c610: 6f75 6e74 4279 5479 7065 2c20 6163 636f  ountByType, acco
+0001c620: 756e 742c 2061 6363 6f75 6e74 290a 0a20  unt, account).. 
+0001c630: 2020 2061 7379 6e63 2064 6566 2074 7261     async def tra
+0001c640: 6e73 6665 725f 6f75 7428 7365 6c66 2c20  nsfer_out(self, 
+0001c650: 636f 6465 3a20 7374 722c 2061 6d6f 756e  code: str, amoun
+0001c660: 742c 2070 6172 616d 733d 7b7d 293a 0a20  t, params={}):. 
+0001c670: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001c680: 2020 2074 7261 6e73 6665 7220 6672 6f6d     transfer from
+0001c690: 2073 706f 7420 7761 6c6c 6574 2074 6f20   spot wallet to 
+0001c6a0: 6675 7475 7265 7320 7761 6c6c 6574 0a20  futures wallet. 
+0001c6b0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
+0001c6c0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
+0001c6d0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f55  .com/rest/#tag/U
+0001c6e0: 7365 722d 4675 6e64 696e 672f 6f70 6572  ser-Funding/oper
+0001c6f0: 6174 696f 6e2f 7761 6c6c 6574 5472 616e  ation/walletTran
+0001c700: 7366 6572 0a20 2020 2020 2020 203a 7061  sfer.        :pa
+0001c710: 7261 6d20 7374 7220 636f 6465 3a20 556e  ram str code: Un
+0001c720: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0001c730: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0001c740: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0001c750: 2053 697a 6520 6f66 2074 6865 2074 7261   Size of the tra
+0001c760: 6e73 6665 720a 2020 2020 2020 2020 3a70  nsfer.        :p
+0001c770: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
+0001c780: 735d 3a20 4578 6368 616e 6765 2073 7065  s]: Exchange spe
+0001c790: 6369 6669 6320 7061 7261 6d65 7465 7273  cific parameters
+0001c7a0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0001c7b0: 733a 2061 2060 7472 616e 7366 6572 2073  s: a `transfer s
+0001c7c0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
+0001c7d0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0001c7e0: 232f 3f69 643d 7472 616e 7366 6572 2d73  #/?id=transfer-s
+0001c7f0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0001c800: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+0001c810: 6574 7572 6e20 6177 6169 7420 7365 6c66  eturn await self
+0001c820: 2e74 7261 6e73 6665 7228 636f 6465 2c20  .transfer(code, 
+0001c830: 616d 6f75 6e74 2c20 2773 706f 7427 2c20  amount, 'spot', 
+0001c840: 2773 7761 7027 2c20 7061 7261 6d73 290a  'swap', params).
+0001c850: 0a20 2020 2061 7379 6e63 2064 6566 2074  .    async def t
+0001c860: 7261 6e73 6665 7228 7365 6c66 2c20 636f  ransfer(self, co
+0001c870: 6465 3a20 7374 722c 2061 6d6f 756e 743a  de: str, amount:
+0001c880: 2066 6c6f 6174 2c20 6672 6f6d 4163 636f   float, fromAcco
+0001c890: 756e 743a 2073 7472 2c20 746f 4163 636f  unt: str, toAcco
+0001c8a0: 756e 743a 2073 7472 2c20 7061 7261 6d73  unt: str, params
+0001c8b0: 3d7b 7d29 202d 3e20 5472 616e 7366 6572  ={}) -> Transfer
+0001c8c0: 456e 7472 793a 0a20 2020 2020 2020 2022  Entry:.        "
+0001c8d0: 2222 0a20 2020 2020 2020 203a 7365 653a  "".        :see:
+0001c8e0: 2068 7474 7073 3a2f 2f64 6f63 732e 6b72   https://docs.kr
+0001c8f0: 616b 656e 2e63 6f6d 2f72 6573 742f 2374  aken.com/rest/#t
+0001c900: 6167 2f55 7365 722d 4675 6e64 696e 672f  ag/User-Funding/
+0001c910: 6f70 6572 6174 696f 6e2f 7761 6c6c 6574  operation/wallet
+0001c920: 5472 616e 7366 6572 0a20 2020 2020 2020  Transfer.       
+0001c930: 2074 7261 6e73 6665 7273 2063 7572 7265   transfers curre
+0001c940: 6e63 6965 7320 6265 7477 6565 6e20 7375  ncies between su
+0001c950: 622d 6163 636f 756e 7473 286f 6e6c 7920  b-accounts(only 
+0001c960: 7370 6f74 2d3e 7377 6170 2064 6972 6563  spot->swap direc
+0001c970: 7469 6f6e 2069 7320 7375 7070 6f72 7465  tion is supporte
+0001c980: 6429 0a20 2020 2020 2020 203a 7061 7261  d).        :para
+0001c990: 6d20 7374 7220 636f 6465 3a20 556e 6966  m str code: Unif
+0001c9a0: 6965 6420 6375 7272 656e 6379 2063 6f64  ied currency cod
+0001c9b0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
+0001c9c0: 2066 6c6f 6174 2061 6d6f 756e 743a 2053   float amount: S
+0001c9d0: 697a 6520 6f66 2074 6865 2074 7261 6e73  ize of the trans
+0001c9e0: 6665 720a 2020 2020 2020 2020 3a70 6172  fer.        :par
+0001c9f0: 616d 2073 7472 2066 726f 6d41 6363 6f75  am str fromAccou
+0001ca00: 6e74 3a20 2773 706f 7427 206f 7220 2753  nt: 'spot' or 'S
+0001ca10: 706f 7420 5761 6c6c 6574 270a 2020 2020  pot Wallet'.    
+0001ca20: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+0001ca30: 6f41 6363 6f75 6e74 3a20 2773 7761 7027  oAccount: 'swap'
+0001ca40: 206f 7220 2746 7574 7572 6573 2057 616c   or 'Futures Wal
+0001ca50: 6c65 7427 0a20 2020 2020 2020 203a 7061  let'.        :pa
+0001ca60: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
+0001ca70: 5d3a 2045 7863 6861 6e67 6520 7370 6563  ]: Exchange spec
+0001ca80: 6966 6963 2070 6172 616d 6574 6572 730a  ific parameters.
+0001ca90: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+0001caa0: 3a20 6120 6074 7261 6e73 6665 7220 7374  : a `transfer st
+0001cab0: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
+0001cac0: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+0001cad0: 2f3f 6964 3d74 7261 6e73 6665 722d 7374  /?id=transfer-st
+0001cae0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+0001caf0: 2020 2222 220a 2020 2020 2020 2020 6177    """.        aw
+0001cb00: 6169 7420 7365 6c66 2e6c 6f61 645f 6d61  ait self.load_ma
+0001cb10: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+0001cb20: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
+0001cb30: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
+0001cb40: 2020 2020 2020 2066 726f 6d41 6363 6f75         fromAccou
+0001cb50: 6e74 203d 2073 656c 662e 7061 7273 655f  nt = self.parse_
+0001cb60: 6163 636f 756e 745f 7479 7065 2866 726f  account_type(fro
+0001cb70: 6d41 6363 6f75 6e74 290a 2020 2020 2020  mAccount).      
+0001cb80: 2020 746f 4163 636f 756e 7420 3d20 7365    toAccount = se
+0001cb90: 6c66 2e70 6172 7365 5f61 6363 6f75 6e74  lf.parse_account
+0001cba0: 5f74 7970 6528 746f 4163 636f 756e 7429  _type(toAccount)
+0001cbb0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
+0001cbc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0001cbd0: 2027 616d 6f75 6e74 273a 2073 656c 662e   'amount': self.
+0001cbe0: 6375 7272 656e 6379 5f74 6f5f 7072 6563  currency_to_prec
+0001cbf0: 6973 696f 6e28 636f 6465 2c20 616d 6f75  ision(code, amou
+0001cc00: 6e74 292c 0a20 2020 2020 2020 2020 2020  nt),.           
+0001cc10: 2027 6672 6f6d 273a 2066 726f 6d41 6363   'from': fromAcc
+0001cc20: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
+0001cc30: 2020 2774 6f27 3a20 746f 4163 636f 756e    'to': toAccoun
+0001cc40: 742c 0a20 2020 2020 2020 2020 2020 2027  t,.            '
+0001cc50: 6173 7365 7427 3a20 6375 7272 656e 6379  asset': currency
+0001cc60: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+0001cc70: 7d0a 2020 2020 2020 2020 6966 2066 726f  }.        if fro
+0001cc80: 6d41 6363 6f75 6e74 2021 3d20 2753 706f  mAccount != 'Spo
+0001cc90: 7420 5761 6c6c 6574 273a 0a20 2020 2020  t Wallet':.     
+0001cca0: 2020 2020 2020 2072 6169 7365 2042 6164         raise Bad
+0001ccb0: 5265 7175 6573 7428 7365 6c66 2e69 6420  Request(self.id 
+0001ccc0: 2b20 2720 7472 616e 7366 6572 2063 616e  + ' transfer can
+0001ccd0: 6e6f 7420 7472 616e 7366 6572 2066 726f  not transfer fro
+0001cce0: 6d20 2720 2b20 6672 6f6d 4163 636f 756e  m ' + fromAccoun
+0001ccf0: 7420 2b20 2720 746f 2027 202b 2074 6f41  t + ' to ' + toA
+0001cd00: 6363 6f75 6e74 202b 2027 2e20 5573 6520  ccount + '. Use 
+0001cd10: 6b72 616b 656e 6675 7475 7265 7320 696e  krakenfutures in
+0001cd20: 7374 6561 6420 746f 2074 7261 6e73 6665  stead to transfe
+0001cd30: 7220 6672 6f6d 2074 6865 2066 7574 7572  r from the futur
+0001cd40: 6573 2061 6363 6f75 6e74 2e27 290a 2020  es account.').  
+0001cd50: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+0001cd60: 2061 7761 6974 2073 656c 662e 7072 6976   await self.priv
+0001cd70: 6174 6550 6f73 7457 616c 6c65 7454 7261  atePostWalletTra
+0001cd80: 6e73 6665 7228 7365 6c66 2e65 7874 656e  nsfer(self.exten
+0001cd90: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+0001cda0: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+0001cdb0: 2020 2020 2020 2320 2020 7b0a 2020 2020        #   {.    
+0001cdc0: 2020 2020 2320 2020 2020 2020 2265 7272      #       "err
+0001cdd0: 6f72 223a 5b0a 2020 2020 2020 2020 2320  or":[.        # 
+0001cde0: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+0001cdf0: 2023 2020 2020 2020 2022 7265 7375 6c74   #       "result
+0001ce00: 223a 7b0a 2020 2020 2020 2020 2320 2020  ":{.        #   
+0001ce10: 2020 2020 2020 2022 7265 6669 6422 3a22         "refid":"
+0001ce20: 424f 4955 5349 462d 4d37 444c 4d4e 2d55  BOIUSIF-M7DLMN-U
+0001ce30: 585a 3350 3522 0a20 2020 2020 2020 2023  XZ3P5".        #
+0001ce40: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001ce50: 2023 2020 207d 0a20 2020 2020 2020 2023   #   }.        #
+0001ce60: 0a20 2020 2020 2020 2074 7261 6e73 6665  .        transfe
+0001ce70: 7220 3d20 7365 6c66 2e70 6172 7365 5f74  r = self.parse_t
+0001ce80: 7261 6e73 6665 7228 7265 7370 6f6e 7365  ransfer(response
+0001ce90: 2c20 6375 7272 656e 6379 290a 2020 2020  , currency).    
+0001cea0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0001ceb0: 6578 7465 6e64 2874 7261 6e73 6665 722c  extend(transfer,
+0001cec0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0001ced0: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
+0001cee0: 0a20 2020 2020 2020 2020 2020 2027 6672  .            'fr
+0001cef0: 6f6d 4163 636f 756e 7427 3a20 6672 6f6d  omAccount': from
+0001cf00: 4163 636f 756e 742c 0a20 2020 2020 2020  Account,.       
+0001cf10: 2020 2020 2027 746f 4163 636f 756e 7427       'toAccount'
+0001cf20: 3a20 746f 4163 636f 756e 742c 0a20 2020  : toAccount,.   
+0001cf30: 2020 2020 207d 290a 0a20 2020 2064 6566       })..    def
+0001cf40: 2070 6172 7365 5f74 7261 6e73 6665 7228   parse_transfer(
+0001cf50: 7365 6c66 2c20 7472 616e 7366 6572 2c20  self, transfer, 
+0001cf60: 6375 7272 656e 6379 3a20 4375 7272 656e  currency: Curren
+0001cf70: 6379 203d 204e 6f6e 6529 3a0a 2020 2020  cy = None):.    
+0001cf80: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0001cf90: 7472 616e 7366 6572 0a20 2020 2020 2020  transfer.       
+0001cfa0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+0001cfb0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0001cfc0: 2020 2022 6572 726f 7222 3a5b 0a20 2020     "error":[.   
+0001cfd0: 2020 2020 2023 2020 2020 2020 2020 5d2c       #        ],
+0001cfe0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001cff0: 2020 2272 6573 756c 7422 3a7b 0a20 2020    "result":{.   
+0001d000: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001d010: 2022 7265 6669 6422 3a22 424f 4955 5349   "refid":"BOIUSI
+0001d020: 462d 4d37 444c 4d4e 2d55 585a 3350 3522  F-M7DLMN-UXZ3P5"
+0001d030: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001d040: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+0001d050: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0001d060: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+0001d070: 6c66 2e73 6166 655f 7661 6c75 6528 7472  lf.safe_value(tr
+0001d080: 616e 7366 6572 2c20 2772 6573 756c 7427  ansfer, 'result'
+0001d090: 2c20 7b7d 290a 2020 2020 2020 2020 7265  , {}).        re
+0001d0a0: 6669 6420 3d20 7365 6c66 2e73 6166 655f  fid = self.safe_
+0001d0b0: 7374 7269 6e67 2872 6573 756c 742c 2027  string(result, '
+0001d0c0: 7265 6669 6427 290a 2020 2020 2020 2020  refid').        
+0001d0d0: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
+0001d0e0: 2020 2020 2027 696e 666f 273a 2074 7261       'info': tra
+0001d0f0: 6e73 6665 722c 0a20 2020 2020 2020 2020  nsfer,.         
+0001d100: 2020 2027 6964 273a 2072 6566 6964 2c0a     'id': refid,.
+0001d110: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
+0001d120: 6573 7461 6d70 273a 204e 6f6e 652c 0a20  estamp': None,. 
+0001d130: 2020 2020 2020 2020 2020 2027 6461 7465             'date
+0001d140: 7469 6d65 273a 204e 6f6e 652c 0a20 2020  time': None,.   
+0001d150: 2020 2020 2020 2020 2027 6375 7272 656e           'curren
+0001d160: 6379 273a 2073 656c 662e 7361 6665 5f73  cy': self.safe_s
+0001d170: 7472 696e 6728 6375 7272 656e 6379 2c20  tring(currency, 
+0001d180: 2763 6f64 6527 292c 0a20 2020 2020 2020  'code'),.       
+0001d190: 2020 2020 2027 616d 6f75 6e74 273a 204e       'amount': N
+0001d1a0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0001d1b0: 2027 6672 6f6d 4163 636f 756e 7427 3a20   'fromAccount': 
+0001d1c0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+0001d1d0: 2020 2774 6f41 6363 6f75 6e74 273a 204e    'toAccount': N
+0001d1e0: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0001d1f0: 2027 7374 6174 7573 273a 2027 7375 6365   'status': 'suce
+0001d200: 7373 272c 0a20 2020 2020 2020 207d 0a0a  ss',.        }..
+0001d210: 2020 2020 6465 6620 7369 676e 2873 656c      def sign(sel
+0001d220: 662c 2070 6174 682c 2061 7069 3d27 7075  f, path, api='pu
+0001d230: 626c 6963 272c 206d 6574 686f 643d 2747  blic', method='G
+0001d240: 4554 272c 2070 6172 616d 733d 7b7d 2c20  ET', params={}, 
+0001d250: 6865 6164 6572 733d 4e6f 6e65 2c20 626f  headers=None, bo
+0001d260: 6479 3d4e 6f6e 6529 3a0a 2020 2020 2020  dy=None):.      
+0001d270: 2020 7572 6c20 3d20 272f 2720 2b20 7365    url = '/' + se
+0001d280: 6c66 2e76 6572 7369 6f6e 202b 2027 2f27  lf.version + '/'
+0001d290: 202b 2061 7069 202b 2027 2f27 202b 2070   + api + '/' + p
+0001d2a0: 6174 680a 2020 2020 2020 2020 6966 2061  ath.        if a
+0001d2b0: 7069 203d 3d20 2770 7562 6c69 6327 3a0a  pi == 'public':.
+0001d2c0: 2020 2020 2020 2020 2020 2020 6966 2070              if p
+0001d2d0: 6172 616d 733a 0a20 2020 2020 2020 2020  arams:.         
+0001d2e0: 2020 2020 2020 2023 2075 726c 656e 636f         # urlenco
+0001d2f0: 6465 4e65 7374 6564 2069 7320 7573 6564  deNested is used
+0001d300: 2074 6f20 6164 6472 6573 7320 6874 7470   to address http
+0001d310: 733a 2f2f 6769 7468 7562 2e63 6f6d 2f63  s://github.com/c
+0001d320: 6378 742f 6363 7874 2f69 7373 7565 732f  cxt/ccxt/issues/
+0001d330: 3132 3837 320a 2020 2020 2020 2020 2020  12872.          
+0001d340: 2020 2020 2020 7572 6c20 2b3d 2027 3f27        url += '?'
+0001d350: 202b 2073 656c 662e 7572 6c65 6e63 6f64   + self.urlencod
+0001d360: 655f 6e65 7374 6564 2870 6172 616d 7329  e_nested(params)
+0001d370: 0a20 2020 2020 2020 2065 6c69 6620 6170  .        elif ap
+0001d380: 6920 3d3d 2027 7072 6976 6174 6527 3a0a  i == 'private':.
+0001d390: 2020 2020 2020 2020 2020 2020 6973 4361              isCa
+0001d3a0: 6e63 656c 4f72 6465 7242 6174 6368 203d  ncelOrderBatch =
+0001d3b0: 2028 7061 7468 203d 3d20 2743 616e 6365   (path == 'Cance
+0001d3c0: 6c4f 7264 6572 4261 7463 6827 290a 2020  lOrderBatch').  
+0001d3d0: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+0001d3e0: 6865 636b 5f72 6571 7569 7265 645f 6372  heck_required_cr
+0001d3f0: 6564 656e 7469 616c 7328 290a 2020 2020  edentials().    
+0001d400: 2020 2020 2020 2020 6e6f 6e63 6520 3d20          nonce = 
+0001d410: 7374 7228 7365 6c66 2e6e 6f6e 6365 2829  str(self.nonce()
+0001d420: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
+0001d430: 7572 6c65 6e63 6f64 654e 6573 7465 6420  urlencodeNested 
+0001d440: 6973 2075 7365 6420 746f 2061 6464 7265  is used to addre
+0001d450: 7373 2068 7474 7073 3a2f 2f67 6974 6875  ss https://githu
+0001d460: 622e 636f 6d2f 6363 7874 2f63 6378 742f  b.com/ccxt/ccxt/
+0001d470: 6973 7375 6573 2f31 3238 3732 0a20 2020  issues/12872.   
+0001d480: 2020 2020 2020 2020 2069 6620 6973 4361           if isCa
+0001d490: 6e63 656c 4f72 6465 7242 6174 6368 3a0a  ncelOrderBatch:.
+0001d4a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d4b0: 626f 6479 203d 2073 656c 662e 6a73 6f6e  body = self.json
+0001d4c0: 2873 656c 662e 6578 7465 6e64 287b 276e  (self.extend({'n
+0001d4d0: 6f6e 6365 273a 206e 6f6e 6365 7d2c 2070  once': nonce}, p
+0001d4e0: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0001d4f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001d500: 2020 2020 2020 2020 2020 626f 6479 203d            body =
+0001d510: 2073 656c 662e 7572 6c65 6e63 6f64 655f   self.urlencode_
+0001d520: 6e65 7374 6564 2873 656c 662e 6578 7465  nested(self.exte
+0001d530: 6e64 287b 276e 6f6e 6365 273a 206e 6f6e  nd({'nonce': non
+0001d540: 6365 7d2c 2070 6172 616d 7329 290a 2020  ce}, params)).  
+0001d550: 2020 2020 2020 2020 2020 6175 7468 203d            auth =
+0001d560: 2073 656c 662e 656e 636f 6465 286e 6f6e   self.encode(non
+0001d570: 6365 202b 2062 6f64 7929 0a20 2020 2020  ce + body).     
+0001d580: 2020 2020 2020 2068 6173 6820 3d20 7365         hash = se
+0001d590: 6c66 2e68 6173 6828 6175 7468 2c20 2773  lf.hash(auth, 's
+0001d5a0: 6861 3235 3627 2c20 2762 696e 6172 7927  ha256', 'binary'
+0001d5b0: 290a 2020 2020 2020 2020 2020 2020 6269  ).            bi
+0001d5c0: 6e61 7279 203d 2073 656c 662e 656e 636f  nary = self.enco
+0001d5d0: 6465 2875 726c 290a 2020 2020 2020 2020  de(url).        
+0001d5e0: 2020 2020 6269 6e68 6173 6820 3d20 7365      binhash = se
+0001d5f0: 6c66 2e62 696e 6172 795f 636f 6e63 6174  lf.binary_concat
+0001d600: 2862 696e 6172 792c 2068 6173 6829 0a20  (binary, hash). 
+0001d610: 2020 2020 2020 2020 2020 2073 6563 7265             secre
+0001d620: 7420 3d20 7365 6c66 2e62 6173 6536 345f  t = self.base64_
+0001d630: 746f 5f62 696e 6172 7928 7365 6c66 2e73  to_binary(self.s
+0001d640: 6563 7265 7429 0a20 2020 2020 2020 2020  ecret).         
+0001d650: 2020 2073 6967 6e61 7475 7265 203d 2073     signature = s
+0001d660: 656c 662e 686d 6163 2862 696e 6861 7368  elf.hmac(binhash
+0001d670: 2c20 7365 6372 6574 2c20 6861 7368 6c69  , secret, hashli
+0001d680: 622e 7368 6135 3132 2c20 2762 6173 6536  b.sha512, 'base6
+0001d690: 3427 290a 2020 2020 2020 2020 2020 2020  4').            
+0001d6a0: 6865 6164 6572 7320 3d20 7b0a 2020 2020  headers = {.    
+0001d6b0: 2020 2020 2020 2020 2020 2020 2741 5049              'API
+0001d6c0: 2d4b 6579 273a 2073 656c 662e 6170 694b  -Key': self.apiK
+0001d6d0: 6579 2c0a 2020 2020 2020 2020 2020 2020  ey,.            
+0001d6e0: 2020 2020 2741 5049 2d53 6967 6e27 3a20      'API-Sign': 
+0001d6f0: 7369 676e 6174 7572 652c 0a20 2020 2020  signature,.     
+0001d700: 2020 2020 2020 2020 2020 2023 2027 436f             # 'Co
+0001d710: 6e74 656e 742d 5479 7065 273a 2027 6170  ntent-Type': 'ap
+0001d720: 706c 6963 6174 696f 6e2f 782d 7777 772d  plication/x-www-
+0001d730: 666f 726d 2d75 726c 656e 636f 6465 6427  form-urlencoded'
+0001d740: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
+0001d750: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001d760: 7343 616e 6365 6c4f 7264 6572 4261 7463  sCancelOrderBatc
+0001d770: 683a 0a20 2020 2020 2020 2020 2020 2020  h:.             
+0001d780: 2020 2068 6561 6465 7273 5b27 436f 6e74     headers['Cont
+0001d790: 656e 742d 5479 7065 275d 203d 2027 6170  ent-Type'] = 'ap
+0001d7a0: 706c 6963 6174 696f 6e2f 6a73 6f6e 270a  plication/json'.
+0001d7b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001d7c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d7d0: 2020 6865 6164 6572 735b 2743 6f6e 7465    headers['Conte
+0001d7e0: 6e74 2d54 7970 6527 5d20 3d20 2761 7070  nt-Type'] = 'app
+0001d7f0: 6c69 6361 7469 6f6e 2f78 2d77 7777 2d66  lication/x-www-f
+0001d800: 6f72 6d2d 7572 6c65 6e63 6f64 6564 270a  orm-urlencoded'.
+0001d810: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
+0001d820: 2020 2020 2020 2020 2020 7572 6c20 3d20            url = 
+0001d830: 272f 2720 2b20 7061 7468 0a20 2020 2020  '/' + path.     
+0001d840: 2020 2075 726c 203d 2073 656c 662e 7572     url = self.ur
+0001d850: 6c73 5b27 6170 6927 5d5b 6170 695d 202b  ls['api'][api] +
+0001d860: 2075 726c 0a20 2020 2020 2020 2072 6574   url.        ret
+0001d870: 7572 6e20 7b27 7572 6c27 3a20 7572 6c2c  urn {'url': url,
+0001d880: 2027 6d65 7468 6f64 273a 206d 6574 686f   'method': metho
+0001d890: 642c 2027 626f 6479 273a 2062 6f64 792c  d, 'body': body,
+0001d8a0: 2027 6865 6164 6572 7327 3a20 6865 6164   'headers': head
+0001d8b0: 6572 737d 0a0a 2020 2020 6465 6620 6e6f  ers}..    def no
+0001d8c0: 6e63 6528 7365 6c66 293a 0a20 2020 2020  nce(self):.     
+0001d8d0: 2020 2072 6574 7572 6e20 7365 6c66 2e6d     return self.m
+0001d8e0: 696c 6c69 7365 636f 6e64 7328 290a 0a20  illiseconds().. 
+0001d8f0: 2020 2064 6566 2068 616e 646c 655f 6572     def handle_er
+0001d900: 726f 7273 2873 656c 662c 2063 6f64 652c  rors(self, code,
+0001d910: 2072 6561 736f 6e2c 2075 726c 2c20 6d65   reason, url, me
+0001d920: 7468 6f64 2c20 6865 6164 6572 732c 2062  thod, headers, b
+0001d930: 6f64 792c 2072 6573 706f 6e73 652c 2072  ody, response, r
+0001d940: 6571 7565 7374 4865 6164 6572 732c 2072  equestHeaders, r
+0001d950: 6571 7565 7374 426f 6479 293a 0a20 2020  equestBody):.   
+0001d960: 2020 2020 2069 6620 636f 6465 203d 3d20       if code == 
+0001d970: 3532 303a 0a20 2020 2020 2020 2020 2020  520:.           
+0001d980: 2072 6169 7365 2045 7863 6861 6e67 654e   raise ExchangeN
+0001d990: 6f74 4176 6169 6c61 626c 6528 7365 6c66  otAvailable(self
+0001d9a0: 2e69 6420 2b20 2720 2720 2b20 7374 7228  .id + ' ' + str(
+0001d9b0: 636f 6465 2920 2b20 2720 2720 2b20 7265  code) + ' ' + re
+0001d9c0: 6173 6f6e 290a 2020 2020 2020 2020 2320  ason).        # 
+0001d9d0: 746f 646f 3a20 7265 7772 6974 6520 7365  todo: rewrite se
+0001d9e0: 6c66 2066 6f72 2022 6272 6f61 6422 2065  lf for "broad" e
+0001d9f0: 7863 6570 7469 6f6e 7320 6d61 7463 6869  xceptions matchi
+0001da00: 6e67 0a20 2020 2020 2020 2069 6620 626f  ng.        if bo
+0001da10: 6479 2e66 696e 6428 2749 6e76 616c 6964  dy.find('Invalid
+0001da20: 206f 7264 6572 2729 203e 3d20 303a 0a20   order') >= 0:. 
+0001da30: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001da40: 2049 6e76 616c 6964 4f72 6465 7228 7365   InvalidOrder(se
+0001da50: 6c66 2e69 6420 2b20 2720 2720 2b20 626f  lf.id + ' ' + bo
+0001da60: 6479 290a 2020 2020 2020 2020 6966 2062  dy).        if b
+0001da70: 6f64 792e 6669 6e64 2827 496e 7661 6c69  ody.find('Invali
+0001da80: 6420 6e6f 6e63 6527 2920 3e3d 2030 3a0a  d nonce') >= 0:.
+0001da90: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0001daa0: 6520 496e 7661 6c69 644e 6f6e 6365 2873  e InvalidNonce(s
+0001dab0: 656c 662e 6964 202b 2027 2027 202b 2062  elf.id + ' ' + b
+0001dac0: 6f64 7929 0a20 2020 2020 2020 2069 6620  ody).        if 
+0001dad0: 626f 6479 2e66 696e 6428 2749 6e73 7566  body.find('Insuf
+0001dae0: 6669 6369 656e 7420 6675 6e64 7327 2920  ficient funds') 
+0001daf0: 3e3d 2030 3a0a 2020 2020 2020 2020 2020  >= 0:.          
+0001db00: 2020 7261 6973 6520 496e 7375 6666 6963    raise Insuffic
+0001db10: 6965 6e74 4675 6e64 7328 7365 6c66 2e69  ientFunds(self.i
+0001db20: 6420 2b20 2720 2720 2b20 626f 6479 290a  d + ' ' + body).
+0001db30: 2020 2020 2020 2020 6966 2062 6f64 792e          if body.
+0001db40: 6669 6e64 2827 4361 6e63 656c 2070 656e  find('Cancel pen
+0001db50: 6469 6e67 2729 203e 3d20 303a 0a20 2020  ding') >= 0:.   
+0001db60: 2020 2020 2020 2020 2072 6169 7365 2043           raise C
+0001db70: 616e 6365 6c50 656e 6469 6e67 2873 656c  ancelPending(sel
+0001db80: 662e 6964 202b 2027 2027 202b 2062 6f64  f.id + ' ' + bod
+0001db90: 7929 0a20 2020 2020 2020 2069 6620 626f  y).        if bo
+0001dba0: 6479 2e66 696e 6428 2749 6e76 616c 6964  dy.find('Invalid
+0001dbb0: 2061 7267 756d 656e 7473 3a76 6f6c 756d   arguments:volum
+0001dbc0: 6527 2920 3e3d 2030 3a0a 2020 2020 2020  e') >= 0:.      
+0001dbd0: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
+0001dbe0: 6c69 644f 7264 6572 2873 656c 662e 6964  lidOrder(self.id
+0001dbf0: 202b 2027 2027 202b 2062 6f64 7929 0a20   + ' ' + body). 
+0001dc00: 2020 2020 2020 2069 6620 626f 6479 2e66         if body.f
+0001dc10: 696e 6428 2752 6174 6520 6c69 6d69 7420  ind('Rate limit 
+0001dc20: 6578 6365 6564 6564 2729 203e 3d20 303a  exceeded') >= 0:
+0001dc30: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0001dc40: 7365 2052 6174 654c 696d 6974 4578 6365  se RateLimitExce
+0001dc50: 6564 6564 2873 656c 662e 6964 202b 2027  eded(self.id + '
+0001dc60: 2027 202b 2062 6f64 7929 0a20 2020 2020   ' + body).     
+0001dc70: 2020 2069 6620 7265 7370 6f6e 7365 2069     if response i
+0001dc80: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+0001dc90: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
+0001dca0: 2020 2020 2020 2020 6966 2062 6f64 795b          if body[
+0001dcb0: 305d 203d 3d20 277b 273a 0a20 2020 2020  0] == '{':.     
+0001dcc0: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+0001dcd0: 696e 7374 616e 6365 2872 6573 706f 6e73  instance(respons
+0001dce0: 652c 2073 7472 293a 0a20 2020 2020 2020  e, str):.       
+0001dcf0: 2020 2020 2020 2020 2069 6620 2765 7272           if 'err
+0001dd00: 6f72 2720 696e 2072 6573 706f 6e73 653a  or' in response:
+0001dd10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dd20: 2020 2020 206e 756d 4572 726f 7273 203d       numErrors =
+0001dd30: 206c 656e 2872 6573 706f 6e73 655b 2765   len(response['e
+0001dd40: 7272 6f72 275d 290a 2020 2020 2020 2020  rror']).        
+0001dd50: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0001dd60: 756d 4572 726f 7273 3a0a 2020 2020 2020  umErrors:.      
+0001dd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dd80: 2020 6d65 7373 6167 6520 3d20 7365 6c66    message = self
+0001dd90: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
+0001dda0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ddb0: 2020 2020 2020 2020 2066 6f72 2069 2069           for i i
+0001ddc0: 6e20 7261 6e67 6528 302c 206c 656e 2872  n range(0, len(r
+0001ddd0: 6573 706f 6e73 655b 2765 7272 6f72 275d  esponse['error']
+0001dde0: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+0001ddf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de00: 6572 726f 7220 3d20 7265 7370 6f6e 7365  error = response
+0001de10: 5b27 6572 726f 7227 5d5b 695d 0a20 2020  ['error'][i].   
 0001de20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001de30: 2020 2020 2065 7272 6f72 203d 2072 6573       error = res
-0001de40: 706f 6e73 655b 2765 7272 6f72 275d 5b69  ponse['error'][i
-0001de50: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-0001de60: 2020 2020 2020 2020 2020 2020 2020 7365                se
-0001de70: 6c66 2e74 6872 6f77 5f65 7861 6374 6c79  lf.throw_exactly
-0001de80: 5f6d 6174 6368 6564 5f65 7863 6570 7469  _matched_excepti
-0001de90: 6f6e 2873 656c 662e 6578 6365 7074 696f  on(self.exceptio
-0001dea0: 6e73 2c20 6572 726f 722c 206d 6573 7361  ns, error, messa
-0001deb0: 6765 290a 2020 2020 2020 2020 2020 2020  ge).            
-0001dec0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-0001ded0: 6520 4578 6368 616e 6765 4572 726f 7228  e ExchangeError(
-0001dee0: 6d65 7373 6167 6529 0a20 2020 2020 2020  message).       
-0001def0: 2072 6574 7572 6e20 4e6f 6e65 0a          return None.
+0001de30: 2020 2020 2020 2020 2073 656c 662e 7468           self.th
+0001de40: 726f 775f 6578 6163 746c 795f 6d61 7463  row_exactly_matc
+0001de50: 6865 645f 6578 6365 7074 696f 6e28 7365  hed_exception(se
+0001de60: 6c66 2e65 7863 6570 7469 6f6e 732c 2065  lf.exceptions, e
+0001de70: 7272 6f72 2c20 6d65 7373 6167 6529 0a20  rror, message). 
+0001de80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001de90: 2020 2020 2020 2072 6169 7365 2045 7863         raise Exc
+0001dea0: 6861 6e67 6545 7272 6f72 286d 6573 7361  hangeError(messa
+0001deb0: 6765 290a 2020 2020 2020 2020 7265 7475  ge).        retu
+0001dec0: 726e 204e 6f6e 650a                      rn None.
```

### Comparing `ccxt-4.2.90/ccxt/async_support/krakenfutures.py` & `ccxt-4.2.91/ccxt/async_support/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/kucoin.py` & `ccxt-4.2.91/ccxt/async_support/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/kucoinfutures.py` & `ccxt-4.2.91/ccxt/async_support/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/kuna.py` & `ccxt-4.2.91/ccxt/async_support/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/latoken.py` & `ccxt-4.2.91/ccxt/async_support/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/lbank.py` & `ccxt-4.2.91/ccxt/async_support/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/luno.py` & `ccxt-4.2.91/ccxt/async_support/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/lykke.py` & `ccxt-4.2.91/ccxt/async_support/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/mercado.py` & `ccxt-4.2.91/ccxt/async_support/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/mexc.py` & `ccxt-4.2.91/ccxt/async_support/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/ndax.py` & `ccxt-4.2.91/ccxt/async_support/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/novadax.py` & `ccxt-4.2.91/ccxt/async_support/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/oceanex.py` & `ccxt-4.2.91/ccxt/async_support/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/okcoin.py` & `ccxt-4.2.91/ccxt/async_support/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/okx.py` & `ccxt-4.2.91/ccxt/async_support/okx.py`

 * *Files 1% similar despite different names*

```diff
@@ -1232,15 +1232,15 @@
         #                 "state": "scheduled",  # ongoing, completed, canceled
         #                 "system": "classic",  # classic, unified
         #                 "title": "Classic Spot System Upgrade"
         #             },
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         dataLength = len(data)
         update = {
             'updated': None,
             'status': 'ok' if (dataLength == 0) else 'maintenance',
             'eta': None,
             'url': None,
             'info': response,
@@ -1273,16 +1273,16 @@
         #         "code": "0",
         #         "data": [
         #             {"ts": "1621247923668"}
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         return self.safe_integer(first, 'ts')
 
     async def fetch_accounts(self, params={}) -> List[Account]:
         """
         fetch all the accounts associated with a profile
         :see: https://www.okx.com/docs-v5/en/#trading-account-rest-api-get-account-configuration
         :param dict [params]: extra parameters specific to the exchange API endpoint
@@ -1304,15 +1304,15 @@
         #                 "posMode": "long_short_mode",
         #                 "uid": "88018754289672195"
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         result = []
         for i in range(0, len(data)):
             account = data[i]
             accountId = self.safe_string(account, 'uid')
             type = self.safe_string(account, 'acctLv')
             result.append({
                 'id': accountId,
@@ -1326,15 +1326,15 @@
     async def fetch_markets(self, params={}) -> List[Market]:
         """
         retrieves data on all markets for okx
         :see: https://www.okx.com/docs-v5/en/#rest-api-public-data-get-instruments
         :param dict [params]: extra parameters specific to the exchange API endpoint
         :returns dict[]: an array of objects representing market data
         """
-        types = self.safe_value(self.options, 'fetchMarkets')
+        types = self.safe_list(self.options, 'fetchMarkets', [])
         promises = []
         result = []
         for i in range(0, len(types)):
             promises.append(self.fetch_markets_by_type(types[i], params))
         promises = await asyncio.gather(*promises)
         for i in range(0, len(promises)):
             result = self.array_concat(result, promises[i])
@@ -1423,15 +1423,15 @@
             elif option:
                 strikePrice = self.safe_string(market, 'stk')
                 optionType = self.safe_string(market, 'optType')
                 ymd = self.yymmdd(expiry)
                 symbol = symbol + '-' + ymd + '-' + strikePrice + '-' + optionType
                 optionType = 'put' if (optionType == 'P') else 'call'
         tickSize = self.safe_string(market, 'tickSz')
-        fees = self.safe_value_2(self.fees, type, 'trading', {})
+        fees = self.safe_dict_2(self.fees, type, 'trading', {})
         maxLeverage = self.safe_string(market, 'lever', '1')
         maxLeverage = Precise.string_max(maxLeverage, '1')
         maxSpotCost = self.safe_number(market, 'maxMktSz')
         return self.extend(fees, {
             'id': id,
             'symbol': symbol,
             'base': base,
@@ -1482,25 +1482,25 @@
         })
 
     async def fetch_markets_by_type(self, type, params={}):
         request = {
             'instType': self.convert_to_instrument_type(type),
         }
         if type == 'option':
-            optionsUnderlying = self.safe_value(self.options, 'defaultUnderlying', ['BTC-USD', 'ETH-USD'])
+            optionsUnderlying = self.safe_list(self.options, 'defaultUnderlying', ['BTC-USD', 'ETH-USD'])
             promises = []
             for i in range(0, len(optionsUnderlying)):
                 underlying = optionsUnderlying[i]
                 request['uly'] = underlying
                 promises.append(self.publicGetPublicInstruments(self.extend(request, params)))
             promisesResult = await asyncio.gather(*promises)
             markets = []
             for i in range(0, len(promisesResult)):
-                res = self.safe_value(promisesResult, i, {})
-                options = self.safe_value(res, 'data', [])
+                res = self.safe_dict(promisesResult, i, {})
+                options = self.safe_list(res, 'data', [])
                 markets = self.array_concat(markets, options)
             return self.parse_markets(markets)
         response = await self.publicGetPublicInstruments(self.extend(request, params))
         #
         # spot, future, swap, option
         #
         #     {
@@ -1529,15 +1529,15 @@
         #                 "tickSz": "0.1",
         #                 "uly": ""
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        dataResponse = self.safe_value(response, 'data', [])
+        dataResponse = self.safe_list(response, 'data', [])
         return self.parse_markets(dataResponse)
 
     def safe_network(self, networkId):
         networksById = {
             'Bitcoin': 'BTC',
             'Omni': 'OMNI',
             'TRON': 'TRC20',
@@ -1603,15 +1603,15 @@
         #                "wdTickSz": "3"
         #            },
         #            ...
         #        ],
         #        "msg": ""
         #    }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         result = {}
         dataByCurrencyId = self.group_by(data, 'ccy')
         currencyIds = list(dataByCurrencyId.keys())
         for i in range(0, len(currencyIds)):
             currencyId = currencyIds[i]
             currency = self.safe_currency(currencyId)
             code = currency['code']
@@ -1619,19 +1619,19 @@
             networks = {}
             currencyActive = False
             depositEnabled = False
             withdrawEnabled = False
             maxPrecision = None
             for j in range(0, len(chains)):
                 chain = chains[j]
-                canDeposit = self.safe_value(chain, 'canDep')
+                canDeposit = self.safe_bool(chain, 'canDep')
                 depositEnabled = canDeposit if (canDeposit) else depositEnabled
-                canWithdraw = self.safe_value(chain, 'canWd')
+                canWithdraw = self.safe_bool(chain, 'canWd')
                 withdrawEnabled = canWithdraw if (canWithdraw) else withdrawEnabled
-                canInternal = self.safe_value(chain, 'canInternal')
+                canInternal = self.safe_bool(chain, 'canInternal')
                 active = True if (canDeposit and canWithdraw and canInternal) else False
                 currencyActive = active if (active) else currencyActive
                 networkId = self.safe_string(chain, 'chain')
                 if (networkId is not None) and (networkId.find('-') >= 0):
                     parts = networkId.split('-')
                     chainPart = self.safe_string(parts, 1, networkId)
                     networkCode = self.network_id_to_code(chainPart, currency['code'])
@@ -1652,15 +1652,15 @@
                             'withdraw': {
                                 'min': self.safe_number(chain, 'minWd'),
                                 'max': self.safe_number(chain, 'maxWd'),
                             },
                         },
                         'info': chain,
                     }
-            firstChain = self.safe_value(chains, 0)
+            firstChain = self.safe_dict(chains, 0, {})
             result[code] = {
                 'info': None,
                 'code': code,
                 'id': currencyId,
                 'name': self.safe_string(firstChain, 'name'),
                 'active': currencyActive,
                 'deposit': depositEnabled,
@@ -1721,16 +1721,16 @@
         #                     ["0.07219","0.505407","0","1"],
         #                 ],
         #                 "ts": "1621438475342"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         timestamp = self.safe_integer(first, 'ts')
         return self.parse_order_book(first, symbol, timestamp)
 
     def parse_ticker(self, ticker, market: Market = None) -> Ticker:
         #
         #     {
         #         "instType": "SPOT",
@@ -1821,15 +1821,15 @@
         #                 "ts": "1621440583784",
         #                 "sodUtc0": "0.07872",
         #                 "sodUtc8": "0.07345"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         first = self.safe_dict(data, 0, {})
         return self.parse_ticker(first, market)
 
     async def fetch_tickers(self, symbols: Strings = None, params={}) -> Tickers:
         """
         fetches price tickers for multiple markets, statistical information calculated over the past 24 hours for each market
         :see: https://www.okx.com/docs-v5/en/#order-book-trading-market-data-get-tickers
@@ -1842,15 +1842,15 @@
         market = self.get_market_from_symbols(symbols)
         marketType = None
         marketType, params = self.handle_market_type_and_params('fetchTickers', market, params)
         request = {
             'instType': self.convert_to_instrument_type(marketType),
         }
         if marketType == 'option':
-            defaultUnderlying = self.safe_value(self.options, 'defaultUnderlying', 'BTC-USD')
+            defaultUnderlying = self.safe_string(self.options, 'defaultUnderlying', 'BTC-USD')
             currencyId = self.safe_string_2(params, 'uly', 'marketId', defaultUnderlying)
             if currencyId is None:
                 raise ArgumentsRequired(self.id + ' fetchTickers() requires an underlying uly or marketId parameter for options markets')
             else:
                 request['uly'] = currencyId
         response = await self.publicGetMarketTickers(self.extend(request, params))
         #
@@ -2091,15 +2091,15 @@
         market = self.market(symbol)
         paginate = False
         paginate, params = self.handle_option_and_params(params, 'fetchOHLCV', 'paginate')
         if paginate:
             return await self.fetch_paginated_call_deterministic('fetchOHLCV', symbol, since, limit, timeframe, params, 200)
         price = self.safe_string(params, 'price')
         params = self.omit(params, 'price')
-        options = self.safe_value(self.options, 'fetchOHLCV', {})
+        options = self.safe_dict(self.options, 'fetchOHLCV', {})
         timezone = self.safe_string(options, 'timezone', 'UTC')
         if limit is None:
             limit = 100  # default 100, max 100
         duration = self.parse_timeframe(timeframe)
         bar = self.safe_string(self.timeframes, timeframe, timeframe)
         if (timezone == 'UTC') and (duration >= 21600):  # if utc and timeframe >= 6h
             bar += timezone.lower()
@@ -2204,15 +2204,15 @@
         #                 "realizedRate":"0.017",
         #                 "fundingTime":"1597026383085"
         #             }
         #         ]
         #     }
         #
         rates = []
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         for i in range(0, len(data)):
             rate = data[i]
             timestamp = self.safe_integer(rate, 'fundingTime')
             rates.append({
                 'info': rate,
                 'symbol': self.safe_symbol(self.safe_string(rate, 'instId')),
                 'fundingRate': self.safe_number(rate, 'realizedRate'),
@@ -2226,18 +2226,18 @@
         if type == 'funding':
             return self.parse_funding_balance(response)
         else:
             return self.parse_trading_balance(response)
 
     def parse_trading_balance(self, response):
         result = {'info': response}
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         timestamp = self.safe_integer(first, 'uTime')
-        details = self.safe_value(first, 'details', [])
+        details = self.safe_list(first, 'details', [])
         for i in range(0, len(details)):
             balance = details[i]
             currencyId = self.safe_string(balance, 'ccy')
             code = self.safe_currency_code(currencyId)
             account = self.account()
             # it may be incorrect to use total, free and used for swap accounts
             eq = self.safe_string(balance, 'eq')
@@ -2251,15 +2251,15 @@
             result[code] = account
         result['timestamp'] = timestamp
         result['datetime'] = self.iso8601(timestamp)
         return self.safe_balance(result)
 
     def parse_funding_balance(self, response):
         result = {'info': response}
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         for i in range(0, len(data)):
             balance = data[i]
             currencyId = self.safe_string(balance, 'ccy')
             code = self.safe_currency_code(currencyId)
             account = self.account()
             # it may be incorrect to use total, free and used for swap accounts
             account['total'] = self.safe_string(balance, 'bal')
@@ -2329,16 +2329,16 @@
         #                 "taker": "-0.001",
         #                 "ts": "1639043138472"
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         return self.parse_trading_fee(first, market)
 
     async def fetch_balance(self, params={}) -> Balances:
         """
         query for balance and get the amount of funds available for trading or funds locked in orders
         :see: https://www.okx.com/docs-v5/en/#funding-account-rest-api-get-balance
         :see: https://www.okx.com/docs-v5/en/#trading-account-rest-api-get-balance
@@ -2744,16 +2744,16 @@
         response = None
         if method == 'privatePostTradeOrder':
             response = await self.privatePostTradeOrder(request)
         elif method == 'privatePostTradeOrderAlgo':
             response = await self.privatePostTradeOrderAlgo(request)
         else:
             response = await self.privatePostTradeBatchOrders(request)
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0)
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         order = self.parse_order(first, market)
         order['type'] = type
         order['side'] = side
         return order
 
     async def create_orders(self, orders: List[OrderRequest], params={}):
         """
@@ -4124,15 +4124,15 @@
         #                 "bal": "12",
         #                 "type": "1",
         #                 "ts": "1597026383085"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         return self.parse_ledger(data, currency, since, limit)
 
     def parse_ledger_entry_type(self, type):
         types = {
             '1': 'transfer',  # transfer
             '2': 'trade',  # trade
             '3': 'trade',  # delivery
```

### Comparing `ccxt-4.2.90/ccxt/async_support/onetrading.py` & `ccxt-4.2.91/ccxt/async_support/onetrading.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/p2b.py` & `ccxt-4.2.91/ccxt/async_support/p2b.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/paymium.py` & `ccxt-4.2.91/ccxt/async_support/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/phemex.py` & `ccxt-4.2.91/ccxt/async_support/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/poloniex.py` & `ccxt-4.2.91/ccxt/async_support/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/poloniexfutures.py` & `ccxt-4.2.91/ccxt/async_support/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/probit.py` & `ccxt-4.2.91/ccxt/async_support/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/timex.py` & `ccxt-4.2.91/ccxt/async_support/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/tokocrypto.py` & `ccxt-4.2.91/ccxt/async_support/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/tradeogre.py` & `ccxt-4.2.91/ccxt/async_support/tradeogre.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/upbit.py` & `ccxt-4.2.91/ccxt/async_support/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/wavesexchange.py` & `ccxt-4.2.91/ccxt/async_support/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/wazirx.py` & `ccxt-4.2.91/ccxt/async_support/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/whitebit.py` & `ccxt-4.2.91/ccxt/async_support/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/woo.py` & `ccxt-4.2.91/ccxt/async_support/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/yobit.py` & `ccxt-4.2.91/ccxt/async_support/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/zaif.py` & `ccxt-4.2.91/ccxt/async_support/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/async_support/zonda.py` & `ccxt-4.2.91/ccxt/async_support/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/base/__init__.py` & `ccxt-4.2.91/ccxt/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/base/decimal_to_precision.py` & `ccxt-4.2.91/ccxt/base/decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/base/errors.py` & `ccxt-4.2.91/ccxt/base/errors.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/base/exchange.py` & `ccxt-4.2.91/ccxt/base/exchange.py`

 * *Files 0% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """Base exchange class"""
 
 # -----------------------------------------------------------------------------
 
-__version__ = '4.2.90'
+__version__ = '4.2.91'
 
 # -----------------------------------------------------------------------------
 
 from ccxt.base.errors import ExchangeError
 from ccxt.base.errors import NetworkError
 from ccxt.base.errors import NotSupported
 from ccxt.base.errors import AuthenticationError
@@ -2299,15 +2299,15 @@
 
     def fetch_payment_methods(self, params={}):
         raise NotSupported(self.id + ' fetchPaymentMethods() is not supported yet')
 
     def parse_to_int(self, number):
         # Solve Common intmisuse ex: int((since / str(1000)))
         # using a number which is not valid in ts
-        stringifiedNumber = str(number)
+        stringifiedNumber = self.number_to_string(number)
         convertedNumber = float(stringifiedNumber)
         return int(convertedNumber)
 
     def parse_to_numeric(self, number):
         stringVersion = self.number_to_string(number)  # self will convert 1.0 and 1 to "1" and 1.1 to "1.1"
         # keep self in mind:
         # in JS: 1 == 1.0 is True;  1 == 1.0 is True
@@ -4422,20 +4422,14 @@
             'used': None,
             'total': None,
         }
 
     def common_currency_code(self, code: str):
         if not self.substituteCommonCurrencyCodes:
             return code
-        # if the provided code already exists value in commonCurrencies dict, then we should not again transform it
-        # more details at: https://github.com/ccxt/ccxt/issues/21112#issuecomment-2031293691
-        commonCurrencies = list(self.commonCurrencies.values())
-        exists = self.in_array(code, commonCurrencies)
-        if exists:
-            return code
         return self.safe_string(self.commonCurrencies, code, code)
 
     def currency(self, code: str):
         if self.currencies is None:
             raise ExchangeError(self.id + ' currencies not loaded')
         if isinstance(code, str):
             if code in self.currencies:
@@ -4981,15 +4975,14 @@
          * @ignore
         :param object[]|dict response: unparsed response from the exchange
         :param str[]|None codes: the unified currency codes to fetch transactions fees for, returns all currencies when None
         :param str currencyIdKey: *should only be None when response is a dictionary* the object key that corresponds to the currency id
         :returns dict: objects with withdraw and deposit fees, indexed by currency codes
         """
         depositWithdrawFees = {}
-        codes = self.marketCodes(codes)
         isArray = isinstance(response, list)
         responseKeys = response
         if not isArray:
             responseKeys = list(response.keys())
         for i in range(0, len(responseKeys)):
             entry = responseKeys[i]
             dictionary = entry if isArray else response[entry]
```

### Comparing `ccxt-4.2.90/ccxt/base/precise.py` & `ccxt-4.2.91/ccxt/base/precise.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/base/types.py` & `ccxt-4.2.91/ccxt/base/types.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bequant.py` & `ccxt-4.2.91/ccxt/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bigone.py` & `ccxt-4.2.91/ccxt/bigone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/binance.py` & `ccxt-4.2.91/ccxt/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/binancecoinm.py` & `ccxt-4.2.91/ccxt/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/binanceus.py` & `ccxt-4.2.91/ccxt/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/binanceusdm.py` & `ccxt-4.2.91/ccxt/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bingx.py` & `ccxt-4.2.91/ccxt/bingx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bit2c.py` & `ccxt-4.2.91/ccxt/bit2c.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitbank.py` & `ccxt-4.2.91/ccxt/bitbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitbns.py` & `ccxt-4.2.91/ccxt/bitbns.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitfinex.py` & `ccxt-4.2.91/ccxt/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitfinex2.py` & `ccxt-4.2.91/ccxt/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitflyer.py` & `ccxt-4.2.91/ccxt/bitflyer.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitget.py` & `ccxt-4.2.91/ccxt/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bithumb.py` & `ccxt-4.2.91/ccxt/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitmart.py` & `ccxt-4.2.91/ccxt/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitmex.py` & `ccxt-4.2.91/ccxt/bitmex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitopro.py` & `ccxt-4.2.91/ccxt/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitrue.py` & `ccxt-4.2.91/ccxt/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitso.py` & `ccxt-4.2.91/ccxt/bitso.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitstamp.py` & `ccxt-4.2.91/ccxt/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitteam.py` & `ccxt-4.2.91/ccxt/bitteam.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bitvavo.py` & `ccxt-4.2.91/ccxt/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bl3p.py` & `ccxt-4.2.91/ccxt/bl3p.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/blockchaincom.py` & `ccxt-4.2.91/ccxt/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/blofin.py` & `ccxt-4.2.91/ccxt/blofin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/btcalpha.py` & `ccxt-4.2.91/ccxt/btcalpha.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/btcbox.py` & `ccxt-4.2.91/ccxt/btcbox.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/btcmarkets.py` & `ccxt-4.2.91/ccxt/btcmarkets.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/btcturk.py` & `ccxt-4.2.91/ccxt/btcturk.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/bybit.py` & `ccxt-4.2.91/ccxt/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/cex.py` & `ccxt-4.2.91/ccxt/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinbase.py` & `ccxt-4.2.91/ccxt/coinbase.py`

 * *Files 0% similar despite different names*

```diff
@@ -333,14 +333,15 @@
                 '6h': 'SIX_HOUR',
                 '1d': 'ONE_DAY',
             },
             'commonCurrencies': {
                 'CGLD': 'CELO',
             },
             'options': {
+                'brokerId': 'ccxt',
                 'stablePairs': ['BUSD-USD', 'CBETH-ETH', 'DAI-USD', 'GUSD-USD', 'GYEN-USD', 'PAX-USD', 'PAX-USDT', 'USDC-EUR', 'USDC-GBP', 'USDT-EUR', 'USDT-GBP', 'USDT-USD', 'USDT-USDC', 'WBTC-BTC'],
                 'fetchCurrencies': {
                     'expires': 5000,
                 },
                 'accounts': [
                     'wallet',
                     'fiat',
@@ -2247,16 +2248,17 @@
         :param str [params.end_time]: '2023-05-25T17:01:05.092Z' for 'GTD' orders
         :param float [params.cost]: *spot market buy only* the quote quantity that can be used alternative for the amount
         :param boolean [params.preview]: default to False, wether to use the test/preview endpoint or not
         :returns dict: an `order structure <https://docs.ccxt.com/#/?id=order-structure>`
         """
         self.load_markets()
         market = self.market(symbol)
+        id = self.safe_string(self.options, 'brokerId', 'ccxt')
         request = {
-            'client_order_id': self.uuid(),
+            'client_order_id': id + '-' + self.uuid(),
             'product_id': market['id'],
             'side': side.upper(),
         }
         stopPrice = self.safe_number_n(params, ['stopPrice', 'stop_price', 'triggerPrice'])
         stopLossPrice = self.safe_number(params, 'stopLossPrice')
         takeProfitPrice = self.safe_number(params, 'takeProfitPrice')
         isStop = stopPrice is not None
```

### Comparing `ccxt-4.2.90/ccxt/coinbaseinternational.py` & `ccxt-4.2.91/ccxt/coinbaseinternational.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinbasepro.py` & `ccxt-4.2.91/ccxt/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coincheck.py` & `ccxt-4.2.91/ccxt/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinex.py` & `ccxt-4.2.91/ccxt/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinlist.py` & `ccxt-4.2.91/ccxt/coinlist.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinmate.py` & `ccxt-4.2.91/ccxt/coinmate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinmetro.py` & `ccxt-4.2.91/ccxt/coinmetro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinone.py` & `ccxt-4.2.91/ccxt/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinsph.py` & `ccxt-4.2.91/ccxt/coinsph.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/coinspot.py` & `ccxt-4.2.91/ccxt/coinspot.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/cryptocom.py` & `ccxt-4.2.91/ccxt/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/currencycom.py` & `ccxt-4.2.91/ccxt/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/delta.py` & `ccxt-4.2.91/ccxt/delta.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/deribit.py` & `ccxt-4.2.91/ccxt/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/digifinex.py` & `ccxt-4.2.91/ccxt/digifinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/exmo.py` & `ccxt-4.2.91/ccxt/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/flowbtc.py` & `ccxt-4.2.91/ccxt/flowbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/fmfwio.py` & `ccxt-4.2.91/ccxt/fmfwio.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/gate.py` & `ccxt-4.2.91/ccxt/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/gemini.py` & `ccxt-4.2.91/ccxt/gemini.py`

 * *Files 1% similar despite different names*

```diff
@@ -440,14 +440,15 @@
             #         '<td>btcusd',  # currency
             #         '<td>0.00001 BTC(1e-5)',  # min order size
             #         '<td>0.00000001 BTC(1e-8)',  # tick size
             #         '<td>0.01 USD',  # quote currency price increment
             #         '</tr>'
             #     ]
             marketId = cells[0].replace('<td>', '')
+            marketId = marketId.replace('*', '')
             # base = self.safe_currency_code(baseId)
             minAmountString = cells[1].replace('<td>', '')
             minAmountParts = minAmountString.split(' ')
             minAmount = self.safe_number(minAmountParts, 0)
             amountPrecisionString = cells[2].replace('<td>', '')
             amountPrecisionParts = amountPrecisionString.split(' ')
             idLength = len(marketId) - 0
```

### Comparing `ccxt-4.2.90/ccxt/hitbtc.py` & `ccxt-4.2.91/ccxt/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/hollaex.py` & `ccxt-4.2.91/ccxt/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/htx.py` & `ccxt-4.2.91/ccxt/htx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/huobijp.py` & `ccxt-4.2.91/ccxt/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/hyperliquid.py` & `ccxt-4.2.91/ccxt/hyperliquid.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/idex.py` & `ccxt-4.2.91/ccxt/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/independentreserve.py` & `ccxt-4.2.91/ccxt/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/indodax.py` & `ccxt-4.2.91/ccxt/indodax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/kraken.py` & `ccxt-4.2.91/ccxt/kraken.py`

 * *Files 1% similar despite different names*

```diff
@@ -1691,5938 +1691,5934 @@
 000069a0: 656e 6379 4964 2920 3e20 333a 0a20 2020  encyId) > 3:.   
 000069b0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
 000069c0: 2863 7572 7265 6e63 7949 642e 6669 6e64  (currencyId.find
 000069d0: 2827 5827 2920 3d3d 2030 2920 6f72 2028  ('X') == 0) or (
 000069e0: 6375 7272 656e 6379 4964 2e66 696e 6428  currencyId.find(
 000069f0: 275a 2729 203d 3d20 3029 3a0a 2020 2020  'Z') == 0):.    
 00006a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a10: 6966 2063 7572 7265 6e63 7949 642e 6669  if currencyId.fi
-00006a20: 6e64 2827 2e27 2920 3e20 303a 0a20 2020  nd('.') > 0:.   
-00006a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006a40: 2020 2020 2072 6574 7572 6e20 7375 7065       return supe
-00006a50: 7228 6b72 616b 656e 2c20 7365 6c66 292e  r(kraken, self).
-00006a60: 7361 6665 5f63 7572 7265 6e63 7928 6375  safe_currency(cu
-00006a70: 7272 656e 6379 4964 2c20 6375 7272 656e  rrencyId, curren
-00006a80: 6379 290a 2020 2020 2020 2020 2020 2020  cy).            
-00006a90: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00006aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00006ab0: 2020 2020 2020 6375 7272 656e 6379 4964        currencyId
-00006ac0: 203d 2063 7572 7265 6e63 7949 645b 313a   = currencyId[1:
-00006ad0: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
-00006ae0: 2073 7570 6572 286b 7261 6b65 6e2c 2073   super(kraken, s
-00006af0: 656c 6629 2e73 6166 655f 6375 7272 656e  elf).safe_curren
-00006b00: 6379 2863 7572 7265 6e63 7949 642c 2063  cy(currencyId, c
-00006b10: 7572 7265 6e63 7929 0a0a 2020 2020 6465  urrency)..    de
-00006b20: 6620 6170 7065 6e64 5f69 6e61 6374 6976  f append_inactiv
-00006b30: 655f 6d61 726b 6574 7328 7365 6c66 2c20  e_markets(self, 
-00006b40: 7265 7375 6c74 293a 0a20 2020 2020 2020  result):.       
-00006b50: 2023 2072 6573 756c 7420 7368 6f75 6c64   # result should
-00006b60: 2062 6520 616e 2061 7272 6179 2074 6f20   be an array to 
-00006b70: 6170 7065 6e64 2074 6f0a 2020 2020 2020  append to.      
-00006b80: 2020 7072 6563 6973 696f 6e20 3d20 7b0a    precision = {.
-00006b90: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-00006ba0: 756e 7427 3a20 7365 6c66 2e70 6172 7365  unt': self.parse
-00006bb0: 5f6e 756d 6265 7228 2731 652d 3827 292c  _number('1e-8'),
-00006bc0: 0a20 2020 2020 2020 2020 2020 2027 7072  .            'pr
-00006bd0: 6963 6527 3a20 7365 6c66 2e70 6172 7365  ice': self.parse
-00006be0: 5f6e 756d 6265 7228 2731 652d 3827 292c  _number('1e-8'),
-00006bf0: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00006c00: 2020 2063 6f73 744c 696d 6974 7320 3d20     costLimits = 
-00006c10: 7b27 6d69 6e27 3a20 4e6f 6e65 2c20 276d  {'min': None, 'm
-00006c20: 6178 273a 204e 6f6e 657d 0a20 2020 2020  ax': None}.     
-00006c30: 2020 2070 7269 6365 4c69 6d69 7473 203d     priceLimits =
-00006c40: 207b 276d 696e 273a 2070 7265 6369 7369   {'min': precisi
-00006c50: 6f6e 5b27 7072 6963 6527 5d2c 2027 6d61  on['price'], 'ma
-00006c60: 7827 3a20 4e6f 6e65 7d0a 2020 2020 2020  x': None}.      
-00006c70: 2020 616d 6f75 6e74 4c69 6d69 7473 203d    amountLimits =
-00006c80: 207b 276d 696e 273a 2070 7265 6369 7369   {'min': precisi
-00006c90: 6f6e 5b27 616d 6f75 6e74 275d 2c20 276d  on['amount'], 'm
-00006ca0: 6178 273a 204e 6f6e 657d 0a20 2020 2020  ax': None}.     
-00006cb0: 2020 206c 696d 6974 7320 3d20 7b27 616d     limits = {'am
-00006cc0: 6f75 6e74 273a 2061 6d6f 756e 744c 696d  ount': amountLim
-00006cd0: 6974 732c 2027 7072 6963 6527 3a20 7072  its, 'price': pr
-00006ce0: 6963 654c 696d 6974 732c 2027 636f 7374  iceLimits, 'cost
-00006cf0: 273a 2063 6f73 744c 696d 6974 737d 0a20  ': costLimits}. 
-00006d00: 2020 2020 2020 2064 6566 6175 6c74 7320         defaults 
-00006d10: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00006d20: 2764 6172 6b70 6f6f 6c27 3a20 4661 6c73  'darkpool': Fals
-00006d30: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00006d40: 696e 666f 273a 204e 6f6e 652c 0a20 2020  info': None,.   
-00006d50: 2020 2020 2020 2020 2027 6d61 6b65 7227           'maker'
-00006d60: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00006d70: 2020 2020 2774 616b 6572 273a 204e 6f6e      'taker': Non
-00006d80: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-00006d90: 6163 7469 7665 273a 2046 616c 7365 2c0a  active': False,.
-00006da0: 2020 2020 2020 2020 2020 2020 2770 7265              'pre
-00006db0: 6369 7369 6f6e 273a 2070 7265 6369 7369  cision': precisi
-00006dc0: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
-00006dd0: 276c 696d 6974 7327 3a20 6c69 6d69 7473  'limits': limits
-00006de0: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
-00006df0: 2020 2020 6d61 726b 6574 7320 3d20 5b0a      markets = [.
-00006e00: 2020 2020 2020 2020 2020 2020 2320 7b27              # {'
-00006e10: 6964 273a 2027 5858 4c4d 5a45 5552 272c  id': 'XXLMZEUR',
-00006e20: 2027 7379 6d62 6f6c 273a 2027 584c 4d2f   'symbol': 'XLM/
-00006e30: 4555 5227 2c20 2762 6173 6527 3a20 2758  EUR', 'base': 'X
-00006e40: 4c4d 272c 2027 7175 6f74 6527 3a20 2745  LM', 'quote': 'E
-00006e50: 5552 272c 2027 616c 746e 616d 6527 3a20  UR', 'altname': 
-00006e60: 2758 4c4d 4555 5227 7d2c 0a20 2020 2020  'XLMEUR'},.     
-00006e70: 2020 205d 0a20 2020 2020 2020 2066 6f72     ].        for
-00006e80: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
-00006e90: 656e 286d 6172 6b65 7473 2929 3a0a 2020  en(markets)):.  
-00006ea0: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00006eb0: 2e61 7070 656e 6428 7365 6c66 2e65 7874  .append(self.ext
-00006ec0: 656e 6428 6465 6661 756c 7473 2c20 6d61  end(defaults, ma
-00006ed0: 726b 6574 735b 695d 2929 0a20 2020 2020  rkets[i])).     
-00006ee0: 2020 2072 6574 7572 6e20 7265 7375 6c74     return result
-00006ef0: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
-00006f00: 6375 7272 656e 6369 6573 2873 656c 662c  currencies(self,
-00006f10: 2070 6172 616d 733d 7b7d 2920 2d3e 2043   params={}) -> C
-00006f20: 7572 7265 6e63 6965 733a 0a20 2020 2020  urrencies:.     
-00006f30: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
-00006f40: 6574 6368 6573 2061 6c6c 2061 7661 696c  etches all avail
-00006f50: 6162 6c65 2063 7572 7265 6e63 6965 7320  able currencies 
-00006f60: 6f6e 2061 6e20 6578 6368 616e 6765 0a20  on an exchange. 
-00006f70: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-00006f80: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-00006f90: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-00006fa0: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-00006fb0: 6f70 6572 6174 696f 6e2f 6765 7441 7373  operation/getAss
-00006fc0: 6574 496e 666f 0a20 2020 2020 2020 203a  etInfo.        :
-00006fd0: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
-00006fe0: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
-00006ff0: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00007000: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
-00007010: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
-00007020: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-00007030: 743a 2061 6e20 6173 736f 6369 6174 6976  t: an associativ
-00007040: 6520 6469 6374 696f 6e61 7279 206f 6620  e dictionary of 
-00007050: 6375 7272 656e 6369 6573 0a20 2020 2020  currencies.     
-00007060: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
-00007070: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
-00007080: 7562 6c69 6347 6574 4173 7365 7473 2870  ublicGetAssets(p
-00007090: 6172 616d 7329 0a20 2020 2020 2020 2023  arams).        #
-000070a0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-000070b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000070c0: 2020 2022 6572 726f 7222 3a20 5b5d 2c0a     "error": [],.
-000070d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000070e0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-000070f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00007100: 2020 2020 2241 4441 223a 207b 2261 636c      "ADA": {"acl
-00007110: 6173 7322 3a20 2263 7572 7265 6e63 7922  ass": "currency"
-00007120: 2c20 2261 6c74 6e61 6d65 223a 2022 4144  , "altname": "AD
-00007130: 4122 2c20 2264 6563 696d 616c 7322 3a20  A", "decimals": 
-00007140: 382c 2022 6469 7370 6c61 795f 6465 6369  8, "display_deci
-00007150: 6d61 6c73 223a 2036 7d2c 0a20 2020 2020  mals": 6},.     
-00007160: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00007170: 2022 4243 4822 3a20 7b22 6163 6c61 7373   "BCH": {"aclass
-00007180: 223a 2022 6375 7272 656e 6379 222c 2022  ": "currency", "
-00007190: 616c 746e 616d 6522 3a20 2242 4348 222c  altname": "BCH",
-000071a0: 2022 6465 6369 6d61 6c73 223a 2031 302c   "decimals": 10,
-000071b0: 2022 6469 7370 6c61 795f 6465 6369 6d61   "display_decima
-000071c0: 6c73 223a 2035 7d2c 0a20 2020 2020 2020  ls": 5},.       
-000071d0: 2023 2020 2020 2020 2020 2020 2020 202e   #             .
-000071e0: 2e2e 0a20 2020 2020 2020 2023 2020 2020  ...        #    
-000071f0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-00007200: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-00007210: 230a 2020 2020 2020 2020 6375 7272 656e  #.        curren
-00007220: 6369 6573 203d 2073 656c 662e 7361 6665  cies = self.safe
-00007230: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
-00007240: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
-00007250: 2020 2020 2020 2069 6473 203d 206c 6973         ids = lis
-00007260: 7428 6375 7272 656e 6369 6573 2e6b 6579  t(currencies.key
-00007270: 7328 2929 0a20 2020 2020 2020 2072 6573  s()).        res
-00007280: 756c 7420 3d20 7b7d 0a20 2020 2020 2020  ult = {}.       
-00007290: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-000072a0: 302c 206c 656e 2869 6473 2929 3a0a 2020  0, len(ids)):.  
-000072b0: 2020 2020 2020 2020 2020 6964 203d 2069            id = i
-000072c0: 6473 5b69 5d0a 2020 2020 2020 2020 2020  ds[i].          
-000072d0: 2020 6375 7272 656e 6379 203d 2063 7572    currency = cur
-000072e0: 7265 6e63 6965 735b 6964 5d0a 2020 2020  rencies[id].    
-000072f0: 2020 2020 2020 2020 2320 746f 646f 3a20          # todo: 
-00007300: 7769 6c6c 206e 6565 6420 746f 2072 6574  will need to ret
-00007310: 6869 6e6b 2074 6865 2066 6565 730a 2020  hink the fees.  
-00007320: 2020 2020 2020 2020 2020 2320 7365 653a            # see:
-00007330: 2068 7474 7073 3a2f 2f73 7570 706f 7274   https://support
-00007340: 2e6b 7261 6b65 6e2e 636f 6d2f 6863 2f65  .kraken.com/hc/e
-00007350: 6e2d 7573 2f61 7274 6963 6c65 732f 3230  n-us/articles/20
-00007360: 3138 3933 3630 382d 5768 6174 2d61 7265  1893608-What-are
-00007370: 2d74 6865 2d77 6974 6864 7261 7761 6c2d  -the-withdrawal-
-00007380: 6665 6573 2d0a 2020 2020 2020 2020 2020  fees-.          
-00007390: 2020 2320 746f 2061 6464 2073 7570 706f    # to add suppo
-000073a0: 7274 2066 6f72 206d 756c 7469 706c 6520  rt for multiple 
-000073b0: 7769 7468 6472 6177 616c 2f64 6570 6f73  withdrawal/depos
-000073c0: 6974 206d 6574 686f 6473 2061 6e64 0a20  it methods and. 
-000073d0: 2020 2020 2020 2020 2020 2023 2064 6966             # dif
-000073e0: 6665 7265 6e74 6961 7465 6420 6665 6573  ferentiated fees
-000073f0: 2066 6f72 2065 6163 6820 7061 7274 6963   for each partic
-00007400: 756c 6172 206d 6574 686f 640a 2020 2020  ular method.    
-00007410: 2020 2020 2020 2020 636f 6465 203d 2073          code = s
-00007420: 656c 662e 7361 6665 5f63 7572 7265 6e63  elf.safe_currenc
-00007430: 795f 636f 6465 2873 656c 662e 7361 6665  y_code(self.safe
-00007440: 5f73 7472 696e 6728 6375 7272 656e 6379  _string(currency
-00007450: 2c20 2761 6c74 6e61 6d65 2729 290a 2020  , 'altname')).  
-00007460: 2020 2020 2020 2020 2020 7072 6563 6973            precis
-00007470: 696f 6e20 3d20 7365 6c66 2e70 6172 7365  ion = self.parse
-00007480: 5f6e 756d 6265 7228 7365 6c66 2e70 6172  _number(self.par
-00007490: 7365 5f70 7265 6369 7369 6f6e 2873 656c  se_precision(sel
-000074a0: 662e 7361 6665 5f73 7472 696e 6728 6375  f.safe_string(cu
-000074b0: 7272 656e 6379 2c20 2764 6563 696d 616c  rrency, 'decimal
-000074c0: 7327 2929 290a 2020 2020 2020 2020 2020  s'))).          
-000074d0: 2020 2320 6173 7375 6d65 7320 616c 6c20    # assumes all 
-000074e0: 6375 7272 656e 6369 6573 2061 7265 2061  currencies are a
-000074f0: 6374 6976 6520 6578 6365 7074 2074 686f  ctive except tho
-00007500: 7365 206c 6973 7465 6420 6162 6f76 650a  se listed above.
-00007510: 2020 2020 2020 2020 2020 2020 6163 7469              acti
-00007520: 7665 203d 206e 6f74 2073 656c 662e 696e  ve = not self.in
-00007530: 5f61 7272 6179 2863 6f64 652c 2073 656c  _array(code, sel
-00007540: 662e 6f70 7469 6f6e 735b 2769 6e61 6374  f.options['inact
-00007550: 6976 6543 7572 7265 6e63 6965 7327 5d29  iveCurrencies'])
-00007560: 0a20 2020 2020 2020 2020 2020 2072 6573  .            res
-00007570: 756c 745b 636f 6465 5d20 3d20 7b0a 2020  ult[code] = {.  
-00007580: 2020 2020 2020 2020 2020 2020 2020 2769                'i
-00007590: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-000075a0: 2020 2020 2020 2020 2763 6f64 6527 3a20          'code': 
-000075b0: 636f 6465 2c0a 2020 2020 2020 2020 2020  code,.          
-000075c0: 2020 2020 2020 2769 6e66 6f27 3a20 6375        'info': cu
-000075d0: 7272 656e 6379 2c0a 2020 2020 2020 2020  rrency,.        
-000075e0: 2020 2020 2020 2020 276e 616d 6527 3a20          'name': 
-000075f0: 636f 6465 2c0a 2020 2020 2020 2020 2020  code,.          
-00007600: 2020 2020 2020 2761 6374 6976 6527 3a20        'active': 
-00007610: 6163 7469 7665 2c0a 2020 2020 2020 2020  active,.        
-00007620: 2020 2020 2020 2020 2764 6570 6f73 6974          'deposit
-00007630: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-00007640: 2020 2020 2020 2020 2027 7769 7468 6472           'withdr
-00007650: 6177 273a 204e 6f6e 652c 0a20 2020 2020  aw': None,.     
-00007660: 2020 2020 2020 2020 2020 2027 6665 6527             'fee'
-00007670: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00007680: 2020 2020 2020 2020 2770 7265 6369 7369          'precisi
-00007690: 6f6e 273a 2070 7265 6369 7369 6f6e 2c0a  on': precision,.
-000076a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076b0: 276c 696d 6974 7327 3a20 7b0a 2020 2020  'limits': {.    
-000076c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076d0: 2761 6d6f 756e 7427 3a20 7b0a 2020 2020  'amount': {.    
-000076e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000076f0: 2020 2020 276d 696e 273a 2070 7265 6369      'min': preci
-00007700: 7369 6f6e 2c0a 2020 2020 2020 2020 2020  sion,.          
-00007710: 2020 2020 2020 2020 2020 2020 2020 276d                'm
-00007720: 6178 273a 204e 6f6e 652c 0a20 2020 2020  ax': None,.     
-00007730: 2020 2020 2020 2020 2020 2020 2020 207d                 }
-00007740: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00007750: 2020 2020 2020 2777 6974 6864 7261 7727        'withdraw'
-00007760: 3a20 7b0a 2020 2020 2020 2020 2020 2020  : {.            
-00007770: 2020 2020 2020 2020 2020 2020 276d 696e              'min
-00007780: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00006a10: 6966 206e 6f74 2028 6375 7272 656e 6379  if not (currency
+00006a20: 4964 2e66 696e 6428 272e 2729 203e 2030  Id.find('.') > 0
+00006a30: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+00006a40: 2020 2020 2020 2020 2020 2063 7572 7265             curre
+00006a50: 6e63 7949 6420 3d20 6375 7272 656e 6379  ncyId = currency
+00006a60: 4964 5b31 3a5d 0a20 2020 2020 2020 2072  Id[1:].        r
+00006a70: 6574 7572 6e20 7375 7065 7228 6b72 616b  eturn super(krak
+00006a80: 656e 2c20 7365 6c66 292e 7361 6665 5f63  en, self).safe_c
+00006a90: 7572 7265 6e63 7928 6375 7272 656e 6379  urrency(currency
+00006aa0: 4964 2c20 6375 7272 656e 6379 290a 0a20  Id, currency).. 
+00006ab0: 2020 2064 6566 2061 7070 656e 645f 696e     def append_in
+00006ac0: 6163 7469 7665 5f6d 6172 6b65 7473 2873  active_markets(s
+00006ad0: 656c 662c 2072 6573 756c 7429 3a0a 2020  elf, result):.  
+00006ae0: 2020 2020 2020 2320 7265 7375 6c74 2073        # result s
+00006af0: 686f 756c 6420 6265 2061 6e20 6172 7261  hould be an arra
+00006b00: 7920 746f 2061 7070 656e 6420 746f 0a20  y to append to. 
+00006b10: 2020 2020 2020 2070 7265 6369 7369 6f6e         precision
+00006b20: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+00006b30: 2027 616d 6f75 6e74 273a 2073 656c 662e   'amount': self.
+00006b40: 7061 7273 655f 6e75 6d62 6572 2827 3165  parse_number('1e
+00006b50: 2d38 2729 2c0a 2020 2020 2020 2020 2020  -8'),.          
+00006b60: 2020 2770 7269 6365 273a 2073 656c 662e    'price': self.
+00006b70: 7061 7273 655f 6e75 6d62 6572 2827 3165  parse_number('1e
+00006b80: 2d38 2729 2c0a 2020 2020 2020 2020 7d0a  -8'),.        }.
+00006b90: 2020 2020 2020 2020 636f 7374 4c69 6d69          costLimi
+00006ba0: 7473 203d 207b 276d 696e 273a 204e 6f6e  ts = {'min': Non
+00006bb0: 652c 2027 6d61 7827 3a20 4e6f 6e65 7d0a  e, 'max': None}.
+00006bc0: 2020 2020 2020 2020 7072 6963 654c 696d          priceLim
+00006bd0: 6974 7320 3d20 7b27 6d69 6e27 3a20 7072  its = {'min': pr
+00006be0: 6563 6973 696f 6e5b 2770 7269 6365 275d  ecision['price']
+00006bf0: 2c20 276d 6178 273a 204e 6f6e 657d 0a20  , 'max': None}. 
+00006c00: 2020 2020 2020 2061 6d6f 756e 744c 696d         amountLim
+00006c10: 6974 7320 3d20 7b27 6d69 6e27 3a20 7072  its = {'min': pr
+00006c20: 6563 6973 696f 6e5b 2761 6d6f 756e 7427  ecision['amount'
+00006c30: 5d2c 2027 6d61 7827 3a20 4e6f 6e65 7d0a  ], 'max': None}.
+00006c40: 2020 2020 2020 2020 6c69 6d69 7473 203d          limits =
+00006c50: 207b 2761 6d6f 756e 7427 3a20 616d 6f75   {'amount': amou
+00006c60: 6e74 4c69 6d69 7473 2c20 2770 7269 6365  ntLimits, 'price
+00006c70: 273a 2070 7269 6365 4c69 6d69 7473 2c20  ': priceLimits, 
+00006c80: 2763 6f73 7427 3a20 636f 7374 4c69 6d69  'cost': costLimi
+00006c90: 7473 7d0a 2020 2020 2020 2020 6465 6661  ts}.        defa
+00006ca0: 756c 7473 203d 207b 0a20 2020 2020 2020  ults = {.       
+00006cb0: 2020 2020 2027 6461 726b 706f 6f6c 273a       'darkpool':
+00006cc0: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00006cd0: 2020 2020 2769 6e66 6f27 3a20 4e6f 6e65      'info': None
+00006ce0: 2c0a 2020 2020 2020 2020 2020 2020 276d  ,.            'm
+00006cf0: 616b 6572 273a 204e 6f6e 652c 0a20 2020  aker': None,.   
+00006d00: 2020 2020 2020 2020 2027 7461 6b65 7227           'taker'
+00006d10: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00006d20: 2020 2020 2761 6374 6976 6527 3a20 4661      'active': Fa
+00006d30: 6c73 652c 0a20 2020 2020 2020 2020 2020  lse,.           
+00006d40: 2027 7072 6563 6973 696f 6e27 3a20 7072   'precision': pr
+00006d50: 6563 6973 696f 6e2c 0a20 2020 2020 2020  ecision,.       
+00006d60: 2020 2020 2027 6c69 6d69 7473 273a 206c       'limits': l
+00006d70: 696d 6974 732c 0a20 2020 2020 2020 207d  imits,.        }
+00006d80: 0a20 2020 2020 2020 206d 6172 6b65 7473  .        markets
+00006d90: 203d 205b 0a20 2020 2020 2020 2020 2020   = [.           
+00006da0: 2023 207b 2769 6427 3a20 2758 584c 4d5a   # {'id': 'XXLMZ
+00006db0: 4555 5227 2c20 2773 796d 626f 6c27 3a20  EUR', 'symbol': 
+00006dc0: 2758 4c4d 2f45 5552 272c 2027 6261 7365  'XLM/EUR', 'base
+00006dd0: 273a 2027 584c 4d27 2c20 2771 756f 7465  ': 'XLM', 'quote
+00006de0: 273a 2027 4555 5227 2c20 2761 6c74 6e61  ': 'EUR', 'altna
+00006df0: 6d65 273a 2027 584c 4d45 5552 277d 2c0a  me': 'XLMEUR'},.
+00006e00: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+00006e10: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
+00006e20: 2830 2c20 6c65 6e28 6d61 726b 6574 7329  (0, len(markets)
+00006e30: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00006e40: 6573 756c 742e 6170 7065 6e64 2873 656c  esult.append(sel
+00006e50: 662e 6578 7465 6e64 2864 6566 6175 6c74  f.extend(default
+00006e60: 732c 206d 6172 6b65 7473 5b69 5d29 290a  s, markets[i])).
+00006e70: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00006e80: 6573 756c 740a 0a20 2020 2064 6566 2066  esult..    def f
+00006e90: 6574 6368 5f63 7572 7265 6e63 6965 7328  etch_currencies(
+00006ea0: 7365 6c66 2c20 7061 7261 6d73 3d7b 7d29  self, params={})
+00006eb0: 202d 3e20 4375 7272 656e 6369 6573 3a0a   -> Currencies:.
+00006ec0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00006ed0: 2020 2020 6665 7463 6865 7320 616c 6c20      fetches all 
+00006ee0: 6176 6169 6c61 626c 6520 6375 7272 656e  available curren
+00006ef0: 6369 6573 206f 6e20 616e 2065 7863 6861  cies on an excha
+00006f00: 6e67 650a 2020 2020 2020 2020 3a73 6565  nge.        :see
+00006f10: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
+00006f20: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
+00006f30: 7461 672f 5370 6f74 2d4d 6172 6b65 742d  tag/Spot-Market-
+00006f40: 4461 7461 2f6f 7065 7261 7469 6f6e 2f67  Data/operation/g
+00006f50: 6574 4173 7365 7449 6e66 6f0a 2020 2020  etAssetInfo.    
+00006f60: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00006f70: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+00006f80: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00006f90: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+00006fa0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+00006fb0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00006fc0: 7320 6469 6374 3a20 616e 2061 7373 6f63  s dict: an assoc
+00006fd0: 6961 7469 7665 2064 6963 7469 6f6e 6172  iative dictionar
+00006fe0: 7920 6f66 2063 7572 7265 6e63 6965 730a  y of currencies.
+00006ff0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+00007000: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+00007010: 656c 662e 7075 626c 6963 4765 7441 7373  elf.publicGetAss
+00007020: 6574 7328 7061 7261 6d73 290a 2020 2020  ets(params).    
+00007030: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+00007040: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+00007050: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
+00007060: 205b 5d2c 0a20 2020 2020 2020 2023 2020   [],.        #  
+00007070: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+00007080: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00007090: 2020 2020 2020 2020 2022 4243 4822 3a20           "BCH": 
+000070a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+000070b0: 2020 2020 2020 2020 2020 2020 2261 636c              "acl
+000070c0: 6173 7322 3a20 2263 7572 7265 6e63 7922  ass": "currency"
+000070d0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000070e0: 2020 2020 2020 2020 2020 2020 2261 6c74              "alt
+000070f0: 6e61 6d65 223a 2022 4243 4822 2c0a 2020  name": "BCH",.  
+00007100: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007110: 2020 2020 2020 2020 2264 6563 696d 616c          "decimal
+00007120: 7322 3a20 3130 2c0a 2020 2020 2020 2020  s": 10,.        
+00007130: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00007140: 2020 2264 6973 706c 6179 5f64 6563 696d    "display_decim
+00007150: 616c 7322 3a20 350a 2020 2020 2020 2020  als": 5.        
+00007160: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00007170: 2020 2273 7461 7475 7322 3a20 2265 6e61    "status": "ena
+00007180: 626c 6564 222c 0a20 2020 2020 2020 2023  bled",.        #
+00007190: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+000071a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000071b0: 2020 2020 2020 2e2e 2e0a 2020 2020 2020        ....      
+000071c0: 2020 2320 2020 2020 2020 2020 7d2c 0a20    #         },. 
+000071d0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+000071e0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000071f0: 2063 7572 7265 6e63 6965 7320 3d20 7365   currencies = se
+00007200: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
+00007210: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
+00007220: 2c20 7b7d 290a 2020 2020 2020 2020 6964  , {}).        id
+00007230: 7320 3d20 6c69 7374 2863 7572 7265 6e63  s = list(currenc
+00007240: 6965 732e 6b65 7973 2829 290a 2020 2020  ies.keys()).    
+00007250: 2020 2020 7265 7375 6c74 203d 207b 7d0a      result = {}.
+00007260: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+00007270: 2072 616e 6765 2830 2c20 6c65 6e28 6964   range(0, len(id
+00007280: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+00007290: 2069 6420 3d20 6964 735b 695d 0a20 2020   id = ids[i].   
+000072a0: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
+000072b0: 7920 3d20 6375 7272 656e 6369 6573 5b69  y = currencies[i
+000072c0: 645d 0a20 2020 2020 2020 2020 2020 2023  d].            #
+000072d0: 2074 6f64 6f3a 2077 696c 6c20 6e65 6564   todo: will need
+000072e0: 2074 6f20 7265 7468 696e 6b20 7468 6520   to rethink the 
+000072f0: 6665 6573 0a20 2020 2020 2020 2020 2020  fees.           
+00007300: 2023 2073 6565 3a20 6874 7470 733a 2f2f   # see: https://
+00007310: 7375 7070 6f72 742e 6b72 616b 656e 2e63  support.kraken.c
+00007320: 6f6d 2f68 632f 656e 2d75 732f 6172 7469  om/hc/en-us/arti
+00007330: 636c 6573 2f32 3031 3839 3336 3038 2d57  cles/201893608-W
+00007340: 6861 742d 6172 652d 7468 652d 7769 7468  hat-are-the-with
+00007350: 6472 6177 616c 2d66 6565 732d 0a20 2020  drawal-fees-.   
+00007360: 2020 2020 2020 2020 2023 2074 6f20 6164           # to ad
+00007370: 6420 7375 7070 6f72 7420 666f 7220 6d75  d support for mu
+00007380: 6c74 6970 6c65 2077 6974 6864 7261 7761  ltiple withdrawa
+00007390: 6c2f 6465 706f 7369 7420 6d65 7468 6f64  l/deposit method
+000073a0: 7320 616e 640a 2020 2020 2020 2020 2020  s and.          
+000073b0: 2020 2320 6469 6666 6572 656e 7469 6174    # differentiat
+000073c0: 6564 2066 6565 7320 666f 7220 6561 6368  ed fees for each
+000073d0: 2070 6172 7469 6375 6c61 7220 6d65 7468   particular meth
+000073e0: 6f64 0a20 2020 2020 2020 2020 2020 2063  od.            c
+000073f0: 6f64 6520 3d20 7365 6c66 2e73 6166 655f  ode = self.safe_
+00007400: 6375 7272 656e 6379 5f63 6f64 6528 6964  currency_code(id
+00007410: 290a 2020 2020 2020 2020 2020 2020 7072  ).            pr
+00007420: 6563 6973 696f 6e20 3d20 7365 6c66 2e70  ecision = self.p
+00007430: 6172 7365 5f6e 756d 6265 7228 7365 6c66  arse_number(self
+00007440: 2e70 6172 7365 5f70 7265 6369 7369 6f6e  .parse_precision
+00007450: 2873 656c 662e 7361 6665 5f73 7472 696e  (self.safe_strin
+00007460: 6728 6375 7272 656e 6379 2c20 2764 6563  g(currency, 'dec
+00007470: 696d 616c 7327 2929 290a 2020 2020 2020  imals'))).      
+00007480: 2020 2020 2020 2320 6173 7375 6d65 7320        # assumes 
+00007490: 616c 6c20 6375 7272 656e 6369 6573 2061  all currencies a
+000074a0: 7265 2061 6374 6976 6520 6578 6365 7074  re active except
+000074b0: 2074 686f 7365 206c 6973 7465 6420 6162   those listed ab
+000074c0: 6f76 650a 2020 2020 2020 2020 2020 2020  ove.            
+000074d0: 6163 7469 7665 203d 2073 656c 662e 7361  active = self.sa
+000074e0: 6665 5f73 7472 696e 6728 6375 7272 656e  fe_string(curren
+000074f0: 6379 2c20 2773 7461 7475 7327 2920 3d3d  cy, 'status') ==
+00007500: 2027 656e 6162 6c65 6427 0a20 2020 2020   'enabled'.     
+00007510: 2020 2020 2020 2072 6573 756c 745b 636f         result[co
+00007520: 6465 5d20 3d20 7b0a 2020 2020 2020 2020  de] = {.        
+00007530: 2020 2020 2020 2020 2769 6427 3a20 6964          'id': id
+00007540: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007550: 2020 2763 6f64 6527 3a20 636f 6465 2c0a    'code': code,.
+00007560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007570: 2769 6e66 6f27 3a20 6375 7272 656e 6379  'info': currency
+00007580: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00007590: 2020 276e 616d 6527 3a20 7365 6c66 2e73    'name': self.s
+000075a0: 6166 655f 7374 7269 6e67 2863 7572 7265  afe_string(curre
+000075b0: 6e63 792c 2027 616c 746e 616d 6527 292c  ncy, 'altname'),
+000075c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000075d0: 2027 6163 7469 7665 273a 2061 6374 6976   'active': activ
+000075e0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+000075f0: 2020 2027 6465 706f 7369 7427 3a20 4e6f     'deposit': No
+00007600: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00007610: 2020 2020 2777 6974 6864 7261 7727 3a20      'withdraw': 
+00007620: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00007630: 2020 2020 2020 2766 6565 273a 204e 6f6e        'fee': Non
+00007640: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+00007650: 2020 2027 7072 6563 6973 696f 6e27 3a20     'precision': 
+00007660: 7072 6563 6973 696f 6e2c 0a20 2020 2020  precision,.     
+00007670: 2020 2020 2020 2020 2020 2027 6c69 6d69             'limi
+00007680: 7473 273a 207b 0a20 2020 2020 2020 2020  ts': {.         
+00007690: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
+000076a0: 6e74 273a 207b 0a20 2020 2020 2020 2020  nt': {.         
+000076b0: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+000076c0: 6d69 6e27 3a20 7072 6563 6973 696f 6e2c  min': precision,
+000076d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000076e0: 2020 2020 2020 2020 2027 6d61 7827 3a20           'max': 
+000076f0: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00007700: 2020 2020 2020 2020 2020 7d2c 0a20 2020            },.   
+00007710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007720: 2027 7769 7468 6472 6177 273a 207b 0a20   'withdraw': {. 
+00007730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00007740: 2020 2020 2020 2027 6d69 6e27 3a20 4e6f         'min': No
+00007750: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00007760: 2020 2020 2020 2020 2020 2020 276d 6178              'max
+00007770: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+00007780: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
 00007790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077a0: 2027 6d61 7827 3a20 4e6f 6e65 2c0a 2020   'max': None,.  
-000077b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000077c0: 2020 7d2c 0a20 2020 2020 2020 2020 2020    },.           
-000077d0: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-000077e0: 2020 2020 2020 2020 276e 6574 776f 726b          'network
-000077f0: 7327 3a20 7b7d 2c0a 2020 2020 2020 2020  s': {},.        
-00007800: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00007810: 7475 726e 2072 6573 756c 740a 0a20 2020  turn result..   
-00007820: 2064 6566 2066 6574 6368 5f74 7261 6469   def fetch_tradi
-00007830: 6e67 5f66 6565 2873 656c 662c 2073 796d  ng_fee(self, sym
-00007840: 626f 6c3a 2073 7472 2c20 7061 7261 6d73  bol: str, params
-00007850: 3d7b 7d29 202d 3e20 5472 6164 696e 6746  ={}) -> TradingF
-00007860: 6565 496e 7465 7266 6163 653a 0a20 2020  eeInterface:.   
-00007870: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00007880: 2066 6574 6368 2074 6865 2074 7261 6469   fetch the tradi
-00007890: 6e67 2066 6565 7320 666f 7220 6120 6d61  ng fees for a ma
-000078a0: 726b 6574 0a20 2020 2020 2020 203a 7365  rket.        :se
-000078b0: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
-000078c0: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
-000078d0: 2374 6167 2f41 6363 6f75 6e74 2d44 6174  #tag/Account-Dat
-000078e0: 612f 6f70 6572 6174 696f 6e2f 6765 7454  a/operation/getT
-000078f0: 7261 6465 566f 6c75 6d65 0a20 2020 2020  radeVolume.     
-00007900: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
-00007910: 6d62 6f6c 3a20 756e 6966 6965 6420 6d61  mbol: unified ma
-00007920: 726b 6574 2073 796d 626f 6c0a 2020 2020  rket symbol.    
-00007930: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
-00007940: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
-00007950: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
-00007960: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
-00007970: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
-00007980: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
-00007990: 7320 6469 6374 3a20 6120 6066 6565 2073  s dict: a `fee s
-000079a0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-000079b0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-000079c0: 232f 3f69 643d 6665 652d 7374 7275 6374  #/?id=fee-struct
-000079d0: 7572 653e 600a 2020 2020 2020 2020 2222  ure>`.        ""
-000079e0: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
-000079f0: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-00007a00: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
-00007a10: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
-00007a20: 6c29 0a20 2020 2020 2020 2072 6571 7565  l).        reque
-00007a30: 7374 203d 207b 0a20 2020 2020 2020 2020  st = {.         
-00007a40: 2020 2027 7061 6972 273a 206d 6172 6b65     'pair': marke
-00007a50: 745b 2769 6427 5d2c 0a20 2020 2020 2020  t['id'],.       
-00007a60: 2020 2020 2027 6665 652d 696e 666f 273a       'fee-info':
-00007a70: 2054 7275 652c 0a20 2020 2020 2020 207d   True,.        }
-00007a80: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-00007a90: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-00007aa0: 506f 7374 5472 6164 6556 6f6c 756d 6528  PostTradeVolume(
-00007ab0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00007ac0: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-00007ad0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00007ae0: 2320 2020 2020 7b0a 2020 2020 2020 2020  #     {.        
-00007af0: 2320 2020 2020 2020 2022 6572 726f 7222  #        "error"
-00007b00: 3a20 5b5d 2c0a 2020 2020 2020 2020 2320  : [],.        # 
-00007b10: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
-00007b20: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-00007b30: 2020 2020 2020 2263 7572 7265 6e63 7922        "currency"
-00007b40: 3a20 275a 5553 4427 2c0a 2020 2020 2020  : 'ZUSD',.      
-00007b50: 2020 2320 2020 2020 2020 2020 2022 766f    #          "vo
-00007b60: 6c75 6d65 223a 2027 302e 3030 3030 272c  lume": '0.0000',
-00007b70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007b80: 2020 2020 2266 6565 7322 3a20 7b0a 2020      "fees": {.  
-00007b90: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00007ba0: 2020 2022 5858 4254 5a55 5344 223a 207b     "XXBTZUSD": {
-00007bb0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007bc0: 2020 2020 2020 2020 2266 6565 223a 2027          "fee": '
-00007bd0: 302e 3236 3030 272c 0a20 2020 2020 2020  0.2600',.       
-00007be0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00007bf0: 226d 696e 6665 6522 3a20 2730 2e31 3030  "minfee": '0.100
-00007c00: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
-00007c10: 2020 2020 2020 2020 2020 2022 6d61 7866             "maxf
-00007c20: 6565 223a 2027 302e 3236 3030 272c 0a20  ee": '0.2600',. 
-00007c30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00007c40: 2020 2020 2020 226e 6578 7466 6565 223a        "nextfee":
-00007c50: 2027 302e 3234 3030 272c 0a20 2020 2020   '0.2400',.     
-00007c60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00007c70: 2020 2274 6965 7276 6f6c 756d 6522 3a20    "tiervolume": 
-00007c80: 2730 2e30 3030 3027 2c0a 2020 2020 2020  '0.0000',.      
-00007c90: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00007ca0: 2022 6e65 7874 766f 6c75 6d65 223a 2027   "nextvolume": '
-00007cb0: 3530 3030 302e 3030 3030 270a 2020 2020  50000.0000'.    
-00007cc0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00007cd0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
-00007ce0: 2020 2020 2020 7d2c 0a20 2020 2020 2020        },.       
-00007cf0: 2023 2020 2020 2020 2020 2020 2266 6565   #          "fee
-00007d00: 735f 6d61 6b65 7222 3a20 7b0a 2020 2020  s_maker": {.    
-00007d10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00007d20: 2022 5858 4254 5a55 5344 223a 207b 0a20   "XXBTZUSD": {. 
-00007d30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00007d40: 2020 2020 2020 2266 6565 223a 2027 302e        "fee": '0.
-00007d50: 3136 3030 272c 0a20 2020 2020 2020 2023  1600',.        #
-00007d60: 2020 2020 2020 2020 2020 2020 2020 226d                "m
-00007d70: 696e 6665 6522 3a20 2730 2e30 3030 3027  infee": '0.0000'
-00007d80: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00007d90: 2020 2020 2020 2020 2022 6d61 7866 6565           "maxfee
-00007da0: 223a 2027 302e 3136 3030 272c 0a20 2020  ": '0.1600',.   
-00007db0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00007dc0: 2020 2020 226e 6578 7466 6565 223a 2027      "nextfee": '
-00007dd0: 302e 3134 3030 272c 0a20 2020 2020 2020  0.1400',.       
-00007de0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00007df0: 2274 6965 7276 6f6c 756d 6522 3a20 2730  "tiervolume": '0
-00007e00: 2e30 3030 3027 2c0a 2020 2020 2020 2020  .0000',.        
-00007e10: 2320 2020 2020 2020 2020 2020 2020 2022  #              "
-00007e20: 6e65 7874 766f 6c75 6d65 223a 2027 3530  nextvolume": '50
-00007e30: 3030 302e 3030 3030 270a 2020 2020 2020  000.0000'.      
-00007e40: 2020 2320 2020 2020 2020 2020 2020 207d    #            }
-00007e50: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00007e60: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-00007e70: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00007e80: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00007e90: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00007ea0: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00007eb0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00007ec0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00007ed0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00007ee0: 7061 7273 655f 7472 6164 696e 675f 6665  parse_trading_fe
-00007ef0: 6528 7265 7375 6c74 2c20 6d61 726b 6574  e(result, market
-00007f00: 290a 0a20 2020 2064 6566 2070 6172 7365  )..    def parse
-00007f10: 5f74 7261 6469 6e67 5f66 6565 2873 656c  _trading_fee(sel
-00007f20: 662c 2072 6573 706f 6e73 652c 206d 6172  f, response, mar
-00007f30: 6b65 7429 3a0a 2020 2020 2020 2020 6d61  ket):.        ma
-00007f40: 6b65 7246 6565 7320 3d20 7365 6c66 2e73  kerFees = self.s
-00007f50: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-00007f60: 7365 2c20 2766 6565 735f 6d61 6b65 7227  se, 'fees_maker'
-00007f70: 2c20 7b7d 290a 2020 2020 2020 2020 7461  , {}).        ta
-00007f80: 6b65 7246 6565 7320 3d20 7365 6c66 2e73  kerFees = self.s
-00007f90: 6166 655f 7661 6c75 6528 7265 7370 6f6e  afe_value(respon
-00007fa0: 7365 2c20 2766 6565 7327 2c20 7b7d 290a  se, 'fees', {}).
-00007fb0: 2020 2020 2020 2020 7379 6d62 6f6c 4d61          symbolMa
-00007fc0: 6b65 7246 6565 203d 2073 656c 662e 7361  kerFee = self.sa
-00007fd0: 6665 5f76 616c 7565 286d 616b 6572 4665  fe_value(makerFe
-00007fe0: 6573 2c20 6d61 726b 6574 5b27 6964 275d  es, market['id']
-00007ff0: 2c20 7b7d 290a 2020 2020 2020 2020 7379  , {}).        sy
-00008000: 6d62 6f6c 5461 6b65 7246 6565 203d 2073  mbolTakerFee = s
-00008010: 656c 662e 7361 6665 5f76 616c 7565 2874  elf.safe_value(t
-00008020: 616b 6572 4665 6573 2c20 6d61 726b 6574  akerFees, market
-00008030: 5b27 6964 275d 2c20 7b7d 290a 2020 2020  ['id'], {}).    
-00008040: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-00008050: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-00008060: 2072 6573 706f 6e73 652c 0a20 2020 2020   response,.     
-00008070: 2020 2020 2020 2027 7379 6d62 6f6c 273a         'symbol':
-00008080: 206d 6172 6b65 745b 2773 796d 626f 6c27   market['symbol'
-00008090: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-000080a0: 6d61 6b65 7227 3a20 7365 6c66 2e73 6166  maker': self.saf
-000080b0: 655f 6e75 6d62 6572 2873 796d 626f 6c4d  e_number(symbolM
-000080c0: 616b 6572 4665 652c 2027 6665 6527 292c  akerFee, 'fee'),
-000080d0: 0a20 2020 2020 2020 2020 2020 2027 7461  .            'ta
-000080e0: 6b65 7227 3a20 7365 6c66 2e73 6166 655f  ker': self.safe_
-000080f0: 6e75 6d62 6572 2873 796d 626f 6c54 616b  number(symbolTak
-00008100: 6572 4665 652c 2027 6665 6527 292c 0a20  erFee, 'fee'),. 
-00008110: 2020 2020 2020 2020 2020 2027 7065 7263             'perc
-00008120: 656e 7461 6765 273a 2054 7275 652c 0a20  entage': True,. 
-00008130: 2020 2020 2020 2020 2020 2027 7469 6572             'tier
-00008140: 4261 7365 6427 3a20 5472 7565 2c0a 2020  Based': True,.  
-00008150: 2020 2020 2020 7d0a 0a20 2020 2064 6566        }..    def
-00008160: 2070 6172 7365 5f62 6964 5f61 736b 2873   parse_bid_ask(s
-00008170: 656c 662c 2062 6964 6173 6b2c 2070 7269  elf, bidask, pri
-00008180: 6365 4b65 793a 2049 6e64 6578 5479 7065  ceKey: IndexType
-00008190: 203d 2030 2c20 616d 6f75 6e74 4b65 793a   = 0, amountKey:
-000081a0: 2049 6e64 6578 5479 7065 203d 2031 2c20   IndexType = 1, 
-000081b0: 636f 756e 744f 7249 644b 6579 3a20 496e  countOrIdKey: In
-000081c0: 6465 7854 7970 6520 3d20 3229 3a0a 2020  dexType = 2):.  
-000081d0: 2020 2020 2020 7072 6963 6520 3d20 7365        price = se
-000081e0: 6c66 2e73 6166 655f 6e75 6d62 6572 2862  lf.safe_number(b
-000081f0: 6964 6173 6b2c 2070 7269 6365 4b65 7929  idask, priceKey)
-00008200: 0a20 2020 2020 2020 2061 6d6f 756e 7420  .        amount 
-00008210: 3d20 7365 6c66 2e73 6166 655f 6e75 6d62  = self.safe_numb
-00008220: 6572 2862 6964 6173 6b2c 2061 6d6f 756e  er(bidask, amoun
-00008230: 744b 6579 290a 2020 2020 2020 2020 7469  tKey).        ti
-00008240: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
-00008250: 6166 655f 696e 7465 6765 7228 6269 6461  afe_integer(bida
-00008260: 736b 2c20 3229 0a20 2020 2020 2020 2072  sk, 2).        r
-00008270: 6574 7572 6e20 5b70 7269 6365 2c20 616d  eturn [price, am
-00008280: 6f75 6e74 2c20 7469 6d65 7374 616d 705d  ount, timestamp]
-00008290: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
-000082a0: 6f72 6465 725f 626f 6f6b 2873 656c 662c  order_book(self,
-000082b0: 2073 796d 626f 6c3a 2073 7472 2c20 6c69   symbol: str, li
-000082c0: 6d69 743a 2049 6e74 203d 204e 6f6e 652c  mit: Int = None,
-000082d0: 2070 6172 616d 733d 7b7d 2920 2d3e 204f   params={}) -> O
-000082e0: 7264 6572 426f 6f6b 3a0a 2020 2020 2020  rderBook:.      
-000082f0: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-00008300: 7463 6865 7320 696e 666f 726d 6174 696f  tches informatio
-00008310: 6e20 6f6e 206f 7065 6e20 6f72 6465 7273  n on open orders
-00008320: 2077 6974 6820 6269 6428 6275 7929 2061   with bid(buy) a
-00008330: 6e64 2061 736b 2873 656c 6c29 2070 7269  nd ask(sell) pri
-00008340: 6365 732c 2076 6f6c 756d 6573 2061 6e64  ces, volumes and
-00008350: 206f 7468 6572 2064 6174 610a 2020 2020   other data.    
-00008360: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-00008370: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-00008380: 6d2f 7265 7374 2f23 7461 672f 5370 6f74  m/rest/#tag/Spot
-00008390: 2d4d 6172 6b65 742d 4461 7461 2f6f 7065  -Market-Data/ope
-000083a0: 7261 7469 6f6e 2f67 6574 4f72 6465 7242  ration/getOrderB
-000083b0: 6f6f 6b0a 2020 2020 2020 2020 3a70 6172  ook.        :par
-000083c0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
-000083d0: 6e69 6669 6564 2073 796d 626f 6c20 6f66  nified symbol of
-000083e0: 2074 6865 206d 6172 6b65 7420 746f 2066   the market to f
-000083f0: 6574 6368 2074 6865 206f 7264 6572 2062  etch the order b
-00008400: 6f6f 6b20 666f 720a 2020 2020 2020 2020  ook for.        
-00008410: 3a70 6172 616d 2069 6e74 205b 6c69 6d69  :param int [limi
-00008420: 745d 3a20 7468 6520 6d61 7869 6d75 6d20  t]: the maximum 
-00008430: 616d 6f75 6e74 206f 6620 6f72 6465 7220  amount of order 
-00008440: 626f 6f6b 2065 6e74 7269 6573 2074 6f20  book entries to 
-00008450: 7265 7475 726e 0a20 2020 2020 2020 203a  return.        :
-00008460: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
-00008470: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
-00008480: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
-00008490: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
-000084a0: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
-000084b0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-000084c0: 743a 2041 2064 6963 7469 6f6e 6172 7920  t: A dictionary 
-000084d0: 6f66 2060 6f72 6465 7220 626f 6f6b 2073  of `order book s
-000084e0: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
-000084f0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00008500: 2f23 2f3f 6964 3d6f 7264 6572 2d62 6f6f  /#/?id=order-boo
-00008510: 6b2d 7374 7275 6374 7572 653e 6020 696e  k-structure>` in
-00008520: 6465 7865 6420 6279 206d 6172 6b65 7420  dexed by market 
-00008530: 7379 6d62 6f6c 730a 2020 2020 2020 2020  symbols.        
-00008540: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00008550: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00008560: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
-00008570: 2073 656c 662e 6d61 726b 6574 2873 796d   self.market(sym
-00008580: 626f 6c29 0a20 2020 2020 2020 2069 6620  bol).        if 
-00008590: 6d61 726b 6574 5b27 6461 726b 706f 6f6c  market['darkpool
-000085a0: 275d 3a0a 2020 2020 2020 2020 2020 2020  ']:.            
-000085b0: 7261 6973 6520 4578 6368 616e 6765 4572  raise ExchangeEr
-000085c0: 726f 7228 7365 6c66 2e69 6420 2b20 2720  ror(self.id + ' 
-000085d0: 6665 7463 684f 7264 6572 426f 6f6b 2829  fetchOrderBook()
-000085e0: 2064 6f65 7320 6e6f 7420 7072 6f76 6964   does not provid
-000085f0: 6520 616e 206f 7264 6572 2062 6f6f 6b20  e an order book 
-00008600: 666f 7220 6461 726b 706f 6f6c 2073 796d  for darkpool sym
-00008610: 626f 6c20 2720 2b20 7379 6d62 6f6c 290a  bol ' + symbol).
-00008620: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00008630: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-00008640: 2770 6169 7227 3a20 6d61 726b 6574 5b27  'pair': market['
-00008650: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
-00008660: 2020 2020 2020 2020 6966 206c 696d 6974          if limit
-00008670: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00008680: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00008690: 745b 2763 6f75 6e74 275d 203d 206c 696d  t['count'] = lim
-000086a0: 6974 2020 2320 3130 300a 2020 2020 2020  it  # 100.      
-000086b0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-000086c0: 662e 7075 626c 6963 4765 7444 6570 7468  f.publicGetDepth
-000086d0: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-000086e0: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
-000086f0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-00008700: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-00008710: 2023 2020 2020 2020 2020 2022 6572 726f   #         "erro
-00008720: 7222 3a5b 5d2c 0a20 2020 2020 2020 2023  r":[],.        #
-00008730: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-00008740: 223a 7b0a 2020 2020 2020 2020 2320 2020  ":{.        #   
-00008750: 2020 2020 2020 2020 2020 2258 4554 4858            "XETHX
-00008760: 5842 5422 3a7b 0a20 2020 2020 2020 2023  XBT":{.        #
-00008770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008780: 2022 6173 6b73 223a 5b0a 2020 2020 2020   "asks":[.      
-00008790: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000087a0: 2020 2020 2020 2020 5b22 302e 3032 3334          ["0.0234
-000087b0: 3830 222c 2234 2e30 3030 222c 3135 3836  80","4.000",1586
-000087c0: 3332 3133 3037 5d2c 0a20 2020 2020 2020  321307],.       
-000087d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000087e0: 2020 2020 2020 205b 2230 2e30 3233 3439         ["0.02349
-000087f0: 3022 2c22 3530 2e30 3935 222c 3135 3836  0","50.095",1586
-00008800: 3332 3133 3036 5d2c 0a20 2020 2020 2020  321306],.       
-00008810: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00008820: 2020 2020 2020 205b 2230 2e30 3233 3530         ["0.02350
-00008830: 3022 2c22 3238 2e35 3335 222c 3135 3836  0","28.535",1586
-00008840: 3332 3133 3032 5d2c 0a20 2020 2020 2020  321302],.       
-00008850: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00008860: 2020 205d 2c0a 2020 2020 2020 2020 2320     ],.        # 
-00008870: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00008880: 2262 6964 7322 3a5b 0a20 2020 2020 2020  "bids":[.       
-00008890: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000088a0: 2020 2020 2020 205b 2230 2e30 3233 3437         ["0.02347
-000088b0: 3022 2c22 3539 2e35 3830 222c 3135 3836  0","59.580",1586
-000088c0: 3332 3133 3037 5d2c 0a20 2020 2020 2020  321307],.       
-000088d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000088e0: 2020 2020 2020 205b 2230 2e30 3233 3436         ["0.02346
-000088f0: 3022 2c22 3230 2e30 3030 222c 3135 3836  0","20.000",1586
-00008900: 3332 3133 3031 5d2c 0a20 2020 2020 2020  321301],.       
-00008910: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00008920: 2020 2020 2020 205b 2230 2e30 3233 3434         ["0.02344
-00008930: 3022 2c22 3637 2e38 3332 222c 3135 3836  0","67.832",1586
-00008940: 3332 3133 3036 5d2c 0a20 2020 2020 2020  321306],.       
-00008950: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00008960: 2020 205d 0a20 2020 2020 2020 2023 2020     ].        #  
-00008970: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-00008980: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-00008990: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-000089a0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-000089b0: 2020 2072 6573 756c 7420 3d20 7365 6c66     result = self
-000089c0: 2e73 6166 655f 7661 6c75 6528 7265 7370  .safe_value(resp
-000089d0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-000089e0: 7b7d 290a 2020 2020 2020 2020 6f72 6465  {}).        orde
-000089f0: 7262 6f6f 6b20 3d20 7365 6c66 2e73 6166  rbook = self.saf
-00008a00: 655f 7661 6c75 6528 7265 7375 6c74 2c20  e_value(result, 
-00008a10: 6d61 726b 6574 5b27 6964 275d 290a 2020  market['id']).  
-00008a20: 2020 2020 2020 2320 736f 6d65 7469 6d65        # sometime
-00008a30: 7320 6b72 616b 656e 2072 6574 7572 6e73  s kraken returns
-00008a40: 2077 736e 616d 6520 696e 7374 6561 6420   wsname instead 
-00008a50: 6f66 206d 6172 6b65 7420 6964 0a20 2020  of market id.   
-00008a60: 2020 2020 2023 2068 7474 7073 3a2f 2f67       # https://g
-00008a70: 6974 6875 622e 636f 6d2f 6363 7874 2f63  ithub.com/ccxt/c
-00008a80: 6378 742f 6973 7375 6573 2f38 3636 320a  cxt/issues/8662.
-00008a90: 2020 2020 2020 2020 6d61 726b 6574 496e          marketIn
-00008aa0: 666f 203d 2073 656c 662e 7361 6665 5f76  fo = self.safe_v
-00008ab0: 616c 7565 286d 6172 6b65 742c 2027 696e  alue(market, 'in
-00008ac0: 666f 272c 207b 7d29 0a20 2020 2020 2020  fo', {}).       
-00008ad0: 2077 734e 616d 6520 3d20 7365 6c66 2e73   wsName = self.s
-00008ae0: 6166 655f 7661 6c75 6528 6d61 726b 6574  afe_value(market
-00008af0: 496e 666f 2c20 2777 736e 616d 6527 290a  Info, 'wsname').
-00008b00: 2020 2020 2020 2020 6966 2077 734e 616d          if wsNam
-00008b10: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-00008b20: 2020 2020 2020 2020 2020 206f 7264 6572             order
-00008b30: 626f 6f6b 203d 2073 656c 662e 7361 6665  book = self.safe
-00008b40: 5f76 616c 7565 2872 6573 756c 742c 2077  _value(result, w
-00008b50: 734e 616d 652c 206f 7264 6572 626f 6f6b  sName, orderbook
-00008b60: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00008b70: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-00008b80: 725f 626f 6f6b 286f 7264 6572 626f 6f6b  r_book(orderbook
-00008b90: 2c20 7379 6d62 6f6c 290a 0a20 2020 2064  , symbol)..    d
-00008ba0: 6566 2070 6172 7365 5f74 6963 6b65 7228  ef parse_ticker(
-00008bb0: 7365 6c66 2c20 7469 636b 6572 2c20 6d61  self, ticker, ma
-00008bc0: 726b 6574 3a20 4d61 726b 6574 203d 204e  rket: Market = N
-00008bd0: 6f6e 6529 202d 3e20 5469 636b 6572 3a0a  one) -> Ticker:.
-00008be0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00008bf0: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00008c00: 2020 2320 2020 2020 2020 2020 2261 223a    #         "a":
-00008c10: 5b22 3234 3332 2e37 3730 3030 222c 2231  ["2432.77000","1
-00008c20: 222c 2231 2e30 3030 225d 2c0a 2020 2020  ","1.000"],.    
-00008c30: 2020 2020 2320 2020 2020 2020 2020 2262      #         "b
-00008c40: 223a 5b22 3234 3331 2e33 3730 3030 222c  ":["2431.37000",
-00008c50: 2232 222c 2232 2e30 3030 225d 2c0a 2020  "2","2.000"],.  
-00008c60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00008c70: 2263 223a 5b22 3234 3330 2e35 3830 3030  "c":["2430.58000
-00008c80: 222c 2230 2e30 3434 3038 3931 3022 5d2c  ","0.04408910"],
-00008c90: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00008ca0: 2020 2022 7622 3a5b 2234 3134 372e 3934     "v":["4147.94
-00008cb0: 3437 3439 3031 222c 2238 3839 362e 3936  474901","8896.96
-00008cc0: 3038 3633 3034 225d 2c0a 2020 2020 2020  086304"],.      
-00008cd0: 2020 2320 2020 2020 2020 2020 2270 223a    #         "p":
-00008ce0: 5b22 3234 3536 2e32 3232 3339 222c 2232  ["2456.22239","2
-00008cf0: 3536 382e 3633 3033 3222 5d2c 0a20 2020  568.63032"],.   
-00008d00: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-00008d10: 7422 3a5b 3339 3037 2c31 3030 3536 5d2c  t":[3907,10056],
-00008d20: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00008d30: 2020 2022 6c22 3a5b 2232 3330 322e 3138     "l":["2302.18
-00008d40: 3030 3022 2c22 3233 3032 2e31 3830 3030  000","2302.18000
-00008d50: 225d 2c0a 2020 2020 2020 2020 2320 2020  "],.        #   
-00008d60: 2020 2020 2020 2268 223a 5b22 3236 3231        "h":["2621
-00008d70: 2e31 3430 3030 222c 2232 3836 302e 3031  .14000","2860.01
-00008d80: 3030 3022 5d2c 0a20 2020 2020 2020 2023  000"],.        #
-00008d90: 2020 2020 2020 2020 2022 6f22 3a22 3235           "o":"25
-00008da0: 3731 2e35 3630 3030 220a 2020 2020 2020  71.56000".      
-00008db0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00008dc0: 2020 230a 2020 2020 2020 2020 7379 6d62    #.        symb
-00008dd0: 6f6c 203d 2073 656c 662e 7361 6665 5f73  ol = self.safe_s
-00008de0: 796d 626f 6c28 4e6f 6e65 2c20 6d61 726b  ymbol(None, mark
-00008df0: 6574 290a 2020 2020 2020 2020 7620 3d20  et).        v = 
-00008e00: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00008e10: 7469 636b 6572 2c20 2776 272c 205b 5d29  ticker, 'v', [])
-00008e20: 0a20 2020 2020 2020 2062 6173 6556 6f6c  .        baseVol
-00008e30: 756d 6520 3d20 7365 6c66 2e73 6166 655f  ume = self.safe_
-00008e40: 7374 7269 6e67 2876 2c20 3129 0a20 2020  string(v, 1).   
-00008e50: 2020 2020 2070 203d 2073 656c 662e 7361       p = self.sa
-00008e60: 6665 5f76 616c 7565 2874 6963 6b65 722c  fe_value(ticker,
-00008e70: 2027 7027 2c20 5b5d 290a 2020 2020 2020   'p', []).      
-00008e80: 2020 7677 6170 203d 2073 656c 662e 7361    vwap = self.sa
-00008e90: 6665 5f73 7472 696e 6728 702c 2031 290a  fe_string(p, 1).
-00008ea0: 2020 2020 2020 2020 7175 6f74 6556 6f6c          quoteVol
-00008eb0: 756d 6520 3d20 5072 6563 6973 652e 7374  ume = Precise.st
-00008ec0: 7269 6e67 5f6d 756c 2862 6173 6556 6f6c  ring_mul(baseVol
-00008ed0: 756d 652c 2076 7761 7029 0a20 2020 2020  ume, vwap).     
-00008ee0: 2020 2063 203d 2073 656c 662e 7361 6665     c = self.safe
-00008ef0: 5f76 616c 7565 2874 6963 6b65 722c 2027  _value(ticker, '
-00008f00: 6327 2c20 5b5d 290a 2020 2020 2020 2020  c', []).        
-00008f10: 6c61 7374 203d 2073 656c 662e 7361 6665  last = self.safe
-00008f20: 5f73 7472 696e 6728 632c 2030 290a 2020  _string(c, 0).  
-00008f30: 2020 2020 2020 6869 6768 203d 2073 656c        high = sel
-00008f40: 662e 7361 6665 5f76 616c 7565 2874 6963  f.safe_value(tic
-00008f50: 6b65 722c 2027 6827 2c20 5b5d 290a 2020  ker, 'h', []).  
-00008f60: 2020 2020 2020 6c6f 7720 3d20 7365 6c66        low = self
-00008f70: 2e73 6166 655f 7661 6c75 6528 7469 636b  .safe_value(tick
-00008f80: 6572 2c20 276c 272c 205b 5d29 0a20 2020  er, 'l', []).   
-00008f90: 2020 2020 2062 6964 203d 2073 656c 662e       bid = self.
-00008fa0: 7361 6665 5f76 616c 7565 2874 6963 6b65  safe_value(ticke
-00008fb0: 722c 2027 6227 2c20 5b5d 290a 2020 2020  r, 'b', []).    
-00008fc0: 2020 2020 6173 6b20 3d20 7365 6c66 2e73      ask = self.s
-00008fd0: 6166 655f 7661 6c75 6528 7469 636b 6572  afe_value(ticker
-00008fe0: 2c20 2761 272c 205b 5d29 0a20 2020 2020  , 'a', []).     
-00008ff0: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
-00009000: 6166 655f 7469 636b 6572 287b 0a20 2020  afe_ticker({.   
-00009010: 2020 2020 2020 2020 2027 7379 6d62 6f6c           'symbol
-00009020: 273a 2073 796d 626f 6c2c 0a20 2020 2020  ': symbol,.     
-00009030: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
-00009040: 7027 3a20 4e6f 6e65 2c0a 2020 2020 2020  p': None,.      
-00009050: 2020 2020 2020 2764 6174 6574 696d 6527        'datetime'
-00009060: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00009070: 2020 2020 2768 6967 6827 3a20 7365 6c66      'high': self
-00009080: 2e73 6166 655f 7374 7269 6e67 2868 6967  .safe_string(hig
-00009090: 682c 2031 292c 0a20 2020 2020 2020 2020  h, 1),.         
-000090a0: 2020 2027 6c6f 7727 3a20 7365 6c66 2e73     'low': self.s
-000090b0: 6166 655f 7374 7269 6e67 286c 6f77 2c20  afe_string(low, 
-000090c0: 3129 2c0a 2020 2020 2020 2020 2020 2020  1),.            
-000090d0: 2762 6964 273a 2073 656c 662e 7361 6665  'bid': self.safe
-000090e0: 5f73 7472 696e 6728 6269 642c 2030 292c  _string(bid, 0),
-000090f0: 0a20 2020 2020 2020 2020 2020 2027 6269  .            'bi
-00009100: 6456 6f6c 756d 6527 3a20 4e6f 6e65 2c0a  dVolume': None,.
-00009110: 2020 2020 2020 2020 2020 2020 2761 736b              'ask
-00009120: 273a 2073 656c 662e 7361 6665 5f73 7472  ': self.safe_str
-00009130: 696e 6728 6173 6b2c 2030 292c 0a20 2020  ing(ask, 0),.   
-00009140: 2020 2020 2020 2020 2027 6173 6b56 6f6c           'askVol
-00009150: 756d 6527 3a20 4e6f 6e65 2c0a 2020 2020  ume': None,.    
-00009160: 2020 2020 2020 2020 2776 7761 7027 3a20          'vwap': 
-00009170: 7677 6170 2c0a 2020 2020 2020 2020 2020  vwap,.          
-00009180: 2020 276f 7065 6e27 3a20 7365 6c66 2e73    'open': self.s
-00009190: 6166 655f 7374 7269 6e67 2874 6963 6b65  afe_string(ticke
-000091a0: 722c 2027 6f27 292c 0a20 2020 2020 2020  r, 'o'),.       
-000091b0: 2020 2020 2027 636c 6f73 6527 3a20 6c61       'close': la
-000091c0: 7374 2c0a 2020 2020 2020 2020 2020 2020  st,.            
-000091d0: 276c 6173 7427 3a20 6c61 7374 2c0a 2020  'last': last,.  
-000091e0: 2020 2020 2020 2020 2020 2770 7265 7669            'previ
-000091f0: 6f75 7343 6c6f 7365 273a 204e 6f6e 652c  ousClose': None,
-00009200: 0a20 2020 2020 2020 2020 2020 2027 6368  .            'ch
-00009210: 616e 6765 273a 204e 6f6e 652c 0a20 2020  ange': None,.   
-00009220: 2020 2020 2020 2020 2027 7065 7263 656e           'percen
-00009230: 7461 6765 273a 204e 6f6e 652c 0a20 2020  tage': None,.   
-00009240: 2020 2020 2020 2020 2027 6176 6572 6167           'averag
-00009250: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
-00009260: 2020 2020 2020 2762 6173 6556 6f6c 756d        'baseVolum
-00009270: 6527 3a20 6261 7365 566f 6c75 6d65 2c0a  e': baseVolume,.
-00009280: 2020 2020 2020 2020 2020 2020 2771 756f              'quo
-00009290: 7465 566f 6c75 6d65 273a 2071 756f 7465  teVolume': quote
-000092a0: 566f 6c75 6d65 2c0a 2020 2020 2020 2020  Volume,.        
-000092b0: 2020 2020 2769 6e66 6f27 3a20 7469 636b      'info': tick
-000092c0: 6572 2c0a 2020 2020 2020 2020 7d2c 206d  er,.        }, m
-000092d0: 6172 6b65 7429 0a0a 2020 2020 6465 6620  arket)..    def 
-000092e0: 6665 7463 685f 7469 636b 6572 7328 7365  fetch_tickers(se
-000092f0: 6c66 2c20 7379 6d62 6f6c 733a 2053 7472  lf, symbols: Str
-00009300: 696e 6773 203d 204e 6f6e 652c 2070 6172  ings = None, par
-00009310: 616d 733d 7b7d 2920 2d3e 2054 6963 6b65  ams={}) -> Ticke
-00009320: 7273 3a0a 2020 2020 2020 2020 2222 220a  rs:.        """.
-00009330: 2020 2020 2020 2020 6665 7463 6865 7320          fetches 
-00009340: 7072 6963 6520 7469 636b 6572 7320 666f  price tickers fo
-00009350: 7220 6d75 6c74 6970 6c65 206d 6172 6b65  r multiple marke
-00009360: 7473 2c20 7374 6174 6973 7469 6361 6c20  ts, statistical 
-00009370: 696e 666f 726d 6174 696f 6e20 6361 6c63  information calc
-00009380: 756c 6174 6564 206f 7665 7220 7468 6520  ulated over the 
-00009390: 7061 7374 2032 3420 686f 7572 7320 666f  past 24 hours fo
-000093a0: 7220 6561 6368 206d 6172 6b65 740a 2020  r each market.  
-000093b0: 2020 2020 2020 3a73 6565 3a20 6874 7470        :see: http
-000093c0: 733a 2f2f 646f 6373 2e6b 7261 6b65 6e2e  s://docs.kraken.
-000093d0: 636f 6d2f 7265 7374 2f23 7461 672f 5370  com/rest/#tag/Sp
-000093e0: 6f74 2d4d 6172 6b65 742d 4461 7461 2f6f  ot-Market-Data/o
-000093f0: 7065 7261 7469 6f6e 2f67 6574 5469 636b  peration/getTick
-00009400: 6572 496e 666f 726d 6174 696f 6e0a 2020  erInformation.  
-00009410: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00009420: 5b5d 7c4e 6f6e 6520 7379 6d62 6f6c 733a  []|None symbols:
-00009430: 2075 6e69 6669 6564 2073 796d 626f 6c73   unified symbols
-00009440: 206f 6620 7468 6520 6d61 726b 6574 7320   of the markets 
-00009450: 746f 2066 6574 6368 2074 6865 2074 6963  to fetch the tic
-00009460: 6b65 7220 666f 722c 2061 6c6c 206d 6172  ker for, all mar
-00009470: 6b65 7420 7469 636b 6572 7320 6172 6520  ket tickers are 
-00009480: 7265 7475 726e 6564 2069 6620 6e6f 7420  returned if not 
-00009490: 6173 7369 676e 6564 0a20 2020 2020 2020  assigned.       
-000094a0: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-000094b0: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-000094c0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-000094d0: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-000094e0: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-000094f0: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00009500: 6963 743a 2061 2064 6963 7469 6f6e 6172  ict: a dictionar
-00009510: 7920 6f66 2060 7469 636b 6572 2073 7472  y of `ticker str
-00009520: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
-00009530: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-00009540: 2f3f 6964 3d74 6963 6b65 722d 7374 7275  /?id=ticker-stru
-00009550: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00009560: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00009570: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00009580: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00009590: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
-000095a0: 7379 6d62 6f6c 7320 6973 206e 6f74 204e  symbols is not N
-000095b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-000095c0: 2073 796d 626f 6c73 203d 2073 656c 662e   symbols = self.
-000095d0: 6d61 726b 6574 5f73 796d 626f 6c73 2873  market_symbols(s
-000095e0: 796d 626f 6c73 290a 2020 2020 2020 2020  ymbols).        
-000095f0: 2020 2020 6d61 726b 6574 4964 7320 3d20      marketIds = 
-00009600: 5b5d 0a20 2020 2020 2020 2020 2020 2066  [].            f
-00009610: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00009620: 206c 656e 2873 796d 626f 6c73 2929 3a0a   len(symbols)):.
-00009630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009640: 7379 6d62 6f6c 203d 2073 796d 626f 6c73  symbol = symbols
-00009650: 5b69 5d0a 2020 2020 2020 2020 2020 2020  [i].            
-00009660: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-00009670: 662e 6d61 726b 6574 735b 7379 6d62 6f6c  f.markets[symbol
-00009680: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-00009690: 2020 6966 206d 6172 6b65 745b 2761 6374    if market['act
-000096a0: 6976 6527 5d20 616e 6420 6e6f 7420 6d61  ive'] and not ma
-000096b0: 726b 6574 5b27 6461 726b 706f 6f6c 275d  rket['darkpool']
-000096c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000096d0: 2020 2020 2020 6d61 726b 6574 4964 732e        marketIds.
-000096e0: 6170 7065 6e64 286d 6172 6b65 745b 2769  append(market['i
-000096f0: 6427 5d29 0a20 2020 2020 2020 2020 2020  d']).           
-00009700: 2072 6571 7565 7374 5b27 7061 6972 275d   request['pair']
-00009710: 203d 2027 2c27 2e6a 6f69 6e28 6d61 726b   = ','.join(mark
-00009720: 6574 4964 7329 0a20 2020 2020 2020 2072  etIds).        r
-00009730: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
-00009740: 7562 6c69 6347 6574 5469 636b 6572 2873  ublicGetTicker(s
-00009750: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-00009760: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-00009770: 2020 2020 2074 6963 6b65 7273 203d 2072       tickers = r
-00009780: 6573 706f 6e73 655b 2772 6573 756c 7427  esponse['result'
-00009790: 5d0a 2020 2020 2020 2020 6964 7320 3d20  ].        ids = 
-000097a0: 6c69 7374 2874 6963 6b65 7273 2e6b 6579  list(tickers.key
-000097b0: 7328 2929 0a20 2020 2020 2020 2072 6573  s()).        res
-000097c0: 756c 7420 3d20 7b7d 0a20 2020 2020 2020  ult = {}.       
-000097d0: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
-000097e0: 302c 206c 656e 2869 6473 2929 3a0a 2020  0, len(ids)):.  
-000097f0: 2020 2020 2020 2020 2020 6964 203d 2069            id = i
-00009800: 6473 5b69 5d0a 2020 2020 2020 2020 2020  ds[i].          
-00009810: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00009820: 7361 6665 5f6d 6172 6b65 7428 6964 290a  safe_market(id).
-00009830: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
-00009840: 6f6c 203d 206d 6172 6b65 745b 2773 796d  ol = market['sym
-00009850: 626f 6c27 5d0a 2020 2020 2020 2020 2020  bol'].          
-00009860: 2020 7469 636b 6572 203d 2074 6963 6b65    ticker = ticke
-00009870: 7273 5b69 645d 0a20 2020 2020 2020 2020  rs[id].         
-00009880: 2020 2072 6573 756c 745b 7379 6d62 6f6c     result[symbol
-00009890: 5d20 3d20 7365 6c66 2e70 6172 7365 5f74  ] = self.parse_t
-000098a0: 6963 6b65 7228 7469 636b 6572 2c20 6d61  icker(ticker, ma
-000098b0: 726b 6574 290a 2020 2020 2020 2020 7265  rket).        re
-000098c0: 7475 726e 2073 656c 662e 6669 6c74 6572  turn self.filter
-000098d0: 5f62 795f 6172 7261 795f 7469 636b 6572  _by_array_ticker
-000098e0: 7328 7265 7375 6c74 2c20 2773 796d 626f  s(result, 'symbo
-000098f0: 6c27 2c20 7379 6d62 6f6c 7329 0a0a 2020  l', symbols)..  
-00009900: 2020 6465 6620 6665 7463 685f 7469 636b    def fetch_tick
-00009910: 6572 2873 656c 662c 2073 796d 626f 6c3a  er(self, symbol:
-00009920: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-00009930: 202d 3e20 5469 636b 6572 3a0a 2020 2020   -> Ticker:.    
-00009940: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00009950: 6665 7463 6865 7320 6120 7072 6963 6520  fetches a price 
-00009960: 7469 636b 6572 2c20 6120 7374 6174 6973  ticker, a statis
-00009970: 7469 6361 6c20 6361 6c63 756c 6174 696f  tical calculatio
-00009980: 6e20 7769 7468 2074 6865 2069 6e66 6f72  n with the infor
-00009990: 6d61 7469 6f6e 2063 616c 6375 6c61 7465  mation calculate
-000099a0: 6420 6f76 6572 2074 6865 2070 6173 7420  d over the past 
-000099b0: 3234 2068 6f75 7273 2066 6f72 2061 2073  24 hours for a s
-000099c0: 7065 6369 6669 6320 6d61 726b 6574 0a20  pecific market. 
-000099d0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-000099e0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-000099f0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-00009a00: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-00009a10: 6f70 6572 6174 696f 6e2f 6765 7454 6963  operation/getTic
-00009a20: 6b65 7249 6e66 6f72 6d61 7469 6f6e 0a20  kerInformation. 
-00009a30: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00009a40: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
-00009a50: 6420 7379 6d62 6f6c 206f 6620 7468 6520  d symbol of the 
-00009a60: 6d61 726b 6574 2074 6f20 6665 7463 6820  market to fetch 
-00009a70: 7468 6520 7469 636b 6572 2066 6f72 0a20  the ticker for. 
-00009a80: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00009a90: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
-00009aa0: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
-00009ab0: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
-00009ac0: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
-00009ad0: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
-00009ae0: 7572 6e73 2064 6963 743a 2061 2060 7469  urns dict: a `ti
-00009af0: 636b 6572 2073 7472 7563 7475 7265 203c  cker structure <
-00009b00: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00009b10: 742e 636f 6d2f 232f 3f69 643d 7469 636b  t.com/#/?id=tick
-00009b20: 6572 2d73 7472 7563 7475 7265 3e60 0a20  er-structure>`. 
-00009b30: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00009b40: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
-00009b50: 6b65 7473 2829 0a20 2020 2020 2020 2064  kets().        d
-00009b60: 6172 6b70 6f6f 6c20 3d20 7379 6d62 6f6c  arkpool = symbol
-00009b70: 2e66 696e 6428 272e 6427 2920 3e3d 2030  .find('.d') >= 0
-00009b80: 0a20 2020 2020 2020 2069 6620 6461 726b  .        if dark
-00009b90: 706f 6f6c 3a0a 2020 2020 2020 2020 2020  pool:.          
-00009ba0: 2020 7261 6973 6520 4578 6368 616e 6765    raise Exchange
-00009bb0: 4572 726f 7228 7365 6c66 2e69 6420 2b20  Error(self.id + 
-00009bc0: 2720 6665 7463 6854 6963 6b65 7228 2920  ' fetchTicker() 
-00009bd0: 646f 6573 206e 6f74 2070 726f 7669 6465  does not provide
-00009be0: 2061 2074 6963 6b65 7220 666f 7220 6461   a ticker for da
-00009bf0: 726b 706f 6f6c 2073 796d 626f 6c20 2720  rkpool symbol ' 
-00009c00: 2b20 7379 6d62 6f6c 290a 2020 2020 2020  + symbol).      
-00009c10: 2020 6d61 726b 6574 203d 2073 656c 662e    market = self.
-00009c20: 6d61 726b 6574 2873 796d 626f 6c29 0a20  market(symbol). 
-00009c30: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-00009c40: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
-00009c50: 7061 6972 273a 206d 6172 6b65 745b 2769  pair': market['i
-00009c60: 6427 5d2c 0a20 2020 2020 2020 207d 0a20  d'],.        }. 
-00009c70: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-00009c80: 3d20 7365 6c66 2e70 7562 6c69 6347 6574  = self.publicGet
-00009c90: 5469 636b 6572 2873 656c 662e 6578 7465  Ticker(self.exte
-00009ca0: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00009cb0: 6d73 2929 0a20 2020 2020 2020 2074 6963  ms)).        tic
-00009cc0: 6b65 7220 3d20 7265 7370 6f6e 7365 5b27  ker = response['
-00009cd0: 7265 7375 6c74 275d 5b6d 6172 6b65 745b  result'][market[
-00009ce0: 2769 6427 5d5d 0a20 2020 2020 2020 2072  'id']].        r
-00009cf0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-00009d00: 5f74 6963 6b65 7228 7469 636b 6572 2c20  _ticker(ticker, 
-00009d10: 6d61 726b 6574 290a 0a20 2020 2064 6566  market)..    def
-00009d20: 2070 6172 7365 5f6f 686c 6376 2873 656c   parse_ohlcv(sel
-00009d30: 662c 206f 686c 6376 2c20 6d61 726b 6574  f, ohlcv, market
-00009d40: 3a20 4d61 726b 6574 203d 204e 6f6e 6529  : Market = None)
-00009d50: 202d 3e20 6c69 7374 3a0a 2020 2020 2020   -> list:.      
-00009d60: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00009d70: 2020 5b0a 2020 2020 2020 2020 2320 2020    [.        #   
-00009d80: 2020 2020 2020 3135 3931 3437 3536 3430        1591475640
-00009d90: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00009da0: 2020 2020 2230 2e30 3235 3030 222c 0a20      "0.02500",. 
-00009db0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00009dc0: 2022 302e 3032 3530 3022 2c0a 2020 2020   "0.02500",.    
-00009dd0: 2020 2020 2320 2020 2020 2020 2020 2230      #         "0
-00009de0: 2e30 3235 3030 222c 0a20 2020 2020 2020  .02500",.       
-00009df0: 2023 2020 2020 2020 2020 2022 302e 3032   #         "0.02
-00009e00: 3530 3022 2c0a 2020 2020 2020 2020 2320  500",.        # 
-00009e10: 2020 2020 2020 2020 2230 2e30 3235 3030          "0.02500
-00009e20: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00009e30: 2020 2020 2022 392e 3132 3230 3130 3030       "9.12201000
-00009e40: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00009e50: 2020 2020 2035 0a20 2020 2020 2020 2023       5.        #
-00009e60: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-00009e70: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00009e80: 5b0a 2020 2020 2020 2020 2020 2020 7365  [.            se
-00009e90: 6c66 2e73 6166 655f 7469 6d65 7374 616d  lf.safe_timestam
-00009ea0: 7028 6f68 6c63 762c 2030 292c 0a20 2020  p(ohlcv, 0),.   
-00009eb0: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-00009ec0: 6665 5f6e 756d 6265 7228 6f68 6c63 762c  fe_number(ohlcv,
-00009ed0: 2031 292c 0a20 2020 2020 2020 2020 2020   1),.           
-00009ee0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00009ef0: 7228 6f68 6c63 762c 2032 292c 0a20 2020  r(ohlcv, 2),.   
-00009f00: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-00009f10: 6665 5f6e 756d 6265 7228 6f68 6c63 762c  fe_number(ohlcv,
-00009f20: 2033 292c 0a20 2020 2020 2020 2020 2020   3),.           
-00009f30: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
-00009f40: 7228 6f68 6c63 762c 2034 292c 0a20 2020  r(ohlcv, 4),.   
-00009f50: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
-00009f60: 6665 5f6e 756d 6265 7228 6f68 6c63 762c  fe_number(ohlcv,
-00009f70: 2036 292c 0a20 2020 2020 2020 205d 0a0a   6),.        ]..
-00009f80: 2020 2020 6465 6620 6665 7463 685f 6f68      def fetch_oh
-00009f90: 6c63 7628 7365 6c66 2c20 7379 6d62 6f6c  lcv(self, symbol
-00009fa0: 3a20 7374 722c 2074 696d 6566 7261 6d65  : str, timeframe
-00009fb0: 3d27 316d 272c 2073 696e 6365 3a20 496e  ='1m', since: In
-00009fc0: 7420 3d20 4e6f 6e65 2c20 6c69 6d69 743a  t = None, limit:
-00009fd0: 2049 6e74 203d 204e 6f6e 652c 2070 6172   Int = None, par
-00009fe0: 616d 733d 7b7d 2920 2d3e 204c 6973 745b  ams={}) -> List[
-00009ff0: 6c69 7374 5d3a 0a20 2020 2020 2020 2022  list]:.        "
-0000a000: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-0000a010: 6573 2068 6973 746f 7269 6361 6c20 6361  es historical ca
-0000a020: 6e64 6c65 7374 6963 6b20 6461 7461 2063  ndlestick data c
-0000a030: 6f6e 7461 696e 696e 6720 7468 6520 6f70  ontaining the op
-0000a040: 656e 2c20 6869 6768 2c20 6c6f 772c 2061  en, high, low, a
-0000a050: 6e64 2063 6c6f 7365 2070 7269 6365 2c20  nd close price, 
-0000a060: 616e 6420 7468 6520 766f 6c75 6d65 206f  and the volume o
-0000a070: 6620 6120 6d61 726b 6574 0a20 2020 2020  f a market.     
-0000a080: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
-0000a090: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
-0000a0a0: 2f72 6573 742f 2374 6167 2f53 706f 742d  /rest/#tag/Spot-
-0000a0b0: 4d61 726b 6574 2d44 6174 612f 6f70 6572  Market-Data/oper
-0000a0c0: 6174 696f 6e2f 6765 744f 484c 4344 6174  ation/getOHLCDat
-0000a0d0: 610a 2020 2020 2020 2020 3a70 6172 616d  a.        :param
-0000a0e0: 2073 7472 2073 796d 626f 6c3a 2075 6e69   str symbol: uni
-0000a0f0: 6669 6564 2073 796d 626f 6c20 6f66 2074  fied symbol of t
-0000a100: 6865 206d 6172 6b65 7420 746f 2066 6574  he market to fet
-0000a110: 6368 204f 484c 4356 2064 6174 6120 666f  ch OHLCV data fo
-0000a120: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-0000a130: 2073 7472 2074 696d 6566 7261 6d65 3a20   str timeframe: 
-0000a140: 7468 6520 6c65 6e67 7468 206f 6620 7469  the length of ti
-0000a150: 6d65 2065 6163 6820 6361 6e64 6c65 2072  me each candle r
-0000a160: 6570 7265 7365 6e74 730a 2020 2020 2020  epresents.      
-0000a170: 2020 3a70 6172 616d 2069 6e74 205b 7369    :param int [si
-0000a180: 6e63 655d 3a20 7469 6d65 7374 616d 7020  nce]: timestamp 
-0000a190: 696e 206d 7320 6f66 2074 6865 2065 6172  in ms of the ear
-0000a1a0: 6c69 6573 7420 6361 6e64 6c65 2074 6f20  liest candle to 
-0000a1b0: 6665 7463 680a 2020 2020 2020 2020 3a70  fetch.        :p
-0000a1c0: 6172 616d 2069 6e74 205b 6c69 6d69 745d  aram int [limit]
-0000a1d0: 3a20 7468 6520 6d61 7869 6d75 6d20 616d  : the maximum am
-0000a1e0: 6f75 6e74 206f 6620 6361 6e64 6c65 7320  ount of candles 
-0000a1f0: 746f 2066 6574 6368 0a20 2020 2020 2020  to fetch.       
-0000a200: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-0000a210: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-0000a220: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0000a230: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-0000a240: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-0000a250: 2020 2020 2020 3a70 6172 616d 2062 6f6f        :param boo
-0000a260: 6c65 616e 205b 7061 7261 6d73 2e70 6167  lean [params.pag
-0000a270: 696e 6174 655d 3a20 6465 6661 756c 7420  inate]: default 
-0000a280: 4661 6c73 652c 2077 6865 6e20 5472 7565  False, when True
-0000a290: 2077 696c 6c20 6175 746f 6d61 7469 6361   will automatica
-0000a2a0: 6c6c 7920 7061 6769 6e61 7465 2062 7920  lly paginate by 
-0000a2b0: 6361 6c6c 696e 6720 7365 6c66 2065 6e64  calling self end
-0000a2c0: 706f 696e 7420 6d75 6c74 6970 6c65 2074  point multiple t
-0000a2d0: 696d 6573 2e20 5365 6520 696e 2074 6865  imes. See in the
-0000a2e0: 2064 6f63 7320 616c 6c20 7468 6520 5b61   docs all the [a
-0000a2f0: 7661 696c 626c 6520 7061 7261 6d65 7465  vailble paramete
-0000a300: 7273 5d28 6874 7470 733a 2f2f 6769 7468  rs](https://gith
-0000a310: 7562 2e63 6f6d 2f63 6378 742f 6363 7874  ub.com/ccxt/ccxt
-0000a320: 2f77 696b 692f 4d61 6e75 616c 2370 6167  /wiki/Manual#pag
-0000a330: 696e 6174 696f 6e2d 7061 7261 6d73 290a  ination-params).
-0000a340: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0000a350: 2069 6e74 5b5d 5b5d 3a20 4120 6c69 7374   int[][]: A list
-0000a360: 206f 6620 6361 6e64 6c65 7320 6f72 6465   of candles orde
-0000a370: 7265 642c 206f 7065 6e2c 2068 6967 682c  red, open, high,
-0000a380: 206c 6f77 2c20 636c 6f73 652c 2076 6f6c   low, close, vol
-0000a390: 756d 650a 2020 2020 2020 2020 2222 220a  ume.        """.
-0000a3a0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0000a3b0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0000a3c0: 2020 2020 7061 6769 6e61 7465 203d 2046      paginate = F
-0000a3d0: 616c 7365 0a20 2020 2020 2020 2070 6167  alse.        pag
-0000a3e0: 696e 6174 652c 2070 6172 616d 7320 3d20  inate, params = 
-0000a3f0: 7365 6c66 2e68 616e 646c 655f 6f70 7469  self.handle_opti
-0000a400: 6f6e 5f61 6e64 5f70 6172 616d 7328 7061  on_and_params(pa
-0000a410: 7261 6d73 2c20 2766 6574 6368 4f48 4c43  rams, 'fetchOHLC
-0000a420: 5627 2c20 2770 6167 696e 6174 6527 290a  V', 'paginate').
-0000a430: 2020 2020 2020 2020 6966 2070 6167 696e          if pagin
-0000a440: 6174 653a 0a20 2020 2020 2020 2020 2020  ate:.           
-0000a450: 2072 6574 7572 6e20 7365 6c66 2e66 6574   return self.fet
-0000a460: 6368 5f70 6167 696e 6174 6564 5f63 616c  ch_paginated_cal
-0000a470: 6c5f 6465 7465 726d 696e 6973 7469 6328  l_deterministic(
-0000a480: 2766 6574 6368 4f48 4c43 5627 2c20 7379  'fetchOHLCV', sy
-0000a490: 6d62 6f6c 2c20 7369 6e63 652c 206c 696d  mbol, since, lim
-0000a4a0: 6974 2c20 7469 6d65 6672 616d 652c 2070  it, timeframe, p
-0000a4b0: 6172 616d 732c 2037 3230 290a 2020 2020  arams, 720).    
-0000a4c0: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
-0000a4d0: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
-0000a4e0: 0a20 2020 2020 2020 2070 6172 7365 6454  .        parsedT
-0000a4f0: 696d 6566 7261 6d65 203d 2073 656c 662e  imeframe = self.
-0000a500: 7361 6665 5f69 6e74 6567 6572 2873 656c  safe_integer(sel
-0000a510: 662e 7469 6d65 6672 616d 6573 2c20 7469  f.timeframes, ti
-0000a520: 6d65 6672 616d 6529 0a20 2020 2020 2020  meframe).       
-0000a530: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
-0000a540: 2020 2020 2020 2020 2027 7061 6972 273a           'pair':
-0000a550: 206d 6172 6b65 745b 2769 6427 5d2c 0a20   market['id'],. 
-0000a560: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0000a570: 2069 6620 7061 7273 6564 5469 6d65 6672   if parsedTimefr
-0000a580: 616d 6520 6973 206e 6f74 204e 6f6e 653a  ame is not None:
-0000a590: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000a5a0: 7565 7374 5b27 696e 7465 7276 616c 275d  uest['interval']
-0000a5b0: 203d 2070 6172 7365 6454 696d 6566 7261   = parsedTimefra
-0000a5c0: 6d65 0a20 2020 2020 2020 2065 6c73 653a  me.        else:
-0000a5d0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000a5e0: 7565 7374 5b27 696e 7465 7276 616c 275d  uest['interval']
-0000a5f0: 203d 2074 696d 6566 7261 6d65 0a20 2020   = timeframe.   
-0000a600: 2020 2020 2069 6620 7369 6e63 6520 6973       if since is
-0000a610: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000a620: 2020 2020 2020 2023 2063 6f6e 7472 6172         # contrar
-0000a630: 7920 746f 206b 7261 6b65 6e27 7320 6170  y to kraken's ap
-0000a640: 6920 646f 6375 6d65 6e74 6174 696f 6e2c  i documentation,
-0000a650: 2074 6865 2073 696e 6365 2070 6172 616d   the since param
-0000a660: 6574 6572 206d 7573 7420 6265 2070 6173  eter must be pas
-0000a670: 7365 6420 696e 206e 616e 6f73 6563 6f6e  sed in nanosecon
-0000a680: 6473 0a20 2020 2020 2020 2020 2020 2023  ds.            #
-0000a690: 2074 6865 2061 6464 696e 6720 6f66 2027   the adding of '
-0000a6a0: 3030 3030 3030 2720 6973 2063 6f70 6965  000000' is copie
-0000a6b0: 6420 6672 6f6d 2074 6865 2066 6574 6368  d from the fetch
-0000a6c0: 5472 6164 6573 2066 756e 6374 696f 6e0a  Trades function.
-0000a6d0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
-0000a6e0: 6573 745b 2773 696e 6365 275d 203d 2073  est['since'] = s
-0000a6f0: 656c 662e 6e75 6d62 6572 5f74 6f5f 7374  elf.number_to_st
-0000a700: 7269 6e67 2873 696e 6365 2920 2b20 2730  ring(since) + '0
-0000a710: 3030 3030 3027 2020 2320 6578 7065 6374  00000'  # expect
-0000a720: 6564 2074 6f20 6265 2069 6e20 6e61 6e6f  ed to be in nano
-0000a730: 7365 636f 6e64 730a 2020 2020 2020 2020  seconds.        
-0000a740: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-0000a750: 7075 626c 6963 4765 744f 484c 4328 7365  publicGetOHLC(se
-0000a760: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-0000a770: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
-0000a780: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0000a790: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0000a7a0: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
-0000a7b0: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
-0000a7c0: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
-0000a7d0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000a7e0: 2020 2020 2020 2022 5845 5448 5858 4254         "XETHXXBT
-0000a7f0: 223a 5b0a 2020 2020 2020 2020 2320 2020  ":[.        #   
-0000a800: 2020 2020 2020 2020 2020 2020 2020 5b31                [1
-0000a810: 3539 3134 3735 3538 302c 2230 2e30 3234  591475580,"0.024
-0000a820: 3939 222c 2230 2e30 3234 3939 222c 2230  99","0.02499","0
-0000a830: 2e30 3234 3939 222c 2230 2e30 3234 3939  .02499","0.02499
-0000a840: 222c 2230 2e30 3030 3030 222c 2230 2e30  ","0.00000","0.0
-0000a850: 3030 3030 3030 3022 2c30 5d2c 0a20 2020  0000000",0],.   
-0000a860: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000a870: 2020 2020 2020 205b 3135 3931 3437 3536         [15914756
-0000a880: 3430 2c22 302e 3032 3530 3022 2c22 302e  40,"0.02500","0.
-0000a890: 3032 3530 3022 2c22 302e 3032 3530 3022  02500","0.02500"
-0000a8a0: 2c22 302e 3032 3530 3022 2c22 302e 3032  ,"0.02500","0.02
-0000a8b0: 3530 3022 2c22 392e 3132 3230 3130 3030  500","9.12201000
-0000a8c0: 222c 355d 2c0a 2020 2020 2020 2020 2320  ",5],.        # 
-0000a8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a8e0: 5b31 3539 3134 3735 3730 302c 2230 2e30  [1591475700,"0.0
-0000a8f0: 3234 3939 222c 2230 2e30 3234 3939 222c  2499","0.02499",
-0000a900: 2230 2e30 3234 3939 222c 2230 2e30 3234  "0.02499","0.024
-0000a910: 3939 222c 2230 2e30 3234 3939 222c 2231  99","0.02499","1
-0000a920: 2e32 3836 3831 3431 3522 2c32 5d2c 0a20  .28681415",2],. 
-0000a930: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000a940: 2020 2020 2020 2020 205b 3135 3931 3437           [159147
-0000a950: 3537 3630 2c22 302e 3032 3439 3922 2c22  5760,"0.02499","
-0000a960: 302e 3032 3439 3922 2c22 302e 3032 3439  0.02499","0.0249
-0000a970: 3922 2c22 302e 3032 3439 3922 2c22 302e  9","0.02499","0.
-0000a980: 3032 3439 3922 2c22 302e 3038 3830 3030  02499","0.088000
-0000a990: 3030 222c 315d 2c0a 2020 2020 2020 2020  00",1],.        
-0000a9a0: 2320 2020 2020 2020 2020 2020 2020 5d2c  #             ],
-0000a9b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000a9c0: 2020 2020 2020 2022 6c61 7374 223a 3135         "last":15
-0000a9d0: 3931 3531 3735 3830 0a20 2020 2020 2020  91517580.       
-0000a9e0: 2023 2020 2020 2020 2020 207d 0a20 2020   #         }.   
-0000a9f0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-0000aa00: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
-0000aa10: 6c66 2e73 6166 655f 7661 6c75 6528 7265  lf.safe_value(re
-0000aa20: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0000aa30: 2c20 7b7d 290a 2020 2020 2020 2020 6f68  , {}).        oh
-0000aa40: 6c63 7673 203d 2073 656c 662e 7361 6665  lcvs = self.safe
-0000aa50: 5f6c 6973 7428 7265 7375 6c74 2c20 6d61  _list(result, ma
-0000aa60: 726b 6574 5b27 6964 275d 2c20 5b5d 290a  rket['id'], []).
-0000aa70: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000aa80: 656c 662e 7061 7273 655f 6f68 6c63 7673  elf.parse_ohlcvs
-0000aa90: 286f 686c 6376 732c 206d 6172 6b65 742c  (ohlcvs, market,
-0000aaa0: 2074 696d 6566 7261 6d65 2c20 7369 6e63   timeframe, sinc
-0000aab0: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
-0000aac0: 6566 2070 6172 7365 5f6c 6564 6765 725f  ef parse_ledger_
-0000aad0: 656e 7472 795f 7479 7065 2873 656c 662c  entry_type(self,
-0000aae0: 2074 7970 6529 3a0a 2020 2020 2020 2020   type):.        
-0000aaf0: 7479 7065 7320 3d20 7b0a 2020 2020 2020  types = {.      
-0000ab00: 2020 2020 2020 2774 7261 6465 273a 2027        'trade': '
-0000ab10: 7472 6164 6527 2c0a 2020 2020 2020 2020  trade',.        
-0000ab20: 2020 2020 2777 6974 6864 7261 7761 6c27      'withdrawal'
-0000ab30: 3a20 2774 7261 6e73 6163 7469 6f6e 272c  : 'transaction',
-0000ab40: 0a20 2020 2020 2020 2020 2020 2027 6465  .            'de
-0000ab50: 706f 7369 7427 3a20 2774 7261 6e73 6163  posit': 'transac
-0000ab60: 7469 6f6e 272c 0a20 2020 2020 2020 2020  tion',.         
-0000ab70: 2020 2027 7472 616e 7366 6572 273a 2027     'transfer': '
-0000ab80: 7472 616e 7366 6572 272c 0a20 2020 2020  transfer',.     
-0000ab90: 2020 2020 2020 2027 6d61 7267 696e 273a         'margin':
-0000aba0: 2027 6d61 7267 696e 272c 0a20 2020 2020   'margin',.     
-0000abb0: 2020 207d 0a20 2020 2020 2020 2072 6574     }.        ret
-0000abc0: 7572 6e20 7365 6c66 2e73 6166 655f 7374  urn self.safe_st
-0000abd0: 7269 6e67 2874 7970 6573 2c20 7479 7065  ring(types, type
-0000abe0: 2c20 7479 7065 290a 0a20 2020 2064 6566  , type)..    def
-0000abf0: 2070 6172 7365 5f6c 6564 6765 725f 656e   parse_ledger_en
-0000ac00: 7472 7928 7365 6c66 2c20 6974 656d 2c20  try(self, item, 
-0000ac10: 6375 7272 656e 6379 3a20 4375 7272 656e  currency: Curren
-0000ac20: 6379 203d 204e 6f6e 6529 3a0a 2020 2020  cy = None):.    
-0000ac30: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
-0000ac40: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
-0000ac50: 2020 2020 2020 2020 274c 5446 4b37 462d          'LTFK7F-
-0000ac60: 4e32 4355 582d 504e 5934 5358 273a 207b  N2CUX-PNY4SX': {
-0000ac70: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000ac80: 2020 2020 2020 2022 7265 6669 6422 3a20         "refid": 
-0000ac90: 2254 534a 5447 542d 4454 3757 4e2d 4750  "TSJTGT-DT7WN-GP
-0000aca0: 5051 4d4a 222c 0a20 2020 2020 2020 2023  PQMJ",.        #
-0000acb0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-0000acc0: 6d65 223a 2020 3135 3230 3130 3233 3230  me":  1520102320
-0000acd0: 2e35 3535 2c0a 2020 2020 2020 2020 2320  .555,.        # 
-0000ace0: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-0000acf0: 6522 3a20 2274 7261 6465 222c 0a20 2020  e": "trade",.   
-0000ad00: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000ad10: 2020 2022 6163 6c61 7373 223a 2022 6375     "aclass": "cu
-0000ad20: 7272 656e 6379 222c 0a20 2020 2020 2020  rrency",.       
-0000ad30: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0000ad40: 6173 7365 7422 3a20 2258 4554 4822 2c0a  asset": "XETH",.
-0000ad50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000ad60: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-0000ad70: 2230 2e31 3038 3731 3934 3630 3022 2c0a  "0.1087194600",.
-0000ad80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000ad90: 2020 2020 2020 2266 6565 223a 2022 302e        "fee": "0.
-0000ada0: 3030 3030 3030 3030 3030 222c 0a20 2020  0000000000",.   
-0000adb0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000adc0: 2020 2022 6261 6c61 6e63 6522 3a20 2230     "balance": "0
-0000add0: 2e32 3835 3538 3531 3030 3022 0a20 2020  .2855851000".   
-0000ade0: 2020 2020 2023 2020 2020 2020 2020 207d       #         }
-0000adf0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000ae00: 2020 2020 2e2e 2e0a 2020 2020 2020 2020      ....        
-0000ae10: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-0000ae20: 230a 2020 2020 2020 2020 6964 203d 2073  #.        id = s
-0000ae30: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0000ae40: 6974 656d 2c20 2769 6427 290a 2020 2020  item, 'id').    
-0000ae50: 2020 2020 6469 7265 6374 696f 6e20 3d20      direction = 
-0000ae60: 4e6f 6e65 0a20 2020 2020 2020 2061 6363  None.        acc
-0000ae70: 6f75 6e74 203d 204e 6f6e 650a 2020 2020  ount = None.    
-0000ae80: 2020 2020 7265 6665 7265 6e63 6549 6420      referenceId 
-0000ae90: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0000aea0: 6e67 2869 7465 6d2c 2027 7265 6669 6427  ng(item, 'refid'
-0000aeb0: 290a 2020 2020 2020 2020 7265 6665 7265  ).        refere
-0000aec0: 6e63 6541 6363 6f75 6e74 203d 204e 6f6e  nceAccount = Non
-0000aed0: 650a 2020 2020 2020 2020 7479 7065 203d  e.        type =
-0000aee0: 2073 656c 662e 7061 7273 655f 6c65 6467   self.parse_ledg
-0000aef0: 6572 5f65 6e74 7279 5f74 7970 6528 7365  er_entry_type(se
-0000af00: 6c66 2e73 6166 655f 7374 7269 6e67 2869  lf.safe_string(i
-0000af10: 7465 6d2c 2027 7479 7065 2729 290a 2020  tem, 'type')).  
-0000af20: 2020 2020 2020 636f 6465 203d 2073 656c        code = sel
-0000af30: 662e 7361 6665 5f63 7572 7265 6e63 795f  f.safe_currency_
-0000af40: 636f 6465 2873 656c 662e 7361 6665 5f73  code(self.safe_s
-0000af50: 7472 696e 6728 6974 656d 2c20 2761 7373  tring(item, 'ass
-0000af60: 6574 2729 2c20 6375 7272 656e 6379 290a  et'), currency).
-0000af70: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
-0000af80: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0000af90: 6728 6974 656d 2c20 2761 6d6f 756e 7427  g(item, 'amount'
-0000afa0: 290a 2020 2020 2020 2020 6966 2050 7265  ).        if Pre
-0000afb0: 6369 7365 2e73 7472 696e 675f 6c74 2861  cise.string_lt(a
-0000afc0: 6d6f 756e 742c 2027 3027 293a 0a20 2020  mount, '0'):.   
-0000afd0: 2020 2020 2020 2020 2064 6972 6563 7469           directi
-0000afe0: 6f6e 203d 2027 6f75 7427 0a20 2020 2020  on = 'out'.     
-0000aff0: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
-0000b000: 5072 6563 6973 652e 7374 7269 6e67 5f61  Precise.string_a
-0000b010: 6273 2861 6d6f 756e 7429 0a20 2020 2020  bs(amount).     
-0000b020: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-0000b030: 2020 2020 2064 6972 6563 7469 6f6e 203d       direction =
-0000b040: 2027 696e 270a 2020 2020 2020 2020 7469   'in'.        ti
-0000b050: 6d65 7374 616d 7020 3d20 7365 6c66 2e73  mestamp = self.s
-0000b060: 6166 655f 7469 6d65 7374 616d 7028 6974  afe_timestamp(it
-0000b070: 656d 2c20 2774 696d 6527 290a 2020 2020  em, 'time').    
-0000b080: 2020 2020 7265 7475 726e 207b 0a20 2020      return {.   
-0000b090: 2020 2020 2020 2020 2027 696e 666f 273a           'info':
-0000b0a0: 2069 7465 6d2c 0a20 2020 2020 2020 2020   item,.         
-0000b0b0: 2020 2027 6964 273a 2069 642c 0a20 2020     'id': id,.   
-0000b0c0: 2020 2020 2020 2020 2027 6469 7265 6374           'direct
-0000b0d0: 696f 6e27 3a20 6469 7265 6374 696f 6e2c  ion': direction,
-0000b0e0: 0a20 2020 2020 2020 2020 2020 2027 6163  .            'ac
-0000b0f0: 636f 756e 7427 3a20 6163 636f 756e 742c  count': account,
-0000b100: 0a20 2020 2020 2020 2020 2020 2027 7265  .            're
-0000b110: 6665 7265 6e63 6549 6427 3a20 7265 6665  ferenceId': refe
-0000b120: 7265 6e63 6549 642c 0a20 2020 2020 2020  renceId,.       
-0000b130: 2020 2020 2027 7265 6665 7265 6e63 6541       'referenceA
-0000b140: 6363 6f75 6e74 273a 2072 6566 6572 656e  ccount': referen
-0000b150: 6365 4163 636f 756e 742c 0a20 2020 2020  ceAccount,.     
-0000b160: 2020 2020 2020 2027 7479 7065 273a 2074         'type': t
-0000b170: 7970 652c 0a20 2020 2020 2020 2020 2020  ype,.           
-0000b180: 2027 6375 7272 656e 6379 273a 2063 6f64   'currency': cod
-0000b190: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0000b1a0: 616d 6f75 6e74 273a 2073 656c 662e 7061  amount': self.pa
-0000b1b0: 7273 655f 6e75 6d62 6572 2861 6d6f 756e  rse_number(amoun
-0000b1c0: 7429 2c0a 2020 2020 2020 2020 2020 2020  t),.            
-0000b1d0: 2762 6566 6f72 6527 3a20 4e6f 6e65 2c0a  'before': None,.
-0000b1e0: 2020 2020 2020 2020 2020 2020 2761 6674              'aft
-0000b1f0: 6572 273a 2073 656c 662e 7361 6665 5f6e  er': self.safe_n
-0000b200: 756d 6265 7228 6974 656d 2c20 2762 616c  umber(item, 'bal
-0000b210: 616e 6365 2729 2c0a 2020 2020 2020 2020  ance'),.        
-0000b220: 2020 2020 2773 7461 7475 7327 3a20 276f      'status': 'o
-0000b230: 6b27 2c0a 2020 2020 2020 2020 2020 2020  k',.            
-0000b240: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
-0000b250: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
-0000b260: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
-0000b270: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
-0000b280: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
-0000b290: 2020 2020 2027 6665 6527 3a20 7b0a 2020       'fee': {.  
-0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2763                'c
-0000b2b0: 6f73 7427 3a20 7365 6c66 2e73 6166 655f  ost': self.safe_
-0000b2c0: 6e75 6d62 6572 2869 7465 6d2c 2027 6665  number(item, 'fe
-0000b2d0: 6527 292c 0a20 2020 2020 2020 2020 2020  e'),.           
-0000b2e0: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
-0000b2f0: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
-0000b300: 2020 207d 2c0a 2020 2020 2020 2020 7d0a     },.        }.
-0000b310: 0a20 2020 2064 6566 2066 6574 6368 5f6c  .    def fetch_l
-0000b320: 6564 6765 7228 7365 6c66 2c20 636f 6465  edger(self, code
-0000b330: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7369  : Str = None, si
-0000b340: 6e63 653a 2049 6e74 203d 204e 6f6e 652c  nce: Int = None,
-0000b350: 206c 696d 6974 3a20 496e 7420 3d20 4e6f   limit: Int = No
-0000b360: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-0000b370: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000b380: 2020 2020 6665 7463 6820 7468 6520 6869      fetch the hi
-0000b390: 7374 6f72 7920 6f66 2063 6861 6e67 6573  story of changes
-0000b3a0: 2c20 6163 7469 6f6e 7320 646f 6e65 2062  , actions done b
-0000b3b0: 7920 7468 6520 7573 6572 206f 7220 6f70  y the user or op
-0000b3c0: 6572 6174 696f 6e73 2074 6861 7420 616c  erations that al
-0000b3d0: 7465 7265 6420 6261 6c61 6e63 6520 6f66  tered balance of
-0000b3e0: 2074 6865 2075 7365 720a 2020 2020 2020   the user.      
-0000b3f0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
-0000b400: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
-0000b410: 7265 7374 2f23 7461 672f 4163 636f 756e  rest/#tag/Accoun
-0000b420: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
-0000b430: 2f67 6574 4c65 6467 6572 730a 2020 2020  /getLedgers.    
-0000b440: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-0000b450: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
-0000b460: 7265 6e63 7920 636f 6465 2c20 6465 6661  rency code, defa
-0000b470: 756c 7420 6973 204e 6f6e 650a 2020 2020  ult is None.    
-0000b480: 2020 2020 3a70 6172 616d 2069 6e74 205b      :param int [
-0000b490: 7369 6e63 655d 3a20 7469 6d65 7374 616d  since]: timestam
-0000b4a0: 7020 696e 206d 7320 6f66 2074 6865 2065  p in ms of the e
-0000b4b0: 6172 6c69 6573 7420 6c65 6467 6572 2065  arliest ledger e
-0000b4c0: 6e74 7279 2c20 6465 6661 756c 7420 6973  ntry, default is
-0000b4d0: 204e 6f6e 650a 2020 2020 2020 2020 3a70   None.        :p
-0000b4e0: 6172 616d 2069 6e74 205b 6c69 6d69 745d  aram int [limit]
-0000b4f0: 3a20 6d61 7820 6e75 6d62 6572 206f 6620  : max number of 
-0000b500: 6c65 6467 6572 2065 6e74 7279 7320 746f  ledger entrys to
-0000b510: 2072 6574 7572 6e2c 2064 6566 6175 6c74   return, default
-0000b520: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
-0000b530: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-0000b540: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-0000b550: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-0000b560: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-0000b570: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-0000b580: 2020 2020 2020 3a70 6172 616d 2069 6e74        :param int
-0000b590: 205b 7061 7261 6d73 2e75 6e74 696c 5d3a   [params.until]:
-0000b5a0: 2074 696d 6573 7461 6d70 2069 6e20 6d73   timestamp in ms
-0000b5b0: 206f 6620 7468 6520 6c61 7465 7374 206c   of the latest l
-0000b5c0: 6564 6765 7220 656e 7472 790a 2020 2020  edger entry.    
-0000b5d0: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
-0000b5e0: 743a 2061 2060 6c65 6467 6572 2073 7472  t: a `ledger str
-0000b5f0: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
-0000b600: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0000b610: 3f69 643d 6c65 6467 6572 2d73 7472 7563  ?id=ledger-struc
-0000b620: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
-0000b630: 2222 0a20 2020 2020 2020 2023 2068 7474  "".        # htt
-0000b640: 7073 3a2f 2f77 7777 2e6b 7261 6b65 6e2e  ps://www.kraken.
-0000b650: 636f 6d2f 6665 6174 7572 6573 2f61 7069  com/features/api
-0000b660: 2367 6574 2d6c 6564 6765 7273 2d69 6e66  #get-ledgers-inf
-0000b670: 6f0a 2020 2020 2020 2020 7365 6c66 2e6c  o.        self.l
-0000b680: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
-0000b690: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-0000b6a0: 7b7d 0a20 2020 2020 2020 2063 7572 7265  {}.        curre
-0000b6b0: 6e63 7920 3d20 4e6f 6e65 0a20 2020 2020  ncy = None.     
-0000b6c0: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
-0000b6d0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-0000b6e0: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-0000b6f0: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-0000b700: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
-0000b710: 6571 7565 7374 5b27 6173 7365 7427 5d20  equest['asset'] 
-0000b720: 3d20 6375 7272 656e 6379 5b27 6964 275d  = currency['id']
-0000b730: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
-0000b740: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000b750: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-0000b760: 7374 5b27 7374 6172 7427 5d20 3d20 7365  st['start'] = se
-0000b770: 6c66 2e70 6172 7365 5f74 6f5f 696e 7428  lf.parse_to_int(
-0000b780: 7369 6e63 6520 2f20 3130 3030 290a 2020  since / 1000).  
-0000b790: 2020 2020 2020 7265 7175 6573 742c 2070        request, p
-0000b7a0: 6172 616d 7320 3d20 7365 6c66 2e68 616e  arams = self.han
-0000b7b0: 646c 655f 756e 7469 6c5f 6f70 7469 6f6e  dle_until_option
-0000b7c0: 2827 656e 6427 2c20 7265 7175 6573 742c  ('end', request,
-0000b7d0: 2070 6172 616d 7329 0a20 2020 2020 2020   params).       
-0000b7e0: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-0000b7f0: 2e70 7269 7661 7465 506f 7374 4c65 6467  .privatePostLedg
-0000b800: 6572 7328 7365 6c66 2e65 7874 656e 6428  ers(self.extend(
-0000b810: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-0000b820: 290a 2020 2020 2020 2020 2320 7b20 6572  ).        # { er
-0000b830: 726f 723a 205b 5d2c 0a20 2020 2020 2020  ror: [],.       
-0000b840: 2023 2020 2022 7265 7375 6c74 223a 207b   #   "result": {
-0000b850: 6c65 6467 6572 3a20 7b27 4c50 5541 4942  ledger: {'LPUAIB
-0000b860: 2d54 5337 3734 2d55 4b48 5037 5827 3a20  -TS774-UKHP7X': 
-0000b870: 7b20 2072 6566 6964 3a20 2241 3242 3448  {  refid: "A2B4H
-0000b880: 4256 2d4c 344d 4449 452d 4a55 344e 334e  BV-L4MDIE-JU4N3N
-0000b890: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000b8a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b8c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000b8d0: 7469 6d65 223a 2020 3135 3230 3130 3334  time":  15201034
-0000b8e0: 3838 2e33 3134 2c0a 2020 2020 2020 2020  88.314,.        
-0000b8f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000b900: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000077a0: 7d2c 0a20 2020 2020 2020 2020 2020 2020  },.             
+000077b0: 2020 2027 6e65 7477 6f72 6b73 273a 207b     'networks': {
+000077c0: 7d2c 0a20 2020 2020 2020 2020 2020 207d  },.            }
+000077d0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000077e0: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
+000077f0: 6665 7463 685f 7472 6164 696e 675f 6665  fetch_trading_fe
+00007800: 6528 7365 6c66 2c20 7379 6d62 6f6c 3a20  e(self, symbol: 
+00007810: 7374 722c 2070 6172 616d 733d 7b7d 2920  str, params={}) 
+00007820: 2d3e 2054 7261 6469 6e67 4665 6549 6e74  -> TradingFeeInt
+00007830: 6572 6661 6365 3a0a 2020 2020 2020 2020  erface:.        
+00007840: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+00007850: 6820 7468 6520 7472 6164 696e 6720 6665  h the trading fe
+00007860: 6573 2066 6f72 2061 206d 6172 6b65 740a  es for a market.
+00007870: 2020 2020 2020 2020 3a73 6565 3a20 6874          :see: ht
+00007880: 7470 733a 2f2f 646f 6373 2e6b 7261 6b65  tps://docs.krake
+00007890: 6e2e 636f 6d2f 7265 7374 2f23 7461 672f  n.com/rest/#tag/
+000078a0: 4163 636f 756e 742d 4461 7461 2f6f 7065  Account-Data/ope
+000078b0: 7261 7469 6f6e 2f67 6574 5472 6164 6556  ration/getTradeV
+000078c0: 6f6c 756d 650a 2020 2020 2020 2020 3a70  olume.        :p
+000078d0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
+000078e0: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
+000078f0: 7379 6d62 6f6c 0a20 2020 2020 2020 203a  symbol.        :
+00007900: 7061 7261 6d20 6469 6374 205b 7061 7261  param dict [para
+00007910: 6d73 5d3a 2065 7874 7261 2070 6172 616d  ms]: extra param
+00007920: 6574 6572 7320 7370 6563 6966 6963 2074  eters specific t
+00007930: 6f20 7468 6520 6578 6368 616e 6765 2041  o the exchange A
+00007940: 5049 2065 6e64 706f 696e 740a 2020 2020  PI endpoint.    
+00007950: 2020 2020 3a72 6574 7572 6e73 2064 6963      :returns dic
+00007960: 743a 2061 2060 6665 6520 7374 7275 6374  t: a `fee struct
+00007970: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
+00007980: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+00007990: 3d66 6565 2d73 7472 7563 7475 7265 3e60  =fee-structure>`
+000079a0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+000079b0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+000079c0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+000079d0: 206d 6172 6b65 7420 3d20 7365 6c66 2e6d   market = self.m
+000079e0: 6172 6b65 7428 7379 6d62 6f6c 290a 2020  arket(symbol).  
+000079f0: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
+00007a00: 7b0a 2020 2020 2020 2020 2020 2020 2770  {.            'p
+00007a10: 6169 7227 3a20 6d61 726b 6574 5b27 6964  air': market['id
+00007a20: 275d 2c0a 2020 2020 2020 2020 2020 2020  '],.            
+00007a30: 2766 6565 2d69 6e66 6f27 3a20 5472 7565  'fee-info': True
+00007a40: 2c0a 2020 2020 2020 2020 7d0a 2020 2020  ,.        }.    
+00007a50: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+00007a60: 656c 662e 7072 6976 6174 6550 6f73 7454  elf.privatePostT
+00007a70: 7261 6465 566f 6c75 6d65 2873 656c 662e  radeVolume(self.
+00007a80: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+00007a90: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+00007aa0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
+00007ab0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00007ac0: 2020 2020 2265 7272 6f72 223a 205b 5d2c      "error": [],
+00007ad0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00007ae0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
+00007af0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007b00: 2022 6375 7272 656e 6379 223a 2027 5a55   "currency": 'ZU
+00007b10: 5344 272c 0a20 2020 2020 2020 2023 2020  SD',.        #  
+00007b20: 2020 2020 2020 2020 2276 6f6c 756d 6522          "volume"
+00007b30: 3a20 2730 2e30 3030 3027 2c0a 2020 2020  : '0.0000',.    
+00007b40: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
+00007b50: 6665 6573 223a 207b 0a20 2020 2020 2020  fees": {.       
+00007b60: 2023 2020 2020 2020 2020 2020 2020 2258   #            "X
+00007b70: 5842 545a 5553 4422 3a20 7b0a 2020 2020  XBTZUSD": {.    
+00007b80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00007b90: 2020 2022 6665 6522 3a20 2730 2e32 3630     "fee": '0.260
+00007ba0: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+00007bb0: 2020 2020 2020 2020 2020 2022 6d69 6e66             "minf
+00007bc0: 6565 223a 2027 302e 3130 3030 272c 0a20  ee": '0.1000',. 
+00007bd0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00007be0: 2020 2020 2020 226d 6178 6665 6522 3a20        "maxfee": 
+00007bf0: 2730 2e32 3630 3027 2c0a 2020 2020 2020  '0.2600',.      
+00007c00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00007c10: 2022 6e65 7874 6665 6522 3a20 2730 2e32   "nextfee": '0.2
+00007c20: 3430 3027 2c0a 2020 2020 2020 2020 2320  400',.        # 
+00007c30: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+00007c40: 6572 766f 6c75 6d65 223a 2027 302e 3030  ervolume": '0.00
+00007c50: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
+00007c60: 2020 2020 2020 2020 2020 2020 226e 6578              "nex
+00007c70: 7476 6f6c 756d 6522 3a20 2735 3030 3030  tvolume": '50000
+00007c80: 2e30 3030 3027 0a20 2020 2020 2020 2023  .0000'.        #
+00007c90: 2020 2020 2020 2020 2020 2020 7d0a 2020              }.  
+00007ca0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00007cb0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
+00007cc0: 2020 2020 2020 2022 6665 6573 5f6d 616b         "fees_mak
+00007cd0: 6572 223a 207b 0a20 2020 2020 2020 2023  er": {.        #
+00007ce0: 2020 2020 2020 2020 2020 2020 2258 5842              "XXB
+00007cf0: 545a 5553 4422 3a20 7b0a 2020 2020 2020  TZUSD": {.      
+00007d00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00007d10: 2022 6665 6522 3a20 2730 2e31 3630 3027   "fee": '0.1600'
+00007d20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00007d30: 2020 2020 2020 2020 2022 6d69 6e66 6565           "minfee
+00007d40: 223a 2027 302e 3030 3030 272c 0a20 2020  ": '0.0000',.   
+00007d50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00007d60: 2020 2020 226d 6178 6665 6522 3a20 2730      "maxfee": '0
+00007d70: 2e31 3630 3027 2c0a 2020 2020 2020 2020  .1600',.        
+00007d80: 2320 2020 2020 2020 2020 2020 2020 2022  #              "
+00007d90: 6e65 7874 6665 6522 3a20 2730 2e31 3430  nextfee": '0.140
+00007da0: 3027 2c0a 2020 2020 2020 2020 2320 2020  0',.        #   
+00007db0: 2020 2020 2020 2020 2020 2022 7469 6572             "tier
+00007dc0: 766f 6c75 6d65 223a 2027 302e 3030 3030  volume": '0.0000
+00007dd0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+00007de0: 2020 2020 2020 2020 2020 226e 6578 7476            "nextv
+00007df0: 6f6c 756d 6522 3a20 2735 3030 3030 2e30  olume": '50000.0
+00007e00: 3030 3027 0a20 2020 2020 2020 2023 2020  000'.        #  
+00007e10: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
+00007e20: 2020 2020 2320 2020 2020 2020 2020 207d      #          }
+00007e30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00007e40: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
+00007e50: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00007e60: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00007e70: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00007e80: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00007e90: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00007ea0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+00007eb0: 5f74 7261 6469 6e67 5f66 6565 2872 6573  _trading_fee(res
+00007ec0: 756c 742c 206d 6172 6b65 7429 0a0a 2020  ult, market)..  
+00007ed0: 2020 6465 6620 7061 7273 655f 7472 6164    def parse_trad
+00007ee0: 696e 675f 6665 6528 7365 6c66 2c20 7265  ing_fee(self, re
+00007ef0: 7370 6f6e 7365 2c20 6d61 726b 6574 293a  sponse, market):
+00007f00: 0a20 2020 2020 2020 206d 616b 6572 4665  .        makerFe
+00007f10: 6573 203d 2073 656c 662e 7361 6665 5f76  es = self.safe_v
+00007f20: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00007f30: 6665 6573 5f6d 616b 6572 272c 207b 7d29  fees_maker', {})
+00007f40: 0a20 2020 2020 2020 2074 616b 6572 4665  .        takerFe
+00007f50: 6573 203d 2073 656c 662e 7361 6665 5f76  es = self.safe_v
+00007f60: 616c 7565 2872 6573 706f 6e73 652c 2027  alue(response, '
+00007f70: 6665 6573 272c 207b 7d29 0a20 2020 2020  fees', {}).     
+00007f80: 2020 2073 796d 626f 6c4d 616b 6572 4665     symbolMakerFe
+00007f90: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
+00007fa0: 6c75 6528 6d61 6b65 7246 6565 732c 206d  lue(makerFees, m
+00007fb0: 6172 6b65 745b 2769 6427 5d2c 207b 7d29  arket['id'], {})
+00007fc0: 0a20 2020 2020 2020 2073 796d 626f 6c54  .        symbolT
+00007fd0: 616b 6572 4665 6520 3d20 7365 6c66 2e73  akerFee = self.s
+00007fe0: 6166 655f 7661 6c75 6528 7461 6b65 7246  afe_value(takerF
+00007ff0: 6565 732c 206d 6172 6b65 745b 2769 6427  ees, market['id'
+00008000: 5d2c 207b 7d29 0a20 2020 2020 2020 2072  ], {}).        r
+00008010: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
+00008020: 2020 2020 2769 6e66 6f27 3a20 7265 7370      'info': resp
+00008030: 6f6e 7365 2c0a 2020 2020 2020 2020 2020  onse,.          
+00008040: 2020 2773 796d 626f 6c27 3a20 6d61 726b    'symbol': mark
+00008050: 6574 5b27 7379 6d62 6f6c 275d 2c0a 2020  et['symbol'],.  
+00008060: 2020 2020 2020 2020 2020 276d 616b 6572            'maker
+00008070: 273a 2073 656c 662e 7361 6665 5f6e 756d  ': self.safe_num
+00008080: 6265 7228 7379 6d62 6f6c 4d61 6b65 7246  ber(symbolMakerF
+00008090: 6565 2c20 2766 6565 2729 2c0a 2020 2020  ee, 'fee'),.    
+000080a0: 2020 2020 2020 2020 2774 616b 6572 273a          'taker':
+000080b0: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+000080c0: 7228 7379 6d62 6f6c 5461 6b65 7246 6565  r(symbolTakerFee
+000080d0: 2c20 2766 6565 2729 2c0a 2020 2020 2020  , 'fee'),.      
+000080e0: 2020 2020 2020 2770 6572 6365 6e74 6167        'percentag
+000080f0: 6527 3a20 5472 7565 2c0a 2020 2020 2020  e': True,.      
+00008100: 2020 2020 2020 2774 6965 7242 6173 6564        'tierBased
+00008110: 273a 2054 7275 652c 0a20 2020 2020 2020  ': True,.       
+00008120: 207d 0a0a 2020 2020 6465 6620 7061 7273   }..    def pars
+00008130: 655f 6269 645f 6173 6b28 7365 6c66 2c20  e_bid_ask(self, 
+00008140: 6269 6461 736b 2c20 7072 6963 654b 6579  bidask, priceKey
+00008150: 3a20 496e 6465 7854 7970 6520 3d20 302c  : IndexType = 0,
+00008160: 2061 6d6f 756e 744b 6579 3a20 496e 6465   amountKey: Inde
+00008170: 7854 7970 6520 3d20 312c 2063 6f75 6e74  xType = 1, count
+00008180: 4f72 4964 4b65 793a 2049 6e64 6578 5479  OrIdKey: IndexTy
+00008190: 7065 203d 2032 293a 0a20 2020 2020 2020  pe = 2):.       
+000081a0: 2070 7269 6365 203d 2073 656c 662e 7361   price = self.sa
+000081b0: 6665 5f6e 756d 6265 7228 6269 6461 736b  fe_number(bidask
+000081c0: 2c20 7072 6963 654b 6579 290a 2020 2020  , priceKey).    
+000081d0: 2020 2020 616d 6f75 6e74 203d 2073 656c      amount = sel
+000081e0: 662e 7361 6665 5f6e 756d 6265 7228 6269  f.safe_number(bi
+000081f0: 6461 736b 2c20 616d 6f75 6e74 4b65 7929  dask, amountKey)
+00008200: 0a20 2020 2020 2020 2074 696d 6573 7461  .        timesta
+00008210: 6d70 203d 2073 656c 662e 7361 6665 5f69  mp = self.safe_i
+00008220: 6e74 6567 6572 2862 6964 6173 6b2c 2032  nteger(bidask, 2
+00008230: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00008240: 205b 7072 6963 652c 2061 6d6f 756e 742c   [price, amount,
+00008250: 2074 696d 6573 7461 6d70 5d0a 0a20 2020   timestamp]..   
+00008260: 2064 6566 2066 6574 6368 5f6f 7264 6572   def fetch_order
+00008270: 5f62 6f6f 6b28 7365 6c66 2c20 7379 6d62  _book(self, symb
+00008280: 6f6c 3a20 7374 722c 206c 696d 6974 3a20  ol: str, limit: 
+00008290: 496e 7420 3d20 4e6f 6e65 2c20 7061 7261  Int = None, para
+000082a0: 6d73 3d7b 7d29 202d 3e20 4f72 6465 7242  ms={}) -> OrderB
+000082b0: 6f6f 6b3a 0a20 2020 2020 2020 2022 2222  ook:.        """
+000082c0: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+000082d0: 2069 6e66 6f72 6d61 7469 6f6e 206f 6e20   information on 
+000082e0: 6f70 656e 206f 7264 6572 7320 7769 7468  open orders with
+000082f0: 2062 6964 2862 7579 2920 616e 6420 6173   bid(buy) and as
+00008300: 6b28 7365 6c6c 2920 7072 6963 6573 2c20  k(sell) prices, 
+00008310: 766f 6c75 6d65 7320 616e 6420 6f74 6865  volumes and othe
+00008320: 7220 6461 7461 0a20 2020 2020 2020 203a  r data.        :
+00008330: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+00008340: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+00008350: 742f 2374 6167 2f53 706f 742d 4d61 726b  t/#tag/Spot-Mark
+00008360: 6574 2d44 6174 612f 6f70 6572 6174 696f  et-Data/operatio
+00008370: 6e2f 6765 744f 7264 6572 426f 6f6b 0a20  n/getOrderBook. 
+00008380: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+00008390: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
+000083a0: 6420 7379 6d62 6f6c 206f 6620 7468 6520  d symbol of the 
+000083b0: 6d61 726b 6574 2074 6f20 6665 7463 6820  market to fetch 
+000083c0: 7468 6520 6f72 6465 7220 626f 6f6b 2066  the order book f
+000083d0: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
+000083e0: 6d20 696e 7420 5b6c 696d 6974 5d3a 2074  m int [limit]: t
+000083f0: 6865 206d 6178 696d 756d 2061 6d6f 756e  he maximum amoun
+00008400: 7420 6f66 206f 7264 6572 2062 6f6f 6b20  t of order book 
+00008410: 656e 7472 6965 7320 746f 2072 6574 7572  entries to retur
+00008420: 6e0a 2020 2020 2020 2020 3a70 6172 616d  n.        :param
+00008430: 2064 6963 7420 5b70 6172 616d 735d 3a20   dict [params]: 
+00008440: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
+00008450: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
+00008460: 2065 7863 6861 6e67 6520 4150 4920 656e   exchange API en
+00008470: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
+00008480: 7265 7475 726e 7320 6469 6374 3a20 4120  returns dict: A 
+00008490: 6469 6374 696f 6e61 7279 206f 6620 606f  dictionary of `o
+000084a0: 7264 6572 2062 6f6f 6b20 7374 7275 6374  rder book struct
+000084b0: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+000084c0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+000084d0: 643d 6f72 6465 722d 626f 6f6b 2d73 7472  d=order-book-str
+000084e0: 7563 7475 7265 3e60 2069 6e64 6578 6564  ucture>` indexed
+000084f0: 2062 7920 6d61 726b 6574 2073 796d 626f   by market symbo
+00008500: 6c73 0a20 2020 2020 2020 2022 2222 0a20  ls.        """. 
+00008510: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00008520: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00008530: 2020 206d 6172 6b65 7420 3d20 7365 6c66     market = self
+00008540: 2e6d 6172 6b65 7428 7379 6d62 6f6c 290a  .market(symbol).
+00008550: 2020 2020 2020 2020 6966 206d 6172 6b65          if marke
+00008560: 745b 2764 6172 6b70 6f6f 6c27 5d3a 0a20  t['darkpool']:. 
+00008570: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00008580: 2045 7863 6861 6e67 6545 7272 6f72 2873   ExchangeError(s
+00008590: 656c 662e 6964 202b 2027 2066 6574 6368  elf.id + ' fetch
+000085a0: 4f72 6465 7242 6f6f 6b28 2920 646f 6573  OrderBook() does
+000085b0: 206e 6f74 2070 726f 7669 6465 2061 6e20   not provide an 
+000085c0: 6f72 6465 7220 626f 6f6b 2066 6f72 2064  order book for d
+000085d0: 6172 6b70 6f6f 6c20 7379 6d62 6f6c 2027  arkpool symbol '
+000085e0: 202b 2073 796d 626f 6c29 0a20 2020 2020   + symbol).     
+000085f0: 2020 2072 6571 7565 7374 203d 207b 0a20     request = {. 
+00008600: 2020 2020 2020 2020 2020 2027 7061 6972             'pair
+00008610: 273a 206d 6172 6b65 745b 2769 6427 5d2c  ': market['id'],
+00008620: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
+00008630: 2020 2069 6620 6c69 6d69 7420 6973 206e     if limit is n
+00008640: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00008650: 2020 2020 2072 6571 7565 7374 5b27 636f       request['co
+00008660: 756e 7427 5d20 3d20 6c69 6d69 7420 2023  unt'] = limit  #
+00008670: 2031 3030 0a20 2020 2020 2020 2072 6573   100.        res
+00008680: 706f 6e73 6520 3d20 7365 6c66 2e70 7562  ponse = self.pub
+00008690: 6c69 6347 6574 4465 7074 6828 7365 6c66  licGetDepth(self
+000086a0: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+000086b0: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+000086c0: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+000086d0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+000086e0: 2020 2020 2020 2265 7272 6f72 223a 5b5d        "error":[]
+000086f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00008700: 2020 2020 2272 6573 756c 7422 3a7b 0a20      "result":{. 
+00008710: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00008720: 2020 2020 2022 5845 5448 5858 4254 223a       "XETHXXBT":
+00008730: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00008740: 2020 2020 2020 2020 2020 2020 2261 736b              "ask
+00008750: 7322 3a5b 0a20 2020 2020 2020 2023 2020  s":[.        #  
+00008760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008770: 2020 205b 2230 2e30 3233 3438 3022 2c22     ["0.023480","
+00008780: 342e 3030 3022 2c31 3538 3633 3231 3330  4.000",158632130
+00008790: 375d 2c0a 2020 2020 2020 2020 2320 2020  7],.        #   
+000087a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087b0: 2020 5b22 302e 3032 3334 3930 222c 2235    ["0.023490","5
+000087c0: 302e 3039 3522 2c31 3538 3633 3231 3330  0.095",158632130
+000087d0: 365d 2c0a 2020 2020 2020 2020 2320 2020  6],.        #   
+000087e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000087f0: 2020 5b22 302e 3032 3335 3030 222c 2232    ["0.023500","2
+00008800: 382e 3533 3522 2c31 3538 3633 3231 3330  8.535",158632130
+00008810: 325d 2c0a 2020 2020 2020 2020 2320 2020  2],.        #   
+00008820: 2020 2020 2020 2020 2020 2020 2020 5d2c                ],
+00008830: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00008840: 2020 2020 2020 2020 2020 2022 6269 6473             "bids
+00008850: 223a 5b0a 2020 2020 2020 2020 2320 2020  ":[.        #   
+00008860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00008870: 2020 5b22 302e 3032 3334 3730 222c 2235    ["0.023470","5
+00008880: 392e 3538 3022 2c31 3538 3633 3231 3330  9.580",158632130
+00008890: 375d 2c0a 2020 2020 2020 2020 2320 2020  7],.        #   
+000088a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088b0: 2020 5b22 302e 3032 3334 3630 222c 2232    ["0.023460","2
+000088c0: 302e 3030 3022 2c31 3538 3633 3231 3330  0.000",158632130
+000088d0: 315d 2c0a 2020 2020 2020 2020 2320 2020  1],.        #   
+000088e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000088f0: 2020 5b22 302e 3032 3334 3430 222c 2236    ["0.023440","6
+00008900: 372e 3833 3222 2c31 3538 3633 3231 3330  7.832",158632130
+00008910: 365d 2c0a 2020 2020 2020 2020 2320 2020  6],.        #   
+00008920: 2020 2020 2020 2020 2020 2020 2020 5d0a                ].
+00008930: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00008940: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00008950: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
+00008960: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00008970: 2020 2020 230a 2020 2020 2020 2020 7265      #.        re
+00008980: 7375 6c74 203d 2073 656c 662e 7361 6665  sult = self.safe
+00008990: 5f76 616c 7565 2872 6573 706f 6e73 652c  _value(response,
+000089a0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+000089b0: 2020 2020 2020 206f 7264 6572 626f 6f6b         orderbook
+000089c0: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+000089d0: 7565 2872 6573 756c 742c 206d 6172 6b65  ue(result, marke
+000089e0: 745b 2769 6427 5d29 0a20 2020 2020 2020  t['id']).       
+000089f0: 2023 2073 6f6d 6574 696d 6573 206b 7261   # sometimes kra
+00008a00: 6b65 6e20 7265 7475 726e 7320 7773 6e61  ken returns wsna
+00008a10: 6d65 2069 6e73 7465 6164 206f 6620 6d61  me instead of ma
+00008a20: 726b 6574 2069 640a 2020 2020 2020 2020  rket id.        
+00008a30: 2320 6874 7470 733a 2f2f 6769 7468 7562  # https://github
+00008a40: 2e63 6f6d 2f63 6378 742f 6363 7874 2f69  .com/ccxt/ccxt/i
+00008a50: 7373 7565 732f 3836 3632 0a20 2020 2020  ssues/8662.     
+00008a60: 2020 206d 6172 6b65 7449 6e66 6f20 3d20     marketInfo = 
+00008a70: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
+00008a80: 6d61 726b 6574 2c20 2769 6e66 6f27 2c20  market, 'info', 
+00008a90: 7b7d 290a 2020 2020 2020 2020 7773 4e61  {}).        wsNa
+00008aa0: 6d65 203d 2073 656c 662e 7361 6665 5f76  me = self.safe_v
+00008ab0: 616c 7565 286d 6172 6b65 7449 6e66 6f2c  alue(marketInfo,
+00008ac0: 2027 7773 6e61 6d65 2729 0a20 2020 2020   'wsname').     
+00008ad0: 2020 2069 6620 7773 4e61 6d65 2069 7320     if wsName is 
+00008ae0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+00008af0: 2020 2020 2020 6f72 6465 7262 6f6f 6b20        orderbook 
+00008b00: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00008b10: 6528 7265 7375 6c74 2c20 7773 4e61 6d65  e(result, wsName
+00008b20: 2c20 6f72 6465 7262 6f6f 6b29 0a20 2020  , orderbook).   
+00008b30: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00008b40: 2e70 6172 7365 5f6f 7264 6572 5f62 6f6f  .parse_order_boo
+00008b50: 6b28 6f72 6465 7262 6f6f 6b2c 2073 796d  k(orderbook, sym
+00008b60: 626f 6c29 0a0a 2020 2020 6465 6620 7061  bol)..    def pa
+00008b70: 7273 655f 7469 636b 6572 2873 656c 662c  rse_ticker(self,
+00008b80: 2074 6963 6b65 722c 206d 6172 6b65 743a   ticker, market:
+00008b90: 204d 6172 6b65 7420 3d20 4e6f 6e65 2920   Market = None) 
+00008ba0: 2d3e 2054 6963 6b65 723a 0a20 2020 2020  -> Ticker:.     
+00008bb0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00008bc0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00008bd0: 2020 2020 2020 2022 6122 3a5b 2232 3433         "a":["243
+00008be0: 322e 3737 3030 3022 2c22 3122 2c22 312e  2.77000","1","1.
+00008bf0: 3030 3022 5d2c 0a20 2020 2020 2020 2023  000"],.        #
+00008c00: 2020 2020 2020 2020 2022 6222 3a5b 2232           "b":["2
+00008c10: 3433 312e 3337 3030 3022 2c22 3222 2c22  431.37000","2","
+00008c20: 322e 3030 3022 5d2c 0a20 2020 2020 2020  2.000"],.       
+00008c30: 2023 2020 2020 2020 2020 2022 6322 3a5b   #         "c":[
+00008c40: 2232 3433 302e 3538 3030 3022 2c22 302e  "2430.58000","0.
+00008c50: 3034 3430 3839 3130 225d 2c0a 2020 2020  04408910"],.    
+00008c60: 2020 2020 2320 2020 2020 2020 2020 2276      #         "v
+00008c70: 223a 5b22 3431 3437 2e39 3434 3734 3930  ":["4147.9447490
+00008c80: 3122 2c22 3838 3936 2e39 3630 3836 3330  1","8896.9608630
+00008c90: 3422 5d2c 0a20 2020 2020 2020 2023 2020  4"],.        #  
+00008ca0: 2020 2020 2020 2022 7022 3a5b 2232 3435         "p":["245
+00008cb0: 362e 3232 3233 3922 2c22 3235 3638 2e36  6.22239","2568.6
+00008cc0: 3330 3332 225d 2c0a 2020 2020 2020 2020  3032"],.        
+00008cd0: 2320 2020 2020 2020 2020 2274 223a 5b33  #         "t":[3
+00008ce0: 3930 372c 3130 3035 365d 2c0a 2020 2020  907,10056],.    
+00008cf0: 2020 2020 2320 2020 2020 2020 2020 226c      #         "l
+00008d00: 223a 5b22 3233 3032 2e31 3830 3030 222c  ":["2302.18000",
+00008d10: 2232 3330 322e 3138 3030 3022 5d2c 0a20  "2302.18000"],. 
+00008d20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00008d30: 2022 6822 3a5b 2232 3632 312e 3134 3030   "h":["2621.1400
+00008d40: 3022 2c22 3238 3630 2e30 3130 3030 225d  0","2860.01000"]
+00008d50: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00008d60: 2020 2020 226f 223a 2232 3537 312e 3536      "o":"2571.56
+00008d70: 3030 3022 0a20 2020 2020 2020 2023 2020  000".        #  
+00008d80: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00008d90: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+00008da0: 7365 6c66 2e73 6166 655f 7379 6d62 6f6c  self.safe_symbol
+00008db0: 284e 6f6e 652c 206d 6172 6b65 7429 0a20  (None, market). 
+00008dc0: 2020 2020 2020 2076 203d 2073 656c 662e         v = self.
+00008dd0: 7361 6665 5f76 616c 7565 2874 6963 6b65  safe_value(ticke
+00008de0: 722c 2027 7627 2c20 5b5d 290a 2020 2020  r, 'v', []).    
+00008df0: 2020 2020 6261 7365 566f 6c75 6d65 203d      baseVolume =
+00008e00: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00008e10: 6728 762c 2031 290a 2020 2020 2020 2020  g(v, 1).        
+00008e20: 7020 3d20 7365 6c66 2e73 6166 655f 7661  p = self.safe_va
+00008e30: 6c75 6528 7469 636b 6572 2c20 2770 272c  lue(ticker, 'p',
+00008e40: 205b 5d29 0a20 2020 2020 2020 2076 7761   []).        vwa
+00008e50: 7020 3d20 7365 6c66 2e73 6166 655f 7374  p = self.safe_st
+00008e60: 7269 6e67 2870 2c20 3129 0a20 2020 2020  ring(p, 1).     
+00008e70: 2020 2071 756f 7465 566f 6c75 6d65 203d     quoteVolume =
+00008e80: 2050 7265 6369 7365 2e73 7472 696e 675f   Precise.string_
+00008e90: 6d75 6c28 6261 7365 566f 6c75 6d65 2c20  mul(baseVolume, 
+00008ea0: 7677 6170 290a 2020 2020 2020 2020 6320  vwap).        c 
+00008eb0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00008ec0: 6528 7469 636b 6572 2c20 2763 272c 205b  e(ticker, 'c', [
+00008ed0: 5d29 0a20 2020 2020 2020 206c 6173 7420  ]).        last 
+00008ee0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00008ef0: 6e67 2863 2c20 3029 0a20 2020 2020 2020  ng(c, 0).       
+00008f00: 2068 6967 6820 3d20 7365 6c66 2e73 6166   high = self.saf
+00008f10: 655f 7661 6c75 6528 7469 636b 6572 2c20  e_value(ticker, 
+00008f20: 2768 272c 205b 5d29 0a20 2020 2020 2020  'h', []).       
+00008f30: 206c 6f77 203d 2073 656c 662e 7361 6665   low = self.safe
+00008f40: 5f76 616c 7565 2874 6963 6b65 722c 2027  _value(ticker, '
+00008f50: 6c27 2c20 5b5d 290a 2020 2020 2020 2020  l', []).        
+00008f60: 6269 6420 3d20 7365 6c66 2e73 6166 655f  bid = self.safe_
+00008f70: 7661 6c75 6528 7469 636b 6572 2c20 2762  value(ticker, 'b
+00008f80: 272c 205b 5d29 0a20 2020 2020 2020 2061  ', []).        a
+00008f90: 736b 203d 2073 656c 662e 7361 6665 5f76  sk = self.safe_v
+00008fa0: 616c 7565 2874 6963 6b65 722c 2027 6127  alue(ticker, 'a'
+00008fb0: 2c20 5b5d 290a 2020 2020 2020 2020 7265  , []).        re
+00008fc0: 7475 726e 2073 656c 662e 7361 6665 5f74  turn self.safe_t
+00008fd0: 6963 6b65 7228 7b0a 2020 2020 2020 2020  icker({.        
+00008fe0: 2020 2020 2773 796d 626f 6c27 3a20 7379      'symbol': sy
+00008ff0: 6d62 6f6c 2c0a 2020 2020 2020 2020 2020  mbol,.          
+00009000: 2020 2774 696d 6573 7461 6d70 273a 204e    'timestamp': N
+00009010: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00009020: 2027 6461 7465 7469 6d65 273a 204e 6f6e   'datetime': Non
+00009030: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+00009040: 6869 6768 273a 2073 656c 662e 7361 6665  high': self.safe
+00009050: 5f73 7472 696e 6728 6869 6768 2c20 3129  _string(high, 1)
+00009060: 2c0a 2020 2020 2020 2020 2020 2020 276c  ,.            'l
+00009070: 6f77 273a 2073 656c 662e 7361 6665 5f73  ow': self.safe_s
+00009080: 7472 696e 6728 6c6f 772c 2031 292c 0a20  tring(low, 1),. 
+00009090: 2020 2020 2020 2020 2020 2027 6269 6427             'bid'
+000090a0: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
+000090b0: 6e67 2862 6964 2c20 3029 2c0a 2020 2020  ng(bid, 0),.    
+000090c0: 2020 2020 2020 2020 2762 6964 566f 6c75          'bidVolu
+000090d0: 6d65 273a 204e 6f6e 652c 0a20 2020 2020  me': None,.     
+000090e0: 2020 2020 2020 2027 6173 6b27 3a20 7365         'ask': se
+000090f0: 6c66 2e73 6166 655f 7374 7269 6e67 2861  lf.safe_string(a
+00009100: 736b 2c20 3029 2c0a 2020 2020 2020 2020  sk, 0),.        
+00009110: 2020 2020 2761 736b 566f 6c75 6d65 273a      'askVolume':
+00009120: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+00009130: 2020 2027 7677 6170 273a 2076 7761 702c     'vwap': vwap,
+00009140: 0a20 2020 2020 2020 2020 2020 2027 6f70  .            'op
+00009150: 656e 273a 2073 656c 662e 7361 6665 5f73  en': self.safe_s
+00009160: 7472 696e 6728 7469 636b 6572 2c20 276f  tring(ticker, 'o
+00009170: 2729 2c0a 2020 2020 2020 2020 2020 2020  '),.            
+00009180: 2763 6c6f 7365 273a 206c 6173 742c 0a20  'close': last,. 
+00009190: 2020 2020 2020 2020 2020 2027 6c61 7374             'last
+000091a0: 273a 206c 6173 742c 0a20 2020 2020 2020  ': last,.       
+000091b0: 2020 2020 2027 7072 6576 696f 7573 436c       'previousCl
+000091c0: 6f73 6527 3a20 4e6f 6e65 2c0a 2020 2020  ose': None,.    
+000091d0: 2020 2020 2020 2020 2763 6861 6e67 6527          'change'
+000091e0: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+000091f0: 2020 2020 2770 6572 6365 6e74 6167 6527      'percentage'
+00009200: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
+00009210: 2020 2020 2761 7665 7261 6765 273a 204e      'average': N
+00009220: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00009230: 2027 6261 7365 566f 6c75 6d65 273a 2062   'baseVolume': b
+00009240: 6173 6556 6f6c 756d 652c 0a20 2020 2020  aseVolume,.     
+00009250: 2020 2020 2020 2027 7175 6f74 6556 6f6c         'quoteVol
+00009260: 756d 6527 3a20 7175 6f74 6556 6f6c 756d  ume': quoteVolum
+00009270: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
+00009280: 696e 666f 273a 2074 6963 6b65 722c 0a20  info': ticker,. 
+00009290: 2020 2020 2020 207d 2c20 6d61 726b 6574         }, market
+000092a0: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+000092b0: 5f74 6963 6b65 7273 2873 656c 662c 2073  _tickers(self, s
+000092c0: 796d 626f 6c73 3a20 5374 7269 6e67 7320  ymbols: Strings 
+000092d0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+000092e0: 7d29 202d 3e20 5469 636b 6572 733a 0a20  }) -> Tickers:. 
+000092f0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+00009300: 2020 2066 6574 6368 6573 2070 7269 6365     fetches price
+00009310: 2074 6963 6b65 7273 2066 6f72 206d 756c   tickers for mul
+00009320: 7469 706c 6520 6d61 726b 6574 732c 2073  tiple markets, s
+00009330: 7461 7469 7374 6963 616c 2069 6e66 6f72  tatistical infor
+00009340: 6d61 7469 6f6e 2063 616c 6375 6c61 7465  mation calculate
+00009350: 6420 6f76 6572 2074 6865 2070 6173 7420  d over the past 
+00009360: 3234 2068 6f75 7273 2066 6f72 2065 6163  24 hours for eac
+00009370: 6820 6d61 726b 6574 0a20 2020 2020 2020  h market.       
+00009380: 203a 7365 653a 2068 7474 7073 3a2f 2f64   :see: https://d
+00009390: 6f63 732e 6b72 616b 656e 2e63 6f6d 2f72  ocs.kraken.com/r
+000093a0: 6573 742f 2374 6167 2f53 706f 742d 4d61  est/#tag/Spot-Ma
+000093b0: 726b 6574 2d44 6174 612f 6f70 6572 6174  rket-Data/operat
+000093c0: 696f 6e2f 6765 7454 6963 6b65 7249 6e66  ion/getTickerInf
+000093d0: 6f72 6d61 7469 6f6e 0a20 2020 2020 2020  ormation.       
+000093e0: 203a 7061 7261 6d20 7374 725b 5d7c 4e6f   :param str[]|No
+000093f0: 6e65 2073 796d 626f 6c73 3a20 756e 6966  ne symbols: unif
+00009400: 6965 6420 7379 6d62 6f6c 7320 6f66 2074  ied symbols of t
+00009410: 6865 206d 6172 6b65 7473 2074 6f20 6665  he markets to fe
+00009420: 7463 6820 7468 6520 7469 636b 6572 2066  tch the ticker f
+00009430: 6f72 2c20 616c 6c20 6d61 726b 6574 2074  or, all market t
+00009440: 6963 6b65 7273 2061 7265 2072 6574 7572  ickers are retur
+00009450: 6e65 6420 6966 206e 6f74 2061 7373 6967  ned if not assig
+00009460: 6e65 640a 2020 2020 2020 2020 3a70 6172  ned.        :par
+00009470: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+00009480: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00009490: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+000094a0: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+000094b0: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+000094c0: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+000094d0: 6120 6469 6374 696f 6e61 7279 206f 6620  a dictionary of 
+000094e0: 6074 6963 6b65 7220 7374 7275 6374 7572  `ticker structur
+000094f0: 6573 203c 6874 7470 733a 2f2f 646f 6373  es <https://docs
+00009500: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+00009510: 7469 636b 6572 2d73 7472 7563 7475 7265  ticker-structure
+00009520: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00009530: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00009540: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00009550: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
+00009560: 2020 2020 2020 2020 6966 2073 796d 626f          if symbo
+00009570: 6c73 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ls is not None:.
+00009580: 2020 2020 2020 2020 2020 2020 7379 6d62              symb
+00009590: 6f6c 7320 3d20 7365 6c66 2e6d 6172 6b65  ols = self.marke
+000095a0: 745f 7379 6d62 6f6c 7328 7379 6d62 6f6c  t_symbols(symbol
+000095b0: 7329 0a20 2020 2020 2020 2020 2020 206d  s).            m
+000095c0: 6172 6b65 7449 6473 203d 205b 5d0a 2020  arketIds = [].  
+000095d0: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+000095e0: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
+000095f0: 7379 6d62 6f6c 7329 293a 0a20 2020 2020  symbols)):.     
+00009600: 2020 2020 2020 2020 2020 2073 796d 626f             symbo
+00009610: 6c20 3d20 7379 6d62 6f6c 735b 695d 0a20  l = symbols[i]. 
+00009620: 2020 2020 2020 2020 2020 2020 2020 206d                 m
+00009630: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+00009640: 6b65 7473 5b73 796d 626f 6c5d 0a20 2020  kets[symbol].   
+00009650: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00009660: 6d61 726b 6574 5b27 6163 7469 7665 275d  market['active']
+00009670: 2061 6e64 206e 6f74 206d 6172 6b65 745b   and not market[
+00009680: 2764 6172 6b70 6f6f 6c27 5d3a 0a20 2020  'darkpool']:.   
+00009690: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000096a0: 206d 6172 6b65 7449 6473 2e61 7070 656e   marketIds.appen
+000096b0: 6428 6d61 726b 6574 5b27 6964 275d 290a  d(market['id']).
+000096c0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+000096d0: 6573 745b 2770 6169 7227 5d20 3d20 272c  est['pair'] = ',
+000096e0: 272e 6a6f 696e 286d 6172 6b65 7449 6473  '.join(marketIds
+000096f0: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+00009700: 7365 203d 2073 656c 662e 7075 626c 6963  se = self.public
+00009710: 4765 7454 6963 6b65 7228 7365 6c66 2e65  GetTicker(self.e
+00009720: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+00009730: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+00009740: 7469 636b 6572 7320 3d20 7265 7370 6f6e  tickers = respon
+00009750: 7365 5b27 7265 7375 6c74 275d 0a20 2020  se['result'].   
+00009760: 2020 2020 2069 6473 203d 206c 6973 7428       ids = list(
+00009770: 7469 636b 6572 732e 6b65 7973 2829 290a  tickers.keys()).
+00009780: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00009790: 207b 7d0a 2020 2020 2020 2020 666f 7220   {}.        for 
+000097a0: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
+000097b0: 6e28 6964 7329 293a 0a20 2020 2020 2020  n(ids)):.       
+000097c0: 2020 2020 2069 6420 3d20 6964 735b 695d       id = ids[i]
+000097d0: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+000097e0: 6b65 7420 3d20 7365 6c66 2e73 6166 655f  ket = self.safe_
+000097f0: 6d61 726b 6574 2869 6429 0a20 2020 2020  market(id).     
+00009800: 2020 2020 2020 2073 796d 626f 6c20 3d20         symbol = 
+00009810: 6d61 726b 6574 5b27 7379 6d62 6f6c 275d  market['symbol']
+00009820: 0a20 2020 2020 2020 2020 2020 2074 6963  .            tic
+00009830: 6b65 7220 3d20 7469 636b 6572 735b 6964  ker = tickers[id
+00009840: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00009850: 7375 6c74 5b73 796d 626f 6c5d 203d 2073  sult[symbol] = s
+00009860: 656c 662e 7061 7273 655f 7469 636b 6572  elf.parse_ticker
+00009870: 2874 6963 6b65 722c 206d 6172 6b65 7429  (ticker, market)
+00009880: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00009890: 7365 6c66 2e66 696c 7465 725f 6279 5f61  self.filter_by_a
+000098a0: 7272 6179 5f74 6963 6b65 7273 2872 6573  rray_tickers(res
+000098b0: 756c 742c 2027 7379 6d62 6f6c 272c 2073  ult, 'symbol', s
+000098c0: 796d 626f 6c73 290a 0a20 2020 2064 6566  ymbols)..    def
+000098d0: 2066 6574 6368 5f74 6963 6b65 7228 7365   fetch_ticker(se
+000098e0: 6c66 2c20 7379 6d62 6f6c 3a20 7374 722c  lf, symbol: str,
+000098f0: 2070 6172 616d 733d 7b7d 2920 2d3e 2054   params={}) -> T
+00009900: 6963 6b65 723a 0a20 2020 2020 2020 2022  icker:.        "
+00009910: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00009920: 6573 2061 2070 7269 6365 2074 6963 6b65  es a price ticke
+00009930: 722c 2061 2073 7461 7469 7374 6963 616c  r, a statistical
+00009940: 2063 616c 6375 6c61 7469 6f6e 2077 6974   calculation wit
+00009950: 6820 7468 6520 696e 666f 726d 6174 696f  h the informatio
+00009960: 6e20 6361 6c63 756c 6174 6564 206f 7665  n calculated ove
+00009970: 7220 7468 6520 7061 7374 2032 3420 686f  r the past 24 ho
+00009980: 7572 7320 666f 7220 6120 7370 6563 6966  urs for a specif
+00009990: 6963 206d 6172 6b65 740a 2020 2020 2020  ic market.      
+000099a0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+000099b0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+000099c0: 7265 7374 2f23 7461 672f 5370 6f74 2d4d  rest/#tag/Spot-M
+000099d0: 6172 6b65 742d 4461 7461 2f6f 7065 7261  arket-Data/opera
+000099e0: 7469 6f6e 2f67 6574 5469 636b 6572 496e  tion/getTickerIn
+000099f0: 666f 726d 6174 696f 6e0a 2020 2020 2020  formation.      
+00009a00: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+00009a10: 626f 6c3a 2075 6e69 6669 6564 2073 796d  bol: unified sym
+00009a20: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
+00009a30: 7420 746f 2066 6574 6368 2074 6865 2074  t to fetch the t
+00009a40: 6963 6b65 7220 666f 720a 2020 2020 2020  icker for.      
+00009a50: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
+00009a60: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
+00009a70: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
+00009a80: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
+00009a90: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
+00009aa0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
+00009ab0: 6469 6374 3a20 6120 6074 6963 6b65 7220  dict: a `ticker 
+00009ac0: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
+00009ad0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00009ae0: 2f23 2f3f 6964 3d74 6963 6b65 722d 7374  /#/?id=ticker-st
+00009af0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00009b00: 2020 2222 220a 2020 2020 2020 2020 7365    """.        se
+00009b10: 6c66 2e6c 6f61 645f 6d61 726b 6574 7328  lf.load_markets(
+00009b20: 290a 2020 2020 2020 2020 6461 726b 706f  ).        darkpo
+00009b30: 6f6c 203d 2073 796d 626f 6c2e 6669 6e64  ol = symbol.find
+00009b40: 2827 2e64 2729 203e 3d20 300a 2020 2020  ('.d') >= 0.    
+00009b50: 2020 2020 6966 2064 6172 6b70 6f6f 6c3a      if darkpool:
+00009b60: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00009b70: 7365 2045 7863 6861 6e67 6545 7272 6f72  se ExchangeError
+00009b80: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
+00009b90: 6368 5469 636b 6572 2829 2064 6f65 7320  chTicker() does 
+00009ba0: 6e6f 7420 7072 6f76 6964 6520 6120 7469  not provide a ti
+00009bb0: 636b 6572 2066 6f72 2064 6172 6b70 6f6f  cker for darkpoo
+00009bc0: 6c20 7379 6d62 6f6c 2027 202b 2073 796d  l symbol ' + sym
+00009bd0: 626f 6c29 0a20 2020 2020 2020 206d 6172  bol).        mar
+00009be0: 6b65 7420 3d20 7365 6c66 2e6d 6172 6b65  ket = self.marke
+00009bf0: 7428 7379 6d62 6f6c 290a 2020 2020 2020  t(symbol).      
+00009c00: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+00009c10: 2020 2020 2020 2020 2020 2770 6169 7227            'pair'
+00009c20: 3a20 6d61 726b 6574 5b27 6964 275d 2c0a  : market['id'],.
+00009c30: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00009c40: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+00009c50: 662e 7075 626c 6963 4765 7454 6963 6b65  f.publicGetTicke
+00009c60: 7228 7365 6c66 2e65 7874 656e 6428 7265  r(self.extend(re
+00009c70: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00009c80: 2020 2020 2020 2020 7469 636b 6572 203d          ticker =
+00009c90: 2072 6573 706f 6e73 655b 2772 6573 756c   response['resul
+00009ca0: 7427 5d5b 6d61 726b 6574 5b27 6964 275d  t'][market['id']
+00009cb0: 5d0a 2020 2020 2020 2020 7265 7475 726e  ].        return
+00009cc0: 2073 656c 662e 7061 7273 655f 7469 636b   self.parse_tick
+00009cd0: 6572 2874 6963 6b65 722c 206d 6172 6b65  er(ticker, marke
+00009ce0: 7429 0a0a 2020 2020 6465 6620 7061 7273  t)..    def pars
+00009cf0: 655f 6f68 6c63 7628 7365 6c66 2c20 6f68  e_ohlcv(self, oh
+00009d00: 6c63 762c 206d 6172 6b65 743a 204d 6172  lcv, market: Mar
+00009d10: 6b65 7420 3d20 4e6f 6e65 2920 2d3e 206c  ket = None) -> l
+00009d20: 6973 743a 0a20 2020 2020 2020 2023 0a20  ist:.        #. 
+00009d30: 2020 2020 2020 2023 2020 2020 205b 0a20         #     [. 
+00009d40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00009d50: 2031 3539 3134 3735 3634 302c 0a20 2020   1591475640,.   
+00009d60: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00009d70: 302e 3032 3530 3022 2c0a 2020 2020 2020  0.02500",.      
+00009d80: 2020 2320 2020 2020 2020 2020 2230 2e30    #         "0.0
+00009d90: 3235 3030 222c 0a20 2020 2020 2020 2023  2500",.        #
+00009da0: 2020 2020 2020 2020 2022 302e 3032 3530           "0.0250
+00009db0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+00009dc0: 2020 2020 2020 2230 2e30 3235 3030 222c        "0.02500",
+00009dd0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00009de0: 2020 2022 302e 3032 3530 3022 2c0a 2020     "0.02500",.  
+00009df0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00009e00: 2239 2e31 3232 3031 3030 3022 2c0a 2020  "9.12201000",.  
+00009e10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00009e20: 350a 2020 2020 2020 2020 2320 2020 2020  5.        #     
+00009e30: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
+00009e40: 2020 2020 7265 7475 726e 205b 0a20 2020      return [.   
+00009e50: 2020 2020 2020 2020 2073 656c 662e 7361           self.sa
+00009e60: 6665 5f74 696d 6573 7461 6d70 286f 686c  fe_timestamp(ohl
+00009e70: 6376 2c20 3029 2c0a 2020 2020 2020 2020  cv, 0),.        
+00009e80: 2020 2020 7365 6c66 2e73 6166 655f 6e75      self.safe_nu
+00009e90: 6d62 6572 286f 686c 6376 2c20 3129 2c0a  mber(ohlcv, 1),.
+00009ea0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009eb0: 2e73 6166 655f 6e75 6d62 6572 286f 686c  .safe_number(ohl
+00009ec0: 6376 2c20 3229 2c0a 2020 2020 2020 2020  cv, 2),.        
+00009ed0: 2020 2020 7365 6c66 2e73 6166 655f 6e75      self.safe_nu
+00009ee0: 6d62 6572 286f 686c 6376 2c20 3329 2c0a  mber(ohlcv, 3),.
+00009ef0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00009f00: 2e73 6166 655f 6e75 6d62 6572 286f 686c  .safe_number(ohl
+00009f10: 6376 2c20 3429 2c0a 2020 2020 2020 2020  cv, 4),.        
+00009f20: 2020 2020 7365 6c66 2e73 6166 655f 6e75      self.safe_nu
+00009f30: 6d62 6572 286f 686c 6376 2c20 3629 2c0a  mber(ohlcv, 6),.
+00009f40: 2020 2020 2020 2020 5d0a 0a20 2020 2064          ]..    d
+00009f50: 6566 2066 6574 6368 5f6f 686c 6376 2873  ef fetch_ohlcv(s
+00009f60: 656c 662c 2073 796d 626f 6c3a 2073 7472  elf, symbol: str
+00009f70: 2c20 7469 6d65 6672 616d 653d 2731 6d27  , timeframe='1m'
+00009f80: 2c20 7369 6e63 653a 2049 6e74 203d 204e  , since: Int = N
+00009f90: 6f6e 652c 206c 696d 6974 3a20 496e 7420  one, limit: Int 
+00009fa0: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00009fb0: 7d29 202d 3e20 4c69 7374 5b6c 6973 745d  }) -> List[list]
+00009fc0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+00009fd0: 2020 2020 2020 6665 7463 6865 7320 6869        fetches hi
+00009fe0: 7374 6f72 6963 616c 2063 616e 646c 6573  storical candles
+00009ff0: 7469 636b 2064 6174 6120 636f 6e74 6169  tick data contai
+0000a000: 6e69 6e67 2074 6865 206f 7065 6e2c 2068  ning the open, h
+0000a010: 6967 682c 206c 6f77 2c20 616e 6420 636c  igh, low, and cl
+0000a020: 6f73 6520 7072 6963 652c 2061 6e64 2074  ose price, and t
+0000a030: 6865 2076 6f6c 756d 6520 6f66 2061 206d  he volume of a m
+0000a040: 6172 6b65 740a 2020 2020 2020 2020 3a73  arket.        :s
+0000a050: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
+0000a060: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
+0000a070: 2f23 7461 672f 5370 6f74 2d4d 6172 6b65  /#tag/Spot-Marke
+0000a080: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
+0000a090: 2f67 6574 4f48 4c43 4461 7461 0a20 2020  /getOHLCData.   
+0000a0a0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0000a0b0: 7379 6d62 6f6c 3a20 756e 6966 6965 6420  symbol: unified 
+0000a0c0: 7379 6d62 6f6c 206f 6620 7468 6520 6d61  symbol of the ma
+0000a0d0: 726b 6574 2074 6f20 6665 7463 6820 4f48  rket to fetch OH
+0000a0e0: 4c43 5620 6461 7461 2066 6f72 0a20 2020  LCV data for.   
+0000a0f0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0000a100: 7469 6d65 6672 616d 653a 2074 6865 206c  timeframe: the l
+0000a110: 656e 6774 6820 6f66 2074 696d 6520 6561  ength of time ea
+0000a120: 6368 2063 616e 646c 6520 7265 7072 6573  ch candle repres
+0000a130: 656e 7473 0a20 2020 2020 2020 203a 7061  ents.        :pa
+0000a140: 7261 6d20 696e 7420 5b73 696e 6365 5d3a  ram int [since]:
+0000a150: 2074 696d 6573 7461 6d70 2069 6e20 6d73   timestamp in ms
+0000a160: 206f 6620 7468 6520 6561 726c 6965 7374   of the earliest
+0000a170: 2063 616e 646c 6520 746f 2066 6574 6368   candle to fetch
+0000a180: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000a190: 696e 7420 5b6c 696d 6974 5d3a 2074 6865  int [limit]: the
+0000a1a0: 206d 6178 696d 756d 2061 6d6f 756e 7420   maximum amount 
+0000a1b0: 6f66 2063 616e 646c 6573 2074 6f20 6665  of candles to fe
+0000a1c0: 7463 680a 2020 2020 2020 2020 3a70 6172  tch.        :par
+0000a1d0: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+0000a1e0: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+0000a1f0: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+0000a200: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+0000a210: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0000a220: 203a 7061 7261 6d20 626f 6f6c 6561 6e20   :param boolean 
+0000a230: 5b70 6172 616d 732e 7061 6769 6e61 7465  [params.paginate
+0000a240: 5d3a 2064 6566 6175 6c74 2046 616c 7365  ]: default False
+0000a250: 2c20 7768 656e 2054 7275 6520 7769 6c6c  , when True will
+0000a260: 2061 7574 6f6d 6174 6963 616c 6c79 2070   automatically p
+0000a270: 6167 696e 6174 6520 6279 2063 616c 6c69  aginate by calli
+0000a280: 6e67 2073 656c 6620 656e 6470 6f69 6e74  ng self endpoint
+0000a290: 206d 756c 7469 706c 6520 7469 6d65 732e   multiple times.
+0000a2a0: 2053 6565 2069 6e20 7468 6520 646f 6373   See in the docs
+0000a2b0: 2061 6c6c 2074 6865 205b 6176 6169 6c62   all the [availb
+0000a2c0: 6c65 2070 6172 616d 6574 6572 735d 2868  le parameters](h
+0000a2d0: 7474 7073 3a2f 2f67 6974 6875 622e 636f  ttps://github.co
+0000a2e0: 6d2f 6363 7874 2f63 6378 742f 7769 6b69  m/ccxt/ccxt/wiki
+0000a2f0: 2f4d 616e 7561 6c23 7061 6769 6e61 7469  /Manual#paginati
+0000a300: 6f6e 2d70 6172 616d 7329 0a20 2020 2020  on-params).     
+0000a310: 2020 203a 7265 7475 726e 7320 696e 745b     :returns int[
+0000a320: 5d5b 5d3a 2041 206c 6973 7420 6f66 2063  ][]: A list of c
+0000a330: 616e 646c 6573 206f 7264 6572 6564 2c20  andles ordered, 
+0000a340: 6f70 656e 2c20 6869 6768 2c20 6c6f 772c  open, high, low,
+0000a350: 2063 6c6f 7365 2c20 766f 6c75 6d65 0a20   close, volume. 
+0000a360: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0000a370: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+0000a380: 6b65 7473 2829 0a20 2020 2020 2020 2070  kets().        p
+0000a390: 6167 696e 6174 6520 3d20 4661 6c73 650a  aginate = False.
+0000a3a0: 2020 2020 2020 2020 7061 6769 6e61 7465          paginate
+0000a3b0: 2c20 7061 7261 6d73 203d 2073 656c 662e  , params = self.
+0000a3c0: 6861 6e64 6c65 5f6f 7074 696f 6e5f 616e  handle_option_an
+0000a3d0: 645f 7061 7261 6d73 2870 6172 616d 732c  d_params(params,
+0000a3e0: 2027 6665 7463 684f 484c 4356 272c 2027   'fetchOHLCV', '
+0000a3f0: 7061 6769 6e61 7465 2729 0a20 2020 2020  paginate').     
+0000a400: 2020 2069 6620 7061 6769 6e61 7465 3a0a     if paginate:.
+0000a410: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000a420: 726e 2073 656c 662e 6665 7463 685f 7061  rn self.fetch_pa
+0000a430: 6769 6e61 7465 645f 6361 6c6c 5f64 6574  ginated_call_det
+0000a440: 6572 6d69 6e69 7374 6963 2827 6665 7463  erministic('fetc
+0000a450: 684f 484c 4356 272c 2073 796d 626f 6c2c  hOHLCV', symbol,
+0000a460: 2073 696e 6365 2c20 6c69 6d69 742c 2074   since, limit, t
+0000a470: 696d 6566 7261 6d65 2c20 7061 7261 6d73  imeframe, params
+0000a480: 2c20 3732 3029 0a20 2020 2020 2020 206d  , 720).        m
+0000a490: 6172 6b65 7420 3d20 7365 6c66 2e6d 6172  arket = self.mar
+0000a4a0: 6b65 7428 7379 6d62 6f6c 290a 2020 2020  ket(symbol).    
+0000a4b0: 2020 2020 7061 7273 6564 5469 6d65 6672      parsedTimefr
+0000a4c0: 616d 6520 3d20 7365 6c66 2e73 6166 655f  ame = self.safe_
+0000a4d0: 696e 7465 6765 7228 7365 6c66 2e74 696d  integer(self.tim
+0000a4e0: 6566 7261 6d65 732c 2074 696d 6566 7261  eframes, timefra
+0000a4f0: 6d65 290a 2020 2020 2020 2020 7265 7175  me).        requ
+0000a500: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
+0000a510: 2020 2020 2770 6169 7227 3a20 6d61 726b      'pair': mark
+0000a520: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
+0000a530: 2020 7d0a 2020 2020 2020 2020 6966 2070    }.        if p
+0000a540: 6172 7365 6454 696d 6566 7261 6d65 2069  arsedTimeframe i
+0000a550: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000a560: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000a570: 2769 6e74 6572 7661 6c27 5d20 3d20 7061  'interval'] = pa
+0000a580: 7273 6564 5469 6d65 6672 616d 650a 2020  rsedTimeframe.  
+0000a590: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0000a5a0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000a5b0: 2769 6e74 6572 7661 6c27 5d20 3d20 7469  'interval'] = ti
+0000a5c0: 6d65 6672 616d 650a 2020 2020 2020 2020  meframe.        
+0000a5d0: 6966 2073 696e 6365 2069 7320 6e6f 7420  if since is not 
+0000a5e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000a5f0: 2020 2320 636f 6e74 7261 7279 2074 6f20    # contrary to 
+0000a600: 6b72 616b 656e 2773 2061 7069 2064 6f63  kraken's api doc
+0000a610: 756d 656e 7461 7469 6f6e 2c20 7468 6520  umentation, the 
+0000a620: 7369 6e63 6520 7061 7261 6d65 7465 7220  since parameter 
+0000a630: 6d75 7374 2062 6520 7061 7373 6564 2069  must be passed i
+0000a640: 6e20 6e61 6e6f 7365 636f 6e64 730a 2020  n nanoseconds.  
+0000a650: 2020 2020 2020 2020 2020 2320 7468 6520            # the 
+0000a660: 6164 6469 6e67 206f 6620 2730 3030 3030  adding of '00000
+0000a670: 3027 2069 7320 636f 7069 6564 2066 726f  0' is copied fro
+0000a680: 6d20 7468 6520 6665 7463 6854 7261 6465  m the fetchTrade
+0000a690: 7320 6675 6e63 7469 6f6e 0a20 2020 2020  s function.     
+0000a6a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
+0000a6b0: 7369 6e63 6527 5d20 3d20 7365 6c66 2e6e  since'] = self.n
+0000a6c0: 756d 6265 725f 746f 5f73 7472 696e 6728  umber_to_string(
+0000a6d0: 7369 6e63 6529 202b 2027 3030 3030 3030  since) + '000000
+0000a6e0: 2720 2023 2065 7870 6563 7465 6420 746f  '  # expected to
+0000a6f0: 2062 6520 696e 206e 616e 6f73 6563 6f6e   be in nanosecon
+0000a700: 6473 0a20 2020 2020 2020 2072 6573 706f  ds.        respo
+0000a710: 6e73 6520 3d20 7365 6c66 2e70 7562 6c69  nse = self.publi
+0000a720: 6347 6574 4f48 4c43 2873 656c 662e 6578  cGetOHLC(self.ex
+0000a730: 7465 6e64 2872 6571 7565 7374 2c20 7061  tend(request, pa
+0000a740: 7261 6d73 2929 0a20 2020 2020 2020 2023  rams)).        #
+0000a750: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0000a760: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000a770: 2020 2022 6572 726f 7222 3a5b 5d2c 0a20     "error":[],. 
+0000a780: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000a790: 2022 7265 7375 6c74 223a 7b0a 2020 2020   "result":{.    
+0000a7a0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000a7b0: 2020 2258 4554 4858 5842 5422 3a5b 0a20    "XETHXXBT":[. 
+0000a7c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000a7d0: 2020 2020 2020 2020 205b 3135 3931 3437           [159147
+0000a7e0: 3535 3830 2c22 302e 3032 3439 3922 2c22  5580,"0.02499","
+0000a7f0: 302e 3032 3439 3922 2c22 302e 3032 3439  0.02499","0.0249
+0000a800: 3922 2c22 302e 3032 3439 3922 2c22 302e  9","0.02499","0.
+0000a810: 3030 3030 3022 2c22 302e 3030 3030 3030  00000","0.000000
+0000a820: 3030 222c 305d 2c0a 2020 2020 2020 2020  00",0],.        
+0000a830: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000a840: 2020 5b31 3539 3134 3735 3634 302c 2230    [1591475640,"0
+0000a850: 2e30 3235 3030 222c 2230 2e30 3235 3030  .02500","0.02500
+0000a860: 222c 2230 2e30 3235 3030 222c 2230 2e30  ","0.02500","0.0
+0000a870: 3235 3030 222c 2230 2e30 3235 3030 222c  2500","0.02500",
+0000a880: 2239 2e31 3232 3031 3030 3022 2c35 5d2c  "9.12201000",5],
+0000a890: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000a8a0: 2020 2020 2020 2020 2020 205b 3135 3931             [1591
+0000a8b0: 3437 3537 3030 2c22 302e 3032 3439 3922  475700,"0.02499"
+0000a8c0: 2c22 302e 3032 3439 3922 2c22 302e 3032  ,"0.02499","0.02
+0000a8d0: 3439 3922 2c22 302e 3032 3439 3922 2c22  499","0.02499","
+0000a8e0: 302e 3032 3439 3922 2c22 312e 3238 3638  0.02499","1.2868
+0000a8f0: 3134 3135 222c 325d 2c0a 2020 2020 2020  1415",2],.      
+0000a900: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000a910: 2020 2020 5b31 3539 3134 3735 3736 302c      [1591475760,
+0000a920: 2230 2e30 3234 3939 222c 2230 2e30 3234  "0.02499","0.024
+0000a930: 3939 222c 2230 2e30 3234 3939 222c 2230  99","0.02499","0
+0000a940: 2e30 3234 3939 222c 2230 2e30 3234 3939  .02499","0.02499
+0000a950: 222c 2230 2e30 3838 3030 3030 3022 2c31  ","0.08800000",1
+0000a960: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
+0000a970: 2020 2020 2020 2020 205d 2c0a 2020 2020           ],.    
+0000a980: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000a990: 2020 226c 6173 7422 3a31 3539 3135 3137    "last":1591517
+0000a9a0: 3538 300a 2020 2020 2020 2020 2320 2020  580.        #   
+0000a9b0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000a9c0: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+0000a9d0: 7265 7375 6c74 203d 2073 656c 662e 7361  result = self.sa
+0000a9e0: 6665 5f76 616c 7565 2872 6573 706f 6e73  fe_value(respons
+0000a9f0: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0000aa00: 0a20 2020 2020 2020 206f 686c 6376 7320  .        ohlcvs 
+0000aa10: 3d20 7365 6c66 2e73 6166 655f 6c69 7374  = self.safe_list
+0000aa20: 2872 6573 756c 742c 206d 6172 6b65 745b  (result, market[
+0000aa30: 2769 6427 5d2c 205b 5d29 0a20 2020 2020  'id'], []).     
+0000aa40: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+0000aa50: 6172 7365 5f6f 686c 6376 7328 6f68 6c63  arse_ohlcvs(ohlc
+0000aa60: 7673 2c20 6d61 726b 6574 2c20 7469 6d65  vs, market, time
+0000aa70: 6672 616d 652c 2073 696e 6365 2c20 6c69  frame, since, li
+0000aa80: 6d69 7429 0a0a 2020 2020 6465 6620 7061  mit)..    def pa
+0000aa90: 7273 655f 6c65 6467 6572 5f65 6e74 7279  rse_ledger_entry
+0000aaa0: 5f74 7970 6528 7365 6c66 2c20 7479 7065  _type(self, type
+0000aab0: 293a 0a20 2020 2020 2020 2074 7970 6573  ):.        types
+0000aac0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
+0000aad0: 2027 7472 6164 6527 3a20 2774 7261 6465   'trade': 'trade
+0000aae0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0000aaf0: 7769 7468 6472 6177 616c 273a 2027 7472  withdrawal': 'tr
+0000ab00: 616e 7361 6374 696f 6e27 2c0a 2020 2020  ansaction',.    
+0000ab10: 2020 2020 2020 2020 2764 6570 6f73 6974          'deposit
+0000ab20: 273a 2027 7472 616e 7361 6374 696f 6e27  ': 'transaction'
+0000ab30: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0000ab40: 7261 6e73 6665 7227 3a20 2774 7261 6e73  ransfer': 'trans
+0000ab50: 6665 7227 2c0a 2020 2020 2020 2020 2020  fer',.          
+0000ab60: 2020 276d 6172 6769 6e27 3a20 276d 6172    'margin': 'mar
+0000ab70: 6769 6e27 2c0a 2020 2020 2020 2020 7d0a  gin',.        }.
+0000ab80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0000ab90: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0000aba0: 7479 7065 732c 2074 7970 652c 2074 7970  types, type, typ
+0000abb0: 6529 0a0a 2020 2020 6465 6620 7061 7273  e)..    def pars
+0000abc0: 655f 6c65 6467 6572 5f65 6e74 7279 2873  e_ledger_entry(s
+0000abd0: 656c 662c 2069 7465 6d2c 2063 7572 7265  elf, item, curre
+0000abe0: 6e63 793a 2043 7572 7265 6e63 7920 3d20  ncy: Currency = 
+0000abf0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
+0000ac00: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
+0000ac10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000ac20: 2020 2027 4c54 464b 3746 2d4e 3243 5558     'LTFK7F-N2CUX
+0000ac30: 2d50 4e59 3453 5827 3a20 7b0a 2020 2020  -PNY4SX': {.    
+0000ac40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+0000ac50: 2020 2272 6566 6964 223a 2022 5453 4a54    "refid": "TSJT
+0000ac60: 4754 2d44 5437 574e 2d47 5050 514d 4a22  GT-DT7WN-GPPQMJ"
+0000ac70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000ac80: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+0000ac90: 2031 3532 3031 3032 3332 302e 3535 352c   1520102320.555,
+0000aca0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000acb0: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
+0000acc0: 7472 6164 6522 2c0a 2020 2020 2020 2020  trade",.        
+0000acd0: 2320 2020 2020 2020 2020 2020 2020 2261  #             "a
+0000ace0: 636c 6173 7322 3a20 2263 7572 7265 6e63  class": "currenc
+0000acf0: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
+0000ad00: 2020 2020 2020 2020 2020 2261 7373 6574            "asset
+0000ad10: 223a 2022 5845 5448 222c 0a20 2020 2020  ": "XETH",.     
+0000ad20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000ad30: 2022 616d 6f75 6e74 223a 2022 302e 3130   "amount": "0.10
+0000ad40: 3837 3139 3436 3030 222c 0a20 2020 2020  87194600",.     
+0000ad50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000ad60: 2022 6665 6522 3a20 2230 2e30 3030 3030   "fee": "0.00000
+0000ad70: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0000ad80: 2320 2020 2020 2020 2020 2020 2020 2262  #             "b
+0000ad90: 616c 616e 6365 223a 2022 302e 3238 3535  alance": "0.2855
+0000ada0: 3835 3130 3030 220a 2020 2020 2020 2020  851000".        
+0000adb0: 2320 2020 2020 2020 2020 7d2c 0a20 2020  #         },.   
+0000adc0: 2020 2020 2023 2020 2020 2020 2020 202e       #         .
+0000add0: 2e2e 0a20 2020 2020 2020 2023 2020 2020  ...        #    
+0000ade0: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0000adf0: 2020 2020 2069 6420 3d20 7365 6c66 2e73       id = self.s
+0000ae00: 6166 655f 7374 7269 6e67 2869 7465 6d2c  afe_string(item,
+0000ae10: 2027 6964 2729 0a20 2020 2020 2020 2064   'id').        d
+0000ae20: 6972 6563 7469 6f6e 203d 204e 6f6e 650a  irection = None.
+0000ae30: 2020 2020 2020 2020 6163 636f 756e 7420          account 
+0000ae40: 3d20 4e6f 6e65 0a20 2020 2020 2020 2072  = None.        r
+0000ae50: 6566 6572 656e 6365 4964 203d 2073 656c  eferenceId = sel
+0000ae60: 662e 7361 6665 5f73 7472 696e 6728 6974  f.safe_string(it
+0000ae70: 656d 2c20 2772 6566 6964 2729 0a20 2020  em, 'refid').   
+0000ae80: 2020 2020 2072 6566 6572 656e 6365 4163       referenceAc
+0000ae90: 636f 756e 7420 3d20 4e6f 6e65 0a20 2020  count = None.   
+0000aea0: 2020 2020 2074 7970 6520 3d20 7365 6c66       type = self
+0000aeb0: 2e70 6172 7365 5f6c 6564 6765 725f 656e  .parse_ledger_en
+0000aec0: 7472 795f 7479 7065 2873 656c 662e 7361  try_type(self.sa
+0000aed0: 6665 5f73 7472 696e 6728 6974 656d 2c20  fe_string(item, 
+0000aee0: 2774 7970 6527 2929 0a20 2020 2020 2020  'type')).       
+0000aef0: 2063 6f64 6520 3d20 7365 6c66 2e73 6166   code = self.saf
+0000af00: 655f 6375 7272 656e 6379 5f63 6f64 6528  e_currency_code(
+0000af10: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0000af20: 2869 7465 6d2c 2027 6173 7365 7427 292c  (item, 'asset'),
+0000af30: 2063 7572 7265 6e63 7929 0a20 2020 2020   currency).     
+0000af40: 2020 2061 6d6f 756e 7420 3d20 7365 6c66     amount = self
+0000af50: 2e73 6166 655f 7374 7269 6e67 2869 7465  .safe_string(ite
+0000af60: 6d2c 2027 616d 6f75 6e74 2729 0a20 2020  m, 'amount').   
+0000af70: 2020 2020 2069 6620 5072 6563 6973 652e       if Precise.
+0000af80: 7374 7269 6e67 5f6c 7428 616d 6f75 6e74  string_lt(amount
+0000af90: 2c20 2730 2729 3a0a 2020 2020 2020 2020  , '0'):.        
+0000afa0: 2020 2020 6469 7265 6374 696f 6e20 3d20      direction = 
+0000afb0: 276f 7574 270a 2020 2020 2020 2020 2020  'out'.          
+0000afc0: 2020 616d 6f75 6e74 203d 2050 7265 6369    amount = Preci
+0000afd0: 7365 2e73 7472 696e 675f 6162 7328 616d  se.string_abs(am
+0000afe0: 6f75 6e74 290a 2020 2020 2020 2020 656c  ount).        el
+0000aff0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+0000b000: 6469 7265 6374 696f 6e20 3d20 2769 6e27  direction = 'in'
+0000b010: 0a20 2020 2020 2020 2074 696d 6573 7461  .        timesta
+0000b020: 6d70 203d 2073 656c 662e 7361 6665 5f74  mp = self.safe_t
+0000b030: 696d 6573 7461 6d70 2869 7465 6d2c 2027  imestamp(item, '
+0000b040: 7469 6d65 2729 0a20 2020 2020 2020 2072  time').        r
+0000b050: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
+0000b060: 2020 2020 2769 6e66 6f27 3a20 6974 656d      'info': item
+0000b070: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
+0000b080: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
+0000b090: 2020 2020 2764 6972 6563 7469 6f6e 273a      'direction':
+0000b0a0: 2064 6972 6563 7469 6f6e 2c0a 2020 2020   direction,.    
+0000b0b0: 2020 2020 2020 2020 2761 6363 6f75 6e74          'account
+0000b0c0: 273a 2061 6363 6f75 6e74 2c0a 2020 2020  ': account,.    
+0000b0d0: 2020 2020 2020 2020 2772 6566 6572 656e          'referen
+0000b0e0: 6365 4964 273a 2072 6566 6572 656e 6365  ceId': reference
+0000b0f0: 4964 2c0a 2020 2020 2020 2020 2020 2020  Id,.            
+0000b100: 2772 6566 6572 656e 6365 4163 636f 756e  'referenceAccoun
+0000b110: 7427 3a20 7265 6665 7265 6e63 6541 6363  t': referenceAcc
+0000b120: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
+0000b130: 2020 2774 7970 6527 3a20 7479 7065 2c0a    'type': type,.
+0000b140: 2020 2020 2020 2020 2020 2020 2763 7572              'cur
+0000b150: 7265 6e63 7927 3a20 636f 6465 2c0a 2020  rency': code,.  
+0000b160: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
+0000b170: 7427 3a20 7365 6c66 2e70 6172 7365 5f6e  t': self.parse_n
+0000b180: 756d 6265 7228 616d 6f75 6e74 292c 0a20  umber(amount),. 
+0000b190: 2020 2020 2020 2020 2020 2027 6265 666f             'befo
+0000b1a0: 7265 273a 204e 6f6e 652c 0a20 2020 2020  re': None,.     
+0000b1b0: 2020 2020 2020 2027 6166 7465 7227 3a20         'after': 
+0000b1c0: 7365 6c66 2e73 6166 655f 6e75 6d62 6572  self.safe_number
+0000b1d0: 2869 7465 6d2c 2027 6261 6c61 6e63 6527  (item, 'balance'
+0000b1e0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0000b1f0: 7374 6174 7573 273a 2027 6f6b 272c 0a20  status': 'ok',. 
+0000b200: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
+0000b210: 7374 616d 7027 3a20 7469 6d65 7374 616d  stamp': timestam
+0000b220: 702c 0a20 2020 2020 2020 2020 2020 2027  p,.            '
+0000b230: 6461 7465 7469 6d65 273a 2073 656c 662e  datetime': self.
+0000b240: 6973 6f38 3630 3128 7469 6d65 7374 616d  iso8601(timestam
+0000b250: 7029 2c0a 2020 2020 2020 2020 2020 2020  p),.            
+0000b260: 2766 6565 273a 207b 0a20 2020 2020 2020  'fee': {.       
+0000b270: 2020 2020 2020 2020 2027 636f 7374 273a           'cost':
+0000b280: 2073 656c 662e 7361 6665 5f6e 756d 6265   self.safe_numbe
+0000b290: 7228 6974 656d 2c20 2766 6565 2729 2c0a  r(item, 'fee'),.
+0000b2a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b2b0: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
+0000b2c0: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+0000b2d0: 0a20 2020 2020 2020 207d 0a0a 2020 2020  .        }..    
+0000b2e0: 6465 6620 6665 7463 685f 6c65 6467 6572  def fetch_ledger
+0000b2f0: 2873 656c 662c 2063 6f64 653a 2053 7472  (self, code: Str
+0000b300: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
+0000b310: 496e 7420 3d20 4e6f 6e65 2c20 6c69 6d69  Int = None, limi
+0000b320: 743a 2049 6e74 203d 204e 6f6e 652c 2070  t: Int = None, p
+0000b330: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0000b340: 2020 2022 2222 0a20 2020 2020 2020 2066     """.        f
+0000b350: 6574 6368 2074 6865 2068 6973 746f 7279  etch the history
+0000b360: 206f 6620 6368 616e 6765 732c 2061 6374   of changes, act
+0000b370: 696f 6e73 2064 6f6e 6520 6279 2074 6865  ions done by the
+0000b380: 2075 7365 7220 6f72 206f 7065 7261 7469   user or operati
+0000b390: 6f6e 7320 7468 6174 2061 6c74 6572 6564  ons that altered
+0000b3a0: 2062 616c 616e 6365 206f 6620 7468 6520   balance of the 
+0000b3b0: 7573 6572 0a20 2020 2020 2020 203a 7365  user.        :se
+0000b3c0: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
+0000b3d0: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
+0000b3e0: 2374 6167 2f41 6363 6f75 6e74 2d44 6174  #tag/Account-Dat
+0000b3f0: 612f 6f70 6572 6174 696f 6e2f 6765 744c  a/operation/getL
+0000b400: 6564 6765 7273 0a20 2020 2020 2020 203a  edgers.        :
+0000b410: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
+0000b420: 756e 6966 6965 6420 6375 7272 656e 6379  unified currency
+0000b430: 2063 6f64 652c 2064 6566 6175 6c74 2069   code, default i
+0000b440: 7320 4e6f 6e65 0a20 2020 2020 2020 203a  s None.        :
+0000b450: 7061 7261 6d20 696e 7420 5b73 696e 6365  param int [since
+0000b460: 5d3a 2074 696d 6573 7461 6d70 2069 6e20  ]: timestamp in 
+0000b470: 6d73 206f 6620 7468 6520 6561 726c 6965  ms of the earlie
+0000b480: 7374 206c 6564 6765 7220 656e 7472 792c  st ledger entry,
+0000b490: 2064 6566 6175 6c74 2069 7320 4e6f 6e65   default is None
+0000b4a0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000b4b0: 696e 7420 5b6c 696d 6974 5d3a 206d 6178  int [limit]: max
+0000b4c0: 206e 756d 6265 7220 6f66 206c 6564 6765   number of ledge
+0000b4d0: 7220 656e 7472 7973 2074 6f20 7265 7475  r entrys to retu
+0000b4e0: 726e 2c20 6465 6661 756c 7420 6973 204e  rn, default is N
+0000b4f0: 6f6e 650a 2020 2020 2020 2020 3a70 6172  one.        :par
+0000b500: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+0000b510: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+0000b520: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+0000b530: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+0000b540: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+0000b550: 203a 7061 7261 6d20 696e 7420 5b70 6172   :param int [par
+0000b560: 616d 732e 756e 7469 6c5d 3a20 7469 6d65  ams.until]: time
+0000b570: 7374 616d 7020 696e 206d 7320 6f66 2074  stamp in ms of t
+0000b580: 6865 206c 6174 6573 7420 6c65 6467 6572  he latest ledger
+0000b590: 2065 6e74 7279 0a20 2020 2020 2020 203a   entry.        :
+0000b5a0: 7265 7475 726e 7320 6469 6374 3a20 6120  returns dict: a 
+0000b5b0: 606c 6564 6765 7220 7374 7275 6374 7572  `ledger structur
+0000b5c0: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+0000b5d0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6c  ccxt.com/#/?id=l
+0000b5e0: 6564 6765 722d 7374 7275 6374 7572 653e  edger-structure>
+0000b5f0: 600a 2020 2020 2020 2020 2222 220a 2020  `.        """.  
+0000b600: 2020 2020 2020 2320 6874 7470 733a 2f2f        # https://
+0000b610: 7777 772e 6b72 616b 656e 2e63 6f6d 2f66  www.kraken.com/f
+0000b620: 6561 7475 7265 732f 6170 6923 6765 742d  eatures/api#get-
+0000b630: 6c65 6467 6572 732d 696e 666f 0a20 2020  ledgers-info.   
+0000b640: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
+0000b650: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
+0000b660: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
+0000b670: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
+0000b680: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
+0000b690: 2063 6f64 6520 6973 206e 6f74 204e 6f6e   code is not Non
+0000b6a0: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
+0000b6b0: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
+0000b6c0: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
+0000b6d0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+0000b6e0: 745b 2761 7373 6574 275d 203d 2063 7572  t['asset'] = cur
+0000b6f0: 7265 6e63 795b 2769 6427 5d0a 2020 2020  rency['id'].    
+0000b700: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
+0000b710: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000b720: 2020 2020 2020 7265 7175 6573 745b 2773        request['s
+0000b730: 7461 7274 275d 203d 2073 656c 662e 7061  tart'] = self.pa
+0000b740: 7273 655f 746f 5f69 6e74 2873 696e 6365  rse_to_int(since
+0000b750: 202f 2031 3030 3029 0a20 2020 2020 2020   / 1000).       
+0000b760: 2072 6571 7565 7374 2c20 7061 7261 6d73   request, params
+0000b770: 203d 2073 656c 662e 6861 6e64 6c65 5f75   = self.handle_u
+0000b780: 6e74 696c 5f6f 7074 696f 6e28 2765 6e64  ntil_option('end
+0000b790: 272c 2072 6571 7565 7374 2c20 7061 7261  ', request, para
+0000b7a0: 6d73 290a 2020 2020 2020 2020 7265 7370  ms).        resp
+0000b7b0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
+0000b7c0: 6174 6550 6f73 744c 6564 6765 7273 2873  atePostLedgers(s
+0000b7d0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+0000b7e0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+0000b7f0: 2020 2020 2023 207b 2065 7272 6f72 3a20       # { error: 
+0000b800: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
+0000b810: 2272 6573 756c 7422 3a20 7b6c 6564 6765  "result": {ledge
+0000b820: 723a 207b 274c 5055 4149 422d 5453 3737  r: {'LPUAIB-TS77
+0000b830: 342d 554b 4850 3758 273a 207b 2020 7265  4-UKHP7X': {  re
+0000b840: 6669 643a 2022 4132 4234 4842 562d 4c34  fid: "A2B4HBV-L4
+0000b850: 4d44 4945 2d4a 5534 4e33 4e22 2c0a 2020  MDIE-JU4N3N",.  
+0000b860: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000b870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b890: 2020 2020 2020 2020 2020 2274 696d 6522            "time"
+0000b8a0: 3a20 2031 3532 3031 3033 3438 382e 3331  :  1520103488.31
+0000b8b0: 342c 0a20 2020 2020 2020 2023 2020 2020  4,.        #    
+0000b8c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b8e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b8f0: 7479 7065 223a 2022 7769 7468 6472 6177  type": "withdraw
+0000b900: 616c 222c 0a20 2020 2020 2020 2023 2020  al",.        #  
 0000b910: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b920: 2020 2020 2274 7970 6522 3a20 2277 6974      "type": "wit
-0000b930: 6864 7261 7761 6c22 2c0a 2020 2020 2020  hdrawal",.      
-0000b940: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000b950: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b930: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000b940: 6163 6c61 7373 223a 2022 6375 7272 656e  aclass": "curren
+0000b950: 6379 222c 0a20 2020 2020 2020 2023 2020  cy",.        #  
 0000b960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b970: 2020 2020 2261 636c 6173 7322 3a20 2263      "aclass": "c
-0000b980: 7572 7265 6e63 7922 2c0a 2020 2020 2020  urrency",.      
-0000b990: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000b9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b970: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b980: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b990: 2261 7373 6574 223a 2022 5845 5448 222c  "asset": "XETH",
+0000b9a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
 0000b9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9c0: 2020 2020 2022 6173 7365 7422 3a20 2258       "asset": "X
-0000b9d0: 4554 4822 2c0a 2020 2020 2020 2020 2320  ETH",.        # 
-0000b9e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000b9d0: 2020 2020 2020 2020 2020 2022 616d 6f75             "amou
+0000b9e0: 6e74 223a 2022 2d30 2e32 3830 3538 3030  nt": "-0.2805800
+0000b9f0: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
 0000ba00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba10: 2261 6d6f 756e 7422 3a20 222d 302e 3238  "amount": "-0.28
-0000ba20: 3035 3830 3030 3030 222c 0a20 2020 2020  05800000",.     
-0000ba30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000ba40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba60: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-0000ba70: 302e 3030 3530 3030 3030 3030 222c 0a20  0.0050000000",. 
-0000ba80: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000ba90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000baa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bab0: 2020 2020 2020 2020 2262 616c 616e 6365          "balance
-0000bac0: 223a 2022 302e 3030 3030 3035 3130 3030  ": "0.0000051000
-0000bad0: 2220 2020 2020 2020 2020 2020 7d2c 0a20  "           },. 
-0000bae0: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
-0000baf0: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-0000bb00: 7265 7370 6f6e 7365 2c20 2772 6573 756c  response, 'resul
-0000bb10: 7427 2c20 7b7d 290a 2020 2020 2020 2020  t', {}).        
-0000bb20: 6c65 6467 6572 203d 2073 656c 662e 7361  ledger = self.sa
-0000bb30: 6665 5f76 616c 7565 2872 6573 756c 742c  fe_value(result,
-0000bb40: 2027 6c65 6467 6572 272c 207b 7d29 0a20   'ledger', {}). 
-0000bb50: 2020 2020 2020 206b 6579 7320 3d20 6c69         keys = li
-0000bb60: 7374 286c 6564 6765 722e 6b65 7973 2829  st(ledger.keys()
-0000bb70: 290a 2020 2020 2020 2020 6974 656d 7320  ).        items 
-0000bb80: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
-0000bb90: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
-0000bba0: 656e 286b 6579 7329 293a 0a20 2020 2020  en(keys)):.     
-0000bbb0: 2020 2020 2020 206b 6579 203d 206b 6579         key = key
-0000bbc0: 735b 695d 0a20 2020 2020 2020 2020 2020  s[i].           
-0000bbd0: 2076 616c 7565 203d 206c 6564 6765 725b   value = ledger[
-0000bbe0: 6b65 795d 0a20 2020 2020 2020 2020 2020  key].           
-0000bbf0: 2076 616c 7565 5b27 6964 275d 203d 206b   value['id'] = k
-0000bc00: 6579 0a20 2020 2020 2020 2020 2020 2069  ey.            i
-0000bc10: 7465 6d73 2e61 7070 656e 6428 7661 6c75  tems.append(valu
-0000bc20: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
-0000bc30: 6e20 7365 6c66 2e70 6172 7365 5f6c 6564  n self.parse_led
-0000bc40: 6765 7228 6974 656d 732c 2063 7572 7265  ger(items, curre
-0000bc50: 6e63 792c 2073 696e 6365 2c20 6c69 6d69  ncy, since, limi
-0000bc60: 7429 0a0a 2020 2020 6465 6620 6665 7463  t)..    def fetc
-0000bc70: 685f 6c65 6467 6572 5f65 6e74 7269 6573  h_ledger_entries
-0000bc80: 5f62 795f 6964 7328 7365 6c66 2c20 6964  _by_ids(self, id
-0000bc90: 732c 2063 6f64 653a 2053 7472 203d 204e  s, code: Str = N
-0000bca0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-0000bcb0: 0a20 2020 2020 2020 2023 2068 7474 7073  .        # https
-0000bcc0: 3a2f 2f77 7777 2e6b 7261 6b65 6e2e 636f  ://www.kraken.co
-0000bcd0: 6d2f 6665 6174 7572 6573 2f61 7069 2371  m/features/api#q
-0000bce0: 7565 7279 2d6c 6564 6765 7273 0a20 2020  uery-ledgers.   
-0000bcf0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-0000bd00: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-0000bd10: 2069 6473 203d 2027 2c27 2e6a 6f69 6e28   ids = ','.join(
-0000bd20: 6964 7329 0a20 2020 2020 2020 2072 6571  ids).        req
-0000bd30: 7565 7374 203d 2073 656c 662e 6578 7465  uest = self.exte
-0000bd40: 6e64 287b 0a20 2020 2020 2020 2020 2020  nd({.           
-0000bd50: 2027 6964 273a 2069 6473 2c0a 2020 2020   'id': ids,.    
-0000bd60: 2020 2020 7d2c 2070 6172 616d 7329 0a20      }, params). 
-0000bd70: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-0000bd80: 3d20 7365 6c66 2e70 7269 7661 7465 506f  = self.privatePo
-0000bd90: 7374 5175 6572 794c 6564 6765 7273 2872  stQueryLedgers(r
-0000bda0: 6571 7565 7374 290a 2020 2020 2020 2020  equest).        
-0000bdb0: 2320 7b20 6572 726f 723a 205b 5d2c 0a20  # { error: [],. 
-0000bdc0: 2020 2020 2020 2023 2020 2022 7265 7375         #   "resu
-0000bdd0: 6c74 223a 207b 274c 5055 4149 422d 5453  lt": {'LPUAIB-TS
-0000bde0: 3737 342d 554b 4850 3758 273a 207b 2020  774-UKHP7X': {  
-0000bdf0: 7265 6669 643a 2022 4132 4234 4842 562d  refid: "A2B4HBV-
-0000be00: 4c34 4d44 4945 2d4a 5534 4e33 4e22 2c0a  L4MDIE-JU4N3N",.
-0000be10: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000be20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba30: 2020 2022 6665 6522 3a20 2230 2e30 3035     "fee": "0.005
+0000ba40: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0000ba50: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000ba60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ba80: 2020 2022 6261 6c61 6e63 6522 3a20 2230     "balance": "0
+0000ba90: 2e30 3030 3030 3531 3030 3022 2020 2020  .0000051000"    
+0000baa0: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+0000bab0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
+0000bac0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
+0000bad0: 6e73 652c 2027 7265 7375 6c74 272c 207b  nse, 'result', {
+0000bae0: 7d29 0a20 2020 2020 2020 206c 6564 6765  }).        ledge
+0000baf0: 7220 3d20 7365 6c66 2e73 6166 655f 7661  r = self.safe_va
+0000bb00: 6c75 6528 7265 7375 6c74 2c20 276c 6564  lue(result, 'led
+0000bb10: 6765 7227 2c20 7b7d 290a 2020 2020 2020  ger', {}).      
+0000bb20: 2020 6b65 7973 203d 206c 6973 7428 6c65    keys = list(le
+0000bb30: 6467 6572 2e6b 6579 7328 2929 0a20 2020  dger.keys()).   
+0000bb40: 2020 2020 2069 7465 6d73 203d 205b 5d0a       items = [].
+0000bb50: 2020 2020 2020 2020 666f 7220 6920 696e          for i in
+0000bb60: 2072 616e 6765 2830 2c20 6c65 6e28 6b65   range(0, len(ke
+0000bb70: 7973 2929 3a0a 2020 2020 2020 2020 2020  ys)):.          
+0000bb80: 2020 6b65 7920 3d20 6b65 7973 5b69 5d0a    key = keys[i].
+0000bb90: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+0000bba0: 6520 3d20 6c65 6467 6572 5b6b 6579 5d0a  e = ledger[key].
+0000bbb0: 2020 2020 2020 2020 2020 2020 7661 6c75              valu
+0000bbc0: 655b 2769 6427 5d20 3d20 6b65 790a 2020  e['id'] = key.  
+0000bbd0: 2020 2020 2020 2020 2020 6974 656d 732e            items.
+0000bbe0: 6170 7065 6e64 2876 616c 7565 290a 2020  append(value).  
+0000bbf0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000bc00: 662e 7061 7273 655f 6c65 6467 6572 2869  f.parse_ledger(i
+0000bc10: 7465 6d73 2c20 6375 7272 656e 6379 2c20  tems, currency, 
+0000bc20: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
+0000bc30: 2020 2064 6566 2066 6574 6368 5f6c 6564     def fetch_led
+0000bc40: 6765 725f 656e 7472 6965 735f 6279 5f69  ger_entries_by_i
+0000bc50: 6473 2873 656c 662c 2069 6473 2c20 636f  ds(self, ids, co
+0000bc60: 6465 3a20 5374 7220 3d20 4e6f 6e65 2c20  de: Str = None, 
+0000bc70: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+0000bc80: 2020 2020 2320 6874 7470 733a 2f2f 7777      # https://ww
+0000bc90: 772e 6b72 616b 656e 2e63 6f6d 2f66 6561  w.kraken.com/fea
+0000bca0: 7475 7265 732f 6170 6923 7175 6572 792d  tures/api#query-
+0000bcb0: 6c65 6467 6572 730a 2020 2020 2020 2020  ledgers.        
+0000bcc0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+0000bcd0: 7328 290a 2020 2020 2020 2020 6964 7320  s().        ids 
+0000bce0: 3d20 272c 272e 6a6f 696e 2869 6473 290a  = ','.join(ids).
+0000bcf0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+0000bd00: 3d20 7365 6c66 2e65 7874 656e 6428 7b0a  = self.extend({.
+0000bd10: 2020 2020 2020 2020 2020 2020 2769 6427              'id'
+0000bd20: 3a20 6964 732c 0a20 2020 2020 2020 207d  : ids,.        }
+0000bd30: 2c20 7061 7261 6d73 290a 2020 2020 2020  , params).      
+0000bd40: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0000bd50: 662e 7072 6976 6174 6550 6f73 7451 7565  f.privatePostQue
+0000bd60: 7279 4c65 6467 6572 7328 7265 7175 6573  ryLedgers(reques
+0000bd70: 7429 0a20 2020 2020 2020 2023 207b 2065  t).        # { e
+0000bd80: 7272 6f72 3a20 5b5d 2c0a 2020 2020 2020  rror: [],.      
+0000bd90: 2020 2320 2020 2272 6573 756c 7422 3a20    #   "result": 
+0000bda0: 7b27 4c50 5541 4942 2d54 5337 3734 2d55  {'LPUAIB-TS774-U
+0000bdb0: 4b48 5037 5827 3a20 7b20 2072 6566 6964  KHP7X': {  refid
+0000bdc0: 3a20 2241 3242 3448 4256 2d4c 344d 4449  : "A2B4HBV-L4MDI
+0000bdd0: 452d 4a55 344e 334e 222c 0a20 2020 2020  E-JU4N3N",.     
+0000bde0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000bdf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be00: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+0000be10: 6d65 223a 2020 3135 3230 3130 3334 3838  me":  1520103488
+0000be20: 2e33 3134 2c0a 2020 2020 2020 2020 2320  .314,.        # 
 0000be30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be40: 2020 2274 696d 6522 3a20 2031 3532 3031    "time":  15201
-0000be50: 3033 3438 382e 3331 342c 0a20 2020 2020  03488.314,.     
-0000be60: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000be80: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
-0000be90: 7065 223a 2022 7769 7468 6472 6177 616c  pe": "withdrawal
-0000bea0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000beb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be50: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
+0000be60: 2277 6974 6864 7261 7761 6c22 2c0a 2020  "withdrawal",.  
+0000be70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be90: 2020 2020 2020 2020 2020 2020 2020 2261                "a
+0000bea0: 636c 6173 7322 3a20 2263 7572 7265 6e63  class": "currenc
+0000beb0: 7922 2c0a 2020 2020 2020 2020 2320 2020  y",.        #   
 0000bec0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bed0: 2020 2022 6163 6c61 7373 223a 2022 6375     "aclass": "cu
-0000bee0: 7272 656e 6379 222c 0a20 2020 2020 2020  rrency",.       
-0000bef0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0000bed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bee0: 2020 2020 2022 6173 7365 7422 3a20 2258       "asset": "X
+0000bef0: 4554 4822 2c0a 2020 2020 2020 2020 2320  ETH",.        # 
 0000bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf10: 2020 2020 2020 2020 2020 2261 7373 6574            "asset
-0000bf20: 223a 2022 5845 5448 222c 0a20 2020 2020  ": "XETH",.     
-0000bf30: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000bf40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf50: 2020 2020 2020 2020 2020 2022 616d 6f75             "amou
-0000bf60: 6e74 223a 2022 2d30 2e32 3830 3538 3030  nt": "-0.2805800
-0000bf70: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0000bf80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bf90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfa0: 2020 2020 2020 2020 2022 6665 6522 3a20           "fee": 
-0000bfb0: 2230 2e30 3035 3030 3030 3030 3022 2c0a  "0.0050000000",.
-0000bfc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000bfd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000bfe0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000bff0: 6261 6c61 6e63 6522 3a20 2230 2e30 3030  balance": "0.000
-0000c000: 3030 3531 3030 3022 2020 2020 2020 2020  0051000"        
-0000c010: 2020 207d 7d7d 0a20 2020 2020 2020 2072     }}}.        r
-0000c020: 6573 756c 7420 3d20 7265 7370 6f6e 7365  esult = response
-0000c030: 5b27 7265 7375 6c74 275d 0a20 2020 2020  ['result'].     
-0000c040: 2020 206b 6579 7320 3d20 6c69 7374 2872     keys = list(r
-0000c050: 6573 756c 742e 6b65 7973 2829 290a 2020  esult.keys()).  
-0000c060: 2020 2020 2020 6974 656d 7320 3d20 5b5d        items = []
-0000c070: 0a20 2020 2020 2020 2066 6f72 2069 2069  .        for i i
-0000c080: 6e20 7261 6e67 6528 302c 206c 656e 286b  n range(0, len(k
-0000c090: 6579 7329 293a 0a20 2020 2020 2020 2020  eys)):.         
-0000c0a0: 2020 206b 6579 203d 206b 6579 735b 695d     key = keys[i]
-0000c0b0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-0000c0c0: 7565 203d 2072 6573 756c 745b 6b65 795d  ue = result[key]
-0000c0d0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-0000c0e0: 7565 5b27 6964 275d 203d 206b 6579 0a20  ue['id'] = key. 
-0000c0f0: 2020 2020 2020 2020 2020 2069 7465 6d73             items
-0000c100: 2e61 7070 656e 6428 7661 6c75 6529 0a20  .append(value). 
-0000c110: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-0000c120: 6c66 2e70 6172 7365 5f6c 6564 6765 7228  lf.parse_ledger(
-0000c130: 6974 656d 7329 0a0a 2020 2020 6465 6620  items)..    def 
-0000c140: 6665 7463 685f 6c65 6467 6572 5f65 6e74  fetch_ledger_ent
-0000c150: 7279 2873 656c 662c 2069 643a 2073 7472  ry(self, id: str
-0000c160: 2c20 636f 6465 3a20 5374 7220 3d20 4e6f  , code: Str = No
-0000c170: 6e65 2c20 7061 7261 6d73 3d7b 7d29 3a0a  ne, params={}):.
-0000c180: 2020 2020 2020 2020 6974 656d 7320 3d20          items = 
-0000c190: 7365 6c66 2e66 6574 6368 5f6c 6564 6765  self.fetch_ledge
-0000c1a0: 725f 656e 7472 6965 735f 6279 5f69 6473  r_entries_by_ids
-0000c1b0: 285b 6964 5d2c 2063 6f64 652c 2070 6172  ([id], code, par
-0000c1c0: 616d 7329 0a20 2020 2020 2020 2072 6574  ams).        ret
-0000c1d0: 7572 6e20 6974 656d 735b 305d 0a0a 2020  urn items[0]..  
-0000c1e0: 2020 6465 6620 7061 7273 655f 7472 6164    def parse_trad
-0000c1f0: 6528 7365 6c66 2c20 7472 6164 652c 206d  e(self, trade, m
-0000c200: 6172 6b65 743a 204d 6172 6b65 7420 3d20  arket: Market = 
-0000c210: 4e6f 6e65 2920 2d3e 2054 7261 6465 3a0a  None) -> Trade:.
-0000c220: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000c230: 2020 2320 6665 7463 6854 7261 6465 7328    # fetchTrades(
-0000c240: 7075 626c 6963 290a 2020 2020 2020 2020  public).        
-0000c250: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-0000c260: 5b0a 2020 2020 2020 2020 2320 2020 2020  [.        #     
-0000c270: 2020 2020 2230 2e30 3332 3331 3022 2c20      "0.032310", 
-0000c280: 2023 2070 7269 6365 0a20 2020 2020 2020   # price.       
-0000c290: 2023 2020 2020 2020 2020 2022 342e 3238   #         "4.28
-0000c2a0: 3136 3934 3334 222c 2020 2320 616d 6f75  169434",  # amou
-0000c2b0: 6e74 0a20 2020 2020 2020 2023 2020 2020  nt.        #    
-0000c2c0: 2020 2020 2031 3534 3133 3930 3739 322e       1541390792.
-0000c2d0: 3736 332c 2020 2320 7469 6d65 7374 616d  763,  # timestam
-0000c2e0: 700a 2020 2020 2020 2020 2320 2020 2020  p.        #     
-0000c2f0: 2020 2020 2273 222c 2020 2320 7365 6c6c      "s",  # sell
-0000c300: 206f 7220 6275 790a 2020 2020 2020 2020   or buy.        
-0000c310: 2320 2020 2020 2020 2020 226c 222c 2020  #         "l",  
-0000c320: 2320 6c69 6d69 7420 6f72 206d 6172 6b65  # limit or marke
-0000c330: 740a 2020 2020 2020 2020 2320 2020 2020  t.        #     
-0000c340: 2020 2020 2222 0a20 2020 2020 2020 2023      "".        #
-0000c350: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-0000c360: 0a20 2020 2020 2020 2023 2066 6574 6368  .        # fetch
-0000c370: 4f72 6465 7254 7261 6465 7328 7072 6976  OrderTrades(priv
-0000c380: 6174 6529 0a20 2020 2020 2020 2023 0a20  ate).        #. 
-0000c390: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-0000c3a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000c3b0: 2022 6964 223a 2027 5449 4d49 5247 2d57   "id": 'TIMIRG-W
-0000c3c0: 554e 4e45 2d52 524a 3647 5427 2c20 2023  UNNE-RRJ6GT',  #
-0000c3d0: 2069 6e6a 6563 7465 6420 6672 6f6d 206f   injected from o
-0000c3e0: 7574 7369 6465 0a20 2020 2020 2020 2023  utside.        #
-0000c3f0: 2020 2020 2020 2020 2022 6f72 6465 7274           "ordert
-0000c400: 7869 6422 3a20 274f 5152 504e 322d 4c52  xid": 'OQRPN2-LR
-0000c410: 4846 592d 4849 4641 3744 272c 0a20 2020  HFY-HIFA7D',.   
-0000c420: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000c430: 706f 7374 7869 6422 3a20 2754 4b48 3253  postxid": 'TKH2S
-0000c440: 452d 4d37 4946 352d 4346 4937 4c54 272c  E-M7IF5-CFI7LT',
-0000c450: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000c460: 2020 2022 7061 6972 223a 2027 5553 4443     "pair": 'USDC
-0000c470: 5553 4454 272c 0a20 2020 2020 2020 2023  USDT',.        #
-0000c480: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
-0000c490: 2031 3538 3633 3430 3038 362e 3435 372c   1586340086.457,
-0000c4a0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000c4b0: 2020 2022 7479 7065 223a 2027 7365 6c6c     "type": 'sell
-0000c4c0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-0000c4d0: 2020 2020 2022 6f72 6465 7274 7970 6522       "ordertype"
-0000c4e0: 3a20 276d 6172 6b65 7427 2c0a 2020 2020  : 'market',.    
-0000c4f0: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
-0000c500: 7269 6365 223a 2027 302e 3939 3836 3030  rice": '0.998600
-0000c510: 3030 272c 0a20 2020 2020 2020 2023 2020  00',.        #  
-0000c520: 2020 2020 2020 2022 636f 7374 223a 2027         "cost": '
-0000c530: 3232 2e31 3638 3932 3030 3127 2c0a 2020  22.16892001',.  
-0000c540: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000c550: 2266 6565 223a 2027 302e 3034 3433 3337  "fee": '0.044337
-0000c560: 3834 272c 0a20 2020 2020 2020 2023 2020  84',.        #  
-0000c570: 2020 2020 2020 2022 766f 6c22 3a20 2732         "vol": '2
-0000c580: 322e 3230 3030 3030 3030 272c 0a20 2020  2.20000000',.   
-0000c590: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000c5a0: 6d61 7267 696e 223a 2027 302e 3030 3030  margin": '0.0000
-0000c5b0: 3030 3030 272c 0a20 2020 2020 2020 2023  0000',.        #
-0000c5c0: 2020 2020 2020 2020 2022 6d69 7363 223a           "misc":
-0000c5d0: 2027 270a 2020 2020 2020 2020 2320 2020   ''.        #   
-0000c5e0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0000c5f0: 2020 2020 2020 7469 6d65 7374 616d 7020        timestamp 
-0000c600: 3d20 4e6f 6e65 0a20 2020 2020 2020 2073  = None.        s
-0000c610: 6964 6520 3d20 4e6f 6e65 0a20 2020 2020  ide = None.     
-0000c620: 2020 2074 7970 6520 3d20 4e6f 6e65 0a20     type = None. 
-0000c630: 2020 2020 2020 2070 7269 6365 203d 204e         price = N
-0000c640: 6f6e 650a 2020 2020 2020 2020 616d 6f75  one.        amou
-0000c650: 6e74 203d 204e 6f6e 650a 2020 2020 2020  nt = None.      
-0000c660: 2020 6964 203d 204e 6f6e 650a 2020 2020    id = None.    
-0000c670: 2020 2020 6f72 6465 7249 6420 3d20 4e6f      orderId = No
-0000c680: 6e65 0a20 2020 2020 2020 2066 6565 203d  ne.        fee =
-0000c690: 204e 6f6e 650a 2020 2020 2020 2020 7379   None.        sy
-0000c6a0: 6d62 6f6c 203d 204e 6f6e 650a 2020 2020  mbol = None.    
-0000c6b0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000c6c0: 6528 7472 6164 652c 206c 6973 7429 3a0a  e(trade, list):.
-0000c6d0: 2020 2020 2020 2020 2020 2020 7469 6d65              time
-0000c6e0: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-0000c6f0: 655f 7469 6d65 7374 616d 7028 7472 6164  e_timestamp(trad
-0000c700: 652c 2032 290a 2020 2020 2020 2020 2020  e, 2).          
-0000c710: 2020 7369 6465 203d 2027 7365 6c6c 2720    side = 'sell' 
-0000c720: 6966 2028 7472 6164 655b 335d 203d 3d20  if (trade[3] == 
-0000c730: 2773 2729 2065 6c73 6520 2762 7579 270a  's') else 'buy'.
-0000c740: 2020 2020 2020 2020 2020 2020 7479 7065              type
-0000c750: 203d 2027 6c69 6d69 7427 2069 6620 2874   = 'limit' if (t
-0000c760: 7261 6465 5b34 5d20 3d3d 2027 6c27 2920  rade[4] == 'l') 
-0000c770: 656c 7365 2027 6d61 726b 6574 270a 2020  else 'market'.  
-0000c780: 2020 2020 2020 2020 2020 7072 6963 6520            price 
-0000c790: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0000c7a0: 6e67 2874 7261 6465 2c20 3029 0a20 2020  ng(trade, 0).   
-0000c7b0: 2020 2020 2020 2020 2061 6d6f 756e 7420           amount 
-0000c7c0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0000c7d0: 6e67 2874 7261 6465 2c20 3129 0a20 2020  ng(trade, 1).   
-0000c7e0: 2020 2020 2020 2020 2074 7261 6465 4c65           tradeLe
-0000c7f0: 6e67 7468 203d 206c 656e 2874 7261 6465  ngth = len(trade
-0000c800: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000c810: 2074 7261 6465 4c65 6e67 7468 203e 2036   tradeLength > 6
-0000c820: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000c830: 2020 6964 203d 2073 656c 662e 7361 6665    id = self.safe
-0000c840: 5f73 7472 696e 6728 7472 6164 652c 2036  _string(trade, 6
-0000c850: 2920 2023 2061 7274 6966 6963 6961 6c6c  )  # artificiall
-0000c860: 7920 6164 6465 6420 2023 3137 3934 0a20  y added  #1794. 
-0000c870: 2020 2020 2020 2065 6c69 6620 6973 696e         elif isin
-0000c880: 7374 616e 6365 2874 7261 6465 2c20 7374  stance(trade, st
-0000c890: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0000c8a0: 6964 203d 2074 7261 6465 0a20 2020 2020  id = trade.     
-0000c8b0: 2020 2065 6c69 6620 276f 7264 6572 7478     elif 'ordertx
-0000c8c0: 6964 2720 696e 2074 7261 6465 3a0a 2020  id' in trade:.  
-0000c8d0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-0000c8e0: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
-0000c8f0: 7472 696e 6728 7472 6164 652c 2027 7061  tring(trade, 'pa
-0000c900: 6972 2729 0a20 2020 2020 2020 2020 2020  ir').           
-0000c910: 2066 6f75 6e64 4d61 726b 6574 203d 2073   foundMarket = s
-0000c920: 656c 662e 6669 6e64 5f6d 6172 6b65 745f  elf.find_market_
-0000c930: 6279 5f61 6c74 6e61 6d65 5f6f 725f 6964  by_altname_or_id
-0000c940: 286d 6172 6b65 7449 6429 0a20 2020 2020  (marketId).     
-0000c950: 2020 2020 2020 2069 6620 666f 756e 644d         if foundM
-0000c960: 6172 6b65 7420 6973 206e 6f74 204e 6f6e  arket is not Non
-0000c970: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000c980: 2020 206d 6172 6b65 7420 3d20 666f 756e     market = foun
-0000c990: 644d 6172 6b65 740a 2020 2020 2020 2020  dMarket.        
-0000c9a0: 2020 2020 656c 6966 206d 6172 6b65 7449      elif marketI
-0000c9b0: 6420 6973 206e 6f74 204e 6f6e 653a 0a20  d is not None:. 
-0000c9c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000c9d0: 2064 656c 6973 7465 6420 6d61 726b 6574   delisted market
-0000c9e0: 2069 6473 2067 6f20 6865 7265 0a20 2020   ids go here.   
-0000c9f0: 2020 2020 2020 2020 2020 2020 206d 6172               mar
-0000ca00: 6b65 7420 3d20 7365 6c66 2e67 6574 5f64  ket = self.get_d
-0000ca10: 656c 6973 7465 645f 6d61 726b 6574 5f62  elisted_market_b
-0000ca20: 795f 6964 286d 6172 6b65 7449 6429 0a20  y_id(marketId). 
-0000ca30: 2020 2020 2020 2020 2020 206f 7264 6572             order
-0000ca40: 4964 203d 2073 656c 662e 7361 6665 5f73  Id = self.safe_s
-0000ca50: 7472 696e 6728 7472 6164 652c 2027 6f72  tring(trade, 'or
-0000ca60: 6465 7274 7869 6427 290a 2020 2020 2020  dertxid').      
-0000ca70: 2020 2020 2020 6964 203d 2073 656c 662e        id = self.
-0000ca80: 7361 6665 5f73 7472 696e 675f 3228 7472  safe_string_2(tr
-0000ca90: 6164 652c 2027 6964 272c 2027 706f 7374  ade, 'id', 'post
-0000caa0: 7869 6427 290a 2020 2020 2020 2020 2020  xid').          
-0000cab0: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
-0000cac0: 6c66 2e73 6166 655f 7469 6d65 7374 616d  lf.safe_timestam
-0000cad0: 7028 7472 6164 652c 2027 7469 6d65 2729  p(trade, 'time')
-0000cae0: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
-0000caf0: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
-0000cb00: 7269 6e67 2874 7261 6465 2c20 2774 7970  ring(trade, 'typ
-0000cb10: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
-0000cb20: 7479 7065 203d 2073 656c 662e 7361 6665  type = self.safe
-0000cb30: 5f73 7472 696e 6728 7472 6164 652c 2027  _string(trade, '
-0000cb40: 6f72 6465 7274 7970 6527 290a 2020 2020  ordertype').    
-0000cb50: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
-0000cb60: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0000cb70: 2874 7261 6465 2c20 2770 7269 6365 2729  (trade, 'price')
-0000cb80: 0a20 2020 2020 2020 2020 2020 2061 6d6f  .            amo
-0000cb90: 756e 7420 3d20 7365 6c66 2e73 6166 655f  unt = self.safe_
-0000cba0: 7374 7269 6e67 2874 7261 6465 2c20 2776  string(trade, 'v
-0000cbb0: 6f6c 2729 0a20 2020 2020 2020 2020 2020  ol').           
-0000cbc0: 2069 6620 2766 6565 2720 696e 2074 7261   if 'fee' in tra
-0000cbd0: 6465 3a0a 2020 2020 2020 2020 2020 2020  de:.            
-0000cbe0: 2020 2020 6375 7272 656e 6379 203d 204e      currency = N
-0000cbf0: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
-0000cc00: 2020 2020 6966 206d 6172 6b65 7420 6973      if market is
-0000cc10: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
-0000cc20: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0000cc30: 7572 7265 6e63 7920 3d20 6d61 726b 6574  urrency = market
-0000cc40: 5b27 7175 6f74 6527 5d0a 2020 2020 2020  ['quote'].      
-0000cc50: 2020 2020 2020 2020 2020 6665 6520 3d20            fee = 
-0000cc60: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
-0000cc70: 2020 2020 2020 2763 6f73 7427 3a20 7365        'cost': se
-0000cc80: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-0000cc90: 7261 6465 2c20 2766 6565 2729 2c0a 2020  rade, 'fee'),.  
-0000cca0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ccb0: 2020 2763 7572 7265 6e63 7927 3a20 6375    'currency': cu
-0000ccc0: 7272 656e 6379 2c0a 2020 2020 2020 2020  rrency,.        
-0000ccd0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000cce0: 2020 6966 206d 6172 6b65 7420 6973 206e    if market is n
-0000ccf0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000cd00: 2020 2020 2073 796d 626f 6c20 3d20 6d61       symbol = ma
-0000cd10: 726b 6574 5b27 7379 6d62 6f6c 275d 0a20  rket['symbol']. 
-0000cd20: 2020 2020 2020 2063 6f73 7420 3d20 7365         cost = se
-0000cd30: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-0000cd40: 7261 6465 2c20 2763 6f73 7427 290a 2020  rade, 'cost').  
-0000cd50: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-0000cd60: 662e 7361 6665 5f74 7261 6465 287b 0a20  f.safe_trade({. 
-0000cd70: 2020 2020 2020 2020 2020 2027 6964 273a             'id':
-0000cd80: 2069 642c 0a20 2020 2020 2020 2020 2020   id,.           
-0000cd90: 2027 6f72 6465 7227 3a20 6f72 6465 7249   'order': orderI
-0000cda0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
-0000cdb0: 696e 666f 273a 2074 7261 6465 2c0a 2020  info': trade,.  
-0000cdc0: 2020 2020 2020 2020 2020 2774 696d 6573            'times
-0000cdd0: 7461 6d70 273a 2074 696d 6573 7461 6d70  tamp': timestamp
-0000cde0: 2c0a 2020 2020 2020 2020 2020 2020 2764  ,.            'd
-0000cdf0: 6174 6574 696d 6527 3a20 7365 6c66 2e69  atetime': self.i
-0000ce00: 736f 3836 3031 2874 696d 6573 7461 6d70  so8601(timestamp
-0000ce10: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-0000ce20: 7379 6d62 6f6c 273a 2073 796d 626f 6c2c  symbol': symbol,
-0000ce30: 0a20 2020 2020 2020 2020 2020 2027 7479  .            'ty
-0000ce40: 7065 273a 2074 7970 652c 0a20 2020 2020  pe': type,.     
-0000ce50: 2020 2020 2020 2027 7369 6465 273a 2073         'side': s
-0000ce60: 6964 652c 0a20 2020 2020 2020 2020 2020  ide,.           
-0000ce70: 2027 7461 6b65 724f 724d 616b 6572 273a   'takerOrMaker':
-0000ce80: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
-0000ce90: 2020 2027 7072 6963 6527 3a20 7072 6963     'price': pric
-0000cea0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0000ceb0: 616d 6f75 6e74 273a 2061 6d6f 756e 742c  amount': amount,
-0000cec0: 0a20 2020 2020 2020 2020 2020 2027 636f  .            'co
-0000ced0: 7374 273a 2063 6f73 742c 0a20 2020 2020  st': cost,.     
-0000cee0: 2020 2020 2020 2027 6665 6527 3a20 6665         'fee': fe
-0000cef0: 652c 0a20 2020 2020 2020 207d 2c20 6d61  e,.        }, ma
-0000cf00: 726b 6574 290a 0a20 2020 2064 6566 2066  rket)..    def f
-0000cf10: 6574 6368 5f74 7261 6465 7328 7365 6c66  etch_trades(self
-0000cf20: 2c20 7379 6d62 6f6c 3a20 7374 722c 2073  , symbol: str, s
-0000cf30: 696e 6365 3a20 496e 7420 3d20 4e6f 6e65  ince: Int = None
-0000cf40: 2c20 6c69 6d69 743a 2049 6e74 203d 204e  , limit: Int = N
-0000cf50: 6f6e 652c 2070 6172 616d 733d 7b7d 2920  one, params={}) 
-0000cf60: 2d3e 204c 6973 745b 5472 6164 655d 3a0a  -> List[Trade]:.
-0000cf70: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000cf80: 2020 2020 6765 7420 7468 6520 6c69 7374      get the list
-0000cf90: 206f 6620 6d6f 7374 2072 6563 656e 7420   of most recent 
-0000cfa0: 7472 6164 6573 2066 6f72 2061 2070 6172  trades for a par
-0000cfb0: 7469 6375 6c61 7220 7379 6d62 6f6c 0a20  ticular symbol. 
-0000cfc0: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-0000cfd0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-0000cfe0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f53  .com/rest/#tag/S
-0000cff0: 706f 742d 4d61 726b 6574 2d44 6174 612f  pot-Market-Data/
-0000d000: 6f70 6572 6174 696f 6e2f 6765 7452 6563  operation/getRec
-0000d010: 656e 7454 7261 6465 730a 2020 2020 2020  entTrades.      
-0000d020: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-0000d030: 626f 6c3a 2075 6e69 6669 6564 2073 796d  bol: unified sym
-0000d040: 626f 6c20 6f66 2074 6865 206d 6172 6b65  bol of the marke
-0000d050: 7420 746f 2066 6574 6368 2074 7261 6465  t to fetch trade
-0000d060: 7320 666f 720a 2020 2020 2020 2020 3a70  s for.        :p
-0000d070: 6172 616d 2069 6e74 205b 7369 6e63 655d  aram int [since]
-0000d080: 3a20 7469 6d65 7374 616d 7020 696e 206d  : timestamp in m
-0000d090: 7320 6f66 2074 6865 2065 6172 6c69 6573  s of the earlies
-0000d0a0: 7420 7472 6164 6520 746f 2066 6574 6368  t trade to fetch
-0000d0b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000d0c0: 696e 7420 5b6c 696d 6974 5d3a 2074 6865  int [limit]: the
-0000d0d0: 206d 6178 696d 756d 2061 6d6f 756e 7420   maximum amount 
-0000d0e0: 6f66 2074 7261 6465 7320 746f 2066 6574  of trades to fet
-0000d0f0: 6368 0a20 2020 2020 2020 203a 7061 7261  ch.        :para
-0000d100: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
-0000d110: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0000d120: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0000d130: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
-0000d140: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-0000d150: 3a72 6574 7572 6e73 2054 7261 6465 5b5d  :returns Trade[]
-0000d160: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-0000d170: 6465 2073 7472 7563 7475 7265 7320 3c68  de structures <h
-0000d180: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-0000d190: 2e63 6f6d 2f23 2f3f 6964 3d70 7562 6c69  .com/#/?id=publi
-0000d1a0: 632d 7472 6164 6573 3e60 0a20 2020 2020  c-trades>`.     
-0000d1b0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
-0000d1c0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
-0000d1d0: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
-0000d1e0: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
-0000d1f0: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
-0000d200: 6964 203d 206d 6172 6b65 745b 2769 6427  id = market['id'
-0000d210: 5d0a 2020 2020 2020 2020 7265 7175 6573  ].        reques
-0000d220: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-0000d230: 2020 2770 6169 7227 3a20 6964 2c0a 2020    'pair': id,.  
-0000d240: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0000d250: 2320 6874 7470 733a 2f2f 7375 7070 6f72  # https://suppor
-0000d260: 742e 6b72 616b 656e 2e63 6f6d 2f68 632f  t.kraken.com/hc/
-0000d270: 656e 2d75 732f 6172 7469 636c 6573 2f32  en-us/articles/2
-0000d280: 3138 3139 3831 3937 2d48 6f77 2d74 6f2d  18198197-How-to-
-0000d290: 7075 6c6c 2d61 6c6c 2d74 7261 6465 2d64  pull-all-trade-d
-0000d2a0: 6174 612d 7573 696e 672d 7468 652d 4b72  ata-using-the-Kr
-0000d2b0: 616b 656e 2d52 4553 542d 4150 490a 2020  aken-REST-API.  
-0000d2c0: 2020 2020 2020 2320 6874 7470 733a 2f2f        # https://
-0000d2d0: 6769 7468 7562 2e63 6f6d 2f63 6378 742f  github.com/ccxt/
-0000d2e0: 6363 7874 2f69 7373 7565 732f 3536 3737  ccxt/issues/5677
-0000d2f0: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
-0000d300: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
-0000d310: 2020 2020 2020 2020 2020 2023 2070 6870             # php
-0000d320: 2064 6f65 7320 6e6f 7420 666f 726d 6174   does not format
-0000d330: 2069 7420 7072 6f70 6572 6c79 0a20 2020   it properly.   
-0000d340: 2020 2020 2020 2020 2023 2074 6865 7265           # there
-0000d350: 666f 7265 2077 6520 7573 6520 7374 7269  fore we use stri
-0000d360: 6e67 2063 6f6e 6361 7465 6e61 7469 6f6e  ng concatenation
-0000d370: 2068 6572 650a 2020 2020 2020 2020 2020   here.          
-0000d380: 2020 7265 7175 6573 745b 2773 696e 6365    request['since
-0000d390: 275d 203d 2073 696e 6365 202a 2031 6536  '] = since * 1e6
-0000d3a0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-0000d3b0: 7565 7374 5b27 7369 6e63 6527 5d20 3d20  uest['since'] = 
-0000d3c0: 7374 7228 7369 6e63 6529 202b 2027 3030  str(since) + '00
-0000d3d0: 3030 3030 2720 2023 2065 7870 6563 7465  0000'  # expecte
-0000d3e0: 6420 746f 2062 6520 696e 206e 616e 6f73  d to be in nanos
-0000d3f0: 6563 6f6e 6473 0a20 2020 2020 2020 2069  econds.        i
-0000d400: 6620 6c69 6d69 7420 6973 206e 6f74 204e  f limit is not N
-0000d410: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000d420: 2072 6571 7565 7374 5b27 636f 756e 7427   request['count'
-0000d430: 5d20 3d20 6c69 6d69 740a 2020 2020 2020  ] = limit.      
-0000d440: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-0000d450: 662e 7075 626c 6963 4765 7454 7261 6465  f.publicGetTrade
-0000d460: 7328 7365 6c66 2e65 7874 656e 6428 7265  s(self.extend(re
-0000d470: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
-0000d480: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000d490: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-0000d4a0: 2020 2320 2020 2020 2020 2020 2265 7272    #         "err
-0000d4b0: 6f72 223a 205b 5d2c 0a20 2020 2020 2020  or": [],.       
-0000d4c0: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-0000d4d0: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
-0000d4e0: 2020 2020 2020 2020 2020 2020 2022 5845               "XE
-0000d4f0: 5448 5858 4254 223a 205b 0a20 2020 2020  THXXBT": [.     
-0000d500: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000d510: 2020 2020 205b 2230 2e30 3332 3331 3022       ["0.032310"
-0000d520: 2c22 342e 3238 3136 3934 3334 222c 3135  ,"4.28169434",15
-0000d530: 3431 3339 3037 3932 2e37 3633 2c22 7322  41390792.763,"s"
-0000d540: 2c22 6c22 2c22 225d 0a20 2020 2020 2020  ,"l",""].       
-0000d550: 2023 2020 2020 2020 2020 2020 2020 205d   #             ]
-0000d560: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000d570: 2020 2020 2020 2020 226c 6173 7422 3a20          "last": 
-0000d580: 2231 3534 3134 3339 3432 3132 3030 3637  "154143942120067
-0000d590: 3836 3537 220a 2020 2020 2020 2020 2320  8657".        # 
-0000d5a0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-0000d5b0: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-0000d5c0: 2020 230a 2020 2020 2020 2020 7265 7375    #.        resu
-0000d5d0: 6c74 203d 2072 6573 706f 6e73 655b 2772  lt = response['r
-0000d5e0: 6573 756c 7427 5d0a 2020 2020 2020 2020  esult'].        
-0000d5f0: 7472 6164 6573 203d 2072 6573 756c 745b  trades = result[
-0000d600: 6964 5d0a 2020 2020 2020 2020 2320 7472  id].        # tr
-0000d610: 6164 6573 2069 7320 6120 736f 7274 6564  ades is a sorted
-0000d620: 2061 7272 6179 3a20 6c61 7374 286d 6f73   array: last(mos
-0000d630: 7420 7265 6365 6e74 2074 7261 6465 2920  t recent trade) 
-0000d640: 676f 6573 206c 6173 740a 2020 2020 2020  goes last.      
-0000d650: 2020 6c65 6e67 7468 203d 206c 656e 2874    length = len(t
-0000d660: 7261 6465 7329 0a20 2020 2020 2020 2069  rades).        i
-0000d670: 6620 6c65 6e67 7468 203c 3d20 303a 0a20  f length <= 0:. 
-0000d680: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000d690: 6e20 5b5d 0a20 2020 2020 2020 206c 6173  n [].        las
-0000d6a0: 7454 7261 6465 203d 2074 7261 6465 735b  tTrade = trades[
-0000d6b0: 6c65 6e67 7468 202d 2031 5d0a 2020 2020  length - 1].    
-0000d6c0: 2020 2020 6c61 7374 5472 6164 6549 6420      lastTradeId 
-0000d6d0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0000d6e0: 6e67 2872 6573 756c 742c 2027 6c61 7374  ng(result, 'last
-0000d6f0: 2729 0a20 2020 2020 2020 206c 6173 7454  ').        lastT
-0000d700: 7261 6465 2e61 7070 656e 6428 6c61 7374  rade.append(last
-0000d710: 5472 6164 6549 6429 0a20 2020 2020 2020  TradeId).       
-0000d720: 2074 7261 6465 735b 6c65 6e67 7468 202d   trades[length -
-0000d730: 2031 5d20 3d20 6c61 7374 5472 6164 650a   1] = lastTrade.
-0000d740: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000d750: 656c 662e 7061 7273 655f 7472 6164 6573  elf.parse_trades
-0000d760: 2874 7261 6465 732c 206d 6172 6b65 742c  (trades, market,
-0000d770: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-0000d780: 2020 2020 6465 6620 7061 7273 655f 6261      def parse_ba
-0000d790: 6c61 6e63 6528 7365 6c66 2c20 7265 7370  lance(self, resp
-0000d7a0: 6f6e 7365 2920 2d3e 2042 616c 616e 6365  onse) -> Balance
-0000d7b0: 733a 0a20 2020 2020 2020 2062 616c 616e  s:.        balan
-0000d7c0: 6365 7320 3d20 7365 6c66 2e73 6166 655f  ces = self.safe_
-0000d7d0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-0000d7e0: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
-0000d7f0: 2020 2020 2020 7265 7375 6c74 203d 207b        result = {
-0000d800: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
-0000d810: 666f 273a 2072 6573 706f 6e73 652c 0a20  fo': response,. 
-0000d820: 2020 2020 2020 2020 2020 2027 7469 6d65             'time
-0000d830: 7374 616d 7027 3a20 4e6f 6e65 2c0a 2020  stamp': None,.  
-0000d840: 2020 2020 2020 2020 2020 2764 6174 6574            'datet
-0000d850: 696d 6527 3a20 4e6f 6e65 2c0a 2020 2020  ime': None,.    
-0000d860: 2020 2020 7d0a 2020 2020 2020 2020 6375      }.        cu
-0000d870: 7272 656e 6379 4964 7320 3d20 6c69 7374  rrencyIds = list
-0000d880: 2862 616c 616e 6365 732e 6b65 7973 2829  (balances.keys()
-0000d890: 290a 2020 2020 2020 2020 666f 7220 6920  ).        for i 
-0000d8a0: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
-0000d8b0: 6375 7272 656e 6379 4964 7329 293a 0a20  currencyIds)):. 
-0000d8c0: 2020 2020 2020 2020 2020 2063 7572 7265             curre
-0000d8d0: 6e63 7949 6420 3d20 6375 7272 656e 6379  ncyId = currency
-0000d8e0: 4964 735b 695d 0a20 2020 2020 2020 2020  Ids[i].         
-0000d8f0: 2020 2063 6f64 6520 3d20 7365 6c66 2e73     code = self.s
-0000d900: 6166 655f 6375 7272 656e 6379 5f63 6f64  afe_currency_cod
-0000d910: 6528 6375 7272 656e 6379 4964 290a 2020  e(currencyId).  
-0000d920: 2020 2020 2020 2020 2020 6261 6c61 6e63            balanc
-0000d930: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
-0000d940: 6c75 6528 6261 6c61 6e63 6573 2c20 6375  lue(balances, cu
-0000d950: 7272 656e 6379 4964 2c20 7b7d 290a 2020  rrencyId, {}).  
-0000d960: 2020 2020 2020 2020 2020 6163 636f 756e            accoun
-0000d970: 7420 3d20 7365 6c66 2e61 6363 6f75 6e74  t = self.account
-0000d980: 2829 0a20 2020 2020 2020 2020 2020 2061  ().            a
-0000d990: 6363 6f75 6e74 5b27 7573 6564 275d 203d  ccount['used'] =
-0000d9a0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-0000d9b0: 6728 6261 6c61 6e63 652c 2027 686f 6c64  g(balance, 'hold
-0000d9c0: 5f74 7261 6465 2729 0a20 2020 2020 2020  _trade').       
-0000d9d0: 2020 2020 2061 6363 6f75 6e74 5b27 746f       account['to
-0000d9e0: 7461 6c27 5d20 3d20 7365 6c66 2e73 6166  tal'] = self.saf
-0000d9f0: 655f 7374 7269 6e67 2862 616c 616e 6365  e_string(balance
-0000da00: 2c20 2762 616c 616e 6365 2729 0a20 2020  , 'balance').   
-0000da10: 2020 2020 2020 2020 2072 6573 756c 745b           result[
-0000da20: 636f 6465 5d20 3d20 6163 636f 756e 740a  code] = account.
-0000da30: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000da40: 656c 662e 7361 6665 5f62 616c 616e 6365  elf.safe_balance
-0000da50: 2872 6573 756c 7429 0a0a 2020 2020 6465  (result)..    de
-0000da60: 6620 6665 7463 685f 6261 6c61 6e63 6528  f fetch_balance(
-0000da70: 7365 6c66 2c20 7061 7261 6d73 3d7b 7d29  self, params={})
-0000da80: 202d 3e20 4261 6c61 6e63 6573 3a0a 2020   -> Balances:.  
-0000da90: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-0000daa0: 2020 7175 6572 7920 666f 7220 6261 6c61    query for bala
-0000dab0: 6e63 6520 616e 6420 6765 7420 7468 6520  nce and get the 
-0000dac0: 616d 6f75 6e74 206f 6620 6675 6e64 7320  amount of funds 
-0000dad0: 6176 6169 6c61 626c 6520 666f 7220 7472  available for tr
-0000dae0: 6164 696e 6720 6f72 2066 756e 6473 206c  ading or funds l
-0000daf0: 6f63 6b65 6420 696e 206f 7264 6572 730a  ocked in orders.
-0000db00: 2020 2020 2020 2020 3a73 6565 3a20 6874          :see: ht
-0000db10: 7470 733a 2f2f 646f 6373 2e6b 7261 6b65  tps://docs.krake
-0000db20: 6e2e 636f 6d2f 7265 7374 2f23 7461 672f  n.com/rest/#tag/
-0000db30: 4163 636f 756e 742d 4461 7461 2f6f 7065  Account-Data/ope
-0000db40: 7261 7469 6f6e 2f67 6574 4578 7465 6e64  ration/getExtend
-0000db50: 6564 4261 6c61 6e63 650a 2020 2020 2020  edBalance.      
-0000db60: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
-0000db70: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
-0000db80: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-0000db90: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
-0000dba0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
-0000dbb0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-0000dbc0: 6469 6374 3a20 6120 6062 616c 616e 6365  dict: a `balance
-0000dbd0: 2073 7472 7563 7475 7265 203c 6874 7470   structure <http
-0000dbe0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
-0000dbf0: 6d2f 232f 3f69 643d 6261 6c61 6e63 652d  m/#/?id=balance-
-0000dc00: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-0000dc10: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-0000dc20: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-0000dc30: 7328 290a 2020 2020 2020 2020 7265 7370  s().        resp
-0000dc40: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-0000dc50: 6174 6550 6f73 7442 616c 616e 6365 4578  atePostBalanceEx
-0000dc60: 2870 6172 616d 7329 0a20 2020 2020 2020  (params).       
-0000dc70: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-0000dc80: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0000dc90: 2020 2020 2022 6572 726f 7222 3a20 5b5d       "error": []
-0000dca0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000dcb0: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
-0000dcc0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000dcd0: 2020 2020 2020 225a 5553 4422 3a20 7b0a        "ZUSD": {.
-0000dce0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000dcf0: 2020 2020 2020 2020 2020 2262 616c 616e            "balan
-0000dd00: 6365 223a 2032 3534 3335 2e32 312c 0a20  ce": 25435.21,. 
-0000dd10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000dd20: 2020 2020 2020 2020 2022 686f 6c64 5f74           "hold_t
-0000dd30: 7261 6465 223a 2038 3234 392e 3736 0a20  rade": 8249.76. 
-0000dd40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000dd50: 2020 2020 207d 2c0a 2020 2020 2020 2020       },.        
-0000dd60: 2320 2020 2020 2020 2020 2020 2020 2258  #             "X
-0000dd70: 5842 5422 3a20 7b0a 2020 2020 2020 2020  XBT": {.        
-0000dd80: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000dd90: 2020 2262 616c 616e 6365 223a 2031 2e32    "balance": 1.2
-0000dda0: 3433 352c 0a20 2020 2020 2020 2023 2020  435,.        #  
-0000ddb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000ddc0: 686f 6c64 5f74 7261 6465 223a 2030 2e38  hold_trade": 0.8
-0000ddd0: 3432 330a 2020 2020 2020 2020 2320 2020  423.        #   
-0000dde0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0000ddf0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-0000de00: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0000de10: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000de20: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-0000de30: 7273 655f 6261 6c61 6e63 6528 7265 7370  rse_balance(resp
-0000de40: 6f6e 7365 290a 0a20 2020 2064 6566 2063  onse)..    def c
-0000de50: 7265 6174 655f 6f72 6465 7228 7365 6c66  reate_order(self
-0000de60: 2c20 7379 6d62 6f6c 3a20 7374 722c 2074  , symbol: str, t
-0000de70: 7970 653a 204f 7264 6572 5479 7065 2c20  ype: OrderType, 
-0000de80: 7369 6465 3a20 4f72 6465 7253 6964 652c  side: OrderSide,
-0000de90: 2061 6d6f 756e 743a 2066 6c6f 6174 2c20   amount: float, 
-0000dea0: 7072 6963 653a 204e 756d 203d 204e 6f6e  price: Num = Non
-0000deb0: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0000dec0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0000ded0: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
-0000dee0: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
-0000def0: 2f72 6573 742f 2374 6167 2f54 7261 6469  /rest/#tag/Tradi
-0000df00: 6e67 2f6f 7065 7261 7469 6f6e 2f61 6464  ng/operation/add
-0000df10: 4f72 6465 720a 2020 2020 2020 2020 6372  Order.        cr
-0000df20: 6561 7465 2061 2074 7261 6465 206f 7264  eate a trade ord
-0000df30: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
-0000df40: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-0000df50: 6966 6965 6420 7379 6d62 6f6c 206f 6620  ified symbol of 
-0000df60: 7468 6520 6d61 726b 6574 2074 6f20 6372  the market to cr
-0000df70: 6561 7465 2061 6e20 6f72 6465 7220 696e  eate an order in
-0000df80: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0000df90: 7374 7220 7479 7065 3a20 276d 6172 6b65  str type: 'marke
-0000dfa0: 7427 206f 7220 276c 696d 6974 270a 2020  t' or 'limit'.  
-0000dfb0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-0000dfc0: 2073 6964 653a 2027 6275 7927 206f 7220   side: 'buy' or 
-0000dfd0: 2773 656c 6c27 0a20 2020 2020 2020 203a  'sell'.        :
-0000dfe0: 7061 7261 6d20 666c 6f61 7420 616d 6f75  param float amou
-0000dff0: 6e74 3a20 686f 7720 6d75 6368 206f 6620  nt: how much of 
-0000e000: 6375 7272 656e 6379 2079 6f75 2077 616e  currency you wan
-0000e010: 7420 746f 2074 7261 6465 2069 6e20 756e  t to trade in un
-0000e020: 6974 7320 6f66 2062 6173 6520 6375 7272  its of base curr
-0000e030: 656e 6379 0a20 2020 2020 2020 203a 7061  ency.        :pa
-0000e040: 7261 6d20 666c 6f61 7420 5b70 7269 6365  ram float [price
-0000e050: 5d3a 2074 6865 2070 7269 6365 2061 7420  ]: the price at 
-0000e060: 7768 6963 6820 7468 6520 6f72 6465 7220  which the order 
-0000e070: 6973 2074 6f20 6265 2066 756c 6c66 696c  is to be fullfil
-0000e080: 6c65 642c 2069 6e20 756e 6974 7320 6f66  led, in units of
-0000e090: 2074 6865 2071 756f 7465 2063 7572 7265   the quote curre
-0000e0a0: 6e63 792c 2069 676e 6f72 6564 2069 6e20  ncy, ignored in 
-0000e0b0: 6d61 726b 6574 206f 7264 6572 730a 2020  market orders.  
-0000e0c0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-0000e0d0: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
-0000e0e0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-0000e0f0: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
-0000e100: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
-0000e110: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0000e120: 6d20 626f 6f6c 205b 7061 7261 6d73 2e70  m bool [params.p
-0000e130: 6f73 744f 6e6c 795d 3a20 6966 2054 7275  ostOnly]: if Tru
-0000e140: 652c 2074 6865 206f 7264 6572 2077 696c  e, the order wil
-0000e150: 6c20 6f6e 6c79 2062 6520 706f 7374 6564  l only be posted
-0000e160: 2074 6f20 7468 6520 6f72 6465 7220 626f   to the order bo
-0000e170: 6f6b 2061 6e64 206e 6f74 2065 7865 6375  ok and not execu
-0000e180: 7465 6420 696d 6d65 6469 6174 656c 790a  ted immediately.
-0000e190: 2020 2020 2020 2020 3a70 6172 616d 2062          :param b
-0000e1a0: 6f6f 6c20 5b70 6172 616d 732e 7265 6475  ool [params.redu
-0000e1b0: 6365 4f6e 6c79 5d3a 202a 6d61 7267 696e  ceOnly]: *margin
-0000e1c0: 206f 6e6c 792a 2069 6e64 6963 6174 6573   only* indicates
-0000e1d0: 2069 6620 7365 6c66 206f 7264 6572 2069   if self order i
-0000e1e0: 7320 746f 2072 6564 7563 6520 7468 6520  s to reduce the 
-0000e1f0: 7369 7a65 206f 6620 6120 706f 7369 7469  size of a positi
-0000e200: 6f6e 0a20 2020 2020 2020 203a 7061 7261  on.        :para
-0000e210: 6d20 666c 6f61 7420 5b70 6172 616d 732e  m float [params.
-0000e220: 7374 6f70 4c6f 7373 5072 6963 655d 3a20  stopLossPrice]: 
-0000e230: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 7468  *margin only* th
-0000e240: 6520 7072 6963 6520 7468 6174 2061 2073  e price that a s
-0000e250: 746f 7020 6c6f 7373 206f 7264 6572 2069  top loss order i
-0000e260: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
-0000e270: 2020 2020 2020 203a 7061 7261 6d20 666c         :param fl
-0000e280: 6f61 7420 5b70 6172 616d 732e 7461 6b65  oat [params.take
-0000e290: 5072 6f66 6974 5072 6963 655d 3a20 2a6d  ProfitPrice]: *m
-0000e2a0: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
-0000e2b0: 7072 6963 6520 7468 6174 2061 2074 616b  price that a tak
-0000e2c0: 6520 7072 6f66 6974 206f 7264 6572 2069  e profit order i
-0000e2d0: 7320 7472 6967 6765 7265 6420 6174 0a20  s triggered at. 
-0000e2e0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-0000e2f0: 7220 5b70 6172 616d 732e 7472 6169 6c69  r [params.traili
-0000e300: 6e67 416d 6f75 6e74 5d3a 202a 6d61 7267  ngAmount]: *marg
-0000e310: 696e 206f 6e6c 792a 2074 6865 2071 756f  in only* the quo
-0000e320: 7465 2061 6d6f 756e 7420 746f 2074 7261  te amount to tra
-0000e330: 696c 2061 7761 7920 6672 6f6d 2074 6865  il away from the
-0000e340: 2063 7572 7265 6e74 206d 6172 6b65 7420   current market 
-0000e350: 7072 6963 650a 2020 2020 2020 2020 3a70  price.        :p
-0000e360: 6172 616d 2073 7472 205b 7061 7261 6d73  aram str [params
-0000e370: 2e74 7261 696c 696e 674c 696d 6974 416d  .trailingLimitAm
-0000e380: 6f75 6e74 5d3a 202a 6d61 7267 696e 206f  ount]: *margin o
-0000e390: 6e6c 792a 2074 6865 2071 756f 7465 2061  nly* the quote a
-0000e3a0: 6d6f 756e 7420 6177 6179 2066 726f 6d20  mount away from 
-0000e3b0: 7468 6520 7472 6169 6c69 6e67 416d 6f75  the trailingAmou
-0000e3c0: 6e74 0a20 2020 2020 2020 203a 7061 7261  nt.        :para
-0000e3d0: 6d20 7374 7220 5b70 6172 616d 732e 6f66  m str [params.of
-0000e3e0: 6673 6574 5d3a 202a 6d61 7267 696e 206f  fset]: *margin o
-0000e3f0: 6e6c 792a 2027 2b27 206f 7220 272d 2720  nly* '+' or '-' 
-0000e400: 7768 6574 6865 7220 796f 7520 7761 6e74  whether you want
-0000e410: 2074 6865 2074 7261 696c 696e 674c 696d   the trailingLim
-0000e420: 6974 416d 6f75 6e74 2076 616c 7565 2074  itAmount value t
-0000e430: 6f20 6265 2070 6f73 6974 6976 6520 6f72  o be positive or
-0000e440: 206e 6567 6174 6976 652c 2064 6566 6175   negative, defau
-0000e450: 6c74 2069 7320 6e65 6761 7469 7665 2027  lt is negative '
-0000e460: 2d27 0a20 2020 2020 2020 203a 7061 7261  -'.        :para
-0000e470: 6d20 7374 7220 5b70 6172 616d 732e 7472  m str [params.tr
-0000e480: 6967 6765 725d 3a20 2a6d 6172 6769 6e20  igger]: *margin 
-0000e490: 6f6e 6c79 2a20 7468 6520 6163 7469 7661  only* the activa
-0000e4a0: 7469 6f6e 2070 7269 6365 2074 7970 652c  tion price type,
-0000e4b0: 2027 6c61 7374 2720 6f72 2027 696e 6465   'last' or 'inde
-0000e4c0: 7827 2c20 6465 6661 756c 7420 6973 2027  x', default is '
-0000e4d0: 6c61 7374 270a 2020 2020 2020 2020 3a72  last'.        :r
-0000e4e0: 6574 7572 6e73 2064 6963 743a 2061 6e20  eturns dict: an 
-0000e4f0: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
-0000e500: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0000e510: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
-0000e520: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
-0000e530: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0000e540: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-0000e550: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-0000e560: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
-0000e570: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
-0000e580: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
-0000e590: 0a20 2020 2020 2020 2020 2020 2027 7061  .            'pa
-0000e5a0: 6972 273a 206d 6172 6b65 745b 2769 6427  ir': market['id'
-0000e5b0: 5d2c 0a20 2020 2020 2020 2020 2020 2027  ],.            '
-0000e5c0: 7479 7065 273a 2073 6964 652c 0a20 2020  type': side,.   
-0000e5d0: 2020 2020 2020 2020 2027 6f72 6465 7274           'ordert
-0000e5e0: 7970 6527 3a20 7479 7065 2c0a 2020 2020  ype': type,.    
-0000e5f0: 2020 2020 2020 2020 2776 6f6c 756d 6527          'volume'
-0000e600: 3a20 7365 6c66 2e61 6d6f 756e 745f 746f  : self.amount_to
-0000e610: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-0000e620: 6c2c 2061 6d6f 756e 7429 2c0a 2020 2020  l, amount),.    
-0000e630: 2020 2020 7d0a 2020 2020 2020 2020 6f72      }.        or
-0000e640: 6465 7252 6571 7565 7374 203d 2073 656c  derRequest = sel
-0000e650: 662e 6f72 6465 725f 7265 7175 6573 7428  f.order_request(
-0000e660: 2763 7265 6174 654f 7264 6572 2829 272c  'createOrder()',
-0000e670: 2073 796d 626f 6c2c 2074 7970 652c 2072   symbol, type, r
-0000e680: 6571 7565 7374 2c20 7072 6963 652c 2070  equest, price, p
-0000e690: 6172 616d 7329 0a20 2020 2020 2020 2072  arams).        r
-0000e6a0: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
-0000e6b0: 7269 7661 7465 506f 7374 4164 644f 7264  rivatePostAddOrd
-0000e6c0: 6572 2873 656c 662e 6578 7465 6e64 286f  er(self.extend(o
-0000e6d0: 7264 6572 5265 7175 6573 745b 305d 2c20  rderRequest[0], 
-0000e6e0: 6f72 6465 7252 6571 7565 7374 5b31 5d29  orderRequest[1])
-0000e6f0: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-0000e700: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0000e710: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0000e720: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
-0000e730: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0000e740: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-0000e750: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0000e760: 6465 7363 7222 3a20 7b6f 7264 6572 3a20  descr": {order: 
-0000e770: 2762 7579 2030 2e30 3231 3030 3030 3020  'buy 0.02100000 
-0000e780: 4554 4855 5344 5420 4020 6c69 6d69 7420  ETHUSDT @ limit 
-0000e790: 3333 302e 3030 277d 2c0a 2020 2020 2020  330.00'},.      
-0000e7a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000e7b0: 2274 7869 6422 3a20 5b27 4f45 4b56 5632  "txid": ['OEKVV2
-0000e7c0: 2d49 4835 324f 2d54 504c 3647 5a27 5d0a  -IH52O-TPL6GZ'].
-0000e7d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000e7e0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-0000e7f0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0000e800: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0000e810: 656c 662e 7361 6665 5f64 6963 7428 7265  elf.safe_dict(re
-0000e820: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0000e830: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0000e840: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
-0000e850: 7228 7265 7375 6c74 290a 0a20 2020 2064  r(result)..    d
-0000e860: 6566 2066 696e 645f 6d61 726b 6574 5f62  ef find_market_b
-0000e870: 795f 616c 746e 616d 655f 6f72 5f69 6428  y_altname_or_id(
-0000e880: 7365 6c66 2c20 6964 293a 0a20 2020 2020  self, id):.     
-0000e890: 2020 206d 6172 6b65 7473 4279 416c 746e     marketsByAltn
-0000e8a0: 616d 6520 3d20 7365 6c66 2e73 6166 655f  ame = self.safe_
-0000e8b0: 7661 6c75 6528 7365 6c66 2e6f 7074 696f  value(self.optio
-0000e8c0: 6e73 2c20 276d 6172 6b65 7473 4279 416c  ns, 'marketsByAl
-0000e8d0: 746e 616d 6527 2c20 7b7d 290a 2020 2020  tname', {}).    
-0000e8e0: 2020 2020 6966 2069 6420 696e 206d 6172      if id in mar
-0000e8f0: 6b65 7473 4279 416c 746e 616d 653a 0a20  ketsByAltname:. 
-0000e900: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0000e910: 6e20 6d61 726b 6574 7342 7941 6c74 6e61  n marketsByAltna
-0000e920: 6d65 5b69 645d 0a20 2020 2020 2020 2065  me[id].        e
-0000e930: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-0000e940: 2072 6574 7572 6e20 7365 6c66 2e73 6166   return self.saf
-0000e950: 655f 6d61 726b 6574 2869 6429 0a0a 2020  e_market(id)..  
-0000e960: 2020 6465 6620 6765 745f 6465 6c69 7374    def get_delist
-0000e970: 6564 5f6d 6172 6b65 745f 6279 5f69 6428  ed_market_by_id(
-0000e980: 7365 6c66 2c20 6964 293a 0a20 2020 2020  self, id):.     
-0000e990: 2020 2069 6620 6964 2069 7320 4e6f 6e65     if id is None
-0000e9a0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0000e9b0: 7475 726e 2069 640a 2020 2020 2020 2020  turn id.        
-0000e9c0: 6d61 726b 6574 203d 2073 656c 662e 7361  market = self.sa
-0000e9d0: 6665 5f76 616c 7565 2873 656c 662e 6f70  fe_value(self.op
-0000e9e0: 7469 6f6e 735b 2764 656c 6973 7465 644d  tions['delistedM
-0000e9f0: 6172 6b65 7473 4279 4964 275d 2c20 6964  arketsById'], id
-0000ea00: 290a 2020 2020 2020 2020 6966 206d 6172  ).        if mar
-0000ea10: 6b65 7420 6973 206e 6f74 204e 6f6e 653a  ket is not None:
-0000ea20: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-0000ea30: 7572 6e20 6d61 726b 6574 0a20 2020 2020  urn market.     
-0000ea40: 2020 2062 6173 6549 6453 7461 7274 203d     baseIdStart =
-0000ea50: 2030 0a20 2020 2020 2020 2062 6173 6549   0.        baseI
-0000ea60: 6445 6e64 203d 2033 0a20 2020 2020 2020  dEnd = 3.       
-0000ea70: 2071 756f 7465 4964 5374 6172 7420 3d20   quoteIdStart = 
-0000ea80: 330a 2020 2020 2020 2020 7175 6f74 6549  3.        quoteI
-0000ea90: 6445 6e64 203d 2036 0a20 2020 2020 2020  dEnd = 6.       
-0000eaa0: 2069 6620 6c65 6e28 6964 2920 3d3d 2038   if len(id) == 8
-0000eab0: 3a0a 2020 2020 2020 2020 2020 2020 6261  :.            ba
-0000eac0: 7365 4964 456e 6420 3d20 340a 2020 2020  seIdEnd = 4.    
-0000ead0: 2020 2020 2020 2020 7175 6f74 6549 6453          quoteIdS
-0000eae0: 7461 7274 203d 2034 0a20 2020 2020 2020  tart = 4.       
-0000eaf0: 2020 2020 2071 756f 7465 4964 456e 6420       quoteIdEnd 
-0000eb00: 3d20 380a 2020 2020 2020 2020 656c 6966  = 8.        elif
-0000eb10: 206c 656e 2869 6429 203d 3d20 373a 0a20   len(id) == 7:. 
-0000eb20: 2020 2020 2020 2020 2020 2062 6173 6549             baseI
-0000eb30: 6445 6e64 203d 2034 0a20 2020 2020 2020  dEnd = 4.       
-0000eb40: 2020 2020 2071 756f 7465 4964 5374 6172       quoteIdStar
-0000eb50: 7420 3d20 340a 2020 2020 2020 2020 2020  t = 4.          
-0000eb60: 2020 7175 6f74 6549 6445 6e64 203d 2037    quoteIdEnd = 7
-0000eb70: 0a20 2020 2020 2020 2062 6173 6549 6420  .        baseId 
-0000eb80: 3d20 6964 5b62 6173 6549 6453 7461 7274  = id[baseIdStart
-0000eb90: 3a62 6173 6549 6445 6e64 5d0a 2020 2020  :baseIdEnd].    
-0000eba0: 2020 2020 7175 6f74 6549 6420 3d20 6964      quoteId = id
-0000ebb0: 5b71 756f 7465 4964 5374 6172 743a 7175  [quoteIdStart:qu
-0000ebc0: 6f74 6549 6445 6e64 5d0a 2020 2020 2020  oteIdEnd].      
-0000ebd0: 2020 6261 7365 203d 2073 656c 662e 7361    base = self.sa
-0000ebe0: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0000ebf0: 2862 6173 6549 6429 0a20 2020 2020 2020  (baseId).       
-0000ec00: 2071 756f 7465 203d 2073 656c 662e 7361   quote = self.sa
-0000ec10: 6665 5f63 7572 7265 6e63 795f 636f 6465  fe_currency_code
-0000ec20: 2871 756f 7465 4964 290a 2020 2020 2020  (quoteId).      
-0000ec30: 2020 7379 6d62 6f6c 203d 2062 6173 6520    symbol = base 
-0000ec40: 2b20 272f 2720 2b20 7175 6f74 650a 2020  + '/' + quote.  
-0000ec50: 2020 2020 2020 6d61 726b 6574 203d 207b        market = {
-0000ec60: 0a20 2020 2020 2020 2020 2020 2027 7379  .            'sy
-0000ec70: 6d62 6f6c 273a 2073 796d 626f 6c2c 0a20  mbol': symbol,. 
-0000ec80: 2020 2020 2020 2020 2020 2027 6261 7365             'base
-0000ec90: 273a 2062 6173 652c 0a20 2020 2020 2020  ': base,.       
-0000eca0: 2020 2020 2027 7175 6f74 6527 3a20 7175       'quote': qu
-0000ecb0: 6f74 652c 0a20 2020 2020 2020 2020 2020  ote,.           
-0000ecc0: 2027 6261 7365 4964 273a 2062 6173 6549   'baseId': baseI
-0000ecd0: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
-0000ece0: 7175 6f74 6549 6427 3a20 7175 6f74 6549  quoteId': quoteI
-0000ecf0: 642c 0a20 2020 2020 2020 207d 0a20 2020  d,.        }.   
-0000ed00: 2020 2020 2073 656c 662e 6f70 7469 6f6e       self.option
-0000ed10: 735b 2764 656c 6973 7465 644d 6172 6b65  s['delistedMarke
-0000ed20: 7473 4279 4964 275d 5b69 645d 203d 206d  tsById'][id] = m
-0000ed30: 6172 6b65 740a 2020 2020 2020 2020 7265  arket.        re
-0000ed40: 7475 726e 206d 6172 6b65 740a 0a20 2020  turn market..   
-0000ed50: 2064 6566 2070 6172 7365 5f6f 7264 6572   def parse_order
-0000ed60: 5f73 7461 7475 7328 7365 6c66 2c20 7374  _status(self, st
-0000ed70: 6174 7573 293a 0a20 2020 2020 2020 2073  atus):.        s
-0000ed80: 7461 7475 7365 7320 3d20 7b0a 2020 2020  tatuses = {.    
-0000ed90: 2020 2020 2020 2020 2770 656e 6469 6e67          'pending
-0000eda0: 273a 2027 6f70 656e 272c 2020 2320 6f72  ': 'open',  # or
-0000edb0: 6465 7220 7065 6e64 696e 6720 626f 6f6b  der pending book
-0000edc0: 2065 6e74 7279 0a20 2020 2020 2020 2020   entry.         
-0000edd0: 2020 2027 6f70 656e 273a 2027 6f70 656e     'open': 'open
-0000ede0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0000edf0: 636c 6f73 6564 273a 2027 636c 6f73 6564  closed': 'closed
-0000ee00: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
-0000ee10: 6361 6e63 656c 6564 273a 2027 6361 6e63  canceled': 'canc
-0000ee20: 656c 6564 272c 0a20 2020 2020 2020 2020  eled',.         
-0000ee30: 2020 2027 6578 7069 7265 6427 3a20 2765     'expired': 'e
-0000ee40: 7870 6972 6564 272c 0a20 2020 2020 2020  xpired',.       
-0000ee50: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
-0000ee60: 6e20 7365 6c66 2e73 6166 655f 7374 7269  n self.safe_stri
-0000ee70: 6e67 2873 7461 7475 7365 732c 2073 7461  ng(statuses, sta
-0000ee80: 7475 732c 2073 7461 7475 7329 0a0a 2020  tus, status)..  
-0000ee90: 2020 6465 6620 7061 7273 655f 6f72 6465    def parse_orde
-0000eea0: 725f 7479 7065 2873 656c 662c 2073 7461  r_type(self, sta
-0000eeb0: 7475 7329 3a0a 2020 2020 2020 2020 7374  tus):.        st
-0000eec0: 6174 7573 6573 203d 207b 0a20 2020 2020  atuses = {.     
-0000eed0: 2020 2020 2020 2027 7461 6b65 2d70 726f         'take-pro
-0000eee0: 6669 7427 3a20 276d 6172 6b65 7427 2c0a  fit': 'market',.
-0000eef0: 2020 2020 2020 2020 2020 2020 2773 746f              'sto
-0000ef00: 702d 6c6f 7373 2d6c 696d 6974 273a 2027  p-loss-limit': '
-0000ef10: 6c69 6d69 7427 2c0a 2020 2020 2020 2020  limit',.        
-0000ef20: 2020 2020 2773 746f 702d 6c6f 7373 273a      'stop-loss':
-0000ef30: 2027 6d61 726b 6574 272c 0a20 2020 2020   'market',.     
-0000ef40: 2020 2020 2020 2027 7461 6b65 2d70 726f         'take-pro
-0000ef50: 6669 742d 6c69 6d69 7427 3a20 276c 696d  fit-limit': 'lim
-0000ef60: 6974 272c 0a20 2020 2020 2020 2020 2020  it',.           
-0000ef70: 2027 7472 6169 6c69 6e67 2d73 746f 702d   'trailing-stop-
-0000ef80: 6c69 6d69 7427 3a20 276c 696d 6974 272c  limit': 'limit',
-0000ef90: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-0000efa0: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
-0000efb0: 6166 655f 7374 7269 6e67 2873 7461 7475  afe_string(statu
-0000efc0: 7365 732c 2073 7461 7475 732c 2073 7461  ses, status, sta
-0000efd0: 7475 7329 0a0a 2020 2020 6465 6620 7061  tus)..    def pa
-0000efe0: 7273 655f 6f72 6465 7228 7365 6c66 2c20  rse_order(self, 
-0000eff0: 6f72 6465 722c 206d 6172 6b65 743a 204d  order, market: M
-0000f000: 6172 6b65 7420 3d20 4e6f 6e65 2920 2d3e  arket = None) ->
-0000f010: 204f 7264 6572 3a0a 2020 2020 2020 2020   Order:.        
-0000f020: 230a 2020 2020 2020 2020 2320 6372 6561  #.        # crea
-0000f030: 7465 4f72 6465 7220 666f 7220 7265 6775  teOrder for regu
-0000f040: 6c61 7220 6f72 6465 7273 0a20 2020 2020  lar orders.     
-0000f050: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0000f060: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0000f070: 2020 2020 2020 2022 6465 7363 7222 3a20         "descr": 
-0000f080: 7b6f 7264 6572 3a20 2762 7579 2030 2e30  {order: 'buy 0.0
-0000f090: 3231 3030 3030 3020 4554 4855 5344 5420  2100000 ETHUSDT 
-0000f0a0: 4020 6c69 6d69 7420 3333 302e 3030 277d  @ limit 330.00'}
-0000f0b0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000f0c0: 2020 2020 2274 7869 6422 3a20 5b27 4f45      "txid": ['OE
-0000f0d0: 4b56 5632 2d49 4835 324f 2d54 504c 3647  KVV2-IH52O-TPL6G
-0000f0e0: 5a27 5d0a 2020 2020 2020 2020 2320 2020  Z'].        #   
-0000f0f0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-0000f100: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-0000f110: 2020 2020 2020 2274 7869 6422 3a20 5b22        "txid": ["
-0000f120: 5458 5f49 445f 4845 5245 225d 2c0a 2020  TX_ID_HERE"],.  
-0000f130: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000f140: 2264 6573 6372 223a 207b 226f 7264 6572  "descr": {"order
-0000f150: 223a 2262 7579 2030 2e31 3233 3435 3637  ":"buy 0.1234567
-0000f160: 3820 4554 4845 5552 2040 206d 6172 6b65  8 ETHEUR @ marke
-0000f170: 7422 7d2c 0a20 2020 2020 2020 2023 2020  t"},.        #  
-0000f180: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0000f190: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0000f1a0: 2023 2063 7265 6174 654f 7264 6572 2066   # createOrder f
-0000f1b0: 6f72 2073 746f 7020 6f72 6465 7273 0a20  or stop orders. 
-0000f1c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0000f1d0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0000f1e0: 2023 2020 2020 2020 2020 2022 7478 6964   #         "txid
-0000f1f0: 223a 5b22 4f53 494c 4e43 2d56 5149 3551  ":["OSILNC-VQI5Q
-0000f200: 2d37 3735 5a44 5122 5d2c 0a20 2020 2020  -775ZDQ"],.     
-0000f210: 2020 2023 2020 2020 2020 2020 2022 6465     #         "de
-0000f220: 7363 7222 3a7b 226f 7264 6572 223a 2273  scr":{"order":"s
-0000f230: 656c 6c20 3136 372e 3238 3030 3236 3736  ell 167.28002676
-0000f240: 2041 4441 5842 5420 4020 7374 6f70 206c   ADAXBT @ stop l
-0000f250: 6f73 7320 302e 3030 3030 3332 3830 202d  oss 0.00003280 -
-0000f260: 3e20 6c69 6d69 7420 302e 3030 3030 3332  > limit 0.000032
-0000f270: 3132 227d 0a20 2020 2020 2020 2023 2020  12"}.        #  
-0000f280: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
-0000f290: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0000f2a0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0000f2b0: 2023 2020 2020 2020 2020 2022 7478 6964   #         "txid
-0000f2c0: 223a 5b22 4f56 484d 4a56 2d42 5a57 3256  ":["OVHMJV-BZW2V
-0000f2d0: 2d36 4e5a 4657 4622 5d2c 0a20 2020 2020  -6NZFWF"],.     
-0000f2e0: 2020 2023 2020 2020 2020 2020 2022 6465     #         "de
-0000f2f0: 7363 7222 3a7b 226f 7264 6572 223a 2273  scr":{"order":"s
-0000f300: 656c 6c20 302e 3030 3130 3030 3030 2045  ell 0.00100000 E
-0000f310: 5448 5553 4420 4020 7374 6f70 206c 6f73  THUSD @ stop los
-0000f320: 7320 3236 3737 2e30 3020 2d3e 206c 696d  s 2677.00 -> lim
-0000f330: 6974 2032 3537 372e 3030 2077 6974 6820  it 2577.00 with 
-0000f340: 353a 3120 6c65 7665 7261 6765 227d 0a20  5:1 leverage"}. 
-0000f350: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0000f360: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0000f370: 2023 2065 6469 744f 7264 6572 0a20 2020   # editOrder.   
-0000f380: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0000f390: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
-0000f3a0: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0000f3b0: 223a 2022 6f6b 222c 0a20 2020 2020 2020  ": "ok",.       
-0000f3c0: 2023 2020 2020 2020 2020 2022 7478 6964   #         "txid
-0000f3d0: 223a 2022 4f41 5732 424f 2d37 5257 454b  ": "OAW2BO-7RWEK
-0000f3e0: 2d50 5a59 3555 4f22 2c0a 2020 2020 2020  -PZY5UO",.      
-0000f3f0: 2020 2320 2020 2020 2020 2020 226f 7269    #         "ori
-0000f400: 6769 6e61 6c74 7869 6422 3a20 224f 584c  ginaltxid": "OXL
-0000f410: 3653 532d 5550 4e4d 432d 3236 5742 4537  6SS-UPNMC-26WBE7
-0000f420: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000f430: 2020 2020 2022 766f 6c75 6d65 223a 2022       "volume": "
-0000f440: 302e 3030 3037 3530 3030 222c 0a20 2020  0.00075000",.   
-0000f450: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0000f460: 7072 6963 6522 3a20 2231 3335 3030 2e30  price": "13500.0
-0000f470: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000f480: 2020 2020 2022 6f72 6465 7273 5f63 616e       "orders_can
-0000f490: 6365 6c6c 6564 223a 2031 2c0a 2020 2020  celled": 1,.    
-0000f4a0: 2020 2020 2320 2020 2020 2020 2020 2264      #         "d
-0000f4b0: 6573 6372 223a 207b 0a20 2020 2020 2020  escr": {.       
-0000f4c0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0000f4d0: 6f72 6465 7222 3a20 2262 7579 2030 2e30  order": "buy 0.0
-0000f4e0: 3030 3735 3030 3020 5842 5455 5344 5420  0075000 XBTUSDT 
-0000f4f0: 4020 6c69 6d69 7420 3133 3530 302e 3022  @ limit 13500.0"
-0000f500: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000f510: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
-0000f520: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
-0000f530: 7773 202d 2063 7265 6174 654f 7264 6572  ws - createOrder
-0000f540: 0a20 2020 2020 2020 2023 2020 2020 7b0a  .        #    {.
-0000f550: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000f560: 2022 6465 7363 7222 3a20 2773 656c 6c20   "descr": 'sell 
-0000f570: 302e 3030 3031 3030 3030 2058 4254 5553  0.00010000 XBTUS
-0000f580: 4454 2040 206d 6172 6b65 7427 2c0a 2020  DT @ market',.  
-0000f590: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
-0000f5a0: 6576 656e 7422 3a20 2761 6464 4f72 6465  event": 'addOrde
-0000f5b0: 7253 7461 7475 7327 2c0a 2020 2020 2020  rStatus',.      
-0000f5c0: 2020 2320 2020 2020 2020 2022 7265 7169    #        "reqi
-0000f5d0: 6422 3a20 312c 0a20 2020 2020 2020 2023  d": 1,.        #
-0000f5e0: 2020 2020 2020 2020 2273 7461 7475 7322          "status"
-0000f5f0: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
-0000f600: 2320 2020 2020 2020 2022 7478 6964 223a  #        "txid":
-0000f610: 2027 4f41 5658 5a48 2d58 4945 3534 2d4a   'OAVXZH-XIE54-J
-0000f620: 4359 5944 4727 0a20 2020 2020 2020 2023  CYYDG'.        #
-0000f630: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0000f640: 2077 7320 2d20 6564 6974 4f72 6465 720a   ws - editOrder.
-0000f650: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
-0000f660: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000f670: 2264 6573 6372 223a 2022 6f72 6465 7220  "descr": "order 
-0000f680: 6564 6974 6564 2070 7269 6365 203d 2039  edited price = 9
-0000f690: 3030 302e 3030 3030 3030 3030 222c 0a20  000.00000000",. 
-0000f6a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000f6b0: 2265 7665 6e74 223a 2022 6564 6974 4f72  "event": "editOr
-0000f6c0: 6465 7253 7461 7475 7322 2c0a 2020 2020  derStatus",.    
-0000f6d0: 2020 2020 2320 2020 2020 2020 2022 6f72      #        "or
-0000f6e0: 6967 696e 616c 7478 6964 223a 2022 4f36  iginaltxid": "O6
-0000f6f0: 354b 5a57 2d4a 3441 5733 2d56 4653 3734  5KZW-J4AW3-VFS74
-0000f700: 4122 2c0a 2020 2020 2020 2020 2320 2020  A",.        #   
-0000f710: 2020 2020 2022 7265 7169 6422 3a20 332c       "reqid": 3,
-0000f720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0000f730: 2020 2273 7461 7475 7322 3a20 226f 6b22    "status": "ok"
-0000f740: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0000f750: 2020 2022 7478 6964 223a 2022 4f54 4936     "txid": "OTI6
-0000f760: 3732 2d48 4a46 414f 2d58 4f49 5050 4b22  72-HJFAO-XOIPPK"
-0000f770: 0a20 2020 2020 2020 2023 2020 2020 7d0a  .        #    }.
-0000f780: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0000f790: 2020 2320 207b 0a20 2020 2020 2020 2023    #  {.        #
-0000f7a0: 2020 2020 2020 2265 7272 6f72 223a 205b        "error": [
-0000f7b0: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-0000f7c0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-0000f7d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000f7e0: 2022 6f70 656e 223a 207b 0a20 2020 2020   "open": {.     
-0000f7f0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000f800: 2020 224f 5856 5053 552d 5137 3236 462d    "OXVPSU-Q726F-
-0000f810: 4c33 5344 4550 223a 207b 0a20 2020 2020  L3SDEP": {.     
-0000f820: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000f830: 2020 2020 2020 2272 6566 6964 223a 206e        "refid": n
-0000f840: 756c 6c2c 0a20 2020 2020 2020 2023 2020  ull,.        #  
-0000f850: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f860: 2275 7365 7272 6566 223a 2030 2c0a 2020  "userref": 0,.  
-0000f870: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000f880: 2020 2020 2020 2020 2022 7374 6174 7573           "status
-0000f890: 223a 2022 6f70 656e 222c 0a20 2020 2020  ": "open",.     
-0000f8a0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0000f8b0: 2020 2020 2020 226f 7065 6e74 6d22 3a20        "opentm": 
-0000f8c0: 3137 3036 3839 3333 3637 2e34 3635 3636  1706893367.46566
-0000f8d0: 3439 2c0a 2020 2020 2020 2020 2320 2020  49,.        #   
-0000f8e0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000f8f0: 7374 6172 7474 6d22 3a20 302c 0a20 2020  starttm": 0,.   
-0000f900: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000f910: 2020 2020 2020 2020 2265 7870 6972 6574          "expiret
-0000f920: 6d22 3a20 302c 0a20 2020 2020 2020 2023  m": 0,.        #
-0000f930: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f940: 2020 2264 6573 6372 223a 207b 0a20 2020    "descr": {.   
-0000f950: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000f960: 2020 2020 2020 2020 2020 2020 2270 6169              "pai
-0000f970: 7222 3a20 2258 5250 4555 5222 2c0a 2020  r": "XRPEUR",.  
-0000f980: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000f990: 2020 2020 2020 2020 2020 2020 2022 7479               "ty
-0000f9a0: 7065 223a 2022 7365 6c6c 222c 0a20 2020  pe": "sell",.   
-0000f9b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000f9c0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-0000f9d0: 6572 7479 7065 223a 2022 7472 6169 6c69  ertype": "traili
-0000f9e0: 6e67 2d73 746f 7022 2c0a 2020 2020 2020  ng-stop",.      
+0000bf10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf20: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
+0000bf30: 222d 302e 3238 3035 3830 3030 3030 222c  "-0.2805800000",
+0000bf40: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000bf50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf70: 2020 2020 2266 6565 223a 2022 302e 3030      "fee": "0.00
+0000bf80: 3530 3030 3030 3030 222c 0a20 2020 2020  50000000",.     
+0000bf90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000bfa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bfb0: 2020 2020 2020 2020 2020 2262 616c 616e            "balan
+0000bfc0: 6365 223a 2022 302e 3030 3030 3035 3130  ce": "0.00000510
+0000bfd0: 3030 2220 2020 2020 2020 2020 2020 7d7d  00"           }}
+0000bfe0: 7d0a 2020 2020 2020 2020 7265 7375 6c74  }.        result
+0000bff0: 203d 2072 6573 706f 6e73 655b 2772 6573   = response['res
+0000c000: 756c 7427 5d0a 2020 2020 2020 2020 6b65  ult'].        ke
+0000c010: 7973 203d 206c 6973 7428 7265 7375 6c74  ys = list(result
+0000c020: 2e6b 6579 7328 2929 0a20 2020 2020 2020  .keys()).       
+0000c030: 2069 7465 6d73 203d 205b 5d0a 2020 2020   items = [].    
+0000c040: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
+0000c050: 6765 2830 2c20 6c65 6e28 6b65 7973 2929  ge(0, len(keys))
+0000c060: 3a0a 2020 2020 2020 2020 2020 2020 6b65  :.            ke
+0000c070: 7920 3d20 6b65 7973 5b69 5d0a 2020 2020  y = keys[i].    
+0000c080: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
+0000c090: 7265 7375 6c74 5b6b 6579 5d0a 2020 2020  result[key].    
+0000c0a0: 2020 2020 2020 2020 7661 6c75 655b 2769          value['i
+0000c0b0: 6427 5d20 3d20 6b65 790a 2020 2020 2020  d'] = key.      
+0000c0c0: 2020 2020 2020 6974 656d 732e 6170 7065        items.appe
+0000c0d0: 6e64 2876 616c 7565 290a 2020 2020 2020  nd(value).      
+0000c0e0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+0000c0f0: 7273 655f 6c65 6467 6572 2869 7465 6d73  rse_ledger(items
+0000c100: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
+0000c110: 5f6c 6564 6765 725f 656e 7472 7928 7365  _ledger_entry(se
+0000c120: 6c66 2c20 6964 3a20 7374 722c 2063 6f64  lf, id: str, cod
+0000c130: 653a 2053 7472 203d 204e 6f6e 652c 2070  e: Str = None, p
+0000c140: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
+0000c150: 2020 2069 7465 6d73 203d 2073 656c 662e     items = self.
+0000c160: 6665 7463 685f 6c65 6467 6572 5f65 6e74  fetch_ledger_ent
+0000c170: 7269 6573 5f62 795f 6964 7328 5b69 645d  ries_by_ids([id]
+0000c180: 2c20 636f 6465 2c20 7061 7261 6d73 290a  , code, params).
+0000c190: 2020 2020 2020 2020 7265 7475 726e 2069          return i
+0000c1a0: 7465 6d73 5b30 5d0a 0a20 2020 2064 6566  tems[0]..    def
+0000c1b0: 2070 6172 7365 5f74 7261 6465 2873 656c   parse_trade(sel
+0000c1c0: 662c 2074 7261 6465 2c20 6d61 726b 6574  f, trade, market
+0000c1d0: 3a20 4d61 726b 6574 203d 204e 6f6e 6529  : Market = None)
+0000c1e0: 202d 3e20 5472 6164 653a 0a20 2020 2020   -> Trade:.     
+0000c1f0: 2020 2023 0a20 2020 2020 2020 2023 2066     #.        # f
+0000c200: 6574 6368 5472 6164 6573 2870 7562 6c69  etchTrades(publi
+0000c210: 6329 0a20 2020 2020 2020 2023 0a20 2020  c).        #.   
+0000c220: 2020 2020 2023 2020 2020 205b 0a20 2020       #     [.   
+0000c230: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000c240: 302e 3033 3233 3130 222c 2020 2320 7072  0.032310",  # pr
+0000c250: 6963 650a 2020 2020 2020 2020 2320 2020  ice.        #   
+0000c260: 2020 2020 2020 2234 2e32 3831 3639 3433        "4.2816943
+0000c270: 3422 2c20 2023 2061 6d6f 756e 740a 2020  4",  # amount.  
+0000c280: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000c290: 3135 3431 3339 3037 3932 2e37 3633 2c20  1541390792.763, 
+0000c2a0: 2023 2074 696d 6573 7461 6d70 0a20 2020   # timestamp.   
+0000c2b0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000c2c0: 7322 2c20 2023 2073 656c 6c20 6f72 2062  s",  # sell or b
+0000c2d0: 7579 0a20 2020 2020 2020 2023 2020 2020  uy.        #    
+0000c2e0: 2020 2020 2022 6c22 2c20 2023 206c 696d       "l",  # lim
+0000c2f0: 6974 206f 7220 6d61 726b 6574 0a20 2020  it or market.   
+0000c300: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000c310: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+0000c320: 5d0a 2020 2020 2020 2020 230a 2020 2020  ].        #.    
+0000c330: 2020 2020 2320 6665 7463 684f 7264 6572      # fetchOrder
+0000c340: 5472 6164 6573 2870 7269 7661 7465 290a  Trades(private).
+0000c350: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000c360: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+0000c370: 2020 2320 2020 2020 2020 2020 2269 6422    #         "id"
+0000c380: 3a20 2754 494d 4952 472d 5755 4e4e 452d  : 'TIMIRG-WUNNE-
+0000c390: 5252 4a36 4754 272c 2020 2320 696e 6a65  RRJ6GT',  # inje
+0000c3a0: 6374 6564 2066 726f 6d20 6f75 7473 6964  cted from outsid
+0000c3b0: 650a 2020 2020 2020 2020 2320 2020 2020  e.        #     
+0000c3c0: 2020 2020 226f 7264 6572 7478 6964 223a      "ordertxid":
+0000c3d0: 2027 4f51 5250 4e32 2d4c 5248 4659 2d48   'OQRPN2-LRHFY-H
+0000c3e0: 4946 4137 4427 2c0a 2020 2020 2020 2020  IFA7D',.        
+0000c3f0: 2320 2020 2020 2020 2020 2270 6f73 7478  #         "postx
+0000c400: 6964 223a 2027 544b 4832 5345 2d4d 3749  id": 'TKH2SE-M7I
+0000c410: 4635 2d43 4649 374c 5427 2c0a 2020 2020  F5-CFI7LT',.    
+0000c420: 2020 2020 2320 2020 2020 2020 2020 2270      #         "p
+0000c430: 6169 7222 3a20 2755 5344 4355 5344 5427  air": 'USDCUSDT'
+0000c440: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000c450: 2020 2020 2274 696d 6522 3a20 3135 3836      "time": 1586
+0000c460: 3334 3030 3836 2e34 3537 2c0a 2020 2020  340086.457,.    
+0000c470: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
+0000c480: 7970 6522 3a20 2773 656c 6c27 2c0a 2020  ype": 'sell',.  
+0000c490: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000c4a0: 226f 7264 6572 7479 7065 223a 2027 6d61  "ordertype": 'ma
+0000c4b0: 726b 6574 272c 0a20 2020 2020 2020 2023  rket',.        #
+0000c4c0: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
+0000c4d0: 3a20 2730 2e39 3938 3630 3030 3027 2c0a  : '0.99860000',.
+0000c4e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000c4f0: 2020 2263 6f73 7422 3a20 2732 322e 3136    "cost": '22.16
+0000c500: 3839 3230 3031 272c 0a20 2020 2020 2020  892001',.       
+0000c510: 2023 2020 2020 2020 2020 2022 6665 6522   #         "fee"
+0000c520: 3a20 2730 2e30 3434 3333 3738 3427 2c0a  : '0.04433784',.
+0000c530: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000c540: 2020 2276 6f6c 223a 2027 3232 2e32 3030    "vol": '22.200
+0000c550: 3030 3030 3027 2c0a 2020 2020 2020 2020  00000',.        
+0000c560: 2320 2020 2020 2020 2020 226d 6172 6769  #         "margi
+0000c570: 6e22 3a20 2730 2e30 3030 3030 3030 3027  n": '0.00000000'
+0000c580: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000c590: 2020 2020 226d 6973 6322 3a20 2727 0a20      "misc": ''. 
+0000c5a0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0000c5b0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0000c5c0: 2074 696d 6573 7461 6d70 203d 204e 6f6e   timestamp = Non
+0000c5d0: 650a 2020 2020 2020 2020 7369 6465 203d  e.        side =
+0000c5e0: 204e 6f6e 650a 2020 2020 2020 2020 7479   None.        ty
+0000c5f0: 7065 203d 204e 6f6e 650a 2020 2020 2020  pe = None.      
+0000c600: 2020 7072 6963 6520 3d20 4e6f 6e65 0a20    price = None. 
+0000c610: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
+0000c620: 4e6f 6e65 0a20 2020 2020 2020 2069 6420  None.        id 
+0000c630: 3d20 4e6f 6e65 0a20 2020 2020 2020 206f  = None.        o
+0000c640: 7264 6572 4964 203d 204e 6f6e 650a 2020  rderId = None.  
+0000c650: 2020 2020 2020 6665 6520 3d20 4e6f 6e65        fee = None
+0000c660: 0a20 2020 2020 2020 2073 796d 626f 6c20  .        symbol 
+0000c670: 3d20 4e6f 6e65 0a20 2020 2020 2020 2069  = None.        i
+0000c680: 6620 6973 696e 7374 616e 6365 2874 7261  f isinstance(tra
+0000c690: 6465 2c20 6c69 7374 293a 0a20 2020 2020  de, list):.     
+0000c6a0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+0000c6b0: 203d 2073 656c 662e 7361 6665 5f74 696d   = self.safe_tim
+0000c6c0: 6573 7461 6d70 2874 7261 6465 2c20 3229  estamp(trade, 2)
+0000c6d0: 0a20 2020 2020 2020 2020 2020 2073 6964  .            sid
+0000c6e0: 6520 3d20 2773 656c 6c27 2069 6620 2874  e = 'sell' if (t
+0000c6f0: 7261 6465 5b33 5d20 3d3d 2027 7327 2920  rade[3] == 's') 
+0000c700: 656c 7365 2027 6275 7927 0a20 2020 2020  else 'buy'.     
+0000c710: 2020 2020 2020 2074 7970 6520 3d20 276c         type = 'l
+0000c720: 696d 6974 2720 6966 2028 7472 6164 655b  imit' if (trade[
+0000c730: 345d 203d 3d20 276c 2729 2065 6c73 6520  4] == 'l') else 
+0000c740: 276d 6172 6b65 7427 0a20 2020 2020 2020  'market'.       
+0000c750: 2020 2020 2070 7269 6365 203d 2073 656c       price = sel
+0000c760: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+0000c770: 6164 652c 2030 290a 2020 2020 2020 2020  ade, 0).        
+0000c780: 2020 2020 616d 6f75 6e74 203d 2073 656c      amount = sel
+0000c790: 662e 7361 6665 5f73 7472 696e 6728 7472  f.safe_string(tr
+0000c7a0: 6164 652c 2031 290a 2020 2020 2020 2020  ade, 1).        
+0000c7b0: 2020 2020 7472 6164 654c 656e 6774 6820      tradeLength 
+0000c7c0: 3d20 6c65 6e28 7472 6164 6529 0a20 2020  = len(trade).   
+0000c7d0: 2020 2020 2020 2020 2069 6620 7472 6164           if trad
+0000c7e0: 654c 656e 6774 6820 3e20 363a 0a20 2020  eLength > 6:.   
+0000c7f0: 2020 2020 2020 2020 2020 2020 2069 6420               id 
+0000c800: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0000c810: 6e67 2874 7261 6465 2c20 3629 2020 2320  ng(trade, 6)  # 
+0000c820: 6172 7469 6669 6369 616c 6c79 2061 6464  artificially add
+0000c830: 6564 2020 2331 3739 340a 2020 2020 2020  ed  #1794.      
+0000c840: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
+0000c850: 6528 7472 6164 652c 2073 7472 293a 0a20  e(trade, str):. 
+0000c860: 2020 2020 2020 2020 2020 2069 6420 3d20             id = 
+0000c870: 7472 6164 650a 2020 2020 2020 2020 656c  trade.        el
+0000c880: 6966 2027 6f72 6465 7274 7869 6427 2069  if 'ordertxid' i
+0000c890: 6e20 7472 6164 653a 0a20 2020 2020 2020  n trade:.       
+0000c8a0: 2020 2020 206d 6172 6b65 7449 6420 3d20       marketId = 
+0000c8b0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0000c8c0: 2874 7261 6465 2c20 2770 6169 7227 290a  (trade, 'pair').
+0000c8d0: 2020 2020 2020 2020 2020 2020 666f 756e              foun
+0000c8e0: 644d 6172 6b65 7420 3d20 7365 6c66 2e66  dMarket = self.f
+0000c8f0: 696e 645f 6d61 726b 6574 5f62 795f 616c  ind_market_by_al
+0000c900: 746e 616d 655f 6f72 5f69 6428 6d61 726b  tname_or_id(mark
+0000c910: 6574 4964 290a 2020 2020 2020 2020 2020  etId).          
+0000c920: 2020 6966 2066 6f75 6e64 4d61 726b 6574    if foundMarket
+0000c930: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+0000c940: 2020 2020 2020 2020 2020 2020 2020 6d61                ma
+0000c950: 726b 6574 203d 2066 6f75 6e64 4d61 726b  rket = foundMark
+0000c960: 6574 0a20 2020 2020 2020 2020 2020 2065  et.            e
+0000c970: 6c69 6620 6d61 726b 6574 4964 2069 7320  lif marketId is 
+0000c980: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000c990: 2020 2020 2020 2020 2020 2320 6465 6c69            # deli
+0000c9a0: 7374 6564 206d 6172 6b65 7420 6964 7320  sted market ids 
+0000c9b0: 676f 2068 6572 650a 2020 2020 2020 2020  go here.        
+0000c9c0: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+0000c9d0: 2073 656c 662e 6765 745f 6465 6c69 7374   self.get_delist
+0000c9e0: 6564 5f6d 6172 6b65 745f 6279 5f69 6428  ed_market_by_id(
+0000c9f0: 6d61 726b 6574 4964 290a 2020 2020 2020  marketId).      
+0000ca00: 2020 2020 2020 6f72 6465 7249 6420 3d20        orderId = 
+0000ca10: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0000ca20: 2874 7261 6465 2c20 276f 7264 6572 7478  (trade, 'ordertx
+0000ca30: 6964 2729 0a20 2020 2020 2020 2020 2020  id').           
+0000ca40: 2069 6420 3d20 7365 6c66 2e73 6166 655f   id = self.safe_
+0000ca50: 7374 7269 6e67 5f32 2874 7261 6465 2c20  string_2(trade, 
+0000ca60: 2769 6427 2c20 2770 6f73 7478 6964 2729  'id', 'postxid')
+0000ca70: 0a20 2020 2020 2020 2020 2020 2074 696d  .            tim
+0000ca80: 6573 7461 6d70 203d 2073 656c 662e 7361  estamp = self.sa
+0000ca90: 6665 5f74 696d 6573 7461 6d70 2874 7261  fe_timestamp(tra
+0000caa0: 6465 2c20 2774 696d 6527 290a 2020 2020  de, 'time').    
+0000cab0: 2020 2020 2020 2020 7369 6465 203d 2073          side = s
+0000cac0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0000cad0: 7472 6164 652c 2027 7479 7065 2729 0a20  trade, 'type'). 
+0000cae0: 2020 2020 2020 2020 2020 2074 7970 6520             type 
+0000caf0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+0000cb00: 6e67 2874 7261 6465 2c20 276f 7264 6572  ng(trade, 'order
+0000cb10: 7479 7065 2729 0a20 2020 2020 2020 2020  type').         
+0000cb20: 2020 2070 7269 6365 203d 2073 656c 662e     price = self.
+0000cb30: 7361 6665 5f73 7472 696e 6728 7472 6164  safe_string(trad
+0000cb40: 652c 2027 7072 6963 6527 290a 2020 2020  e, 'price').    
+0000cb50: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
+0000cb60: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0000cb70: 6728 7472 6164 652c 2027 766f 6c27 290a  g(trade, 'vol').
+0000cb80: 2020 2020 2020 2020 2020 2020 6966 2027              if '
+0000cb90: 6665 6527 2069 6e20 7472 6164 653a 0a20  fee' in trade:. 
+0000cba0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000cbb0: 7572 7265 6e63 7920 3d20 4e6f 6e65 0a20  urrency = None. 
+0000cbc0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+0000cbd0: 6620 6d61 726b 6574 2069 7320 6e6f 7420  f market is not 
+0000cbe0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+0000cbf0: 2020 2020 2020 2020 2020 6375 7272 656e            curren
+0000cc00: 6379 203d 206d 6172 6b65 745b 2771 756f  cy = market['quo
+0000cc10: 7465 275d 0a20 2020 2020 2020 2020 2020  te'].           
+0000cc20: 2020 2020 2066 6565 203d 207b 0a20 2020       fee = {.   
+0000cc30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000cc40: 2027 636f 7374 273a 2073 656c 662e 7361   'cost': self.sa
+0000cc50: 6665 5f73 7472 696e 6728 7472 6164 652c  fe_string(trade,
+0000cc60: 2027 6665 6527 292c 0a20 2020 2020 2020   'fee'),.       
+0000cc70: 2020 2020 2020 2020 2020 2020 2027 6375               'cu
+0000cc80: 7272 656e 6379 273a 2063 7572 7265 6e63  rrency': currenc
+0000cc90: 792c 0a20 2020 2020 2020 2020 2020 2020  y,.             
+0000cca0: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
+0000ccb0: 6d61 726b 6574 2069 7320 6e6f 7420 4e6f  market is not No
+0000ccc0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000ccd0: 7379 6d62 6f6c 203d 206d 6172 6b65 745b  symbol = market[
+0000cce0: 2773 796d 626f 6c27 5d0a 2020 2020 2020  'symbol'].      
+0000ccf0: 2020 636f 7374 203d 2073 656c 662e 7361    cost = self.sa
+0000cd00: 6665 5f73 7472 696e 6728 7472 6164 652c  fe_string(trade,
+0000cd10: 2027 636f 7374 2729 0a20 2020 2020 2020   'cost').       
+0000cd20: 2072 6574 7572 6e20 7365 6c66 2e73 6166   return self.saf
+0000cd30: 655f 7472 6164 6528 7b0a 2020 2020 2020  e_trade({.      
+0000cd40: 2020 2020 2020 2769 6427 3a20 6964 2c0a        'id': id,.
+0000cd50: 2020 2020 2020 2020 2020 2020 276f 7264              'ord
+0000cd60: 6572 273a 206f 7264 6572 4964 2c0a 2020  er': orderId,.  
+0000cd70: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
+0000cd80: 3a20 7472 6164 652c 0a20 2020 2020 2020  : trade,.       
+0000cd90: 2020 2020 2027 7469 6d65 7374 616d 7027       'timestamp'
+0000cda0: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
+0000cdb0: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
+0000cdc0: 6d65 273a 2073 656c 662e 6973 6f38 3630  me': self.iso860
+0000cdd0: 3128 7469 6d65 7374 616d 7029 2c0a 2020  1(timestamp),.  
+0000cde0: 2020 2020 2020 2020 2020 2773 796d 626f            'symbo
+0000cdf0: 6c27 3a20 7379 6d62 6f6c 2c0a 2020 2020  l': symbol,.    
+0000ce00: 2020 2020 2020 2020 2774 7970 6527 3a20          'type': 
+0000ce10: 7479 7065 2c0a 2020 2020 2020 2020 2020  type,.          
+0000ce20: 2020 2773 6964 6527 3a20 7369 6465 2c0a    'side': side,.
+0000ce30: 2020 2020 2020 2020 2020 2020 2774 616b              'tak
+0000ce40: 6572 4f72 4d61 6b65 7227 3a20 4e6f 6e65  erOrMaker': None
+0000ce50: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
+0000ce60: 7269 6365 273a 2070 7269 6365 2c0a 2020  rice': price,.  
+0000ce70: 2020 2020 2020 2020 2020 2761 6d6f 756e            'amoun
+0000ce80: 7427 3a20 616d 6f75 6e74 2c0a 2020 2020  t': amount,.    
+0000ce90: 2020 2020 2020 2020 2763 6f73 7427 3a20          'cost': 
+0000cea0: 636f 7374 2c0a 2020 2020 2020 2020 2020  cost,.          
+0000ceb0: 2020 2766 6565 273a 2066 6565 2c0a 2020    'fee': fee,.  
+0000cec0: 2020 2020 2020 7d2c 206d 6172 6b65 7429        }, market)
+0000ced0: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+0000cee0: 7472 6164 6573 2873 656c 662c 2073 796d  trades(self, sym
+0000cef0: 626f 6c3a 2073 7472 2c20 7369 6e63 653a  bol: str, since:
+0000cf00: 2049 6e74 203d 204e 6f6e 652c 206c 696d   Int = None, lim
+0000cf10: 6974 3a20 496e 7420 3d20 4e6f 6e65 2c20  it: Int = None, 
+0000cf20: 7061 7261 6d73 3d7b 7d29 202d 3e20 4c69  params={}) -> Li
+0000cf30: 7374 5b54 7261 6465 5d3a 0a20 2020 2020  st[Trade]:.     
+0000cf40: 2020 2022 2222 0a20 2020 2020 2020 2067     """.        g
+0000cf50: 6574 2074 6865 206c 6973 7420 6f66 206d  et the list of m
+0000cf60: 6f73 7420 7265 6365 6e74 2074 7261 6465  ost recent trade
+0000cf70: 7320 666f 7220 6120 7061 7274 6963 756c  s for a particul
+0000cf80: 6172 2073 796d 626f 6c0a 2020 2020 2020  ar symbol.      
+0000cf90: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+0000cfa0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+0000cfb0: 7265 7374 2f23 7461 672f 5370 6f74 2d4d  rest/#tag/Spot-M
+0000cfc0: 6172 6b65 742d 4461 7461 2f6f 7065 7261  arket-Data/opera
+0000cfd0: 7469 6f6e 2f67 6574 5265 6365 6e74 5472  tion/getRecentTr
+0000cfe0: 6164 6573 0a20 2020 2020 2020 203a 7061  ades.        :pa
+0000cff0: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
+0000d000: 756e 6966 6965 6420 7379 6d62 6f6c 206f  unified symbol o
+0000d010: 6620 7468 6520 6d61 726b 6574 2074 6f20  f the market to 
+0000d020: 6665 7463 6820 7472 6164 6573 2066 6f72  fetch trades for
+0000d030: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000d040: 696e 7420 5b73 696e 6365 5d3a 2074 696d  int [since]: tim
+0000d050: 6573 7461 6d70 2069 6e20 6d73 206f 6620  estamp in ms of 
+0000d060: 7468 6520 6561 726c 6965 7374 2074 7261  the earliest tra
+0000d070: 6465 2074 6f20 6665 7463 680a 2020 2020  de to fetch.    
+0000d080: 2020 2020 3a70 6172 616d 2069 6e74 205b      :param int [
+0000d090: 6c69 6d69 745d 3a20 7468 6520 6d61 7869  limit]: the maxi
+0000d0a0: 6d75 6d20 616d 6f75 6e74 206f 6620 7472  mum amount of tr
+0000d0b0: 6164 6573 2074 6f20 6665 7463 680a 2020  ades to fetch.  
+0000d0c0: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0000d0d0: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
+0000d0e0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0000d0f0: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
+0000d100: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
+0000d110: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0000d120: 726e 7320 5472 6164 655b 5d3a 2061 206c  rns Trade[]: a l
+0000d130: 6973 7420 6f66 2060 7472 6164 6520 7374  ist of `trade st
+0000d140: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
+0000d150: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0000d160: 232f 3f69 643d 7075 626c 6963 2d74 7261  #/?id=public-tra
+0000d170: 6465 733e 600a 2020 2020 2020 2020 2222  des>`.        ""
+0000d180: 220a 2020 2020 2020 2020 7365 6c66 2e6c  ".        self.l
+0000d190: 6f61 645f 6d61 726b 6574 7328 290a 2020  oad_markets().  
+0000d1a0: 2020 2020 2020 6d61 726b 6574 203d 2073        market = s
+0000d1b0: 656c 662e 6d61 726b 6574 2873 796d 626f  elf.market(symbo
+0000d1c0: 6c29 0a20 2020 2020 2020 2069 6420 3d20  l).        id = 
+0000d1d0: 6d61 726b 6574 5b27 6964 275d 0a20 2020  market['id'].   
+0000d1e0: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+0000d1f0: 0a20 2020 2020 2020 2020 2020 2027 7061  .            'pa
+0000d200: 6972 273a 2069 642c 0a20 2020 2020 2020  ir': id,.       
+0000d210: 207d 0a20 2020 2020 2020 2023 2068 7474   }.        # htt
+0000d220: 7073 3a2f 2f73 7570 706f 7274 2e6b 7261  ps://support.kra
+0000d230: 6b65 6e2e 636f 6d2f 6863 2f65 6e2d 7573  ken.com/hc/en-us
+0000d240: 2f61 7274 6963 6c65 732f 3231 3831 3938  /articles/218198
+0000d250: 3139 372d 486f 772d 746f 2d70 756c 6c2d  197-How-to-pull-
+0000d260: 616c 6c2d 7472 6164 652d 6461 7461 2d75  all-trade-data-u
+0000d270: 7369 6e67 2d74 6865 2d4b 7261 6b65 6e2d  sing-the-Kraken-
+0000d280: 5245 5354 2d41 5049 0a20 2020 2020 2020  REST-API.       
+0000d290: 2023 2068 7474 7073 3a2f 2f67 6974 6875   # https://githu
+0000d2a0: 622e 636f 6d2f 6363 7874 2f63 6378 742f  b.com/ccxt/ccxt/
+0000d2b0: 6973 7375 6573 2f35 3637 370a 2020 2020  issues/5677.    
+0000d2c0: 2020 2020 6966 2073 696e 6365 2069 7320      if since is 
+0000d2d0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
+0000d2e0: 2020 2020 2020 2320 7068 7020 646f 6573        # php does
+0000d2f0: 206e 6f74 2066 6f72 6d61 7420 6974 2070   not format it p
+0000d300: 726f 7065 726c 790a 2020 2020 2020 2020  roperly.        
+0000d310: 2020 2020 2320 7468 6572 6566 6f72 6520      # therefore 
+0000d320: 7765 2075 7365 2073 7472 696e 6720 636f  we use string co
+0000d330: 6e63 6174 656e 6174 696f 6e20 6865 7265  ncatenation here
+0000d340: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+0000d350: 7565 7374 5b27 7369 6e63 6527 5d20 3d20  uest['since'] = 
+0000d360: 7369 6e63 6520 2a20 3165 360a 2020 2020  since * 1e6.    
+0000d370: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+0000d380: 2773 696e 6365 275d 203d 2073 7472 2873  'since'] = str(s
+0000d390: 696e 6365 2920 2b20 2730 3030 3030 3027  ince) + '000000'
+0000d3a0: 2020 2320 6578 7065 6374 6564 2074 6f20    # expected to 
+0000d3b0: 6265 2069 6e20 6e61 6e6f 7365 636f 6e64  be in nanosecond
+0000d3c0: 730a 2020 2020 2020 2020 6966 206c 696d  s.        if lim
+0000d3d0: 6974 2069 7320 6e6f 7420 4e6f 6e65 3a0a  it is not None:.
+0000d3e0: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+0000d3f0: 6573 745b 2763 6f75 6e74 275d 203d 206c  est['count'] = l
+0000d400: 696d 6974 0a20 2020 2020 2020 2072 6573  imit.        res
+0000d410: 706f 6e73 6520 3d20 7365 6c66 2e70 7562  ponse = self.pub
+0000d420: 6c69 6347 6574 5472 6164 6573 2873 656c  licGetTrades(sel
+0000d430: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
+0000d440: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
+0000d450: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0000d460: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+0000d470: 2020 2020 2020 2022 6572 726f 7222 3a20         "error": 
+0000d480: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
+0000d490: 2020 2020 2020 2272 6573 756c 7422 3a20        "result": 
+0000d4a0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000d4b0: 2020 2020 2020 2020 2258 4554 4858 5842          "XETHXXB
+0000d4c0: 5422 3a20 5b0a 2020 2020 2020 2020 2320  T": [.        # 
+0000d4d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d4e0: 5b22 302e 3033 3233 3130 222c 2234 2e32  ["0.032310","4.2
+0000d4f0: 3831 3639 3433 3422 2c31 3534 3133 3930  8169434",1541390
+0000d500: 3739 322e 3736 332c 2273 222c 226c 222c  792.763,"s","l",
+0000d510: 2222 5d0a 2020 2020 2020 2020 2320 2020  ""].        #   
+0000d520: 2020 2020 2020 2020 2020 5d2c 0a20 2020            ],.   
+0000d530: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0000d540: 2020 2022 6c61 7374 223a 2022 3135 3431     "last": "1541
+0000d550: 3433 3934 3231 3230 3036 3738 3635 3722  439421200678657"
+0000d560: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000d570: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+0000d580: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+0000d590: 2020 2020 2020 2072 6573 756c 7420 3d20         result = 
+0000d5a0: 7265 7370 6f6e 7365 5b27 7265 7375 6c74  response['result
+0000d5b0: 275d 0a20 2020 2020 2020 2074 7261 6465  '].        trade
+0000d5c0: 7320 3d20 7265 7375 6c74 5b69 645d 0a20  s = result[id]. 
+0000d5d0: 2020 2020 2020 2023 2074 7261 6465 7320         # trades 
+0000d5e0: 6973 2061 2073 6f72 7465 6420 6172 7261  is a sorted arra
+0000d5f0: 793a 206c 6173 7428 6d6f 7374 2072 6563  y: last(most rec
+0000d600: 656e 7420 7472 6164 6529 2067 6f65 7320  ent trade) goes 
+0000d610: 6c61 7374 0a20 2020 2020 2020 206c 656e  last.        len
+0000d620: 6774 6820 3d20 6c65 6e28 7472 6164 6573  gth = len(trades
+0000d630: 290a 2020 2020 2020 2020 6966 206c 656e  ).        if len
+0000d640: 6774 6820 3c3d 2030 3a0a 2020 2020 2020  gth <= 0:.      
+0000d650: 2020 2020 2020 7265 7475 726e 205b 5d0a        return [].
+0000d660: 2020 2020 2020 2020 6c61 7374 5472 6164          lastTrad
+0000d670: 6520 3d20 7472 6164 6573 5b6c 656e 6774  e = trades[lengt
+0000d680: 6820 2d20 315d 0a20 2020 2020 2020 206c  h - 1].        l
+0000d690: 6173 7454 7261 6465 4964 203d 2073 656c  astTradeId = sel
+0000d6a0: 662e 7361 6665 5f73 7472 696e 6728 7265  f.safe_string(re
+0000d6b0: 7375 6c74 2c20 276c 6173 7427 290a 2020  sult, 'last').  
+0000d6c0: 2020 2020 2020 6c61 7374 5472 6164 652e        lastTrade.
+0000d6d0: 6170 7065 6e64 286c 6173 7454 7261 6465  append(lastTrade
+0000d6e0: 4964 290a 2020 2020 2020 2020 7472 6164  Id).        trad
+0000d6f0: 6573 5b6c 656e 6774 6820 2d20 315d 203d  es[length - 1] =
+0000d700: 206c 6173 7454 7261 6465 0a20 2020 2020   lastTrade.     
+0000d710: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+0000d720: 6172 7365 5f74 7261 6465 7328 7472 6164  arse_trades(trad
+0000d730: 6573 2c20 6d61 726b 6574 2c20 7369 6e63  es, market, sinc
+0000d740: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
+0000d750: 6566 2070 6172 7365 5f62 616c 616e 6365  ef parse_balance
+0000d760: 2873 656c 662c 2072 6573 706f 6e73 6529  (self, response)
+0000d770: 202d 3e20 4261 6c61 6e63 6573 3a0a 2020   -> Balances:.  
+0000d780: 2020 2020 2020 6261 6c61 6e63 6573 203d        balances =
+0000d790: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0000d7a0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+0000d7b0: 6c74 272c 207b 7d29 0a20 2020 2020 2020  lt', {}).       
+0000d7c0: 2072 6573 756c 7420 3d20 7b0a 2020 2020   result = {.    
+0000d7d0: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
+0000d7e0: 7265 7370 6f6e 7365 2c0a 2020 2020 2020  response,.      
+0000d7f0: 2020 2020 2020 2774 696d 6573 7461 6d70        'timestamp
+0000d800: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
+0000d810: 2020 2020 2027 6461 7465 7469 6d65 273a       'datetime':
+0000d820: 204e 6f6e 652c 0a20 2020 2020 2020 207d   None,.        }
+0000d830: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
+0000d840: 7949 6473 203d 206c 6973 7428 6261 6c61  yIds = list(bala
+0000d850: 6e63 6573 2e6b 6579 7328 2929 0a20 2020  nces.keys()).   
+0000d860: 2020 2020 2066 6f72 2069 2069 6e20 7261       for i in ra
+0000d870: 6e67 6528 302c 206c 656e 2863 7572 7265  nge(0, len(curre
+0000d880: 6e63 7949 6473 2929 3a0a 2020 2020 2020  ncyIds)):.      
+0000d890: 2020 2020 2020 6375 7272 656e 6379 4964        currencyId
+0000d8a0: 203d 2063 7572 7265 6e63 7949 6473 5b69   = currencyIds[i
+0000d8b0: 5d0a 2020 2020 2020 2020 2020 2020 636f  ].            co
+0000d8c0: 6465 203d 2073 656c 662e 7361 6665 5f63  de = self.safe_c
+0000d8d0: 7572 7265 6e63 795f 636f 6465 2863 7572  urrency_code(cur
+0000d8e0: 7265 6e63 7949 6429 0a20 2020 2020 2020  rencyId).       
+0000d8f0: 2020 2020 2062 616c 616e 6365 203d 2073       balance = s
+0000d900: 656c 662e 7361 6665 5f76 616c 7565 2862  elf.safe_value(b
+0000d910: 616c 616e 6365 732c 2063 7572 7265 6e63  alances, currenc
+0000d920: 7949 642c 207b 7d29 0a20 2020 2020 2020  yId, {}).       
+0000d930: 2020 2020 2061 6363 6f75 6e74 203d 2073       account = s
+0000d940: 656c 662e 6163 636f 756e 7428 290a 2020  elf.account().  
+0000d950: 2020 2020 2020 2020 2020 6163 636f 756e            accoun
+0000d960: 745b 2775 7365 6427 5d20 3d20 7365 6c66  t['used'] = self
+0000d970: 2e73 6166 655f 7374 7269 6e67 2862 616c  .safe_string(bal
+0000d980: 616e 6365 2c20 2768 6f6c 645f 7472 6164  ance, 'hold_trad
+0000d990: 6527 290a 2020 2020 2020 2020 2020 2020  e').            
+0000d9a0: 6163 636f 756e 745b 2774 6f74 616c 275d  account['total']
+0000d9b0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+0000d9c0: 696e 6728 6261 6c61 6e63 652c 2027 6261  ing(balance, 'ba
+0000d9d0: 6c61 6e63 6527 290a 2020 2020 2020 2020  lance').        
+0000d9e0: 2020 2020 7265 7375 6c74 5b63 6f64 655d      result[code]
+0000d9f0: 203d 2061 6363 6f75 6e74 0a20 2020 2020   = account.     
+0000da00: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
+0000da10: 6166 655f 6261 6c61 6e63 6528 7265 7375  afe_balance(resu
+0000da20: 6c74 290a 0a20 2020 2064 6566 2066 6574  lt)..    def fet
+0000da30: 6368 5f62 616c 616e 6365 2873 656c 662c  ch_balance(self,
+0000da40: 2070 6172 616d 733d 7b7d 2920 2d3e 2042   params={}) -> B
+0000da50: 616c 616e 6365 733a 0a20 2020 2020 2020  alances:.       
+0000da60: 2022 2222 0a20 2020 2020 2020 2071 7565   """.        que
+0000da70: 7279 2066 6f72 2062 616c 616e 6365 2061  ry for balance a
+0000da80: 6e64 2067 6574 2074 6865 2061 6d6f 756e  nd get the amoun
+0000da90: 7420 6f66 2066 756e 6473 2061 7661 696c  t of funds avail
+0000daa0: 6162 6c65 2066 6f72 2074 7261 6469 6e67  able for trading
+0000dab0: 206f 7220 6675 6e64 7320 6c6f 636b 6564   or funds locked
+0000dac0: 2069 6e20 6f72 6465 7273 0a20 2020 2020   in orders.     
+0000dad0: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
+0000dae0: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
+0000daf0: 2f72 6573 742f 2374 6167 2f41 6363 6f75  /rest/#tag/Accou
+0000db00: 6e74 2d44 6174 612f 6f70 6572 6174 696f  nt-Data/operatio
+0000db10: 6e2f 6765 7445 7874 656e 6465 6442 616c  n/getExtendedBal
+0000db20: 616e 6365 0a20 2020 2020 2020 203a 7061  ance.        :pa
+0000db30: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
+0000db40: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
+0000db50: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+0000db60: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
+0000db70: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+0000db80: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+0000db90: 2061 2060 6261 6c61 6e63 6520 7374 7275   a `balance stru
+0000dba0: 6374 7572 6520 3c68 7474 7073 3a2f 2f64  cture <https://d
+0000dbb0: 6f63 732e 6363 7874 2e63 6f6d 2f23 2f3f  ocs.ccxt.com/#/?
+0000dbc0: 6964 3d62 616c 616e 6365 2d73 7472 7563  id=balance-struc
+0000dbd0: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+0000dbe0: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+0000dbf0: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+0000dc00: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0000dc10: 3d20 7365 6c66 2e70 7269 7661 7465 506f  = self.privatePo
+0000dc20: 7374 4261 6c61 6e63 6545 7828 7061 7261  stBalanceEx(para
+0000dc30: 6d73 290a 2020 2020 2020 2020 230a 2020  ms).        #.  
+0000dc40: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+0000dc50: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000dc60: 2265 7272 6f72 223a 205b 5d2c 0a20 2020  "error": [],.   
+0000dc70: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000dc80: 7265 7375 6c74 223a 207b 0a20 2020 2020  result": {.     
+0000dc90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000dca0: 2022 5a55 5344 223a 207b 0a20 2020 2020   "ZUSD": {.     
+0000dcb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000dcc0: 2020 2020 2022 6261 6c61 6e63 6522 3a20       "balance": 
+0000dcd0: 3235 3433 352e 3231 2c0a 2020 2020 2020  25435.21,.      
+0000dce0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000dcf0: 2020 2020 2268 6f6c 645f 7472 6164 6522      "hold_trade"
+0000dd00: 3a20 3832 3439 2e37 360a 2020 2020 2020  : 8249.76.      
+0000dd10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000dd20: 7d2c 0a20 2020 2020 2020 2023 2020 2020  },.        #    
+0000dd30: 2020 2020 2020 2020 2022 5858 4254 223a           "XXBT":
+0000dd40: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0000dd50: 2020 2020 2020 2020 2020 2020 2022 6261               "ba
+0000dd60: 6c61 6e63 6522 3a20 312e 3234 3335 2c0a  lance": 1.2435,.
+0000dd70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000dd80: 2020 2020 2020 2020 2020 2268 6f6c 645f            "hold_
+0000dd90: 7472 6164 6522 3a20 302e 3834 3233 0a20  trade": 0.8423. 
+0000dda0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000ddb0: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0000ddc0: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0000ddd0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0000dde0: 2020 2023 0a20 2020 2020 2020 2072 6574     #.        ret
+0000ddf0: 7572 6e20 7365 6c66 2e70 6172 7365 5f62  urn self.parse_b
+0000de00: 616c 616e 6365 2872 6573 706f 6e73 6529  alance(response)
+0000de10: 0a0a 2020 2020 6465 6620 6372 6561 7465  ..    def create
+0000de20: 5f6f 7264 6572 2873 656c 662c 2073 796d  _order(self, sym
+0000de30: 626f 6c3a 2073 7472 2c20 7479 7065 3a20  bol: str, type: 
+0000de40: 4f72 6465 7254 7970 652c 2073 6964 653a  OrderType, side:
+0000de50: 204f 7264 6572 5369 6465 2c20 616d 6f75   OrderSide, amou
+0000de60: 6e74 3a20 666c 6f61 742c 2070 7269 6365  nt: float, price
+0000de70: 3a20 4e75 6d20 3d20 4e6f 6e65 2c20 7061  : Num = None, pa
+0000de80: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+0000de90: 2020 2222 220a 2020 2020 2020 2020 3a73    """.        :s
+0000dea0: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
+0000deb0: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
+0000dec0: 2f23 7461 672f 5472 6164 696e 672f 6f70  /#tag/Trading/op
+0000ded0: 6572 6174 696f 6e2f 6164 644f 7264 6572  eration/addOrder
+0000dee0: 0a20 2020 2020 2020 2063 7265 6174 6520  .        create 
+0000def0: 6120 7472 6164 6520 6f72 6465 720a 2020  a trade order.  
+0000df00: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000df10: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+0000df20: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+0000df30: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
+0000df40: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
+0000df50: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
+0000df60: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
+0000df70: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
+0000df80: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
+0000df90: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
+0000dfa0: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
+0000dfb0: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
+0000dfc0: 6f77 206d 7563 6820 6f66 2063 7572 7265  ow much of curre
+0000dfd0: 6e63 7920 796f 7520 7761 6e74 2074 6f20  ncy you want to 
+0000dfe0: 7472 6164 6520 696e 2075 6e69 7473 206f  trade in units o
+0000dff0: 6620 6261 7365 2063 7572 7265 6e63 790a  f base currency.
+0000e000: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
+0000e010: 6c6f 6174 205b 7072 6963 655d 3a20 7468  loat [price]: th
+0000e020: 6520 7072 6963 6520 6174 2077 6869 6368  e price at which
+0000e030: 2074 6865 206f 7264 6572 2069 7320 746f   the order is to
+0000e040: 2062 6520 6675 6c6c 6669 6c6c 6564 2c20   be fullfilled, 
+0000e050: 696e 2075 6e69 7473 206f 6620 7468 6520  in units of the 
+0000e060: 7175 6f74 6520 6375 7272 656e 6379 2c20  quote currency, 
+0000e070: 6967 6e6f 7265 6420 696e 206d 6172 6b65  ignored in marke
+0000e080: 7420 6f72 6465 7273 0a20 2020 2020 2020  t orders.       
+0000e090: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
+0000e0a0: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
+0000e0b0: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+0000e0c0: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
+0000e0d0: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
+0000e0e0: 2020 2020 2020 3a70 6172 616d 2062 6f6f        :param boo
+0000e0f0: 6c20 5b70 6172 616d 732e 706f 7374 4f6e  l [params.postOn
+0000e100: 6c79 5d3a 2069 6620 5472 7565 2c20 7468  ly]: if True, th
+0000e110: 6520 6f72 6465 7220 7769 6c6c 206f 6e6c  e order will onl
+0000e120: 7920 6265 2070 6f73 7465 6420 746f 2074  y be posted to t
+0000e130: 6865 206f 7264 6572 2062 6f6f 6b20 616e  he order book an
+0000e140: 6420 6e6f 7420 6578 6563 7574 6564 2069  d not executed i
+0000e150: 6d6d 6564 6961 7465 6c79 0a20 2020 2020  mmediately.     
+0000e160: 2020 203a 7061 7261 6d20 626f 6f6c 205b     :param bool [
+0000e170: 7061 7261 6d73 2e72 6564 7563 654f 6e6c  params.reduceOnl
+0000e180: 795d 3a20 2a6d 6172 6769 6e20 6f6e 6c79  y]: *margin only
+0000e190: 2a20 696e 6469 6361 7465 7320 6966 2073  * indicates if s
+0000e1a0: 656c 6620 6f72 6465 7220 6973 2074 6f20  elf order is to 
+0000e1b0: 7265 6475 6365 2074 6865 2073 697a 6520  reduce the size 
+0000e1c0: 6f66 2061 2070 6f73 6974 696f 6e0a 2020  of a position.  
+0000e1d0: 2020 2020 2020 3a70 6172 616d 2066 6c6f        :param flo
+0000e1e0: 6174 205b 7061 7261 6d73 2e73 746f 704c  at [params.stopL
+0000e1f0: 6f73 7350 7269 6365 5d3a 202a 6d61 7267  ossPrice]: *marg
+0000e200: 696e 206f 6e6c 792a 2074 6865 2070 7269  in only* the pri
+0000e210: 6365 2074 6861 7420 6120 7374 6f70 206c  ce that a stop l
+0000e220: 6f73 7320 6f72 6465 7220 6973 2074 7269  oss order is tri
+0000e230: 6767 6572 6564 2061 740a 2020 2020 2020  ggered at.      
+0000e240: 2020 3a70 6172 616d 2066 6c6f 6174 205b    :param float [
+0000e250: 7061 7261 6d73 2e74 616b 6550 726f 6669  params.takeProfi
+0000e260: 7450 7269 6365 5d3a 202a 6d61 7267 696e  tPrice]: *margin
+0000e270: 206f 6e6c 792a 2074 6865 2070 7269 6365   only* the price
+0000e280: 2074 6861 7420 6120 7461 6b65 2070 726f   that a take pro
+0000e290: 6669 7420 6f72 6465 7220 6973 2074 7269  fit order is tri
+0000e2a0: 6767 6572 6564 2061 740a 2020 2020 2020  ggered at.      
+0000e2b0: 2020 3a70 6172 616d 2073 7472 205b 7061    :param str [pa
+0000e2c0: 7261 6d73 2e74 7261 696c 696e 6741 6d6f  rams.trailingAmo
+0000e2d0: 756e 745d 3a20 2a6d 6172 6769 6e20 6f6e  unt]: *margin on
+0000e2e0: 6c79 2a20 7468 6520 7175 6f74 6520 616d  ly* the quote am
+0000e2f0: 6f75 6e74 2074 6f20 7472 6169 6c20 6177  ount to trail aw
+0000e300: 6179 2066 726f 6d20 7468 6520 6375 7272  ay from the curr
+0000e310: 656e 7420 6d61 726b 6574 2070 7269 6365  ent market price
+0000e320: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+0000e330: 7374 7220 5b70 6172 616d 732e 7472 6169  str [params.trai
+0000e340: 6c69 6e67 4c69 6d69 7441 6d6f 756e 745d  lingLimitAmount]
+0000e350: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
+0000e360: 7468 6520 7175 6f74 6520 616d 6f75 6e74  the quote amount
+0000e370: 2061 7761 7920 6672 6f6d 2074 6865 2074   away from the t
+0000e380: 7261 696c 696e 6741 6d6f 756e 740a 2020  railingAmount.  
+0000e390: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000e3a0: 205b 7061 7261 6d73 2e6f 6666 7365 745d   [params.offset]
+0000e3b0: 3a20 2a6d 6172 6769 6e20 6f6e 6c79 2a20  : *margin only* 
+0000e3c0: 272b 2720 6f72 2027 2d27 2077 6865 7468  '+' or '-' wheth
+0000e3d0: 6572 2079 6f75 2077 616e 7420 7468 6520  er you want the 
+0000e3e0: 7472 6169 6c69 6e67 4c69 6d69 7441 6d6f  trailingLimitAmo
+0000e3f0: 756e 7420 7661 6c75 6520 746f 2062 6520  unt value to be 
+0000e400: 706f 7369 7469 7665 206f 7220 6e65 6761  positive or nega
+0000e410: 7469 7665 2c20 6465 6661 756c 7420 6973  tive, default is
+0000e420: 206e 6567 6174 6976 6520 272d 270a 2020   negative '-'.  
+0000e430: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+0000e440: 205b 7061 7261 6d73 2e74 7269 6767 6572   [params.trigger
+0000e450: 5d3a 202a 6d61 7267 696e 206f 6e6c 792a  ]: *margin only*
+0000e460: 2074 6865 2061 6374 6976 6174 696f 6e20   the activation 
+0000e470: 7072 6963 6520 7479 7065 2c20 276c 6173  price type, 'las
+0000e480: 7427 206f 7220 2769 6e64 6578 272c 2064  t' or 'index', d
+0000e490: 6566 6175 6c74 2069 7320 276c 6173 7427  efault is 'last'
+0000e4a0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0000e4b0: 7320 6469 6374 3a20 616e 2060 6f72 6465  s dict: an `orde
+0000e4c0: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+0000e4d0: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0000e4e0: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
+0000e4f0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0000e500: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+0000e510: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+0000e520: 2829 0a20 2020 2020 2020 206d 6172 6b65  ().        marke
+0000e530: 7420 3d20 7365 6c66 2e6d 6172 6b65 7428  t = self.market(
+0000e540: 7379 6d62 6f6c 290a 2020 2020 2020 2020  symbol).        
+0000e550: 7265 7175 6573 7420 3d20 7b0a 2020 2020  request = {.    
+0000e560: 2020 2020 2020 2020 2770 6169 7227 3a20          'pair': 
+0000e570: 6d61 726b 6574 5b27 6964 275d 2c0a 2020  market['id'],.  
+0000e580: 2020 2020 2020 2020 2020 2774 7970 6527            'type'
+0000e590: 3a20 7369 6465 2c0a 2020 2020 2020 2020  : side,.        
+0000e5a0: 2020 2020 276f 7264 6572 7479 7065 273a      'ordertype':
+0000e5b0: 2074 7970 652c 0a20 2020 2020 2020 2020   type,.         
+0000e5c0: 2020 2027 766f 6c75 6d65 273a 2073 656c     'volume': sel
+0000e5d0: 662e 616d 6f75 6e74 5f74 6f5f 7072 6563  f.amount_to_prec
+0000e5e0: 6973 696f 6e28 7379 6d62 6f6c 2c20 616d  ision(symbol, am
+0000e5f0: 6f75 6e74 292c 0a20 2020 2020 2020 207d  ount),.        }
+0000e600: 0a20 2020 2020 2020 206f 7264 6572 5265  .        orderRe
+0000e610: 7175 6573 7420 3d20 7365 6c66 2e6f 7264  quest = self.ord
+0000e620: 6572 5f72 6571 7565 7374 2827 6372 6561  er_request('crea
+0000e630: 7465 4f72 6465 7228 2927 2c20 7379 6d62  teOrder()', symb
+0000e640: 6f6c 2c20 7479 7065 2c20 7265 7175 6573  ol, type, reques
+0000e650: 742c 2070 7269 6365 2c20 7061 7261 6d73  t, price, params
+0000e660: 290a 2020 2020 2020 2020 7265 7370 6f6e  ).        respon
+0000e670: 7365 203d 2073 656c 662e 7072 6976 6174  se = self.privat
+0000e680: 6550 6f73 7441 6464 4f72 6465 7228 7365  ePostAddOrder(se
+0000e690: 6c66 2e65 7874 656e 6428 6f72 6465 7252  lf.extend(orderR
+0000e6a0: 6571 7565 7374 5b30 5d2c 206f 7264 6572  equest[0], order
+0000e6b0: 5265 7175 6573 745b 315d 2929 0a20 2020  Request[1])).   
+0000e6c0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0000e6d0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0000e6e0: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
+0000e6f0: 3a20 5b5d 2c0a 2020 2020 2020 2020 2320  : [],.        # 
+0000e700: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0000e710: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0000e720: 2020 2020 2020 2020 2020 2264 6573 6372            "descr
+0000e730: 223a 207b 6f72 6465 723a 2027 6275 7920  ": {order: 'buy 
+0000e740: 302e 3032 3130 3030 3030 2045 5448 5553  0.02100000 ETHUS
+0000e750: 4454 2040 206c 696d 6974 2033 3330 2e30  DT @ limit 330.0
+0000e760: 3027 7d2c 0a20 2020 2020 2020 2023 2020  0'},.        #  
+0000e770: 2020 2020 2020 2020 2020 2022 7478 6964             "txid
+0000e780: 223a 205b 274f 454b 5656 322d 4948 3532  ": ['OEKVV2-IH52
+0000e790: 4f2d 5450 4c36 475a 275d 0a20 2020 2020  O-TPL6GZ'].     
+0000e7a0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
+0000e7b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0000e7c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0000e7d0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+0000e7e0: 6166 655f 6469 6374 2872 6573 706f 6e73  afe_dict(respons
+0000e7f0: 652c 2027 7265 7375 6c74 2729 0a20 2020  e, 'result').   
+0000e800: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0000e810: 2e70 6172 7365 5f6f 7264 6572 2872 6573  .parse_order(res
+0000e820: 756c 7429 0a0a 2020 2020 6465 6620 6669  ult)..    def fi
+0000e830: 6e64 5f6d 6172 6b65 745f 6279 5f61 6c74  nd_market_by_alt
+0000e840: 6e61 6d65 5f6f 725f 6964 2873 656c 662c  name_or_id(self,
+0000e850: 2069 6429 3a0a 2020 2020 2020 2020 6d61   id):.        ma
+0000e860: 726b 6574 7342 7941 6c74 6e61 6d65 203d  rketsByAltname =
+0000e870: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+0000e880: 2873 656c 662e 6f70 7469 6f6e 732c 2027  (self.options, '
+0000e890: 6d61 726b 6574 7342 7941 6c74 6e61 6d65  marketsByAltname
+0000e8a0: 272c 207b 7d29 0a20 2020 2020 2020 2069  ', {}).        i
+0000e8b0: 6620 6964 2069 6e20 6d61 726b 6574 7342  f id in marketsB
+0000e8c0: 7941 6c74 6e61 6d65 3a0a 2020 2020 2020  yAltname:.      
+0000e8d0: 2020 2020 2020 7265 7475 726e 206d 6172        return mar
+0000e8e0: 6b65 7473 4279 416c 746e 616d 655b 6964  ketsByAltname[id
+0000e8f0: 5d0a 2020 2020 2020 2020 656c 7365 3a0a  ].        else:.
+0000e900: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000e910: 726e 2073 656c 662e 7361 6665 5f6d 6172  rn self.safe_mar
+0000e920: 6b65 7428 6964 290a 0a20 2020 2064 6566  ket(id)..    def
+0000e930: 2067 6574 5f64 656c 6973 7465 645f 6d61   get_delisted_ma
+0000e940: 726b 6574 5f62 795f 6964 2873 656c 662c  rket_by_id(self,
+0000e950: 2069 6429 3a0a 2020 2020 2020 2020 6966   id):.        if
+0000e960: 2069 6420 6973 204e 6f6e 653a 0a20 2020   id is None:.   
+0000e970: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+0000e980: 6964 0a20 2020 2020 2020 206d 6172 6b65  id.        marke
+0000e990: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
+0000e9a0: 6c75 6528 7365 6c66 2e6f 7074 696f 6e73  lue(self.options
+0000e9b0: 5b27 6465 6c69 7374 6564 4d61 726b 6574  ['delistedMarket
+0000e9c0: 7342 7949 6427 5d2c 2069 6429 0a20 2020  sById'], id).   
+0000e9d0: 2020 2020 2069 6620 6d61 726b 6574 2069       if market i
+0000e9e0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000e9f0: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+0000ea00: 6172 6b65 740a 2020 2020 2020 2020 6261  arket.        ba
+0000ea10: 7365 4964 5374 6172 7420 3d20 300a 2020  seIdStart = 0.  
+0000ea20: 2020 2020 2020 6261 7365 4964 456e 6420        baseIdEnd 
+0000ea30: 3d20 330a 2020 2020 2020 2020 7175 6f74  = 3.        quot
+0000ea40: 6549 6453 7461 7274 203d 2033 0a20 2020  eIdStart = 3.   
+0000ea50: 2020 2020 2071 756f 7465 4964 456e 6420       quoteIdEnd 
+0000ea60: 3d20 360a 2020 2020 2020 2020 6966 206c  = 6.        if l
+0000ea70: 656e 2869 6429 203d 3d20 383a 0a20 2020  en(id) == 8:.   
+0000ea80: 2020 2020 2020 2020 2062 6173 6549 6445           baseIdE
+0000ea90: 6e64 203d 2034 0a20 2020 2020 2020 2020  nd = 4.         
+0000eaa0: 2020 2071 756f 7465 4964 5374 6172 7420     quoteIdStart 
+0000eab0: 3d20 340a 2020 2020 2020 2020 2020 2020  = 4.            
+0000eac0: 7175 6f74 6549 6445 6e64 203d 2038 0a20  quoteIdEnd = 8. 
+0000ead0: 2020 2020 2020 2065 6c69 6620 6c65 6e28         elif len(
+0000eae0: 6964 2920 3d3d 2037 3a0a 2020 2020 2020  id) == 7:.      
+0000eaf0: 2020 2020 2020 6261 7365 4964 456e 6420        baseIdEnd 
+0000eb00: 3d20 340a 2020 2020 2020 2020 2020 2020  = 4.            
+0000eb10: 7175 6f74 6549 6453 7461 7274 203d 2034  quoteIdStart = 4
+0000eb20: 0a20 2020 2020 2020 2020 2020 2071 756f  .            quo
+0000eb30: 7465 4964 456e 6420 3d20 370a 2020 2020  teIdEnd = 7.    
+0000eb40: 2020 2020 6261 7365 4964 203d 2069 645b      baseId = id[
+0000eb50: 6261 7365 4964 5374 6172 743a 6261 7365  baseIdStart:base
+0000eb60: 4964 456e 645d 0a20 2020 2020 2020 2071  IdEnd].        q
+0000eb70: 756f 7465 4964 203d 2069 645b 7175 6f74  uoteId = id[quot
+0000eb80: 6549 6453 7461 7274 3a71 756f 7465 4964  eIdStart:quoteId
+0000eb90: 456e 645d 0a20 2020 2020 2020 2062 6173  End].        bas
+0000eba0: 6520 3d20 7365 6c66 2e73 6166 655f 6375  e = self.safe_cu
+0000ebb0: 7272 656e 6379 5f63 6f64 6528 6261 7365  rrency_code(base
+0000ebc0: 4964 290a 2020 2020 2020 2020 7175 6f74  Id).        quot
+0000ebd0: 6520 3d20 7365 6c66 2e73 6166 655f 6375  e = self.safe_cu
+0000ebe0: 7272 656e 6379 5f63 6f64 6528 7175 6f74  rrency_code(quot
+0000ebf0: 6549 6429 0a20 2020 2020 2020 2073 796d  eId).        sym
+0000ec00: 626f 6c20 3d20 6261 7365 202b 2027 2f27  bol = base + '/'
+0000ec10: 202b 2071 756f 7465 0a20 2020 2020 2020   + quote.       
+0000ec20: 206d 6172 6b65 7420 3d20 7b0a 2020 2020   market = {.    
+0000ec30: 2020 2020 2020 2020 2773 796d 626f 6c27          'symbol'
+0000ec40: 3a20 7379 6d62 6f6c 2c0a 2020 2020 2020  : symbol,.      
+0000ec50: 2020 2020 2020 2762 6173 6527 3a20 6261        'base': ba
+0000ec60: 7365 2c0a 2020 2020 2020 2020 2020 2020  se,.            
+0000ec70: 2771 756f 7465 273a 2071 756f 7465 2c0a  'quote': quote,.
+0000ec80: 2020 2020 2020 2020 2020 2020 2762 6173              'bas
+0000ec90: 6549 6427 3a20 6261 7365 4964 2c0a 2020  eId': baseId,.  
+0000eca0: 2020 2020 2020 2020 2020 2771 756f 7465            'quote
+0000ecb0: 4964 273a 2071 756f 7465 4964 2c0a 2020  Id': quoteId,.  
+0000ecc0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0000ecd0: 7365 6c66 2e6f 7074 696f 6e73 5b27 6465  self.options['de
+0000ece0: 6c69 7374 6564 4d61 726b 6574 7342 7949  listedMarketsByI
+0000ecf0: 6427 5d5b 6964 5d20 3d20 6d61 726b 6574  d'][id] = market
+0000ed00: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000ed10: 6d61 726b 6574 0a0a 2020 2020 6465 6620  market..    def 
+0000ed20: 7061 7273 655f 6f72 6465 725f 7374 6174  parse_order_stat
+0000ed30: 7573 2873 656c 662c 2073 7461 7475 7329  us(self, status)
+0000ed40: 3a0a 2020 2020 2020 2020 7374 6174 7573  :.        status
+0000ed50: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
+0000ed60: 2020 2027 7065 6e64 696e 6727 3a20 276f     'pending': 'o
+0000ed70: 7065 6e27 2c20 2023 206f 7264 6572 2070  pen',  # order p
+0000ed80: 656e 6469 6e67 2062 6f6f 6b20 656e 7472  ending book entr
+0000ed90: 790a 2020 2020 2020 2020 2020 2020 276f  y.            'o
+0000eda0: 7065 6e27 3a20 276f 7065 6e27 2c0a 2020  pen': 'open',.  
+0000edb0: 2020 2020 2020 2020 2020 2763 6c6f 7365            'close
+0000edc0: 6427 3a20 2763 6c6f 7365 6427 2c0a 2020  d': 'closed',.  
+0000edd0: 2020 2020 2020 2020 2020 2763 616e 6365            'cance
+0000ede0: 6c65 6427 3a20 2763 616e 6365 6c65 6427  led': 'canceled'
+0000edf0: 2c0a 2020 2020 2020 2020 2020 2020 2765  ,.            'e
+0000ee00: 7870 6972 6564 273a 2027 6578 7069 7265  xpired': 'expire
+0000ee10: 6427 2c0a 2020 2020 2020 2020 7d0a 2020  d',.        }.  
+0000ee20: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000ee30: 662e 7361 6665 5f73 7472 696e 6728 7374  f.safe_string(st
+0000ee40: 6174 7573 6573 2c20 7374 6174 7573 2c20  atuses, status, 
+0000ee50: 7374 6174 7573 290a 0a20 2020 2064 6566  status)..    def
+0000ee60: 2070 6172 7365 5f6f 7264 6572 5f74 7970   parse_order_typ
+0000ee70: 6528 7365 6c66 2c20 7374 6174 7573 293a  e(self, status):
+0000ee80: 0a20 2020 2020 2020 2073 7461 7475 7365  .        statuse
+0000ee90: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
+0000eea0: 2020 2774 616b 652d 7072 6f66 6974 273a    'take-profit':
+0000eeb0: 2027 6d61 726b 6574 272c 0a20 2020 2020   'market',.     
+0000eec0: 2020 2020 2020 2027 7374 6f70 2d6c 6f73         'stop-los
+0000eed0: 732d 6c69 6d69 7427 3a20 276c 696d 6974  s-limit': 'limit
+0000eee0: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+0000eef0: 7374 6f70 2d6c 6f73 7327 3a20 276d 6172  stop-loss': 'mar
+0000ef00: 6b65 7427 2c0a 2020 2020 2020 2020 2020  ket',.          
+0000ef10: 2020 2774 616b 652d 7072 6f66 6974 2d6c    'take-profit-l
+0000ef20: 696d 6974 273a 2027 6c69 6d69 7427 2c0a  imit': 'limit',.
+0000ef30: 2020 2020 2020 2020 2020 2020 2774 7261              'tra
+0000ef40: 696c 696e 672d 7374 6f70 2d6c 696d 6974  iling-stop-limit
+0000ef50: 273a 2027 6c69 6d69 7427 2c0a 2020 2020  ': 'limit',.    
+0000ef60: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
+0000ef70: 7475 726e 2073 656c 662e 7361 6665 5f73  turn self.safe_s
+0000ef80: 7472 696e 6728 7374 6174 7573 6573 2c20  tring(statuses, 
+0000ef90: 7374 6174 7573 2c20 7374 6174 7573 290a  status, status).
+0000efa0: 0a20 2020 2064 6566 2070 6172 7365 5f6f  .    def parse_o
+0000efb0: 7264 6572 2873 656c 662c 206f 7264 6572  rder(self, order
+0000efc0: 2c20 6d61 726b 6574 3a20 4d61 726b 6574  , market: Market
+0000efd0: 203d 204e 6f6e 6529 202d 3e20 4f72 6465   = None) -> Orde
+0000efe0: 723a 0a20 2020 2020 2020 2023 0a20 2020  r:.        #.   
+0000eff0: 2020 2020 2023 2063 7265 6174 654f 7264       # createOrd
+0000f000: 6572 2066 6f72 2072 6567 756c 6172 206f  er for regular o
+0000f010: 7264 6572 730a 2020 2020 2020 2020 230a  rders.        #.
+0000f020: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0000f030: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f040: 2020 2264 6573 6372 223a 207b 6f72 6465    "descr": {orde
+0000f050: 723a 2027 6275 7920 302e 3032 3130 3030  r: 'buy 0.021000
+0000f060: 3030 2045 5448 5553 4454 2040 206c 696d  00 ETHUSDT @ lim
+0000f070: 6974 2033 3330 2e30 3027 7d2c 0a20 2020  it 330.00'},.   
+0000f080: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+0000f090: 7478 6964 223a 205b 274f 454b 5656 322d  txid": ['OEKVV2-
+0000f0a0: 4948 3532 4f2d 5450 4c36 475a 275d 0a20  IH52O-TPL6GZ']. 
+0000f0b0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+0000f0c0: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+0000f0d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000f0e0: 2022 7478 6964 223a 205b 2254 585f 4944   "txid": ["TX_ID
+0000f0f0: 5f48 4552 4522 5d2c 0a20 2020 2020 2020  _HERE"],.       
+0000f100: 2023 2020 2020 2020 2020 2022 6465 7363   #         "desc
+0000f110: 7222 3a20 7b22 6f72 6465 7222 3a22 6275  r": {"order":"bu
+0000f120: 7920 302e 3132 3334 3536 3738 2045 5448  y 0.12345678 ETH
+0000f130: 4555 5220 4020 6d61 726b 6574 227d 2c0a  EUR @ market"},.
+0000f140: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0000f150: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000f160: 2020 230a 2020 2020 2020 2020 2320 6372    #.        # cr
+0000f170: 6561 7465 4f72 6465 7220 666f 7220 7374  eateOrder for st
+0000f180: 6f70 206f 7264 6572 730a 2020 2020 2020  op orders.      
+0000f190: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0000f1a0: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0000f1b0: 2020 2020 2020 2274 7869 6422 3a5b 224f        "txid":["O
+0000f1c0: 5349 4c4e 432d 5651 4935 512d 3737 355a  SILNC-VQI5Q-775Z
+0000f1d0: 4451 225d 2c0a 2020 2020 2020 2020 2320  DQ"],.        # 
+0000f1e0: 2020 2020 2020 2020 2264 6573 6372 223a          "descr":
+0000f1f0: 7b22 6f72 6465 7222 3a22 7365 6c6c 2031  {"order":"sell 1
+0000f200: 3637 2e32 3830 3032 3637 3620 4144 4158  67.28002676 ADAX
+0000f210: 4254 2040 2073 746f 7020 6c6f 7373 2030  BT @ stop loss 0
+0000f220: 2e30 3030 3033 3238 3020 2d3e 206c 696d  .00003280 -> lim
+0000f230: 6974 2030 2e30 3030 3033 3231 3222 7d0a  it 0.00003212"}.
+0000f240: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0000f250: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000f260: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0000f270: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0000f280: 2020 2020 2020 2274 7869 6422 3a5b 224f        "txid":["O
+0000f290: 5648 4d4a 562d 425a 5732 562d 364e 5a46  VHMJV-BZW2V-6NZF
+0000f2a0: 5746 225d 2c0a 2020 2020 2020 2020 2320  WF"],.        # 
+0000f2b0: 2020 2020 2020 2020 2264 6573 6372 223a          "descr":
+0000f2c0: 7b22 6f72 6465 7222 3a22 7365 6c6c 2030  {"order":"sell 0
+0000f2d0: 2e30 3031 3030 3030 3020 4554 4855 5344  .00100000 ETHUSD
+0000f2e0: 2040 2073 746f 7020 6c6f 7373 2032 3637   @ stop loss 267
+0000f2f0: 372e 3030 202d 3e20 6c69 6d69 7420 3235  7.00 -> limit 25
+0000f300: 3737 2e30 3020 7769 7468 2035 3a31 206c  77.00 with 5:1 l
+0000f310: 6576 6572 6167 6522 7d0a 2020 2020 2020  everage"}.      
+0000f320: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0000f330: 2020 230a 2020 2020 2020 2020 2320 6564    #.        # ed
+0000f340: 6974 4f72 6465 720a 2020 2020 2020 2020  itOrder.        
+0000f350: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+0000f360: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000f370: 2020 2020 2273 7461 7475 7322 3a20 226f      "status": "o
+0000f380: 6b22 2c0a 2020 2020 2020 2020 2320 2020  k",.        #   
+0000f390: 2020 2020 2020 2274 7869 6422 3a20 224f        "txid": "O
+0000f3a0: 4157 3242 4f2d 3752 5745 4b2d 505a 5935  AW2BO-7RWEK-PZY5
+0000f3b0: 554f 222c 0a20 2020 2020 2020 2023 2020  UO",.        #  
+0000f3c0: 2020 2020 2020 2022 6f72 6967 696e 616c         "original
+0000f3d0: 7478 6964 223a 2022 4f58 4c36 5353 2d55  txid": "OXL6SS-U
+0000f3e0: 504e 4d43 2d32 3657 4245 3722 2c0a 2020  PNMC-26WBE7",.  
+0000f3f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000f400: 2276 6f6c 756d 6522 3a20 2230 2e30 3030  "volume": "0.000
+0000f410: 3735 3030 3022 2c0a 2020 2020 2020 2020  75000",.        
+0000f420: 2320 2020 2020 2020 2020 2270 7269 6365  #         "price
+0000f430: 223a 2022 3133 3530 302e 3022 2c0a 2020  ": "13500.0",.  
+0000f440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000f450: 226f 7264 6572 735f 6361 6e63 656c 6c65  "orders_cancelle
+0000f460: 6422 3a20 312c 0a20 2020 2020 2020 2023  d": 1,.        #
+0000f470: 2020 2020 2020 2020 2022 6465 7363 7222           "descr"
+0000f480: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0000f490: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0000f4a0: 223a 2022 6275 7920 302e 3030 3037 3530  ": "buy 0.000750
+0000f4b0: 3030 2058 4254 5553 4454 2040 206c 696d  00 XBTUSDT @ lim
+0000f4c0: 6974 2031 3335 3030 2e30 220a 2020 2020  it 13500.0".    
+0000f4d0: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
+0000f4e0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
+0000f4f0: 2020 2020 2020 2020 2320 2077 7320 2d20          #  ws - 
+0000f500: 6372 6561 7465 4f72 6465 720a 2020 2020  createOrder.    
+0000f510: 2020 2020 2320 2020 207b 0a20 2020 2020      #    {.     
+0000f520: 2020 2023 2020 2020 2020 2020 2264 6573     #        "des
+0000f530: 6372 223a 2027 7365 6c6c 2030 2e30 3030  cr": 'sell 0.000
+0000f540: 3130 3030 3020 5842 5455 5344 5420 4020  10000 XBTUSDT @ 
+0000f550: 6d61 726b 6574 272c 0a20 2020 2020 2020  market',.       
+0000f560: 2023 2020 2020 2020 2020 2265 7665 6e74   #        "event
+0000f570: 223a 2027 6164 644f 7264 6572 5374 6174  ": 'addOrderStat
+0000f580: 7573 272c 0a20 2020 2020 2020 2023 2020  us',.        #  
+0000f590: 2020 2020 2020 2272 6571 6964 223a 2031        "reqid": 1
+0000f5a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000f5b0: 2020 2022 7374 6174 7573 223a 2027 6f6b     "status": 'ok
+0000f5c0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+0000f5d0: 2020 2020 2274 7869 6422 3a20 274f 4156      "txid": 'OAV
+0000f5e0: 585a 482d 5849 4535 342d 4a43 5959 4447  XZH-XIE54-JCYYDG
+0000f5f0: 270a 2020 2020 2020 2020 2320 2020 207d  '.        #    }
+0000f600: 0a20 2020 2020 2020 2023 2020 7773 202d  .        #  ws -
+0000f610: 2065 6469 744f 7264 6572 0a20 2020 2020   editOrder.     
+0000f620: 2020 2023 2020 2020 7b0a 2020 2020 2020     #    {.      
+0000f630: 2020 2320 2020 2020 2020 2022 6465 7363    #        "desc
+0000f640: 7222 3a20 226f 7264 6572 2065 6469 7465  r": "order edite
+0000f650: 6420 7072 6963 6520 3d20 3930 3030 2e30  d price = 9000.0
+0000f660: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0000f670: 2020 2320 2020 2020 2020 2022 6576 656e    #        "even
+0000f680: 7422 3a20 2265 6469 744f 7264 6572 5374  t": "editOrderSt
+0000f690: 6174 7573 222c 0a20 2020 2020 2020 2023  atus",.        #
+0000f6a0: 2020 2020 2020 2020 226f 7269 6769 6e61          "origina
+0000f6b0: 6c74 7869 6422 3a20 224f 3635 4b5a 572d  ltxid": "O65KZW-
+0000f6c0: 4a34 4157 332d 5646 5337 3441 222c 0a20  J4AW3-VFS74A",. 
+0000f6d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000f6e0: 2272 6571 6964 223a 2033 2c0a 2020 2020  "reqid": 3,.    
+0000f6f0: 2020 2020 2320 2020 2020 2020 2022 7374      #        "st
+0000f700: 6174 7573 223a 2022 6f6b 222c 0a20 2020  atus": "ok",.   
+0000f710: 2020 2020 2023 2020 2020 2020 2020 2274       #        "t
+0000f720: 7869 6422 3a20 224f 5449 3637 322d 484a  xid": "OTI672-HJ
+0000f730: 4641 4f2d 584f 4950 504b 220a 2020 2020  FAO-XOIPPK".    
+0000f740: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
+0000f750: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+0000f760: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+0000f770: 2022 6572 726f 7222 3a20 5b5d 2c0a 2020   "error": [],.  
+0000f780: 2020 2020 2020 2320 2020 2020 2022 7265        #      "re
+0000f790: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
+0000f7a0: 2023 2020 2020 2020 2020 2020 226f 7065   #          "ope
+0000f7b0: 6e22 3a20 7b0a 2020 2020 2020 2020 2320  n": {.        # 
+0000f7c0: 2020 2020 2020 2020 2020 2020 2022 4f58               "OX
+0000f7d0: 5650 5355 2d51 3732 3646 2d4c 3353 4445  VPSU-Q726F-L3SDE
+0000f7e0: 5022 3a20 7b0a 2020 2020 2020 2020 2320  P": {.        # 
+0000f7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f800: 2022 7265 6669 6422 3a20 6e75 6c6c 2c0a   "refid": null,.
+0000f810: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000f820: 2020 2020 2020 2020 2020 2022 7573 6572             "user
+0000f830: 7265 6622 3a20 302c 0a20 2020 2020 2020  ref": 0,.       
+0000f840: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0000f850: 2020 2020 2273 7461 7475 7322 3a20 226f      "status": "o
+0000f860: 7065 6e22 2c0a 2020 2020 2020 2020 2320  pen",.        # 
+0000f870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f880: 2022 6f70 656e 746d 223a 2031 3730 3638   "opentm": 17068
+0000f890: 3933 3336 372e 3436 3536 3634 392c 0a20  93367.4656649,. 
+0000f8a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0000f8b0: 2020 2020 2020 2020 2020 2273 7461 7274            "start
+0000f8c0: 746d 223a 2030 2c0a 2020 2020 2020 2020  tm": 0,.        
+0000f8d0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000f8e0: 2020 2022 6578 7069 7265 746d 223a 2030     "expiretm": 0
+0000f8f0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000f900: 2020 2020 2020 2020 2020 2020 2022 6465               "de
+0000f910: 7363 7222 3a20 7b0a 2020 2020 2020 2020  scr": {.        
+0000f920: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000f930: 2020 2020 2020 2022 7061 6972 223a 2022         "pair": "
+0000f940: 5852 5045 5552 222c 0a20 2020 2020 2020  XRPEUR",.       
+0000f950: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0000f960: 2020 2020 2020 2020 2274 7970 6522 3a20          "type": 
+0000f970: 2273 656c 6c22 2c0a 2020 2020 2020 2020  "sell",.        
+0000f980: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000f990: 2020 2020 2020 2022 6f72 6465 7274 7970         "ordertyp
+0000f9a0: 6522 3a20 2274 7261 696c 696e 672d 7374  e": "trailing-st
+0000f9b0: 6f70 222c 0a20 2020 2020 2020 2023 2020  op",.        #  
+0000f9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f9d0: 2020 2020 2270 7269 6365 223a 2022 2b35      "price": "+5
+0000f9e0: 302e 3030 3030 2522 2c0a 2020 2020 2020  0.0000%",.      
 0000f9f0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0000fa00: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
-0000fa10: 3a20 222b 3530 2e30 3030 3025 222c 0a20  : "+50.0000%",. 
-0000fa20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000fa30: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-0000fa40: 7269 6365 3222 3a20 2230 222c 0a20 2020  rice2": "0",.   
-0000fa50: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000fa60: 2020 2020 2020 2020 2020 2020 226c 6576              "lev
-0000fa70: 6572 6167 6522 3a20 226e 6f6e 6522 2c0a  erage": "none",.
-0000fa80: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000fa90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0000faa0: 6f72 6465 7222 3a20 2273 656c 6c20 3130  order": "sell 10
-0000fab0: 2e30 3030 3030 3030 3020 5852 5045 5552  .00000000 XRPEUR
-0000fac0: 2040 2074 7261 696c 696e 6720 7374 6f70   @ trailing stop
-0000fad0: 202b 3530 2e30 3030 3025 222c 0a20 2020   +50.0000%",.   
-0000fae0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000faf0: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
-0000fb00: 7365 223a 2022 220a 2020 2020 2020 2020  se": "".        
-0000fb10: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0000fb20: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-0000fb30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb40: 2022 766f 6c22 3a20 2231 302e 3030 3030   "vol": "10.0000
+0000fa00: 2020 2020 2020 2020 2022 7072 6963 6532           "price2
+0000fa10: 223a 2022 3022 2c0a 2020 2020 2020 2020  ": "0",.        
+0000fa20: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000fa30: 2020 2020 2020 2022 6c65 7665 7261 6765         "leverage
+0000fa40: 223a 2022 6e6f 6e65 222c 0a20 2020 2020  ": "none",.     
+0000fa50: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000fa60: 2020 2020 2020 2020 2020 226f 7264 6572            "order
+0000fa70: 223a 2022 7365 6c6c 2031 302e 3030 3030  ": "sell 10.0000
+0000fa80: 3030 3030 2058 5250 4555 5220 4020 7472  0000 XRPEUR @ tr
+0000fa90: 6169 6c69 6e67 2073 746f 7020 2b35 302e  ailing stop +50.
+0000faa0: 3030 3030 2522 2c0a 2020 2020 2020 2020  0000%",.        
+0000fab0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000fac0: 2020 2020 2020 2022 636c 6f73 6522 3a20         "close": 
+0000fad0: 2222 0a20 2020 2020 2020 2023 2020 2020  "".        #    
+0000fae0: 2020 2020 2020 2020 2020 2020 2020 7d2c                },
+0000faf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0000fb00: 2020 2020 2020 2020 2020 2020 2276 6f6c              "vol
+0000fb10: 223a 2022 3130 2e30 3030 3030 3030 3022  ": "10.00000000"
+0000fb20: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0000fb30: 2020 2020 2020 2020 2020 2020 2022 766f               "vo
+0000fb40: 6c5f 6578 6563 223a 2022 302e 3030 3030  l_exec": "0.0000
 0000fb50: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
 0000fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb70: 2020 2276 6f6c 5f65 7865 6322 3a20 2230    "vol_exec": "0
-0000fb80: 2e30 3030 3030 3030 3022 2c0a 2020 2020  .00000000",.    
-0000fb90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000fba0: 2020 2020 2020 2022 636f 7374 223a 2022         "cost": "
-0000fbb0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-0000fbc0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000fbd0: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-0000fbe0: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-0000fbf0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-0000fc00: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
-0000fc10: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-0000fc20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0000fc30: 2020 2020 2020 2020 2020 2273 746f 7070            "stopp
-0000fc40: 7269 6365 223a 2022 302e 3233 3432 3430  rice": "0.234240
-0000fc50: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+0000fb70: 2020 2263 6f73 7422 3a20 2230 2e30 3030    "cost": "0.000
+0000fb80: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0000fb90: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000fba0: 2020 2022 6665 6522 3a20 2230 2e30 3030     "fee": "0.000
+0000fbb0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+0000fbc0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+0000fbd0: 2020 2022 7072 6963 6522 3a20 2230 2e30     "price": "0.0
+0000fbe0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0000fbf0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0000fc00: 2020 2020 2022 7374 6f70 7072 6963 6522       "stopprice"
+0000fc10: 3a20 2230 2e32 3334 3234 3030 3022 2c0a  : "0.23424000",.
+0000fc20: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0000fc30: 2020 2020 2020 2020 2020 2022 6c69 6d69             "limi
+0000fc40: 7470 7269 6365 223a 2022 302e 3436 3834  tprice": "0.4684
+0000fc50: 3730 3030 222c 0a20 2020 2020 2020 2023  7000",.        #
 0000fc60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fc70: 226c 696d 6974 7072 6963 6522 3a20 2230  "limitprice": "0
-0000fc80: 2e34 3638 3437 3030 3022 2c0a 2020 2020  .46847000",.    
-0000fc90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0000fca0: 2020 2020 2020 2022 6d69 7363 223a 2022         "misc": "
-0000fcb0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-0000fcc0: 2020 2020 2020 2020 2020 2020 2020 226f                "o
-0000fcd0: 666c 6167 7322 3a20 2266 6369 7122 2c0a  flags": "fciq",.
-0000fce0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0000fcf0: 2020 2020 2020 2020 2020 2022 7472 6967             "trig
-0000fd00: 6765 7222 3a20 2269 6e64 6578 220a 2020  ger": "index".  
-0000fd10: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0000fd20: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0000fd30: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0000fd40: 2320 207d 0a20 2020 2020 2020 2023 0a20  #  }.        #. 
-0000fd50: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0000fd60: 6f6e 203d 2073 656c 662e 7361 6665 5f64  on = self.safe_d
-0000fd70: 6963 7428 6f72 6465 722c 2027 6465 7363  ict(order, 'desc
-0000fd80: 7227 2c20 7b7d 290a 2020 2020 2020 2020  r', {}).        
-0000fd90: 6f72 6465 7244 6573 6372 6970 7469 6f6e  orderDescription
-0000fda0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000fdb0: 6966 2064 6573 6372 6970 7469 6f6e 2069  if description i
-0000fdc0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-0000fdd0: 2020 2020 2020 2020 6f72 6465 7244 6573          orderDes
-0000fde0: 6372 6970 7469 6f6e 203d 2073 656c 662e  cription = self.
-0000fdf0: 7361 6665 5f73 7472 696e 6728 6465 7363  safe_string(desc
-0000fe00: 7269 7074 696f 6e2c 2027 6f72 6465 7227  ription, 'order'
-0000fe10: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-0000fe20: 2020 2020 2020 2020 2020 2020 6f72 6465              orde
-0000fe30: 7244 6573 6372 6970 7469 6f6e 203d 2073  rDescription = s
-0000fe40: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
-0000fe50: 6f72 6465 722c 2027 6465 7363 7227 290a  order, 'descr').
-0000fe60: 2020 2020 2020 2020 7369 6465 203d 204e          side = N
-0000fe70: 6f6e 650a 2020 2020 2020 2020 7479 7065  one.        type
-0000fe80: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000fe90: 6d61 726b 6574 4964 203d 204e 6f6e 650a  marketId = None.
-0000fea0: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
-0000feb0: 4e6f 6e65 0a20 2020 2020 2020 2061 6d6f  None.        amo
-0000fec0: 756e 7420 3d20 4e6f 6e65 0a20 2020 2020  unt = None.     
-0000fed0: 2020 2073 746f 7050 7269 6365 203d 204e     stopPrice = N
-0000fee0: 6f6e 650a 2020 2020 2020 2020 6966 206f  one.        if o
-0000fef0: 7264 6572 4465 7363 7269 7074 696f 6e20  rderDescription 
-0000ff00: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-0000ff10: 2020 2020 2020 2020 2070 6172 7473 203d           parts =
-0000ff20: 206f 7264 6572 4465 7363 7269 7074 696f   orderDescriptio
-0000ff30: 6e2e 7370 6c69 7428 2720 2729 0a20 2020  n.split(' ').   
-0000ff40: 2020 2020 2020 2020 2073 6964 6520 3d20           side = 
-0000ff50: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0000ff60: 2870 6172 7473 2c20 3029 0a20 2020 2020  (parts, 0).     
-0000ff70: 2020 2020 2020 2061 6d6f 756e 7420 3d20         amount = 
-0000ff80: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0000ff90: 2870 6172 7473 2c20 3129 0a20 2020 2020  (parts, 1).     
-0000ffa0: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
-0000ffb0: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0000ffc0: 6e67 2870 6172 7473 2c20 3229 0a20 2020  ng(parts, 2).   
-0000ffd0: 2020 2020 2020 2020 2074 7970 6520 3d20           type = 
-0000ffe0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-0000fff0: 2870 6172 7473 2c20 3429 0a20 2020 2020  (parts, 4).     
-00010000: 2020 2020 2020 2069 6620 7479 7065 203d         if type =
-00010010: 3d20 2773 746f 7027 3a0a 2020 2020 2020  = 'stop':.      
-00010020: 2020 2020 2020 2020 2020 7374 6f70 5072            stopPr
-00010030: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00010040: 7374 7269 6e67 2870 6172 7473 2c20 3629  string(parts, 6)
-00010050: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010060: 2070 7269 6365 203d 2073 656c 662e 7361   price = self.sa
-00010070: 6665 5f73 7472 696e 6728 7061 7274 732c  fe_string(parts,
-00010080: 2039 290a 2020 2020 2020 2020 2020 2020   9).            
-00010090: 656c 6966 2074 7970 6520 3d3d 2027 6c69  elif type == 'li
-000100a0: 6d69 7427 3a0a 2020 2020 2020 2020 2020  mit':.          
-000100b0: 2020 2020 2020 7072 6963 6520 3d20 7365        price = se
-000100c0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-000100d0: 6172 7473 2c20 3529 0a20 2020 2020 2020  arts, 5).       
-000100e0: 2073 6964 6520 3d20 7365 6c66 2e73 6166   side = self.saf
-000100f0: 655f 7374 7269 6e67 2864 6573 6372 6970  e_string(descrip
-00010100: 7469 6f6e 2c20 2774 7970 6527 2c20 7369  tion, 'type', si
-00010110: 6465 290a 2020 2020 2020 2020 7479 7065  de).        type
-00010120: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00010130: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
-00010140: 2027 6f72 6465 7274 7970 6527 2c20 7479   'ordertype', ty
-00010150: 7065 290a 2020 2020 2020 2020 6d61 726b  pe).        mark
-00010160: 6574 4964 203d 2073 656c 662e 7361 6665  etId = self.safe
-00010170: 5f73 7472 696e 6728 6465 7363 7269 7074  _string(descript
-00010180: 696f 6e2c 2027 7061 6972 272c 206d 6172  ion, 'pair', mar
-00010190: 6b65 7449 6429 0a20 2020 2020 2020 2066  ketId).        f
-000101a0: 6f75 6e64 4d61 726b 6574 203d 2073 656c  oundMarket = sel
-000101b0: 662e 6669 6e64 5f6d 6172 6b65 745f 6279  f.find_market_by
-000101c0: 5f61 6c74 6e61 6d65 5f6f 725f 6964 286d  _altname_or_id(m
-000101d0: 6172 6b65 7449 6429 0a20 2020 2020 2020  arketId).       
-000101e0: 2073 796d 626f 6c20 3d20 4e6f 6e65 0a20   symbol = None. 
-000101f0: 2020 2020 2020 2069 6620 666f 756e 644d         if foundM
-00010200: 6172 6b65 7420 6973 206e 6f74 204e 6f6e  arket is not Non
-00010210: 653a 0a20 2020 2020 2020 2020 2020 206d  e:.            m
-00010220: 6172 6b65 7420 3d20 666f 756e 644d 6172  arket = foundMar
-00010230: 6b65 740a 2020 2020 2020 2020 656c 6966  ket.        elif
-00010240: 206d 6172 6b65 7449 6420 6973 206e 6f74   marketId is not
-00010250: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00010260: 2020 2023 2064 656c 6973 7465 6420 6d61     # delisted ma
-00010270: 726b 6574 2069 6473 2067 6f20 6865 7265  rket ids go here
-00010280: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
-00010290: 6b65 7420 3d20 7365 6c66 2e67 6574 5f64  ket = self.get_d
-000102a0: 656c 6973 7465 645f 6d61 726b 6574 5f62  elisted_market_b
-000102b0: 795f 6964 286d 6172 6b65 7449 6429 0a20  y_id(marketId). 
-000102c0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
-000102d0: 203d 2073 656c 662e 7361 6665 5f74 696d   = self.safe_tim
-000102e0: 6573 7461 6d70 286f 7264 6572 2c20 276f  estamp(order, 'o
-000102f0: 7065 6e74 6d27 290a 2020 2020 2020 2020  pentm').        
-00010300: 616d 6f75 6e74 203d 2073 656c 662e 7361  amount = self.sa
-00010310: 6665 5f73 7472 696e 6728 6f72 6465 722c  fe_string(order,
-00010320: 2027 766f 6c27 2c20 616d 6f75 6e74 290a   'vol', amount).
-00010330: 2020 2020 2020 2020 6669 6c6c 6564 203d          filled =
-00010340: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00010350: 6728 6f72 6465 722c 2027 766f 6c5f 6578  g(order, 'vol_ex
-00010360: 6563 2729 0a20 2020 2020 2020 2066 6565  ec').        fee
-00010370: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-00010380: 2320 6b72 616b 656e 2074 7275 6e63 6174  # kraken truncat
-00010390: 6573 2074 6865 2063 6f73 7420 696e 2074  es the cost in t
-000103a0: 6865 2061 7069 2072 6573 706f 6e73 6520  he api response 
-000103b0: 736f 2077 6520 7769 6c6c 2069 676e 6f72  so we will ignor
-000103c0: 6520 6974 2061 6e64 2063 616c 6375 6c61  e it and calcula
-000103d0: 7465 2069 7420 6672 6f6d 2061 7665 7261  te it from avera
-000103e0: 6765 2026 2066 696c 6c65 640a 2020 2020  ge & filled.    
-000103f0: 2020 2020 2320 636f 7374 203d 2073 656c      # cost = sel
-00010400: 662e 7361 6665 5f73 7472 696e 6728 6f72  f.safe_string(or
-00010410: 6465 722c 2027 636f 7374 2729 0a20 2020  der, 'cost').   
-00010420: 2020 2020 2070 7269 6365 203d 2073 656c       price = sel
-00010430: 662e 7361 6665 5f73 7472 696e 6728 6465  f.safe_string(de
-00010440: 7363 7269 7074 696f 6e2c 2027 7072 6963  scription, 'pric
-00010450: 6527 2c20 7072 6963 6529 0a20 2020 2020  e', price).     
-00010460: 2020 2023 2077 6865 6e20 7479 7065 203d     # when type =
-00010470: 2074 7261 696c 6c69 6e67 2073 746f 7020   trailling stop 
-00010480: 7265 7475 726e 7320 7072 6963 6520 3d20  returns price = 
-00010490: 272b 3530 2e30 3030 3025 270a 2020 2020  '+50.0000%'.    
-000104a0: 2020 2020 6966 2028 7072 6963 6520 6973      if (price is
-000104b0: 206e 6f74 204e 6f6e 6529 2061 6e64 2070   not None) and p
-000104c0: 7269 6365 2e65 6e64 7377 6974 6828 2725  rice.endswith('%
-000104d0: 2729 3a0a 2020 2020 2020 2020 2020 2020  '):.            
-000104e0: 7072 6963 6520 3d20 4e6f 6e65 2020 2320  price = None  # 
-000104f0: 7365 6c66 2069 7320 6e6f 7420 7468 6520  self is not the 
-00010500: 7072 6963 6520 7765 2077 616e 740a 2020  price we want.  
-00010510: 2020 2020 2020 6966 2028 7072 6963 6520        if (price 
-00010520: 6973 204e 6f6e 6529 206f 7220 5072 6563  is None) or Prec
-00010530: 6973 652e 7374 7269 6e67 5f65 7175 616c  ise.string_equal
-00010540: 7328 7072 6963 652c 2027 3027 293a 0a20  s(price, '0'):. 
-00010550: 2020 2020 2020 2020 2020 2070 7269 6365             price
-00010560: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00010570: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
-00010580: 2027 7072 6963 6532 2729 0a20 2020 2020   'price2').     
-00010590: 2020 2069 6620 2870 7269 6365 2069 7320     if (price is 
-000105a0: 4e6f 6e65 2920 6f72 2050 7265 6369 7365  None) or Precise
-000105b0: 2e73 7472 696e 675f 6571 7561 6c73 2870  .string_equals(p
-000105c0: 7269 6365 2c20 2730 2729 3a0a 2020 2020  rice, '0'):.    
-000105d0: 2020 2020 2020 2020 7072 6963 6520 3d20          price = 
-000105e0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
-000105f0: 286f 7264 6572 2c20 2770 7269 6365 272c  (order, 'price',
-00010600: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
-00010610: 666c 6167 7320 3d20 7365 6c66 2e73 6166  flags = self.saf
-00010620: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00010630: 276f 666c 6167 7327 2c20 2727 290a 2020  'oflags', '').  
-00010640: 2020 2020 2020 6973 506f 7374 4f6e 6c79        isPostOnly
-00010650: 203d 2066 6c61 6773 2e66 696e 6428 2770   = flags.find('p
-00010660: 6f73 7427 2920 3e20 2d31 0a20 2020 2020  ost') > -1.     
-00010670: 2020 2061 7665 7261 6765 203d 2073 656c     average = sel
-00010680: 662e 7361 6665 5f6e 756d 6265 7228 6f72  f.safe_number(or
-00010690: 6465 722c 2027 7072 6963 6527 290a 2020  der, 'price').  
-000106a0: 2020 2020 2020 6966 206d 6172 6b65 7420        if market 
-000106b0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000106c0: 2020 2020 2020 2020 2073 796d 626f 6c20           symbol 
-000106d0: 3d20 6d61 726b 6574 5b27 7379 6d62 6f6c  = market['symbol
-000106e0: 275d 0a20 2020 2020 2020 2020 2020 2069  '].            i
-000106f0: 6620 2766 6565 2720 696e 206f 7264 6572  f 'fee' in order
-00010700: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00010710: 2020 6665 6543 6f73 7420 3d20 7365 6c66    feeCost = self
-00010720: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
-00010730: 6572 2c20 2766 6565 2729 0a20 2020 2020  er, 'fee').     
-00010740: 2020 2020 2020 2020 2020 2066 6565 203d             fee =
-00010750: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-00010760: 2020 2020 2020 2027 636f 7374 273a 2066         'cost': f
-00010770: 6565 436f 7374 2c0a 2020 2020 2020 2020  eeCost,.        
-00010780: 2020 2020 2020 2020 2020 2020 2772 6174              'rat
-00010790: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
-000107a0: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-000107b0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
-000107c0: 6c61 6773 2e66 696e 6428 2766 6369 7127  lags.find('fciq'
-000107d0: 2920 3e3d 2030 3a0a 2020 2020 2020 2020  ) >= 0:.        
-000107e0: 2020 2020 2020 2020 2020 2020 6665 655b              fee[
-000107f0: 2763 7572 7265 6e63 7927 5d20 3d20 6d61  'currency'] = ma
-00010800: 726b 6574 5b27 7175 6f74 6527 5d0a 2020  rket['quote'].  
-00010810: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00010820: 6966 2066 6c61 6773 2e66 696e 6428 2766  if flags.find('f
-00010830: 6369 6227 2920 3e3d 2030 3a0a 2020 2020  cib') >= 0:.    
-00010840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010850: 6665 655b 2763 7572 7265 6e63 7927 5d20  fee['currency'] 
-00010860: 3d20 6d61 726b 6574 5b27 6261 7365 275d  = market['base']
-00010870: 0a20 2020 2020 2020 2073 7461 7475 7320  .        status 
-00010880: 3d20 7365 6c66 2e70 6172 7365 5f6f 7264  = self.parse_ord
-00010890: 6572 5f73 7461 7475 7328 7365 6c66 2e73  er_status(self.s
-000108a0: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
-000108b0: 2c20 2773 7461 7475 7327 2929 0a20 2020  , 'status')).   
-000108c0: 2020 2020 2069 6420 3d20 7365 6c66 2e73       id = self.s
-000108d0: 6166 655f 7374 7269 6e67 5f32 286f 7264  afe_string_2(ord
-000108e0: 6572 2c20 2769 6427 2c20 2774 7869 6427  er, 'id', 'txid'
-000108f0: 290a 2020 2020 2020 2020 6966 2028 6964  ).        if (id
-00010900: 2069 7320 4e6f 6e65 2920 6f72 2028 6964   is None) or (id
-00010910: 5b30 3a31 5d20 3d3d 2027 5b27 293a 0a20  [0:1] == '['):. 
-00010920: 2020 2020 2020 2020 2020 2074 7869 6420             txid 
-00010930: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-00010940: 6528 6f72 6465 722c 2027 7478 6964 2729  e(order, 'txid')
-00010950: 0a20 2020 2020 2020 2020 2020 2069 6420  .            id 
-00010960: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00010970: 6e67 2874 7869 642c 2030 290a 2020 2020  ng(txid, 0).    
-00010980: 2020 2020 636c 6965 6e74 4f72 6465 7249      clientOrderI
-00010990: 6420 3d20 7365 6c66 2e73 6166 655f 7374  d = self.safe_st
-000109a0: 7269 6e67 286f 7264 6572 2c20 2775 7365  ring(order, 'use
-000109b0: 7272 6566 2729 0a20 2020 2020 2020 2072  rref').        r
-000109c0: 6177 5472 6164 6573 203d 2073 656c 662e  awTrades = self.
-000109d0: 7361 6665 5f76 616c 7565 286f 7264 6572  safe_value(order
-000109e0: 2c20 2774 7261 6465 7327 2c20 5b5d 290a  , 'trades', []).
-000109f0: 2020 2020 2020 2020 7472 6164 6573 203d          trades =
-00010a00: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-00010a10: 6920 696e 2072 616e 6765 2830 2c20 6c65  i in range(0, le
-00010a20: 6e28 7261 7754 7261 6465 7329 293a 0a20  n(rawTrades)):. 
-00010a30: 2020 2020 2020 2020 2020 2072 6177 5472             rawTr
-00010a40: 6164 6520 3d20 7261 7754 7261 6465 735b  ade = rawTrades[
-00010a50: 695d 0a20 2020 2020 2020 2020 2020 2069  i].            i
-00010a60: 6620 6973 696e 7374 616e 6365 2872 6177  f isinstance(raw
-00010a70: 5472 6164 652c 2073 7472 293a 0a20 2020  Trade, str):.   
-00010a80: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-00010a90: 6465 732e 6170 7065 6e64 2873 656c 662e  des.append(self.
-00010aa0: 7361 6665 5f74 7261 6465 287b 2769 6427  safe_trade({'id'
-00010ab0: 3a20 7261 7754 7261 6465 2c20 276f 7264  : rawTrade, 'ord
-00010ac0: 6572 4964 273a 2069 642c 2027 7379 6d62  erId': id, 'symb
-00010ad0: 6f6c 273a 2073 796d 626f 6c2c 2027 696e  ol': symbol, 'in
-00010ae0: 666f 273a 207b 7d7d 2929 0a20 2020 2020  fo': {}})).     
-00010af0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00010b00: 2020 2020 2020 2020 2020 2020 2074 7261               tra
-00010b10: 6465 732e 6170 7065 6e64 2872 6177 5472  des.append(rawTr
-00010b20: 6164 6529 0a20 2020 2020 2020 2073 746f  ade).        sto
-00010b30: 7050 7269 6365 203d 2073 656c 662e 6f6d  pPrice = self.om
-00010b40: 6974 5f7a 6572 6f28 7365 6c66 2e73 6166  it_zero(self.saf
-00010b50: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
-00010b60: 2773 746f 7070 7269 6365 272c 2073 746f  'stopprice', sto
-00010b70: 7050 7269 6365 2929 0a20 2020 2020 2020  pPrice)).       
-00010b80: 2073 746f 704c 6f73 7350 7269 6365 203d   stopLossPrice =
-00010b90: 204e 6f6e 650a 2020 2020 2020 2020 7461   None.        ta
-00010ba0: 6b65 5072 6f66 6974 5072 6963 6520 3d20  keProfitPrice = 
-00010bb0: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
-00010bc0: 7479 7065 2e73 7461 7274 7377 6974 6828  type.startswith(
-00010bd0: 2774 616b 652d 7072 6f66 6974 2729 3a0a  'take-profit'):.
-00010be0: 2020 2020 2020 2020 2020 2020 7461 6b65              take
-00010bf0: 5072 6f66 6974 5072 6963 6520 3d20 7365  ProfitPrice = se
-00010c00: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
-00010c10: 6573 6372 6970 7469 6f6e 2c20 2770 7269  escription, 'pri
-00010c20: 6365 2729 0a20 2020 2020 2020 2020 2020  ce').           
-00010c30: 2070 7269 6365 203d 2073 656c 662e 6f6d   price = self.om
-00010c40: 6974 5f7a 6572 6f28 7365 6c66 2e73 6166  it_zero(self.saf
-00010c50: 655f 7374 7269 6e67 2864 6573 6372 6970  e_string(descrip
-00010c60: 7469 6f6e 2c20 2770 7269 6365 3227 2929  tion, 'price2'))
-00010c70: 0a20 2020 2020 2020 2065 6c69 6620 7479  .        elif ty
-00010c80: 7065 2e73 7461 7274 7377 6974 6828 2773  pe.startswith('s
-00010c90: 746f 702d 6c6f 7373 2729 3a0a 2020 2020  top-loss'):.    
-00010ca0: 2020 2020 2020 2020 7374 6f70 4c6f 7373          stopLoss
-00010cb0: 5072 6963 6520 3d20 7365 6c66 2e73 6166  Price = self.saf
-00010cc0: 655f 7374 7269 6e67 2864 6573 6372 6970  e_string(descrip
-00010cd0: 7469 6f6e 2c20 2770 7269 6365 2729 0a20  tion, 'price'). 
-00010ce0: 2020 2020 2020 2020 2020 2070 7269 6365             price
-00010cf0: 203d 2073 656c 662e 6f6d 6974 5f7a 6572   = self.omit_zer
-00010d00: 6f28 7365 6c66 2e73 6166 655f 7374 7269  o(self.safe_stri
-00010d10: 6e67 2864 6573 6372 6970 7469 6f6e 2c20  ng(description, 
-00010d20: 2770 7269 6365 3227 2929 0a20 2020 2020  'price2')).     
-00010d30: 2020 2072 6574 7572 6e20 7365 6c66 2e73     return self.s
-00010d40: 6166 655f 6f72 6465 7228 7b0a 2020 2020  afe_order({.    
-00010d50: 2020 2020 2020 2020 2769 6427 3a20 6964          'id': id
-00010d60: 2c0a 2020 2020 2020 2020 2020 2020 2763  ,.            'c
-00010d70: 6c69 656e 744f 7264 6572 4964 273a 2063  lientOrderId': c
-00010d80: 6c69 656e 744f 7264 6572 4964 2c0a 2020  lientOrderId,.  
-00010d90: 2020 2020 2020 2020 2020 2769 6e66 6f27            'info'
-00010da0: 3a20 6f72 6465 722c 0a20 2020 2020 2020  : order,.       
-00010db0: 2020 2020 2027 7469 6d65 7374 616d 7027       'timestamp'
-00010dc0: 3a20 7469 6d65 7374 616d 702c 0a20 2020  : timestamp,.   
-00010dd0: 2020 2020 2020 2020 2027 6461 7465 7469           'dateti
-00010de0: 6d65 273a 2073 656c 662e 6973 6f38 3630  me': self.iso860
-00010df0: 3128 7469 6d65 7374 616d 7029 2c0a 2020  1(timestamp),.  
-00010e00: 2020 2020 2020 2020 2020 276c 6173 7454            'lastT
-00010e10: 7261 6465 5469 6d65 7374 616d 7027 3a20  radeTimestamp': 
-00010e20: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00010e30: 2020 2773 7461 7475 7327 3a20 7374 6174    'status': stat
-00010e40: 7573 2c0a 2020 2020 2020 2020 2020 2020  us,.            
-00010e50: 2773 796d 626f 6c27 3a20 7379 6d62 6f6c  'symbol': symbol
-00010e60: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-00010e70: 7970 6527 3a20 7365 6c66 2e70 6172 7365  ype': self.parse
-00010e80: 5f6f 7264 6572 5f74 7970 6528 7479 7065  _order_type(type
-00010e90: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
-00010ea0: 7469 6d65 496e 466f 7263 6527 3a20 4e6f  timeInForce': No
-00010eb0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00010ec0: 2770 6f73 744f 6e6c 7927 3a20 6973 506f  'postOnly': isPo
-00010ed0: 7374 4f6e 6c79 2c0a 2020 2020 2020 2020  stOnly,.        
-00010ee0: 2020 2020 2773 6964 6527 3a20 7369 6465      'side': side
-00010ef0: 2c0a 2020 2020 2020 2020 2020 2020 2770  ,.            'p
-00010f00: 7269 6365 273a 2070 7269 6365 2c0a 2020  rice': price,.  
-00010f10: 2020 2020 2020 2020 2020 2773 746f 7050            'stopP
-00010f20: 7269 6365 273a 2073 746f 7050 7269 6365  rice': stopPrice
-00010f30: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-00010f40: 7269 6767 6572 5072 6963 6527 3a20 7374  riggerPrice': st
-00010f50: 6f70 5072 6963 652c 0a20 2020 2020 2020  opPrice,.       
-00010f60: 2020 2020 2027 7461 6b65 5072 6f66 6974       'takeProfit
-00010f70: 5072 6963 6527 3a20 7461 6b65 5072 6f66  Price': takeProf
-00010f80: 6974 5072 6963 652c 0a20 2020 2020 2020  itPrice,.       
-00010f90: 2020 2020 2027 7374 6f70 4c6f 7373 5072       'stopLossPr
-00010fa0: 6963 6527 3a20 7374 6f70 4c6f 7373 5072  ice': stopLossPr
-00010fb0: 6963 652c 0a20 2020 2020 2020 2020 2020  ice,.           
-00010fc0: 2027 636f 7374 273a 204e 6f6e 652c 0a20   'cost': None,. 
-00010fd0: 2020 2020 2020 2020 2020 2027 616d 6f75             'amou
-00010fe0: 6e74 273a 2061 6d6f 756e 742c 0a20 2020  nt': amount,.   
-00010ff0: 2020 2020 2020 2020 2027 6669 6c6c 6564           'filled
-00011000: 273a 2066 696c 6c65 642c 0a20 2020 2020  ': filled,.     
-00011010: 2020 2020 2020 2027 6176 6572 6167 6527         'average'
-00011020: 3a20 6176 6572 6167 652c 0a20 2020 2020  : average,.     
-00011030: 2020 2020 2020 2027 7265 6d61 696e 696e         'remainin
-00011040: 6727 3a20 4e6f 6e65 2c0a 2020 2020 2020  g': None,.      
-00011050: 2020 2020 2020 2766 6565 273a 2066 6565        'fee': fee
-00011060: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
-00011070: 7261 6465 7327 3a20 7472 6164 6573 2c0a  rades': trades,.
-00011080: 2020 2020 2020 2020 7d2c 206d 6172 6b65          }, marke
-00011090: 7429 0a0a 2020 2020 6465 6620 6f72 6465  t)..    def orde
-000110a0: 725f 7265 7175 6573 7428 7365 6c66 2c20  r_request(self, 
-000110b0: 6d65 7468 6f64 2c20 7379 6d62 6f6c 2c20  method, symbol, 
-000110c0: 7479 7065 2c20 7265 7175 6573 742c 2070  type, request, p
-000110d0: 7269 6365 3d4e 6f6e 652c 2070 6172 616d  rice=None, param
-000110e0: 733d 7b7d 293a 0a20 2020 2020 2020 2063  s={}):.        c
-000110f0: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
-00011100: 656c 662e 7361 6665 5f73 7472 696e 675f  elf.safe_string_
-00011110: 3228 7061 7261 6d73 2c20 2775 7365 7272  2(params, 'userr
-00011120: 6566 272c 2027 636c 6965 6e74 4f72 6465  ef', 'clientOrde
-00011130: 7249 6427 290a 2020 2020 2020 2020 7061  rId').        pa
-00011140: 7261 6d73 203d 2073 656c 662e 6f6d 6974  rams = self.omit
-00011150: 2870 6172 616d 732c 205b 2775 7365 7272  (params, ['userr
-00011160: 6566 272c 2027 636c 6965 6e74 4f72 6465  ef', 'clientOrde
-00011170: 7249 6427 5d29 0a20 2020 2020 2020 2069  rId']).        i
-00011180: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
-00011190: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000111a0: 2020 2020 2020 2020 2072 6571 7565 7374           request
-000111b0: 5b27 7573 6572 7265 6627 5d20 3d20 636c  ['userref'] = cl
-000111c0: 6965 6e74 4f72 6465 7249 640a 2020 2020  ientOrderId.    
-000111d0: 2020 2020 7374 6f70 4c6f 7373 5472 6967      stopLossTrig
-000111e0: 6765 7250 7269 6365 203d 2073 656c 662e  gerPrice = self.
-000111f0: 7361 6665 5f73 7472 696e 6728 7061 7261  safe_string(para
-00011200: 6d73 2c20 2773 746f 704c 6f73 7350 7269  ms, 'stopLossPri
-00011210: 6365 2729 0a20 2020 2020 2020 2074 616b  ce').        tak
-00011220: 6550 726f 6669 7454 7269 6767 6572 5072  eProfitTriggerPr
-00011230: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
-00011240: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-00011250: 7461 6b65 5072 6f66 6974 5072 6963 6527  takeProfitPrice'
-00011260: 290a 2020 2020 2020 2020 6973 5374 6f70  ).        isStop
-00011270: 4c6f 7373 5472 6967 6765 724f 7264 6572  LossTriggerOrder
-00011280: 203d 2073 746f 704c 6f73 7354 7269 6767   = stopLossTrigg
-00011290: 6572 5072 6963 6520 6973 206e 6f74 204e  erPrice is not N
-000112a0: 6f6e 650a 2020 2020 2020 2020 6973 5461  one.        isTa
-000112b0: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-000112c0: 7264 6572 203d 2074 616b 6550 726f 6669  rder = takeProfi
-000112d0: 7454 7269 6767 6572 5072 6963 6520 6973  tTriggerPrice is
-000112e0: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
-000112f0: 2020 6973 5374 6f70 4c6f 7373 4f72 5461    isStopLossOrTa
-00011300: 6b65 5072 6f66 6974 5472 6967 6765 7220  keProfitTrigger 
-00011310: 3d20 6973 5374 6f70 4c6f 7373 5472 6967  = isStopLossTrig
-00011320: 6765 724f 7264 6572 206f 7220 6973 5461  gerOrder or isTa
-00011330: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-00011340: 7264 6572 0a20 2020 2020 2020 2074 7261  rder.        tra
-00011350: 696c 696e 6741 6d6f 756e 7420 3d20 7365  ilingAmount = se
-00011360: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
-00011370: 6172 616d 732c 2027 7472 6169 6c69 6e67  arams, 'trailing
-00011380: 416d 6f75 6e74 2729 0a20 2020 2020 2020  Amount').       
-00011390: 2074 7261 696c 696e 674c 696d 6974 416d   trailingLimitAm
-000113a0: 6f75 6e74 203d 2073 656c 662e 7361 6665  ount = self.safe
-000113b0: 5f73 7472 696e 6728 7061 7261 6d73 2c20  _string(params, 
-000113c0: 2774 7261 696c 696e 674c 696d 6974 416d  'trailingLimitAm
-000113d0: 6f75 6e74 2729 0a20 2020 2020 2020 2069  ount').        i
-000113e0: 7354 7261 696c 696e 6741 6d6f 756e 744f  sTrailingAmountO
-000113f0: 7264 6572 203d 2074 7261 696c 696e 6741  rder = trailingA
-00011400: 6d6f 756e 7420 6973 206e 6f74 204e 6f6e  mount is not Non
-00011410: 650a 2020 2020 2020 2020 6973 4c69 6d69  e.        isLimi
-00011420: 744f 7264 6572 203d 2074 7970 652e 656e  tOrder = type.en
-00011430: 6473 7769 7468 2827 6c69 6d69 7427 2920  dswith('limit') 
-00011440: 2023 2073 7570 706f 7274 696e 6720 6c69   # supporting li
-00011450: 6d69 742c 2073 746f 702d 6c6f 7373 2d6c  mit, stop-loss-l
-00011460: 696d 6974 2c20 7461 6b65 2d70 726f 6669  imit, take-profi
-00011470: 742d 6c69 6d69 742c 2065 7463 0a20 2020  t-limit, etc.   
-00011480: 2020 2020 2069 6620 6973 4c69 6d69 744f       if isLimitO
-00011490: 7264 6572 2061 6e64 206e 6f74 2069 7354  rder and not isT
-000114a0: 7261 696c 696e 6741 6d6f 756e 744f 7264  railingAmountOrd
-000114b0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
-000114c0: 7265 7175 6573 745b 2770 7269 6365 275d  request['price']
-000114d0: 203d 2073 656c 662e 7072 6963 655f 746f   = self.price_to
-000114e0: 5f70 7265 6369 7369 6f6e 2873 796d 626f  _precision(symbo
-000114f0: 6c2c 2070 7269 6365 290a 2020 2020 2020  l, price).      
-00011500: 2020 7265 6475 6365 4f6e 6c79 203d 2073    reduceOnly = s
-00011510: 656c 662e 7361 6665 5f76 616c 7565 5f32  elf.safe_value_2
-00011520: 2870 6172 616d 732c 2027 7265 6475 6365  (params, 'reduce
-00011530: 4f6e 6c79 272c 2027 7265 6475 6365 5f6f  Only', 'reduce_o
-00011540: 6e6c 7927 290a 2020 2020 2020 2020 6966  nly').        if
-00011550: 2069 7353 746f 704c 6f73 734f 7254 616b   isStopLossOrTak
-00011560: 6550 726f 6669 7454 7269 6767 6572 3a0a  eProfitTrigger:.
-00011570: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00011580: 7353 746f 704c 6f73 7354 7269 6767 6572  sStopLossTrigger
-00011590: 4f72 6465 723a 0a20 2020 2020 2020 2020  Order:.         
-000115a0: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-000115b0: 7072 6963 6527 5d20 3d20 7365 6c66 2e70  price'] = self.p
-000115c0: 7269 6365 5f74 6f5f 7072 6563 6973 696f  rice_to_precisio
-000115d0: 6e28 7379 6d62 6f6c 2c20 7374 6f70 4c6f  n(symbol, stopLo
-000115e0: 7373 5472 6967 6765 7250 7269 6365 290a  ssTriggerPrice).
-000115f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011600: 6966 2069 734c 696d 6974 4f72 6465 723a  if isLimitOrder:
-00011610: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011620: 2020 2020 2072 6571 7565 7374 5b27 6f72       request['or
-00011630: 6465 7274 7970 6527 5d20 3d20 2773 746f  dertype'] = 'sto
-00011640: 702d 6c6f 7373 2d6c 696d 6974 270a 2020  p-loss-limit'.  
-00011650: 2020 2020 2020 2020 2020 2020 2020 656c                el
-00011660: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-00011670: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00011680: 276f 7264 6572 7479 7065 275d 203d 2027  'ordertype'] = '
-00011690: 7374 6f70 2d6c 6f73 7327 0a20 2020 2020  stop-loss'.     
-000116a0: 2020 2020 2020 2065 6c69 6620 6973 5461         elif isTa
-000116b0: 6b65 5072 6f66 6974 5472 6967 6765 724f  keProfitTriggerO
-000116c0: 7264 6572 3a0a 2020 2020 2020 2020 2020  rder:.          
-000116d0: 2020 2020 2020 7265 7175 6573 745b 2770        request['p
-000116e0: 7269 6365 275d 203d 2073 656c 662e 7072  rice'] = self.pr
-000116f0: 6963 655f 746f 5f70 7265 6369 7369 6f6e  ice_to_precision
-00011700: 2873 796d 626f 6c2c 2074 616b 6550 726f  (symbol, takePro
-00011710: 6669 7454 7269 6767 6572 5072 6963 6529  fitTriggerPrice)
-00011720: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011730: 2069 6620 6973 4c69 6d69 744f 7264 6572   if isLimitOrder
-00011740: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00011750: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
-00011760: 7264 6572 7479 7065 275d 203d 2027 7461  rdertype'] = 'ta
-00011770: 6b65 2d70 726f 6669 742d 6c69 6d69 7427  ke-profit-limit'
-00011780: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011790: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-000117a0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-000117b0: 7374 5b27 6f72 6465 7274 7970 6527 5d20  st['ordertype'] 
-000117c0: 3d20 2774 616b 652d 7072 6f66 6974 270a  = 'take-profit'.
-000117d0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-000117e0: 734c 696d 6974 4f72 6465 723a 0a20 2020  sLimitOrder:.   
-000117f0: 2020 2020 2020 2020 2020 2020 2072 6571               req
-00011800: 7565 7374 5b27 7072 6963 6532 275d 203d  uest['price2'] =
-00011810: 2073 656c 662e 7072 6963 655f 746f 5f70   self.price_to_p
-00011820: 7265 6369 7369 6f6e 2873 796d 626f 6c2c  recision(symbol,
-00011830: 2070 7269 6365 290a 2020 2020 2020 2020   price).        
-00011840: 656c 6966 2069 7354 7261 696c 696e 6741  elif isTrailingA
-00011850: 6d6f 756e 744f 7264 6572 3a0a 2020 2020  mountOrder:.    
-00011860: 2020 2020 2020 2020 7472 6169 6c69 6e67          trailing
-00011870: 4163 7469 7661 7469 6f6e 5072 6963 6554  ActivationPriceT
-00011880: 7970 6520 3d20 7365 6c66 2e73 6166 655f  ype = self.safe_
-00011890: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
-000118a0: 7472 6967 6765 7227 2c20 276c 6173 7427  trigger', 'last'
-000118b0: 290a 2020 2020 2020 2020 2020 2020 7472  ).            tr
-000118c0: 6169 6c69 6e67 416d 6f75 6e74 5374 7269  ailingAmountStri
-000118d0: 6e67 203d 2027 2b27 202b 2074 7261 696c  ng = '+' + trail
-000118e0: 696e 6741 6d6f 756e 740a 2020 2020 2020  ingAmount.      
-000118f0: 2020 2020 2020 7265 7175 6573 745b 2774        request['t
-00011900: 7269 6767 6572 275d 203d 2074 7261 696c  rigger'] = trail
-00011910: 696e 6741 6374 6976 6174 696f 6e50 7269  ingActivationPri
-00011920: 6365 5479 7065 0a20 2020 2020 2020 2020  ceType.         
-00011930: 2020 2069 6620 6973 4c69 6d69 744f 7264     if isLimitOrd
-00011940: 6572 206f 7220 2874 7261 696c 696e 674c  er or (trailingL
-00011950: 696d 6974 416d 6f75 6e74 2069 7320 6e6f  imitAmount is no
-00011960: 7420 4e6f 6e65 293a 0a20 2020 2020 2020  t None):.       
-00011970: 2020 2020 2020 2020 206f 6666 7365 7420           offset 
-00011980: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-00011990: 6e67 2870 6172 616d 732c 2027 6f66 6673  ng(params, 'offs
-000119a0: 6574 272c 2027 2d27 290a 2020 2020 2020  et', '-').      
-000119b0: 2020 2020 2020 2020 2020 7472 6169 6c69            traili
-000119c0: 6e67 4c69 6d69 7441 6d6f 756e 7453 7472  ngLimitAmountStr
-000119d0: 696e 6720 3d20 6f66 6673 6574 202b 2073  ing = offset + s
-000119e0: 656c 662e 6e75 6d62 6572 5f74 6f5f 7374  elf.number_to_st
-000119f0: 7269 6e67 2874 7261 696c 696e 674c 696d  ring(trailingLim
-00011a00: 6974 416d 6f75 6e74 290a 2020 2020 2020  itAmount).      
-00011a10: 2020 2020 2020 2020 2020 7265 7175 6573            reques
-00011a20: 745b 2770 7269 6365 275d 203d 2074 7261  t['price'] = tra
-00011a30: 696c 696e 6741 6d6f 756e 7453 7472 696e  ilingAmountStrin
-00011a40: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
-00011a50: 2020 7265 7175 6573 745b 2770 7269 6365    request['price
-00011a60: 3227 5d20 3d20 7472 6169 6c69 6e67 4c69  2'] = trailingLi
-00011a70: 6d69 7441 6d6f 756e 7453 7472 696e 670a  mitAmountString.
-00011a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011a90: 7265 7175 6573 745b 276f 7264 6572 7479  request['orderty
-00011aa0: 7065 275d 203d 2027 7472 6169 6c69 6e67  pe'] = 'trailing
-00011ab0: 2d73 746f 702d 6c69 6d69 7427 0a20 2020  -stop-limit'.   
-00011ac0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00011ad0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00011ae0: 6571 7565 7374 5b27 7072 6963 6527 5d20  equest['price'] 
-00011af0: 3d20 7472 6169 6c69 6e67 416d 6f75 6e74  = trailingAmount
-00011b00: 5374 7269 6e67 0a20 2020 2020 2020 2020  String.         
-00011b10: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00011b20: 6f72 6465 7274 7970 6527 5d20 3d20 2774  ordertype'] = 't
-00011b30: 7261 696c 696e 672d 7374 6f70 270a 2020  railing-stop'.  
-00011b40: 2020 2020 2020 6966 2072 6564 7563 654f        if reduceO
-00011b50: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
-00011b60: 2072 6571 7565 7374 5b27 7265 6475 6365   request['reduce
-00011b70: 5f6f 6e6c 7927 5d20 3d20 2774 7275 6527  _only'] = 'true'
-00011b80: 2020 2320 6e6f 7420 7573 696e 6720 6861    # not using ha
-00011b90: 7361 7474 7228 7365 6c66 2c20 626f 6f6c  sattr(self, bool
-00011ba0: 6561 6e29 2063 6173 652c 2062 6563 6175  ean) case, becau
-00011bb0: 7365 2074 6865 2075 726c 656e 636f 6465  se the urlencode
-00011bc0: 644e 6573 7465 6420 7472 616e 7366 6f72  dNested transfor
-00011bd0: 6d73 2069 7420 696e 746f 2027 5472 7565  ms it into 'True
-00011be0: 2720 7374 7269 6e67 0a20 2020 2020 2020  ' string.       
-00011bf0: 2063 6c6f 7365 203d 2073 656c 662e 7361   close = self.sa
-00011c00: 6665 5f76 616c 7565 2870 6172 616d 732c  fe_value(params,
-00011c10: 2027 636c 6f73 6527 290a 2020 2020 2020   'close').      
-00011c20: 2020 6966 2063 6c6f 7365 2069 7320 6e6f    if close is no
-00011c30: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00011c40: 2020 2020 636c 6f73 6520 3d20 7365 6c66      close = self
-00011c50: 2e65 7874 656e 6428 7b7d 2c20 636c 6f73  .extend({}, clos
-00011c60: 6529 0a20 2020 2020 2020 2020 2020 2063  e).            c
-00011c70: 6c6f 7365 5072 6963 6520 3d20 7365 6c66  losePrice = self
-00011c80: 2e73 6166 655f 7661 6c75 6528 636c 6f73  .safe_value(clos
-00011c90: 652c 2027 7072 6963 6527 290a 2020 2020  e, 'price').    
-00011ca0: 2020 2020 2020 2020 6966 2063 6c6f 7365          if close
-00011cb0: 5072 6963 6520 6973 206e 6f74 204e 6f6e  Price is not Non
-00011cc0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00011cd0: 2020 2063 6c6f 7365 5b27 7072 6963 6527     close['price'
-00011ce0: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
-00011cf0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-00011d00: 6f6c 2c20 636c 6f73 6550 7269 6365 290a  ol, closePrice).
-00011d10: 2020 2020 2020 2020 2020 2020 636c 6f73              clos
-00011d20: 6550 7269 6365 3220 3d20 7365 6c66 2e73  ePrice2 = self.s
-00011d30: 6166 655f 7661 6c75 6528 636c 6f73 652c  afe_value(close,
-00011d40: 2027 7072 6963 6532 2729 2020 2320 7374   'price2')  # st
-00011d50: 6f70 5072 6963 650a 2020 2020 2020 2020  opPrice.        
-00011d60: 2020 2020 6966 2063 6c6f 7365 5072 6963      if closePric
-00011d70: 6532 2069 7320 6e6f 7420 4e6f 6e65 3a0a  e2 is not None:.
-00011d80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011d90: 636c 6f73 655b 2770 7269 6365 3227 5d20  close['price2'] 
-00011da0: 3d20 7365 6c66 2e70 7269 6365 5f74 6f5f  = self.price_to_
-00011db0: 7072 6563 6973 696f 6e28 7379 6d62 6f6c  precision(symbol
-00011dc0: 2c20 636c 6f73 6550 7269 6365 3229 0a20  , closePrice2). 
-00011dd0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
-00011de0: 7374 5b27 636c 6f73 6527 5d20 3d20 636c  st['close'] = cl
-00011df0: 6f73 650a 2020 2020 2020 2020 7469 6d65  ose.        time
-00011e00: 496e 466f 7263 6520 3d20 7365 6c66 2e73  InForce = self.s
-00011e10: 6166 655f 7374 7269 6e67 5f32 2870 6172  afe_string_2(par
-00011e20: 616d 732c 2027 7469 6d65 496e 466f 7263  ams, 'timeInForc
-00011e30: 6527 2c20 2774 696d 6569 6e66 6f72 6365  e', 'timeinforce
-00011e40: 2729 0a20 2020 2020 2020 2069 6620 7469  ').        if ti
-00011e50: 6d65 496e 466f 7263 6520 6973 206e 6f74  meInForce is not
-00011e60: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00011e70: 2020 2072 6571 7565 7374 5b27 7469 6d65     request['time
-00011e80: 696e 666f 7263 6527 5d20 3d20 7469 6d65  inforce'] = time
-00011e90: 496e 466f 7263 650a 2020 2020 2020 2020  InForce.        
-00011ea0: 6973 4d61 726b 6574 203d 2028 7479 7065  isMarket = (type
-00011eb0: 203d 3d20 276d 6172 6b65 7427 290a 2020   == 'market').  
-00011ec0: 2020 2020 2020 706f 7374 4f6e 6c79 203d        postOnly =
-00011ed0: 204e 6f6e 650a 2020 2020 2020 2020 706f   None.        po
-00011ee0: 7374 4f6e 6c79 2c20 7061 7261 6d73 203d  stOnly, params =
-00011ef0: 2073 656c 662e 6861 6e64 6c65 5f70 6f73   self.handle_pos
-00011f00: 745f 6f6e 6c79 2869 734d 6172 6b65 742c  t_only(isMarket,
-00011f10: 2046 616c 7365 2c20 7061 7261 6d73 290a   False, params).
-00011f20: 2020 2020 2020 2020 6966 2070 6f73 744f          if postO
-00011f30: 6e6c 793a 0a20 2020 2020 2020 2020 2020  nly:.           
-00011f40: 2072 6571 7565 7374 5b27 6f66 6c61 6773   request['oflags
-00011f50: 275d 203d 2027 706f 7374 270a 2020 2020  '] = 'post'.    
-00011f60: 2020 2020 7061 7261 6d73 203d 2073 656c      params = sel
-00011f70: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00011f80: 2774 696d 6549 6e46 6f72 6365 272c 2027  'timeInForce', '
-00011f90: 7265 6475 6365 4f6e 6c79 272c 2027 7374  reduceOnly', 'st
-00011fa0: 6f70 4c6f 7373 5072 6963 6527 2c20 2774  opLossPrice', 't
-00011fb0: 616b 6550 726f 6669 7450 7269 6365 272c  akeProfitPrice',
-00011fc0: 2027 7472 6169 6c69 6e67 416d 6f75 6e74   'trailingAmount
-00011fd0: 272c 2027 7472 6169 6c69 6e67 4c69 6d69  ', 'trailingLimi
-00011fe0: 7441 6d6f 756e 7427 2c20 276f 6666 7365  tAmount', 'offse
-00011ff0: 7427 5d29 0a20 2020 2020 2020 2072 6574  t']).        ret
-00012000: 7572 6e20 5b72 6571 7565 7374 2c20 7061  urn [request, pa
-00012010: 7261 6d73 5d0a 0a20 2020 2064 6566 2065  rams]..    def e
-00012020: 6469 745f 6f72 6465 7228 7365 6c66 2c20  dit_order(self, 
-00012030: 6964 3a20 7374 722c 2073 796d 626f 6c3a  id: str, symbol:
-00012040: 2073 7472 2c20 7479 7065 3a20 4f72 6465   str, type: Orde
-00012050: 7254 7970 652c 2073 6964 653a 204f 7264  rType, side: Ord
-00012060: 6572 5369 6465 2c20 616d 6f75 6e74 3a20  erSide, amount: 
-00012070: 4e75 6d20 3d20 4e6f 6e65 2c20 7072 6963  Num = None, pric
-00012080: 653a 204e 756d 203d 204e 6f6e 652c 2070  e: Num = None, p
-00012090: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-000120a0: 2020 2022 2222 0a20 2020 2020 2020 2065     """.        e
-000120b0: 6469 7420 6120 7472 6164 6520 6f72 6465  dit a trade orde
-000120c0: 720a 2020 2020 2020 2020 3a73 6565 3a20  r.        :see: 
-000120d0: 6874 7470 733a 2f2f 646f 6373 2e6b 7261  https://docs.kra
-000120e0: 6b65 6e2e 636f 6d2f 7265 7374 2f23 7461  ken.com/rest/#ta
-000120f0: 672f 5472 6164 696e 672f 6f70 6572 6174  g/Trading/operat
-00012100: 696f 6e2f 6564 6974 4f72 6465 720a 2020  ion/editOrder.  
-00012110: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00012120: 2069 643a 206f 7264 6572 2069 640a 2020   id: order id.  
-00012130: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00012140: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
-00012150: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
-00012160: 6172 6b65 7420 746f 2063 7265 6174 6520  arket to create 
-00012170: 616e 206f 7264 6572 2069 6e0a 2020 2020  an order in.    
-00012180: 2020 2020 3a70 6172 616d 2073 7472 2074      :param str t
-00012190: 7970 653a 2027 6d61 726b 6574 2720 6f72  ype: 'market' or
-000121a0: 2027 6c69 6d69 7427 0a20 2020 2020 2020   'limit'.       
-000121b0: 203a 7061 7261 6d20 7374 7220 7369 6465   :param str side
-000121c0: 3a20 2762 7579 2720 6f72 2027 7365 6c6c  : 'buy' or 'sell
-000121d0: 270a 2020 2020 2020 2020 3a70 6172 616d  '.        :param
-000121e0: 2066 6c6f 6174 2061 6d6f 756e 743a 2068   float amount: h
-000121f0: 6f77 206d 7563 6820 6f66 2074 6865 2063  ow much of the c
-00012200: 7572 7265 6e63 7920 796f 7520 7761 6e74  urrency you want
-00012210: 2074 6f20 7472 6164 6520 696e 2075 6e69   to trade in uni
-00012220: 7473 206f 6620 7468 6520 6261 7365 2063  ts of the base c
-00012230: 7572 7265 6e63 790a 2020 2020 2020 2020  urrency.        
-00012240: 3a70 6172 616d 2066 6c6f 6174 205b 7072  :param float [pr
-00012250: 6963 655d 3a20 7468 6520 7072 6963 6520  ice]: the price 
-00012260: 6174 2077 6869 6368 2074 6865 206f 7264  at which the ord
-00012270: 6572 2069 7320 746f 2062 6520 6675 6c6c  er is to be full
-00012280: 6669 6c6c 6564 2c20 696e 2075 6e69 7473  filled, in units
-00012290: 206f 6620 7468 6520 7175 6f74 6520 6375   of the quote cu
-000122a0: 7272 656e 6379 2c20 6967 6e6f 7265 6420  rrency, ignored 
-000122b0: 696e 206d 6172 6b65 7420 6f72 6465 7273  in market orders
-000122c0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-000122d0: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
-000122e0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-000122f0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00012300: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
-00012310: 706f 696e 740a 2020 2020 2020 2020 3a70  point.        :p
-00012320: 6172 616d 2066 6c6f 6174 205b 7061 7261  aram float [para
-00012330: 6d73 2e73 746f 704c 6f73 7350 7269 6365  ms.stopLossPrice
-00012340: 5d3a 202a 6d61 7267 696e 206f 6e6c 792a  ]: *margin only*
-00012350: 2074 6865 2070 7269 6365 2074 6861 7420   the price that 
-00012360: 6120 7374 6f70 206c 6f73 7320 6f72 6465  a stop loss orde
-00012370: 7220 6973 2074 7269 6767 6572 6564 2061  r is triggered a
-00012380: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00012390: 2066 6c6f 6174 205b 7061 7261 6d73 2e74   float [params.t
-000123a0: 616b 6550 726f 6669 7450 7269 6365 5d3a  akeProfitPrice]:
-000123b0: 202a 6d61 7267 696e 206f 6e6c 792a 2074   *margin only* t
-000123c0: 6865 2070 7269 6365 2074 6861 7420 6120  he price that a 
-000123d0: 7461 6b65 2070 726f 6669 7420 6f72 6465  take profit orde
-000123e0: 7220 6973 2074 7269 6767 6572 6564 2061  r is triggered a
-000123f0: 740a 2020 2020 2020 2020 3a70 6172 616d  t.        :param
-00012400: 2073 7472 205b 7061 7261 6d73 2e74 7261   str [params.tra
-00012410: 696c 696e 6741 6d6f 756e 745d 3a20 2a6d  ilingAmount]: *m
-00012420: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
-00012430: 7175 6f74 6520 7072 6963 6520 6177 6179  quote price away
-00012440: 2066 726f 6d20 7468 6520 6375 7272 656e   from the curren
-00012450: 7420 6d61 726b 6574 2070 7269 6365 0a20  t market price. 
-00012460: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00012470: 7220 5b70 6172 616d 732e 7472 6169 6c69  r [params.traili
-00012480: 6e67 4c69 6d69 7441 6d6f 756e 745d 3a20  ngLimitAmount]: 
-00012490: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 7468  *margin only* th
-000124a0: 6520 7175 6f74 6520 616d 6f75 6e74 2061  e quote amount a
-000124b0: 7761 7920 6672 6f6d 2074 6865 2074 7261  way from the tra
-000124c0: 696c 696e 6741 6d6f 756e 740a 2020 2020  ilingAmount.    
-000124d0: 2020 2020 3a70 6172 616d 2073 7472 205b      :param str [
-000124e0: 7061 7261 6d73 2e6f 6666 7365 745d 3a20  params.offset]: 
-000124f0: 2a6d 6172 6769 6e20 6f6e 6c79 2a20 272b  *margin only* '+
-00012500: 2720 6f72 2027 2d27 2077 6865 7468 6572  ' or '-' whether
-00012510: 2079 6f75 2077 616e 7420 7468 6520 7472   you want the tr
-00012520: 6169 6c69 6e67 4c69 6d69 7441 6d6f 756e  ailingLimitAmoun
-00012530: 7420 7661 6c75 6520 746f 2062 6520 706f  t value to be po
-00012540: 7369 7469 7665 206f 7220 6e65 6761 7469  sitive or negati
-00012550: 7665 2c20 6465 6661 756c 7420 6973 206e  ve, default is n
-00012560: 6567 6174 6976 6520 272d 270a 2020 2020  egative '-'.    
-00012570: 2020 2020 3a70 6172 616d 2073 7472 205b      :param str [
-00012580: 7061 7261 6d73 2e74 7269 6767 6572 5d3a  params.trigger]:
-00012590: 202a 6d61 7267 696e 206f 6e6c 792a 2074   *margin only* t
-000125a0: 6865 2061 6374 6976 6174 696f 6e20 7072  he activation pr
-000125b0: 6963 6520 7479 7065 2c20 276c 6173 7427  ice type, 'last'
-000125c0: 206f 7220 2769 6e64 6578 272c 2064 6566   or 'index', def
-000125d0: 6175 6c74 2069 7320 276c 6173 7427 0a20  ault is 'last'. 
-000125e0: 2020 2020 2020 203a 7265 7475 726e 7320         :returns 
-000125f0: 6469 6374 3a20 616e 2060 6f72 6465 7220  dict: an `order 
-00012600: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
-00012610: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00012620: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
-00012630: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00012640: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00012650: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00012660: 0a20 2020 2020 2020 206d 6172 6b65 7420  .        market 
-00012670: 3d20 7365 6c66 2e6d 6172 6b65 7428 7379  = self.market(sy
-00012680: 6d62 6f6c 290a 2020 2020 2020 2020 6966  mbol).        if
-00012690: 206e 6f74 206d 6172 6b65 745b 2773 706f   not market['spo
-000126a0: 7427 5d3a 0a20 2020 2020 2020 2020 2020  t']:.           
-000126b0: 2072 6169 7365 204e 6f74 5375 7070 6f72   raise NotSuppor
-000126c0: 7465 6428 7365 6c66 2e69 6420 2b20 2720  ted(self.id + ' 
-000126d0: 6564 6974 4f72 6465 7228 2920 646f 6573  editOrder() does
-000126e0: 206e 6f74 2073 7570 706f 7274 2027 202b   not support ' +
-000126f0: 206d 6172 6b65 745b 2774 7970 6527 5d20   market['type'] 
-00012700: 2b20 2720 6f72 6465 7273 2c20 6f6e 6c79  + ' orders, only
-00012710: 2073 706f 7420 6f72 6465 7273 2061 7265   spot orders are
-00012720: 2061 6363 6570 7465 6427 290a 2020 2020   accepted').    
-00012730: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-00012740: 2020 2020 2020 2020 2020 2020 2774 7869              'txi
-00012750: 6427 3a20 6964 2c0a 2020 2020 2020 2020  d': id,.        
-00012760: 2020 2020 2770 6169 7227 3a20 6d61 726b      'pair': mark
-00012770: 6574 5b27 6964 275d 2c0a 2020 2020 2020  et['id'],.      
-00012780: 2020 7d0a 2020 2020 2020 2020 6966 2061    }.        if a
-00012790: 6d6f 756e 7420 6973 206e 6f74 204e 6f6e  mount is not Non
-000127a0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-000127b0: 6571 7565 7374 5b27 766f 6c75 6d65 275d  equest['volume']
-000127c0: 203d 2073 656c 662e 616d 6f75 6e74 5f74   = self.amount_t
-000127d0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
-000127e0: 6f6c 2c20 616d 6f75 6e74 290a 2020 2020  ol, amount).    
-000127f0: 2020 2020 6f72 6465 7252 6571 7565 7374      orderRequest
-00012800: 203d 2073 656c 662e 6f72 6465 725f 7265   = self.order_re
-00012810: 7175 6573 7428 2765 6469 744f 7264 6572  quest('editOrder
-00012820: 2829 272c 2073 796d 626f 6c2c 2074 7970  ()', symbol, typ
-00012830: 652c 2072 6571 7565 7374 2c20 7072 6963  e, request, pric
-00012840: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
-00012850: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
-00012860: 6c66 2e70 7269 7661 7465 506f 7374 4564  lf.privatePostEd
-00012870: 6974 4f72 6465 7228 7365 6c66 2e65 7874  itOrder(self.ext
-00012880: 656e 6428 6f72 6465 7252 6571 7565 7374  end(orderRequest
-00012890: 5b30 5d2c 206f 7264 6572 5265 7175 6573  [0], orderReques
-000128a0: 745b 315d 2929 0a20 2020 2020 2020 2023  t[1])).        #
-000128b0: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-000128c0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000128d0: 2020 2022 6572 726f 7222 3a20 5b5d 2c0a     "error": [],.
-000128e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000128f0: 2020 2272 6573 756c 7422 3a20 7b0a 2020    "result": {.  
-00012900: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00012910: 2020 2020 2273 7461 7475 7322 3a20 226f      "status": "o
-00012920: 6b22 2c0a 2020 2020 2020 2020 2320 2020  k",.        #   
-00012930: 2020 2020 2020 2020 2020 2274 7869 6422            "txid"
-00012940: 3a20 224f 4157 3242 4f2d 3752 5745 4b2d  : "OAW2BO-7RWEK-
-00012950: 505a 5935 554f 222c 0a20 2020 2020 2020  PZY5UO",.       
-00012960: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00012970: 6f72 6967 696e 616c 7478 6964 223a 2022  originaltxid": "
-00012980: 4f58 4c36 5353 2d55 504e 4d43 2d32 3657  OXL6SS-UPNMC-26W
-00012990: 4245 3722 2c0a 2020 2020 2020 2020 2320  BE7",.        # 
-000129a0: 2020 2020 2020 2020 2020 2020 2276 6f6c              "vol
-000129b0: 756d 6522 3a20 2230 2e30 3030 3735 3030  ume": "0.0007500
-000129c0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-000129d0: 2020 2020 2020 2020 2020 2270 7269 6365            "price
-000129e0: 223a 2022 3133 3530 302e 3022 2c0a 2020  ": "13500.0",.  
-000129f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00012a00: 2020 2020 226f 7264 6572 735f 6361 6e63      "orders_canc
-00012a10: 656c 6c65 6422 3a20 312c 0a20 2020 2020  elled": 1,.     
-00012a20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00012a30: 2022 6465 7363 7222 3a20 7b0a 2020 2020   "descr": {.    
-00012a40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00012a50: 2020 2020 2020 226f 7264 6572 223a 2022        "order": "
-00012a60: 6275 7920 302e 3030 3037 3530 3030 2058  buy 0.00075000 X
-00012a70: 4254 5553 4454 2040 206c 696d 6974 2031  BTUSDT @ limit 1
-00012a80: 3335 3030 2e30 220a 2020 2020 2020 2020  3500.0".        
-00012a90: 2320 2020 2020 2020 2020 2020 2020 7d0a  #             }.
-00012aa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00012ab0: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-00012ac0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-00012ad0: 2020 2020 2020 6461 7461 203d 2073 656c        data = sel
-00012ae0: 662e 7361 6665 5f64 6963 7428 7265 7370  f.safe_dict(resp
-00012af0: 6f6e 7365 2c20 2772 6573 756c 7427 2c20  onse, 'result', 
-00012b00: 7b7d 290a 2020 2020 2020 2020 7265 7475  {}).        retu
-00012b10: 726e 2073 656c 662e 7061 7273 655f 6f72  rn self.parse_or
-00012b20: 6465 7228 6461 7461 2c20 6d61 726b 6574  der(data, market
-00012b30: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
-00012b40: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
-00012b50: 2073 7472 2c20 7379 6d62 6f6c 3a20 5374   str, symbol: St
-00012b60: 7220 3d20 4e6f 6e65 2c20 7061 7261 6d73  r = None, params
-00012b70: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
-00012b80: 220a 2020 2020 2020 2020 6665 7463 6865  ".        fetche
-00012b90: 7320 696e 666f 726d 6174 696f 6e20 6f6e  s information on
-00012ba0: 2061 6e20 6f72 6465 7220 6d61 6465 2062   an order made b
-00012bb0: 7920 7468 6520 7573 6572 0a20 2020 2020  y the user.     
-00012bc0: 2020 203a 7365 653a 2068 7474 7073 3a2f     :see: https:/
-00012bd0: 2f64 6f63 732e 6b72 616b 656e 2e63 6f6d  /docs.kraken.com
-00012be0: 2f72 6573 742f 2374 6167 2f41 6363 6f75  /rest/#tag/Accou
-00012bf0: 6e74 2d44 6174 612f 6f70 6572 6174 696f  nt-Data/operatio
-00012c00: 6e2f 6765 744f 7264 6572 7349 6e66 6f0a  n/getOrdersInfo.
-00012c10: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
-00012c20: 7472 2073 796d 626f 6c3a 206e 6f74 2075  tr symbol: not u
-00012c30: 7365 6420 6279 206b 7261 6b65 6e20 6665  sed by kraken fe
-00012c40: 7463 684f 7264 6572 0a20 2020 2020 2020  tchOrder.       
-00012c50: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
-00012c60: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
-00012c70: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
-00012c80: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
-00012c90: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
-00012ca0: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
-00012cb0: 6963 743a 2041 6e20 606f 7264 6572 2073  ict: An `order s
-00012cc0: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
-00012cd0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00012ce0: 232f 3f69 643d 6f72 6465 722d 7374 7275  #/?id=order-stru
-00012cf0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00012d00: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00012d10: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00012d20: 2020 2020 2020 2020 636c 6965 6e74 4f72          clientOr
-00012d30: 6465 7249 6420 3d20 7365 6c66 2e73 6166  derId = self.saf
-00012d40: 655f 7661 6c75 655f 3228 7061 7261 6d73  e_value_2(params
-00012d50: 2c20 2775 7365 7272 6566 272c 2027 636c  , 'userref', 'cl
-00012d60: 6965 6e74 4f72 6465 7249 6427 290a 2020  ientOrderId').  
-00012d70: 2020 2020 2020 7265 7175 6573 7420 3d20        request = 
-00012d80: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-00012d90: 7261 6465 7327 3a20 5472 7565 2c20 2023  rades': True,  #
-00012da0: 2077 6865 7468 6572 206f 7220 6e6f 7420   whether or not 
-00012db0: 746f 2069 6e63 6c75 6465 2074 7261 6465  to include trade
-00012dc0: 7320 696e 206f 7574 7075 7428 6f70 7469  s in output(opti
-00012dd0: 6f6e 616c 2c20 6465 6661 756c 7420 4661  onal, default Fa
-00012de0: 6c73 6529 0a20 2020 2020 2020 2020 2020  lse).           
-00012df0: 2023 2027 7478 6964 273a 2069 642c 2020   # 'txid': id,  
-00012e00: 2320 646f 206e 6f74 2063 6f6d 6d61 2073  # do not comma s
-00012e10: 6570 6172 6174 6520 6120 6c69 7374 206f  eparate a list o
-00012e20: 6620 6964 7320 2d20 7573 6520 6665 7463  f ids - use fetc
-00012e30: 684f 7264 6572 7342 7949 6473 2069 6e73  hOrdersByIds ins
-00012e40: 7465 6164 0a20 2020 2020 2020 2020 2020  tead.           
-00012e50: 2023 2027 7573 6572 7265 6627 3a20 276f   # 'userref': 'o
-00012e60: 7074 696f 6e61 6c27 2c20 2023 2072 6573  ptional',  # res
-00012e70: 7472 6963 7420 7265 7375 6c74 7320 746f  trict results to
-00012e80: 2067 6976 656e 2075 7365 7220 7265 6665   given user refe
-00012e90: 7265 6e63 6520 6964 286f 7074 696f 6e61  rence id(optiona
-00012ea0: 6c29 0a20 2020 2020 2020 207d 0a20 2020  l).        }.   
-00012eb0: 2020 2020 2071 7565 7279 203d 2070 6172       query = par
-00012ec0: 616d 730a 2020 2020 2020 2020 6966 2063  ams.        if c
-00012ed0: 6c69 656e 744f 7264 6572 4964 2069 7320  lientOrderId is 
-00012ee0: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00012ef0: 2020 2020 2020 7265 7175 6573 745b 2775        request['u
-00012f00: 7365 7272 6566 275d 203d 2063 6c69 656e  serref'] = clien
-00012f10: 744f 7264 6572 4964 0a20 2020 2020 2020  tOrderId.       
-00012f20: 2020 2020 2071 7565 7279 203d 2073 656c       query = sel
-00012f30: 662e 6f6d 6974 2870 6172 616d 732c 205b  f.omit(params, [
-00012f40: 2775 7365 7272 6566 272c 2027 636c 6965  'userref', 'clie
-00012f50: 6e74 4f72 6465 7249 6427 5d29 0a20 2020  ntOrderId']).   
-00012f60: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00012f70: 2020 2020 2020 2072 6571 7565 7374 5b27         request['
-00012f80: 7478 6964 275d 203d 2069 640a 2020 2020  txid'] = id.    
-00012f90: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-00012fa0: 656c 662e 7072 6976 6174 6550 6f73 7451  elf.privatePostQ
-00012fb0: 7565 7279 4f72 6465 7273 2873 656c 662e  ueryOrders(self.
-00012fc0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00012fd0: 7175 6572 7929 290a 2020 2020 2020 2020  query)).        
-00012fe0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
-00012ff0: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
-00013000: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
-00013010: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00013020: 2020 2272 6573 756c 7422 3a7b 0a20 2020    "result":{.   
-00013030: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00013040: 2020 2022 4f54 4c41 5333 2d52 5248 5546     "OTLAS3-RRHUF
-00013050: 2d4e 4457 4835 4122 3a7b 0a20 2020 2020  -NDWH5A":{.     
-00013060: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013070: 2020 2020 2022 7265 6669 6422 3a6e 756c       "refid":nul
-00013080: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-00013090: 2020 2020 2020 2020 2020 2020 2022 7573               "us
-000130a0: 6572 7265 6622 3a6e 756c 6c2c 0a20 2020  erref":null,.   
-000130b0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-000130c0: 2020 2020 2020 2022 7374 6174 7573 223a         "status":
-000130d0: 2263 6c6f 7365 6422 2c0a 2020 2020 2020  "closed",.      
-000130e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000130f0: 2020 2020 2272 6561 736f 6e22 3a6e 756c      "reason":nul
-00013100: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-00013110: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
-00013120: 656e 746d 223a 3135 3836 3832 3239 3139  entm":1586822919
-00013130: 2e33 3334 322c 0a20 2020 2020 2020 2023  .3342,.        #
+0000fc70: 2020 226d 6973 6322 3a20 2222 2c0a 2020    "misc": "",.  
+0000fc80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0000fc90: 2020 2020 2020 2020 2022 6f66 6c61 6773           "oflags
+0000fca0: 223a 2022 6663 6971 222c 0a20 2020 2020  ": "fciq",.     
+0000fcb0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0000fcc0: 2020 2020 2020 2274 7269 6767 6572 223a        "trigger":
+0000fcd0: 2022 696e 6465 7822 0a20 2020 2020 2020   "index".       
+0000fce0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0000fcf0: 7d0a 2020 2020 2020 2020 2320 2020 2020  }.        #     
+0000fd00: 207d 0a20 2020 2020 2020 2023 2020 7d0a   }.        #  }.
+0000fd10: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+0000fd20: 2020 6465 7363 7269 7074 696f 6e20 3d20    description = 
+0000fd30: 7365 6c66 2e73 6166 655f 6469 6374 286f  self.safe_dict(o
+0000fd40: 7264 6572 2c20 2764 6573 6372 272c 207b  rder, 'descr', {
+0000fd50: 7d29 0a20 2020 2020 2020 206f 7264 6572  }).        order
+0000fd60: 4465 7363 7269 7074 696f 6e20 3d20 4e6f  Description = No
+0000fd70: 6e65 0a20 2020 2020 2020 2069 6620 6465  ne.        if de
+0000fd80: 7363 7269 7074 696f 6e20 6973 206e 6f74  scription is not
+0000fd90: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000fda0: 2020 206f 7264 6572 4465 7363 7269 7074     orderDescript
+0000fdb0: 696f 6e20 3d20 7365 6c66 2e73 6166 655f  ion = self.safe_
+0000fdc0: 7374 7269 6e67 2864 6573 6372 6970 7469  string(descripti
+0000fdd0: 6f6e 2c20 276f 7264 6572 2729 0a20 2020  on, 'order').   
+0000fde0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+0000fdf0: 2020 2020 2020 206f 7264 6572 4465 7363         orderDesc
+0000fe00: 7269 7074 696f 6e20 3d20 7365 6c66 2e73  ription = self.s
+0000fe10: 6166 655f 7374 7269 6e67 286f 7264 6572  afe_string(order
+0000fe20: 2c20 2764 6573 6372 2729 0a20 2020 2020  , 'descr').     
+0000fe30: 2020 2073 6964 6520 3d20 4e6f 6e65 0a20     side = None. 
+0000fe40: 2020 2020 2020 2074 7970 6520 3d20 4e6f         type = No
+0000fe50: 6e65 0a20 2020 2020 2020 206d 6172 6b65  ne.        marke
+0000fe60: 7449 6420 3d20 4e6f 6e65 0a20 2020 2020  tId = None.     
+0000fe70: 2020 2070 7269 6365 203d 204e 6f6e 650a     price = None.
+0000fe80: 2020 2020 2020 2020 616d 6f75 6e74 203d          amount =
+0000fe90: 204e 6f6e 650a 2020 2020 2020 2020 7374   None.        st
+0000fea0: 6f70 5072 6963 6520 3d20 4e6f 6e65 0a20  opPrice = None. 
+0000feb0: 2020 2020 2020 2069 6620 6f72 6465 7244         if orderD
+0000fec0: 6573 6372 6970 7469 6f6e 2069 7320 6e6f  escription is no
+0000fed0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+0000fee0: 2020 2020 7061 7274 7320 3d20 6f72 6465      parts = orde
+0000fef0: 7244 6573 6372 6970 7469 6f6e 2e73 706c  rDescription.spl
+0000ff00: 6974 2827 2027 290a 2020 2020 2020 2020  it(' ').        
+0000ff10: 2020 2020 7369 6465 203d 2073 656c 662e      side = self.
+0000ff20: 7361 6665 5f73 7472 696e 6728 7061 7274  safe_string(part
+0000ff30: 732c 2030 290a 2020 2020 2020 2020 2020  s, 0).          
+0000ff40: 2020 616d 6f75 6e74 203d 2073 656c 662e    amount = self.
+0000ff50: 7361 6665 5f73 7472 696e 6728 7061 7274  safe_string(part
+0000ff60: 732c 2031 290a 2020 2020 2020 2020 2020  s, 1).          
+0000ff70: 2020 6d61 726b 6574 4964 203d 2073 656c    marketId = sel
+0000ff80: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+0000ff90: 7274 732c 2032 290a 2020 2020 2020 2020  rts, 2).        
+0000ffa0: 2020 2020 7479 7065 203d 2073 656c 662e      type = self.
+0000ffb0: 7361 6665 5f73 7472 696e 6728 7061 7274  safe_string(part
+0000ffc0: 732c 2034 290a 2020 2020 2020 2020 2020  s, 4).          
+0000ffd0: 2020 6966 2074 7970 6520 3d3d 2027 7374    if type == 'st
+0000ffe0: 6f70 273a 0a20 2020 2020 2020 2020 2020  op':.           
+0000fff0: 2020 2020 2073 746f 7050 7269 6365 203d       stopPrice =
+00010000: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00010010: 6728 7061 7274 732c 2036 290a 2020 2020  g(parts, 6).    
+00010020: 2020 2020 2020 2020 2020 2020 7072 6963              pric
+00010030: 6520 3d20 7365 6c66 2e73 6166 655f 7374  e = self.safe_st
+00010040: 7269 6e67 2870 6172 7473 2c20 3929 0a20  ring(parts, 9). 
+00010050: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
+00010060: 7479 7065 203d 3d20 276c 696d 6974 273a  type == 'limit':
+00010070: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010080: 2070 7269 6365 203d 2073 656c 662e 7361   price = self.sa
+00010090: 6665 5f73 7472 696e 6728 7061 7274 732c  fe_string(parts,
+000100a0: 2035 290a 2020 2020 2020 2020 7369 6465   5).        side
+000100b0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000100c0: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
+000100d0: 2027 7479 7065 272c 2073 6964 6529 0a20   'type', side). 
+000100e0: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
+000100f0: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
+00010100: 6573 6372 6970 7469 6f6e 2c20 276f 7264  escription, 'ord
+00010110: 6572 7479 7065 272c 2074 7970 6529 0a20  ertype', type). 
+00010120: 2020 2020 2020 206d 6172 6b65 7449 6420         marketId 
+00010130: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00010140: 6e67 2864 6573 6372 6970 7469 6f6e 2c20  ng(description, 
+00010150: 2770 6169 7227 2c20 6d61 726b 6574 4964  'pair', marketId
+00010160: 290a 2020 2020 2020 2020 666f 756e 644d  ).        foundM
+00010170: 6172 6b65 7420 3d20 7365 6c66 2e66 696e  arket = self.fin
+00010180: 645f 6d61 726b 6574 5f62 795f 616c 746e  d_market_by_altn
+00010190: 616d 655f 6f72 5f69 6428 6d61 726b 6574  ame_or_id(market
+000101a0: 4964 290a 2020 2020 2020 2020 7379 6d62  Id).        symb
+000101b0: 6f6c 203d 204e 6f6e 650a 2020 2020 2020  ol = None.      
+000101c0: 2020 6966 2066 6f75 6e64 4d61 726b 6574    if foundMarket
+000101d0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000101e0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
+000101f0: 203d 2066 6f75 6e64 4d61 726b 6574 0a20   = foundMarket. 
+00010200: 2020 2020 2020 2065 6c69 6620 6d61 726b         elif mark
+00010210: 6574 4964 2069 7320 6e6f 7420 4e6f 6e65  etId is not None
+00010220: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
+00010230: 6465 6c69 7374 6564 206d 6172 6b65 7420  delisted market 
+00010240: 6964 7320 676f 2068 6572 650a 2020 2020  ids go here.    
+00010250: 2020 2020 2020 2020 6d61 726b 6574 203d          market =
+00010260: 2073 656c 662e 6765 745f 6465 6c69 7374   self.get_delist
+00010270: 6564 5f6d 6172 6b65 745f 6279 5f69 6428  ed_market_by_id(
+00010280: 6d61 726b 6574 4964 290a 2020 2020 2020  marketId).      
+00010290: 2020 7469 6d65 7374 616d 7020 3d20 7365    timestamp = se
+000102a0: 6c66 2e73 6166 655f 7469 6d65 7374 616d  lf.safe_timestam
+000102b0: 7028 6f72 6465 722c 2027 6f70 656e 746d  p(order, 'opentm
+000102c0: 2729 0a20 2020 2020 2020 2061 6d6f 756e  ').        amoun
+000102d0: 7420 3d20 7365 6c66 2e73 6166 655f 7374  t = self.safe_st
+000102e0: 7269 6e67 286f 7264 6572 2c20 2776 6f6c  ring(order, 'vol
+000102f0: 272c 2061 6d6f 756e 7429 0a20 2020 2020  ', amount).     
+00010300: 2020 2066 696c 6c65 6420 3d20 7365 6c66     filled = self
+00010310: 2e73 6166 655f 7374 7269 6e67 286f 7264  .safe_string(ord
+00010320: 6572 2c20 2776 6f6c 5f65 7865 6327 290a  er, 'vol_exec').
+00010330: 2020 2020 2020 2020 6665 6520 3d20 4e6f          fee = No
+00010340: 6e65 0a20 2020 2020 2020 2023 206b 7261  ne.        # kra
+00010350: 6b65 6e20 7472 756e 6361 7465 7320 7468  ken truncates th
+00010360: 6520 636f 7374 2069 6e20 7468 6520 6170  e cost in the ap
+00010370: 6920 7265 7370 6f6e 7365 2073 6f20 7765  i response so we
+00010380: 2077 696c 6c20 6967 6e6f 7265 2069 7420   will ignore it 
+00010390: 616e 6420 6361 6c63 756c 6174 6520 6974  and calculate it
+000103a0: 2066 726f 6d20 6176 6572 6167 6520 2620   from average & 
+000103b0: 6669 6c6c 6564 0a20 2020 2020 2020 2023  filled.        #
+000103c0: 2063 6f73 7420 3d20 7365 6c66 2e73 6166   cost = self.saf
+000103d0: 655f 7374 7269 6e67 286f 7264 6572 2c20  e_string(order, 
+000103e0: 2763 6f73 7427 290a 2020 2020 2020 2020  'cost').        
+000103f0: 7072 6963 6520 3d20 7365 6c66 2e73 6166  price = self.saf
+00010400: 655f 7374 7269 6e67 2864 6573 6372 6970  e_string(descrip
+00010410: 7469 6f6e 2c20 2770 7269 6365 272c 2070  tion, 'price', p
+00010420: 7269 6365 290a 2020 2020 2020 2020 2320  rice).        # 
+00010430: 7768 656e 2074 7970 6520 3d20 7472 6169  when type = trai
+00010440: 6c6c 696e 6720 7374 6f70 2072 6574 7572  lling stop retur
+00010450: 6e73 2070 7269 6365 203d 2027 2b35 302e  ns price = '+50.
+00010460: 3030 3030 2527 0a20 2020 2020 2020 2069  0000%'.        i
+00010470: 6620 2870 7269 6365 2069 7320 6e6f 7420  f (price is not 
+00010480: 4e6f 6e65 2920 616e 6420 7072 6963 652e  None) and price.
+00010490: 656e 6473 7769 7468 2827 2527 293a 0a20  endswith('%'):. 
+000104a0: 2020 2020 2020 2020 2020 2070 7269 6365             price
+000104b0: 203d 204e 6f6e 6520 2023 2073 656c 6620   = None  # self 
+000104c0: 6973 206e 6f74 2074 6865 2070 7269 6365  is not the price
+000104d0: 2077 6520 7761 6e74 0a20 2020 2020 2020   we want.       
+000104e0: 2069 6620 2870 7269 6365 2069 7320 4e6f   if (price is No
+000104f0: 6e65 2920 6f72 2050 7265 6369 7365 2e73  ne) or Precise.s
+00010500: 7472 696e 675f 6571 7561 6c73 2870 7269  tring_equals(pri
+00010510: 6365 2c20 2730 2729 3a0a 2020 2020 2020  ce, '0'):.      
+00010520: 2020 2020 2020 7072 6963 6520 3d20 7365        price = se
+00010530: 6c66 2e73 6166 655f 7374 7269 6e67 2864  lf.safe_string(d
+00010540: 6573 6372 6970 7469 6f6e 2c20 2770 7269  escription, 'pri
+00010550: 6365 3227 290a 2020 2020 2020 2020 6966  ce2').        if
+00010560: 2028 7072 6963 6520 6973 204e 6f6e 6529   (price is None)
+00010570: 206f 7220 5072 6563 6973 652e 7374 7269   or Precise.stri
+00010580: 6e67 5f65 7175 616c 7328 7072 6963 652c  ng_equals(price,
+00010590: 2027 3027 293a 0a20 2020 2020 2020 2020   '0'):.         
+000105a0: 2020 2070 7269 6365 203d 2073 656c 662e     price = self.
+000105b0: 7361 6665 5f73 7472 696e 6728 6f72 6465  safe_string(orde
+000105c0: 722c 2027 7072 6963 6527 2c20 7072 6963  r, 'price', pric
+000105d0: 6529 0a20 2020 2020 2020 2066 6c61 6773  e).        flags
+000105e0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+000105f0: 696e 6728 6f72 6465 722c 2027 6f66 6c61  ing(order, 'ofla
+00010600: 6773 272c 2027 2729 0a20 2020 2020 2020  gs', '').       
+00010610: 2069 7350 6f73 744f 6e6c 7920 3d20 666c   isPostOnly = fl
+00010620: 6167 732e 6669 6e64 2827 706f 7374 2729  ags.find('post')
+00010630: 203e 202d 310a 2020 2020 2020 2020 6176   > -1.        av
+00010640: 6572 6167 6520 3d20 7365 6c66 2e73 6166  erage = self.saf
+00010650: 655f 6e75 6d62 6572 286f 7264 6572 2c20  e_number(order, 
+00010660: 2770 7269 6365 2729 0a20 2020 2020 2020  'price').       
+00010670: 2069 6620 6d61 726b 6574 2069 7320 6e6f   if market is no
+00010680: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00010690: 2020 2020 7379 6d62 6f6c 203d 206d 6172      symbol = mar
+000106a0: 6b65 745b 2773 796d 626f 6c27 5d0a 2020  ket['symbol'].  
+000106b0: 2020 2020 2020 2020 2020 6966 2027 6665            if 'fe
+000106c0: 6527 2069 6e20 6f72 6465 723a 0a20 2020  e' in order:.   
+000106d0: 2020 2020 2020 2020 2020 2020 2066 6565               fee
+000106e0: 436f 7374 203d 2073 656c 662e 7361 6665  Cost = self.safe
+000106f0: 5f73 7472 696e 6728 6f72 6465 722c 2027  _string(order, '
+00010700: 6665 6527 290a 2020 2020 2020 2020 2020  fee').          
+00010710: 2020 2020 2020 6665 6520 3d20 7b0a 2020        fee = {.  
+00010720: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010730: 2020 2763 6f73 7427 3a20 6665 6543 6f73    'cost': feeCos
+00010740: 742c 0a20 2020 2020 2020 2020 2020 2020  t,.             
+00010750: 2020 2020 2020 2027 7261 7465 273a 204e         'rate': N
+00010760: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00010770: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+00010780: 2020 2020 2020 2069 6620 666c 6167 732e         if flags.
+00010790: 6669 6e64 2827 6663 6971 2729 203e 3d20  find('fciq') >= 
+000107a0: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
+000107b0: 2020 2020 2020 2066 6565 5b27 6375 7272         fee['curr
+000107c0: 656e 6379 275d 203d 206d 6172 6b65 745b  ency'] = market[
+000107d0: 2771 756f 7465 275d 0a20 2020 2020 2020  'quote'].       
+000107e0: 2020 2020 2020 2020 2065 6c69 6620 666c           elif fl
+000107f0: 6167 732e 6669 6e64 2827 6663 6962 2729  ags.find('fcib')
+00010800: 203e 3d20 303a 0a20 2020 2020 2020 2020   >= 0:.         
+00010810: 2020 2020 2020 2020 2020 2066 6565 5b27             fee['
+00010820: 6375 7272 656e 6379 275d 203d 206d 6172  currency'] = mar
+00010830: 6b65 745b 2762 6173 6527 5d0a 2020 2020  ket['base'].    
+00010840: 2020 2020 7374 6174 7573 203d 2073 656c      status = sel
+00010850: 662e 7061 7273 655f 6f72 6465 725f 7374  f.parse_order_st
+00010860: 6174 7573 2873 656c 662e 7361 6665 5f73  atus(self.safe_s
+00010870: 7472 696e 6728 6f72 6465 722c 2027 7374  tring(order, 'st
+00010880: 6174 7573 2729 290a 2020 2020 2020 2020  atus')).        
+00010890: 6964 203d 2073 656c 662e 7361 6665 5f73  id = self.safe_s
+000108a0: 7472 696e 675f 3228 6f72 6465 722c 2027  tring_2(order, '
+000108b0: 6964 272c 2027 7478 6964 2729 0a20 2020  id', 'txid').   
+000108c0: 2020 2020 2069 6620 2869 6420 6973 204e       if (id is N
+000108d0: 6f6e 6529 206f 7220 2869 645b 303a 315d  one) or (id[0:1]
+000108e0: 203d 3d20 275b 2729 3a0a 2020 2020 2020   == '['):.      
+000108f0: 2020 2020 2020 7478 6964 203d 2073 656c        txid = sel
+00010900: 662e 7361 6665 5f76 616c 7565 286f 7264  f.safe_value(ord
+00010910: 6572 2c20 2774 7869 6427 290a 2020 2020  er, 'txid').    
+00010920: 2020 2020 2020 2020 6964 203d 2073 656c          id = sel
+00010930: 662e 7361 6665 5f73 7472 696e 6728 7478  f.safe_string(tx
+00010940: 6964 2c20 3029 0a20 2020 2020 2020 2063  id, 0).        c
+00010950: 6c69 656e 744f 7264 6572 4964 203d 2073  lientOrderId = s
+00010960: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+00010970: 6f72 6465 722c 2027 7573 6572 7265 6627  order, 'userref'
+00010980: 290a 2020 2020 2020 2020 7261 7754 7261  ).        rawTra
+00010990: 6465 7320 3d20 7365 6c66 2e73 6166 655f  des = self.safe_
+000109a0: 7661 6c75 6528 6f72 6465 722c 2027 7472  value(order, 'tr
+000109b0: 6164 6573 272c 205b 5d29 0a20 2020 2020  ades', []).     
+000109c0: 2020 2074 7261 6465 7320 3d20 5b5d 0a20     trades = []. 
+000109d0: 2020 2020 2020 2066 6f72 2069 2069 6e20         for i in 
+000109e0: 7261 6e67 6528 302c 206c 656e 2872 6177  range(0, len(raw
+000109f0: 5472 6164 6573 2929 3a0a 2020 2020 2020  Trades)):.      
+00010a00: 2020 2020 2020 7261 7754 7261 6465 203d        rawTrade =
+00010a10: 2072 6177 5472 6164 6573 5b69 5d0a 2020   rawTrades[i].  
+00010a20: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00010a30: 6e73 7461 6e63 6528 7261 7754 7261 6465  nstance(rawTrade
+00010a40: 2c20 7374 7229 3a0a 2020 2020 2020 2020  , str):.        
+00010a50: 2020 2020 2020 2020 7472 6164 6573 2e61          trades.a
+00010a60: 7070 656e 6428 7365 6c66 2e73 6166 655f  ppend(self.safe_
+00010a70: 7472 6164 6528 7b27 6964 273a 2072 6177  trade({'id': raw
+00010a80: 5472 6164 652c 2027 6f72 6465 7249 6427  Trade, 'orderId'
+00010a90: 3a20 6964 2c20 2773 796d 626f 6c27 3a20  : id, 'symbol': 
+00010aa0: 7379 6d62 6f6c 2c20 2769 6e66 6f27 3a20  symbol, 'info': 
+00010ab0: 7b7d 7d29 290a 2020 2020 2020 2020 2020  {}})).          
+00010ac0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00010ad0: 2020 2020 2020 2020 7472 6164 6573 2e61          trades.a
+00010ae0: 7070 656e 6428 7261 7754 7261 6465 290a  ppend(rawTrade).
+00010af0: 2020 2020 2020 2020 7374 6f70 5072 6963          stopPric
+00010b00: 6520 3d20 7365 6c66 2e6f 6d69 745f 7a65  e = self.omit_ze
+00010b10: 726f 2873 656c 662e 7361 6665 5f73 7472  ro(self.safe_str
+00010b20: 696e 6728 6f72 6465 722c 2027 7374 6f70  ing(order, 'stop
+00010b30: 7072 6963 6527 2c20 7374 6f70 5072 6963  price', stopPric
+00010b40: 6529 290a 2020 2020 2020 2020 7374 6f70  e)).        stop
+00010b50: 4c6f 7373 5072 6963 6520 3d20 4e6f 6e65  LossPrice = None
+00010b60: 0a20 2020 2020 2020 2074 616b 6550 726f  .        takePro
+00010b70: 6669 7450 7269 6365 203d 204e 6f6e 650a  fitPrice = None.
+00010b80: 2020 2020 2020 2020 6966 2074 7970 652e          if type.
+00010b90: 7374 6172 7473 7769 7468 2827 7461 6b65  startswith('take
+00010ba0: 2d70 726f 6669 7427 293a 0a20 2020 2020  -profit'):.     
+00010bb0: 2020 2020 2020 2074 616b 6550 726f 6669         takeProfi
+00010bc0: 7450 7269 6365 203d 2073 656c 662e 7361  tPrice = self.sa
+00010bd0: 6665 5f73 7472 696e 6728 6465 7363 7269  fe_string(descri
+00010be0: 7074 696f 6e2c 2027 7072 6963 6527 290a  ption, 'price').
+00010bf0: 2020 2020 2020 2020 2020 2020 7072 6963              pric
+00010c00: 6520 3d20 7365 6c66 2e6f 6d69 745f 7a65  e = self.omit_ze
+00010c10: 726f 2873 656c 662e 7361 6665 5f73 7472  ro(self.safe_str
+00010c20: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
+00010c30: 2027 7072 6963 6532 2729 290a 2020 2020   'price2')).    
+00010c40: 2020 2020 656c 6966 2074 7970 652e 7374      elif type.st
+00010c50: 6172 7473 7769 7468 2827 7374 6f70 2d6c  artswith('stop-l
+00010c60: 6f73 7327 293a 0a20 2020 2020 2020 2020  oss'):.         
+00010c70: 2020 2073 746f 704c 6f73 7350 7269 6365     stopLossPrice
+00010c80: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00010c90: 696e 6728 6465 7363 7269 7074 696f 6e2c  ing(description,
+00010ca0: 2027 7072 6963 6527 290a 2020 2020 2020   'price').      
+00010cb0: 2020 2020 2020 7072 6963 6520 3d20 7365        price = se
+00010cc0: 6c66 2e6f 6d69 745f 7a65 726f 2873 656c  lf.omit_zero(sel
+00010cd0: 662e 7361 6665 5f73 7472 696e 6728 6465  f.safe_string(de
+00010ce0: 7363 7269 7074 696f 6e2c 2027 7072 6963  scription, 'pric
+00010cf0: 6532 2729 290a 2020 2020 2020 2020 7265  e2')).        re
+00010d00: 7475 726e 2073 656c 662e 7361 6665 5f6f  turn self.safe_o
+00010d10: 7264 6572 287b 0a20 2020 2020 2020 2020  rder({.         
+00010d20: 2020 2027 6964 273a 2069 642c 0a20 2020     'id': id,.   
+00010d30: 2020 2020 2020 2020 2027 636c 6965 6e74           'client
+00010d40: 4f72 6465 7249 6427 3a20 636c 6965 6e74  OrderId': client
+00010d50: 4f72 6465 7249 642c 0a20 2020 2020 2020  OrderId,.       
+00010d60: 2020 2020 2027 696e 666f 273a 206f 7264       'info': ord
+00010d70: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00010d80: 2774 696d 6573 7461 6d70 273a 2074 696d  'timestamp': tim
+00010d90: 6573 7461 6d70 2c0a 2020 2020 2020 2020  estamp,.        
+00010da0: 2020 2020 2764 6174 6574 696d 6527 3a20      'datetime': 
+00010db0: 7365 6c66 2e69 736f 3836 3031 2874 696d  self.iso8601(tim
+00010dc0: 6573 7461 6d70 292c 0a20 2020 2020 2020  estamp),.       
+00010dd0: 2020 2020 2027 6c61 7374 5472 6164 6554       'lastTradeT
+00010de0: 696d 6573 7461 6d70 273a 204e 6f6e 652c  imestamp': None,
+00010df0: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
+00010e00: 6174 7573 273a 2073 7461 7475 732c 0a20  atus': status,. 
+00010e10: 2020 2020 2020 2020 2020 2027 7379 6d62             'symb
+00010e20: 6f6c 273a 2073 796d 626f 6c2c 0a20 2020  ol': symbol,.   
+00010e30: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
+00010e40: 2073 656c 662e 7061 7273 655f 6f72 6465   self.parse_orde
+00010e50: 725f 7479 7065 2874 7970 6529 2c0a 2020  r_type(type),.  
+00010e60: 2020 2020 2020 2020 2020 2774 696d 6549            'timeI
+00010e70: 6e46 6f72 6365 273a 204e 6f6e 652c 0a20  nForce': None,. 
+00010e80: 2020 2020 2020 2020 2020 2027 706f 7374             'post
+00010e90: 4f6e 6c79 273a 2069 7350 6f73 744f 6e6c  Only': isPostOnl
+00010ea0: 792c 0a20 2020 2020 2020 2020 2020 2027  y,.            '
+00010eb0: 7369 6465 273a 2073 6964 652c 0a20 2020  side': side,.   
+00010ec0: 2020 2020 2020 2020 2027 7072 6963 6527           'price'
+00010ed0: 3a20 7072 6963 652c 0a20 2020 2020 2020  : price,.       
+00010ee0: 2020 2020 2027 7374 6f70 5072 6963 6527       'stopPrice'
+00010ef0: 3a20 7374 6f70 5072 6963 652c 0a20 2020  : stopPrice,.   
+00010f00: 2020 2020 2020 2020 2027 7472 6967 6765           'trigge
+00010f10: 7250 7269 6365 273a 2073 746f 7050 7269  rPrice': stopPri
+00010f20: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
+00010f30: 2774 616b 6550 726f 6669 7450 7269 6365  'takeProfitPrice
+00010f40: 273a 2074 616b 6550 726f 6669 7450 7269  ': takeProfitPri
+00010f50: 6365 2c0a 2020 2020 2020 2020 2020 2020  ce,.            
+00010f60: 2773 746f 704c 6f73 7350 7269 6365 273a  'stopLossPrice':
+00010f70: 2073 746f 704c 6f73 7350 7269 6365 2c0a   stopLossPrice,.
+00010f80: 2020 2020 2020 2020 2020 2020 2763 6f73              'cos
+00010f90: 7427 3a20 4e6f 6e65 2c0a 2020 2020 2020  t': None,.      
+00010fa0: 2020 2020 2020 2761 6d6f 756e 7427 3a20        'amount': 
+00010fb0: 616d 6f75 6e74 2c0a 2020 2020 2020 2020  amount,.        
+00010fc0: 2020 2020 2766 696c 6c65 6427 3a20 6669      'filled': fi
+00010fd0: 6c6c 6564 2c0a 2020 2020 2020 2020 2020  lled,.          
+00010fe0: 2020 2761 7665 7261 6765 273a 2061 7665    'average': ave
+00010ff0: 7261 6765 2c0a 2020 2020 2020 2020 2020  rage,.          
+00011000: 2020 2772 656d 6169 6e69 6e67 273a 204e    'remaining': N
+00011010: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+00011020: 2027 6665 6527 3a20 6665 652c 0a20 2020   'fee': fee,.   
+00011030: 2020 2020 2020 2020 2027 7472 6164 6573           'trades
+00011040: 273a 2074 7261 6465 732c 0a20 2020 2020  ': trades,.     
+00011050: 2020 207d 2c20 6d61 726b 6574 290a 0a20     }, market).. 
+00011060: 2020 2064 6566 206f 7264 6572 5f72 6571     def order_req
+00011070: 7565 7374 2873 656c 662c 206d 6574 686f  uest(self, metho
+00011080: 642c 2073 796d 626f 6c2c 2074 7970 652c  d, symbol, type,
+00011090: 2072 6571 7565 7374 2c20 7072 6963 653d   request, price=
+000110a0: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
+000110b0: 3a0a 2020 2020 2020 2020 636c 6965 6e74  :.        client
+000110c0: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
+000110d0: 6166 655f 7374 7269 6e67 5f32 2870 6172  afe_string_2(par
+000110e0: 616d 732c 2027 7573 6572 7265 6627 2c20  ams, 'userref', 
+000110f0: 2763 6c69 656e 744f 7264 6572 4964 2729  'clientOrderId')
+00011100: 0a20 2020 2020 2020 2070 6172 616d 7320  .        params 
+00011110: 3d20 7365 6c66 2e6f 6d69 7428 7061 7261  = self.omit(para
+00011120: 6d73 2c20 5b27 7573 6572 7265 6627 2c20  ms, ['userref', 
+00011130: 2763 6c69 656e 744f 7264 6572 4964 275d  'clientOrderId']
+00011140: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
+00011150: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
+00011160: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00011170: 2020 2020 7265 7175 6573 745b 2775 7365      request['use
+00011180: 7272 6566 275d 203d 2063 6c69 656e 744f  rref'] = clientO
+00011190: 7264 6572 4964 0a20 2020 2020 2020 2073  rderId.        s
+000111a0: 746f 704c 6f73 7354 7269 6767 6572 5072  topLossTriggerPr
+000111b0: 6963 6520 3d20 7365 6c66 2e73 6166 655f  ice = self.safe_
+000111c0: 7374 7269 6e67 2870 6172 616d 732c 2027  string(params, '
+000111d0: 7374 6f70 4c6f 7373 5072 6963 6527 290a  stopLossPrice').
+000111e0: 2020 2020 2020 2020 7461 6b65 5072 6f66          takeProf
+000111f0: 6974 5472 6967 6765 7250 7269 6365 203d  itTriggerPrice =
+00011200: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00011210: 6728 7061 7261 6d73 2c20 2774 616b 6550  g(params, 'takeP
+00011220: 726f 6669 7450 7269 6365 2729 0a20 2020  rofitPrice').   
+00011230: 2020 2020 2069 7353 746f 704c 6f73 7354       isStopLossT
+00011240: 7269 6767 6572 4f72 6465 7220 3d20 7374  riggerOrder = st
+00011250: 6f70 4c6f 7373 5472 6967 6765 7250 7269  opLossTriggerPri
+00011260: 6365 2069 7320 6e6f 7420 4e6f 6e65 0a20  ce is not None. 
+00011270: 2020 2020 2020 2069 7354 616b 6550 726f         isTakePro
+00011280: 6669 7454 7269 6767 6572 4f72 6465 7220  fitTriggerOrder 
+00011290: 3d20 7461 6b65 5072 6f66 6974 5472 6967  = takeProfitTrig
+000112a0: 6765 7250 7269 6365 2069 7320 6e6f 7420  gerPrice is not 
+000112b0: 4e6f 6e65 0a20 2020 2020 2020 2069 7353  None.        isS
+000112c0: 746f 704c 6f73 734f 7254 616b 6550 726f  topLossOrTakePro
+000112d0: 6669 7454 7269 6767 6572 203d 2069 7353  fitTrigger = isS
+000112e0: 746f 704c 6f73 7354 7269 6767 6572 4f72  topLossTriggerOr
+000112f0: 6465 7220 6f72 2069 7354 616b 6550 726f  der or isTakePro
+00011300: 6669 7454 7269 6767 6572 4f72 6465 720a  fitTriggerOrder.
+00011310: 2020 2020 2020 2020 7472 6169 6c69 6e67          trailing
+00011320: 416d 6f75 6e74 203d 2073 656c 662e 7361  Amount = self.sa
+00011330: 6665 5f73 7472 696e 6728 7061 7261 6d73  fe_string(params
+00011340: 2c20 2774 7261 696c 696e 6741 6d6f 756e  , 'trailingAmoun
+00011350: 7427 290a 2020 2020 2020 2020 7472 6169  t').        trai
+00011360: 6c69 6e67 4c69 6d69 7441 6d6f 756e 7420  lingLimitAmount 
+00011370: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
+00011380: 6e67 2870 6172 616d 732c 2027 7472 6169  ng(params, 'trai
+00011390: 6c69 6e67 4c69 6d69 7441 6d6f 756e 7427  lingLimitAmount'
+000113a0: 290a 2020 2020 2020 2020 6973 5472 6169  ).        isTrai
+000113b0: 6c69 6e67 416d 6f75 6e74 4f72 6465 7220  lingAmountOrder 
+000113c0: 3d20 7472 6169 6c69 6e67 416d 6f75 6e74  = trailingAmount
+000113d0: 2069 7320 6e6f 7420 4e6f 6e65 0a20 2020   is not None.   
+000113e0: 2020 2020 2069 734c 696d 6974 4f72 6465       isLimitOrde
+000113f0: 7220 3d20 7479 7065 2e65 6e64 7377 6974  r = type.endswit
+00011400: 6828 276c 696d 6974 2729 2020 2320 7375  h('limit')  # su
+00011410: 7070 6f72 7469 6e67 206c 696d 6974 2c20  pporting limit, 
+00011420: 7374 6f70 2d6c 6f73 732d 6c69 6d69 742c  stop-loss-limit,
+00011430: 2074 616b 652d 7072 6f66 6974 2d6c 696d   take-profit-lim
+00011440: 6974 2c20 6574 630a 2020 2020 2020 2020  it, etc.        
+00011450: 6966 2069 734c 696d 6974 4f72 6465 7220  if isLimitOrder 
+00011460: 616e 6420 6e6f 7420 6973 5472 6169 6c69  and not isTraili
+00011470: 6e67 416d 6f75 6e74 4f72 6465 723a 0a20  ngAmountOrder:. 
+00011480: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00011490: 7374 5b27 7072 6963 6527 5d20 3d20 7365  st['price'] = se
+000114a0: 6c66 2e70 7269 6365 5f74 6f5f 7072 6563  lf.price_to_prec
+000114b0: 6973 696f 6e28 7379 6d62 6f6c 2c20 7072  ision(symbol, pr
+000114c0: 6963 6529 0a20 2020 2020 2020 2072 6564  ice).        red
+000114d0: 7563 654f 6e6c 7920 3d20 7365 6c66 2e73  uceOnly = self.s
+000114e0: 6166 655f 7661 6c75 655f 3228 7061 7261  afe_value_2(para
+000114f0: 6d73 2c20 2772 6564 7563 654f 6e6c 7927  ms, 'reduceOnly'
+00011500: 2c20 2772 6564 7563 655f 6f6e 6c79 2729  , 'reduce_only')
+00011510: 0a20 2020 2020 2020 2069 6620 6973 5374  .        if isSt
+00011520: 6f70 4c6f 7373 4f72 5461 6b65 5072 6f66  opLossOrTakeProf
+00011530: 6974 5472 6967 6765 723a 0a20 2020 2020  itTrigger:.     
+00011540: 2020 2020 2020 2069 6620 6973 5374 6f70         if isStop
+00011550: 4c6f 7373 5472 6967 6765 724f 7264 6572  LossTriggerOrder
+00011560: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00011570: 2020 7265 7175 6573 745b 2770 7269 6365    request['price
+00011580: 275d 203d 2073 656c 662e 7072 6963 655f  '] = self.price_
+00011590: 746f 5f70 7265 6369 7369 6f6e 2873 796d  to_precision(sym
+000115a0: 626f 6c2c 2073 746f 704c 6f73 7354 7269  bol, stopLossTri
+000115b0: 6767 6572 5072 6963 6529 0a20 2020 2020  ggerPrice).     
+000115c0: 2020 2020 2020 2020 2020 2069 6620 6973             if is
+000115d0: 4c69 6d69 744f 7264 6572 3a0a 2020 2020  LimitOrder:.    
+000115e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000115f0: 7265 7175 6573 745b 276f 7264 6572 7479  request['orderty
+00011600: 7065 275d 203d 2027 7374 6f70 2d6c 6f73  pe'] = 'stop-los
+00011610: 732d 6c69 6d69 7427 0a20 2020 2020 2020  s-limit'.       
+00011620: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
+00011630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011640: 2020 2072 6571 7565 7374 5b27 6f72 6465     request['orde
+00011650: 7274 7970 6527 5d20 3d20 2773 746f 702d  rtype'] = 'stop-
+00011660: 6c6f 7373 270a 2020 2020 2020 2020 2020  loss'.          
+00011670: 2020 656c 6966 2069 7354 616b 6550 726f    elif isTakePro
+00011680: 6669 7454 7269 6767 6572 4f72 6465 723a  fitTriggerOrder:
+00011690: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000116a0: 2072 6571 7565 7374 5b27 7072 6963 6527   request['price'
+000116b0: 5d20 3d20 7365 6c66 2e70 7269 6365 5f74  ] = self.price_t
+000116c0: 6f5f 7072 6563 6973 696f 6e28 7379 6d62  o_precision(symb
+000116d0: 6f6c 2c20 7461 6b65 5072 6f66 6974 5472  ol, takeProfitTr
+000116e0: 6967 6765 7250 7269 6365 290a 2020 2020  iggerPrice).    
+000116f0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+00011700: 734c 696d 6974 4f72 6465 723a 0a20 2020  sLimitOrder:.   
+00011710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011720: 2072 6571 7565 7374 5b27 6f72 6465 7274   request['ordert
+00011730: 7970 6527 5d20 3d20 2774 616b 652d 7072  ype'] = 'take-pr
+00011740: 6f66 6974 2d6c 696d 6974 270a 2020 2020  ofit-limit'.    
+00011750: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00011760: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00011770: 2020 2020 2020 7265 7175 6573 745b 276f        request['o
+00011780: 7264 6572 7479 7065 275d 203d 2027 7461  rdertype'] = 'ta
+00011790: 6b65 2d70 726f 6669 7427 0a20 2020 2020  ke-profit'.     
+000117a0: 2020 2020 2020 2069 6620 6973 4c69 6d69         if isLimi
+000117b0: 744f 7264 6572 3a0a 2020 2020 2020 2020  tOrder:.        
+000117c0: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+000117d0: 2770 7269 6365 3227 5d20 3d20 7365 6c66  'price2'] = self
+000117e0: 2e70 7269 6365 5f74 6f5f 7072 6563 6973  .price_to_precis
+000117f0: 696f 6e28 7379 6d62 6f6c 2c20 7072 6963  ion(symbol, pric
+00011800: 6529 0a20 2020 2020 2020 2065 6c69 6620  e).        elif 
+00011810: 6973 5472 6169 6c69 6e67 416d 6f75 6e74  isTrailingAmount
+00011820: 4f72 6465 723a 0a20 2020 2020 2020 2020  Order:.         
+00011830: 2020 2074 7261 696c 696e 6741 6374 6976     trailingActiv
+00011840: 6174 696f 6e50 7269 6365 5479 7065 203d  ationPriceType =
+00011850: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00011860: 6728 7061 7261 6d73 2c20 2774 7269 6767  g(params, 'trigg
+00011870: 6572 272c 2027 6c61 7374 2729 0a20 2020  er', 'last').   
+00011880: 2020 2020 2020 2020 2074 7261 696c 696e           trailin
+00011890: 6741 6d6f 756e 7453 7472 696e 6720 3d20  gAmountString = 
+000118a0: 272b 2720 2b20 7472 6169 6c69 6e67 416d  '+' + trailingAm
+000118b0: 6f75 6e74 0a20 2020 2020 2020 2020 2020  ount.           
+000118c0: 2072 6571 7565 7374 5b27 7472 6967 6765   request['trigge
+000118d0: 7227 5d20 3d20 7472 6169 6c69 6e67 4163  r'] = trailingAc
+000118e0: 7469 7661 7469 6f6e 5072 6963 6554 7970  tivationPriceTyp
+000118f0: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00011900: 2069 734c 696d 6974 4f72 6465 7220 6f72   isLimitOrder or
+00011910: 2028 7472 6169 6c69 6e67 4c69 6d69 7441   (trailingLimitA
+00011920: 6d6f 756e 7420 6973 206e 6f74 204e 6f6e  mount is not Non
+00011930: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+00011940: 2020 2020 6f66 6673 6574 203d 2073 656c      offset = sel
+00011950: 662e 7361 6665 5f73 7472 696e 6728 7061  f.safe_string(pa
+00011960: 7261 6d73 2c20 276f 6666 7365 7427 2c20  rams, 'offset', 
+00011970: 272d 2729 0a20 2020 2020 2020 2020 2020  '-').           
+00011980: 2020 2020 2074 7261 696c 696e 674c 696d       trailingLim
+00011990: 6974 416d 6f75 6e74 5374 7269 6e67 203d  itAmountString =
+000119a0: 206f 6666 7365 7420 2b20 7365 6c66 2e6e   offset + self.n
+000119b0: 756d 6265 725f 746f 5f73 7472 696e 6728  umber_to_string(
+000119c0: 7472 6169 6c69 6e67 4c69 6d69 7441 6d6f  trailingLimitAmo
+000119d0: 756e 7429 0a20 2020 2020 2020 2020 2020  unt).           
+000119e0: 2020 2020 2072 6571 7565 7374 5b27 7072       request['pr
+000119f0: 6963 6527 5d20 3d20 7472 6169 6c69 6e67  ice'] = trailing
+00011a00: 416d 6f75 6e74 5374 7269 6e67 0a20 2020  AmountString.   
+00011a10: 2020 2020 2020 2020 2020 2020 2072 6571               req
+00011a20: 7565 7374 5b27 7072 6963 6532 275d 203d  uest['price2'] =
+00011a30: 2074 7261 696c 696e 674c 696d 6974 416d   trailingLimitAm
+00011a40: 6f75 6e74 5374 7269 6e67 0a20 2020 2020  ountString.     
+00011a50: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00011a60: 7374 5b27 6f72 6465 7274 7970 6527 5d20  st['ordertype'] 
+00011a70: 3d20 2774 7261 696c 696e 672d 7374 6f70  = 'trailing-stop
+00011a80: 2d6c 696d 6974 270a 2020 2020 2020 2020  -limit'.        
+00011a90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00011aa0: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00011ab0: 745b 2770 7269 6365 275d 203d 2074 7261  t['price'] = tra
+00011ac0: 696c 696e 6741 6d6f 756e 7453 7472 696e  ilingAmountStrin
+00011ad0: 670a 2020 2020 2020 2020 2020 2020 2020  g.              
+00011ae0: 2020 7265 7175 6573 745b 276f 7264 6572    request['order
+00011af0: 7479 7065 275d 203d 2027 7472 6169 6c69  type'] = 'traili
+00011b00: 6e67 2d73 746f 7027 0a20 2020 2020 2020  ng-stop'.       
+00011b10: 2069 6620 7265 6475 6365 4f6e 6c79 3a0a   if reduceOnly:.
+00011b20: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00011b30: 6573 745b 2772 6564 7563 655f 6f6e 6c79  est['reduce_only
+00011b40: 275d 203d 2027 7472 7565 2720 2023 206e  '] = 'true'  # n
+00011b50: 6f74 2075 7369 6e67 2068 6173 6174 7472  ot using hasattr
+00011b60: 2873 656c 662c 2062 6f6f 6c65 616e 2920  (self, boolean) 
+00011b70: 6361 7365 2c20 6265 6361 7573 6520 7468  case, because th
+00011b80: 6520 7572 6c65 6e63 6f64 6564 4e65 7374  e urlencodedNest
+00011b90: 6564 2074 7261 6e73 666f 726d 7320 6974  ed transforms it
+00011ba0: 2069 6e74 6f20 2754 7275 6527 2073 7472   into 'True' str
+00011bb0: 696e 670a 2020 2020 2020 2020 636c 6f73  ing.        clos
+00011bc0: 6520 3d20 7365 6c66 2e73 6166 655f 7661  e = self.safe_va
+00011bd0: 6c75 6528 7061 7261 6d73 2c20 2763 6c6f  lue(params, 'clo
+00011be0: 7365 2729 0a20 2020 2020 2020 2069 6620  se').        if 
+00011bf0: 636c 6f73 6520 6973 206e 6f74 204e 6f6e  close is not Non
+00011c00: 653a 0a20 2020 2020 2020 2020 2020 2063  e:.            c
+00011c10: 6c6f 7365 203d 2073 656c 662e 6578 7465  lose = self.exte
+00011c20: 6e64 287b 7d2c 2063 6c6f 7365 290a 2020  nd({}, close).  
+00011c30: 2020 2020 2020 2020 2020 636c 6f73 6550            closeP
+00011c40: 7269 6365 203d 2073 656c 662e 7361 6665  rice = self.safe
+00011c50: 5f76 616c 7565 2863 6c6f 7365 2c20 2770  _value(close, 'p
+00011c60: 7269 6365 2729 0a20 2020 2020 2020 2020  rice').         
+00011c70: 2020 2069 6620 636c 6f73 6550 7269 6365     if closePrice
+00011c80: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00011c90: 2020 2020 2020 2020 2020 2020 2020 636c                cl
+00011ca0: 6f73 655b 2770 7269 6365 275d 203d 2073  ose['price'] = s
+00011cb0: 656c 662e 7072 6963 655f 746f 5f70 7265  elf.price_to_pre
+00011cc0: 6369 7369 6f6e 2873 796d 626f 6c2c 2063  cision(symbol, c
+00011cd0: 6c6f 7365 5072 6963 6529 0a20 2020 2020  losePrice).     
+00011ce0: 2020 2020 2020 2063 6c6f 7365 5072 6963         closePric
+00011cf0: 6532 203d 2073 656c 662e 7361 6665 5f76  e2 = self.safe_v
+00011d00: 616c 7565 2863 6c6f 7365 2c20 2770 7269  alue(close, 'pri
+00011d10: 6365 3227 2920 2023 2073 746f 7050 7269  ce2')  # stopPri
+00011d20: 6365 0a20 2020 2020 2020 2020 2020 2069  ce.            i
+00011d30: 6620 636c 6f73 6550 7269 6365 3220 6973  f closePrice2 is
+00011d40: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00011d50: 2020 2020 2020 2020 2020 2063 6c6f 7365             close
+00011d60: 5b27 7072 6963 6532 275d 203d 2073 656c  ['price2'] = sel
+00011d70: 662e 7072 6963 655f 746f 5f70 7265 6369  f.price_to_preci
+00011d80: 7369 6f6e 2873 796d 626f 6c2c 2063 6c6f  sion(symbol, clo
+00011d90: 7365 5072 6963 6532 290a 2020 2020 2020  sePrice2).      
+00011da0: 2020 2020 2020 7265 7175 6573 745b 2763        request['c
+00011db0: 6c6f 7365 275d 203d 2063 6c6f 7365 0a20  lose'] = close. 
+00011dc0: 2020 2020 2020 2074 696d 6549 6e46 6f72         timeInFor
+00011dd0: 6365 203d 2073 656c 662e 7361 6665 5f73  ce = self.safe_s
+00011de0: 7472 696e 675f 3228 7061 7261 6d73 2c20  tring_2(params, 
+00011df0: 2774 696d 6549 6e46 6f72 6365 272c 2027  'timeInForce', '
+00011e00: 7469 6d65 696e 666f 7263 6527 290a 2020  timeinforce').  
+00011e10: 2020 2020 2020 6966 2074 696d 6549 6e46        if timeInF
+00011e20: 6f72 6365 2069 7320 6e6f 7420 4e6f 6e65  orce is not None
+00011e30: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+00011e40: 7175 6573 745b 2774 696d 6569 6e66 6f72  quest['timeinfor
+00011e50: 6365 275d 203d 2074 696d 6549 6e46 6f72  ce'] = timeInFor
+00011e60: 6365 0a20 2020 2020 2020 2069 734d 6172  ce.        isMar
+00011e70: 6b65 7420 3d20 2874 7970 6520 3d3d 2027  ket = (type == '
+00011e80: 6d61 726b 6574 2729 0a20 2020 2020 2020  market').       
+00011e90: 2070 6f73 744f 6e6c 7920 3d20 4e6f 6e65   postOnly = None
+00011ea0: 0a20 2020 2020 2020 2070 6f73 744f 6e6c  .        postOnl
+00011eb0: 792c 2070 6172 616d 7320 3d20 7365 6c66  y, params = self
+00011ec0: 2e68 616e 646c 655f 706f 7374 5f6f 6e6c  .handle_post_onl
+00011ed0: 7928 6973 4d61 726b 6574 2c20 4661 6c73  y(isMarket, Fals
+00011ee0: 652c 2070 6172 616d 7329 0a20 2020 2020  e, params).     
+00011ef0: 2020 2069 6620 706f 7374 4f6e 6c79 3a0a     if postOnly:.
+00011f00: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00011f10: 6573 745b 276f 666c 6167 7327 5d20 3d20  est['oflags'] = 
+00011f20: 2770 6f73 7427 0a20 2020 2020 2020 2070  'post'.        p
+00011f30: 6172 616d 7320 3d20 7365 6c66 2e6f 6d69  arams = self.omi
+00011f40: 7428 7061 7261 6d73 2c20 5b27 7469 6d65  t(params, ['time
+00011f50: 496e 466f 7263 6527 2c20 2772 6564 7563  InForce', 'reduc
+00011f60: 654f 6e6c 7927 2c20 2773 746f 704c 6f73  eOnly', 'stopLos
+00011f70: 7350 7269 6365 272c 2027 7461 6b65 5072  sPrice', 'takePr
+00011f80: 6f66 6974 5072 6963 6527 2c20 2774 7261  ofitPrice', 'tra
+00011f90: 696c 696e 6741 6d6f 756e 7427 2c20 2774  ilingAmount', 't
+00011fa0: 7261 696c 696e 674c 696d 6974 416d 6f75  railingLimitAmou
+00011fb0: 6e74 272c 2027 6f66 6673 6574 275d 290a  nt', 'offset']).
+00011fc0: 2020 2020 2020 2020 7265 7475 726e 205b          return [
+00011fd0: 7265 7175 6573 742c 2070 6172 616d 735d  request, params]
+00011fe0: 0a0a 2020 2020 6465 6620 6564 6974 5f6f  ..    def edit_o
+00011ff0: 7264 6572 2873 656c 662c 2069 643a 2073  rder(self, id: s
+00012000: 7472 2c20 7379 6d62 6f6c 3a20 7374 722c  tr, symbol: str,
+00012010: 2074 7970 653a 204f 7264 6572 5479 7065   type: OrderType
+00012020: 2c20 7369 6465 3a20 4f72 6465 7253 6964  , side: OrderSid
+00012030: 652c 2061 6d6f 756e 743a 204e 756d 203d  e, amount: Num =
+00012040: 204e 6f6e 652c 2070 7269 6365 3a20 4e75   None, price: Nu
+00012050: 6d20 3d20 4e6f 6e65 2c20 7061 7261 6d73  m = None, params
+00012060: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00012070: 220a 2020 2020 2020 2020 6564 6974 2061  ".        edit a
+00012080: 2074 7261 6465 206f 7264 6572 0a20 2020   trade order.   
+00012090: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
+000120a0: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
+000120b0: 6f6d 2f72 6573 742f 2374 6167 2f54 7261  om/rest/#tag/Tra
+000120c0: 6469 6e67 2f6f 7065 7261 7469 6f6e 2f65  ding/operation/e
+000120d0: 6469 744f 7264 6572 0a20 2020 2020 2020  ditOrder.       
+000120e0: 203a 7061 7261 6d20 7374 7220 6964 3a20   :param str id: 
+000120f0: 6f72 6465 7220 6964 0a20 2020 2020 2020  order id.       
+00012100: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
+00012110: 6f6c 3a20 756e 6966 6965 6420 7379 6d62  ol: unified symb
+00012120: 6f6c 206f 6620 7468 6520 6d61 726b 6574  ol of the market
+00012130: 2074 6f20 6372 6561 7465 2061 6e20 6f72   to create an or
+00012140: 6465 7220 696e 0a20 2020 2020 2020 203a  der in.        :
+00012150: 7061 7261 6d20 7374 7220 7479 7065 3a20  param str type: 
+00012160: 276d 6172 6b65 7427 206f 7220 276c 696d  'market' or 'lim
+00012170: 6974 270a 2020 2020 2020 2020 3a70 6172  it'.        :par
+00012180: 616d 2073 7472 2073 6964 653a 2027 6275  am str side: 'bu
+00012190: 7927 206f 7220 2773 656c 6c27 0a20 2020  y' or 'sell'.   
+000121a0: 2020 2020 203a 7061 7261 6d20 666c 6f61       :param floa
+000121b0: 7420 616d 6f75 6e74 3a20 686f 7720 6d75  t amount: how mu
+000121c0: 6368 206f 6620 7468 6520 6375 7272 656e  ch of the curren
+000121d0: 6379 2079 6f75 2077 616e 7420 746f 2074  cy you want to t
+000121e0: 7261 6465 2069 6e20 756e 6974 7320 6f66  rade in units of
+000121f0: 2074 6865 2062 6173 6520 6375 7272 656e   the base curren
+00012200: 6379 0a20 2020 2020 2020 203a 7061 7261  cy.        :para
+00012210: 6d20 666c 6f61 7420 5b70 7269 6365 5d3a  m float [price]:
+00012220: 2074 6865 2070 7269 6365 2061 7420 7768   the price at wh
+00012230: 6963 6820 7468 6520 6f72 6465 7220 6973  ich the order is
+00012240: 2074 6f20 6265 2066 756c 6c66 696c 6c65   to be fullfille
+00012250: 642c 2069 6e20 756e 6974 7320 6f66 2074  d, in units of t
+00012260: 6865 2071 756f 7465 2063 7572 7265 6e63  he quote currenc
+00012270: 792c 2069 676e 6f72 6564 2069 6e20 6d61  y, ignored in ma
+00012280: 726b 6574 206f 7264 6572 730a 2020 2020  rket orders.    
+00012290: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+000122a0: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+000122b0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+000122c0: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+000122d0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+000122e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000122f0: 666c 6f61 7420 5b70 6172 616d 732e 7374  float [params.st
+00012300: 6f70 4c6f 7373 5072 6963 655d 3a20 2a6d  opLossPrice]: *m
+00012310: 6172 6769 6e20 6f6e 6c79 2a20 7468 6520  argin only* the 
+00012320: 7072 6963 6520 7468 6174 2061 2073 746f  price that a sto
+00012330: 7020 6c6f 7373 206f 7264 6572 2069 7320  p loss order is 
+00012340: 7472 6967 6765 7265 6420 6174 0a20 2020  triggered at.   
+00012350: 2020 2020 203a 7061 7261 6d20 666c 6f61       :param floa
+00012360: 7420 5b70 6172 616d 732e 7461 6b65 5072  t [params.takePr
+00012370: 6f66 6974 5072 6963 655d 3a20 2a6d 6172  ofitPrice]: *mar
+00012380: 6769 6e20 6f6e 6c79 2a20 7468 6520 7072  gin only* the pr
+00012390: 6963 6520 7468 6174 2061 2074 616b 6520  ice that a take 
+000123a0: 7072 6f66 6974 206f 7264 6572 2069 7320  profit order is 
+000123b0: 7472 6967 6765 7265 6420 6174 0a20 2020  triggered at.   
+000123c0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+000123d0: 5b70 6172 616d 732e 7472 6169 6c69 6e67  [params.trailing
+000123e0: 416d 6f75 6e74 5d3a 202a 6d61 7267 696e  Amount]: *margin
+000123f0: 206f 6e6c 792a 2074 6865 2071 756f 7465   only* the quote
+00012400: 2070 7269 6365 2061 7761 7920 6672 6f6d   price away from
+00012410: 2074 6865 2063 7572 7265 6e74 206d 6172   the current mar
+00012420: 6b65 7420 7072 6963 650a 2020 2020 2020  ket price.      
+00012430: 2020 3a70 6172 616d 2073 7472 205b 7061    :param str [pa
+00012440: 7261 6d73 2e74 7261 696c 696e 674c 696d  rams.trailingLim
+00012450: 6974 416d 6f75 6e74 5d3a 202a 6d61 7267  itAmount]: *marg
+00012460: 696e 206f 6e6c 792a 2074 6865 2071 756f  in only* the quo
+00012470: 7465 2061 6d6f 756e 7420 6177 6179 2066  te amount away f
+00012480: 726f 6d20 7468 6520 7472 6169 6c69 6e67  rom the trailing
+00012490: 416d 6f75 6e74 0a20 2020 2020 2020 203a  Amount.        :
+000124a0: 7061 7261 6d20 7374 7220 5b70 6172 616d  param str [param
+000124b0: 732e 6f66 6673 6574 5d3a 202a 6d61 7267  s.offset]: *marg
+000124c0: 696e 206f 6e6c 792a 2027 2b27 206f 7220  in only* '+' or 
+000124d0: 272d 2720 7768 6574 6865 7220 796f 7520  '-' whether you 
+000124e0: 7761 6e74 2074 6865 2074 7261 696c 696e  want the trailin
+000124f0: 674c 696d 6974 416d 6f75 6e74 2076 616c  gLimitAmount val
+00012500: 7565 2074 6f20 6265 2070 6f73 6974 6976  ue to be positiv
+00012510: 6520 6f72 206e 6567 6174 6976 652c 2064  e or negative, d
+00012520: 6566 6175 6c74 2069 7320 6e65 6761 7469  efault is negati
+00012530: 7665 2027 2d27 0a20 2020 2020 2020 203a  ve '-'.        :
+00012540: 7061 7261 6d20 7374 7220 5b70 6172 616d  param str [param
+00012550: 732e 7472 6967 6765 725d 3a20 2a6d 6172  s.trigger]: *mar
+00012560: 6769 6e20 6f6e 6c79 2a20 7468 6520 6163  gin only* the ac
+00012570: 7469 7661 7469 6f6e 2070 7269 6365 2074  tivation price t
+00012580: 7970 652c 2027 6c61 7374 2720 6f72 2027  ype, 'last' or '
+00012590: 696e 6465 7827 2c20 6465 6661 756c 7420  index', default 
+000125a0: 6973 2027 6c61 7374 270a 2020 2020 2020  is 'last'.      
+000125b0: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
+000125c0: 2061 6e20 606f 7264 6572 2073 7472 7563   an `order struc
+000125d0: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
+000125e0: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+000125f0: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+00012600: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00012610: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00012620: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00012630: 2020 2020 6d61 726b 6574 203d 2073 656c      market = sel
+00012640: 662e 6d61 726b 6574 2873 796d 626f 6c29  f.market(symbol)
+00012650: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+00012660: 6d61 726b 6574 5b27 7370 6f74 275d 3a0a  market['spot']:.
+00012670: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00012680: 6520 4e6f 7453 7570 706f 7274 6564 2873  e NotSupported(s
+00012690: 656c 662e 6964 202b 2027 2065 6469 744f  elf.id + ' editO
+000126a0: 7264 6572 2829 2064 6f65 7320 6e6f 7420  rder() does not 
+000126b0: 7375 7070 6f72 7420 2720 2b20 6d61 726b  support ' + mark
+000126c0: 6574 5b27 7479 7065 275d 202b 2027 206f  et['type'] + ' o
+000126d0: 7264 6572 732c 206f 6e6c 7920 7370 6f74  rders, only spot
+000126e0: 206f 7264 6572 7320 6172 6520 6163 6365   orders are acce
+000126f0: 7074 6564 2729 0a20 2020 2020 2020 2072  pted').        r
+00012700: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+00012710: 2020 2020 2020 2027 7478 6964 273a 2069         'txid': i
+00012720: 642c 0a20 2020 2020 2020 2020 2020 2027  d,.            '
+00012730: 7061 6972 273a 206d 6172 6b65 745b 2769  pair': market['i
+00012740: 6427 5d2c 0a20 2020 2020 2020 207d 0a20  d'],.        }. 
+00012750: 2020 2020 2020 2069 6620 616d 6f75 6e74         if amount
+00012760: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00012770: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00012780: 745b 2776 6f6c 756d 6527 5d20 3d20 7365  t['volume'] = se
+00012790: 6c66 2e61 6d6f 756e 745f 746f 5f70 7265  lf.amount_to_pre
+000127a0: 6369 7369 6f6e 2873 796d 626f 6c2c 2061  cision(symbol, a
+000127b0: 6d6f 756e 7429 0a20 2020 2020 2020 206f  mount).        o
+000127c0: 7264 6572 5265 7175 6573 7420 3d20 7365  rderRequest = se
+000127d0: 6c66 2e6f 7264 6572 5f72 6571 7565 7374  lf.order_request
+000127e0: 2827 6564 6974 4f72 6465 7228 2927 2c20  ('editOrder()', 
+000127f0: 7379 6d62 6f6c 2c20 7479 7065 2c20 7265  symbol, type, re
+00012800: 7175 6573 742c 2070 7269 6365 2c20 7061  quest, price, pa
+00012810: 7261 6d73 290a 2020 2020 2020 2020 7265  rams).        re
+00012820: 7370 6f6e 7365 203d 2073 656c 662e 7072  sponse = self.pr
+00012830: 6976 6174 6550 6f73 7445 6469 744f 7264  ivatePostEditOrd
+00012840: 6572 2873 656c 662e 6578 7465 6e64 286f  er(self.extend(o
+00012850: 7264 6572 5265 7175 6573 745b 305d 2c20  rderRequest[0], 
+00012860: 6f72 6465 7252 6571 7565 7374 5b31 5d29  orderRequest[1])
+00012870: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
+00012880: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+00012890: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+000128a0: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
+000128b0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+000128c0: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
+000128d0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000128e0: 7374 6174 7573 223a 2022 6f6b 222c 0a20  status": "ok",. 
+000128f0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00012900: 2020 2020 2022 7478 6964 223a 2022 4f41       "txid": "OA
+00012910: 5732 424f 2d37 5257 454b 2d50 5a59 3555  W2BO-7RWEK-PZY5U
+00012920: 4f22 2c0a 2020 2020 2020 2020 2320 2020  O",.        #   
+00012930: 2020 2020 2020 2020 2020 226f 7269 6769            "origi
+00012940: 6e61 6c74 7869 6422 3a20 224f 584c 3653  naltxid": "OXL6S
+00012950: 532d 5550 4e4d 432d 3236 5742 4537 222c  S-UPNMC-26WBE7",
+00012960: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00012970: 2020 2020 2020 2022 766f 6c75 6d65 223a         "volume":
+00012980: 2022 302e 3030 3037 3530 3030 222c 0a20   "0.00075000",. 
+00012990: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000129a0: 2020 2020 2022 7072 6963 6522 3a20 2231       "price": "1
+000129b0: 3335 3030 2e30 222c 0a20 2020 2020 2020  3500.0",.       
+000129c0: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
+000129d0: 6f72 6465 7273 5f63 616e 6365 6c6c 6564  orders_cancelled
+000129e0: 223a 2031 2c0a 2020 2020 2020 2020 2320  ": 1,.        # 
+000129f0: 2020 2020 2020 2020 2020 2020 2264 6573              "des
+00012a00: 6372 223a 207b 0a20 2020 2020 2020 2023  cr": {.        #
+00012a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012a20: 2022 6f72 6465 7222 3a20 2262 7579 2030   "order": "buy 0
+00012a30: 2e30 3030 3735 3030 3020 5842 5455 5344  .00075000 XBTUSD
+00012a40: 5420 4020 6c69 6d69 7420 3133 3530 302e  T @ limit 13500.
+00012a50: 3022 0a20 2020 2020 2020 2023 2020 2020  0".        #    
+00012a60: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00012a70: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
+00012a80: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
+00012a90: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00012aa0: 2064 6174 6120 3d20 7365 6c66 2e73 6166   data = self.saf
+00012ab0: 655f 6469 6374 2872 6573 706f 6e73 652c  e_dict(response,
+00012ac0: 2027 7265 7375 6c74 272c 207b 7d29 0a20   'result', {}). 
+00012ad0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+00012ae0: 6c66 2e70 6172 7365 5f6f 7264 6572 2864  lf.parse_order(d
+00012af0: 6174 612c 206d 6172 6b65 7429 0a0a 2020  ata, market)..  
+00012b00: 2020 6465 6620 6665 7463 685f 6f72 6465    def fetch_orde
+00012b10: 7228 7365 6c66 2c20 6964 3a20 7374 722c  r(self, id: str,
+00012b20: 2073 796d 626f 6c3a 2053 7472 203d 204e   symbol: Str = N
+00012b30: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
+00012b40: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
+00012b50: 2020 2020 2066 6574 6368 6573 2069 6e66       fetches inf
+00012b60: 6f72 6d61 7469 6f6e 206f 6e20 616e 206f  ormation on an o
+00012b70: 7264 6572 206d 6164 6520 6279 2074 6865  rder made by the
+00012b80: 2075 7365 720a 2020 2020 2020 2020 3a73   user.        :s
+00012b90: 6565 3a20 6874 7470 733a 2f2f 646f 6373  ee: https://docs
+00012ba0: 2e6b 7261 6b65 6e2e 636f 6d2f 7265 7374  .kraken.com/rest
+00012bb0: 2f23 7461 672f 4163 636f 756e 742d 4461  /#tag/Account-Da
+00012bc0: 7461 2f6f 7065 7261 7469 6f6e 2f67 6574  ta/operation/get
+00012bd0: 4f72 6465 7273 496e 666f 0a20 2020 2020  OrdersInfo.     
+00012be0: 2020 203a 7061 7261 6d20 7374 7220 7379     :param str sy
+00012bf0: 6d62 6f6c 3a20 6e6f 7420 7573 6564 2062  mbol: not used b
+00012c00: 7920 6b72 616b 656e 2066 6574 6368 4f72  y kraken fetchOr
+00012c10: 6465 720a 2020 2020 2020 2020 3a70 6172  der.        :par
+00012c20: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
+00012c30: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
+00012c40: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
+00012c50: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
+00012c60: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
+00012c70: 203a 7265 7475 726e 7320 6469 6374 3a20   :returns dict: 
+00012c80: 416e 2060 6f72 6465 7220 7374 7275 6374  An `order struct
+00012c90: 7572 6520 3c68 7474 7073 3a2f 2f64 6f63  ure <https://doc
+00012ca0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+00012cb0: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
+00012cc0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00012cd0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00012ce0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00012cf0: 2020 2063 6c69 656e 744f 7264 6572 4964     clientOrderId
+00012d00: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00012d10: 7565 5f32 2870 6172 616d 732c 2027 7573  ue_2(params, 'us
+00012d20: 6572 7265 6627 2c20 2763 6c69 656e 744f  erref', 'clientO
+00012d30: 7264 6572 4964 2729 0a20 2020 2020 2020  rderId').       
+00012d40: 2072 6571 7565 7374 203d 207b 0a20 2020   request = {.   
+00012d50: 2020 2020 2020 2020 2027 7472 6164 6573           'trades
+00012d60: 273a 2054 7275 652c 2020 2320 7768 6574  ': True,  # whet
+00012d70: 6865 7220 6f72 206e 6f74 2074 6f20 696e  her or not to in
+00012d80: 636c 7564 6520 7472 6164 6573 2069 6e20  clude trades in 
+00012d90: 6f75 7470 7574 286f 7074 696f 6e61 6c2c  output(optional,
+00012da0: 2064 6566 6175 6c74 2046 616c 7365 290a   default False).
+00012db0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+00012dc0: 7869 6427 3a20 6964 2c20 2023 2064 6f20  xid': id,  # do 
+00012dd0: 6e6f 7420 636f 6d6d 6120 7365 7061 7261  not comma separa
+00012de0: 7465 2061 206c 6973 7420 6f66 2069 6473  te a list of ids
+00012df0: 202d 2075 7365 2066 6574 6368 4f72 6465   - use fetchOrde
+00012e00: 7273 4279 4964 7320 696e 7374 6561 640a  rsByIds instead.
+00012e10: 2020 2020 2020 2020 2020 2020 2320 2775              # 'u
+00012e20: 7365 7272 6566 273a 2027 6f70 7469 6f6e  serref': 'option
+00012e30: 616c 272c 2020 2320 7265 7374 7269 6374  al',  # restrict
+00012e40: 2072 6573 756c 7473 2074 6f20 6769 7665   results to give
+00012e50: 6e20 7573 6572 2072 6566 6572 656e 6365  n user reference
+00012e60: 2069 6428 6f70 7469 6f6e 616c 290a 2020   id(optional).  
+00012e70: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00012e80: 7175 6572 7920 3d20 7061 7261 6d73 0a20  query = params. 
+00012e90: 2020 2020 2020 2069 6620 636c 6965 6e74         if client
+00012ea0: 4f72 6465 7249 6420 6973 206e 6f74 204e  OrderId is not N
+00012eb0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00012ec0: 2072 6571 7565 7374 5b27 7573 6572 7265   request['userre
+00012ed0: 6627 5d20 3d20 636c 6965 6e74 4f72 6465  f'] = clientOrde
+00012ee0: 7249 640a 2020 2020 2020 2020 2020 2020  rId.            
+00012ef0: 7175 6572 7920 3d20 7365 6c66 2e6f 6d69  query = self.omi
+00012f00: 7428 7061 7261 6d73 2c20 5b27 7573 6572  t(params, ['user
+00012f10: 7265 6627 2c20 2763 6c69 656e 744f 7264  ref', 'clientOrd
+00012f20: 6572 4964 275d 290a 2020 2020 2020 2020  erId']).        
+00012f30: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00012f40: 2020 7265 7175 6573 745b 2774 7869 6427    request['txid'
+00012f50: 5d20 3d20 6964 0a20 2020 2020 2020 2072  ] = id.        r
+00012f60: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
+00012f70: 7269 7661 7465 506f 7374 5175 6572 794f  rivatePostQueryO
+00012f80: 7264 6572 7328 7365 6c66 2e65 7874 656e  rders(self.exten
+00012f90: 6428 7265 7175 6573 742c 2071 7565 7279  d(request, query
+00012fa0: 2929 0a20 2020 2020 2020 2023 0a20 2020  )).        #.   
+00012fb0: 2020 2020 2023 2020 2020 207b 0a20 2020       #     {.   
+00012fc0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00012fd0: 6572 726f 7222 3a5b 5d2c 0a20 2020 2020  error":[],.     
+00012fe0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
+00012ff0: 7375 6c74 223a 7b0a 2020 2020 2020 2020  sult":{.        
+00013000: 2320 2020 2020 2020 2020 2020 2020 224f  #             "O
+00013010: 544c 4153 332d 5252 4855 462d 4e44 5748  TLAS3-RRHUF-NDWH
+00013020: 3541 223a 7b0a 2020 2020 2020 2020 2320  5A":{.        # 
+00013030: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013040: 2272 6566 6964 223a 6e75 6c6c 2c0a 2020  "refid":null,.  
+00013050: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00013060: 2020 2020 2020 2020 2275 7365 7272 6566          "userref
+00013070: 223a 6e75 6c6c 2c0a 2020 2020 2020 2020  ":null,.        
+00013080: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00013090: 2020 2273 7461 7475 7322 3a22 636c 6f73    "status":"clos
+000130a0: 6564 222c 0a20 2020 2020 2020 2023 2020  ed",.        #  
+000130b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000130c0: 7265 6173 6f6e 223a 6e75 6c6c 2c0a 2020  reason":null,.  
+000130d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000130e0: 2020 2020 2020 2020 226f 7065 6e74 6d22          "opentm"
+000130f0: 3a31 3538 3638 3232 3931 392e 3333 3432  :1586822919.3342
+00013100: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013110: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
+00013120: 7365 746d 223a 3135 3836 3832 3239 3139  setm":1586822919
+00013130: 2e33 3635 2c0a 2020 2020 2020 2020 2320  .365,.        # 
 00013140: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013150: 2022 636c 6f73 6574 6d22 3a31 3538 3638   "closetm":15868
-00013160: 3232 3931 392e 3336 352c 0a20 2020 2020  22919.365,.     
-00013170: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013180: 2020 2020 2022 7374 6172 7474 6d22 3a30       "starttm":0
-00013190: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-000131a0: 2020 2020 2020 2020 2020 2020 2265 7870              "exp
-000131b0: 6972 6574 6d22 3a30 2c0a 2020 2020 2020  iretm":0,.      
-000131c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000131d0: 2020 2020 2264 6573 6372 223a 7b0a 2020      "descr":{.  
-000131e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-000131f0: 2020 2020 2020 2020 2020 2020 2270 6169              "pai
-00013200: 7222 3a22 5842 5455 5344 5422 2c0a 2020  r":"XBTUSDT",.  
-00013210: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00013220: 2020 2020 2020 2020 2020 2020 2274 7970              "typ
-00013230: 6522 3a22 7365 6c6c 222c 0a20 2020 2020  e":"sell",.     
-00013240: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00013250: 2020 2020 2020 2020 2022 6f72 6465 7274           "ordert
-00013260: 7970 6522 3a22 6d61 726b 6574 222c 0a20  ype":"market",. 
-00013270: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00013280: 2020 2020 2020 2020 2020 2020 2022 7072               "pr
-00013290: 6963 6522 3a22 3022 2c0a 2020 2020 2020  ice":"0",.      
-000132a0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000132b0: 2020 2020 2020 2020 2270 7269 6365 3222          "price2"
-000132c0: 3a22 3022 2c0a 2020 2020 2020 2020 2320  :"0",.        # 
+00013150: 2273 7461 7274 746d 223a 302c 0a20 2020  "starttm":0,.   
+00013160: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00013170: 2020 2020 2020 2022 6578 7069 7265 746d         "expiretm
+00013180: 223a 302c 0a20 2020 2020 2020 2023 2020  ":0,.        #  
+00013190: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000131a0: 6465 7363 7222 3a7b 0a20 2020 2020 2020  descr":{.       
+000131b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000131c0: 2020 2020 2020 2022 7061 6972 223a 2258         "pair":"X
+000131d0: 4254 5553 4454 222c 0a20 2020 2020 2020  BTUSDT",.       
+000131e0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000131f0: 2020 2020 2020 2022 7479 7065 223a 2273         "type":"s
+00013200: 656c 6c22 2c0a 2020 2020 2020 2020 2320  ell",.        # 
+00013210: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013220: 2020 2020 226f 7264 6572 7479 7065 223a      "ordertype":
+00013230: 226d 6172 6b65 7422 2c0a 2020 2020 2020  "market",.      
+00013240: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00013250: 2020 2020 2020 2020 2270 7269 6365 223a          "price":
+00013260: 2230 222c 0a20 2020 2020 2020 2023 2020  "0",.        #  
+00013270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013280: 2020 2022 7072 6963 6532 223a 2230 222c     "price2":"0",
+00013290: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+000132a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000132b0: 6c65 7665 7261 6765 223a 226e 6f6e 6522  leverage":"none"
+000132c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 000132d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000132e0: 2020 2020 226c 6576 6572 6167 6522 3a22      "leverage":"
-000132f0: 6e6f 6e65 222c 0a20 2020 2020 2020 2023  none",.        #
-00013300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013310: 2020 2020 2022 6f72 6465 7222 3a22 7365       "order":"se
-00013320: 6c6c 2030 2e32 3138 3034 3030 3020 5842  ll 0.21804000 XB
-00013330: 5455 5344 5420 4020 6d61 726b 6574 222c  TUSDT @ market",
-00013340: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00013350: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00013360: 636c 6f73 6522 3a22 220a 2020 2020 2020  close":"".      
-00013370: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00013380: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
-00013390: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000133a0: 2022 766f 6c22 3a22 302e 3231 3830 3430   "vol":"0.218040
-000133b0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-000133c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000133d0: 766f 6c5f 6578 6563 223a 2230 2e32 3138  vol_exec":"0.218
-000133e0: 3034 3030 3022 2c0a 2020 2020 2020 2020  04000",.        
-000133f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00013400: 2020 2263 6f73 7422 3a22 3134 3933 2e39    "cost":"1493.9
-00013410: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00013420: 2020 2020 2020 2020 2020 2020 2022 6665               "fe
-00013430: 6522 3a22 332e 3822 2c0a 2020 2020 2020  e":"3.8",.      
-00013440: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00013450: 2020 2020 2270 7269 6365 223a 2236 3835      "price":"685
-00013460: 312e 3522 2c0a 2020 2020 2020 2020 2320  1.5",.        # 
-00013470: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00013480: 2273 746f 7070 7269 6365 223a 2230 2e30  "stopprice":"0.0
-00013490: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
-000134a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000134b0: 2022 6c69 6d69 7470 7269 6365 223a 2230   "limitprice":"0
-000134c0: 2e30 3030 3030 222c 0a20 2020 2020 2020  .00000",.       
-000134d0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000134e0: 2020 2022 6d69 7363 223a 2222 2c0a 2020     "misc":"",.  
-000134f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00013500: 2020 2020 2020 2020 226f 666c 6167 7322          "oflags"
-00013510: 3a22 6663 6971 222c 0a20 2020 2020 2020  :"fciq",.       
-00013520: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00013530: 2020 2022 7472 6164 6573 223a 5b22 5454     "trades":["TT
-00013540: 3555 4333 2d47 4f49 5257 2d36 415a 5a36  5UC3-GOIRW-6AZZ6
-00013550: 5222 5d0a 2020 2020 2020 2020 2320 2020  R"].        #   
-00013560: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-00013570: 2020 2020 2320 2020 2020 2020 2020 7d0a      #         }.
-00013580: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-00013590: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000135a0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-000135b0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-000135c0: 6e73 652c 2027 7265 7375 6c74 272c 205b  nse, 'result', [
-000135d0: 5d29 0a20 2020 2020 2020 2069 6620 6e6f  ]).        if no
-000135e0: 7420 2869 6420 696e 2072 6573 756c 7429  t (id in result)
-000135f0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00013600: 6973 6520 4f72 6465 724e 6f74 466f 756e  ise OrderNotFoun
-00013610: 6428 7365 6c66 2e69 6420 2b20 2720 6665  d(self.id + ' fe
-00013620: 7463 684f 7264 6572 2829 2063 6f75 6c64  tchOrder() could
-00013630: 206e 6f74 2066 696e 6420 6f72 6465 7220   not find order 
-00013640: 6964 2027 202b 2069 6429 0a20 2020 2020  id ' + id).     
-00013650: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-00013660: 6172 7365 5f6f 7264 6572 2873 656c 662e  arse_order(self.
-00013670: 6578 7465 6e64 287b 2769 6427 3a20 6964  extend({'id': id
-00013680: 7d2c 2072 6573 756c 745b 6964 5d29 290a  }, result[id])).
-00013690: 0a20 2020 2064 6566 2066 6574 6368 5f6f  .    def fetch_o
-000136a0: 7264 6572 5f74 7261 6465 7328 7365 6c66  rder_trades(self
-000136b0: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
-000136c0: 6c3a 2053 7472 203d 204e 6f6e 652c 2073  l: Str = None, s
-000136d0: 696e 6365 3a20 496e 7420 3d20 4e6f 6e65  ince: Int = None
-000136e0: 2c20 6c69 6d69 743a 2049 6e74 203d 204e  , limit: Int = N
-000136f0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-00013700: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-00013710: 2020 2020 2066 6574 6368 2061 6c6c 2074       fetch all t
-00013720: 6865 2074 7261 6465 7320 6d61 6465 2066  he trades made f
-00013730: 726f 6d20 6120 7369 6e67 6c65 206f 7264  rom a single ord
-00013740: 6572 0a20 2020 2020 2020 203a 7365 653a  er.        :see:
-00013750: 2068 7474 7073 3a2f 2f64 6f63 732e 6b72   https://docs.kr
-00013760: 616b 656e 2e63 6f6d 2f72 6573 742f 2374  aken.com/rest/#t
-00013770: 6167 2f41 6363 6f75 6e74 2d44 6174 612f  ag/Account-Data/
-00013780: 6f70 6572 6174 696f 6e2f 6765 7454 7261  operation/getTra
-00013790: 6465 7349 6e66 6f0a 2020 2020 2020 2020  desInfo.        
-000137a0: 3a70 6172 616d 2073 7472 2069 643a 206f  :param str id: o
-000137b0: 7264 6572 2069 640a 2020 2020 2020 2020  rder id.        
-000137c0: 3a70 6172 616d 2073 7472 2073 796d 626f  :param str symbo
-000137d0: 6c3a 2075 6e69 6669 6564 206d 6172 6b65  l: unified marke
-000137e0: 7420 7379 6d62 6f6c 0a20 2020 2020 2020  t symbol.       
-000137f0: 203a 7061 7261 6d20 696e 7420 5b73 696e   :param int [sin
-00013800: 6365 5d3a 2074 6865 2065 6172 6c69 6573  ce]: the earlies
-00013810: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
-00013820: 6665 7463 6820 7472 6164 6573 2066 6f72  fetch trades for
-00013830: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00013840: 696e 7420 5b6c 696d 6974 5d3a 2074 6865  int [limit]: the
-00013850: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
-00013860: 6f66 2074 7261 6465 7320 746f 2072 6574  of trades to ret
-00013870: 7269 6576 650a 2020 2020 2020 2020 3a70  rieve.        :p
-00013880: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
-00013890: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
-000138a0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-000138b0: 2074 6865 2065 7863 6861 6e67 6520 4150   the exchange AP
-000138c0: 4920 656e 6470 6f69 6e74 0a20 2020 2020  I endpoint.     
-000138d0: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-000138e0: 5b5d 3a20 6120 6c69 7374 206f 6620 6074  []: a list of `t
-000138f0: 7261 6465 2073 7472 7563 7475 7265 7320  rade structures 
-00013900: 3c68 7474 7073 3a2f 2f64 6f63 732e 6363  <https://docs.cc
-00013910: 7874 2e63 6f6d 2f23 2f3f 6964 3d74 7261  xt.com/#/?id=tra
-00013920: 6465 2d73 7472 7563 7475 7265 3e60 0a20  de-structure>`. 
-00013930: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-00013940: 2020 206f 7264 6572 5472 6164 6573 203d     orderTrades =
-00013950: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00013960: 2870 6172 616d 732c 2027 7472 6164 6573  (params, 'trades
-00013970: 2729 0a20 2020 2020 2020 2074 7261 6465  ').        trade
-00013980: 4964 7320 3d20 5b5d 0a20 2020 2020 2020  Ids = [].       
-00013990: 2069 6620 6f72 6465 7254 7261 6465 7320   if orderTrades 
-000139a0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-000139b0: 2020 2020 2072 6169 7365 2041 7267 756d       raise Argum
-000139c0: 656e 7473 5265 7175 6972 6564 2873 656c  entsRequired(sel
-000139d0: 662e 6964 202b 2022 2066 6574 6368 4f72  f.id + " fetchOr
-000139e0: 6465 7254 7261 6465 7328 2920 7265 7175  derTrades() requ
-000139f0: 6972 6573 2061 2075 6e69 6669 6564 206f  ires a unified o
-00013a00: 7264 6572 2073 7472 7563 7475 7265 2069  rder structure i
-00013a10: 6e20 7468 6520 7061 7261 6d73 2061 7267  n the params arg
-00013a20: 756d 656e 7420 6f72 2061 2027 7472 6164  ument or a 'trad
-00013a30: 6573 2720 7061 7261 6d28 616e 2061 7272  es' param(an arr
-00013a40: 6179 206f 6620 7472 6164 6520 6964 2073  ay of trade id s
-00013a50: 7472 696e 6773 2922 290a 2020 2020 2020  trings)").      
-00013a60: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00013a70: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-00013a80: 6765 2830 2c20 6c65 6e28 6f72 6465 7254  ge(0, len(orderT
-00013a90: 7261 6465 7329 293a 0a20 2020 2020 2020  rades)):.       
-00013aa0: 2020 2020 2020 2020 206f 7264 6572 5472           orderTr
-00013ab0: 6164 6520 3d20 6f72 6465 7254 7261 6465  ade = orderTrade
-00013ac0: 735b 695d 0a20 2020 2020 2020 2020 2020  s[i].           
-00013ad0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-00013ae0: 6365 286f 7264 6572 5472 6164 652c 2073  ce(orderTrade, s
-00013af0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00013b00: 2020 2020 2020 2020 2074 7261 6465 4964           tradeId
-00013b10: 732e 6170 7065 6e64 286f 7264 6572 5472  s.append(orderTr
-00013b20: 6164 6529 0a20 2020 2020 2020 2020 2020  ade).           
-00013b30: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00013b40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-00013b50: 7261 6465 4964 732e 6170 7065 6e64 286f  radeIds.append(o
-00013b60: 7264 6572 5472 6164 655b 2769 6427 5d29  rderTrade['id'])
-00013b70: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-00013b80: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-00013b90: 2020 2020 2069 6620 7379 6d62 6f6c 2069       if symbol i
-00013ba0: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00013bb0: 2020 2020 2020 2020 7379 6d62 6f6c 203d          symbol =
-00013bc0: 2073 656c 662e 7379 6d62 6f6c 2873 796d   self.symbol(sym
-00013bd0: 626f 6c29 0a20 2020 2020 2020 206f 7074  bol).        opt
-00013be0: 696f 6e73 203d 2073 656c 662e 7361 6665  ions = self.safe
-00013bf0: 5f76 616c 7565 2873 656c 662e 6f70 7469  _value(self.opti
-00013c00: 6f6e 732c 2027 6665 7463 684f 7264 6572  ons, 'fetchOrder
-00013c10: 5472 6164 6573 272c 207b 7d29 0a20 2020  Trades', {}).   
-00013c20: 2020 2020 2062 6174 6368 5369 7a65 203d       batchSize =
-00013c30: 2073 656c 662e 7361 6665 5f69 6e74 6567   self.safe_integ
-00013c40: 6572 286f 7074 696f 6e73 2c20 2762 6174  er(options, 'bat
-00013c50: 6368 5369 7a65 272c 2032 3029 0a20 2020  chSize', 20).   
-00013c60: 2020 2020 206e 756d 5472 6164 6549 6473       numTradeIds
-00013c70: 203d 206c 656e 2874 7261 6465 4964 7329   = len(tradeIds)
-00013c80: 0a20 2020 2020 2020 206e 756d 4261 7463  .        numBatc
-00013c90: 6865 7320 3d20 7365 6c66 2e70 6172 7365  hes = self.parse
-00013ca0: 5f74 6f5f 696e 7428 6e75 6d54 7261 6465  _to_int(numTrade
-00013cb0: 4964 7320 2f20 6261 7463 6853 697a 6529  Ids / batchSize)
-00013cc0: 0a20 2020 2020 2020 206e 756d 4261 7463  .        numBatc
-00013cd0: 6865 7320 3d20 7365 6c66 2e73 756d 286e  hes = self.sum(n
-00013ce0: 756d 4261 7463 6865 732c 2031 290a 2020  umBatches, 1).  
-00013cf0: 2020 2020 2020 7265 7375 6c74 203d 205b        result = [
-00013d00: 5d0a 2020 2020 2020 2020 666f 7220 6a20  ].        for j 
-00013d10: 696e 2072 616e 6765 2830 2c20 6e75 6d42  in range(0, numB
-00013d20: 6174 6368 6573 293a 0a20 2020 2020 2020  atches):.       
-00013d30: 2020 2020 2072 6571 7565 7374 4964 7320       requestIds 
-00013d40: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
-00013d50: 2066 6f72 206b 2069 6e20 7261 6e67 6528   for k in range(
-00013d60: 302c 2062 6174 6368 5369 7a65 293a 0a20  0, batchSize):. 
-00013d70: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00013d80: 6e64 6578 203d 2073 656c 662e 7375 6d28  ndex = self.sum(
-00013d90: 6a20 2a20 6261 7463 6853 697a 652c 206b  j * batchSize, k
-00013da0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00013db0: 2020 6966 2069 6e64 6578 203c 206e 756d    if index < num
-00013dc0: 5472 6164 6549 6473 3a0a 2020 2020 2020  TradeIds:.      
-00013dd0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-00013de0: 7175 6573 7449 6473 2e61 7070 656e 6428  questIds.append(
-00013df0: 7472 6164 6549 6473 5b69 6e64 6578 5d29  tradeIds[index])
-00013e00: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-00013e10: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
-00013e20: 2020 2020 2020 2020 2027 7478 6964 273a           'txid':
-00013e30: 2027 2c27 2e6a 6f69 6e28 7265 7175 6573   ','.join(reques
-00013e40: 7449 6473 292c 0a20 2020 2020 2020 2020  tIds),.         
-00013e50: 2020 207d 0a20 2020 2020 2020 2020 2020     }.           
-00013e60: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-00013e70: 2e70 7269 7661 7465 506f 7374 5175 6572  .privatePostQuer
-00013e80: 7954 7261 6465 7328 7265 7175 6573 7429  yTrades(request)
-00013e90: 0a20 2020 2020 2020 2020 2020 2023 0a20  .            #. 
-00013ea0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00013eb0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
-00013ec0: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
-00013ed0: 3a20 5b5d 2c0a 2020 2020 2020 2020 2020  : [],.          
-00013ee0: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
-00013ef0: 756c 7422 3a20 7b0a 2020 2020 2020 2020  ult": {.        
-00013f00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00013f10: 2020 2754 494d 4952 472d 5755 4e4e 452d    'TIMIRG-WUNNE-
-00013f20: 5252 4a36 4754 273a 207b 0a20 2020 2020  RRJ6GT': {.     
-00013f30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00013f40: 2020 2020 2020 2020 2022 6f72 6465 7274           "ordert
-00013f50: 7869 6422 3a20 274f 5152 504e 322d 4c52  xid": 'OQRPN2-LR
-00013f60: 4846 592d 4849 4641 3744 272c 0a20 2020  HFY-HIFA7D',.   
-00013f70: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00013f80: 2020 2020 2020 2020 2020 2022 706f 7374             "post
-00013f90: 7869 6422 3a20 2754 4b48 3253 452d 4d37  xid": 'TKH2SE-M7
-00013fa0: 4946 352d 4346 4937 4c54 272c 0a20 2020  IF5-CFI7LT',.   
-00013fb0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-00013fc0: 2020 2020 2020 2020 2020 2022 7061 6972             "pair
-00013fd0: 223a 2027 5553 4443 5553 4454 272c 0a20  ": 'USDCUSDT',. 
-00013fe0: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00013ff0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
-00014000: 6d65 223a 2031 3538 3633 3430 3038 362e  me": 1586340086.
-00014010: 3435 372c 0a20 2020 2020 2020 2020 2020  457,.           
-00014020: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00014030: 2020 2022 7479 7065 223a 2027 7365 6c6c     "type": 'sell
+000132e0: 226f 7264 6572 223a 2273 656c 6c20 302e  "order":"sell 0.
+000132f0: 3231 3830 3430 3030 2058 4254 5553 4454  21804000 XBTUSDT
+00013300: 2040 206d 6172 6b65 7422 2c0a 2020 2020   @ market",.    
+00013310: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00013320: 2020 2020 2020 2020 2020 2263 6c6f 7365            "close
+00013330: 223a 2222 0a20 2020 2020 2020 2023 2020  ":"".        #  
+00013340: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00013350: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013360: 2020 2020 2020 2020 2020 2020 2276 6f6c              "vol
+00013370: 223a 2230 2e32 3138 3034 3030 3022 2c0a  ":"0.21804000",.
+00013380: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00013390: 2020 2020 2020 2020 2020 2276 6f6c 5f65            "vol_e
+000133a0: 7865 6322 3a22 302e 3231 3830 3430 3030  xec":"0.21804000
+000133b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000133c0: 2020 2020 2020 2020 2020 2020 2022 636f               "co
+000133d0: 7374 223a 2231 3439 332e 3922 2c0a 2020  st":"1493.9",.  
+000133e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000133f0: 2020 2020 2020 2020 2266 6565 223a 2233          "fee":"3
+00013400: 2e38 222c 0a20 2020 2020 2020 2023 2020  .8",.        #  
+00013410: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00013420: 7072 6963 6522 3a22 3638 3531 2e35 222c  price":"6851.5",
+00013430: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00013440: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
+00013450: 7072 6963 6522 3a22 302e 3030 3030 3022  price":"0.00000"
+00013460: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00013470: 2020 2020 2020 2020 2020 2020 226c 696d              "lim
+00013480: 6974 7072 6963 6522 3a22 302e 3030 3030  itprice":"0.0000
+00013490: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+000134a0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+000134b0: 6973 6322 3a22 222c 0a20 2020 2020 2020  isc":"",.       
+000134c0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+000134d0: 2020 2022 6f66 6c61 6773 223a 2266 6369     "oflags":"fci
+000134e0: 7122 2c0a 2020 2020 2020 2020 2320 2020  q",.        #   
+000134f0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00013500: 7261 6465 7322 3a5b 2254 5435 5543 332d  rades":["TT5UC3-
+00013510: 474f 4952 572d 3641 5a5a 3652 225d 0a20  GOIRW-6AZZ6R"]. 
+00013520: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00013530: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+00013540: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+00013550: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+00013560: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+00013570: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+00013580: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+00013590: 2772 6573 756c 7427 2c20 5b5d 290a 2020  'result', []).  
+000135a0: 2020 2020 2020 6966 206e 6f74 2028 6964        if not (id
+000135b0: 2069 6e20 7265 7375 6c74 293a 0a20 2020   in result):.   
+000135c0: 2020 2020 2020 2020 2072 6169 7365 204f           raise O
+000135d0: 7264 6572 4e6f 7446 6f75 6e64 2873 656c  rderNotFound(sel
+000135e0: 662e 6964 202b 2027 2066 6574 6368 4f72  f.id + ' fetchOr
+000135f0: 6465 7228 2920 636f 756c 6420 6e6f 7420  der() could not 
+00013600: 6669 6e64 206f 7264 6572 2069 6420 2720  find order id ' 
+00013610: 2b20 6964 290a 2020 2020 2020 2020 7265  + id).        re
+00013620: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+00013630: 6f72 6465 7228 7365 6c66 2e65 7874 656e  order(self.exten
+00013640: 6428 7b27 6964 273a 2069 647d 2c20 7265  d({'id': id}, re
+00013650: 7375 6c74 5b69 645d 2929 0a0a 2020 2020  sult[id]))..    
+00013660: 6465 6620 6665 7463 685f 6f72 6465 725f  def fetch_order_
+00013670: 7472 6164 6573 2873 656c 662c 2069 643a  trades(self, id:
+00013680: 2073 7472 2c20 7379 6d62 6f6c 3a20 5374   str, symbol: St
+00013690: 7220 3d20 4e6f 6e65 2c20 7369 6e63 653a  r = None, since:
+000136a0: 2049 6e74 203d 204e 6f6e 652c 206c 696d   Int = None, lim
+000136b0: 6974 3a20 496e 7420 3d20 4e6f 6e65 2c20  it: Int = None, 
+000136c0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+000136d0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000136e0: 6665 7463 6820 616c 6c20 7468 6520 7472  fetch all the tr
+000136f0: 6164 6573 206d 6164 6520 6672 6f6d 2061  ades made from a
+00013700: 2073 696e 676c 6520 6f72 6465 720a 2020   single order.  
+00013710: 2020 2020 2020 3a73 6565 3a20 6874 7470        :see: http
+00013720: 733a 2f2f 646f 6373 2e6b 7261 6b65 6e2e  s://docs.kraken.
+00013730: 636f 6d2f 7265 7374 2f23 7461 672f 4163  com/rest/#tag/Ac
+00013740: 636f 756e 742d 4461 7461 2f6f 7065 7261  count-Data/opera
+00013750: 7469 6f6e 2f67 6574 5472 6164 6573 496e  tion/getTradesIn
+00013760: 666f 0a20 2020 2020 2020 203a 7061 7261  fo.        :para
+00013770: 6d20 7374 7220 6964 3a20 6f72 6465 7220  m str id: order 
+00013780: 6964 0a20 2020 2020 2020 203a 7061 7261  id.        :para
+00013790: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
+000137a0: 6966 6965 6420 6d61 726b 6574 2073 796d  ified market sym
+000137b0: 626f 6c0a 2020 2020 2020 2020 3a70 6172  bol.        :par
+000137c0: 616d 2069 6e74 205b 7369 6e63 655d 3a20  am int [since]: 
+000137d0: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+000137e0: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+000137f0: 2074 7261 6465 7320 666f 720a 2020 2020   trades for.    
+00013800: 2020 2020 3a70 6172 616d 2069 6e74 205b      :param int [
+00013810: 6c69 6d69 745d 3a20 7468 6520 6d61 7869  limit]: the maxi
+00013820: 6d75 6d20 6e75 6d62 6572 206f 6620 7472  mum number of tr
+00013830: 6164 6573 2074 6f20 7265 7472 6965 7665  ades to retrieve
+00013840: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00013850: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
+00013860: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+00013870: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+00013880: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
+00013890: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+000138a0: 6574 7572 6e73 2064 6963 745b 5d3a 2061  eturns dict[]: a
+000138b0: 206c 6973 7420 6f66 2060 7472 6164 6520   list of `trade 
+000138c0: 7374 7275 6374 7572 6573 203c 6874 7470  structures <http
+000138d0: 733a 2f2f 646f 6373 2e63 6378 742e 636f  s://docs.ccxt.co
+000138e0: 6d2f 232f 3f69 643d 7472 6164 652d 7374  m/#/?id=trade-st
+000138f0: 7275 6374 7572 653e 600a 2020 2020 2020  ructure>`.      
+00013900: 2020 2222 220a 2020 2020 2020 2020 6f72    """.        or
+00013910: 6465 7254 7261 6465 7320 3d20 7365 6c66  derTrades = self
+00013920: 2e73 6166 655f 7661 6c75 6528 7061 7261  .safe_value(para
+00013930: 6d73 2c20 2774 7261 6465 7327 290a 2020  ms, 'trades').  
+00013940: 2020 2020 2020 7472 6164 6549 6473 203d        tradeIds =
+00013950: 205b 5d0a 2020 2020 2020 2020 6966 206f   [].        if o
+00013960: 7264 6572 5472 6164 6573 2069 7320 4e6f  rderTrades is No
+00013970: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00013980: 7261 6973 6520 4172 6775 6d65 6e74 7352  raise ArgumentsR
+00013990: 6571 7569 7265 6428 7365 6c66 2e69 6420  equired(self.id 
+000139a0: 2b20 2220 6665 7463 684f 7264 6572 5472  + " fetchOrderTr
+000139b0: 6164 6573 2829 2072 6571 7569 7265 7320  ades() requires 
+000139c0: 6120 756e 6966 6965 6420 6f72 6465 7220  a unified order 
+000139d0: 7374 7275 6374 7572 6520 696e 2074 6865  structure in the
+000139e0: 2070 6172 616d 7320 6172 6775 6d65 6e74   params argument
+000139f0: 206f 7220 6120 2774 7261 6465 7327 2070   or a 'trades' p
+00013a00: 6172 616d 2861 6e20 6172 7261 7920 6f66  aram(an array of
+00013a10: 2074 7261 6465 2069 6420 7374 7269 6e67   trade id string
+00013a20: 7329 2229 0a20 2020 2020 2020 2065 6c73  s)").        els
+00013a30: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
+00013a40: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+00013a50: 206c 656e 286f 7264 6572 5472 6164 6573   len(orderTrades
+00013a60: 2929 3a0a 2020 2020 2020 2020 2020 2020  )):.            
+00013a70: 2020 2020 6f72 6465 7254 7261 6465 203d      orderTrade =
+00013a80: 206f 7264 6572 5472 6164 6573 5b69 5d0a   orderTrades[i].
+00013a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013aa0: 6966 2069 7369 6e73 7461 6e63 6528 6f72  if isinstance(or
+00013ab0: 6465 7254 7261 6465 2c20 7374 7229 3a0a  derTrade, str):.
+00013ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013ad0: 2020 2020 7472 6164 6549 6473 2e61 7070      tradeIds.app
+00013ae0: 656e 6428 6f72 6465 7254 7261 6465 290a  end(orderTrade).
+00013af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013b00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00013b10: 2020 2020 2020 2020 2020 7472 6164 6549            tradeI
+00013b20: 6473 2e61 7070 656e 6428 6f72 6465 7254  ds.append(orderT
+00013b30: 7261 6465 5b27 6964 275d 290a 2020 2020  rade['id']).    
+00013b40: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00013b50: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+00013b60: 6966 2073 796d 626f 6c20 6973 206e 6f74  if symbol is not
+00013b70: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00013b80: 2020 2073 796d 626f 6c20 3d20 7365 6c66     symbol = self
+00013b90: 2e73 796d 626f 6c28 7379 6d62 6f6c 290a  .symbol(symbol).
+00013ba0: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
+00013bb0: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
+00013bc0: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
+00013bd0: 2766 6574 6368 4f72 6465 7254 7261 6465  'fetchOrderTrade
+00013be0: 7327 2c20 7b7d 290a 2020 2020 2020 2020  s', {}).        
+00013bf0: 6261 7463 6853 697a 6520 3d20 7365 6c66  batchSize = self
+00013c00: 2e73 6166 655f 696e 7465 6765 7228 6f70  .safe_integer(op
+00013c10: 7469 6f6e 732c 2027 6261 7463 6853 697a  tions, 'batchSiz
+00013c20: 6527 2c20 3230 290a 2020 2020 2020 2020  e', 20).        
+00013c30: 6e75 6d54 7261 6465 4964 7320 3d20 6c65  numTradeIds = le
+00013c40: 6e28 7472 6164 6549 6473 290a 2020 2020  n(tradeIds).    
+00013c50: 2020 2020 6e75 6d42 6174 6368 6573 203d      numBatches =
+00013c60: 2073 656c 662e 7061 7273 655f 746f 5f69   self.parse_to_i
+00013c70: 6e74 286e 756d 5472 6164 6549 6473 202f  nt(numTradeIds /
+00013c80: 2062 6174 6368 5369 7a65 290a 2020 2020   batchSize).    
+00013c90: 2020 2020 6e75 6d42 6174 6368 6573 203d      numBatches =
+00013ca0: 2073 656c 662e 7375 6d28 6e75 6d42 6174   self.sum(numBat
+00013cb0: 6368 6573 2c20 3129 0a20 2020 2020 2020  ches, 1).       
+00013cc0: 2072 6573 756c 7420 3d20 5b5d 0a20 2020   result = [].   
+00013cd0: 2020 2020 2066 6f72 206a 2069 6e20 7261       for j in ra
+00013ce0: 6e67 6528 302c 206e 756d 4261 7463 6865  nge(0, numBatche
+00013cf0: 7329 3a0a 2020 2020 2020 2020 2020 2020  s):.            
+00013d00: 7265 7175 6573 7449 6473 203d 205b 5d0a  requestIds = [].
+00013d10: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00013d20: 6b20 696e 2072 616e 6765 2830 2c20 6261  k in range(0, ba
+00013d30: 7463 6853 697a 6529 3a0a 2020 2020 2020  tchSize):.      
+00013d40: 2020 2020 2020 2020 2020 696e 6465 7820            index 
+00013d50: 3d20 7365 6c66 2e73 756d 286a 202a 2062  = self.sum(j * b
+00013d60: 6174 6368 5369 7a65 2c20 6b29 0a20 2020  atchSize, k).   
+00013d70: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00013d80: 696e 6465 7820 3c20 6e75 6d54 7261 6465  index < numTrade
+00013d90: 4964 733a 0a20 2020 2020 2020 2020 2020  Ids:.           
+00013da0: 2020 2020 2020 2020 2072 6571 7565 7374           request
+00013db0: 4964 732e 6170 7065 6e64 2874 7261 6465  Ids.append(trade
+00013dc0: 4964 735b 696e 6465 785d 290a 2020 2020  Ids[index]).    
+00013dd0: 2020 2020 2020 2020 7265 7175 6573 7420          request 
+00013de0: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+00013df0: 2020 2020 2774 7869 6427 3a20 272c 272e      'txid': ','.
+00013e00: 6a6f 696e 2872 6571 7565 7374 4964 7329  join(requestIds)
+00013e10: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
+00013e20: 2020 2020 2020 2020 2020 2020 7265 7370              resp
+00013e30: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
+00013e40: 6174 6550 6f73 7451 7565 7279 5472 6164  atePostQueryTrad
+00013e50: 6573 2872 6571 7565 7374 290a 2020 2020  es(request).    
+00013e60: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00013e70: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
+00013e80: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00013e90: 2020 2020 2265 7272 6f72 223a 205b 5d2c      "error": [],
+00013ea0: 0a20 2020 2020 2020 2020 2020 2023 2020  .            #  
+00013eb0: 2020 2020 2020 2022 7265 7375 6c74 223a         "result":
+00013ec0: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00013ed0: 2020 2020 2020 2020 2020 2020 2027 5449               'TI
+00013ee0: 4d49 5247 2d57 554e 4e45 2d52 524a 3647  MIRG-WUNNE-RRJ6G
+00013ef0: 5427 3a20 7b0a 2020 2020 2020 2020 2020  T': {.          
+00013f00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00013f10: 2020 2020 226f 7264 6572 7478 6964 223a      "ordertxid":
+00013f20: 2027 4f51 5250 4e32 2d4c 5248 4659 2d48   'OQRPN2-LRHFY-H
+00013f30: 4946 4137 4427 2c0a 2020 2020 2020 2020  IFA7D',.        
+00013f40: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00013f50: 2020 2020 2020 2270 6f73 7478 6964 223a        "postxid":
+00013f60: 2027 544b 4832 5345 2d4d 3749 4635 2d43   'TKH2SE-M7IF5-C
+00013f70: 4649 374c 5427 2c0a 2020 2020 2020 2020  FI7LT',.        
+00013f80: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00013f90: 2020 2020 2020 2270 6169 7222 3a20 2755        "pair": 'U
+00013fa0: 5344 4355 5344 5427 2c0a 2020 2020 2020  SDCUSDT',.      
+00013fb0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00013fc0: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
+00013fd0: 3135 3836 3334 3030 3836 2e34 3537 2c0a  1586340086.457,.
+00013fe0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+00013ff0: 2020 2020 2020 2020 2020 2020 2020 2274                "t
+00014000: 7970 6522 3a20 2773 656c 6c27 2c0a 2020  ype": 'sell',.  
+00014010: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+00014020: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
+00014030: 6572 7479 7065 223a 2027 6d61 726b 6574  ertype": 'market
 00014040: 272c 0a20 2020 2020 2020 2020 2020 2023  ',.            #
 00014050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014060: 2022 6f72 6465 7274 7970 6522 3a20 276d   "ordertype": 'm
-00014070: 6172 6b65 7427 2c0a 2020 2020 2020 2020  arket',.        
+00014060: 2022 7072 6963 6522 3a20 2730 2e39 3938   "price": '0.998
+00014070: 3630 3030 3027 2c0a 2020 2020 2020 2020  60000',.        
 00014080: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00014090: 2020 2020 2020 2270 7269 6365 223a 2027        "price": '
-000140a0: 302e 3939 3836 3030 3030 272c 0a20 2020  0.99860000',.   
+00014090: 2020 2020 2020 2263 6f73 7422 3a20 2732        "cost": '2
+000140a0: 322e 3136 3839 3230 3031 272c 0a20 2020  2.16892001',.   
 000140b0: 2020 2020 2020 2020 2023 2020 2020 2020           #      
-000140c0: 2020 2020 2020 2020 2020 2022 636f 7374             "cost
-000140d0: 223a 2027 3232 2e31 3638 3932 3030 3127  ": '22.16892001'
-000140e0: 2c0a 2020 2020 2020 2020 2020 2020 2320  ,.            # 
-000140f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014100: 2266 6565 223a 2027 302e 3034 3433 3337  "fee": '0.044337
-00014110: 3834 272c 0a20 2020 2020 2020 2020 2020  84',.           
-00014120: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00014130: 2020 2022 766f 6c22 3a20 2732 322e 3230     "vol": '22.20
-00014140: 3030 3030 3030 272c 0a20 2020 2020 2020  000000',.       
-00014150: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00014160: 2020 2020 2020 2022 6d61 7267 696e 223a         "margin":
-00014170: 2027 302e 3030 3030 3030 3030 272c 0a20   '0.00000000',. 
-00014180: 2020 2020 2020 2020 2020 2023 2020 2020             #    
-00014190: 2020 2020 2020 2020 2020 2020 2022 6d69               "mi
-000141a0: 7363 223a 2027 270a 2020 2020 2020 2020  sc": ''.        
-000141b0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000141c0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
-000141d0: 2320 2020 2020 2020 2020 7d0a 2020 2020  #         }.    
-000141e0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-000141f0: 2020 2020 2020 2020 2020 2020 230a 2020              #.  
-00014200: 2020 2020 2020 2020 2020 7261 7754 7261            rawTra
-00014210: 6465 7320 3d20 7365 6c66 2e73 6166 655f  des = self.safe_
-00014220: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00014230: 2772 6573 756c 7427 290a 2020 2020 2020  'result').      
-00014240: 2020 2020 2020 6964 7320 3d20 6c69 7374        ids = list
-00014250: 2872 6177 5472 6164 6573 2e6b 6579 7328  (rawTrades.keys(
-00014260: 2929 0a20 2020 2020 2020 2020 2020 2066  )).            f
-00014270: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00014280: 206c 656e 2869 6473 2929 3a0a 2020 2020   len(ids)):.    
-00014290: 2020 2020 2020 2020 2020 2020 7261 7754              rawT
-000142a0: 7261 6465 735b 6964 735b 695d 5d5b 2769  rades[ids[i]]['i
-000142b0: 6427 5d20 3d20 6964 735b 695d 0a20 2020  d'] = ids[i].   
-000142c0: 2020 2020 2020 2020 2074 7261 6465 7320           trades 
-000142d0: 3d20 7365 6c66 2e70 6172 7365 5f74 7261  = self.parse_tra
-000142e0: 6465 7328 7261 7754 7261 6465 732c 204e  des(rawTrades, N
-000142f0: 6f6e 652c 2073 696e 6365 2c20 6c69 6d69  one, since, limi
-00014300: 7429 0a20 2020 2020 2020 2020 2020 2074  t).            t
-00014310: 7261 6465 7346 696c 7465 7265 6442 7953  radesFilteredByS
-00014320: 796d 626f 6c20 3d20 7365 6c66 2e66 696c  ymbol = self.fil
-00014330: 7465 725f 6279 5f73 796d 626f 6c28 7472  ter_by_symbol(tr
-00014340: 6164 6573 2c20 7379 6d62 6f6c 290a 2020  ades, symbol).  
-00014350: 2020 2020 2020 2020 2020 7265 7375 6c74            result
-00014360: 203d 2073 656c 662e 6172 7261 795f 636f   = self.array_co
-00014370: 6e63 6174 2872 6573 756c 742c 2074 7261  ncat(result, tra
-00014380: 6465 7346 696c 7465 7265 6442 7953 796d  desFilteredBySym
-00014390: 626f 6c29 0a20 2020 2020 2020 2072 6574  bol).        ret
-000143a0: 7572 6e20 7265 7375 6c74 0a0a 2020 2020  urn result..    
-000143b0: 6465 6620 6665 7463 685f 6f72 6465 7273  def fetch_orders
-000143c0: 5f62 795f 6964 7328 7365 6c66 2c20 6964  _by_ids(self, id
-000143d0: 732c 2073 796d 626f 6c3a 2053 7472 203d  s, symbol: Str =
-000143e0: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
-000143f0: 293a 0a20 2020 2020 2020 2022 2222 0a20  ):.        """. 
-00014400: 2020 2020 2020 2066 6574 6368 206f 7264         fetch ord
-00014410: 6572 7320 6279 2074 6865 206c 6973 7420  ers by the list 
-00014420: 6f66 206f 7264 6572 2069 640a 2020 2020  of order id.    
-00014430: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-00014440: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-00014450: 6d2f 7265 7374 2f23 7461 672f 4163 636f  m/rest/#tag/Acco
-00014460: 756e 742d 4461 7461 2f6f 7065 7261 7469  unt-Data/operati
-00014470: 6f6e 2f67 6574 436c 6f73 6564 4f72 6465  on/getClosedOrde
-00014480: 7273 0a20 2020 2020 2020 203a 7061 7261  rs.        :para
-00014490: 6d20 7374 725b 5d7c 4e6f 6e65 2069 6473  m str[]|None ids
-000144a0: 3a20 6c69 7374 206f 6620 6f72 6465 7220  : list of order 
-000144b0: 6964 0a20 2020 2020 2020 203a 7061 7261  id.        :para
-000144c0: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
-000144d0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-000144e0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-000144f0: 6520 6b72 616b 656e 2061 7069 2065 6e64  e kraken api end
-00014500: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-00014510: 6574 7572 6e73 2064 6963 745b 5d3a 2061  eturns dict[]: a
-00014520: 206c 6973 7420 6f66 2060 6f72 6465 7220   list of `order 
-00014530: 7374 7275 6374 7572 6520 3c68 7474 7073  structure <https
-00014540: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00014550: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
-00014560: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00014570: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00014580: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00014590: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-000145a0: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-000145b0: 506f 7374 5175 6572 794f 7264 6572 7328  PostQueryOrders(
-000145c0: 7365 6c66 2e65 7874 656e 6428 7b0a 2020  self.extend({.  
-000145d0: 2020 2020 2020 2020 2020 2774 7261 6465            'trade
-000145e0: 7327 3a20 5472 7565 2c20 2023 2077 6865  s': True,  # whe
-000145f0: 7468 6572 206f 7220 6e6f 7420 746f 2069  ther or not to i
-00014600: 6e63 6c75 6465 2074 7261 6465 7320 696e  nclude trades in
-00014610: 206f 7574 7075 7428 6f70 7469 6f6e 616c   output(optional
-00014620: 2c20 6465 6661 756c 7420 4661 6c73 6529  , default False)
-00014630: 0a20 2020 2020 2020 2020 2020 2027 7478  .            'tx
-00014640: 6964 273a 2027 2c27 2e6a 6f69 6e28 6964  id': ','.join(id
-00014650: 7329 2c20 2023 2063 6f6d 6d61 2064 656c  s),  # comma del
-00014660: 696d 6974 6564 206c 6973 7420 6f66 2074  imited list of t
-00014670: 7261 6e73 6163 7469 6f6e 2069 6473 2074  ransaction ids t
-00014680: 6f20 7175 6572 7920 696e 666f 2061 626f  o query info abo
-00014690: 7574 2832 3020 6d61 7869 6d75 6d29 0a20  ut(20 maximum). 
-000146a0: 2020 2020 2020 207d 2c20 7061 7261 6d73         }, params
-000146b0: 2929 0a20 2020 2020 2020 2072 6573 756c  )).        resul
-000146c0: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-000146d0: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-000146e0: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-000146f0: 2020 2020 6f72 6465 7273 203d 205b 5d0a      orders = [].
-00014700: 2020 2020 2020 2020 6f72 6465 7249 6473          orderIds
-00014710: 203d 206c 6973 7428 7265 7375 6c74 2e6b   = list(result.k
-00014720: 6579 7328 2929 0a20 2020 2020 2020 2066  eys()).        f
-00014730: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
-00014740: 206c 656e 286f 7264 6572 4964 7329 293a   len(orderIds)):
-00014750: 0a20 2020 2020 2020 2020 2020 2069 6420  .            id 
-00014760: 3d20 6f72 6465 7249 6473 5b69 5d0a 2020  = orderIds[i].  
-00014770: 2020 2020 2020 2020 2020 6974 656d 203d            item =
-00014780: 2072 6573 756c 745b 6964 5d0a 2020 2020   result[id].    
-00014790: 2020 2020 2020 2020 6f72 6465 7220 3d20          order = 
-000147a0: 7365 6c66 2e70 6172 7365 5f6f 7264 6572  self.parse_order
-000147b0: 2873 656c 662e 6578 7465 6e64 287b 2769  (self.extend({'i
-000147c0: 6427 3a20 6964 7d2c 2069 7465 6d29 290a  d': id}, item)).
-000147d0: 2020 2020 2020 2020 2020 2020 6f72 6465              orde
-000147e0: 7273 2e61 7070 656e 6428 6f72 6465 7229  rs.append(order)
-000147f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00014800: 6f72 6465 7273 0a0a 2020 2020 6465 6620  orders..    def 
-00014810: 6665 7463 685f 6d79 5f74 7261 6465 7328  fetch_my_trades(
-00014820: 7365 6c66 2c20 7379 6d62 6f6c 3a20 5374  self, symbol: St
-00014830: 7220 3d20 4e6f 6e65 2c20 7369 6e63 653a  r = None, since:
-00014840: 2049 6e74 203d 204e 6f6e 652c 206c 696d   Int = None, lim
-00014850: 6974 3a20 496e 7420 3d20 4e6f 6e65 2c20  it: Int = None, 
-00014860: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
-00014870: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00014880: 6665 7463 6820 616c 6c20 7472 6164 6573  fetch all trades
-00014890: 206d 6164 6520 6279 2074 6865 2075 7365   made by the use
-000148a0: 720a 2020 2020 2020 2020 3a73 6565 3a20  r.        :see: 
-000148b0: 6874 7470 733a 2f2f 646f 6373 2e6b 7261  https://docs.kra
-000148c0: 6b65 6e2e 636f 6d2f 7265 7374 2f23 7461  ken.com/rest/#ta
-000148d0: 672f 4163 636f 756e 742d 4461 7461 2f6f  g/Account-Data/o
-000148e0: 7065 7261 7469 6f6e 2f67 6574 5472 6164  peration/getTrad
-000148f0: 6548 6973 746f 7279 0a20 2020 2020 2020  eHistory.       
-00014900: 203a 7061 7261 6d20 7374 7220 7379 6d62   :param str symb
-00014910: 6f6c 3a20 756e 6966 6965 6420 6d61 726b  ol: unified mark
-00014920: 6574 2073 796d 626f 6c0a 2020 2020 2020  et symbol.      
-00014930: 2020 3a70 6172 616d 2069 6e74 205b 7369    :param int [si
-00014940: 6e63 655d 3a20 7468 6520 6561 726c 6965  nce]: the earlie
-00014950: 7374 2074 696d 6520 696e 206d 7320 746f  st time in ms to
-00014960: 2066 6574 6368 2074 7261 6465 7320 666f   fetch trades fo
-00014970: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-00014980: 2069 6e74 205b 6c69 6d69 745d 3a20 7468   int [limit]: th
-00014990: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-000149a0: 206f 6620 7472 6164 6573 2073 7472 7563   of trades struc
-000149b0: 7475 7265 7320 746f 2072 6574 7269 6576  tures to retriev
-000149c0: 650a 2020 2020 2020 2020 3a70 6172 616d  e.        :param
-000149d0: 2064 6963 7420 5b70 6172 616d 735d 3a20   dict [params]: 
-000149e0: 6578 7472 6120 7061 7261 6d65 7465 7273  extra parameters
-000149f0: 2073 7065 6369 6669 6320 746f 2074 6865   specific to the
-00014a00: 2065 7863 6861 6e67 6520 4150 4920 656e   exchange API en
-00014a10: 6470 6f69 6e74 0a20 2020 2020 2020 203a  dpoint.        :
-00014a20: 7265 7475 726e 7320 5472 6164 655b 5d3a  returns Trade[]:
-00014a30: 2061 206c 6973 7420 6f66 2060 7472 6164   a list of `trad
-00014a40: 6520 7374 7275 6374 7572 6573 203c 6874  e structures <ht
-00014a50: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
-00014a60: 636f 6d2f 232f 3f69 643d 7472 6164 652d  com/#/?id=trade-
-00014a70: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
-00014a80: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00014a90: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
-00014aa0: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
-00014ab0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00014ac0: 2020 2020 2320 2774 7970 6527 3a20 2761      # 'type': 'a
-00014ad0: 6c6c 272c 2020 2320 616e 7920 706f 7369  ll',  # any posi
-00014ae0: 7469 6f6e 2c20 636c 6f73 6564 2070 6f73  tion, closed pos
-00014af0: 6974 696f 6e2c 2063 6c6f 7369 6e67 2070  ition, closing p
-00014b00: 6f73 6974 696f 6e2c 206e 6f20 706f 7369  osition, no posi
-00014b10: 7469 6f6e 0a20 2020 2020 2020 2020 2020  tion.           
-00014b20: 2023 2027 7472 6164 6573 273a 2046 616c   # 'trades': Fal
-00014b30: 7365 2c20 2023 2077 6865 7468 6572 206f  se,  # whether o
-00014b40: 7220 6e6f 7420 746f 2069 6e63 6c75 6465  r not to include
-00014b50: 2074 7261 6465 7320 7265 6c61 7465 6420   trades related 
-00014b60: 746f 2070 6f73 6974 696f 6e20 696e 206f  to position in o
-00014b70: 7574 7075 740a 2020 2020 2020 2020 2020  utput.          
-00014b80: 2020 2320 2773 7461 7274 273a 2031 3233    # 'start': 123
-00014b90: 3435 3637 3839 302c 2020 2320 7374 6172  4567890,  # star
-00014ba0: 7469 6e67 2075 6e69 7820 7469 6d65 7374  ting unix timest
-00014bb0: 616d 7020 6f72 2074 7261 6465 2074 7820  amp or trade tx 
-00014bc0: 6964 206f 6620 7265 7375 6c74 7328 6578  id of results(ex
-00014bd0: 636c 7573 6976 6529 0a20 2020 2020 2020  clusive).       
-00014be0: 2020 2020 2023 2027 656e 6427 3a20 3132       # 'end': 12
-00014bf0: 3334 3536 3738 3930 2c20 2023 2065 6e64  34567890,  # end
-00014c00: 696e 6720 756e 6978 2074 696d 6573 7461  ing unix timesta
-00014c10: 6d70 206f 7220 7472 6164 6520 7478 2069  mp or trade tx i
-00014c20: 6420 6f66 2072 6573 756c 7473 2869 6e63  d of results(inc
-00014c30: 6c75 7369 7665 290a 2020 2020 2020 2020  lusive).        
-00014c40: 2020 2020 2320 276f 6673 2720 3d20 7265      # 'ofs' = re
-00014c50: 7375 6c74 206f 6666 7365 740a 2020 2020  sult offset.    
-00014c60: 2020 2020 7d0a 2020 2020 2020 2020 6966      }.        if
-00014c70: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-00014c80: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00014c90: 7265 7175 6573 745b 2773 7461 7274 275d  request['start']
-00014ca0: 203d 2073 656c 662e 7061 7273 655f 746f   = self.parse_to
-00014cb0: 5f69 6e74 2873 696e 6365 202f 2031 3030  _int(since / 100
-00014cc0: 3029 0a20 2020 2020 2020 2072 6573 706f  0).        respo
-00014cd0: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
-00014ce0: 7465 506f 7374 5472 6164 6573 4869 7374  tePostTradesHist
-00014cf0: 6f72 7928 7365 6c66 2e65 7874 656e 6428  ory(self.extend(
-00014d00: 7265 7175 6573 742c 2070 6172 616d 7329  request, params)
-00014d10: 290a 2020 2020 2020 2020 230a 2020 2020  ).        #.    
-00014d20: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-00014d30: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-00014d40: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
-00014d50: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-00014d60: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-00014d70: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-00014d80: 7472 6164 6573 223a 207b 0a20 2020 2020  trades": {.     
-00014d90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00014da0: 2020 2020 2022 474a 334e 5951 2d58 4a52       "GJ3NYQ-XJR
-00014db0: 5446 2d54 485a 4142 4622 3a20 7b0a 2020  TF-THZABF": {.  
-00014dc0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00014dd0: 2020 2020 2020 2020 2020 2020 226f 7264              "ord
-00014de0: 6572 7478 6964 223a 2022 544b 4832 5345  ertxid": "TKH2SE
-00014df0: 2d5a 4946 3545 2d43 4649 374c 5422 2c0a  -ZIF5E-CFI7LT",.
-00014e00: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00014e10: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-00014e20: 6f73 7478 6964 223a 2022 4f45 4e33 5658  ostxid": "OEN3VX
-00014e30: 2d4d 3749 4635 2d4a 4e42 4a41 4d22 2c0a  -M7IF5-JNBJAM",.
-00014e40: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00014e50: 2020 2020 2020 2020 2020 2020 2020 2270                "p
-00014e60: 6169 7222 3a20 2258 4943 4e58 4554 4822  air": "XICNXETH"
-00014e70: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000140c0: 2020 2020 2020 2020 2020 2022 6665 6522             "fee"
+000140d0: 3a20 2730 2e30 3434 3333 3738 3427 2c0a  : '0.04433784',.
+000140e0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+000140f0: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+00014100: 6f6c 223a 2027 3232 2e32 3030 3030 3030  ol": '22.2000000
+00014110: 3027 2c0a 2020 2020 2020 2020 2020 2020  0',.            
+00014120: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00014130: 2020 226d 6172 6769 6e22 3a20 2730 2e30    "margin": '0.0
+00014140: 3030 3030 3030 3027 2c0a 2020 2020 2020  0000000',.      
+00014150: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00014160: 2020 2020 2020 2020 226d 6973 6322 3a20          "misc": 
+00014170: 2727 0a20 2020 2020 2020 2020 2020 2023  ''.            #
+00014180: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+00014190: 2020 2020 2020 2020 2020 2023 2020 2020             #    
+000141a0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+000141b0: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+000141c0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+000141d0: 2020 2020 2072 6177 5472 6164 6573 203d       rawTrades =
+000141e0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+000141f0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00014200: 6c74 2729 0a20 2020 2020 2020 2020 2020  lt').           
+00014210: 2069 6473 203d 206c 6973 7428 7261 7754   ids = list(rawT
+00014220: 7261 6465 732e 6b65 7973 2829 290a 2020  rades.keys()).  
+00014230: 2020 2020 2020 2020 2020 666f 7220 6920            for i 
+00014240: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
+00014250: 6964 7329 293a 0a20 2020 2020 2020 2020  ids)):.         
+00014260: 2020 2020 2020 2072 6177 5472 6164 6573         rawTrades
+00014270: 5b69 6473 5b69 5d5d 5b27 6964 275d 203d  [ids[i]]['id'] =
+00014280: 2069 6473 5b69 5d0a 2020 2020 2020 2020   ids[i].        
+00014290: 2020 2020 7472 6164 6573 203d 2073 656c      trades = sel
+000142a0: 662e 7061 7273 655f 7472 6164 6573 2872  f.parse_trades(r
+000142b0: 6177 5472 6164 6573 2c20 4e6f 6e65 2c20  awTrades, None, 
+000142c0: 7369 6e63 652c 206c 696d 6974 290a 2020  since, limit).  
+000142d0: 2020 2020 2020 2020 2020 7472 6164 6573            trades
+000142e0: 4669 6c74 6572 6564 4279 5379 6d62 6f6c  FilteredBySymbol
+000142f0: 203d 2073 656c 662e 6669 6c74 6572 5f62   = self.filter_b
+00014300: 795f 7379 6d62 6f6c 2874 7261 6465 732c  y_symbol(trades,
+00014310: 2073 796d 626f 6c29 0a20 2020 2020 2020   symbol).       
+00014320: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00014330: 6c66 2e61 7272 6179 5f63 6f6e 6361 7428  lf.array_concat(
+00014340: 7265 7375 6c74 2c20 7472 6164 6573 4669  result, tradesFi
+00014350: 6c74 6572 6564 4279 5379 6d62 6f6c 290a  lteredBySymbol).
+00014360: 2020 2020 2020 2020 7265 7475 726e 2072          return r
+00014370: 6573 756c 740a 0a20 2020 2064 6566 2066  esult..    def f
+00014380: 6574 6368 5f6f 7264 6572 735f 6279 5f69  etch_orders_by_i
+00014390: 6473 2873 656c 662c 2069 6473 2c20 7379  ds(self, ids, sy
+000143a0: 6d62 6f6c 3a20 5374 7220 3d20 4e6f 6e65  mbol: Str = None
+000143b0: 2c20 7061 7261 6d73 3d7b 7d29 3a0a 2020  , params={}):.  
+000143c0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+000143d0: 2020 6665 7463 6820 6f72 6465 7273 2062    fetch orders b
+000143e0: 7920 7468 6520 6c69 7374 206f 6620 6f72  y the list of or
+000143f0: 6465 7220 6964 0a20 2020 2020 2020 203a  der id.        :
+00014400: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+00014410: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+00014420: 742f 2374 6167 2f41 6363 6f75 6e74 2d44  t/#tag/Account-D
+00014430: 6174 612f 6f70 6572 6174 696f 6e2f 6765  ata/operation/ge
+00014440: 7443 6c6f 7365 644f 7264 6572 730a 2020  tClosedOrders.  
+00014450: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+00014460: 5b5d 7c4e 6f6e 6520 6964 733a 206c 6973  []|None ids: lis
+00014470: 7420 6f66 206f 7264 6572 2069 640a 2020  t of order id.  
+00014480: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+00014490: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
+000144a0: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+000144b0: 6369 6669 6320 746f 2074 6865 206b 7261  cific to the kra
+000144c0: 6b65 6e20 6170 6920 656e 6470 6f69 6e74  ken api endpoint
+000144d0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+000144e0: 7320 6469 6374 5b5d 3a20 6120 6c69 7374  s dict[]: a list
+000144f0: 206f 6620 606f 7264 6572 2073 7472 7563   of `order struc
+00014500: 7475 7265 203c 6874 7470 733a 2f2f 646f  ture <https://do
+00014510: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+00014520: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+00014530: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00014540: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00014550: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00014560: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+00014570: 656c 662e 7072 6976 6174 6550 6f73 7451  elf.privatePostQ
+00014580: 7565 7279 4f72 6465 7273 2873 656c 662e  ueryOrders(self.
+00014590: 6578 7465 6e64 287b 0a20 2020 2020 2020  extend({.       
+000145a0: 2020 2020 2027 7472 6164 6573 273a 2054       'trades': T
+000145b0: 7275 652c 2020 2320 7768 6574 6865 7220  rue,  # whether 
+000145c0: 6f72 206e 6f74 2074 6f20 696e 636c 7564  or not to includ
+000145d0: 6520 7472 6164 6573 2069 6e20 6f75 7470  e trades in outp
+000145e0: 7574 286f 7074 696f 6e61 6c2c 2064 6566  ut(optional, def
+000145f0: 6175 6c74 2046 616c 7365 290a 2020 2020  ault False).    
+00014600: 2020 2020 2020 2020 2774 7869 6427 3a20          'txid': 
+00014610: 272c 272e 6a6f 696e 2869 6473 292c 2020  ','.join(ids),  
+00014620: 2320 636f 6d6d 6120 6465 6c69 6d69 7465  # comma delimite
+00014630: 6420 6c69 7374 206f 6620 7472 616e 7361  d list of transa
+00014640: 6374 696f 6e20 6964 7320 746f 2071 7565  ction ids to que
+00014650: 7279 2069 6e66 6f20 6162 6f75 7428 3230  ry info about(20
+00014660: 206d 6178 696d 756d 290a 2020 2020 2020   maximum).      
+00014670: 2020 7d2c 2070 6172 616d 7329 290a 2020    }, params)).  
+00014680: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00014690: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+000146a0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+000146b0: 272c 207b 7d29 0a20 2020 2020 2020 206f  ', {}).        o
+000146c0: 7264 6572 7320 3d20 5b5d 0a20 2020 2020  rders = [].     
+000146d0: 2020 206f 7264 6572 4964 7320 3d20 6c69     orderIds = li
+000146e0: 7374 2872 6573 756c 742e 6b65 7973 2829  st(result.keys()
+000146f0: 290a 2020 2020 2020 2020 666f 7220 6920  ).        for i 
+00014700: 696e 2072 616e 6765 2830 2c20 6c65 6e28  in range(0, len(
+00014710: 6f72 6465 7249 6473 2929 3a0a 2020 2020  orderIds)):.    
+00014720: 2020 2020 2020 2020 6964 203d 206f 7264          id = ord
+00014730: 6572 4964 735b 695d 0a20 2020 2020 2020  erIds[i].       
+00014740: 2020 2020 2069 7465 6d20 3d20 7265 7375       item = resu
+00014750: 6c74 5b69 645d 0a20 2020 2020 2020 2020  lt[id].         
+00014760: 2020 206f 7264 6572 203d 2073 656c 662e     order = self.
+00014770: 7061 7273 655f 6f72 6465 7228 7365 6c66  parse_order(self
+00014780: 2e65 7874 656e 6428 7b27 6964 273a 2069  .extend({'id': i
+00014790: 647d 2c20 6974 656d 2929 0a20 2020 2020  d}, item)).     
+000147a0: 2020 2020 2020 206f 7264 6572 732e 6170         orders.ap
+000147b0: 7065 6e64 286f 7264 6572 290a 2020 2020  pend(order).    
+000147c0: 2020 2020 7265 7475 726e 206f 7264 6572      return order
+000147d0: 730a 0a20 2020 2064 6566 2066 6574 6368  s..    def fetch
+000147e0: 5f6d 795f 7472 6164 6573 2873 656c 662c  _my_trades(self,
+000147f0: 2073 796d 626f 6c3a 2053 7472 203d 204e   symbol: Str = N
+00014800: 6f6e 652c 2073 696e 6365 3a20 496e 7420  one, since: Int 
+00014810: 3d20 4e6f 6e65 2c20 6c69 6d69 743a 2049  = None, limit: I
+00014820: 6e74 203d 204e 6f6e 652c 2070 6172 616d  nt = None, param
+00014830: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
+00014840: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00014850: 2061 6c6c 2074 7261 6465 7320 6d61 6465   all trades made
+00014860: 2062 7920 7468 6520 7573 6572 0a20 2020   by the user.   
+00014870: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
+00014880: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
+00014890: 6f6d 2f72 6573 742f 2374 6167 2f41 6363  om/rest/#tag/Acc
+000148a0: 6f75 6e74 2d44 6174 612f 6f70 6572 6174  ount-Data/operat
+000148b0: 696f 6e2f 6765 7454 7261 6465 4869 7374  ion/getTradeHist
+000148c0: 6f72 790a 2020 2020 2020 2020 3a70 6172  ory.        :par
+000148d0: 616d 2073 7472 2073 796d 626f 6c3a 2075  am str symbol: u
+000148e0: 6e69 6669 6564 206d 6172 6b65 7420 7379  nified market sy
+000148f0: 6d62 6f6c 0a20 2020 2020 2020 203a 7061  mbol.        :pa
+00014900: 7261 6d20 696e 7420 5b73 696e 6365 5d3a  ram int [since]:
+00014910: 2074 6865 2065 6172 6c69 6573 7420 7469   the earliest ti
+00014920: 6d65 2069 6e20 6d73 2074 6f20 6665 7463  me in ms to fetc
+00014930: 6820 7472 6164 6573 2066 6f72 0a20 2020  h trades for.   
+00014940: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
+00014950: 5b6c 696d 6974 5d3a 2074 6865 206d 6178  [limit]: the max
+00014960: 696d 756d 206e 756d 6265 7220 6f66 2074  imum number of t
+00014970: 7261 6465 7320 7374 7275 6374 7572 6573  rades structures
+00014980: 2074 6f20 7265 7472 6965 7665 0a20 2020   to retrieve.   
+00014990: 2020 2020 203a 7061 7261 6d20 6469 6374       :param dict
+000149a0: 205b 7061 7261 6d73 5d3a 2065 7874 7261   [params]: extra
+000149b0: 2070 6172 616d 6574 6572 7320 7370 6563   parameters spec
+000149c0: 6966 6963 2074 6f20 7468 6520 6578 6368  ific to the exch
+000149d0: 616e 6765 2041 5049 2065 6e64 706f 696e  ange API endpoin
+000149e0: 740a 2020 2020 2020 2020 3a72 6574 7572  t.        :retur
+000149f0: 6e73 2054 7261 6465 5b5d 3a20 6120 6c69  ns Trade[]: a li
+00014a00: 7374 206f 6620 6074 7261 6465 2073 7472  st of `trade str
+00014a10: 7563 7475 7265 7320 3c68 7474 7073 3a2f  uctures <https:/
+00014a20: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
+00014a30: 2f3f 6964 3d74 7261 6465 2d73 7472 7563  /?id=trade-struc
+00014a40: 7475 7265 3e60 0a20 2020 2020 2020 2022  ture>`.        "
+00014a50: 2222 0a20 2020 2020 2020 2073 656c 662e  "".        self.
+00014a60: 6c6f 6164 5f6d 6172 6b65 7473 2829 0a20  load_markets(). 
+00014a70: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00014a80: 207b 0a20 2020 2020 2020 2020 2020 2023   {.            #
+00014a90: 2027 7479 7065 273a 2027 616c 6c27 2c20   'type': 'all', 
+00014aa0: 2023 2061 6e79 2070 6f73 6974 696f 6e2c   # any position,
+00014ab0: 2063 6c6f 7365 6420 706f 7369 7469 6f6e   closed position
+00014ac0: 2c20 636c 6f73 696e 6720 706f 7369 7469  , closing positi
+00014ad0: 6f6e 2c20 6e6f 2070 6f73 6974 696f 6e0a  on, no position.
+00014ae0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+00014af0: 7261 6465 7327 3a20 4661 6c73 652c 2020  rades': False,  
+00014b00: 2320 7768 6574 6865 7220 6f72 206e 6f74  # whether or not
+00014b10: 2074 6f20 696e 636c 7564 6520 7472 6164   to include trad
+00014b20: 6573 2072 656c 6174 6564 2074 6f20 706f  es related to po
+00014b30: 7369 7469 6f6e 2069 6e20 6f75 7470 7574  sition in output
+00014b40: 0a20 2020 2020 2020 2020 2020 2023 2027  .            # '
+00014b50: 7374 6172 7427 3a20 3132 3334 3536 3738  start': 12345678
+00014b60: 3930 2c20 2023 2073 7461 7274 696e 6720  90,  # starting 
+00014b70: 756e 6978 2074 696d 6573 7461 6d70 206f  unix timestamp o
+00014b80: 7220 7472 6164 6520 7478 2069 6420 6f66  r trade tx id of
+00014b90: 2072 6573 756c 7473 2865 7863 6c75 7369   results(exclusi
+00014ba0: 7665 290a 2020 2020 2020 2020 2020 2020  ve).            
+00014bb0: 2320 2765 6e64 273a 2031 3233 3435 3637  # 'end': 1234567
+00014bc0: 3839 302c 2020 2320 656e 6469 6e67 2075  890,  # ending u
+00014bd0: 6e69 7820 7469 6d65 7374 616d 7020 6f72  nix timestamp or
+00014be0: 2074 7261 6465 2074 7820 6964 206f 6620   trade tx id of 
+00014bf0: 7265 7375 6c74 7328 696e 636c 7573 6976  results(inclusiv
+00014c00: 6529 0a20 2020 2020 2020 2020 2020 2023  e).            #
+00014c10: 2027 6f66 7327 203d 2072 6573 756c 7420   'ofs' = result 
+00014c20: 6f66 6673 6574 0a20 2020 2020 2020 207d  offset.        }
+00014c30: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+00014c40: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+00014c50: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00014c60: 7374 5b27 7374 6172 7427 5d20 3d20 7365  st['start'] = se
+00014c70: 6c66 2e70 6172 7365 5f74 6f5f 696e 7428  lf.parse_to_int(
+00014c80: 7369 6e63 6520 2f20 3130 3030 290a 2020  since / 1000).  
+00014c90: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+00014ca0: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+00014cb0: 7454 7261 6465 7348 6973 746f 7279 2873  tTradesHistory(s
+00014cc0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+00014cd0: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
+00014ce0: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+00014cf0: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+00014d00: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
+00014d10: 3a20 5b5d 2c0a 2020 2020 2020 2020 2320  : [],.        # 
+00014d20: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+00014d30: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+00014d40: 2020 2020 2020 2020 2020 2274 7261 6465            "trade
+00014d50: 7322 3a20 7b0a 2020 2020 2020 2020 2320  s": {.        # 
+00014d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014d70: 2247 4a33 4e59 512d 584a 5254 462d 5448  "GJ3NYQ-XJRTF-TH
+00014d80: 5a41 4246 223a 207b 0a20 2020 2020 2020  ZABF": {.       
+00014d90: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00014da0: 2020 2020 2020 2022 6f72 6465 7274 7869         "ordertxi
+00014db0: 6422 3a20 2254 4b48 3253 452d 5a49 4635  d": "TKH2SE-ZIF5
+00014dc0: 452d 4346 4937 4c54 222c 0a20 2020 2020  E-CFI7LT",.     
+00014dd0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00014de0: 2020 2020 2020 2020 2022 706f 7374 7869           "postxi
+00014df0: 6422 3a20 224f 454e 3356 582d 4d37 4946  d": "OEN3VX-M7IF
+00014e00: 352d 4a4e 424a 414d 222c 0a20 2020 2020  5-JNBJAM",.     
+00014e10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00014e20: 2020 2020 2020 2020 2022 7061 6972 223a           "pair":
+00014e30: 2022 5849 434e 5845 5448 222c 0a20 2020   "XICNXETH",.   
+00014e40: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00014e50: 2020 2020 2020 2020 2020 2022 7469 6d65             "time
+00014e60: 223a 2031 3532 3732 3133 3232 392e 3434  ": 1527213229.44
+00014e70: 3931 2c0a 2020 2020 2020 2020 2320 2020  91,.        #   
 00014e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014e90: 2274 696d 6522 3a20 3135 3237 3231 3332  "time": 15272132
-00014ea0: 3239 2e34 3439 312c 0a20 2020 2020 2020  29.4491,.       
-00014eb0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00014ec0: 2020 2020 2020 2022 7479 7065 223a 2022         "type": "
-00014ed0: 7365 6c6c 222c 0a20 2020 2020 2020 2023  sell",.        #
+00014e90: 2020 2274 7970 6522 3a20 2273 656c 6c22    "type": "sell"
+00014ea0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00014eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00014ec0: 226f 7264 6572 7479 7065 223a 2022 6c69  "ordertype": "li
+00014ed0: 6d69 7422 2c0a 2020 2020 2020 2020 2320  mit",.        # 
 00014ee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ef0: 2020 2020 2022 6f72 6465 7274 7970 6522       "ordertype"
-00014f00: 3a20 226c 696d 6974 222c 0a20 2020 2020  : "limit",.     
-00014f10: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00014f20: 2020 2020 2020 2020 2022 7072 6963 6522           "price"
-00014f30: 3a20 2230 2e30 3031 3631 3222 2c0a 2020  : "0.001612",.  
-00014f40: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00014f50: 2020 2020 2020 2020 2020 2020 2263 6f73              "cos
-00014f60: 7422 3a20 2230 2e30 3235 3739 3222 2c0a  t": "0.025792",.
-00014f70: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-00014f80: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-00014f90: 6565 223a 2022 302e 3030 3030 3236 222c  ee": "0.000026",
-00014fa0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00014fb0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00014fc0: 766f 6c22 3a20 2231 362e 3030 3030 3030  vol": "16.000000
-00014fd0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+00014ef0: 2020 2020 2270 7269 6365 223a 2022 302e      "price": "0.
+00014f00: 3030 3136 3132 222c 0a20 2020 2020 2020  001612",.       
+00014f10: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00014f20: 2020 2020 2020 2022 636f 7374 223a 2022         "cost": "
+00014f30: 302e 3032 3537 3932 222c 0a20 2020 2020  0.025792",.     
+00014f40: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00014f50: 2020 2020 2020 2020 2022 6665 6522 3a20           "fee": 
+00014f60: 2230 2e30 3030 3032 3622 2c0a 2020 2020  "0.000026",.    
+00014f70: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00014f80: 2020 2020 2020 2020 2020 2276 6f6c 223a            "vol":
+00014f90: 2022 3136 2e30 3030 3030 3030 3022 2c0a   "16.00000000",.
+00014fa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00014fb0: 2020 2020 2020 2020 2020 2020 2020 226d                "m
+00014fc0: 6172 6769 6e22 3a20 2230 2e30 3030 3030  argin": "0.00000
+00014fd0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
 00014fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014ff0: 2020 2022 6d61 7267 696e 223a 2022 302e     "margin": "0.
-00015000: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-00015010: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-00015020: 2020 2020 2020 2022 6d69 7363 223a 2022         "misc": "
-00015030: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00015040: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
-00015050: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00015060: 2020 2020 2020 2020 202e 2e2e 0a20 2020           ....   
-00015070: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00015080: 2020 207d 2c0a 2020 2020 2020 2020 2320     },.        # 
-00015090: 2020 2020 2020 2020 2020 2020 2263 6f75              "cou
-000150a0: 6e74 223a 2039 3736 302c 0a20 2020 2020  nt": 9760,.     
-000150b0: 2020 2023 2020 2020 2020 2020 207d 2c0a     #         },.
-000150c0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-000150d0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-000150e0: 2020 7472 6164 6573 203d 2072 6573 706f    trades = respo
-000150f0: 6e73 655b 2772 6573 756c 7427 5d5b 2774  nse['result']['t
-00015100: 7261 6465 7327 5d0a 2020 2020 2020 2020  rades'].        
-00015110: 6964 7320 3d20 6c69 7374 2874 7261 6465  ids = list(trade
-00015120: 732e 6b65 7973 2829 290a 2020 2020 2020  s.keys()).      
-00015130: 2020 666f 7220 6920 696e 2072 616e 6765    for i in range
-00015140: 2830 2c20 6c65 6e28 6964 7329 293a 0a20  (0, len(ids)):. 
-00015150: 2020 2020 2020 2020 2020 2074 7261 6465             trade
-00015160: 735b 6964 735b 695d 5d5b 2769 6427 5d20  s[ids[i]]['id'] 
-00015170: 3d20 6964 735b 695d 0a20 2020 2020 2020  = ids[i].       
-00015180: 206d 6172 6b65 7420 3d20 4e6f 6e65 0a20   market = None. 
-00015190: 2020 2020 2020 2069 6620 7379 6d62 6f6c         if symbol
-000151a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-000151b0: 2020 2020 2020 2020 2020 6d61 726b 6574            market
-000151c0: 203d 2073 656c 662e 6d61 726b 6574 2873   = self.market(s
-000151d0: 796d 626f 6c29 0a20 2020 2020 2020 2072  ymbol).        r
-000151e0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
-000151f0: 5f74 7261 6465 7328 7472 6164 6573 2c20  _trades(trades, 
-00015200: 6d61 726b 6574 2c20 7369 6e63 652c 206c  market, since, l
-00015210: 696d 6974 290a 0a20 2020 2064 6566 2063  imit)..    def c
-00015220: 616e 6365 6c5f 6f72 6465 7228 7365 6c66  ancel_order(self
-00015230: 2c20 6964 3a20 7374 722c 2073 796d 626f  , id: str, symbo
-00015240: 6c3a 2053 7472 203d 204e 6f6e 652c 2070  l: Str = None, p
-00015250: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-00015260: 2020 2022 2222 0a20 2020 2020 2020 2063     """.        c
-00015270: 616e 6365 6c73 2061 6e20 6f70 656e 206f  ancels an open o
-00015280: 7264 6572 0a20 2020 2020 2020 203a 7365  rder.        :se
-00015290: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
-000152a0: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
-000152b0: 2374 6167 2f54 7261 6469 6e67 2f6f 7065  #tag/Trading/ope
-000152c0: 7261 7469 6f6e 2f63 616e 6365 6c4f 7264  ration/cancelOrd
-000152d0: 6572 0a20 2020 2020 2020 203a 7061 7261  er.        :para
-000152e0: 6d20 7374 7220 6964 3a20 6f72 6465 7220  m str id: order 
-000152f0: 6964 0a20 2020 2020 2020 203a 7061 7261  id.        :para
-00015300: 6d20 7374 7220 7379 6d62 6f6c 3a20 756e  m str symbol: un
-00015310: 6966 6965 6420 7379 6d62 6f6c 206f 6620  ified symbol of 
-00015320: 7468 6520 6d61 726b 6574 2074 6865 206f  the market the o
-00015330: 7264 6572 2077 6173 206d 6164 6520 696e  rder was made in
-00015340: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00015350: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
-00015360: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-00015370: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-00015380: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
-00015390: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-000153a0: 6574 7572 6e73 2064 6963 743a 2041 6e20  eturns dict: An 
-000153b0: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
-000153c0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-000153d0: 6378 742e 636f 6d2f 232f 3f69 643d 6f72  cxt.com/#/?id=or
-000153e0: 6465 722d 7374 7275 6374 7572 653e 600a  der-structure>`.
-000153f0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-00015400: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
-00015410: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
-00015420: 7265 7370 6f6e 7365 203d 204e 6f6e 650a  response = None.
-00015430: 2020 2020 2020 2020 636c 6965 6e74 4f72          clientOr
-00015440: 6465 7249 6420 3d20 7365 6c66 2e73 6166  derId = self.saf
-00015450: 655f 7661 6c75 655f 3228 7061 7261 6d73  e_value_2(params
-00015460: 2c20 2775 7365 7272 6566 272c 2027 636c  , 'userref', 'cl
-00015470: 6965 6e74 4f72 6465 7249 6427 2c20 6964  ientOrderId', id
-00015480: 290a 2020 2020 2020 2020 7265 7175 6573  ).        reques
-00015490: 7420 3d20 7b0a 2020 2020 2020 2020 2020  t = {.          
-000154a0: 2020 2774 7869 6427 3a20 636c 6965 6e74    'txid': client
-000154b0: 4f72 6465 7249 642c 2020 2320 6f72 6465  OrderId,  # orde
-000154c0: 7220 6964 206f 7220 7573 6572 7265 660a  r id or userref.
-000154d0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-000154e0: 2020 7061 7261 6d73 203d 2073 656c 662e    params = self.
-000154f0: 6f6d 6974 2870 6172 616d 732c 205b 2775  omit(params, ['u
-00015500: 7365 7272 6566 272c 2027 636c 6965 6e74  serref', 'client
-00015510: 4f72 6465 7249 6427 5d29 0a20 2020 2020  OrderId']).     
-00015520: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00015530: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
-00015540: 656c 662e 7072 6976 6174 6550 6f73 7443  elf.privatePostC
-00015550: 616e 6365 6c4f 7264 6572 2873 656c 662e  ancelOrder(self.
-00015560: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-00015570: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-00015580: 2065 7863 6570 7420 4578 6365 7074 696f   except Exceptio
-00015590: 6e20 6173 2065 3a0a 2020 2020 2020 2020  n as e:.        
-000155a0: 2020 2020 6966 2073 656c 662e 6c61 7374      if self.last
-000155b0: 5f68 7474 705f 7265 7370 6f6e 7365 3a0a  _http_response:.
-000155c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000155d0: 6966 2073 656c 662e 6c61 7374 5f68 7474  if self.last_htt
-000155e0: 705f 7265 7370 6f6e 7365 2e66 696e 6428  p_response.find(
-000155f0: 2745 4f72 6465 723a 556e 6b6e 6f77 6e20  'EOrder:Unknown 
-00015600: 6f72 6465 7227 2920 3e3d 2030 3a0a 2020  order') >= 0:.  
-00015610: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015620: 2020 7261 6973 6520 4f72 6465 724e 6f74    raise OrderNot
-00015630: 466f 756e 6428 7365 6c66 2e69 6420 2b20  Found(self.id + 
-00015640: 2720 6361 6e63 656c 4f72 6465 7228 2920  ' cancelOrder() 
-00015650: 6572 726f 7220 2720 2b20 7365 6c66 2e6c  error ' + self.l
-00015660: 6173 745f 6874 7470 5f72 6573 706f 6e73  ast_http_respons
-00015670: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
-00015680: 6169 7365 2065 0a20 2020 2020 2020 2072  aise e.        r
-00015690: 6574 7572 6e20 7265 7370 6f6e 7365 0a0a  eturn response..
-000156a0: 2020 2020 6465 6620 6361 6e63 656c 5f6f      def cancel_o
-000156b0: 7264 6572 7328 7365 6c66 2c20 6964 732c  rders(self, ids,
-000156c0: 2073 796d 626f 6c3a 2053 7472 203d 204e   symbol: Str = N
-000156d0: 6f6e 652c 2070 6172 616d 733d 7b7d 293a  one, params={}):
-000156e0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000156f0: 2020 2020 2063 616e 6365 6c20 6d75 6c74       cancel mult
-00015700: 6970 6c65 206f 7264 6572 730a 2020 2020  iple orders.    
-00015710: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-00015720: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-00015730: 6d2f 7265 7374 2f23 7461 672f 5472 6164  m/rest/#tag/Trad
-00015740: 696e 672f 6f70 6572 6174 696f 6e2f 6361  ing/operation/ca
-00015750: 6e63 656c 4f72 6465 7242 6174 6368 0a20  ncelOrderBatch. 
-00015760: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00015770: 725b 5d20 6964 733a 206f 7065 6e20 6f72  r[] ids: open or
-00015780: 6465 7273 2074 7261 6e73 6163 7469 6f6e  ders transaction
-00015790: 2049 4428 7478 6964 2920 6f72 2075 7365   ID(txid) or use
-000157a0: 7220 7265 6665 7265 6e63 6528 7573 6572  r reference(user
-000157b0: 7265 6629 0a20 2020 2020 2020 203a 7061  ref).        :pa
-000157c0: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
-000157d0: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
-000157e0: 796d 626f 6c0a 2020 2020 2020 2020 3a70  ymbol.        :p
-000157f0: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
-00015800: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
-00015810: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00015820: 2074 6865 2065 7863 6861 6e67 6520 4150   the exchange AP
-00015830: 4920 656e 6470 6f69 6e74 0a20 2020 2020  I endpoint.     
-00015840: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
-00015850: 3a20 616e 206c 6973 7420 6f66 2060 6f72  : an list of `or
-00015860: 6465 7220 7374 7275 6374 7572 6573 203c  der structures <
-00015870: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
-00015880: 742e 636f 6d2f 232f 3f69 643d 6f72 6465  t.com/#/?id=orde
-00015890: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
-000158a0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
-000158b0: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
-000158c0: 2020 2020 2020 2020 2020 276f 7264 6572            'order
-000158d0: 7327 3a20 6964 732c 0a20 2020 2020 2020  s': ids,.       
-000158e0: 207d 0a20 2020 2020 2020 2072 6573 706f   }.        respo
-000158f0: 6e73 6520 3d20 7365 6c66 2e70 7269 7661  nse = self.priva
-00015900: 7465 506f 7374 4361 6e63 656c 4f72 6465  tePostCancelOrde
-00015910: 7242 6174 6368 2873 656c 662e 6578 7465  rBatch(self.exte
-00015920: 6e64 2872 6571 7565 7374 2c20 7061 7261  nd(request, para
-00015930: 6d73 2929 0a20 2020 2020 2020 2023 0a20  ms)).        #. 
-00015940: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
-00015950: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00015960: 2022 6572 726f 7222 3a20 5b5d 2c0a 2020   "error": [],.  
-00015970: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00015980: 2272 6573 756c 7422 3a20 7b0a 2020 2020  "result": {.    
-00015990: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-000159a0: 2263 6f75 6e74 223a 2032 0a20 2020 2020  "count": 2.     
-000159b0: 2020 2023 2020 2020 2020 2020 207d 0a20     #         }. 
-000159c0: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-000159d0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-000159e0: 2072 6574 7572 6e20 7265 7370 6f6e 7365   return response
-000159f0: 0a0a 2020 2020 6465 6620 6361 6e63 656c  ..    def cancel
-00015a00: 5f61 6c6c 5f6f 7264 6572 7328 7365 6c66  _all_orders(self
-00015a10: 2c20 7379 6d62 6f6c 3a20 5374 7220 3d20  , symbol: Str = 
-00015a20: 4e6f 6e65 2c20 7061 7261 6d73 3d7b 7d29  None, params={})
-00015a30: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00015a40: 2020 2020 2020 6361 6e63 656c 2061 6c6c        cancel all
-00015a50: 206f 7065 6e20 6f72 6465 7273 0a20 2020   open orders.   
-00015a60: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
-00015a70: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
-00015a80: 6f6d 2f72 6573 742f 2374 6167 2f54 7261  om/rest/#tag/Tra
-00015a90: 6469 6e67 2f6f 7065 7261 7469 6f6e 2f63  ding/operation/c
-00015aa0: 616e 6365 6c41 6c6c 4f72 6465 7273 0a20  ancelAllOrders. 
-00015ab0: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
-00015ac0: 7220 7379 6d62 6f6c 3a20 756e 6966 6965  r symbol: unifie
-00015ad0: 6420 6d61 726b 6574 2073 796d 626f 6c2c  d market symbol,
-00015ae0: 206f 6e6c 7920 6f72 6465 7273 2069 6e20   only orders in 
-00015af0: 7468 6520 6d61 726b 6574 206f 6620 7365  the market of se
-00015b00: 6c66 2073 796d 626f 6c20 6172 6520 6361  lf symbol are ca
-00015b10: 6e63 656c 6c65 6420 7768 656e 2073 796d  ncelled when sym
-00015b20: 626f 6c20 6973 206e 6f74 204e 6f6e 650a  bol is not None.
-00015b30: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-00015b40: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
-00015b50: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00015b60: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
-00015b70: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
-00015b80: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
-00015b90: 7475 726e 7320 6469 6374 5b5d 3a20 6120  turns dict[]: a 
-00015ba0: 6c69 7374 206f 6620 606f 7264 6572 2073  list of `order s
-00015bb0: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
-00015bc0: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
-00015bd0: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
-00015be0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-00015bf0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-00015c00: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-00015c10: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00015c20: 7365 6c66 2e70 7269 7661 7465 506f 7374  self.privatePost
-00015c30: 4361 6e63 656c 416c 6c28 7061 7261 6d73  CancelAll(params
-00015c40: 290a 0a20 2020 2064 6566 2066 6574 6368  )..    def fetch
-00015c50: 5f6f 7065 6e5f 6f72 6465 7273 2873 656c  _open_orders(sel
-00015c60: 662c 2073 796d 626f 6c3a 2053 7472 203d  f, symbol: Str =
-00015c70: 204e 6f6e 652c 2073 696e 6365 3a20 496e   None, since: In
-00015c80: 7420 3d20 4e6f 6e65 2c20 6c69 6d69 743a  t = None, limit:
-00015c90: 2049 6e74 203d 204e 6f6e 652c 2070 6172   Int = None, par
-00015ca0: 616d 733d 7b7d 2920 2d3e 204c 6973 745b  ams={}) -> List[
-00015cb0: 4f72 6465 725d 3a0a 2020 2020 2020 2020  Order]:.        
-00015cc0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
-00015cd0: 6820 616c 6c20 756e 6669 6c6c 6564 2063  h all unfilled c
-00015ce0: 7572 7265 6e74 6c79 206f 7065 6e20 6f72  urrently open or
-00015cf0: 6465 7273 0a20 2020 2020 2020 203a 7365  ders.        :se
-00015d00: 653a 2068 7474 7073 3a2f 2f64 6f63 732e  e: https://docs.
-00015d10: 6b72 616b 656e 2e63 6f6d 2f72 6573 742f  kraken.com/rest/
-00015d20: 2374 6167 2f41 6363 6f75 6e74 2d44 6174  #tag/Account-Dat
-00015d30: 612f 6f70 6572 6174 696f 6e2f 6765 744f  a/operation/getO
-00015d40: 7065 6e4f 7264 6572 730a 2020 2020 2020  penOrders.      
-00015d50: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
-00015d60: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
-00015d70: 6b65 7420 7379 6d62 6f6c 0a20 2020 2020  ket symbol.     
-00015d80: 2020 203a 7061 7261 6d20 696e 7420 5b73     :param int [s
-00015d90: 696e 6365 5d3a 2074 6865 2065 6172 6c69  ince]: the earli
-00015da0: 6573 7420 7469 6d65 2069 6e20 6d73 2074  est time in ms t
-00015db0: 6f20 6665 7463 6820 6f70 656e 206f 7264  o fetch open ord
-00015dc0: 6572 7320 666f 720a 2020 2020 2020 2020  ers for.        
-00015dd0: 3a70 6172 616d 2069 6e74 205b 6c69 6d69  :param int [limi
-00015de0: 745d 3a20 7468 6520 6d61 7869 6d75 6d20  t]: the maximum 
-00015df0: 6e75 6d62 6572 206f 6620 206f 7065 6e20  number of  open 
-00015e00: 6f72 6465 7273 2073 7472 7563 7475 7265  orders structure
-00015e10: 7320 746f 2072 6574 7269 6576 650a 2020  s to retrieve.  
-00015e20: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-00015e30: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
-00015e40: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
-00015e50: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
-00015e60: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
-00015e70: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-00015e80: 726e 7320 4f72 6465 725b 5d3a 2061 206c  rns Order[]: a l
-00015e90: 6973 7420 6f66 2060 6f72 6465 7220 7374  ist of `order st
-00015ea0: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
-00015eb0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
-00015ec0: 232f 3f69 643d 6f72 6465 722d 7374 7275  #/?id=order-stru
-00015ed0: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00015ee0: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
-00015ef0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-00015f00: 2020 2020 2020 2020 7265 7175 6573 7420          request 
-00015f10: 3d20 7b7d 0a20 2020 2020 2020 2069 6620  = {}.        if 
-00015f20: 7369 6e63 6520 6973 206e 6f74 204e 6f6e  since is not Non
-00015f30: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00015f40: 6571 7565 7374 5b27 7374 6172 7427 5d20  equest['start'] 
-00015f50: 3d20 7365 6c66 2e70 6172 7365 5f74 6f5f  = self.parse_to_
-00015f60: 696e 7428 7369 6e63 6520 2f20 3130 3030  int(since / 1000
-00015f70: 290a 2020 2020 2020 2020 7175 6572 7920  ).        query 
-00015f80: 3d20 7061 7261 6d73 0a20 2020 2020 2020  = params.       
-00015f90: 2063 6c69 656e 744f 7264 6572 4964 203d   clientOrderId =
-00015fa0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
-00015fb0: 5f32 2870 6172 616d 732c 2027 7573 6572  _2(params, 'user
-00015fc0: 7265 6627 2c20 2763 6c69 656e 744f 7264  ref', 'clientOrd
-00015fd0: 6572 4964 2729 0a20 2020 2020 2020 2069  erId').        i
-00015fe0: 6620 636c 6965 6e74 4f72 6465 7249 6420  f clientOrderId 
-00015ff0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-00016000: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00016010: 5b27 7573 6572 7265 6627 5d20 3d20 636c  ['userref'] = cl
-00016020: 6965 6e74 4f72 6465 7249 640a 2020 2020  ientOrderId.    
-00016030: 2020 2020 2020 2020 7175 6572 7920 3d20          query = 
-00016040: 7365 6c66 2e6f 6d69 7428 7061 7261 6d73  self.omit(params
-00016050: 2c20 5b27 7573 6572 7265 6627 2c20 2763  , ['userref', 'c
-00016060: 6c69 656e 744f 7264 6572 4964 275d 290a  lientOrderId']).
-00016070: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-00016080: 203d 2073 656c 662e 7072 6976 6174 6550   = self.privateP
-00016090: 6f73 744f 7065 6e4f 7264 6572 7328 7365  ostOpenOrders(se
-000160a0: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
-000160b0: 742c 2071 7565 7279 2929 0a20 2020 2020  t, query)).     
-000160c0: 2020 206d 6172 6b65 7420 3d20 4e6f 6e65     market = None
-000160d0: 0a20 2020 2020 2020 2069 6620 7379 6d62  .        if symb
-000160e0: 6f6c 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ol is not None:.
-000160f0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
-00016100: 6574 203d 2073 656c 662e 6d61 726b 6574  et = self.market
-00016110: 2873 796d 626f 6c29 0a20 2020 2020 2020  (symbol).       
-00016120: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
-00016130: 6166 655f 6469 6374 2872 6573 706f 6e73  afe_dict(respons
-00016140: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
-00016150: 0a20 2020 2020 2020 206f 7264 6572 7320  .        orders 
-00016160: 3d20 7365 6c66 2e73 6166 655f 6469 6374  = self.safe_dict
-00016170: 2872 6573 756c 742c 2027 6f70 656e 272c  (result, 'open',
-00016180: 207b 7d29 0a20 2020 2020 2020 2072 6574   {}).        ret
-00016190: 7572 6e20 7365 6c66 2e70 6172 7365 5f6f  urn self.parse_o
-000161a0: 7264 6572 7328 6f72 6465 7273 2c20 6d61  rders(orders, ma
-000161b0: 726b 6574 2c20 7369 6e63 652c 206c 696d  rket, since, lim
-000161c0: 6974 290a 0a20 2020 2064 6566 2066 6574  it)..    def fet
-000161d0: 6368 5f63 6c6f 7365 645f 6f72 6465 7273  ch_closed_orders
-000161e0: 2873 656c 662c 2073 796d 626f 6c3a 2053  (self, symbol: S
-000161f0: 7472 203d 204e 6f6e 652c 2073 696e 6365  tr = None, since
-00016200: 3a20 496e 7420 3d20 4e6f 6e65 2c20 6c69  : Int = None, li
-00016210: 6d69 743a 2049 6e74 203d 204e 6f6e 652c  mit: Int = None,
-00016220: 2070 6172 616d 733d 7b7d 2920 2d3e 204c   params={}) -> L
-00016230: 6973 745b 4f72 6465 725d 3a0a 2020 2020  ist[Order]:.    
-00016240: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
-00016250: 6665 7463 6865 7320 696e 666f 726d 6174  fetches informat
-00016260: 696f 6e20 6f6e 206d 756c 7469 706c 6520  ion on multiple 
-00016270: 636c 6f73 6564 206f 7264 6572 7320 6d61  closed orders ma
-00016280: 6465 2062 7920 7468 6520 7573 6572 0a20  de by the user. 
-00016290: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-000162a0: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-000162b0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f41  .com/rest/#tag/A
-000162c0: 6363 6f75 6e74 2d44 6174 612f 6f70 6572  ccount-Data/oper
-000162d0: 6174 696f 6e2f 6765 7443 6c6f 7365 644f  ation/getClosedO
-000162e0: 7264 6572 730a 2020 2020 2020 2020 3a70  rders.        :p
-000162f0: 6172 616d 2073 7472 2073 796d 626f 6c3a  aram str symbol:
-00016300: 2075 6e69 6669 6564 206d 6172 6b65 7420   unified market 
-00016310: 7379 6d62 6f6c 206f 6620 7468 6520 6d61  symbol of the ma
-00016320: 726b 6574 206f 7264 6572 7320 7765 7265  rket orders were
-00016330: 206d 6164 6520 696e 0a20 2020 2020 2020   made in.       
-00016340: 203a 7061 7261 6d20 696e 7420 5b73 696e   :param int [sin
-00016350: 6365 5d3a 2074 6865 2065 6172 6c69 6573  ce]: the earlies
-00016360: 7420 7469 6d65 2069 6e20 6d73 2074 6f20  t time in ms to 
-00016370: 6665 7463 6820 6f72 6465 7273 2066 6f72  fetch orders for
-00016380: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-00016390: 696e 7420 5b6c 696d 6974 5d3a 2074 6865  int [limit]: the
-000163a0: 206d 6178 696d 756d 206e 756d 6265 7220   maximum number 
-000163b0: 6f66 206f 7264 6572 2073 7472 7563 7475  of order structu
-000163c0: 7265 7320 746f 2072 6574 7269 6576 650a  res to retrieve.
-000163d0: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-000163e0: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
-000163f0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-00016400: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
-00016410: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
-00016420: 6f69 6e74 0a20 2020 2020 2020 203a 7061  oint.        :pa
-00016430: 7261 6d20 696e 7420 5b70 6172 616d 732e  ram int [params.
-00016440: 756e 7469 6c5d 3a20 7469 6d65 7374 616d  until]: timestam
-00016450: 7020 696e 206d 7320 6f66 2074 6865 206c  p in ms of the l
-00016460: 6174 6573 7420 656e 7472 790a 2020 2020  atest entry.    
-00016470: 2020 2020 3a72 6574 7572 6e73 204f 7264      :returns Ord
-00016480: 6572 5b5d 3a20 6120 6c69 7374 206f 6620  er[]: a list of 
-00016490: 606f 7264 6572 2073 7472 7563 7475 7265  `order structure
-000164a0: 7320 3c68 7474 7073 3a2f 2f64 6f63 732e  s <https://docs.
-000164b0: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d6f  ccxt.com/#/?id=o
-000164c0: 7264 6572 2d73 7472 7563 7475 7265 3e60  rder-structure>`
-000164d0: 0a20 2020 2020 2020 2022 2222 0a20 2020  .        """.   
-000164e0: 2020 2020 2073 656c 662e 6c6f 6164 5f6d       self.load_m
-000164f0: 6172 6b65 7473 2829 0a20 2020 2020 2020  arkets().       
-00016500: 2072 6571 7565 7374 203d 207b 7d0a 2020   request = {}.  
-00016510: 2020 2020 2020 6966 2073 696e 6365 2069        if since i
-00016520: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00016530: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00016540: 2773 7461 7274 275d 203d 2073 656c 662e  'start'] = self.
-00016550: 7061 7273 655f 746f 5f69 6e74 2873 696e  parse_to_int(sin
-00016560: 6365 202f 2031 3030 3029 0a20 2020 2020  ce / 1000).     
-00016570: 2020 2071 7565 7279 203d 2070 6172 616d     query = param
-00016580: 730a 2020 2020 2020 2020 636c 6965 6e74  s.        client
-00016590: 4f72 6465 7249 6420 3d20 7365 6c66 2e73  OrderId = self.s
-000165a0: 6166 655f 7661 6c75 655f 3228 7061 7261  afe_value_2(para
-000165b0: 6d73 2c20 2775 7365 7272 6566 272c 2027  ms, 'userref', '
-000165c0: 636c 6965 6e74 4f72 6465 7249 6427 290a  clientOrderId').
-000165d0: 2020 2020 2020 2020 6966 2063 6c69 656e          if clien
-000165e0: 744f 7264 6572 4964 2069 7320 6e6f 7420  tOrderId is not 
-000165f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-00016600: 2020 7265 7175 6573 745b 2775 7365 7272    request['userr
-00016610: 6566 275d 203d 2063 6c69 656e 744f 7264  ef'] = clientOrd
-00016620: 6572 4964 0a20 2020 2020 2020 2020 2020  erId.           
-00016630: 2071 7565 7279 203d 2073 656c 662e 6f6d   query = self.om
-00016640: 6974 2870 6172 616d 732c 205b 2775 7365  it(params, ['use
-00016650: 7272 6566 272c 2027 636c 6965 6e74 4f72  rref', 'clientOr
-00016660: 6465 7249 6427 5d29 0a20 2020 2020 2020  derId']).       
-00016670: 2072 6571 7565 7374 2c20 7061 7261 6d73   request, params
-00016680: 203d 2073 656c 662e 6861 6e64 6c65 5f75   = self.handle_u
-00016690: 6e74 696c 5f6f 7074 696f 6e28 2765 6e64  ntil_option('end
-000166a0: 272c 2072 6571 7565 7374 2c20 7061 7261  ', request, para
-000166b0: 6d73 290a 2020 2020 2020 2020 7265 7370  ms).        resp
-000166c0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-000166d0: 6174 6550 6f73 7443 6c6f 7365 644f 7264  atePostClosedOrd
-000166e0: 6572 7328 7365 6c66 2e65 7874 656e 6428  ers(self.extend(
-000166f0: 7265 7175 6573 742c 2071 7565 7279 2929  request, query))
-00016700: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00016710: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
-00016720: 2020 2023 2020 2020 2020 2020 2022 6572     #         "er
-00016730: 726f 7222 3a5b 5d2c 0a20 2020 2020 2020  ror":[],.       
-00016740: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
-00016750: 6c74 223a 7b0a 2020 2020 2020 2020 2320  lt":{.        # 
-00016760: 2020 2020 2020 2020 2020 2020 2263 6c6f              "clo
-00016770: 7365 6422 3a7b 0a20 2020 2020 2020 2023  sed":{.        #
+00014ff0: 2020 226d 6973 6322 3a20 2222 0a20 2020    "misc": "".   
+00015000: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00015010: 2020 2020 2020 207d 2c0a 2020 2020 2020         },.      
+00015020: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00015030: 2020 2020 2e2e 2e0a 2020 2020 2020 2020      ....        
+00015040: 2320 2020 2020 2020 2020 2020 2020 7d2c  #             },
+00015050: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00015060: 2020 2020 2020 2022 636f 756e 7422 3a20         "count": 
+00015070: 3937 3630 2c0a 2020 2020 2020 2020 2320  9760,.        # 
+00015080: 2020 2020 2020 2020 7d2c 0a20 2020 2020          },.     
+00015090: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+000150a0: 2020 2023 0a20 2020 2020 2020 2074 7261     #.        tra
+000150b0: 6465 7320 3d20 7265 7370 6f6e 7365 5b27  des = response['
+000150c0: 7265 7375 6c74 275d 5b27 7472 6164 6573  result']['trades
+000150d0: 275d 0a20 2020 2020 2020 2069 6473 203d  '].        ids =
+000150e0: 206c 6973 7428 7472 6164 6573 2e6b 6579   list(trades.key
+000150f0: 7328 2929 0a20 2020 2020 2020 2066 6f72  s()).        for
+00015100: 2069 2069 6e20 7261 6e67 6528 302c 206c   i in range(0, l
+00015110: 656e 2869 6473 2929 3a0a 2020 2020 2020  en(ids)):.      
+00015120: 2020 2020 2020 7472 6164 6573 5b69 6473        trades[ids
+00015130: 5b69 5d5d 5b27 6964 275d 203d 2069 6473  [i]]['id'] = ids
+00015140: 5b69 5d0a 2020 2020 2020 2020 6d61 726b  [i].        mark
+00015150: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
+00015160: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
+00015170: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+00015180: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
+00015190: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
+000151a0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+000151b0: 2073 656c 662e 7061 7273 655f 7472 6164   self.parse_trad
+000151c0: 6573 2874 7261 6465 732c 206d 6172 6b65  es(trades, marke
+000151d0: 742c 2073 696e 6365 2c20 6c69 6d69 7429  t, since, limit)
+000151e0: 0a0a 2020 2020 6465 6620 6361 6e63 656c  ..    def cancel
+000151f0: 5f6f 7264 6572 2873 656c 662c 2069 643a  _order(self, id:
+00015200: 2073 7472 2c20 7379 6d62 6f6c 3a20 5374   str, symbol: St
+00015210: 7220 3d20 4e6f 6e65 2c20 7061 7261 6d73  r = None, params
+00015220: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+00015230: 220a 2020 2020 2020 2020 6361 6e63 656c  ".        cancel
+00015240: 7320 616e 206f 7065 6e20 6f72 6465 720a  s an open order.
+00015250: 2020 2020 2020 2020 3a73 6565 3a20 6874          :see: ht
+00015260: 7470 733a 2f2f 646f 6373 2e6b 7261 6b65  tps://docs.krake
+00015270: 6e2e 636f 6d2f 7265 7374 2f23 7461 672f  n.com/rest/#tag/
+00015280: 5472 6164 696e 672f 6f70 6572 6174 696f  Trading/operatio
+00015290: 6e2f 6361 6e63 656c 4f72 6465 720a 2020  n/cancelOrder.  
+000152a0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000152b0: 2069 643a 206f 7264 6572 2069 640a 2020   id: order id.  
+000152c0: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
+000152d0: 2073 796d 626f 6c3a 2075 6e69 6669 6564   symbol: unified
+000152e0: 2073 796d 626f 6c20 6f66 2074 6865 206d   symbol of the m
+000152f0: 6172 6b65 7420 7468 6520 6f72 6465 7220  arket the order 
+00015300: 7761 7320 6d61 6465 2069 6e0a 2020 2020  was made in.    
+00015310: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+00015320: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+00015330: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+00015340: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+00015350: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+00015360: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+00015370: 7320 6469 6374 3a20 416e 2060 6f72 6465  s dict: An `orde
+00015380: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+00015390: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+000153a0: 6f6d 2f23 2f3f 6964 3d6f 7264 6572 2d73  om/#/?id=order-s
+000153b0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+000153c0: 2020 2022 2222 0a20 2020 2020 2020 2073     """.        s
+000153d0: 656c 662e 6c6f 6164 5f6d 6172 6b65 7473  elf.load_markets
+000153e0: 2829 0a20 2020 2020 2020 2072 6573 706f  ().        respo
+000153f0: 6e73 6520 3d20 4e6f 6e65 0a20 2020 2020  nse = None.     
+00015400: 2020 2063 6c69 656e 744f 7264 6572 4964     clientOrderId
+00015410: 203d 2073 656c 662e 7361 6665 5f76 616c   = self.safe_val
+00015420: 7565 5f32 2870 6172 616d 732c 2027 7573  ue_2(params, 'us
+00015430: 6572 7265 6627 2c20 2763 6c69 656e 744f  erref', 'clientO
+00015440: 7264 6572 4964 272c 2069 6429 0a20 2020  rderId', id).   
+00015450: 2020 2020 2072 6571 7565 7374 203d 207b       request = {
+00015460: 0a20 2020 2020 2020 2020 2020 2027 7478  .            'tx
+00015470: 6964 273a 2063 6c69 656e 744f 7264 6572  id': clientOrder
+00015480: 4964 2c20 2023 206f 7264 6572 2069 6420  Id,  # order id 
+00015490: 6f72 2075 7365 7272 6566 0a20 2020 2020  or userref.     
+000154a0: 2020 207d 0a20 2020 2020 2020 2070 6172     }.        par
+000154b0: 616d 7320 3d20 7365 6c66 2e6f 6d69 7428  ams = self.omit(
+000154c0: 7061 7261 6d73 2c20 5b27 7573 6572 7265  params, ['userre
+000154d0: 6627 2c20 2763 6c69 656e 744f 7264 6572  f', 'clientOrder
+000154e0: 4964 275d 290a 2020 2020 2020 2020 7472  Id']).        tr
+000154f0: 793a 0a20 2020 2020 2020 2020 2020 2072  y:.            r
+00015500: 6573 706f 6e73 6520 3d20 7365 6c66 2e70  esponse = self.p
+00015510: 7269 7661 7465 506f 7374 4361 6e63 656c  rivatePostCancel
+00015520: 4f72 6465 7228 7365 6c66 2e65 7874 656e  Order(self.exten
+00015530: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00015540: 7329 290a 2020 2020 2020 2020 6578 6365  s)).        exce
+00015550: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+00015560: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
+00015570: 6620 7365 6c66 2e6c 6173 745f 6874 7470  f self.last_http
+00015580: 5f72 6573 706f 6e73 653a 0a20 2020 2020  _response:.     
+00015590: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+000155a0: 6c66 2e6c 6173 745f 6874 7470 5f72 6573  lf.last_http_res
+000155b0: 706f 6e73 652e 6669 6e64 2827 454f 7264  ponse.find('EOrd
+000155c0: 6572 3a55 6e6b 6e6f 776e 206f 7264 6572  er:Unknown order
+000155d0: 2729 203e 3d20 303a 0a20 2020 2020 2020  ') >= 0:.       
+000155e0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+000155f0: 7365 204f 7264 6572 4e6f 7446 6f75 6e64  se OrderNotFound
+00015600: 2873 656c 662e 6964 202b 2027 2063 616e  (self.id + ' can
+00015610: 6365 6c4f 7264 6572 2829 2065 7272 6f72  celOrder() error
+00015620: 2027 202b 2073 656c 662e 6c61 7374 5f68   ' + self.last_h
+00015630: 7474 705f 7265 7370 6f6e 7365 290a 2020  ttp_response).  
+00015640: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00015650: 650a 2020 2020 2020 2020 7265 7475 726e  e.        return
+00015660: 2072 6573 706f 6e73 650a 0a20 2020 2064   response..    d
+00015670: 6566 2063 616e 6365 6c5f 6f72 6465 7273  ef cancel_orders
+00015680: 2873 656c 662c 2069 6473 2c20 7379 6d62  (self, ids, symb
+00015690: 6f6c 3a20 5374 7220 3d20 4e6f 6e65 2c20  ol: Str = None, 
+000156a0: 7061 7261 6d73 3d7b 7d29 3a0a 2020 2020  params={}):.    
+000156b0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000156c0: 6361 6e63 656c 206d 756c 7469 706c 6520  cancel multiple 
+000156d0: 6f72 6465 7273 0a20 2020 2020 2020 203a  orders.        :
+000156e0: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+000156f0: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+00015700: 742f 2374 6167 2f54 7261 6469 6e67 2f6f  t/#tag/Trading/o
+00015710: 7065 7261 7469 6f6e 2f63 616e 6365 6c4f  peration/cancelO
+00015720: 7264 6572 4261 7463 680a 2020 2020 2020  rderBatch.      
+00015730: 2020 3a70 6172 616d 2073 7472 5b5d 2069    :param str[] i
+00015740: 6473 3a20 6f70 656e 206f 7264 6572 7320  ds: open orders 
+00015750: 7472 616e 7361 6374 696f 6e20 4944 2874  transaction ID(t
+00015760: 7869 6429 206f 7220 7573 6572 2072 6566  xid) or user ref
+00015770: 6572 656e 6365 2875 7365 7272 6566 290a  erence(userref).
+00015780: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+00015790: 7472 2073 796d 626f 6c3a 2075 6e69 6669  tr symbol: unifi
+000157a0: 6564 206d 6172 6b65 7420 7379 6d62 6f6c  ed market symbol
+000157b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000157c0: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
+000157d0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+000157e0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+000157f0: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
+00015800: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00015810: 6574 7572 6e73 2064 6963 743a 2061 6e20  eturns dict: an 
+00015820: 6c69 7374 206f 6620 606f 7264 6572 2073  list of `order s
+00015830: 7472 7563 7475 7265 7320 3c68 7474 7073  tructures <https
+00015840: 3a2f 2f64 6f63 732e 6363 7874 2e63 6f6d  ://docs.ccxt.com
+00015850: 2f23 2f3f 6964 3d6f 7264 6572 2d73 7472  /#/?id=order-str
+00015860: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
+00015870: 2022 2222 0a20 2020 2020 2020 2072 6571   """.        req
+00015880: 7565 7374 203d 207b 0a20 2020 2020 2020  uest = {.       
+00015890: 2020 2020 2027 6f72 6465 7273 273a 2069       'orders': i
+000158a0: 6473 2c0a 2020 2020 2020 2020 7d0a 2020  ds,.        }.  
+000158b0: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
+000158c0: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
+000158d0: 7443 616e 6365 6c4f 7264 6572 4261 7463  tCancelOrderBatc
+000158e0: 6828 7365 6c66 2e65 7874 656e 6428 7265  h(self.extend(re
+000158f0: 7175 6573 742c 2070 6172 616d 7329 290a  quest, params)).
+00015900: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00015910: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
+00015920: 2020 2320 2020 2020 2020 2020 2265 7272    #         "err
+00015930: 6f72 223a 205b 5d2c 0a20 2020 2020 2020  or": [],.       
+00015940: 2023 2020 2020 2020 2020 2022 7265 7375   #         "resu
+00015950: 6c74 223a 207b 0a20 2020 2020 2020 2023  lt": {.        #
+00015960: 2020 2020 2020 2020 2020 2022 636f 756e             "coun
+00015970: 7422 3a20 320a 2020 2020 2020 2020 2320  t": 2.        # 
+00015980: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+00015990: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+000159a0: 2020 230a 2020 2020 2020 2020 7265 7475    #.        retu
+000159b0: 726e 2072 6573 706f 6e73 650a 0a20 2020  rn response..   
+000159c0: 2064 6566 2063 616e 6365 6c5f 616c 6c5f   def cancel_all_
+000159d0: 6f72 6465 7273 2873 656c 662c 2073 796d  orders(self, sym
+000159e0: 626f 6c3a 2053 7472 203d 204e 6f6e 652c  bol: Str = None,
+000159f0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00015a00: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00015a10: 2063 616e 6365 6c20 616c 6c20 6f70 656e   cancel all open
+00015a20: 206f 7264 6572 730a 2020 2020 2020 2020   orders.        
+00015a30: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
+00015a40: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
+00015a50: 7374 2f23 7461 672f 5472 6164 696e 672f  st/#tag/Trading/
+00015a60: 6f70 6572 6174 696f 6e2f 6361 6e63 656c  operation/cancel
+00015a70: 416c 6c4f 7264 6572 730a 2020 2020 2020  AllOrders.      
+00015a80: 2020 3a70 6172 616d 2073 7472 2073 796d    :param str sym
+00015a90: 626f 6c3a 2075 6e69 6669 6564 206d 6172  bol: unified mar
+00015aa0: 6b65 7420 7379 6d62 6f6c 2c20 6f6e 6c79  ket symbol, only
+00015ab0: 206f 7264 6572 7320 696e 2074 6865 206d   orders in the m
+00015ac0: 6172 6b65 7420 6f66 2073 656c 6620 7379  arket of self sy
+00015ad0: 6d62 6f6c 2061 7265 2063 616e 6365 6c6c  mbol are cancell
+00015ae0: 6564 2077 6865 6e20 7379 6d62 6f6c 2069  ed when symbol i
+00015af0: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
+00015b00: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
+00015b10: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
+00015b20: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+00015b30: 6963 2074 6f20 7468 6520 6578 6368 616e  ic to the exchan
+00015b40: 6765 2041 5049 2065 6e64 706f 696e 740a  ge API endpoint.
+00015b50: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
+00015b60: 2064 6963 745b 5d3a 2061 206c 6973 7420   dict[]: a list 
+00015b70: 6f66 2060 6f72 6465 7220 7374 7275 6374  of `order struct
+00015b80: 7572 6573 203c 6874 7470 733a 2f2f 646f  ures <https://do
+00015b90: 6373 2e63 6378 742e 636f 6d2f 232f 3f69  cs.ccxt.com/#/?i
+00015ba0: 643d 6f72 6465 722d 7374 7275 6374 7572  d=order-structur
+00015bb0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+00015bc0: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+00015bd0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+00015be0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00015bf0: 7072 6976 6174 6550 6f73 7443 616e 6365  privatePostCance
+00015c00: 6c41 6c6c 2870 6172 616d 7329 0a0a 2020  lAll(params)..  
+00015c10: 2020 6465 6620 6665 7463 685f 6f70 656e    def fetch_open
+00015c20: 5f6f 7264 6572 7328 7365 6c66 2c20 7379  _orders(self, sy
+00015c30: 6d62 6f6c 3a20 5374 7220 3d20 4e6f 6e65  mbol: Str = None
+00015c40: 2c20 7369 6e63 653a 2049 6e74 203d 204e  , since: Int = N
+00015c50: 6f6e 652c 206c 696d 6974 3a20 496e 7420  one, limit: Int 
+00015c60: 3d20 4e6f 6e65 2c20 7061 7261 6d73 3d7b  = None, params={
+00015c70: 7d29 202d 3e20 4c69 7374 5b4f 7264 6572  }) -> List[Order
+00015c80: 5d3a 0a20 2020 2020 2020 2022 2222 0a20  ]:.        """. 
+00015c90: 2020 2020 2020 2066 6574 6368 2061 6c6c         fetch all
+00015ca0: 2075 6e66 696c 6c65 6420 6375 7272 656e   unfilled curren
+00015cb0: 746c 7920 6f70 656e 206f 7264 6572 730a  tly open orders.
+00015cc0: 2020 2020 2020 2020 3a73 6565 3a20 6874          :see: ht
+00015cd0: 7470 733a 2f2f 646f 6373 2e6b 7261 6b65  tps://docs.krake
+00015ce0: 6e2e 636f 6d2f 7265 7374 2f23 7461 672f  n.com/rest/#tag/
+00015cf0: 4163 636f 756e 742d 4461 7461 2f6f 7065  Account-Data/ope
+00015d00: 7261 7469 6f6e 2f67 6574 4f70 656e 4f72  ration/getOpenOr
+00015d10: 6465 7273 0a20 2020 2020 2020 203a 7061  ders.        :pa
+00015d20: 7261 6d20 7374 7220 7379 6d62 6f6c 3a20  ram str symbol: 
+00015d30: 756e 6966 6965 6420 6d61 726b 6574 2073  unified market s
+00015d40: 796d 626f 6c0a 2020 2020 2020 2020 3a70  ymbol.        :p
+00015d50: 6172 616d 2069 6e74 205b 7369 6e63 655d  aram int [since]
+00015d60: 3a20 7468 6520 6561 726c 6965 7374 2074  : the earliest t
+00015d70: 696d 6520 696e 206d 7320 746f 2066 6574  ime in ms to fet
+00015d80: 6368 206f 7065 6e20 6f72 6465 7273 2066  ch open orders f
+00015d90: 6f72 0a20 2020 2020 2020 203a 7061 7261  or.        :para
+00015da0: 6d20 696e 7420 5b6c 696d 6974 5d3a 2074  m int [limit]: t
+00015db0: 6865 206d 6178 696d 756d 206e 756d 6265  he maximum numbe
+00015dc0: 7220 6f66 2020 6f70 656e 206f 7264 6572  r of  open order
+00015dd0: 7320 7374 7275 6374 7572 6573 2074 6f20  s structures to 
+00015de0: 7265 7472 6965 7665 0a20 2020 2020 2020  retrieve.       
+00015df0: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
+00015e00: 7261 6d73 5d3a 2065 7874 7261 2070 6172  rams]: extra par
+00015e10: 616d 6574 6572 7320 7370 6563 6966 6963  ameters specific
+00015e20: 2074 6f20 7468 6520 6578 6368 616e 6765   to the exchange
+00015e30: 2041 5049 2065 6e64 706f 696e 740a 2020   API endpoint.  
+00015e40: 2020 2020 2020 3a72 6574 7572 6e73 204f        :returns O
+00015e50: 7264 6572 5b5d 3a20 6120 6c69 7374 206f  rder[]: a list o
+00015e60: 6620 606f 7264 6572 2073 7472 7563 7475  f `order structu
+00015e70: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
+00015e80: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
+00015e90: 3d6f 7264 6572 2d73 7472 7563 7475 7265  =order-structure
+00015ea0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00015eb0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+00015ec0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+00015ed0: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
+00015ee0: 2020 2020 2020 2020 6966 2073 696e 6365          if since
+00015ef0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00015f00: 2020 2020 2020 2020 2020 7265 7175 6573            reques
+00015f10: 745b 2773 7461 7274 275d 203d 2073 656c  t['start'] = sel
+00015f20: 662e 7061 7273 655f 746f 5f69 6e74 2873  f.parse_to_int(s
+00015f30: 696e 6365 202f 2031 3030 3029 0a20 2020  ince / 1000).   
+00015f40: 2020 2020 2071 7565 7279 203d 2070 6172       query = par
+00015f50: 616d 730a 2020 2020 2020 2020 636c 6965  ams.        clie
+00015f60: 6e74 4f72 6465 7249 6420 3d20 7365 6c66  ntOrderId = self
+00015f70: 2e73 6166 655f 7661 6c75 655f 3228 7061  .safe_value_2(pa
+00015f80: 7261 6d73 2c20 2775 7365 7272 6566 272c  rams, 'userref',
+00015f90: 2027 636c 6965 6e74 4f72 6465 7249 6427   'clientOrderId'
+00015fa0: 290a 2020 2020 2020 2020 6966 2063 6c69  ).        if cli
+00015fb0: 656e 744f 7264 6572 4964 2069 7320 6e6f  entOrderId is no
+00015fc0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00015fd0: 2020 2020 7265 7175 6573 745b 2775 7365      request['use
+00015fe0: 7272 6566 275d 203d 2063 6c69 656e 744f  rref'] = clientO
+00015ff0: 7264 6572 4964 0a20 2020 2020 2020 2020  rderId.         
+00016000: 2020 2071 7565 7279 203d 2073 656c 662e     query = self.
+00016010: 6f6d 6974 2870 6172 616d 732c 205b 2775  omit(params, ['u
+00016020: 7365 7272 6566 272c 2027 636c 6965 6e74  serref', 'client
+00016030: 4f72 6465 7249 6427 5d29 0a20 2020 2020  OrderId']).     
+00016040: 2020 2072 6573 706f 6e73 6520 3d20 7365     response = se
+00016050: 6c66 2e70 7269 7661 7465 506f 7374 4f70  lf.privatePostOp
+00016060: 656e 4f72 6465 7273 2873 656c 662e 6578  enOrders(self.ex
+00016070: 7465 6e64 2872 6571 7565 7374 2c20 7175  tend(request, qu
+00016080: 6572 7929 290a 2020 2020 2020 2020 6d61  ery)).        ma
+00016090: 726b 6574 203d 204e 6f6e 650a 2020 2020  rket = None.    
+000160a0: 2020 2020 6966 2073 796d 626f 6c20 6973      if symbol is
+000160b0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+000160c0: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+000160d0: 7365 6c66 2e6d 6172 6b65 7428 7379 6d62  self.market(symb
+000160e0: 6f6c 290a 2020 2020 2020 2020 7265 7375  ol).        resu
+000160f0: 6c74 203d 2073 656c 662e 7361 6665 5f64  lt = self.safe_d
+00016100: 6963 7428 7265 7370 6f6e 7365 2c20 2772  ict(response, 'r
+00016110: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
+00016120: 2020 2020 6f72 6465 7273 203d 2073 656c      orders = sel
+00016130: 662e 7361 6665 5f64 6963 7428 7265 7375  f.safe_dict(resu
+00016140: 6c74 2c20 276f 7065 6e27 2c20 7b7d 290a  lt, 'open', {}).
+00016150: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00016160: 656c 662e 7061 7273 655f 6f72 6465 7273  elf.parse_orders
+00016170: 286f 7264 6572 732c 206d 6172 6b65 742c  (orders, market,
+00016180: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+00016190: 2020 2020 6465 6620 6665 7463 685f 636c      def fetch_cl
+000161a0: 6f73 6564 5f6f 7264 6572 7328 7365 6c66  osed_orders(self
+000161b0: 2c20 7379 6d62 6f6c 3a20 5374 7220 3d20  , symbol: Str = 
+000161c0: 4e6f 6e65 2c20 7369 6e63 653a 2049 6e74  None, since: Int
+000161d0: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
+000161e0: 496e 7420 3d20 4e6f 6e65 2c20 7061 7261  Int = None, para
+000161f0: 6d73 3d7b 7d29 202d 3e20 4c69 7374 5b4f  ms={}) -> List[O
+00016200: 7264 6572 5d3a 0a20 2020 2020 2020 2022  rder]:.        "
+00016210: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
+00016220: 6573 2069 6e66 6f72 6d61 7469 6f6e 206f  es information o
+00016230: 6e20 6d75 6c74 6970 6c65 2063 6c6f 7365  n multiple close
+00016240: 6420 6f72 6465 7273 206d 6164 6520 6279  d orders made by
+00016250: 2074 6865 2075 7365 720a 2020 2020 2020   the user.      
+00016260: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+00016270: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+00016280: 7265 7374 2f23 7461 672f 4163 636f 756e  rest/#tag/Accoun
+00016290: 742d 4461 7461 2f6f 7065 7261 7469 6f6e  t-Data/operation
+000162a0: 2f67 6574 436c 6f73 6564 4f72 6465 7273  /getClosedOrders
+000162b0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+000162c0: 7374 7220 7379 6d62 6f6c 3a20 756e 6966  str symbol: unif
+000162d0: 6965 6420 6d61 726b 6574 2073 796d 626f  ied market symbo
+000162e0: 6c20 6f66 2074 6865 206d 6172 6b65 7420  l of the market 
+000162f0: 6f72 6465 7273 2077 6572 6520 6d61 6465  orders were made
+00016300: 2069 6e0a 2020 2020 2020 2020 3a70 6172   in.        :par
+00016310: 616d 2069 6e74 205b 7369 6e63 655d 3a20  am int [since]: 
+00016320: 7468 6520 6561 726c 6965 7374 2074 696d  the earliest tim
+00016330: 6520 696e 206d 7320 746f 2066 6574 6368  e in ms to fetch
+00016340: 206f 7264 6572 7320 666f 720a 2020 2020   orders for.    
+00016350: 2020 2020 3a70 6172 616d 2069 6e74 205b      :param int [
+00016360: 6c69 6d69 745d 3a20 7468 6520 6d61 7869  limit]: the maxi
+00016370: 6d75 6d20 6e75 6d62 6572 206f 6620 6f72  mum number of or
+00016380: 6465 7220 7374 7275 6374 7572 6573 2074  der structures t
+00016390: 6f20 7265 7472 6965 7665 0a20 2020 2020  o retrieve.     
+000163a0: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
+000163b0: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
+000163c0: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+000163d0: 6963 2074 6f20 7468 6520 6578 6368 616e  ic to the exchan
+000163e0: 6765 2041 5049 2065 6e64 706f 696e 740a  ge API endpoint.
+000163f0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00016400: 6e74 205b 7061 7261 6d73 2e75 6e74 696c  nt [params.until
+00016410: 5d3a 2074 696d 6573 7461 6d70 2069 6e20  ]: timestamp in 
+00016420: 6d73 206f 6620 7468 6520 6c61 7465 7374  ms of the latest
+00016430: 2065 6e74 7279 0a20 2020 2020 2020 203a   entry.        :
+00016440: 7265 7475 726e 7320 4f72 6465 725b 5d3a  returns Order[]:
+00016450: 2061 206c 6973 7420 6f66 2060 6f72 6465   a list of `orde
+00016460: 7220 7374 7275 6374 7572 6573 203c 6874  r structures <ht
+00016470: 7470 733a 2f2f 646f 6373 2e63 6378 742e  tps://docs.ccxt.
+00016480: 636f 6d2f 232f 3f69 643d 6f72 6465 722d  com/#/?id=order-
+00016490: 7374 7275 6374 7572 653e 600a 2020 2020  structure>`.    
+000164a0: 2020 2020 2222 220a 2020 2020 2020 2020      """.        
+000164b0: 7365 6c66 2e6c 6f61 645f 6d61 726b 6574  self.load_market
+000164c0: 7328 290a 2020 2020 2020 2020 7265 7175  s().        requ
+000164d0: 6573 7420 3d20 7b7d 0a20 2020 2020 2020  est = {}.       
+000164e0: 2069 6620 7369 6e63 6520 6973 206e 6f74   if since is not
+000164f0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00016500: 2020 2072 6571 7565 7374 5b27 7374 6172     request['star
+00016510: 7427 5d20 3d20 7365 6c66 2e70 6172 7365  t'] = self.parse
+00016520: 5f74 6f5f 696e 7428 7369 6e63 6520 2f20  _to_int(since / 
+00016530: 3130 3030 290a 2020 2020 2020 2020 7175  1000).        qu
+00016540: 6572 7920 3d20 7061 7261 6d73 0a20 2020  ery = params.   
+00016550: 2020 2020 2063 6c69 656e 744f 7264 6572       clientOrder
+00016560: 4964 203d 2073 656c 662e 7361 6665 5f76  Id = self.safe_v
+00016570: 616c 7565 5f32 2870 6172 616d 732c 2027  alue_2(params, '
+00016580: 7573 6572 7265 6627 2c20 2763 6c69 656e  userref', 'clien
+00016590: 744f 7264 6572 4964 2729 0a20 2020 2020  tOrderId').     
+000165a0: 2020 2069 6620 636c 6965 6e74 4f72 6465     if clientOrde
+000165b0: 7249 6420 6973 206e 6f74 204e 6f6e 653a  rId is not None:
+000165c0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
+000165d0: 7565 7374 5b27 7573 6572 7265 6627 5d20  uest['userref'] 
+000165e0: 3d20 636c 6965 6e74 4f72 6465 7249 640a  = clientOrderId.
+000165f0: 2020 2020 2020 2020 2020 2020 7175 6572              quer
+00016600: 7920 3d20 7365 6c66 2e6f 6d69 7428 7061  y = self.omit(pa
+00016610: 7261 6d73 2c20 5b27 7573 6572 7265 6627  rams, ['userref'
+00016620: 2c20 2763 6c69 656e 744f 7264 6572 4964  , 'clientOrderId
+00016630: 275d 290a 2020 2020 2020 2020 7265 7175  ']).        requ
+00016640: 6573 742c 2070 6172 616d 7320 3d20 7365  est, params = se
+00016650: 6c66 2e68 616e 646c 655f 756e 7469 6c5f  lf.handle_until_
+00016660: 6f70 7469 6f6e 2827 656e 6427 2c20 7265  option('end', re
+00016670: 7175 6573 742c 2070 6172 616d 7329 0a20  quest, params). 
+00016680: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+00016690: 3d20 7365 6c66 2e70 7269 7661 7465 506f  = self.privatePo
+000166a0: 7374 436c 6f73 6564 4f72 6465 7273 2873  stClosedOrders(s
+000166b0: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
+000166c0: 7374 2c20 7175 6572 7929 290a 2020 2020  st, query)).    
+000166d0: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+000166e0: 2020 2020 7b0a 2020 2020 2020 2020 2320      {.        # 
+000166f0: 2020 2020 2020 2020 2265 7272 6f72 223a          "error":
+00016700: 5b5d 2c0a 2020 2020 2020 2020 2320 2020  [],.        #   
+00016710: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
+00016720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016730: 2020 2020 2020 2022 636c 6f73 6564 223a         "closed":
+00016740: 7b0a 2020 2020 2020 2020 2320 2020 2020  {.        #     
+00016750: 2020 2020 2020 2020 2020 2020 224f 4554              "OET
+00016760: 5a59 4f2d 554c 3532 342d 514a 4d58 4354  ZYO-UL524-QJMXCT
+00016770: 223a 7b0a 2020 2020 2020 2020 2320 2020  ":{.        #   
 00016780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016790: 2022 4f45 545a 594f 2d55 4c35 3234 2d51   "OETZYO-UL524-Q
-000167a0: 4a4d 5843 5422 3a7b 0a20 2020 2020 2020  JMXCT":{.       
-000167b0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-000167c0: 2020 2020 2020 2022 7265 6669 6422 3a6e         "refid":n
-000167d0: 756c 6c2c 0a20 2020 2020 2020 2023 2020  ull,.        #  
-000167e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000167f0: 2020 2022 7573 6572 7265 6622 3a6e 756c     "userref":nul
-00016800: 6c2c 0a20 2020 2020 2020 2023 2020 2020  l,.        #    
-00016810: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016820: 2022 7374 6174 7573 223a 2263 616e 6365   "status":"cance
-00016830: 6c65 6422 2c0a 2020 2020 2020 2020 2320  led",.        # 
-00016840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016850: 2020 2020 2272 6561 736f 6e22 3a22 5573      "reason":"Us
-00016860: 6572 2072 6571 7565 7374 6564 222c 0a20  er requested",. 
-00016870: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00016880: 2020 2020 2020 2020 2020 2020 2022 6f70               "op
-00016890: 656e 746d 223a 3136 3031 3438 3933 3133  entm":1601489313
-000168a0: 2e33 3839 382c 0a20 2020 2020 2020 2023  .3898,.        #
-000168b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000168c0: 2020 2020 2022 636c 6f73 6574 6d22 3a31       "closetm":1
-000168d0: 3630 3134 3839 3334 362e 3535 3037 2c0a  601489346.5507,.
-000168e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000168f0: 2020 2020 2020 2020 2020 2020 2020 2273                "s
-00016900: 7461 7274 746d 223a 302c 0a20 2020 2020  tarttm":0,.     
-00016910: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-00016920: 2020 2020 2020 2020 2022 6578 7069 7265           "expire
-00016930: 746d 223a 302c 0a20 2020 2020 2020 2023  tm":0,.        #
-00016940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016950: 2020 2020 2022 6465 7363 7222 3a7b 0a20       "descr":{. 
-00016960: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00016790: 2020 2272 6566 6964 223a 6e75 6c6c 2c0a    "refid":null,.
+000167a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000167b0: 2020 2020 2020 2020 2020 2020 2020 2275                "u
+000167c0: 7365 7272 6566 223a 6e75 6c6c 2c0a 2020  serref":null,.  
+000167d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000167e0: 2020 2020 2020 2020 2020 2020 2273 7461              "sta
+000167f0: 7475 7322 3a22 6361 6e63 656c 6564 222c  tus":"canceled",
+00016800: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016810: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00016820: 7265 6173 6f6e 223a 2255 7365 7220 7265  reason":"User re
+00016830: 7175 6573 7465 6422 2c0a 2020 2020 2020  quested",.      
+00016840: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00016850: 2020 2020 2020 2020 226f 7065 6e74 6d22          "opentm"
+00016860: 3a31 3630 3134 3839 3331 332e 3338 3938  :1601489313.3898
+00016870: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00016880: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016890: 2263 6c6f 7365 746d 223a 3136 3031 3438  "closetm":160148
+000168a0: 3933 3436 2e35 3530 372c 0a20 2020 2020  9346.5507,.     
+000168b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+000168c0: 2020 2020 2020 2020 2022 7374 6172 7474           "startt
+000168d0: 6d22 3a30 2c0a 2020 2020 2020 2020 2320  m":0,.        # 
+000168e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000168f0: 2020 2020 2265 7870 6972 6574 6d22 3a30      "expiretm":0
+00016900: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00016910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016920: 2264 6573 6372 223a 7b0a 2020 2020 2020  "descr":{.      
+00016930: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00016940: 2020 2020 2020 2020 2020 2020 2270 6169              "pai
+00016950: 7222 3a22 4554 4855 5344 5422 2c0a 2020  r":"ETHUSDT",.  
+00016960: 2020 2020 2020 2320 2020 2020 2020 2020        #         
 00016970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016980: 2022 7061 6972 223a 2245 5448 5553 4454   "pair":"ETHUSDT
-00016990: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00016980: 2274 7970 6522 3a22 6275 7922 2c0a 2020  "type":"buy",.  
+00016990: 2020 2020 2020 2320 2020 2020 2020 2020        #         
 000169a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169b0: 2020 2020 2022 7479 7065 223a 2262 7579       "type":"buy
-000169c0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000169b0: 226f 7264 6572 7479 7065 223a 226c 696d  "ordertype":"lim
+000169c0: 6974 222c 0a20 2020 2020 2020 2023 2020  it",.        #  
 000169d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000169e0: 2020 2020 2022 6f72 6465 7274 7970 6522       "ordertype"
-000169f0: 3a22 6c69 6d69 7422 2c0a 2020 2020 2020  :"limit",.      
-00016a00: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00016a10: 2020 2020 2020 2020 2020 2020 2270 7269              "pri
-00016a20: 6365 223a 2233 3330 2e30 3022 2c0a 2020  ce":"330.00",.  
-00016a30: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00016a40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a50: 2270 7269 6365 3222 3a22 3022 2c0a 2020  "price2":"0",.  
+000169e0: 2020 2020 2020 2022 7072 6963 6522 3a22         "price":"
+000169f0: 3333 302e 3030 222c 0a20 2020 2020 2020  330.00",.       
+00016a00: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00016a10: 2020 2020 2020 2020 2020 2022 7072 6963             "pric
+00016a20: 6532 223a 2230 222c 0a20 2020 2020 2020  e2":"0",.       
+00016a30: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00016a40: 2020 2020 2020 2020 2020 2022 6c65 7665             "leve
+00016a50: 7261 6765 223a 226e 6f6e 6522 2c0a 2020  rage":"none",.  
 00016a60: 2020 2020 2020 2320 2020 2020 2020 2020        #         
 00016a70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016a80: 226c 6576 6572 6167 6522 3a22 6e6f 6e65  "leverage":"none
-00016a90: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00016aa0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016ab0: 2020 2020 2022 6f72 6465 7222 3a22 6275       "order":"bu
-00016ac0: 7920 302e 3032 3130 3030 3030 2045 5448  y 0.02100000 ETH
-00016ad0: 5553 4454 2040 206c 696d 6974 2033 3330  USDT @ limit 330
-00016ae0: 2e30 3022 2c0a 2020 2020 2020 2020 2320  .00",.        # 
-00016af0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b00: 2020 2020 2020 2020 2263 6c6f 7365 223a          "close":
-00016b10: 2222 0a20 2020 2020 2020 2023 2020 2020  "".        #    
-00016b20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b30: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-00016b40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b50: 2020 2276 6f6c 223a 2230 2e30 3231 3030    "vol":"0.02100
-00016b60: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-00016b70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016b80: 2020 2020 2276 6f6c 5f65 7865 6322 3a22      "vol_exec":"
-00016b90: 302e 3030 3030 3030 3030 222c 0a20 2020  0.00000000",.   
-00016ba0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016bb0: 2020 2020 2020 2020 2020 2022 636f 7374             "cost
-00016bc0: 223a 2230 2e30 3030 3030 222c 0a20 2020  ":"0.00000",.   
-00016bd0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016be0: 2020 2020 2020 2020 2020 2022 6665 6522             "fee"
-00016bf0: 3a22 302e 3030 3030 3022 2c0a 2020 2020  :"0.00000",.    
-00016c00: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00016c10: 2020 2020 2020 2020 2020 2270 7269 6365            "price
+00016a80: 226f 7264 6572 223a 2262 7579 2030 2e30  "order":"buy 0.0
+00016a90: 3231 3030 3030 3020 4554 4855 5344 5420  2100000 ETHUSDT 
+00016aa0: 4020 6c69 6d69 7420 3333 302e 3030 222c  @ limit 330.00",
+00016ab0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016ac0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016ad0: 2020 2022 636c 6f73 6522 3a22 220a 2020     "close":"".  
+00016ae0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00016af0: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+00016b00: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00016b10: 2020 2020 2020 2020 2020 2020 2022 766f               "vo
+00016b20: 6c22 3a22 302e 3032 3130 3030 3030 222c  l":"0.02100000",
+00016b30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016b40: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00016b50: 766f 6c5f 6578 6563 223a 2230 2e30 3030  vol_exec":"0.000
+00016b60: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00016b70: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016b80: 2020 2020 2020 2263 6f73 7422 3a22 302e        "cost":"0.
+00016b90: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00016ba0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016bb0: 2020 2020 2020 2266 6565 223a 2230 2e30        "fee":"0.0
+00016bc0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+00016bd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00016be0: 2020 2020 2022 7072 6963 6522 3a22 302e       "price":"0.
+00016bf0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+00016c00: 2320 2020 2020 2020 2020 2020 2020 2020  #               
+00016c10: 2020 2020 2020 2273 746f 7070 7269 6365        "stopprice
 00016c20: 223a 2230 2e30 3030 3030 222c 0a20 2020  ":"0.00000",.   
 00016c30: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00016c40: 2020 2020 2020 2020 2020 2022 7374 6f70             "stop
-00016c50: 7072 6963 6522 3a22 302e 3030 3030 3022  price":"0.00000"
-00016c60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00016c40: 2020 2020 2020 2020 2020 2022 6c69 6d69             "limi
+00016c50: 7470 7269 6365 223a 2230 2e30 3030 3030  tprice":"0.00000
+00016c60: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 00016c70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016c80: 226c 696d 6974 7072 6963 6522 3a22 302e  "limitprice":"0.
-00016c90: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00016ca0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00016cb0: 2020 2020 2020 226d 6973 6322 3a22 222c        "misc":"",
-00016cc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00016cd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016ce0: 6f66 6c61 6773 223a 2266 6369 7122 0a20  oflags":"fciq". 
-00016cf0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00016d00: 2020 2020 2020 2020 207d 2c0a 2020 2020           },.    
-00016d10: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00016d20: 2020 7d2c 0a20 2020 2020 2020 2023 2020    },.        #  
-00016d30: 2020 2020 2020 2020 2020 2022 636f 756e             "coun
-00016d40: 7422 3a31 360a 2020 2020 2020 2020 2320  t":16.        # 
-00016d50: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00016d60: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
-00016d70: 2020 230a 2020 2020 2020 2020 6d61 726b    #.        mark
-00016d80: 6574 203d 204e 6f6e 650a 2020 2020 2020  et = None.      
-00016d90: 2020 6966 2073 796d 626f 6c20 6973 206e    if symbol is n
-00016da0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-00016db0: 2020 2020 206d 6172 6b65 7420 3d20 7365       market = se
-00016dc0: 6c66 2e6d 6172 6b65 7428 7379 6d62 6f6c  lf.market(symbol
-00016dd0: 290a 2020 2020 2020 2020 7265 7375 6c74  ).        result
-00016de0: 203d 2073 656c 662e 7361 6665 5f64 6963   = self.safe_dic
-00016df0: 7428 7265 7370 6f6e 7365 2c20 2772 6573  t(response, 'res
-00016e00: 756c 7427 2c20 7b7d 290a 2020 2020 2020  ult', {}).      
-00016e10: 2020 6f72 6465 7273 203d 2073 656c 662e    orders = self.
-00016e20: 7361 6665 5f64 6963 7428 7265 7375 6c74  safe_dict(result
-00016e30: 2c20 2763 6c6f 7365 6427 2c20 7b7d 290a  , 'closed', {}).
-00016e40: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00016e50: 656c 662e 7061 7273 655f 6f72 6465 7273  elf.parse_orders
-00016e60: 286f 7264 6572 732c 206d 6172 6b65 742c  (orders, market,
-00016e70: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
-00016e80: 2020 2020 6465 6620 7061 7273 655f 7472      def parse_tr
-00016e90: 616e 7361 6374 696f 6e5f 7374 6174 7573  ansaction_status
-00016ea0: 2873 656c 662c 2073 7461 7475 7329 3a0a  (self, status):.
-00016eb0: 2020 2020 2020 2020 2320 4946 4558 2074          # IFEX t
-00016ec0: 7261 6e73 6163 7469 6f6e 2073 7461 7465  ransaction state
-00016ed0: 730a 2020 2020 2020 2020 7374 6174 7573  s.        status
-00016ee0: 6573 203d 207b 0a20 2020 2020 2020 2020  es = {.         
-00016ef0: 2020 2027 496e 6974 6961 6c27 3a20 2770     'Initial': 'p
-00016f00: 656e 6469 6e67 272c 0a20 2020 2020 2020  ending',.       
-00016f10: 2020 2020 2027 5065 6e64 696e 6727 3a20       'Pending': 
-00016f20: 2770 656e 6469 6e67 272c 0a20 2020 2020  'pending',.     
-00016f30: 2020 2020 2020 2027 5375 6363 6573 7327         'Success'
-00016f40: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
-00016f50: 2020 2020 2753 6574 746c 6564 273a 2027      'Settled': '
-00016f60: 7065 6e64 696e 6727 2c0a 2020 2020 2020  pending',.      
-00016f70: 2020 2020 2020 2746 6169 6c75 7265 273a        'Failure':
-00016f80: 2027 6661 696c 6564 272c 0a20 2020 2020   'failed',.     
-00016f90: 2020 2020 2020 2027 5061 7274 6961 6c27         'Partial'
-00016fa0: 3a20 276f 6b27 2c0a 2020 2020 2020 2020  : 'ok',.        
-00016fb0: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
-00016fc0: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00016fd0: 6728 7374 6174 7573 6573 2c20 7374 6174  g(statuses, stat
-00016fe0: 7573 2c20 7374 6174 7573 290a 0a20 2020  us, status)..   
-00016ff0: 2064 6566 2070 6172 7365 5f6e 6574 776f   def parse_netwo
-00017000: 726b 2873 656c 662c 206e 6574 776f 726b  rk(self, network
-00017010: 293a 0a20 2020 2020 2020 2077 6974 6864  ):.        withd
-00017020: 7261 774d 6574 686f 6473 203d 2073 656c  rawMethods = sel
-00017030: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
-00017040: 662e 6f70 7469 6f6e 732c 2027 7769 7468  f.options, 'with
-00017050: 6472 6177 4d65 7468 6f64 7327 2c20 7b7d  drawMethods', {}
-00017060: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00017070: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
-00017080: 6728 7769 7468 6472 6177 4d65 7468 6f64  g(withdrawMethod
-00017090: 732c 206e 6574 776f 726b 2c20 6e65 7477  s, network, netw
-000170a0: 6f72 6b29 0a0a 2020 2020 6465 6620 7061  ork)..    def pa
-000170b0: 7273 655f 7472 616e 7361 6374 696f 6e28  rse_transaction(
-000170c0: 7365 6c66 2c20 7472 616e 7361 6374 696f  self, transactio
-000170d0: 6e2c 2063 7572 7265 6e63 793a 2043 7572  n, currency: Cur
-000170e0: 7265 6e63 7920 3d20 4e6f 6e65 2920 2d3e  rency = None) ->
-000170f0: 2054 7261 6e73 6163 7469 6f6e 3a0a 2020   Transaction:.  
-00017100: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-00017110: 2320 6665 7463 6844 6570 6f73 6974 730a  # fetchDeposits.
-00017120: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-00017130: 2020 2320 2020 2020 7b0a 2020 2020 2020    #     {.      
-00017140: 2020 2320 2020 2020 2020 2020 226d 6574    #         "met
-00017150: 686f 6422 3a20 2245 7468 6572 2848 6578  hod": "Ether(Hex
-00017160: 2922 2c0a 2020 2020 2020 2020 2320 2020  )",.        #   
-00017170: 2020 2020 2020 2261 636c 6173 7322 3a20        "aclass": 
-00017180: 2263 7572 7265 6e63 7922 2c0a 2020 2020  "currency",.    
-00017190: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
-000171a0: 7373 6574 223a 2022 5845 5448 222c 0a20  sset": "XETH",. 
-000171b0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000171c0: 2022 7265 6669 6422 3a20 2251 3243 414e   "refid": "Q2CAN
-000171d0: 4b4c 2d4c 4246 5645 452d 5534 5932 5751  KL-LBFVEE-U4Y2WQ
-000171e0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000171f0: 2020 2020 2022 7478 6964 223a 2022 3078       "txid": "0x
-00017200: 3537 6664 3730 3464 6162 3161 3733 6332  57fd704dab1a73c2
-00017210: 3065 3234 6338 3639 3630 3939 6236 3935  0e24c8696099b695
-00017220: 6435 3936 3932 3462 3430 3162 3236 3135  d596924b401b2615
-00017230: 3133 6366 6461 6232 33e2 80a6 222c 0a20  13cfdab23...",. 
-00017240: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00017250: 2022 696e 666f 223a 2022 3078 3631 3566   "info": "0x615f
-00017260: 3962 6137 6139 3537 3562 3061 6234 6435  9ba7a9575b0ab4d5
-00017270: 3731 6232 6233 3662 3162 3332 3462 6438  71b2b36b1b324bd8
-00017280: 3332 3930 222c 0a20 2020 2020 2020 2023  3290",.        #
-00017290: 2020 2020 2020 2020 2022 616d 6f75 6e74           "amount
-000172a0: 223a 2022 372e 3939 3939 3235 3739 3030  ": "7.9999257900
-000172b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-000172c0: 2020 2020 2022 6665 6522 3a20 2230 2e30       "fee": "0.0
-000172d0: 3030 3030 3030 3030 3022 2c0a 2020 2020  000000000",.    
-000172e0: 2020 2020 2320 2020 2020 2020 2020 2274      #         "t
-000172f0: 696d 6522 3a20 2031 3532 3932 3233 3231  ime":  152922321
-00017300: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
-00017310: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
-00017320: 5375 6363 6573 7322 0a20 2020 2020 2020  Success".       
-00017330: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-00017340: 2023 0a20 2020 2020 2020 2023 2074 6865   #.        # the
-00017350: 7265 2063 616e 2062 6520 616e 2061 6464  re can be an add
-00017360: 6974 696f 6e61 6c20 2773 7461 7475 732d  itional 'status-
-00017370: 7072 6f70 2720 6669 656c 6420 7072 6573  prop' field pres
-00017380: 656e 740a 2020 2020 2020 2020 2320 6465  ent.        # de
-00017390: 706f 7369 7420 7065 6e64 696e 6720 7265  posit pending re
-000173a0: 7669 6577 2062 7920 6578 6368 616e 6765  view by exchange
-000173b0: 203d 3e20 276f 6e2d 686f 6c64 270a 2020   => 'on-hold'.  
-000173c0: 2020 2020 2020 2320 7468 6520 6465 706f        # the depo
-000173d0: 7369 7420 6973 2069 6e69 7469 6174 6564  sit is initiated
-000173e0: 2062 7920 7468 6520 6578 6368 616e 6765   by the exchange
-000173f0: 203d 3e20 2772 6574 7572 6e27 0a20 2020   => 'return'.   
-00017400: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-00017410: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-00017420: 2320 2020 2020 2020 2020 2022 7479 7065  #          "type
-00017430: 223a 2027 6465 706f 7369 7427 2c0a 2020  ": 'deposit',.  
-00017440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017450: 2022 6d65 7468 6f64 223a 2027 4669 646f   "method": 'Fido
-00017460: 7220 4261 6e6b 2041 4728 5769 7265 2054  r Bank AG(Wire T
-00017470: 7261 6e73 6665 7229 272c 0a20 2020 2020  ransfer)',.     
-00017480: 2020 2023 2020 2020 2020 2020 2020 2261     #          "a
-00017490: 636c 6173 7322 3a20 2763 7572 7265 6e63  class": 'currenc
-000174a0: 7927 2c0a 2020 2020 2020 2020 2320 2020  y',.        #   
-000174b0: 2020 2020 2020 2022 6173 7365 7422 3a20         "asset": 
-000174c0: 275a 4555 5227 2c0a 2020 2020 2020 2020  'ZEUR',.        
-000174d0: 2320 2020 2020 2020 2020 2022 7265 6669  #          "refi
-000174e0: 6422 3a20 2778 7878 2d78 7878 2d78 7878  d": 'xxx-xxx-xxx
-000174f0: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
-00017500: 2020 2020 2020 2274 7869 6422 3a20 2731        "txid": '1
-00017510: 3233 3431 3233 3427 2c0a 2020 2020 2020  2341234',.      
-00017520: 2020 2320 2020 2020 2020 2020 2022 696e    #          "in
-00017530: 666f 223a 2027 4241 4e4b 434f 4445 5858  fo": 'BANKCODEXX
-00017540: 5827 2c0a 2020 2020 2020 2020 2320 2020  X',.        #   
-00017550: 2020 2020 2020 2022 616d 6f75 6e74 223a         "amount":
-00017560: 2027 3338 3736 392e 3038 272c 0a20 2020   '38769.08',.   
-00017570: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00017580: 2266 6565 223a 2027 302e 3030 3030 272c  "fee": '0.0000',
-00017590: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000175a0: 2020 2020 2274 696d 6522 3a20 3136 3434      "time": 1644
-000175b0: 3330 3635 3532 2c0a 2020 2020 2020 2020  306552,.        
-000175c0: 2320 2020 2020 2020 2020 2022 7374 6174  #          "stat
-000175d0: 7573 223a 2027 5375 6363 6573 7327 2c0a  us": 'Success',.
-000175e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000175f0: 2020 2073 7461 7475 732d 7072 6f70 3a20     status-prop: 
-00017600: 276f 6e2d 686f 6c64 270a 2020 2020 2020  'on-hold'.      
-00017610: 2020 2320 2020 2020 207d 0a20 2020 2020    #      }.     
-00017620: 2020 2023 0a20 2020 2020 2020 2023 0a20     #.        #. 
-00017630: 2020 2020 2020 2023 2066 6574 6368 5769         # fetchWi
-00017640: 7468 6472 6177 616c 730a 2020 2020 2020  thdrawals.      
-00017650: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
-00017660: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
-00017670: 2020 2020 2020 226d 6574 686f 6422 3a20        "method": 
-00017680: 2245 7468 6572 222c 0a20 2020 2020 2020  "Ether",.       
-00017690: 2023 2020 2020 2020 2020 2022 6163 6c61   #         "acla
-000176a0: 7373 223a 2022 6375 7272 656e 6379 222c  ss": "currency",
-000176b0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-000176c0: 2020 2022 6173 7365 7422 3a20 2258 4554     "asset": "XET
-000176d0: 4822 2c0a 2020 2020 2020 2020 2320 2020  H",.        #   
-000176e0: 2020 2020 2020 2272 6566 6964 223a 2022        "refid": "
-000176f0: 4132 4246 3334 532d 4f37 4c42 4e51 2d55  A2BF34S-O7LBNQ-U
-00017700: 4534 5934 4f22 2c0a 2020 2020 2020 2020  E4Y4O",.        
-00017710: 2320 2020 2020 2020 2020 2274 7869 6422  #         "txid"
-00017720: 3a20 2230 7832 3838 6238 3363 3662 3039  : "0x288b83c6b09
-00017730: 3034 6438 3430 3065 6634 3465 3163 3965  04d8400ef44e1c9e
-00017740: 3231 3837 6235 6338 6637 6561 3364 3833  2187b5c8f7ea3d83
-00017750: 3832 3232 6435 3366 3730 3161 3135 6235  8222d53f701a15b5
-00017760: 6332 3734 6422 2c0a 2020 2020 2020 2020  c274d",.        
-00017770: 2320 2020 2020 2020 2020 2269 6e66 6f22  #         "info"
-00017780: 3a20 2230 7837 6362 3237 3561 3565 3037  : "0x7cb275a5e07
-00017790: 6261 3934 3366 6565 3937 3265 3136 3564  ba943fee972e165d
-000177a0: 3830 6461 6136 3763 6232 6464 3022 2c0a  80daa67cb2dd0",.
-000177b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000177c0: 2020 2261 6d6f 756e 7422 3a20 2239 2e39    "amount": "9.9
-000177d0: 3935 3030 3030 3030 3022 2c0a 2020 2020  950000000",.    
-000177e0: 2020 2020 2320 2020 2020 2020 2020 2266      #         "f
-000177f0: 6565 223a 2022 302e 3030 3530 3030 3030  ee": "0.00500000
-00017800: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-00017810: 2020 2020 2020 2022 7469 6d65 223a 2020         "time":  
-00017820: 3135 3330 3438 3137 3530 2c0a 2020 2020  1530481750,.    
-00017830: 2020 2020 2320 2020 2020 2020 2020 2273      #         "s
-00017840: 7461 7475 7322 3a20 2253 7563 6365 7373  tatus": "Success
-00017850: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
-00017860: 2020 2020 226b 6579 223a 2248 756f 6269      "key":"Huobi
-00017870: 2077 616c 6c65 7422 2c0a 2020 2020 2020   wallet",.      
-00017880: 2020 2320 2020 2020 2020 2020 226e 6574    #         "net
-00017890: 776f 726b 223a 2254 726f 6e22 0a20 2020  work":"Tron".   
-000178a0: 2020 2020 2023 2020 2020 2020 2020 2073       #         s
-000178b0: 7461 7475 732d 7072 6f70 3a20 276f 6e2d  tatus-prop: 'on-
-000178c0: 686f 6c64 2720 2023 2073 656c 6620 6669  hold'  # self fi
-000178d0: 656c 6420 6d69 6768 7420 6e6f 7420 6265  eld might not be
-000178e0: 2070 7265 7365 6e74 2069 6e20 736f 6d65   present in some
-000178f0: 2063 6173 6573 0a20 2020 2020 2020 2023   cases.        #
-00017900: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-00017910: 0a20 2020 2020 2020 2023 2077 6974 6864  .        # withd
-00017920: 7261 770a 2020 2020 2020 2020 230a 2020  raw.        #.  
-00017930: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-00017940: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00017950: 2272 6566 6964 223a 2022 4147 4253 4f36  "refid": "AGBSO6
-00017960: 542d 5546 4d54 5451 2d49 374b 4753 3622  T-UFMTTQ-I7KGS6"
-00017970: 0a20 2020 2020 2020 2023 2020 2020 207d  .        #     }
-00017980: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-00017990: 2020 2069 6420 3d20 7365 6c66 2e73 6166     id = self.saf
-000179a0: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-000179b0: 7469 6f6e 2c20 2772 6566 6964 2729 0a20  tion, 'refid'). 
-000179c0: 2020 2020 2020 2074 7869 6420 3d20 7365         txid = se
-000179d0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
-000179e0: 7261 6e73 6163 7469 6f6e 2c20 2774 7869  ransaction, 'txi
-000179f0: 6427 290a 2020 2020 2020 2020 7469 6d65  d').        time
-00017a00: 7374 616d 7020 3d20 7365 6c66 2e73 6166  stamp = self.saf
-00017a10: 655f 7469 6d65 7374 616d 7028 7472 616e  e_timestamp(tran
-00017a20: 7361 6374 696f 6e2c 2027 7469 6d65 2729  saction, 'time')
-00017a30: 0a20 2020 2020 2020 2063 7572 7265 6e63  .        currenc
-00017a40: 7949 6420 3d20 7365 6c66 2e73 6166 655f  yId = self.safe_
-00017a50: 7374 7269 6e67 2874 7261 6e73 6163 7469  string(transacti
-00017a60: 6f6e 2c20 2761 7373 6574 2729 0a20 2020  on, 'asset').   
-00017a70: 2020 2020 2063 6f64 6520 3d20 7365 6c66       code = self
-00017a80: 2e73 6166 655f 6375 7272 656e 6379 5f63  .safe_currency_c
-00017a90: 6f64 6528 6375 7272 656e 6379 4964 2c20  ode(currencyId, 
-00017aa0: 6375 7272 656e 6379 290a 2020 2020 2020  currency).      
-00017ab0: 2020 6164 6472 6573 7320 3d20 7365 6c66    address = self
-00017ac0: 2e73 6166 655f 7374 7269 6e67 2874 7261  .safe_string(tra
-00017ad0: 6e73 6163 7469 6f6e 2c20 2769 6e66 6f27  nsaction, 'info'
-00017ae0: 290a 2020 2020 2020 2020 616d 6f75 6e74  ).        amount
-00017af0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
-00017b00: 6265 7228 7472 616e 7361 6374 696f 6e2c  ber(transaction,
-00017b10: 2027 616d 6f75 6e74 2729 0a20 2020 2020   'amount').     
-00017b20: 2020 2073 7461 7475 7320 3d20 7365 6c66     status = self
-00017b30: 2e70 6172 7365 5f74 7261 6e73 6163 7469  .parse_transacti
-00017b40: 6f6e 5f73 7461 7475 7328 7365 6c66 2e73  on_status(self.s
-00017b50: 6166 655f 7374 7269 6e67 2874 7261 6e73  afe_string(trans
-00017b60: 6163 7469 6f6e 2c20 2773 7461 7475 7327  action, 'status'
-00017b70: 2929 0a20 2020 2020 2020 2073 7461 7475  )).        statu
-00017b80: 7350 726f 7020 3d20 7365 6c66 2e73 6166  sProp = self.saf
-00017b90: 655f 7374 7269 6e67 2874 7261 6e73 6163  e_string(transac
-00017ba0: 7469 6f6e 2c20 2773 7461 7475 732d 7072  tion, 'status-pr
-00017bb0: 6f70 2729 0a20 2020 2020 2020 2069 734f  op').        isO
-00017bc0: 6e48 6f6c 6444 6570 6f73 6974 203d 2073  nHoldDeposit = s
-00017bd0: 7461 7475 7350 726f 7020 3d3d 2027 6f6e  tatusProp == 'on
-00017be0: 2d68 6f6c 6427 0a20 2020 2020 2020 2069  -hold'.        i
-00017bf0: 7343 616e 6365 6c6c 6174 696f 6e52 6571  sCancellationReq
-00017c00: 7565 7374 203d 2073 7461 7475 7350 726f  uest = statusPro
-00017c10: 7020 3d3d 2027 6361 6e63 656c 2d70 656e  p == 'cancel-pen
-00017c20: 6469 6e67 270a 2020 2020 2020 2020 6973  ding'.        is
-00017c30: 4f6e 486f 6c64 5769 7468 6472 6177 616c  OnHoldWithdrawal
-00017c40: 203d 2073 7461 7475 7350 726f 7020 3d3d   = statusProp ==
-00017c50: 2027 6f6e 686f 6c64 270a 2020 2020 2020   'onhold'.      
-00017c60: 2020 6966 2069 734f 6e48 6f6c 6444 6570    if isOnHoldDep
-00017c70: 6f73 6974 206f 7220 6973 4361 6e63 656c  osit or isCancel
-00017c80: 6c61 7469 6f6e 5265 7175 6573 7420 6f72  lationRequest or
-00017c90: 2069 734f 6e48 6f6c 6457 6974 6864 7261   isOnHoldWithdra
-00017ca0: 7761 6c3a 0a20 2020 2020 2020 2020 2020  wal:.           
-00017cb0: 2073 7461 7475 7320 3d20 2770 656e 6469   status = 'pendi
-00017cc0: 6e67 270a 2020 2020 2020 2020 7479 7065  ng'.        type
-00017cd0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-00017ce0: 696e 6728 7472 616e 7361 6374 696f 6e2c  ing(transaction,
-00017cf0: 2027 7479 7065 2729 2020 2320 696e 6a65   'type')  # inje
-00017d00: 6374 6564 2066 726f 6d20 7468 6520 6f75  cted from the ou
-00017d10: 7473 6964 650a 2020 2020 2020 2020 6665  tside.        fe
-00017d20: 6543 6f73 7420 3d20 7365 6c66 2e73 6166  eCost = self.saf
-00017d30: 655f 6e75 6d62 6572 2874 7261 6e73 6163  e_number(transac
-00017d40: 7469 6f6e 2c20 2766 6565 2729 0a20 2020  tion, 'fee').   
-00017d50: 2020 2020 2069 6620 6665 6543 6f73 7420       if feeCost 
-00017d60: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
-00017d70: 2020 2020 2069 6620 7479 7065 203d 3d20       if type == 
-00017d80: 2764 6570 6f73 6974 273a 0a20 2020 2020  'deposit':.     
-00017d90: 2020 2020 2020 2020 2020 2066 6565 436f             feeCo
-00017da0: 7374 203d 2030 0a20 2020 2020 2020 2072  st = 0.        r
-00017db0: 6574 7572 6e20 7b0a 2020 2020 2020 2020  eturn {.        
-00017dc0: 2020 2020 2769 6e66 6f27 3a20 7472 616e      'info': tran
-00017dd0: 7361 6374 696f 6e2c 0a20 2020 2020 2020  saction,.       
-00017de0: 2020 2020 2027 6964 273a 2069 642c 0a20       'id': id,. 
-00017df0: 2020 2020 2020 2020 2020 2027 6375 7272             'curr
-00017e00: 656e 6379 273a 2063 6f64 652c 0a20 2020  ency': code,.   
-00017e10: 2020 2020 2020 2020 2027 616d 6f75 6e74           'amount
-00017e20: 273a 2061 6d6f 756e 742c 0a20 2020 2020  ': amount,.     
-00017e30: 2020 2020 2020 2027 6e65 7477 6f72 6b27         'network'
-00017e40: 3a20 7365 6c66 2e70 6172 7365 5f6e 6574  : self.parse_net
-00017e50: 776f 726b 2873 656c 662e 7361 6665 5f73  work(self.safe_s
-00017e60: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
-00017e70: 6e2c 2027 6e65 7477 6f72 6b27 2929 2c0a  n, 'network')),.
-00017e80: 2020 2020 2020 2020 2020 2020 2761 6464              'add
-00017e90: 7265 7373 273a 2061 6464 7265 7373 2c0a  ress': address,.
-00017ea0: 2020 2020 2020 2020 2020 2020 2761 6464              'add
-00017eb0: 7265 7373 546f 273a 204e 6f6e 652c 0a20  ressTo': None,. 
-00017ec0: 2020 2020 2020 2020 2020 2027 6164 6472             'addr
-00017ed0: 6573 7346 726f 6d27 3a20 4e6f 6e65 2c0a  essFrom': None,.
-00017ee0: 2020 2020 2020 2020 2020 2020 2774 6167              'tag
-00017ef0: 273a 204e 6f6e 652c 0a20 2020 2020 2020  ': None,.       
-00017f00: 2020 2020 2027 7461 6754 6f27 3a20 4e6f       'tagTo': No
-00017f10: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
-00017f20: 2774 6167 4672 6f6d 273a 204e 6f6e 652c  'tagFrom': None,
-00017f30: 0a20 2020 2020 2020 2020 2020 2027 7374  .            'st
-00017f40: 6174 7573 273a 2073 7461 7475 732c 0a20  atus': status,. 
-00017f50: 2020 2020 2020 2020 2020 2027 7479 7065             'type
-00017f60: 273a 2074 7970 652c 0a20 2020 2020 2020  ': type,.       
-00017f70: 2020 2020 2027 7570 6461 7465 6427 3a20       'updated': 
-00017f80: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
-00017f90: 2020 2774 7869 6427 3a20 7478 6964 2c0a    'txid': txid,.
-00017fa0: 2020 2020 2020 2020 2020 2020 2774 696d              'tim
-00017fb0: 6573 7461 6d70 273a 2074 696d 6573 7461  estamp': timesta
-00017fc0: 6d70 2c0a 2020 2020 2020 2020 2020 2020  mp,.            
-00017fd0: 2764 6174 6574 696d 6527 3a20 7365 6c66  'datetime': self
-00017fe0: 2e69 736f 3836 3031 2874 696d 6573 7461  .iso8601(timesta
-00017ff0: 6d70 292c 0a20 2020 2020 2020 2020 2020  mp),.           
-00018000: 2027 636f 6d6d 656e 7427 3a20 4e6f 6e65   'comment': None
-00018010: 2c0a 2020 2020 2020 2020 2020 2020 2769  ,.            'i
-00018020: 6e74 6572 6e61 6c27 3a20 4e6f 6e65 2c0a  nternal': None,.
-00018030: 2020 2020 2020 2020 2020 2020 2766 6565              'fee
-00018040: 273a 207b 0a20 2020 2020 2020 2020 2020  ': {.           
-00018050: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
-00018060: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
-00018070: 2020 2020 2020 2027 636f 7374 273a 2066         'cost': f
-00018080: 6565 436f 7374 2c0a 2020 2020 2020 2020  eeCost,.        
-00018090: 2020 2020 7d2c 0a20 2020 2020 2020 207d      },.        }
-000180a0: 0a0a 2020 2020 6465 6620 7061 7273 655f  ..    def parse_
-000180b0: 7472 616e 7361 6374 696f 6e73 5f62 795f  transactions_by_
-000180c0: 7479 7065 2873 656c 662c 2074 7970 652c  type(self, type,
-000180d0: 2074 7261 6e73 6163 7469 6f6e 732c 2063   transactions, c
-000180e0: 6f64 653a 2053 7472 203d 204e 6f6e 652c  ode: Str = None,
-000180f0: 2073 696e 6365 3a20 496e 7420 3d20 4e6f   since: Int = No
-00018100: 6e65 2c20 6c69 6d69 743a 2049 6e74 203d  ne, limit: Int =
-00018110: 204e 6f6e 6529 3a0a 2020 2020 2020 2020   None):.        
-00018120: 7265 7375 6c74 203d 205b 5d0a 2020 2020  result = [].    
-00018130: 2020 2020 666f 7220 6920 696e 2072 616e      for i in ran
-00018140: 6765 2830 2c20 6c65 6e28 7472 616e 7361  ge(0, len(transa
-00018150: 6374 696f 6e73 2929 3a0a 2020 2020 2020  ctions)):.      
-00018160: 2020 2020 2020 7472 616e 7361 6374 696f        transactio
-00018170: 6e20 3d20 7365 6c66 2e70 6172 7365 5f74  n = self.parse_t
-00018180: 7261 6e73 6163 7469 6f6e 2873 656c 662e  ransaction(self.
-00018190: 6578 7465 6e64 287b 0a20 2020 2020 2020  extend({.       
-000181a0: 2020 2020 2020 2020 2027 7479 7065 273a           'type':
-000181b0: 2074 7970 652c 0a20 2020 2020 2020 2020   type,.         
-000181c0: 2020 207d 2c20 7472 616e 7361 6374 696f     }, transactio
-000181d0: 6e73 5b69 5d29 290a 2020 2020 2020 2020  ns[i])).        
-000181e0: 2020 2020 7265 7375 6c74 2e61 7070 656e      result.appen
-000181f0: 6428 7472 616e 7361 6374 696f 6e29 0a20  d(transaction). 
-00018200: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00018210: 6c66 2e66 696c 7465 725f 6279 5f63 7572  lf.filter_by_cur
-00018220: 7265 6e63 795f 7369 6e63 655f 6c69 6d69  rency_since_limi
-00018230: 7428 7265 7375 6c74 2c20 636f 6465 2c20  t(result, code, 
-00018240: 7369 6e63 652c 206c 696d 6974 290a 0a20  since, limit).. 
-00018250: 2020 2064 6566 2066 6574 6368 5f64 6570     def fetch_dep
-00018260: 6f73 6974 7328 7365 6c66 2c20 636f 6465  osits(self, code
-00018270: 3a20 5374 7220 3d20 4e6f 6e65 2c20 7369  : Str = None, si
-00018280: 6e63 653a 2049 6e74 203d 204e 6f6e 652c  nce: Int = None,
-00018290: 206c 696d 6974 3a20 496e 7420 3d20 4e6f   limit: Int = No
-000182a0: 6e65 2c20 7061 7261 6d73 3d7b 7d29 202d  ne, params={}) -
-000182b0: 3e20 4c69 7374 5b54 7261 6e73 6163 7469  > List[Transacti
-000182c0: 6f6e 5d3a 0a20 2020 2020 2020 2022 2222  on]:.        """
-000182d0: 0a20 2020 2020 2020 2066 6574 6368 2061  .        fetch a
-000182e0: 6c6c 2064 6570 6f73 6974 7320 6d61 6465  ll deposits made
-000182f0: 2074 6f20 616e 2061 6363 6f75 6e74 0a20   to an account. 
-00018300: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
-00018310: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
-00018320: 2e63 6f6d 2f72 6573 742f 2374 6167 2f46  .com/rest/#tag/F
-00018330: 756e 6469 6e67 2f6f 7065 7261 7469 6f6e  unding/operation
-00018340: 2f67 6574 5374 6174 7573 5265 6365 6e74  /getStatusRecent
-00018350: 4465 706f 7369 7473 0a20 2020 2020 2020  Deposits.       
-00018360: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
-00018370: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
-00018380: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
-00018390: 3a70 6172 616d 2069 6e74 205b 7369 6e63  :param int [sinc
-000183a0: 655d 3a20 7468 6520 6561 726c 6965 7374  e]: the earliest
-000183b0: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
-000183c0: 6574 6368 2064 6570 6f73 6974 7320 666f  etch deposits fo
-000183d0: 720a 2020 2020 2020 2020 3a70 6172 616d  r.        :param
-000183e0: 2069 6e74 205b 6c69 6d69 745d 3a20 7468   int [limit]: th
-000183f0: 6520 6d61 7869 6d75 6d20 6e75 6d62 6572  e maximum number
-00018400: 206f 6620 6465 706f 7369 7473 2073 7472   of deposits str
-00018410: 7563 7475 7265 7320 746f 2072 6574 7269  uctures to retri
-00018420: 6576 650a 2020 2020 2020 2020 3a70 6172  eve.        :par
-00018430: 616d 2064 6963 7420 5b70 6172 616d 735d  am dict [params]
-00018440: 3a20 6578 7472 6120 7061 7261 6d65 7465  : extra paramete
-00018450: 7273 2073 7065 6369 6669 6320 746f 2074  rs specific to t
-00018460: 6865 2065 7863 6861 6e67 6520 4150 4920  he exchange API 
-00018470: 656e 6470 6f69 6e74 0a20 2020 2020 2020  endpoint.       
-00018480: 203a 7265 7475 726e 7320 6469 6374 5b5d   :returns dict[]
-00018490: 3a20 6120 6c69 7374 206f 6620 6074 7261  : a list of `tra
-000184a0: 6e73 6163 7469 6f6e 2073 7472 7563 7475  nsaction structu
-000184b0: 7265 7320 3c68 7474 7073 3a2f 2f64 6f63  res <https://doc
-000184c0: 732e 6363 7874 2e63 6f6d 2f23 2f3f 6964  s.ccxt.com/#/?id
-000184d0: 3d74 7261 6e73 6163 7469 6f6e 2d73 7472  =transaction-str
-000184e0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-000184f0: 2022 2222 0a20 2020 2020 2020 2023 2068   """.        # h
-00018500: 7474 7073 3a2f 2f77 7777 2e6b 7261 6b65  ttps://www.krake
-00018510: 6e2e 636f 6d2f 656e 2d75 732f 6865 6c70  n.com/en-us/help
-00018520: 2f61 7069 2364 6570 6f73 6974 2d73 7461  /api#deposit-sta
-00018530: 7475 730a 2020 2020 2020 2020 6966 2063  tus.        if c
-00018540: 6f64 6520 6973 204e 6f6e 653a 0a20 2020  ode is None:.   
-00018550: 2020 2020 2020 2020 2072 6169 7365 2041           raise A
-00018560: 7267 756d 656e 7473 5265 7175 6972 6564  rgumentsRequired
-00018570: 2873 656c 662e 6964 202b 2027 2066 6574  (self.id + ' fet
-00018580: 6368 4465 706f 7369 7473 2829 2072 6571  chDeposits() req
-00018590: 7569 7265 7320 6120 6375 7272 656e 6379  uires a currency
-000185a0: 2063 6f64 6520 6172 6775 6d65 6e74 2729   code argument')
-000185b0: 0a20 2020 2020 2020 2073 656c 662e 6c6f  .        self.lo
-000185c0: 6164 5f6d 6172 6b65 7473 2829 0a20 2020  ad_markets().   
-000185d0: 2020 2020 2063 7572 7265 6e63 7920 3d20       currency = 
-000185e0: 7365 6c66 2e63 7572 7265 6e63 7928 636f  self.currency(co
-000185f0: 6465 290a 2020 2020 2020 2020 7265 7175  de).        requ
-00018600: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00018610: 2020 2020 2761 7373 6574 273a 2063 7572      'asset': cur
-00018620: 7265 6e63 795b 2769 6427 5d2c 0a20 2020  rency['id'],.   
-00018630: 2020 2020 207d 0a20 2020 2020 2020 2069       }.        i
-00018640: 6620 7369 6e63 6520 6973 206e 6f74 204e  f since is not N
-00018650: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00018660: 2072 6571 7565 7374 5b27 7374 6172 7427   request['start'
-00018670: 5d20 3d20 7369 6e63 650a 2020 2020 2020  ] = since.      
-00018680: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
-00018690: 662e 7072 6976 6174 6550 6f73 7444 6570  f.privatePostDep
-000186a0: 6f73 6974 5374 6174 7573 2873 656c 662e  ositStatus(self.
-000186b0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
-000186c0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
-000186d0: 2023 0a20 2020 2020 2020 2023 2020 2020   #.        #    
-000186e0: 207b 2065 7272 6f72 3a20 5b5d 2c0a 2020   { error: [],.  
-000186f0: 2020 2020 2020 2320 2020 2020 2020 2272        #       "r
-00018700: 6573 756c 7422 3a20 5b7b 226d 6574 686f  esult": [{"metho
-00018710: 6422 3a20 2245 7468 6572 2848 6578 2922  d": "Ether(Hex)"
-00018720: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00016c80: 2022 6d69 7363 223a 2222 2c0a 2020 2020   "misc":"",.    
+00016c90: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00016ca0: 2020 2020 2020 2020 2020 226f 666c 6167            "oflag
+00016cb0: 7322 3a22 6663 6971 220a 2020 2020 2020  s":"fciq".      
+00016cc0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00016cd0: 2020 2020 7d2c 0a20 2020 2020 2020 2023      },.        #
+00016ce0: 2020 2020 2020 2020 2020 2020 207d 2c0a               },.
+00016cf0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00016d00: 2020 2020 2020 2263 6f75 6e74 223a 3136        "count":16
+00016d10: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00016d20: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+00016d30: 2020 207d 0a20 2020 2020 2020 2023 0a20     }.        #. 
+00016d40: 2020 2020 2020 206d 6172 6b65 7420 3d20         market = 
+00016d50: 4e6f 6e65 0a20 2020 2020 2020 2069 6620  None.        if 
+00016d60: 7379 6d62 6f6c 2069 7320 6e6f 7420 4e6f  symbol is not No
+00016d70: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00016d80: 6d61 726b 6574 203d 2073 656c 662e 6d61  market = self.ma
+00016d90: 726b 6574 2873 796d 626f 6c29 0a20 2020  rket(symbol).   
+00016da0: 2020 2020 2072 6573 756c 7420 3d20 7365       result = se
+00016db0: 6c66 2e73 6166 655f 6469 6374 2872 6573  lf.safe_dict(res
+00016dc0: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
+00016dd0: 207b 7d29 0a20 2020 2020 2020 206f 7264   {}).        ord
+00016de0: 6572 7320 3d20 7365 6c66 2e73 6166 655f  ers = self.safe_
+00016df0: 6469 6374 2872 6573 756c 742c 2027 636c  dict(result, 'cl
+00016e00: 6f73 6564 272c 207b 7d29 0a20 2020 2020  osed', {}).     
+00016e10: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
+00016e20: 6172 7365 5f6f 7264 6572 7328 6f72 6465  arse_orders(orde
+00016e30: 7273 2c20 6d61 726b 6574 2c20 7369 6e63  rs, market, sinc
+00016e40: 652c 206c 696d 6974 290a 0a20 2020 2064  e, limit)..    d
+00016e50: 6566 2070 6172 7365 5f74 7261 6e73 6163  ef parse_transac
+00016e60: 7469 6f6e 5f73 7461 7475 7328 7365 6c66  tion_status(self
+00016e70: 2c20 7374 6174 7573 293a 0a20 2020 2020  , status):.     
+00016e80: 2020 2023 2049 4645 5820 7472 616e 7361     # IFEX transa
+00016e90: 6374 696f 6e20 7374 6174 6573 0a20 2020  ction states.   
+00016ea0: 2020 2020 2073 7461 7475 7365 7320 3d20       statuses = 
+00016eb0: 7b0a 2020 2020 2020 2020 2020 2020 2749  {.            'I
+00016ec0: 6e69 7469 616c 273a 2027 7065 6e64 696e  nitial': 'pendin
+00016ed0: 6727 2c0a 2020 2020 2020 2020 2020 2020  g',.            
+00016ee0: 2750 656e 6469 6e67 273a 2027 7065 6e64  'Pending': 'pend
+00016ef0: 696e 6727 2c0a 2020 2020 2020 2020 2020  ing',.          
+00016f00: 2020 2753 7563 6365 7373 273a 2027 6f6b    'Success': 'ok
+00016f10: 272c 0a20 2020 2020 2020 2020 2020 2027  ',.            '
+00016f20: 5365 7474 6c65 6427 3a20 2770 656e 6469  Settled': 'pendi
+00016f30: 6e67 272c 0a20 2020 2020 2020 2020 2020  ng',.           
+00016f40: 2027 4661 696c 7572 6527 3a20 2766 6169   'Failure': 'fai
+00016f50: 6c65 6427 2c0a 2020 2020 2020 2020 2020  led',.          
+00016f60: 2020 2750 6172 7469 616c 273a 2027 6f6b    'Partial': 'ok
+00016f70: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
+00016f80: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00016f90: 2e73 6166 655f 7374 7269 6e67 2873 7461  .safe_string(sta
+00016fa0: 7475 7365 732c 2073 7461 7475 732c 2073  tuses, status, s
+00016fb0: 7461 7475 7329 0a0a 2020 2020 6465 6620  tatus)..    def 
+00016fc0: 7061 7273 655f 6e65 7477 6f72 6b28 7365  parse_network(se
+00016fd0: 6c66 2c20 6e65 7477 6f72 6b29 3a0a 2020  lf, network):.  
+00016fe0: 2020 2020 2020 7769 7468 6472 6177 4d65        withdrawMe
+00016ff0: 7468 6f64 7320 3d20 7365 6c66 2e73 6166  thods = self.saf
+00017000: 655f 7661 6c75 6528 7365 6c66 2e6f 7074  e_value(self.opt
+00017010: 696f 6e73 2c20 2777 6974 6864 7261 774d  ions, 'withdrawM
+00017020: 6574 686f 6473 272c 207b 7d29 0a20 2020  ethods', {}).   
+00017030: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00017040: 2e73 6166 655f 7374 7269 6e67 2877 6974  .safe_string(wit
+00017050: 6864 7261 774d 6574 686f 6473 2c20 6e65  hdrawMethods, ne
+00017060: 7477 6f72 6b2c 206e 6574 776f 726b 290a  twork, network).
+00017070: 0a20 2020 2064 6566 2070 6172 7365 5f74  .    def parse_t
+00017080: 7261 6e73 6163 7469 6f6e 2873 656c 662c  ransaction(self,
+00017090: 2074 7261 6e73 6163 7469 6f6e 2c20 6375   transaction, cu
+000170a0: 7272 656e 6379 3a20 4375 7272 656e 6379  rrency: Currency
+000170b0: 203d 204e 6f6e 6529 202d 3e20 5472 616e   = None) -> Tran
+000170c0: 7361 6374 696f 6e3a 0a20 2020 2020 2020  saction:.       
+000170d0: 2023 0a20 2020 2020 2020 2023 2066 6574   #.        # fet
+000170e0: 6368 4465 706f 7369 7473 0a20 2020 2020  chDeposits.     
+000170f0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
+00017100: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
+00017110: 2020 2020 2020 2022 6d65 7468 6f64 223a         "method":
+00017120: 2022 4574 6865 7228 4865 7829 222c 0a20   "Ether(Hex)",. 
+00017130: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00017140: 2022 6163 6c61 7373 223a 2022 6375 7272   "aclass": "curr
+00017150: 656e 6379 222c 0a20 2020 2020 2020 2023  ency",.        #
+00017160: 2020 2020 2020 2020 2022 6173 7365 7422           "asset"
+00017170: 3a20 2258 4554 4822 2c0a 2020 2020 2020  : "XETH",.      
+00017180: 2020 2320 2020 2020 2020 2020 2272 6566    #         "ref
+00017190: 6964 223a 2022 5132 4341 4e4b 4c2d 4c42  id": "Q2CANKL-LB
+000171a0: 4656 4545 2d55 3459 3257 5122 2c0a 2020  FVEE-U4Y2WQ",.  
+000171b0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000171c0: 2274 7869 6422 3a20 2230 7835 3766 6437  "txid": "0x57fd7
+000171d0: 3034 6461 6231 6137 3363 3230 6532 3463  04dab1a73c20e24c
+000171e0: 3836 3936 3039 3962 3639 3564 3539 3639  8696099b695d5969
+000171f0: 3234 6234 3031 6232 3631 3531 3363 6664  24b401b261513cfd
+00017200: 6162 3233 e280 a622 2c0a 2020 2020 2020  ab23...",.      
+00017210: 2020 2320 2020 2020 2020 2020 2269 6e66    #         "inf
+00017220: 6f22 3a20 2230 7836 3135 6639 6261 3761  o": "0x615f9ba7a
+00017230: 3935 3735 6230 6162 3464 3537 3162 3262  9575b0ab4d571b2b
+00017240: 3336 6231 6233 3234 6264 3833 3239 3022  36b1b324bd83290"
+00017250: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00017260: 2020 2020 2261 6d6f 756e 7422 3a20 2237      "amount": "7
+00017270: 2e39 3939 3932 3537 3930 3022 2c0a 2020  .9999257900",.  
+00017280: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00017290: 2266 6565 223a 2022 302e 3030 3030 3030  "fee": "0.000000
+000172a0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000172b0: 2020 2020 2020 2020 2022 7469 6d65 223a           "time":
+000172c0: 2020 3135 3239 3232 3332 3132 2c0a 2020    1529223212,.  
+000172d0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000172e0: 2273 7461 7475 7322 3a20 2253 7563 6365  "status": "Succe
+000172f0: 7373 220a 2020 2020 2020 2020 2320 2020  ss".        #   
+00017300: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00017310: 2020 2020 2020 2320 7468 6572 6520 6361        # there ca
+00017320: 6e20 6265 2061 6e20 6164 6469 7469 6f6e  n be an addition
+00017330: 616c 2027 7374 6174 7573 2d70 726f 7027  al 'status-prop'
+00017340: 2066 6965 6c64 2070 7265 7365 6e74 0a20   field present. 
+00017350: 2020 2020 2020 2023 2064 6570 6f73 6974         # deposit
+00017360: 2070 656e 6469 6e67 2072 6576 6965 7720   pending review 
+00017370: 6279 2065 7863 6861 6e67 6520 3d3e 2027  by exchange => '
+00017380: 6f6e 2d68 6f6c 6427 0a20 2020 2020 2020  on-hold'.       
+00017390: 2023 2074 6865 2064 6570 6f73 6974 2069   # the deposit i
+000173a0: 7320 696e 6974 6961 7465 6420 6279 2074  s initiated by t
+000173b0: 6865 2065 7863 6861 6e67 6520 3d3e 2027  he exchange => '
+000173c0: 7265 7475 726e 270a 2020 2020 2020 2020  return'.        
+000173d0: 230a 2020 2020 2020 2020 2320 2020 2020  #.        #     
+000173e0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+000173f0: 2020 2020 2020 2274 7970 6522 3a20 2764        "type": 'd
+00017400: 6570 6f73 6974 272c 0a20 2020 2020 2020  eposit',.       
+00017410: 2023 2020 2020 2020 2020 2020 226d 6574   #          "met
+00017420: 686f 6422 3a20 2746 6964 6f72 2042 616e  hod": 'Fidor Ban
+00017430: 6b20 4147 2857 6972 6520 5472 616e 7366  k AG(Wire Transf
+00017440: 6572 2927 2c0a 2020 2020 2020 2020 2320  er)',.        # 
+00017450: 2020 2020 2020 2020 2022 6163 6c61 7373           "aclass
+00017460: 223a 2027 6375 7272 656e 6379 272c 0a20  ": 'currency',. 
+00017470: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00017480: 2020 2261 7373 6574 223a 2027 5a45 5552    "asset": 'ZEUR
+00017490: 272c 0a20 2020 2020 2020 2023 2020 2020  ',.        #    
+000174a0: 2020 2020 2020 2272 6566 6964 223a 2027        "refid": '
+000174b0: 7878 782d 7878 782d 7878 7827 2c0a 2020  xxx-xxx-xxx',.  
+000174c0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+000174d0: 2022 7478 6964 223a 2027 3132 3334 3132   "txid": '123412
+000174e0: 3334 272c 0a20 2020 2020 2020 2023 2020  34',.        #  
+000174f0: 2020 2020 2020 2020 2269 6e66 6f22 3a20          "info": 
+00017500: 2742 414e 4b43 4f44 4558 5858 272c 0a20  'BANKCODEXXX',. 
+00017510: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00017520: 2020 2261 6d6f 756e 7422 3a20 2733 3837    "amount": '387
+00017530: 3639 2e30 3827 2c0a 2020 2020 2020 2020  69.08',.        
+00017540: 2320 2020 2020 2020 2020 2022 6665 6522  #          "fee"
+00017550: 3a20 2730 2e30 3030 3027 2c0a 2020 2020  : '0.0000',.    
+00017560: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
+00017570: 7469 6d65 223a 2031 3634 3433 3036 3535  time": 164430655
+00017580: 322c 0a20 2020 2020 2020 2023 2020 2020  2,.        #    
+00017590: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+000175a0: 2753 7563 6365 7373 272c 0a20 2020 2020  'Success',.     
+000175b0: 2020 2023 2020 2020 2020 2020 2020 7374     #          st
+000175c0: 6174 7573 2d70 726f 703a 2027 6f6e 2d68  atus-prop: 'on-h
+000175d0: 6f6c 6427 0a20 2020 2020 2020 2023 2020  old'.        #  
+000175e0: 2020 2020 7d0a 2020 2020 2020 2020 230a      }.        #.
+000175f0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
+00017600: 2020 2320 6665 7463 6857 6974 6864 7261    # fetchWithdra
+00017610: 7761 6c73 0a20 2020 2020 2020 2023 0a20  wals.        #. 
+00017620: 2020 2020 2020 2023 2020 2020 207b 0a20         #     {. 
+00017630: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00017640: 2022 6d65 7468 6f64 223a 2022 4574 6865   "method": "Ethe
+00017650: 7222 2c0a 2020 2020 2020 2020 2320 2020  r",.        #   
+00017660: 2020 2020 2020 2261 636c 6173 7322 3a20        "aclass": 
+00017670: 2263 7572 7265 6e63 7922 2c0a 2020 2020  "currency",.    
+00017680: 2020 2020 2320 2020 2020 2020 2020 2261      #         "a
+00017690: 7373 6574 223a 2022 5845 5448 222c 0a20  sset": "XETH",. 
+000176a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000176b0: 2022 7265 6669 6422 3a20 2241 3242 4633   "refid": "A2BF3
+000176c0: 3453 2d4f 374c 424e 512d 5545 3459 344f  4S-O7LBNQ-UE4Y4O
+000176d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000176e0: 2020 2020 2022 7478 6964 223a 2022 3078       "txid": "0x
+000176f0: 3238 3862 3833 6336 6230 3930 3464 3834  288b83c6b0904d84
+00017700: 3030 6566 3434 6531 6339 6532 3138 3762  00ef44e1c9e2187b
+00017710: 3563 3866 3765 6133 6438 3338 3232 3264  5c8f7ea3d838222d
+00017720: 3533 6637 3031 6131 3562 3563 3237 3464  53f701a15b5c274d
+00017730: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00017740: 2020 2020 2022 696e 666f 223a 2022 3078       "info": "0x
+00017750: 3763 6232 3735 6135 6530 3762 6139 3433  7cb275a5e07ba943
+00017760: 6665 6539 3732 6531 3635 6438 3064 6161  fee972e165d80daa
+00017770: 3637 6362 3264 6430 222c 0a20 2020 2020  67cb2dd0",.     
+00017780: 2020 2023 2020 2020 2020 2020 2022 616d     #         "am
+00017790: 6f75 6e74 223a 2022 392e 3939 3530 3030  ount": "9.995000
+000177a0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000177b0: 2020 2020 2020 2020 2022 6665 6522 3a20           "fee": 
+000177c0: 2230 2e30 3035 3030 3030 3030 3022 2c0a  "0.0050000000",.
+000177d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000177e0: 2020 2274 696d 6522 3a20 2031 3533 3034    "time":  15304
+000177f0: 3831 3735 302c 0a20 2020 2020 2020 2023  81750,.        #
+00017800: 2020 2020 2020 2020 2022 7374 6174 7573           "status
+00017810: 223a 2022 5375 6363 6573 7322 0a20 2020  ": "Success".   
+00017820: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
+00017830: 6b65 7922 3a22 4875 6f62 6920 7761 6c6c  key":"Huobi wall
+00017840: 6574 222c 0a20 2020 2020 2020 2023 2020  et",.        #  
+00017850: 2020 2020 2020 2022 6e65 7477 6f72 6b22         "network"
+00017860: 3a22 5472 6f6e 220a 2020 2020 2020 2020  :"Tron".        
+00017870: 2320 2020 2020 2020 2020 7374 6174 7573  #         status
+00017880: 2d70 726f 703a 2027 6f6e 2d68 6f6c 6427  -prop: 'on-hold'
+00017890: 2020 2320 7365 6c66 2066 6965 6c64 206d    # self field m
+000178a0: 6967 6874 206e 6f74 2062 6520 7072 6573  ight not be pres
+000178b0: 656e 7420 696e 2073 6f6d 6520 6361 7365  ent in some case
+000178c0: 730a 2020 2020 2020 2020 2320 2020 2020  s.        #     
+000178d0: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+000178e0: 2020 2020 2320 7769 7468 6472 6177 0a20      # withdraw. 
+000178f0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+00017900: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+00017910: 2023 2020 2020 2020 2020 2022 7265 6669   #         "refi
+00017920: 6422 3a20 2241 4742 534f 3654 2d55 464d  d": "AGBSO6T-UFM
+00017930: 5454 512d 4937 4b47 5336 220a 2020 2020  TTQ-I7KGS6".    
+00017940: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
+00017950: 2020 2020 230a 2020 2020 2020 2020 6964      #.        id
+00017960: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00017970: 696e 6728 7472 616e 7361 6374 696f 6e2c  ing(transaction,
+00017980: 2027 7265 6669 6427 290a 2020 2020 2020   'refid').      
+00017990: 2020 7478 6964 203d 2073 656c 662e 7361    txid = self.sa
+000179a0: 6665 5f73 7472 696e 6728 7472 616e 7361  fe_string(transa
+000179b0: 6374 696f 6e2c 2027 7478 6964 2729 0a20  ction, 'txid'). 
+000179c0: 2020 2020 2020 2074 696d 6573 7461 6d70         timestamp
+000179d0: 203d 2073 656c 662e 7361 6665 5f74 696d   = self.safe_tim
+000179e0: 6573 7461 6d70 2874 7261 6e73 6163 7469  estamp(transacti
+000179f0: 6f6e 2c20 2774 696d 6527 290a 2020 2020  on, 'time').    
+00017a00: 2020 2020 6375 7272 656e 6379 4964 203d      currencyId =
+00017a10: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+00017a20: 6728 7472 616e 7361 6374 696f 6e2c 2027  g(transaction, '
+00017a30: 6173 7365 7427 290a 2020 2020 2020 2020  asset').        
+00017a40: 636f 6465 203d 2073 656c 662e 7361 6665  code = self.safe
+00017a50: 5f63 7572 7265 6e63 795f 636f 6465 2863  _currency_code(c
+00017a60: 7572 7265 6e63 7949 642c 2063 7572 7265  urrencyId, curre
+00017a70: 6e63 7929 0a20 2020 2020 2020 2061 6464  ncy).        add
+00017a80: 7265 7373 203d 2073 656c 662e 7361 6665  ress = self.safe
+00017a90: 5f73 7472 696e 6728 7472 616e 7361 6374  _string(transact
+00017aa0: 696f 6e2c 2027 696e 666f 2729 0a20 2020  ion, 'info').   
+00017ab0: 2020 2020 2061 6d6f 756e 7420 3d20 7365       amount = se
+00017ac0: 6c66 2e73 6166 655f 6e75 6d62 6572 2874  lf.safe_number(t
+00017ad0: 7261 6e73 6163 7469 6f6e 2c20 2761 6d6f  ransaction, 'amo
+00017ae0: 756e 7427 290a 2020 2020 2020 2020 7374  unt').        st
+00017af0: 6174 7573 203d 2073 656c 662e 7061 7273  atus = self.pars
+00017b00: 655f 7472 616e 7361 6374 696f 6e5f 7374  e_transaction_st
+00017b10: 6174 7573 2873 656c 662e 7361 6665 5f73  atus(self.safe_s
+00017b20: 7472 696e 6728 7472 616e 7361 6374 696f  tring(transactio
+00017b30: 6e2c 2027 7374 6174 7573 2729 290a 2020  n, 'status')).  
+00017b40: 2020 2020 2020 7374 6174 7573 5072 6f70        statusProp
+00017b50: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
+00017b60: 696e 6728 7472 616e 7361 6374 696f 6e2c  ing(transaction,
+00017b70: 2027 7374 6174 7573 2d70 726f 7027 290a   'status-prop').
+00017b80: 2020 2020 2020 2020 6973 4f6e 486f 6c64          isOnHold
+00017b90: 4465 706f 7369 7420 3d20 7374 6174 7573  Deposit = status
+00017ba0: 5072 6f70 203d 3d20 276f 6e2d 686f 6c64  Prop == 'on-hold
+00017bb0: 270a 2020 2020 2020 2020 6973 4361 6e63  '.        isCanc
+00017bc0: 656c 6c61 7469 6f6e 5265 7175 6573 7420  ellationRequest 
+00017bd0: 3d20 7374 6174 7573 5072 6f70 203d 3d20  = statusProp == 
+00017be0: 2763 616e 6365 6c2d 7065 6e64 696e 6727  'cancel-pending'
+00017bf0: 0a20 2020 2020 2020 2069 734f 6e48 6f6c  .        isOnHol
+00017c00: 6457 6974 6864 7261 7761 6c20 3d20 7374  dWithdrawal = st
+00017c10: 6174 7573 5072 6f70 203d 3d20 276f 6e68  atusProp == 'onh
+00017c20: 6f6c 6427 0a20 2020 2020 2020 2069 6620  old'.        if 
+00017c30: 6973 4f6e 486f 6c64 4465 706f 7369 7420  isOnHoldDeposit 
+00017c40: 6f72 2069 7343 616e 6365 6c6c 6174 696f  or isCancellatio
+00017c50: 6e52 6571 7565 7374 206f 7220 6973 4f6e  nRequest or isOn
+00017c60: 486f 6c64 5769 7468 6472 6177 616c 3a0a  HoldWithdrawal:.
+00017c70: 2020 2020 2020 2020 2020 2020 7374 6174              stat
+00017c80: 7573 203d 2027 7065 6e64 696e 6727 0a20  us = 'pending'. 
+00017c90: 2020 2020 2020 2074 7970 6520 3d20 7365         type = se
+00017ca0: 6c66 2e73 6166 655f 7374 7269 6e67 2874  lf.safe_string(t
+00017cb0: 7261 6e73 6163 7469 6f6e 2c20 2774 7970  ransaction, 'typ
+00017cc0: 6527 2920 2023 2069 6e6a 6563 7465 6420  e')  # injected 
+00017cd0: 6672 6f6d 2074 6865 206f 7574 7369 6465  from the outside
+00017ce0: 0a20 2020 2020 2020 2066 6565 436f 7374  .        feeCost
+00017cf0: 203d 2073 656c 662e 7361 6665 5f6e 756d   = self.safe_num
+00017d00: 6265 7228 7472 616e 7361 6374 696f 6e2c  ber(transaction,
+00017d10: 2027 6665 6527 290a 2020 2020 2020 2020   'fee').        
+00017d20: 6966 2066 6565 436f 7374 2069 7320 4e6f  if feeCost is No
+00017d30: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00017d40: 6966 2074 7970 6520 3d3d 2027 6465 706f  if type == 'depo
+00017d50: 7369 7427 3a0a 2020 2020 2020 2020 2020  sit':.          
+00017d60: 2020 2020 2020 6665 6543 6f73 7420 3d20        feeCost = 
+00017d70: 300a 2020 2020 2020 2020 7265 7475 726e  0.        return
+00017d80: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00017d90: 696e 666f 273a 2074 7261 6e73 6163 7469  info': transacti
+00017da0: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
+00017db0: 2769 6427 3a20 6964 2c0a 2020 2020 2020  'id': id,.      
+00017dc0: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
+00017dd0: 3a20 636f 6465 2c0a 2020 2020 2020 2020  : code,.        
+00017de0: 2020 2020 2761 6d6f 756e 7427 3a20 616d      'amount': am
+00017df0: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
+00017e00: 2020 276e 6574 776f 726b 273a 2073 656c    'network': sel
+00017e10: 662e 7061 7273 655f 6e65 7477 6f72 6b28  f.parse_network(
+00017e20: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+00017e30: 2874 7261 6e73 6163 7469 6f6e 2c20 276e  (transaction, 'n
+00017e40: 6574 776f 726b 2729 292c 0a20 2020 2020  etwork')),.     
+00017e50: 2020 2020 2020 2027 6164 6472 6573 7327         'address'
+00017e60: 3a20 6164 6472 6573 732c 0a20 2020 2020  : address,.     
+00017e70: 2020 2020 2020 2027 6164 6472 6573 7354         'addressT
+00017e80: 6f27 3a20 4e6f 6e65 2c0a 2020 2020 2020  o': None,.      
+00017e90: 2020 2020 2020 2761 6464 7265 7373 4672        'addressFr
+00017ea0: 6f6d 273a 204e 6f6e 652c 0a20 2020 2020  om': None,.     
+00017eb0: 2020 2020 2020 2027 7461 6727 3a20 4e6f         'tag': No
+00017ec0: 6e65 2c0a 2020 2020 2020 2020 2020 2020  ne,.            
+00017ed0: 2774 6167 546f 273a 204e 6f6e 652c 0a20  'tagTo': None,. 
+00017ee0: 2020 2020 2020 2020 2020 2027 7461 6746             'tagF
+00017ef0: 726f 6d27 3a20 4e6f 6e65 2c0a 2020 2020  rom': None,.    
+00017f00: 2020 2020 2020 2020 2773 7461 7475 7327          'status'
+00017f10: 3a20 7374 6174 7573 2c0a 2020 2020 2020  : status,.      
+00017f20: 2020 2020 2020 2774 7970 6527 3a20 7479        'type': ty
+00017f30: 7065 2c0a 2020 2020 2020 2020 2020 2020  pe,.            
+00017f40: 2775 7064 6174 6564 273a 204e 6f6e 652c  'updated': None,
+00017f50: 0a20 2020 2020 2020 2020 2020 2027 7478  .            'tx
+00017f60: 6964 273a 2074 7869 642c 0a20 2020 2020  id': txid,.     
+00017f70: 2020 2020 2020 2027 7469 6d65 7374 616d         'timestam
+00017f80: 7027 3a20 7469 6d65 7374 616d 702c 0a20  p': timestamp,. 
+00017f90: 2020 2020 2020 2020 2020 2027 6461 7465             'date
+00017fa0: 7469 6d65 273a 2073 656c 662e 6973 6f38  time': self.iso8
+00017fb0: 3630 3128 7469 6d65 7374 616d 7029 2c0a  601(timestamp),.
+00017fc0: 2020 2020 2020 2020 2020 2020 2763 6f6d              'com
+00017fd0: 6d65 6e74 273a 204e 6f6e 652c 0a20 2020  ment': None,.   
+00017fe0: 2020 2020 2020 2020 2027 696e 7465 726e           'intern
+00017ff0: 616c 273a 204e 6f6e 652c 0a20 2020 2020  al': None,.     
+00018000: 2020 2020 2020 2027 6665 6527 3a20 7b0a         'fee': {.
+00018010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018020: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
+00018030: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00018040: 2020 2763 6f73 7427 3a20 6665 6543 6f73    'cost': feeCos
+00018050: 742c 0a20 2020 2020 2020 2020 2020 207d  t,.            }
+00018060: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
+00018070: 2064 6566 2070 6172 7365 5f74 7261 6e73   def parse_trans
+00018080: 6163 7469 6f6e 735f 6279 5f74 7970 6528  actions_by_type(
+00018090: 7365 6c66 2c20 7479 7065 2c20 7472 616e  self, type, tran
+000180a0: 7361 6374 696f 6e73 2c20 636f 6465 3a20  sactions, code: 
+000180b0: 5374 7220 3d20 4e6f 6e65 2c20 7369 6e63  Str = None, sinc
+000180c0: 653a 2049 6e74 203d 204e 6f6e 652c 206c  e: Int = None, l
+000180d0: 696d 6974 3a20 496e 7420 3d20 4e6f 6e65  imit: Int = None
+000180e0: 293a 0a20 2020 2020 2020 2072 6573 756c  ):.        resul
+000180f0: 7420 3d20 5b5d 0a20 2020 2020 2020 2066  t = [].        f
+00018100: 6f72 2069 2069 6e20 7261 6e67 6528 302c  or i in range(0,
+00018110: 206c 656e 2874 7261 6e73 6163 7469 6f6e   len(transaction
+00018120: 7329 293a 0a20 2020 2020 2020 2020 2020  s)):.           
+00018130: 2074 7261 6e73 6163 7469 6f6e 203d 2073   transaction = s
+00018140: 656c 662e 7061 7273 655f 7472 616e 7361  elf.parse_transa
+00018150: 6374 696f 6e28 7365 6c66 2e65 7874 656e  ction(self.exten
+00018160: 6428 7b0a 2020 2020 2020 2020 2020 2020  d({.            
+00018170: 2020 2020 2774 7970 6527 3a20 7479 7065      'type': type
+00018180: 2c0a 2020 2020 2020 2020 2020 2020 7d2c  ,.            },
+00018190: 2074 7261 6e73 6163 7469 6f6e 735b 695d   transactions[i]
+000181a0: 2929 0a20 2020 2020 2020 2020 2020 2072  )).            r
+000181b0: 6573 756c 742e 6170 7065 6e64 2874 7261  esult.append(tra
+000181c0: 6e73 6163 7469 6f6e 290a 2020 2020 2020  nsaction).      
+000181d0: 2020 7265 7475 726e 2073 656c 662e 6669    return self.fi
+000181e0: 6c74 6572 5f62 795f 6375 7272 656e 6379  lter_by_currency
+000181f0: 5f73 696e 6365 5f6c 696d 6974 2872 6573  _since_limit(res
+00018200: 756c 742c 2063 6f64 652c 2073 696e 6365  ult, code, since
+00018210: 2c20 6c69 6d69 7429 0a0a 2020 2020 6465  , limit)..    de
+00018220: 6620 6665 7463 685f 6465 706f 7369 7473  f fetch_deposits
+00018230: 2873 656c 662c 2063 6f64 653a 2053 7472  (self, code: Str
+00018240: 203d 204e 6f6e 652c 2073 696e 6365 3a20   = None, since: 
+00018250: 496e 7420 3d20 4e6f 6e65 2c20 6c69 6d69  Int = None, limi
+00018260: 743a 2049 6e74 203d 204e 6f6e 652c 2070  t: Int = None, p
+00018270: 6172 616d 733d 7b7d 2920 2d3e 204c 6973  arams={}) -> Lis
+00018280: 745b 5472 616e 7361 6374 696f 6e5d 3a0a  t[Transaction]:.
+00018290: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+000182a0: 2020 2020 6665 7463 6820 616c 6c20 6465      fetch all de
+000182b0: 706f 7369 7473 206d 6164 6520 746f 2061  posits made to a
+000182c0: 6e20 6163 636f 756e 740a 2020 2020 2020  n account.      
+000182d0: 2020 3a73 6565 3a20 6874 7470 733a 2f2f    :see: https://
+000182e0: 646f 6373 2e6b 7261 6b65 6e2e 636f 6d2f  docs.kraken.com/
+000182f0: 7265 7374 2f23 7461 672f 4675 6e64 696e  rest/#tag/Fundin
+00018300: 672f 6f70 6572 6174 696f 6e2f 6765 7453  g/operation/getS
+00018310: 7461 7475 7352 6563 656e 7444 6570 6f73  tatusRecentDepos
+00018320: 6974 730a 2020 2020 2020 2020 3a70 6172  its.        :par
+00018330: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+00018340: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+00018350: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00018360: 6d20 696e 7420 5b73 696e 6365 5d3a 2074  m int [since]: t
+00018370: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00018380: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+00018390: 6465 706f 7369 7473 2066 6f72 0a20 2020  deposits for.   
+000183a0: 2020 2020 203a 7061 7261 6d20 696e 7420       :param int 
+000183b0: 5b6c 696d 6974 5d3a 2074 6865 206d 6178  [limit]: the max
+000183c0: 696d 756d 206e 756d 6265 7220 6f66 2064  imum number of d
+000183d0: 6570 6f73 6974 7320 7374 7275 6374 7572  eposits structur
+000183e0: 6573 2074 6f20 7265 7472 6965 7665 0a20  es to retrieve. 
+000183f0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
+00018400: 6374 205b 7061 7261 6d73 5d3a 2065 7874  ct [params]: ext
+00018410: 7261 2070 6172 616d 6574 6572 7320 7370  ra parameters sp
+00018420: 6563 6966 6963 2074 6f20 7468 6520 6578  ecific to the ex
+00018430: 6368 616e 6765 2041 5049 2065 6e64 706f  change API endpo
+00018440: 696e 740a 2020 2020 2020 2020 3a72 6574  int.        :ret
+00018450: 7572 6e73 2064 6963 745b 5d3a 2061 206c  urns dict[]: a l
+00018460: 6973 7420 6f66 2060 7472 616e 7361 6374  ist of `transact
+00018470: 696f 6e20 7374 7275 6374 7572 6573 203c  ion structures <
+00018480: 6874 7470 733a 2f2f 646f 6373 2e63 6378  https://docs.ccx
+00018490: 742e 636f 6d2f 232f 3f69 643d 7472 616e  t.com/#/?id=tran
+000184a0: 7361 6374 696f 6e2d 7374 7275 6374 7572  saction-structur
+000184b0: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+000184c0: 2020 2020 2020 2020 2320 6874 7470 733a          # https:
+000184d0: 2f2f 7777 772e 6b72 616b 656e 2e63 6f6d  //www.kraken.com
+000184e0: 2f65 6e2d 7573 2f68 656c 702f 6170 6923  /en-us/help/api#
+000184f0: 6465 706f 7369 742d 7374 6174 7573 0a20  deposit-status. 
+00018500: 2020 2020 2020 2069 6620 636f 6465 2069         if code i
+00018510: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+00018520: 2020 2020 7261 6973 6520 4172 6775 6d65      raise Argume
+00018530: 6e74 7352 6571 7569 7265 6428 7365 6c66  ntsRequired(self
+00018540: 2e69 6420 2b20 2720 6665 7463 6844 6570  .id + ' fetchDep
+00018550: 6f73 6974 7328 2920 7265 7175 6972 6573  osits() requires
+00018560: 2061 2063 7572 7265 6e63 7920 636f 6465   a currency code
+00018570: 2061 7267 756d 656e 7427 290a 2020 2020   argument').    
+00018580: 2020 2020 7365 6c66 2e6c 6f61 645f 6d61      self.load_ma
+00018590: 726b 6574 7328 290a 2020 2020 2020 2020  rkets().        
+000185a0: 6375 7272 656e 6379 203d 2073 656c 662e  currency = self.
+000185b0: 6375 7272 656e 6379 2863 6f64 6529 0a20  currency(code). 
+000185c0: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+000185d0: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+000185e0: 6173 7365 7427 3a20 6375 7272 656e 6379  asset': currency
+000185f0: 5b27 6964 275d 2c0a 2020 2020 2020 2020  ['id'],.        
+00018600: 7d0a 2020 2020 2020 2020 6966 2073 696e  }.        if sin
+00018610: 6365 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ce is not None:.
+00018620: 2020 2020 2020 2020 2020 2020 7265 7175              requ
+00018630: 6573 745b 2773 7461 7274 275d 203d 2073  est['start'] = s
+00018640: 696e 6365 0a20 2020 2020 2020 2072 6573  ince.        res
+00018650: 706f 6e73 6520 3d20 7365 6c66 2e70 7269  ponse = self.pri
+00018660: 7661 7465 506f 7374 4465 706f 7369 7453  vatePostDepositS
+00018670: 7461 7475 7328 7365 6c66 2e65 7874 656e  tatus(self.exten
+00018680: 6428 7265 7175 6573 742c 2070 6172 616d  d(request, param
+00018690: 7329 290a 2020 2020 2020 2020 230a 2020  s)).        #.  
+000186a0: 2020 2020 2020 2320 2020 2020 7b20 6572        #     { er
+000186b0: 726f 723a 205b 5d2c 0a20 2020 2020 2020  ror: [],.       
+000186c0: 2023 2020 2020 2020 2022 7265 7375 6c74   #       "result
+000186d0: 223a 205b 7b22 6d65 7468 6f64 223a 2022  ": [{"method": "
+000186e0: 4574 6865 7228 4865 7829 222c 0a20 2020  Ether(Hex)",.   
+000186f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00018700: 2020 2020 2020 2020 2020 2022 6163 6c61             "acla
+00018710: 7373 223a 2022 6375 7272 656e 6379 222c  ss": "currency",
+00018720: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
 00018730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018740: 2261 636c 6173 7322 3a20 2263 7572 7265  "aclass": "curre
-00018750: 6e63 7922 2c0a 2020 2020 2020 2020 2320  ncy",.        # 
+00018740: 2261 7373 6574 223a 2022 5845 5448 222c  "asset": "XETH",
+00018750: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
 00018760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018770: 2020 2020 2022 6173 7365 7422 3a20 2258       "asset": "X
-00018780: 4554 4822 2c0a 2020 2020 2020 2020 2320  ETH",.        # 
-00018790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000187a0: 2020 2020 2022 7265 6669 6422 3a20 2251       "refid": "Q
-000187b0: 3243 414e 4b4c 2d4c 4246 5645 452d 5534  2CANKL-LBFVEE-U4
-000187c0: 5932 5751 222c 0a20 2020 2020 2020 2023  Y2WQ",.        #
-000187d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000187e0: 2020 2020 2020 2022 7478 6964 223a 2022         "txid": "
-000187f0: 3078 3537 6664 3730 3464 6162 3161 3733  0x57fd704dab1a73
-00018800: 6332 3065 3234 6338 3639 3630 3939 6236  c20e24c8696099b6
-00018810: 3935 6435 3936 3932 3462 3430 3162 3236  95d596924b401b26
-00018820: 3135 3133 6366 6461 6232 33e2 80a6 222c  1513cfdab23...",
-00018830: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00018840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018850: 2022 696e 666f 223a 2022 3078 3631 3566   "info": "0x615f
-00018860: 3962 6137 6139 3537 3562 3061 6234 6435  9ba7a9575b0ab4d5
-00018870: 3731 6232 6233 3662 3162 3332 3462 6438  71b2b36b1b324bd8
-00018880: 3332 3930 222c 0a20 2020 2020 2020 2023  3290",.        #
-00018890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000188a0: 2020 2020 2022 616d 6f75 6e74 223a 2022       "amount": "
-000188b0: 372e 3939 3939 3235 3739 3030 222c 0a20  7.9999257900",. 
-000188c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00018770: 2272 6566 6964 223a 2022 5132 4341 4e4b  "refid": "Q2CANK
+00018780: 4c2d 4c42 4656 4545 2d55 3459 3257 5122  L-LBFVEE-U4Y2WQ"
+00018790: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+000187a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000187b0: 2020 2274 7869 6422 3a20 2230 7835 3766    "txid": "0x57f
+000187c0: 6437 3034 6461 6231 6137 3363 3230 6532  d704dab1a73c20e2
+000187d0: 3463 3836 3936 3039 3962 3639 3564 3539  4c8696099b695d59
+000187e0: 3639 3234 6234 3031 6232 3631 3531 3363  6924b401b261513c
+000187f0: 6664 6162 3233 e280 a622 2c0a 2020 2020  fdab23...",.    
+00018800: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+00018810: 2020 2020 2020 2020 2020 2020 2269 6e66              "inf
+00018820: 6f22 3a20 2230 7836 3135 6639 6261 3761  o": "0x615f9ba7a
+00018830: 3935 3735 6230 6162 3464 3537 3162 3262  9575b0ab4d571b2b
+00018840: 3336 6231 6233 3234 6264 3833 3239 3022  36b1b324bd83290"
+00018850: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00018860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018870: 2261 6d6f 756e 7422 3a20 2237 2e39 3939  "amount": "7.999
+00018880: 3932 3537 3930 3022 2c0a 2020 2020 2020  9257900",.      
+00018890: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000188a0: 2020 2020 2020 2020 2020 2022 6665 6522             "fee"
+000188b0: 3a20 2230 2e30 3030 3030 3030 3030 3022  : "0.0000000000"
+000188c0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
 000188d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000188e0: 2266 6565 223a 2022 302e 3030 3030 3030  "fee": "0.000000
-000188f0: 3030 3030 222c 0a20 2020 2020 2020 2023  0000",.        #
+000188e0: 2020 2274 696d 6522 3a20 2031 3532 3932    "time":  15292
+000188f0: 3233 3231 322c 0a20 2020 2020 2020 2023  23212,.        #
 00018900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018910: 2020 2020 2020 2022 7469 6d65 223a 2020         "time":  
-00018920: 3135 3239 3232 3332 3132 2c0a 2020 2020  1529223212,.    
-00018930: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-00018940: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
-00018950: 7322 3a20 2253 7563 6365 7373 2220 2020  s": "Success"   
-00018960: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00018990: 2020 2020 7d5d 7d0a 2020 2020 2020 2020      }]}.        
-000189a0: 230a 2020 2020 2020 2020 7265 7475 726e  #.        return
-000189b0: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-000189c0: 7361 6374 696f 6e73 5f62 795f 7479 7065  sactions_by_type
-000189d0: 2827 6465 706f 7369 7427 2c20 7265 7370  ('deposit', resp
-000189e0: 6f6e 7365 5b27 7265 7375 6c74 275d 2c20  onse['result'], 
-000189f0: 636f 6465 2c20 7369 6e63 652c 206c 696d  code, since, lim
-00018a00: 6974 290a 0a20 2020 2064 6566 2066 6574  it)..    def fet
-00018a10: 6368 5f74 696d 6528 7365 6c66 2c20 7061  ch_time(self, pa
-00018a20: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
-00018a30: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
-00018a40: 7463 6865 7320 7468 6520 6375 7272 656e  tches the curren
-00018a50: 7420 696e 7465 6765 7220 7469 6d65 7374  t integer timest
-00018a60: 616d 7020 696e 206d 696c 6c69 7365 636f  amp in milliseco
-00018a70: 6e64 7320 6672 6f6d 2074 6865 2065 7863  nds from the exc
-00018a80: 6861 6e67 6520 7365 7276 6572 0a20 2020  hange server.   
-00018a90: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
-00018aa0: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
-00018ab0: 6f6d 2f72 6573 742f 2374 6167 2f53 706f  om/rest/#tag/Spo
-00018ac0: 742d 4d61 726b 6574 2d44 6174 612f 6f70  t-Market-Data/op
-00018ad0: 6572 6174 696f 6e2f 6765 7453 6572 7665  eration/getServe
-00018ae0: 7254 696d 650a 2020 2020 2020 2020 3a70  rTime.        :p
-00018af0: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
-00018b00: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
-00018b10: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
-00018b20: 2074 6865 2065 7863 6861 6e67 6520 4150   the exchange AP
-00018b30: 4920 656e 6470 6f69 6e74 0a20 2020 2020  I endpoint.     
-00018b40: 2020 203a 7265 7475 726e 7320 696e 743a     :returns int:
-00018b50: 2074 6865 2063 7572 7265 6e74 2069 6e74   the current int
-00018b60: 6567 6572 2074 696d 6573 7461 6d70 2069  eger timestamp i
-00018b70: 6e20 6d69 6c6c 6973 6563 6f6e 6473 2066  n milliseconds f
-00018b80: 726f 6d20 7468 6520 6578 6368 616e 6765  rom the exchange
-00018b90: 2073 6572 7665 720a 2020 2020 2020 2020   server.        
-00018ba0: 2222 220a 2020 2020 2020 2020 2320 6874  """.        # ht
-00018bb0: 7470 733a 2f2f 7777 772e 6b72 616b 656e  tps://www.kraken
-00018bc0: 2e63 6f6d 2f65 6e2d 7573 2f66 6561 7475  .com/en-us/featu
-00018bd0: 7265 732f 6170 6923 6765 742d 7365 7276  res/api#get-serv
-00018be0: 6572 2d74 696d 650a 2020 2020 2020 2020  er-time.        
-00018bf0: 7265 7370 6f6e 7365 203d 2073 656c 662e  response = self.
-00018c00: 7075 626c 6963 4765 7454 696d 6528 7061  publicGetTime(pa
-00018c10: 7261 6d73 290a 2020 2020 2020 2020 230a  rams).        #.
-00018c20: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
-00018c30: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00018c40: 2265 7272 6f72 223a 205b 5d2c 0a20 2020  "error": [],.   
-00018c50: 2020 2020 2023 2020 2020 2020 2020 2272       #        "r
-00018c60: 6573 756c 7422 3a20 7b0a 2020 2020 2020  esult": {.      
-00018c70: 2020 2320 2020 2020 2020 2020 2020 2022    #            "
-00018c80: 756e 6978 7469 6d65 223a 2031 3539 3135  unixtime": 15915
-00018c90: 3032 3837 332c 0a20 2020 2020 2020 2023  02873,.        #
-00018ca0: 2020 2020 2020 2020 2020 2020 2272 6663              "rfc
-00018cb0: 3131 3233 223a 2022 5375 6e2c 2020 3720  1123": "Sun,  7 
-00018cc0: 4a75 6e20 3230 2030 343a 3037 3a35 3320  Jun 20 04:07:53 
-00018cd0: 2b30 3030 3022 0a20 2020 2020 2020 2023  +0000".        #
-00018ce0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
-00018cf0: 2020 2320 2020 207d 0a20 2020 2020 2020    #    }.       
-00018d00: 2023 0a20 2020 2020 2020 2072 6573 756c   #.        resul
-00018d10: 7420 3d20 7365 6c66 2e73 6166 655f 7661  t = self.safe_va
-00018d20: 6c75 6528 7265 7370 6f6e 7365 2c20 2772  lue(response, 'r
-00018d30: 6573 756c 7427 2c20 7b7d 290a 2020 2020  esult', {}).    
-00018d40: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00018d50: 7361 6665 5f74 696d 6573 7461 6d70 2872  safe_timestamp(r
-00018d60: 6573 756c 742c 2027 756e 6978 7469 6d65  esult, 'unixtime
-00018d70: 2729 0a0a 2020 2020 6465 6620 6665 7463  ')..    def fetc
-00018d80: 685f 7769 7468 6472 6177 616c 7328 7365  h_withdrawals(se
-00018d90: 6c66 2c20 636f 6465 3a20 5374 7220 3d20  lf, code: Str = 
-00018da0: 4e6f 6e65 2c20 7369 6e63 653a 2049 6e74  None, since: Int
-00018db0: 203d 204e 6f6e 652c 206c 696d 6974 3a20   = None, limit: 
-00018dc0: 496e 7420 3d20 4e6f 6e65 2c20 7061 7261  Int = None, para
-00018dd0: 6d73 3d7b 7d29 202d 3e20 4c69 7374 5b54  ms={}) -> List[T
-00018de0: 7261 6e73 6163 7469 6f6e 5d3a 0a20 2020  ransaction]:.   
-00018df0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-00018e00: 2066 6574 6368 2061 6c6c 2077 6974 6864   fetch all withd
-00018e10: 7261 7761 6c73 206d 6164 6520 6672 6f6d  rawals made from
-00018e20: 2061 6e20 6163 636f 756e 740a 2020 2020   an account.    
-00018e30: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-00018e40: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-00018e50: 6d2f 7265 7374 2f23 7461 672f 4675 6e64  m/rest/#tag/Fund
-00018e60: 696e 672f 6f70 6572 6174 696f 6e2f 6765  ing/operation/ge
-00018e70: 7453 7461 7475 7352 6563 656e 7457 6974  tStatusRecentWit
-00018e80: 6864 7261 7761 6c73 0a20 2020 2020 2020  hdrawals.       
-00018e90: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
-00018ea0: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
-00018eb0: 6379 2063 6f64 650a 2020 2020 2020 2020  cy code.        
-00018ec0: 3a70 6172 616d 2069 6e74 205b 7369 6e63  :param int [sinc
-00018ed0: 655d 3a20 7468 6520 6561 726c 6965 7374  e]: the earliest
-00018ee0: 2074 696d 6520 696e 206d 7320 746f 2066   time in ms to f
-00018ef0: 6574 6368 2077 6974 6864 7261 7761 6c73  etch withdrawals
-00018f00: 2066 6f72 0a20 2020 2020 2020 203a 7061   for.        :pa
-00018f10: 7261 6d20 696e 7420 5b6c 696d 6974 5d3a  ram int [limit]:
-00018f20: 2074 6865 206d 6178 696d 756d 206e 756d   the maximum num
-00018f30: 6265 7220 6f66 2077 6974 6864 7261 7761  ber of withdrawa
-00018f40: 6c73 2073 7472 7563 7475 7265 7320 746f  ls structures to
-00018f50: 2072 6574 7269 6576 650a 2020 2020 2020   retrieve.      
-00018f60: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
-00018f70: 6172 616d 735d 3a20 6578 7472 6120 7061  arams]: extra pa
-00018f80: 7261 6d65 7465 7273 2073 7065 6369 6669  rameters specifi
-00018f90: 6320 746f 2074 6865 2065 7863 6861 6e67  c to the exchang
-00018fa0: 6520 4150 4920 656e 6470 6f69 6e74 0a20  e API endpoint. 
-00018fb0: 2020 2020 2020 203a 7061 7261 6d20 6469         :param di
-00018fc0: 6374 205b 7061 7261 6d73 2e65 6e64 5d3a  ct [params.end]:
-00018fd0: 2045 6e64 2074 696d 6573 7461 6d70 2c20   End timestamp, 
-00018fe0: 7769 7468 6472 6177 616c 7320 6372 6561  withdrawals crea
-00018ff0: 7465 6420 7374 7269 6374 6c79 2061 6674  ted strictly aft
-00019000: 6572 2077 696c 6c20 6265 206e 6f74 2062  er will be not b
-00019010: 6520 696e 636c 7564 6564 2069 6e20 7468  e included in th
-00019020: 6520 7265 7370 6f6e 7365 0a20 2020 2020  e response.     
-00019030: 2020 203a 7061 7261 6d20 626f 6f6c 6561     :param boolea
-00019040: 6e20 5b70 6172 616d 732e 7061 6769 6e61  n [params.pagina
-00019050: 7465 5d3a 2020 6465 6661 756c 7420 4661  te]:  default Fa
-00019060: 6c73 652c 2077 6865 6e20 5472 7565 2077  lse, when True w
-00019070: 696c 6c20 6175 746f 6d61 7469 6361 6c6c  ill automaticall
-00019080: 7920 7061 6769 6e61 7465 2062 7920 6361  y paginate by ca
-00019090: 6c6c 696e 6720 7365 6c66 2065 6e64 706f  lling self endpo
-000190a0: 696e 7420 6d75 6c74 6970 6c65 2074 696d  int multiple tim
-000190b0: 6573 0a20 2020 2020 2020 203a 7265 7475  es.        :retu
-000190c0: 726e 7320 6469 6374 5b5d 3a20 6120 6c69  rns dict[]: a li
-000190d0: 7374 206f 6620 6074 7261 6e73 6163 7469  st of `transacti
-000190e0: 6f6e 2073 7472 7563 7475 7265 7320 3c68  on structures <h
-000190f0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-00019100: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
-00019110: 6163 7469 6f6e 2d73 7472 7563 7475 7265  action-structure
-00019120: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-00019130: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-00019140: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-00019150: 2020 2070 6167 696e 6174 6520 3d20 4661     paginate = Fa
-00019160: 6c73 650a 2020 2020 2020 2020 7061 6769  lse.        pagi
-00019170: 6e61 7465 2c20 7061 7261 6d73 203d 2073  nate, params = s
-00019180: 656c 662e 6861 6e64 6c65 5f6f 7074 696f  elf.handle_optio
-00019190: 6e5f 616e 645f 7061 7261 6d73 2870 6172  n_and_params(par
-000191a0: 616d 732c 2027 6665 7463 6857 6974 6864  ams, 'fetchWithd
-000191b0: 7261 7761 6c73 272c 2027 7061 6769 6e61  rawals', 'pagina
-000191c0: 7465 2729 0a20 2020 2020 2020 2069 6620  te').        if 
-000191d0: 7061 6769 6e61 7465 3a0a 2020 2020 2020  paginate:.      
-000191e0: 2020 2020 2020 7061 7261 6d73 5b27 6375        params['cu
-000191f0: 7273 6f72 275d 203d 2054 7275 650a 2020  rsor'] = True.  
-00019200: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00019210: 2073 656c 662e 6665 7463 685f 7061 6769   self.fetch_pagi
-00019220: 6e61 7465 645f 6361 6c6c 5f63 7572 736f  nated_call_curso
-00019230: 7228 2766 6574 6368 5769 7468 6472 6177  r('fetchWithdraw
-00019240: 616c 7327 2c20 636f 6465 2c20 7369 6e63  als', code, sinc
-00019250: 652c 206c 696d 6974 2c20 7061 7261 6d73  e, limit, params
-00019260: 2c20 276e 6578 745f 6375 7273 6f72 272c  , 'next_cursor',
-00019270: 2027 6375 7273 6f72 2729 0a20 2020 2020   'cursor').     
-00019280: 2020 2072 6571 7565 7374 203d 207b 7d0a     request = {}.
-00019290: 2020 2020 2020 2020 6966 2063 6f64 6520          if code 
-000192a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000192b0: 2020 2020 2020 2020 2063 7572 7265 6e63           currenc
-000192c0: 7920 3d20 7365 6c66 2e63 7572 7265 6e63  y = self.currenc
-000192d0: 7928 636f 6465 290a 2020 2020 2020 2020  y(code).        
-000192e0: 2020 2020 7265 7175 6573 745b 2761 7373      request['ass
-000192f0: 6574 275d 203d 2063 7572 7265 6e63 795b  et'] = currency[
-00019300: 2769 6427 5d0a 2020 2020 2020 2020 6966  'id'].        if
-00019310: 2073 696e 6365 2069 7320 6e6f 7420 4e6f   since is not No
-00019320: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00019330: 7265 7175 6573 745b 2773 696e 6365 275d  request['since']
-00019340: 203d 2073 7472 2873 696e 6365 290a 2020   = str(since).  
-00019350: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-00019360: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-00019370: 7457 6974 6864 7261 7753 7461 7475 7328  tWithdrawStatus(
-00019380: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-00019390: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-000193a0: 2020 2020 2020 230a 2020 2020 2020 2020        #.        
-000193b0: 2320 7769 7468 206e 6f20 7061 6769 6e61  # with no pagina
-000193c0: 7469 6f6e 0a20 2020 2020 2020 2023 2020  tion.        #  
-000193d0: 2020 207b 2065 7272 6f72 3a20 5b5d 2c0a     { error: [],.
-000193e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-000193f0: 2272 6573 756c 7422 3a20 5b7b 226d 6574  "result": [{"met
-00019400: 686f 6422 3a20 2245 7468 6572 222c 0a20  hod": "Ether",. 
-00019410: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019420: 2020 2020 2020 2020 2020 2020 2022 6163               "ac
-00019430: 6c61 7373 223a 2022 6375 7272 656e 6379  lass": "currency
-00019440: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019460: 2020 2261 7373 6574 223a 2022 5845 5448    "asset": "XETH
-00019470: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019490: 2020 2272 6566 6964 223a 2022 4132 4246    "refid": "A2BF
-000194a0: 3334 532d 4f37 4c42 4e51 2d55 4534 5934  34S-O7LBNQ-UE4Y4
-000194b0: 4f22 2c0a 2020 2020 2020 2020 2320 2020  O",.        #   
-000194c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000194d0: 2020 2020 2274 7869 6422 3a20 2230 7832      "txid": "0x2
-000194e0: 3938 6338 3363 3762 3039 3034 6438 3430  98c83c7b0904d840
-000194f0: 3065 6634 3365 3163 3965 3232 3837 6235  0ef43e1c9e2287b5
-00019500: 3138 6637 6561 3364 3833 3838 3232 6435  18f7ea3d838822d5
-00019510: 3366 3730 3461 3135 3635 6332 3734 6422  3f704a1565c274d"
-00019520: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-00019530: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019540: 2020 2269 6e66 6f22 3a20 2230 7837 6362    "info": "0x7cb
-00019550: 3237 3561 3565 3037 6261 3934 3366 6565  275a5e07ba943fee
-00019560: 3937 3265 3136 3564 3830 6461 6136 3763  972e165d80daa67c
-00019570: 6232 6464 3022 2c0a 2020 2020 2020 2020  b2dd0",.        
-00019580: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019590: 2020 2020 2020 2261 6d6f 756e 7422 3a20        "amount": 
-000195a0: 2239 2e39 3935 3030 3030 3030 3022 2c0a  "9.9950000000",.
-000195b0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00018910: 2020 2020 2022 7374 6174 7573 223a 2022       "status": "
+00018920: 5375 6363 6573 7322 2020 2020 2020 2020  Success"        
+00018930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018940: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018950: 2020 2020 2020 2020 2020 2020 2020 207d                 }
+00018960: 5d7d 0a20 2020 2020 2020 2023 0a20 2020  ]}.        #.   
+00018970: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00018980: 2e70 6172 7365 5f74 7261 6e73 6163 7469  .parse_transacti
+00018990: 6f6e 735f 6279 5f74 7970 6528 2764 6570  ons_by_type('dep
+000189a0: 6f73 6974 272c 2072 6573 706f 6e73 655b  osit', response[
+000189b0: 2772 6573 756c 7427 5d2c 2063 6f64 652c  'result'], code,
+000189c0: 2073 696e 6365 2c20 6c69 6d69 7429 0a0a   since, limit)..
+000189d0: 2020 2020 6465 6620 6665 7463 685f 7469      def fetch_ti
+000189e0: 6d65 2873 656c 662c 2070 6172 616d 733d  me(self, params=
+000189f0: 7b7d 293a 0a20 2020 2020 2020 2022 2222  {}):.        """
+00018a00: 0a20 2020 2020 2020 2066 6574 6368 6573  .        fetches
+00018a10: 2074 6865 2063 7572 7265 6e74 2069 6e74   the current int
+00018a20: 6567 6572 2074 696d 6573 7461 6d70 2069  eger timestamp i
+00018a30: 6e20 6d69 6c6c 6973 6563 6f6e 6473 2066  n milliseconds f
+00018a40: 726f 6d20 7468 6520 6578 6368 616e 6765  rom the exchange
+00018a50: 2073 6572 7665 720a 2020 2020 2020 2020   server.        
+00018a60: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
+00018a70: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
+00018a80: 7374 2f23 7461 672f 5370 6f74 2d4d 6172  st/#tag/Spot-Mar
+00018a90: 6b65 742d 4461 7461 2f6f 7065 7261 7469  ket-Data/operati
+00018aa0: 6f6e 2f67 6574 5365 7276 6572 5469 6d65  on/getServerTime
+00018ab0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
+00018ac0: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
+00018ad0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
+00018ae0: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
+00018af0: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
+00018b00: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
+00018b10: 6574 7572 6e73 2069 6e74 3a20 7468 6520  eturns int: the 
+00018b20: 6375 7272 656e 7420 696e 7465 6765 7220  current integer 
+00018b30: 7469 6d65 7374 616d 7020 696e 206d 696c  timestamp in mil
+00018b40: 6c69 7365 636f 6e64 7320 6672 6f6d 2074  liseconds from t
+00018b50: 6865 2065 7863 6861 6e67 6520 7365 7276  he exchange serv
+00018b60: 6572 0a20 2020 2020 2020 2022 2222 0a20  er.        """. 
+00018b70: 2020 2020 2020 2023 2068 7474 7073 3a2f         # https:/
+00018b80: 2f77 7777 2e6b 7261 6b65 6e2e 636f 6d2f  /www.kraken.com/
+00018b90: 656e 2d75 732f 6665 6174 7572 6573 2f61  en-us/features/a
+00018ba0: 7069 2367 6574 2d73 6572 7665 722d 7469  pi#get-server-ti
+00018bb0: 6d65 0a20 2020 2020 2020 2072 6573 706f  me.        respo
+00018bc0: 6e73 6520 3d20 7365 6c66 2e70 7562 6c69  nse = self.publi
+00018bd0: 6347 6574 5469 6d65 2870 6172 616d 7329  cGetTime(params)
+00018be0: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+00018bf0: 2020 2023 2020 2020 7b0a 2020 2020 2020     #    {.      
+00018c00: 2020 2320 2020 2020 2020 2022 6572 726f    #        "erro
+00018c10: 7222 3a20 5b5d 2c0a 2020 2020 2020 2020  r": [],.        
+00018c20: 2320 2020 2020 2020 2022 7265 7375 6c74  #        "result
+00018c30: 223a 207b 0a20 2020 2020 2020 2023 2020  ": {.        #  
+00018c40: 2020 2020 2020 2020 2020 2275 6e69 7874            "unixt
+00018c50: 696d 6522 3a20 3135 3931 3530 3238 3733  ime": 1591502873
+00018c60: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+00018c70: 2020 2020 2020 2022 7266 6331 3132 3322         "rfc1123"
+00018c80: 3a20 2253 756e 2c20 2037 204a 756e 2032  : "Sun,  7 Jun 2
+00018c90: 3020 3034 3a30 373a 3533 202b 3030 3030  0 04:07:53 +0000
+00018ca0: 220a 2020 2020 2020 2020 2320 2020 2020  ".        #     
+00018cb0: 2020 207d 0a20 2020 2020 2020 2023 2020     }.        #  
+00018cc0: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+00018cd0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
+00018ce0: 656c 662e 7361 6665 5f76 616c 7565 2872  elf.safe_value(r
+00018cf0: 6573 706f 6e73 652c 2027 7265 7375 6c74  esponse, 'result
+00018d00: 272c 207b 7d29 0a20 2020 2020 2020 2072  ', {}).        r
+00018d10: 6574 7572 6e20 7365 6c66 2e73 6166 655f  eturn self.safe_
+00018d20: 7469 6d65 7374 616d 7028 7265 7375 6c74  timestamp(result
+00018d30: 2c20 2775 6e69 7874 696d 6527 290a 0a20  , 'unixtime').. 
+00018d40: 2020 2064 6566 2066 6574 6368 5f77 6974     def fetch_wit
+00018d50: 6864 7261 7761 6c73 2873 656c 662c 2063  hdrawals(self, c
+00018d60: 6f64 653a 2053 7472 203d 204e 6f6e 652c  ode: Str = None,
+00018d70: 2073 696e 6365 3a20 496e 7420 3d20 4e6f   since: Int = No
+00018d80: 6e65 2c20 6c69 6d69 743a 2049 6e74 203d  ne, limit: Int =
+00018d90: 204e 6f6e 652c 2070 6172 616d 733d 7b7d   None, params={}
+00018da0: 2920 2d3e 204c 6973 745b 5472 616e 7361  ) -> List[Transa
+00018db0: 6374 696f 6e5d 3a0a 2020 2020 2020 2020  ction]:.        
+00018dc0: 2222 220a 2020 2020 2020 2020 6665 7463  """.        fetc
+00018dd0: 6820 616c 6c20 7769 7468 6472 6177 616c  h all withdrawal
+00018de0: 7320 6d61 6465 2066 726f 6d20 616e 2061  s made from an a
+00018df0: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
+00018e00: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+00018e10: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+00018e20: 742f 2374 6167 2f46 756e 6469 6e67 2f6f  t/#tag/Funding/o
+00018e30: 7065 7261 7469 6f6e 2f67 6574 5374 6174  peration/getStat
+00018e40: 7573 5265 6365 6e74 5769 7468 6472 6177  usRecentWithdraw
+00018e50: 616c 730a 2020 2020 2020 2020 3a70 6172  als.        :par
+00018e60: 616d 2073 7472 2063 6f64 653a 2075 6e69  am str code: uni
+00018e70: 6669 6564 2063 7572 7265 6e63 7920 636f  fied currency co
+00018e80: 6465 0a20 2020 2020 2020 203a 7061 7261  de.        :para
+00018e90: 6d20 696e 7420 5b73 696e 6365 5d3a 2074  m int [since]: t
+00018ea0: 6865 2065 6172 6c69 6573 7420 7469 6d65  he earliest time
+00018eb0: 2069 6e20 6d73 2074 6f20 6665 7463 6820   in ms to fetch 
+00018ec0: 7769 7468 6472 6177 616c 7320 666f 720a  withdrawals for.
+00018ed0: 2020 2020 2020 2020 3a70 6172 616d 2069          :param i
+00018ee0: 6e74 205b 6c69 6d69 745d 3a20 7468 6520  nt [limit]: the 
+00018ef0: 6d61 7869 6d75 6d20 6e75 6d62 6572 206f  maximum number o
+00018f00: 6620 7769 7468 6472 6177 616c 7320 7374  f withdrawals st
+00018f10: 7275 6374 7572 6573 2074 6f20 7265 7472  ructures to retr
+00018f20: 6965 7665 0a20 2020 2020 2020 203a 7061  ieve.        :pa
+00018f30: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
+00018f40: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
+00018f50: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
+00018f60: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
+00018f70: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
+00018f80: 2020 3a70 6172 616d 2064 6963 7420 5b70    :param dict [p
+00018f90: 6172 616d 732e 656e 645d 3a20 456e 6420  arams.end]: End 
+00018fa0: 7469 6d65 7374 616d 702c 2077 6974 6864  timestamp, withd
+00018fb0: 7261 7761 6c73 2063 7265 6174 6564 2073  rawals created s
+00018fc0: 7472 6963 746c 7920 6166 7465 7220 7769  trictly after wi
+00018fd0: 6c6c 2062 6520 6e6f 7420 6265 2069 6e63  ll be not be inc
+00018fe0: 6c75 6465 6420 696e 2074 6865 2072 6573  luded in the res
+00018ff0: 706f 6e73 650a 2020 2020 2020 2020 3a70  ponse.        :p
+00019000: 6172 616d 2062 6f6f 6c65 616e 205b 7061  aram boolean [pa
+00019010: 7261 6d73 2e70 6167 696e 6174 655d 3a20  rams.paginate]: 
+00019020: 2064 6566 6175 6c74 2046 616c 7365 2c20   default False, 
+00019030: 7768 656e 2054 7275 6520 7769 6c6c 2061  when True will a
+00019040: 7574 6f6d 6174 6963 616c 6c79 2070 6167  utomatically pag
+00019050: 696e 6174 6520 6279 2063 616c 6c69 6e67  inate by calling
+00019060: 2073 656c 6620 656e 6470 6f69 6e74 206d   self endpoint m
+00019070: 756c 7469 706c 6520 7469 6d65 730a 2020  ultiple times.  
+00019080: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+00019090: 6963 745b 5d3a 2061 206c 6973 7420 6f66  ict[]: a list of
+000190a0: 2060 7472 616e 7361 6374 696f 6e20 7374   `transaction st
+000190b0: 7275 6374 7572 6573 203c 6874 7470 733a  ructures <https:
+000190c0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+000190d0: 232f 3f69 643d 7472 616e 7361 6374 696f  #/?id=transactio
+000190e0: 6e2d 7374 7275 6374 7572 653e 600a 2020  n-structure>`.  
+000190f0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+00019100: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+00019110: 6574 7328 290a 2020 2020 2020 2020 7061  ets().        pa
+00019120: 6769 6e61 7465 203d 2046 616c 7365 0a20  ginate = False. 
+00019130: 2020 2020 2020 2070 6167 696e 6174 652c         paginate,
+00019140: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+00019150: 616e 646c 655f 6f70 7469 6f6e 5f61 6e64  andle_option_and
+00019160: 5f70 6172 616d 7328 7061 7261 6d73 2c20  _params(params, 
+00019170: 2766 6574 6368 5769 7468 6472 6177 616c  'fetchWithdrawal
+00019180: 7327 2c20 2770 6167 696e 6174 6527 290a  s', 'paginate').
+00019190: 2020 2020 2020 2020 6966 2070 6167 696e          if pagin
+000191a0: 6174 653a 0a20 2020 2020 2020 2020 2020  ate:.           
+000191b0: 2070 6172 616d 735b 2763 7572 736f 7227   params['cursor'
+000191c0: 5d20 3d20 5472 7565 0a20 2020 2020 2020  ] = True.       
+000191d0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+000191e0: 2e66 6574 6368 5f70 6167 696e 6174 6564  .fetch_paginated
+000191f0: 5f63 616c 6c5f 6375 7273 6f72 2827 6665  _call_cursor('fe
+00019200: 7463 6857 6974 6864 7261 7761 6c73 272c  tchWithdrawals',
+00019210: 2063 6f64 652c 2073 696e 6365 2c20 6c69   code, since, li
+00019220: 6d69 742c 2070 6172 616d 732c 2027 6e65  mit, params, 'ne
+00019230: 7874 5f63 7572 736f 7227 2c20 2763 7572  xt_cursor', 'cur
+00019240: 736f 7227 290a 2020 2020 2020 2020 7265  sor').        re
+00019250: 7175 6573 7420 3d20 7b7d 0a20 2020 2020  quest = {}.     
+00019260: 2020 2069 6620 636f 6465 2069 7320 6e6f     if code is no
+00019270: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00019280: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
+00019290: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
+000192a0: 6529 0a20 2020 2020 2020 2020 2020 2072  e).            r
+000192b0: 6571 7565 7374 5b27 6173 7365 7427 5d20  equest['asset'] 
+000192c0: 3d20 6375 7272 656e 6379 5b27 6964 275d  = currency['id']
+000192d0: 0a20 2020 2020 2020 2069 6620 7369 6e63  .        if sinc
+000192e0: 6520 6973 206e 6f74 204e 6f6e 653a 0a20  e is not None:. 
+000192f0: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00019300: 7374 5b27 7369 6e63 6527 5d20 3d20 7374  st['since'] = st
+00019310: 7228 7369 6e63 6529 0a20 2020 2020 2020  r(since).       
+00019320: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+00019330: 2e70 7269 7661 7465 506f 7374 5769 7468  .privatePostWith
+00019340: 6472 6177 5374 6174 7573 2873 656c 662e  drawStatus(self.
+00019350: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+00019360: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+00019370: 2023 0a20 2020 2020 2020 2023 2077 6974   #.        # wit
+00019380: 6820 6e6f 2070 6167 696e 6174 696f 6e0a  h no pagination.
+00019390: 2020 2020 2020 2020 2320 2020 2020 7b20          #     { 
+000193a0: 6572 726f 723a 205b 5d2c 0a20 2020 2020  error: [],.     
+000193b0: 2020 2023 2020 2020 2020 2022 7265 7375     #       "resu
+000193c0: 6c74 223a 205b 7b22 6d65 7468 6f64 223a  lt": [{"method":
+000193d0: 2022 4574 6865 7222 2c0a 2020 2020 2020   "Ether",.      
+000193e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000193f0: 2020 2020 2020 2020 2261 636c 6173 7322          "aclass"
+00019400: 3a20 2263 7572 7265 6e63 7922 2c0a 2020  : "currency",.  
+00019410: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019420: 2020 2020 2020 2020 2020 2020 2022 6173               "as
+00019430: 7365 7422 3a20 2258 4554 4822 2c0a 2020  set": "XETH",.  
+00019440: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019450: 2020 2020 2020 2020 2020 2020 2022 7265               "re
+00019460: 6669 6422 3a20 2241 3242 4633 3453 2d4f  fid": "A2BF34S-O
+00019470: 374c 424e 512d 5545 3459 344f 222c 0a20  7LBNQ-UE4Y4O",. 
+00019480: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+00019490: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000194a0: 7478 6964 223a 2022 3078 3239 3863 3833  txid": "0x298c83
+000194b0: 6337 6230 3930 3464 3834 3030 6566 3433  c7b0904d8400ef43
+000194c0: 6531 6339 6532 3238 3762 3531 3866 3765  e1c9e2287b518f7e
+000194d0: 6133 6438 3338 3832 3264 3533 6637 3034  a3d838822d53f704
+000194e0: 6131 3536 3563 3237 3464 222c 0a20 2020  a1565c274d",.   
+000194f0: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+00019500: 2020 2020 2020 2020 2020 2020 2022 696e               "in
+00019510: 666f 223a 2022 3078 3763 6232 3735 6135  fo": "0x7cb275a5
+00019520: 6530 3762 6139 3433 6665 6539 3732 6531  e07ba943fee972e1
+00019530: 3635 6438 3064 6161 3637 6362 3264 6430  65d80daa67cb2dd0
+00019540: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+00019550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019560: 2022 616d 6f75 6e74 223a 2022 392e 3939   "amount": "9.99
+00019570: 3530 3030 3030 3030 222c 0a20 2020 2020  50000000",.     
+00019580: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+00019590: 2020 2020 2020 2020 2020 2020 2266 6565              "fee
+000195a0: 223a 2022 302e 3030 3530 3030 3030 3030  ": "0.0050000000
+000195b0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
 000195c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000195d0: 2022 6665 6522 3a20 2230 2e30 3035 3030   "fee": "0.00500
-000195e0: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
+000195d0: 2020 2022 7469 6d65 223a 2020 3135 3330     "time":  1530
+000195e0: 3438 3137 3530 2c0a 2020 2020 2020 2020  481750,.        
 000195f0: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019600: 2020 2020 2020 2020 2274 696d 6522 3a20          "time": 
-00019610: 2031 3533 3034 3831 3735 302c 0a20 2020   1530481750,.   
-00019620: 2020 2020 2023 2020 2020 2020 2020 2020       #          
-00019630: 2020 2020 2020 2020 2020 2022 7374 6174             "stat
-00019640: 7573 223a 2022 5375 6363 6573 7322 2020  us": "Success"  
-00019650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019660: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019670: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019680: 2020 2020 2020 2020 2020 207d 5d7d 0a20             }]}. 
-00019690: 2020 2020 2020 2023 2077 6974 6820 7061         # with pa
-000196a0: 6769 6e61 7469 6f6e 0a20 2020 2020 2020  gination.       
-000196b0: 2023 2020 2020 7b0a 2020 2020 2020 2020   #    {.        
-000196c0: 2320 2020 2020 2020 2022 6572 726f 7222  #        "error"
-000196d0: 3a5b 5d2c 0a20 2020 2020 2020 2023 2020  :[],.        #  
-000196e0: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
-000196f0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-00019700: 2020 2020 2022 7769 7468 6472 6177 616c       "withdrawal
-00019710: 7322 3a5b 0a20 2020 2020 2020 2023 2020  s":[.        #  
-00019720: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
-00019730: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019740: 2020 2020 2020 2020 226d 6574 686f 6422          "method"
-00019750: 3a22 5465 7468 6572 2055 5344 2854 5243  :"Tether USD(TRC
-00019760: 3230 2922 2c0a 2020 2020 2020 2020 2320  20)",.        # 
-00019770: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00019780: 2261 636c 6173 7322 3a22 6375 7272 656e  "aclass":"curren
-00019790: 6379 222c 0a20 2020 2020 2020 2023 2020  cy",.        #  
-000197a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-000197b0: 6173 7365 7422 3a22 5553 4454 222c 0a20  asset":"USDT",. 
-000197c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000197d0: 2020 2020 2020 2020 2022 7265 6669 6422           "refid"
-000197e0: 3a22 4253 4e46 5a55 322d 4d45 464e 3447  :"BSNFZU2-MEFN4G
-000197f0: 2d4a 334e 455a 5622 2c0a 2020 2020 2020  -J3NEZV",.      
-00019800: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-00019810: 2020 2020 2274 7869 6422 3a22 3163 3761      "txid":"1c7a
-00019820: 3634 3266 6237 3338 3762 6263 3263 3661  642fb7387bbc2c6a
-00019830: 3263 3530 3966 6431 6165 3134 3639 3337  2c509fd1ae146937
-00019840: 6634 6366 3739 3362 3430 3739 6134 6630  f4cf793b4079a4f0
-00019850: 3731 3565 3361 3032 3631 3561 222c 0a20  715e3a02615a",. 
-00019860: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-00019870: 2020 2020 2020 2020 2022 696e 666f 223a           "info":
-00019880: 2254 516d 6478 5375 4331 3645 6846 6738  "TQmdxSuC16EhFg8
-00019890: 465a 5774 5967 7266 4652 6f73 6f52 4637  FZWtYgrfFRosoRF7
-000198a0: 6243 7022 2c0a 2020 2020 2020 2020 2320  bCp",.        # 
-000198b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000198c0: 2261 6d6f 756e 7422 3a22 3139 3936 2e35  "amount":"1996.5
-000198d0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
-000198e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000198f0: 2020 2020 2266 6565 223a 2232 2e35 3030      "fee":"2.500
-00019900: 3030 3030 3022 2c0a 2020 2020 2020 2020  00000",.        
-00019910: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-00019920: 2020 2274 696d 6522 3a31 3636 3931 3236    "time":1669126
-00019930: 3635 372c 0a20 2020 2020 2020 2023 2020  657,.        #  
-00019940: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00019950: 7374 6174 7573 223a 2253 7563 6365 7373  status":"Success
-00019960: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
-00019970: 2020 2020 2020 2020 2020 2020 2022 6b65               "ke
-00019980: 7922 3a22 706f 6c6f 6e69 6578 222c 0a20  y":"poloniex",. 
-00019990: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-000199a0: 2020 2020 2020 2020 2022 6e65 7477 6f72           "networ
-000199b0: 6b22 3a22 5472 6f6e 220a 2020 2020 2020  k":"Tron".      
-000199c0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-000199d0: 207d 2c0a 2020 2020 2020 2020 2320 2020   },.        #   
-000199e0: 2020 2020 2020 2020 2020 2e2e 2e0a 2020            ....  
-000199f0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-00019a00: 2020 5d2c 0a20 2020 2020 2020 2023 2020    ],.        #  
-00019a10: 2020 2020 2020 2020 2022 6e65 7874 5f63           "next_c
-00019a20: 7572 736f 7222 3a22 4867 4141 4141 4141  ursor":"HgAAAAAA
-00019a30: 4141 4247 5646 5253 6433 6b31 4c56 4634  AABGVFRSd3k1LVF4
-00019a40: 5930 4a51 5930 3547 6430 7852 5930 4e78  Y0JQY05Gd0xRY0Nx
-00019a50: 656e 466e 6448 7079 626b 7742 4151 4832  enFndHpybkwBAQH2
-00019a60: 4177 4542 4141 4141 4151 4141 4141 4141  AwEBAAAAAQAAAAAA
-00019a70: 4141 4142 4141 4141 4141 415a 4141 4141  AAABAAAAAAAZAAAA
-00019a80: 4141 4141 4141 3d3d 220a 2020 2020 2020  AAAAAA==".      
-00019a90: 2020 2320 2020 2020 2020 207d 0a20 2020    #        }.   
-00019aa0: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
-00019ab0: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
-00019ac0: 6177 5769 7468 6472 6177 616c 7320 3d20  awWithdrawals = 
-00019ad0: 4e6f 6e65 0a20 2020 2020 2020 2072 6573  None.        res
-00019ae0: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
-00019af0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
-00019b00: 2772 6573 756c 7427 290a 2020 2020 2020  'result').      
-00019b10: 2020 6966 206e 6f74 2069 7369 6e73 7461    if not isinsta
-00019b20: 6e63 6528 7265 7375 6c74 2c20 6c69 7374  nce(result, list
-00019b30: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00019b40: 6177 5769 7468 6472 6177 616c 7320 3d20  awWithdrawals = 
-00019b50: 7365 6c66 2e61 6464 5f70 6167 696e 6174  self.add_paginat
-00019b60: 696f 6e5f 6375 7273 6f72 5f74 6f5f 7265  ion_cursor_to_re
-00019b70: 7375 6c74 2872 6573 756c 7429 0a20 2020  sult(result).   
-00019b80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00019b90: 2020 2020 2020 2072 6177 5769 7468 6472         rawWithdr
-00019ba0: 6177 616c 7320 3d20 7265 7375 6c74 0a20  awals = result. 
-00019bb0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00019bc0: 6c66 2e70 6172 7365 5f74 7261 6e73 6163  lf.parse_transac
-00019bd0: 7469 6f6e 735f 6279 5f74 7970 6528 2777  tions_by_type('w
-00019be0: 6974 6864 7261 7761 6c27 2c20 7261 7757  ithdrawal', rawW
-00019bf0: 6974 6864 7261 7761 6c73 2c20 636f 6465  ithdrawals, code
-00019c00: 2c20 7369 6e63 652c 206c 696d 6974 290a  , since, limit).
-00019c10: 0a20 2020 2064 6566 2061 6464 5f70 6167  .    def add_pag
-00019c20: 696e 6174 696f 6e5f 6375 7273 6f72 5f74  ination_cursor_t
-00019c30: 6f5f 7265 7375 6c74 2873 656c 662c 2072  o_result(self, r
-00019c40: 6573 756c 7429 3a0a 2020 2020 2020 2020  esult):.        
-00019c50: 6375 7273 6f72 203d 2073 656c 662e 7361  cursor = self.sa
-00019c60: 6665 5f73 7472 696e 6728 7265 7375 6c74  fe_string(result
-00019c70: 2c20 276e 6578 745f 6375 7273 6f72 2729  , 'next_cursor')
-00019c80: 0a20 2020 2020 2020 2064 6174 6120 3d20  .        data = 
-00019c90: 7365 6c66 2e73 6166 655f 7661 6c75 6528  self.safe_value(
-00019ca0: 7265 7375 6c74 2c20 2777 6974 6864 7261  result, 'withdra
-00019cb0: 7761 6c73 2729 0a20 2020 2020 2020 2064  wals').        d
-00019cc0: 6174 614c 656e 6774 6820 3d20 6c65 6e28  ataLength = len(
-00019cd0: 6461 7461 290a 2020 2020 2020 2020 6966  data).        if
-00019ce0: 2063 7572 736f 7220 6973 206e 6f74 204e   cursor is not N
-00019cf0: 6f6e 6520 616e 6420 6461 7461 4c65 6e67  one and dataLeng
-00019d00: 7468 203e 2030 3a0a 2020 2020 2020 2020  th > 0:.        
-00019d10: 2020 2020 6c61 7374 203d 2064 6174 615b      last = data[
-00019d20: 6461 7461 4c65 6e67 7468 202d 2031 5d0a  dataLength - 1].
-00019d30: 2020 2020 2020 2020 2020 2020 6c61 7374              last
-00019d40: 5b27 6e65 7874 5f63 7572 736f 7227 5d20  ['next_cursor'] 
-00019d50: 3d20 6375 7273 6f72 0a20 2020 2020 2020  = cursor.       
-00019d60: 2020 2020 2064 6174 615b 6461 7461 4c65       data[dataLe
-00019d70: 6e67 7468 202d 2031 5d20 3d20 6c61 7374  ngth - 1] = last
-00019d80: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00019d90: 6461 7461 0a0a 2020 2020 6465 6620 6372  data..    def cr
-00019da0: 6561 7465 5f64 6570 6f73 6974 5f61 6464  eate_deposit_add
-00019db0: 7265 7373 2873 656c 662c 2063 6f64 653a  ress(self, code:
-00019dc0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-00019dd0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-00019de0: 2020 2020 2020 6372 6561 7465 2061 2063        create a c
-00019df0: 7572 7265 6e63 7920 6465 706f 7369 7420  urrency deposit 
-00019e00: 6164 6472 6573 730a 2020 2020 2020 2020  address.        
-00019e10: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
-00019e20: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
-00019e30: 7374 2f23 7461 672f 4675 6e64 696e 672f  st/#tag/Funding/
-00019e40: 6f70 6572 6174 696f 6e2f 6765 7444 6570  operation/getDep
-00019e50: 6f73 6974 4164 6472 6573 7365 730a 2020  ositAddresses.  
-00019e60: 2020 2020 2020 3a70 6172 616d 2073 7472        :param str
-00019e70: 2063 6f64 653a 2075 6e69 6669 6564 2063   code: unified c
-00019e80: 7572 7265 6e63 7920 636f 6465 206f 6620  urrency code of 
-00019e90: 7468 6520 6375 7272 656e 6379 2066 6f72  the currency for
-00019ea0: 2074 6865 2064 6570 6f73 6974 2061 6464   the deposit add
-00019eb0: 7265 7373 0a20 2020 2020 2020 203a 7061  ress.        :pa
-00019ec0: 7261 6d20 6469 6374 205b 7061 7261 6d73  ram dict [params
-00019ed0: 5d3a 2065 7874 7261 2070 6172 616d 6574  ]: extra paramet
-00019ee0: 6572 7320 7370 6563 6966 6963 2074 6f20  ers specific to 
-00019ef0: 7468 6520 6578 6368 616e 6765 2041 5049  the exchange API
-00019f00: 2065 6e64 706f 696e 740a 2020 2020 2020   endpoint.      
-00019f10: 2020 3a72 6574 7572 6e73 2064 6963 743a    :returns dict:
-00019f20: 2061 6e20 6061 6464 7265 7373 2073 7472   an `address str
-00019f30: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
-00019f40: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-00019f50: 3f69 643d 6164 6472 6573 732d 7374 7275  ?id=address-stru
-00019f60: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
-00019f70: 2222 220a 2020 2020 2020 2020 7265 7175  """.        requ
-00019f80: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-00019f90: 2020 2020 276e 6577 273a 2027 7472 7565      'new': 'true
-00019fa0: 272c 0a20 2020 2020 2020 207d 0a20 2020  ',.        }.   
-00019fb0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00019fc0: 2e66 6574 6368 5f64 6570 6f73 6974 5f61  .fetch_deposit_a
-00019fd0: 6464 7265 7373 2863 6f64 652c 2073 656c  ddress(code, sel
-00019fe0: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-00019ff0: 2c20 7061 7261 6d73 2929 0a0a 2020 2020  , params))..    
-0001a000: 6465 6620 6665 7463 685f 6465 706f 7369  def fetch_deposi
-0001a010: 745f 6d65 7468 6f64 7328 7365 6c66 2c20  t_methods(self, 
-0001a020: 636f 6465 3a20 7374 722c 2070 6172 616d  code: str, param
-0001a030: 733d 7b7d 293a 0a20 2020 2020 2020 2022  s={}):.        "
-0001a040: 2222 0a20 2020 2020 2020 2066 6574 6368  "".        fetch
-0001a050: 2064 6570 6f73 6974 206d 6574 686f 6473   deposit methods
-0001a060: 2066 6f72 2061 2063 7572 7265 6e63 7920   for a currency 
-0001a070: 6173 736f 6369 6174 6564 2077 6974 6820  associated with 
-0001a080: 7365 6c66 2061 6363 6f75 6e74 0a20 2020  self account.   
-0001a090: 2020 2020 203a 7365 653a 2068 7474 7073       :see: https
-0001a0a0: 3a2f 2f64 6f63 732e 6b72 616b 656e 2e63  ://docs.kraken.c
-0001a0b0: 6f6d 2f72 6573 742f 2374 6167 2f46 756e  om/rest/#tag/Fun
-0001a0c0: 6469 6e67 2f6f 7065 7261 7469 6f6e 2f67  ding/operation/g
-0001a0d0: 6574 4465 706f 7369 744d 6574 686f 6473  etDepositMethods
-0001a0e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0001a0f0: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
-0001a100: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-0001a110: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
-0001a120: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
-0001a130: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
-0001a140: 7065 6369 6669 6320 746f 2074 6865 206b  pecific to the k
-0001a150: 7261 6b65 6e20 6170 6920 656e 6470 6f69  raken api endpoi
-0001a160: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
-0001a170: 726e 7320 6469 6374 3a20 6f66 2064 6570  rns dict: of dep
-0001a180: 6f73 6974 206d 6574 686f 6473 0a20 2020  osit methods.   
-0001a190: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001a1a0: 2073 656c 662e 6c6f 6164 5f6d 6172 6b65   self.load_marke
-0001a1b0: 7473 2829 0a20 2020 2020 2020 2063 7572  ts().        cur
-0001a1c0: 7265 6e63 7920 3d20 7365 6c66 2e63 7572  rency = self.cur
-0001a1d0: 7265 6e63 7928 636f 6465 290a 2020 2020  rency(code).    
-0001a1e0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
-0001a1f0: 2020 2020 2020 2020 2020 2020 2761 7373              'ass
-0001a200: 6574 273a 2063 7572 7265 6e63 795b 2769  et': currency['i
-0001a210: 6427 5d2c 0a20 2020 2020 2020 207d 0a20  d'],.        }. 
-0001a220: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
-0001a230: 3d20 7365 6c66 2e70 7269 7661 7465 506f  = self.privatePo
-0001a240: 7374 4465 706f 7369 744d 6574 686f 6473  stDepositMethods
-0001a250: 2873 656c 662e 6578 7465 6e64 2872 6571  (self.extend(req
-0001a260: 7565 7374 2c20 7061 7261 6d73 2929 0a20  uest, params)). 
-0001a270: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0001a280: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0001a290: 2023 2020 2020 2020 2020 2022 6572 726f   #         "erro
-0001a2a0: 7222 3a5b 5d2c 0a20 2020 2020 2020 2023  r":[],.        #
-0001a2b0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0001a2c0: 223a 5b0a 2020 2020 2020 2020 2320 2020  ":[.        #   
-0001a2d0: 2020 2020 2020 2020 2020 7b22 6d65 7468            {"meth
-0001a2e0: 6f64 223a 2245 7468 6572 2848 6578 2922  od":"Ether(Hex)"
-0001a2f0: 2c22 6c69 6d69 7422 3a66 616c 7365 2c22  ,"limit":false,"
-0001a300: 6765 6e2d 6164 6472 6573 7322 3a74 7275  gen-address":tru
-0001a310: 657d 0a20 2020 2020 2020 2023 2020 2020  e}.        #    
-0001a320: 2020 2020 205d 0a20 2020 2020 2020 2023       ].        #
-0001a330: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
-0001a340: 0a20 2020 2020 2020 2023 2020 2020 207b  .        #     {
-0001a350: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0001a360: 2020 2022 6572 726f 7222 3a5b 5d2c 0a20     "error":[],. 
-0001a370: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001a380: 2022 7265 7375 6c74 223a 5b0a 2020 2020   "result":[.    
-0001a390: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0001a3a0: 2020 7b22 6d65 7468 6f64 223a 2254 6574    {"method":"Tet
-0001a3b0: 6865 7220 5553 4428 4552 4332 3029 222c  her USD(ERC20)",
-0001a3c0: 226c 696d 6974 223a 6661 6c73 652c 2261  "limit":false,"a
-0001a3d0: 6464 7265 7373 2d73 6574 7570 2d66 6565  ddress-setup-fee
-0001a3e0: 223a 2230 2e30 3030 3030 3030 3022 2c22  ":"0.00000000","
-0001a3f0: 6765 6e2d 6164 6472 6573 7322 3a74 7275  gen-address":tru
-0001a400: 657d 2c0a 2020 2020 2020 2020 2320 2020  e},.        #   
-0001a410: 2020 2020 2020 2020 2020 7b22 6d65 7468            {"meth
-0001a420: 6f64 223a 2254 6574 6865 7220 5553 4428  od":"Tether USD(
-0001a430: 5452 4332 3029 222c 226c 696d 6974 223a  TRC20)","limit":
-0001a440: 6661 6c73 652c 2261 6464 7265 7373 2d73  false,"address-s
-0001a450: 6574 7570 2d66 6565 223a 2230 2e30 3030  etup-fee":"0.000
-0001a460: 3030 3030 3022 2c22 6765 6e2d 6164 6472  00000","gen-addr
-0001a470: 6573 7322 3a74 7275 657d 0a20 2020 2020  ess":true}.     
-0001a480: 2020 2023 2020 2020 2020 2020 205d 0a20     #         ]. 
-0001a490: 2020 2020 2020 2023 2020 2020 207d 0a20         #     }. 
-0001a4a0: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
-0001a4b0: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
-0001a4c0: 2023 2020 2020 2020 2020 2022 6572 726f   #         "erro
-0001a4d0: 7222 3a5b 5d2c 0a20 2020 2020 2020 2023  r":[],.        #
-0001a4e0: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0001a4f0: 223a 5b0a 2020 2020 2020 2020 2320 2020  ":[.        #   
-0001a500: 2020 2020 2020 2020 2020 7b22 6d65 7468            {"meth
-0001a510: 6f64 223a 2242 6974 636f 696e 222c 226c  od":"Bitcoin","l
-0001a520: 696d 6974 223a 6661 6c73 652c 2266 6565  imit":false,"fee
-0001a530: 223a 2230 2e30 3030 3030 3030 3030 3022  ":"0.0000000000"
-0001a540: 2c22 6765 6e2d 6164 6472 6573 7322 3a74  ,"gen-address":t
-0001a550: 7275 657d 0a20 2020 2020 2020 2023 2020  rue}.        #  
-0001a560: 2020 2020 2020 205d 0a20 2020 2020 2020         ].       
-0001a570: 2023 2020 2020 207d 0a20 2020 2020 2020   #     }.       
-0001a580: 2023 0a20 2020 2020 2020 2072 6574 7572   #.        retur
-0001a590: 6e20 7365 6c66 2e73 6166 655f 7661 6c75  n self.safe_valu
-0001a5a0: 6528 7265 7370 6f6e 7365 2c20 2772 6573  e(response, 'res
-0001a5b0: 756c 7427 290a 0a20 2020 2064 6566 2066  ult')..    def f
-0001a5c0: 6574 6368 5f64 6570 6f73 6974 5f61 6464  etch_deposit_add
-0001a5d0: 7265 7373 2873 656c 662c 2063 6f64 653a  ress(self, code:
-0001a5e0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
-0001a5f0: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
-0001a600: 2020 2020 2020 6665 7463 6820 7468 6520        fetch the 
-0001a610: 6465 706f 7369 7420 6164 6472 6573 7320  deposit address 
-0001a620: 666f 7220 6120 6375 7272 656e 6379 2061  for a currency a
-0001a630: 7373 6f63 6961 7465 6420 7769 7468 2073  ssociated with s
-0001a640: 656c 6620 6163 636f 756e 740a 2020 2020  elf account.    
-0001a650: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-0001a660: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-0001a670: 6d2f 7265 7374 2f23 7461 672f 4675 6e64  m/rest/#tag/Fund
-0001a680: 696e 672f 6f70 6572 6174 696f 6e2f 6765  ing/operation/ge
-0001a690: 7444 6570 6f73 6974 4164 6472 6573 7365  tDepositAddresse
-0001a6a0: 730a 2020 2020 2020 2020 3a70 6172 616d  s.        :param
-0001a6b0: 2073 7472 2063 6f64 653a 2075 6e69 6669   str code: unifi
-0001a6c0: 6564 2063 7572 7265 6e63 7920 636f 6465  ed currency code
-0001a6d0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0001a6e0: 6469 6374 205b 7061 7261 6d73 5d3a 2065  dict [params]: e
-0001a6f0: 7874 7261 2070 6172 616d 6574 6572 7320  xtra parameters 
-0001a700: 7370 6563 6966 6963 2074 6f20 7468 6520  specific to the 
-0001a710: 6578 6368 616e 6765 2041 5049 2065 6e64  exchange API end
-0001a720: 706f 696e 740a 2020 2020 2020 2020 3a72  point.        :r
-0001a730: 6574 7572 6e73 2064 6963 743a 2061 6e20  eturns dict: an 
-0001a740: 6061 6464 7265 7373 2073 7472 7563 7475  `address structu
-0001a750: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
-0001a760: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
-0001a770: 6164 6472 6573 732d 7374 7275 6374 7572  address-structur
-0001a780: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
-0001a790: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
-0001a7a0: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
-0001a7b0: 2020 2020 6375 7272 656e 6379 203d 2073      currency = s
-0001a7c0: 656c 662e 6375 7272 656e 6379 2863 6f64  elf.currency(cod
-0001a7d0: 6529 0a20 2020 2020 2020 206e 6574 776f  e).        netwo
-0001a7e0: 726b 203d 2073 656c 662e 7361 6665 5f73  rk = self.safe_s
-0001a7f0: 7472 696e 675f 7570 7065 7228 7061 7261  tring_upper(para
-0001a800: 6d73 2c20 276e 6574 776f 726b 2729 0a20  ms, 'network'). 
-0001a810: 2020 2020 2020 206e 6574 776f 726b 7320         networks 
-0001a820: 3d20 7365 6c66 2e73 6166 655f 7661 6c75  = self.safe_valu
-0001a830: 6528 7365 6c66 2e6f 7074 696f 6e73 2c20  e(self.options, 
-0001a840: 276e 6574 776f 726b 7327 2c20 7b7d 290a  'networks', {}).
-0001a850: 2020 2020 2020 2020 6e65 7477 6f72 6b20          network 
-0001a860: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0001a870: 6e67 286e 6574 776f 726b 732c 206e 6574  ng(networks, net
-0001a880: 776f 726b 2c20 6e65 7477 6f72 6b29 2020  work, network)  
-0001a890: 2320 7375 7070 6f72 7420 4554 4820 3e20  # support ETH > 
-0001a8a0: 4552 4332 3020 616c 6961 7365 730a 2020  ERC20 aliases.  
-0001a8b0: 2020 2020 2020 7061 7261 6d73 203d 2073        params = s
-0001a8c0: 656c 662e 6f6d 6974 2870 6172 616d 732c  elf.omit(params,
-0001a8d0: 2027 6e65 7477 6f72 6b27 290a 2020 2020   'network').    
-0001a8e0: 2020 2020 6966 2028 636f 6465 203d 3d20      if (code == 
-0001a8f0: 2755 5344 5427 2920 616e 6420 286e 6574  'USDT') and (net
-0001a900: 776f 726b 203d 3d20 2754 5243 3230 2729  work == 'TRC20')
-0001a910: 3a0a 2020 2020 2020 2020 2020 2020 636f  :.            co
-0001a920: 6465 203d 2063 6f64 6520 2b20 272d 2720  de = code + '-' 
-0001a930: 2b20 6e65 7477 6f72 6b0a 2020 2020 2020  + network.      
-0001a940: 2020 6465 6661 756c 7444 6570 6f73 6974    defaultDeposit
-0001a950: 4d65 7468 6f64 7320 3d20 7365 6c66 2e73  Methods = self.s
-0001a960: 6166 655f 7661 6c75 6528 7365 6c66 2e6f  afe_value(self.o
-0001a970: 7074 696f 6e73 2c20 2764 6570 6f73 6974  ptions, 'deposit
-0001a980: 4d65 7468 6f64 7327 2c20 7b7d 290a 2020  Methods', {}).  
-0001a990: 2020 2020 2020 6465 6661 756c 7444 6570        defaultDep
-0001a9a0: 6f73 6974 4d65 7468 6f64 203d 2073 656c  ositMethod = sel
-0001a9b0: 662e 7361 6665 5f73 7472 696e 6728 6465  f.safe_string(de
-0001a9c0: 6661 756c 7444 6570 6f73 6974 4d65 7468  faultDepositMeth
-0001a9d0: 6f64 732c 2063 6f64 6529 0a20 2020 2020  ods, code).     
-0001a9e0: 2020 2064 6570 6f73 6974 4d65 7468 6f64     depositMethod
-0001a9f0: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0001aa00: 696e 6728 7061 7261 6d73 2c20 276d 6574  ing(params, 'met
-0001aa10: 686f 6427 2c20 6465 6661 756c 7444 6570  hod', defaultDep
-0001aa20: 6f73 6974 4d65 7468 6f64 290a 2020 2020  ositMethod).    
-0001aa30: 2020 2020 2320 6966 2074 6865 2075 7365      # if the use
-0001aa40: 7220 6861 7320 7370 6563 6966 6965 6420  r has specified 
-0001aa50: 616e 2065 7863 6861 6e67 652d 7370 6563  an exchange-spec
-0001aa60: 6966 6963 206d 6574 686f 6420 696e 2070  ific method in p
-0001aa70: 6172 616d 730a 2020 2020 2020 2020 2320  arams.        # 
-0001aa80: 7765 2070 6173 7320 6974 2c20 6f74 6865  we pass it, othe
-0001aa90: 7277 6973 6520 7765 2074 616b 6520 7468  rwise we take th
-0001aaa0: 6520 276e 6574 776f 726b 2720 756e 6966  e 'network' unif
-0001aab0: 6965 6420 7061 7261 6d0a 2020 2020 2020  ied param.      
-0001aac0: 2020 6966 2064 6570 6f73 6974 4d65 7468    if depositMeth
-0001aad0: 6f64 2069 7320 4e6f 6e65 3a0a 2020 2020  od is None:.    
-0001aae0: 2020 2020 2020 2020 6465 706f 7369 744d          depositM
-0001aaf0: 6574 686f 6473 203d 2073 656c 662e 6665  ethods = self.fe
-0001ab00: 7463 685f 6465 706f 7369 745f 6d65 7468  tch_deposit_meth
-0001ab10: 6f64 7328 636f 6465 290a 2020 2020 2020  ods(code).      
-0001ab20: 2020 2020 2020 6966 206e 6574 776f 726b        if network
-0001ab30: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0001ab40: 2020 2020 2020 2020 2020 2020 2020 2320                # 
-0001ab50: 6669 6e64 2062 6573 7420 6d61 7463 6869  find best matchi
-0001ab60: 6e67 2064 6570 6f73 6974 206d 6574 686f  ng deposit metho
-0001ab70: 642c 206f 7220 6661 6c6c 6261 636b 2074  d, or fallback t
-0001ab80: 6f20 7468 6520 6669 7273 7420 6f6e 650a  o the first one.
-0001ab90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001aba0: 666f 7220 6920 696e 2072 616e 6765 2830  for i in range(0
-0001abb0: 2c20 6c65 6e28 6465 706f 7369 744d 6574  , len(depositMet
-0001abc0: 686f 6473 2929 3a0a 2020 2020 2020 2020  hods)):.        
-0001abd0: 2020 2020 2020 2020 2020 2020 656e 7472              entr
-0001abe0: 7920 3d20 7365 6c66 2e73 6166 655f 7374  y = self.safe_st
-0001abf0: 7269 6e67 2864 6570 6f73 6974 4d65 7468  ring(depositMeth
-0001ac00: 6f64 735b 695d 2c20 276d 6574 686f 6427  ods[i], 'method'
-0001ac10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ac20: 2020 2020 2020 6966 2065 6e74 7279 2e66        if entry.f
-0001ac30: 696e 6428 6e65 7477 6f72 6b29 203e 3d20  ind(network) >= 
-0001ac40: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-0001ac50: 2020 2020 2020 2020 2020 2064 6570 6f73             depos
-0001ac60: 6974 4d65 7468 6f64 203d 2065 6e74 7279  itMethod = entry
-0001ac70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ac80: 2020 2020 2020 2020 2062 7265 616b 0a20           break. 
-0001ac90: 2020 2020 2020 2020 2020 2023 2069 6620             # if 
-0001aca0: 6465 706f 7369 744d 6574 686f 6420 7761  depositMethod wa
-0001acb0: 7320 6e6f 7420 7370 6563 6966 6965 642c  s not specified,
-0001acc0: 2066 616c 6c62 6163 6b20 746f 2074 6865   fallback to the
-0001acd0: 2066 6972 7374 2061 7661 696c 6162 6c65   first available
-0001ace0: 2064 6570 6f73 6974 206d 6574 686f 640a   deposit method.
-0001acf0: 2020 2020 2020 2020 2020 2020 6966 2064              if d
-0001ad00: 6570 6f73 6974 4d65 7468 6f64 2069 7320  epositMethod is 
-0001ad10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0001ad20: 2020 2020 2020 6669 7273 7444 6570 6f73        firstDepos
-0001ad30: 6974 4d65 7468 6f64 203d 2073 656c 662e  itMethod = self.
-0001ad40: 7361 6665 5f76 616c 7565 2864 6570 6f73  safe_value(depos
-0001ad50: 6974 4d65 7468 6f64 732c 2030 2c20 7b7d  itMethods, 0, {}
-0001ad60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0001ad70: 2020 6465 706f 7369 744d 6574 686f 6420    depositMethod 
-0001ad80: 3d20 7365 6c66 2e73 6166 655f 7374 7269  = self.safe_stri
-0001ad90: 6e67 2866 6972 7374 4465 706f 7369 744d  ng(firstDepositM
-0001ada0: 6574 686f 642c 2027 6d65 7468 6f64 2729  ethod, 'method')
-0001adb0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0001adc0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001add0: 2027 6173 7365 7427 3a20 6375 7272 656e   'asset': curren
-0001ade0: 6379 5b27 6964 275d 2c0a 2020 2020 2020  cy['id'],.      
-0001adf0: 2020 2020 2020 276d 6574 686f 6427 3a20        'method': 
-0001ae00: 6465 706f 7369 744d 6574 686f 642c 0a20  depositMethod,. 
-0001ae10: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-0001ae20: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
-0001ae30: 2e70 7269 7661 7465 506f 7374 4465 706f  .privatePostDepo
-0001ae40: 7369 7441 6464 7265 7373 6573 2873 656c  sitAddresses(sel
-0001ae50: 662e 6578 7465 6e64 2872 6571 7565 7374  f.extend(request
-0001ae60: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-0001ae70: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0001ae80: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0001ae90: 2020 2020 2020 2022 6572 726f 7222 3a5b         "error":[
-0001aea0: 5d2c 0a20 2020 2020 2020 2023 2020 2020  ],.        #    
-0001aeb0: 2020 2020 2022 7265 7375 6c74 223a 5b0a       "result":[.
-0001aec0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001aed0: 2020 2020 2020 7b22 6164 6472 6573 7322        {"address"
-0001aee0: 3a22 3078 3737 6235 3035 3166 3937 6566  :"0x77b5051f97ef
-0001aef0: 6139 6363 3532 6339 6164 3562 3032 3361  a9cc52c9ad5b023a
-0001af00: 3533 6663 3135 6332 3030 6433 222c 2265  53fc15c200d3","e
-0001af10: 7870 6972 6574 6d22 3a22 3022 7d0a 2020  xpiretm":"0"}.  
-0001af20: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001af30: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
-0001af40: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
-0001af50: 2020 2020 7265 7375 6c74 203d 2073 656c      result = sel
-0001af60: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
-0001af70: 706f 6e73 652c 2027 7265 7375 6c74 272c  ponse, 'result',
-0001af80: 205b 5d29 0a20 2020 2020 2020 2066 6972   []).        fir
-0001af90: 7374 5265 7375 6c74 203d 2073 656c 662e  stResult = self.
-0001afa0: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
-0001afb0: 742c 2030 2c20 7b7d 290a 2020 2020 2020  t, 0, {}).      
-0001afc0: 2020 6966 2066 6972 7374 5265 7375 6c74    if firstResult
-0001afd0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-0001afe0: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
-0001aff0: 6c69 6441 6464 7265 7373 2873 656c 662e  lidAddress(self.
-0001b000: 6964 202b 2027 2070 7269 7661 7465 506f  id + ' privatePo
-0001b010: 7374 4465 706f 7369 7441 6464 7265 7373  stDepositAddress
-0001b020: 6573 2829 2072 6574 7572 6e65 6420 6e6f  es() returned no
-0001b030: 2061 6464 7265 7373 6573 2066 6f72 2027   addresses for '
-0001b040: 202b 2063 6f64 6529 0a20 2020 2020 2020   + code).       
-0001b050: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-0001b060: 7365 5f64 6570 6f73 6974 5f61 6464 7265  se_deposit_addre
-0001b070: 7373 2866 6972 7374 5265 7375 6c74 2c20  ss(firstResult, 
-0001b080: 6375 7272 656e 6379 290a 0a20 2020 2064  currency)..    d
-0001b090: 6566 2070 6172 7365 5f64 6570 6f73 6974  ef parse_deposit
-0001b0a0: 5f61 6464 7265 7373 2873 656c 662c 2064  _address(self, d
-0001b0b0: 6570 6f73 6974 4164 6472 6573 732c 2063  epositAddress, c
-0001b0c0: 7572 7265 6e63 793a 2043 7572 7265 6e63  urrency: Currenc
-0001b0d0: 7920 3d20 4e6f 6e65 293a 0a20 2020 2020  y = None):.     
-0001b0e0: 2020 2023 0a20 2020 2020 2020 2023 2020     #.        #  
-0001b0f0: 2020 207b 0a20 2020 2020 2020 2023 2020     {.        #  
-0001b100: 2020 2020 2020 2022 6164 6472 6573 7322         "address"
-0001b110: 3a22 3078 3737 6235 3035 3166 3937 6566  :"0x77b5051f97ef
-0001b120: 6139 6363 3532 6339 6164 3562 3032 3361  a9cc52c9ad5b023a
-0001b130: 3533 6663 3135 6332 3030 6433 222c 0a20  53fc15c200d3",. 
-0001b140: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001b150: 2022 6578 7069 7265 746d 223a 2230 220a   "expiretm":"0".
-0001b160: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0001b170: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0001b180: 2020 6164 6472 6573 7320 3d20 7365 6c66    address = self
-0001b190: 2e73 6166 655f 7374 7269 6e67 2864 6570  .safe_string(dep
-0001b1a0: 6f73 6974 4164 6472 6573 732c 2027 6164  ositAddress, 'ad
-0001b1b0: 6472 6573 7327 290a 2020 2020 2020 2020  dress').        
-0001b1c0: 7461 6720 3d20 7365 6c66 2e73 6166 655f  tag = self.safe_
-0001b1d0: 7374 7269 6e67 2864 6570 6f73 6974 4164  string(depositAd
-0001b1e0: 6472 6573 732c 2027 7461 6727 290a 2020  dress, 'tag').  
-0001b1f0: 2020 2020 2020 6375 7272 656e 6379 203d        currency =
-0001b200: 2073 656c 662e 7361 6665 5f63 7572 7265   self.safe_curre
-0001b210: 6e63 7928 4e6f 6e65 2c20 6375 7272 656e  ncy(None, curren
-0001b220: 6379 290a 2020 2020 2020 2020 636f 6465  cy).        code
-0001b230: 203d 2063 7572 7265 6e63 795b 2763 6f64   = currency['cod
-0001b240: 6527 5d0a 2020 2020 2020 2020 7365 6c66  e'].        self
-0001b250: 2e63 6865 636b 5f61 6464 7265 7373 2861  .check_address(a
-0001b260: 6464 7265 7373 290a 2020 2020 2020 2020  ddress).        
-0001b270: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
-0001b280: 2020 2020 2027 6375 7272 656e 6379 273a       'currency':
-0001b290: 2063 6f64 652c 0a20 2020 2020 2020 2020   code,.         
-0001b2a0: 2020 2027 6164 6472 6573 7327 3a20 6164     'address': ad
-0001b2b0: 6472 6573 732c 0a20 2020 2020 2020 2020  dress,.         
-0001b2c0: 2020 2027 7461 6727 3a20 7461 672c 0a20     'tag': tag,. 
-0001b2d0: 2020 2020 2020 2020 2020 2027 6e65 7477             'netw
-0001b2e0: 6f72 6b27 3a20 4e6f 6e65 2c0a 2020 2020  ork': None,.    
-0001b2f0: 2020 2020 2020 2020 2769 6e66 6f27 3a20          'info': 
-0001b300: 6465 706f 7369 7441 6464 7265 7373 2c0a  depositAddress,.
-0001b310: 2020 2020 2020 2020 7d0a 0a20 2020 2064          }..    d
-0001b320: 6566 2077 6974 6864 7261 7728 7365 6c66  ef withdraw(self
-0001b330: 2c20 636f 6465 3a20 7374 722c 2061 6d6f  , code: str, amo
-0001b340: 756e 743a 2066 6c6f 6174 2c20 6164 6472  unt: float, addr
-0001b350: 6573 732c 2074 6167 3d4e 6f6e 652c 2070  ess, tag=None, p
-0001b360: 6172 616d 733d 7b7d 293a 0a20 2020 2020  arams={}):.     
-0001b370: 2020 2022 2222 0a20 2020 2020 2020 206d     """.        m
-0001b380: 616b 6520 6120 7769 7468 6472 6177 616c  ake a withdrawal
-0001b390: 0a20 2020 2020 2020 203a 7365 653a 2068  .        :see: h
-0001b3a0: 7474 7073 3a2f 2f64 6f63 732e 6b72 616b  ttps://docs.krak
-0001b3b0: 656e 2e63 6f6d 2f72 6573 742f 2374 6167  en.com/rest/#tag
-0001b3c0: 2f46 756e 6469 6e67 2f6f 7065 7261 7469  /Funding/operati
-0001b3d0: 6f6e 2f77 6974 6864 7261 7746 756e 6473  on/withdrawFunds
-0001b3e0: 0a20 2020 2020 2020 203a 7061 7261 6d20  .        :param 
-0001b3f0: 7374 7220 636f 6465 3a20 756e 6966 6965  str code: unifie
-0001b400: 6420 6375 7272 656e 6379 2063 6f64 650a  d currency code.
-0001b410: 2020 2020 2020 2020 3a70 6172 616d 2066          :param f
-0001b420: 6c6f 6174 2061 6d6f 756e 743a 2074 6865  loat amount: the
-0001b430: 2061 6d6f 756e 7420 746f 2077 6974 6864   amount to withd
-0001b440: 7261 770a 2020 2020 2020 2020 3a70 6172  raw.        :par
-0001b450: 616d 2073 7472 2061 6464 7265 7373 3a20  am str address: 
-0001b460: 7468 6520 6164 6472 6573 7320 746f 2077  the address to w
-0001b470: 6974 6864 7261 7720 746f 0a20 2020 2020  ithdraw to.     
-0001b480: 2020 203a 7061 7261 6d20 7374 7220 7461     :param str ta
-0001b490: 673a 0a20 2020 2020 2020 203a 7061 7261  g:.        :para
-0001b4a0: 6d20 6469 6374 205b 7061 7261 6d73 5d3a  m dict [params]:
-0001b4b0: 2065 7874 7261 2070 6172 616d 6574 6572   extra parameter
-0001b4c0: 7320 7370 6563 6966 6963 2074 6f20 7468  s specific to th
-0001b4d0: 6520 6578 6368 616e 6765 2041 5049 2065  e exchange API e
-0001b4e0: 6e64 706f 696e 740a 2020 2020 2020 2020  ndpoint.        
-0001b4f0: 3a72 6574 7572 6e73 2064 6963 743a 2061  :returns dict: a
-0001b500: 2060 7472 616e 7361 6374 696f 6e20 7374   `transaction st
-0001b510: 7275 6374 7572 6520 3c68 7474 7073 3a2f  ructure <https:/
-0001b520: 2f64 6f63 732e 6363 7874 2e63 6f6d 2f23  /docs.ccxt.com/#
-0001b530: 2f3f 6964 3d74 7261 6e73 6163 7469 6f6e  /?id=transaction
-0001b540: 2d73 7472 7563 7475 7265 3e60 0a20 2020  -structure>`.   
-0001b550: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
-0001b560: 2074 6167 2c20 7061 7261 6d73 203d 2073   tag, params = s
-0001b570: 656c 662e 6861 6e64 6c65 5f77 6974 6864  elf.handle_withd
-0001b580: 7261 775f 7461 675f 616e 645f 7061 7261  raw_tag_and_para
-0001b590: 6d73 2874 6167 2c20 7061 7261 6d73 290a  ms(tag, params).
-0001b5a0: 2020 2020 2020 2020 7365 6c66 2e63 6865          self.che
-0001b5b0: 636b 5f61 6464 7265 7373 2861 6464 7265  ck_address(addre
-0001b5c0: 7373 290a 2020 2020 2020 2020 6966 2027  ss).        if '
-0001b5d0: 6b65 7927 2069 6e20 7061 7261 6d73 3a0a  key' in params:.
-0001b5e0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0001b5f0: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
-0001b600: 2020 2020 2020 2020 2020 2020 6375 7272              curr
-0001b610: 656e 6379 203d 2073 656c 662e 6375 7272  ency = self.curr
-0001b620: 656e 6379 2863 6f64 6529 0a20 2020 2020  ency(code).     
-0001b630: 2020 2020 2020 2072 6571 7565 7374 203d         request =
-0001b640: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
-0001b650: 2020 2027 6173 7365 7427 3a20 6375 7272     'asset': curr
-0001b660: 656e 6379 5b27 6964 275d 2c0a 2020 2020  ency['id'],.    
-0001b670: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-0001b680: 756e 7427 3a20 616d 6f75 6e74 2c0a 2020  unt': amount,.  
-0001b690: 2020 2020 2020 2020 2020 2020 2020 2761                'a
-0001b6a0: 6464 7265 7373 273a 2061 6464 7265 7373  ddress': address
-0001b6b0: 2c0a 2020 2020 2020 2020 2020 2020 7d0a  ,.            }.
-0001b6c0: 2020 2020 2020 2020 2020 2020 7265 7370              resp
-0001b6d0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
-0001b6e0: 6174 6550 6f73 7457 6974 6864 7261 7728  atePostWithdraw(
-0001b6f0: 7365 6c66 2e65 7874 656e 6428 7265 7175  self.extend(requ
-0001b700: 6573 742c 2070 6172 616d 7329 290a 2020  est, params)).  
-0001b710: 2020 2020 2020 2020 2020 230a 2020 2020            #.    
-0001b720: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
-0001b730: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0001b740: 2020 2020 2020 2265 7272 6f72 223a 205b        "error": [
-0001b750: 5d2c 0a20 2020 2020 2020 2020 2020 2023  ],.            #
-0001b760: 2020 2020 2020 2020 2022 7265 7375 6c74           "result
-0001b770: 223a 207b 0a20 2020 2020 2020 2020 2020  ": {.           
-0001b780: 2023 2020 2020 2020 2020 2020 2020 2022   #             "
-0001b790: 7265 6669 6422 3a20 2241 4742 534f 3654  refid": "AGBSO6T
-0001b7a0: 2d55 464d 5454 512d 4937 4b47 5336 220a  -UFMTTQ-I7KGS6".
-0001b7b0: 2020 2020 2020 2020 2020 2020 2320 2020              #   
-0001b7c0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0001b7d0: 2020 2020 2320 2020 2020 7d0a 2020 2020      #     }.    
-0001b7e0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0001b7f0: 2020 2020 2020 7265 7375 6c74 203d 2073        result = s
-0001b800: 656c 662e 7361 6665 5f64 6963 7428 7265  elf.safe_dict(re
-0001b810: 7370 6f6e 7365 2c20 2772 6573 756c 7427  sponse, 'result'
-0001b820: 2c20 7b7d 290a 2020 2020 2020 2020 2020  , {}).          
-0001b830: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-0001b840: 7273 655f 7472 616e 7361 6374 696f 6e28  rse_transaction(
-0001b850: 7265 7375 6c74 2c20 6375 7272 656e 6379  result, currency
-0001b860: 290a 2020 2020 2020 2020 7261 6973 6520  ).        raise 
-0001b870: 4578 6368 616e 6765 4572 726f 7228 7365  ExchangeError(se
-0001b880: 6c66 2e69 6420 2b20 2220 7769 7468 6472  lf.id + " withdr
-0001b890: 6177 2829 2072 6571 7569 7265 7320 6120  aw() requires a 
-0001b8a0: 276b 6579 2720 7061 7261 6d65 7465 7228  'key' parameter(
-0001b8b0: 7769 7468 6472 6177 616c 206b 6579 206e  withdrawal key n
-0001b8c0: 616d 652c 2075 7020 6f6e 2079 6f75 7220  ame, up on your 
-0001b8d0: 6163 636f 756e 7429 2229 0a0a 2020 2020  account)")..    
-0001b8e0: 6465 6620 6665 7463 685f 706f 7369 7469  def fetch_positi
-0001b8f0: 6f6e 7328 7365 6c66 2c20 7379 6d62 6f6c  ons(self, symbol
-0001b900: 733a 2053 7472 696e 6773 203d 204e 6f6e  s: Strings = Non
-0001b910: 652c 2070 6172 616d 733d 7b7d 293a 0a20  e, params={}):. 
-0001b920: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
-0001b930: 2020 2066 6574 6368 2061 6c6c 206f 7065     fetch all ope
-0001b940: 6e20 706f 7369 7469 6f6e 730a 2020 2020  n positions.    
-0001b950: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-0001b960: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-0001b970: 6d2f 7265 7374 2f23 7461 672f 4163 636f  m/rest/#tag/Acco
-0001b980: 756e 742d 4461 7461 2f6f 7065 7261 7469  unt-Data/operati
-0001b990: 6f6e 2f67 6574 4f70 656e 506f 7369 7469  on/getOpenPositi
-0001b9a0: 6f6e 730a 2020 2020 2020 2020 3a70 6172  ons.        :par
-0001b9b0: 616d 2073 7472 5b5d 7c4e 6f6e 6520 7379  am str[]|None sy
-0001b9c0: 6d62 6f6c 733a 206e 6f74 2075 7365 6420  mbols: not used 
-0001b9d0: 6279 206b 7261 6b65 6e20 6665 7463 6850  by kraken fetchP
-0001b9e0: 6f73 6974 696f 6e73 2829 0a20 2020 2020  ositions().     
-0001b9f0: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
-0001ba00: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
-0001ba10: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
-0001ba20: 6963 2074 6f20 7468 6520 6578 6368 616e  ic to the exchan
-0001ba30: 6765 2041 5049 2065 6e64 706f 696e 740a  ge API endpoint.
-0001ba40: 2020 2020 2020 2020 3a72 6574 7572 6e73          :returns
-0001ba50: 2064 6963 745b 5d3a 2061 206c 6973 7420   dict[]: a list 
-0001ba60: 6f66 2060 706f 7369 7469 6f6e 2073 7472  of `position str
-0001ba70: 7563 7475 7265 203c 6874 7470 733a 2f2f  ucture <https://
-0001ba80: 646f 6373 2e63 6378 742e 636f 6d2f 232f  docs.ccxt.com/#/
-0001ba90: 3f69 643d 706f 7369 7469 6f6e 2d73 7472  ?id=position-str
-0001baa0: 7563 7475 7265 3e60 0a20 2020 2020 2020  ucture>`.       
-0001bab0: 2022 2222 0a20 2020 2020 2020 2073 656c   """.        sel
-0001bac0: 662e 6c6f 6164 5f6d 6172 6b65 7473 2829  f.load_markets()
-0001bad0: 0a20 2020 2020 2020 2072 6571 7565 7374  .        request
-0001bae0: 203d 207b 0a20 2020 2020 2020 2020 2020   = {.           
-0001baf0: 2023 2027 7478 6964 273a 2027 636f 6d6d   # 'txid': 'comm
-0001bb00: 6120 6465 6c69 6d69 7465 6420 6c69 7374  a delimited list
-0001bb10: 206f 6620 7472 616e 7361 6374 696f 6e20   of transaction 
-0001bb20: 6964 7320 746f 2072 6573 7472 6963 7420  ids to restrict 
-0001bb30: 6f75 7470 7574 2074 6f27 2c0a 2020 2020  output to',.    
-0001bb40: 2020 2020 2020 2020 2320 2764 6f63 616c          # 'docal
-0001bb50: 6373 273a 2046 616c 7365 2c20 2023 2077  cs': False,  # w
-0001bb60: 6865 7468 6572 206f 7220 6e6f 7420 746f  hether or not to
-0001bb70: 2069 6e63 6c75 6465 2070 726f 6669 742f   include profit/
-0001bb80: 6c6f 7373 2063 616c 6375 6c61 7469 6f6e  loss calculation
-0001bb90: 730a 2020 2020 2020 2020 2020 2020 2320  s.            # 
-0001bba0: 2763 6f6e 736f 6c69 6461 7469 6f6e 273a  'consolidation':
-0001bbb0: 2027 6d61 726b 6574 272c 2020 2320 7768   'market',  # wh
-0001bbc0: 6174 2074 6f20 636f 6e73 6f6c 6964 6174  at to consolidat
-0001bbd0: 6520 7468 6520 706f 7369 7469 6f6e 7320  e the positions 
-0001bbe0: 6461 7461 2061 726f 756e 642c 206d 6172  data around, mar
-0001bbf0: 6b65 7420 7769 6c6c 2063 6f6e 736f 6c69  ket will consoli
-0001bc00: 6461 7465 2070 6f73 6974 696f 6e73 2062  date positions b
-0001bc10: 6173 6564 206f 6e20 6d61 726b 6574 2070  ased on market p
-0001bc20: 6169 720a 2020 2020 2020 2020 7d0a 2020  air.        }.  
-0001bc30: 2020 2020 2020 7265 7370 6f6e 7365 203d        response =
-0001bc40: 2073 656c 662e 7072 6976 6174 6550 6f73   self.privatePos
-0001bc50: 744f 7065 6e50 6f73 6974 696f 6e73 2873  tOpenPositions(s
-0001bc60: 656c 662e 6578 7465 6e64 2872 6571 7565  elf.extend(reque
-0001bc70: 7374 2c20 7061 7261 6d73 2929 0a20 2020  st, params)).   
-0001bc80: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
-0001bc90: 206e 6f20 636f 6e73 6f6c 6964 6174 696f   no consolidatio
-0001bca0: 6e0a 2020 2020 2020 2020 230a 2020 2020  n.        #.    
-0001bcb0: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
-0001bcc0: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
-0001bcd0: 7272 6f72 223a 205b 5d2c 0a20 2020 2020  rror": [],.     
-0001bce0: 2020 2023 2020 2020 2020 2020 2022 7265     #         "re
-0001bcf0: 7375 6c74 223a 207b 0a20 2020 2020 2020  sult": {.       
-0001bd00: 2023 2020 2020 2020 2020 2020 2020 2027   #             '
-0001bd10: 5447 5546 4d59 2d46 4c45 534a 2d56 5949  TGUFMY-FLESJ-VYI
-0001bd20: 5833 4a27 3a20 7b0a 2020 2020 2020 2020  X3J': {.        
-0001bd30: 2320 2020 2020 2020 2020 2020 2020 2020  #               
-0001bd40: 2020 226f 7264 6572 7478 6964 223a 2022    "ordertxid": "
-0001bd50: 4f33 4c52 4e55 2d5a 4b44 4735 2d58 4e43  O3LRNU-ZKDG5-XNC
-0001bd60: 4446 5222 2c0a 2020 2020 2020 2020 2320  DFR",.        # 
-0001bd70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bd80: 2270 6f73 7374 6174 7573 223a 2022 6f70  "posstatus": "op
-0001bd90: 656e 222c 0a20 2020 2020 2020 2023 2020  en",.        #  
-0001bda0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001bdb0: 7061 6972 223a 2022 4554 4855 5344 5422  pair": "ETHUSDT"
-0001bdc0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
-0001bdd0: 2020 2020 2020 2020 2020 2020 2274 696d              "tim
-0001bde0: 6522 3a20 2031 3631 3135 3537 3233 312e  e":  1611557231.
-0001bdf0: 3435 3834 2c0a 2020 2020 2020 2020 2320  4584,.        # 
-0001be00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001be10: 2274 7970 6522 3a20 2262 7579 222c 0a20  "type": "buy",. 
-0001be20: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001be30: 2020 2020 2020 2020 2022 6f72 6465 7274           "ordert
-0001be40: 7970 6522 3a20 226d 6172 6b65 7422 2c0a  ype": "market",.
-0001be50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001be60: 2020 2020 2020 2020 2020 2263 6f73 7422            "cost"
-0001be70: 3a20 2232 382e 3439 3830 3022 2c0a 2020  : "28.49800",.  
-0001be80: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001be90: 2020 2020 2020 2020 2266 6565 223a 2022          "fee": "
-0001bea0: 302e 3037 3937 3922 2c0a 2020 2020 2020  0.07979",.      
-0001beb0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
-0001bec0: 2020 2020 2276 6f6c 223a 2022 302e 3032      "vol": "0.02
-0001bed0: 3030 3030 3030 222c 0a20 2020 2020 2020  000000",.       
-0001bee0: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001bef0: 2020 2022 766f 6c5f 636c 6f73 6564 223a     "vol_closed":
-0001bf00: 2022 302e 3030 3030 3030 3030 222c 0a20   "0.00000000",. 
-0001bf10: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001bf20: 2020 2020 2020 2020 2022 6d61 7267 696e           "margin
-0001bf30: 223a 2022 3134 2e32 3439 3030 222c 0a20  ": "14.24900",. 
-0001bf40: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001bf50: 2020 2020 2020 2020 2022 7465 726d 7322           "terms"
-0001bf60: 3a20 2230 2e30 3230 3025 2070 6572 2034  : "0.0200% per 4
-0001bf70: 2068 6f75 7273 222c 0a20 2020 2020 2020   hours",.       
-0001bf80: 2023 2020 2020 2020 2020 2020 2020 2020   #              
-0001bf90: 2020 2022 726f 6c6c 6f76 6572 746d 223a     "rollovertm":
-0001bfa0: 2022 3136 3131 3537 3136 3331 222c 0a20   "1611571631",. 
-0001bfb0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001bfc0: 2020 2020 2020 2020 2022 6d69 7363 223a           "misc":
-0001bfd0: 2022 222c 0a20 2020 2020 2020 2023 2020   "",.        #  
-0001bfe0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001bff0: 6f66 6c61 6773 223a 2022 220a 2020 2020  oflags": "".    
-0001c000: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0001c010: 2020 7d0a 2020 2020 2020 2020 2320 2020    }.        #   
-0001c020: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0001c030: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
-0001c040: 230a 2020 2020 2020 2020 2320 636f 6e73  #.        # cons
-0001c050: 6f6c 6964 6174 696f 6e20 6279 206d 6172  olidation by mar
-0001c060: 6b65 740a 2020 2020 2020 2020 230a 2020  ket.        #.  
-0001c070: 2020 2020 2020 2320 2020 2020 7b0a 2020        #     {.  
-0001c080: 2020 2020 2020 2320 2020 2020 2020 2020        #         
-0001c090: 2265 7272 6f72 223a 205b 5d2c 0a20 2020  "error": [],.   
-0001c0a0: 2020 2020 2023 2020 2020 2020 2020 2022       #         "
-0001c0b0: 7265 7375 6c74 223a 205b 0a20 2020 2020  result": [.     
-0001c0c0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
-0001c0d0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
-0001c0e0: 2020 2020 2020 2020 2020 2020 2022 7061               "pa
-0001c0f0: 6972 223a 2022 4554 4855 5344 5422 2c0a  ir": "ETHUSDT",.
-0001c100: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001c110: 2020 2020 2020 2020 2020 2270 6f73 6974            "posit
-0001c120: 696f 6e73 223a 2022 3122 2c0a 2020 2020  ions": "1",.    
-0001c130: 2020 2020 2320 2020 2020 2020 2020 2020      #           
-0001c140: 2020 2020 2020 2274 7970 6522 3a20 2262        "type": "b
-0001c150: 7579 222c 0a20 2020 2020 2020 2023 2020  uy",.        #  
-0001c160: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001c170: 6c65 7665 7261 6765 223a 2022 322e 3030  leverage": "2.00
-0001c180: 3030 3022 2c0a 2020 2020 2020 2020 2320  000",.        # 
-0001c190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c1a0: 2263 6f73 7422 3a20 2232 382e 3439 3830  "cost": "28.4980
-0001c1b0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
-0001c1c0: 2020 2020 2020 2020 2020 2020 2020 2266                "f
-0001c1d0: 6565 223a 2022 302e 3037 3937 3922 2c0a  ee": "0.07979",.
-0001c1e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
-0001c1f0: 2020 2020 2020 2020 2020 2276 6f6c 223a            "vol":
-0001c200: 2022 302e 3032 3030 3030 3030 222c 0a20   "0.02000000",. 
-0001c210: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001c220: 2020 2020 2020 2020 2022 766f 6c5f 636c           "vol_cl
-0001c230: 6f73 6564 223a 2022 302e 3030 3030 3030  osed": "0.000000
-0001c240: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
-0001c250: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001c260: 6d61 7267 696e 223a 2022 3134 2e32 3439  margin": "14.249
-0001c270: 3030 220a 2020 2020 2020 2020 2320 2020  00".        #   
-0001c280: 2020 2020 2020 2020 2020 7d0a 2020 2020            }.    
-0001c290: 2020 2020 2320 2020 2020 2020 2020 5d0a      #         ].
-0001c2a0: 2020 2020 2020 2020 2320 2020 2020 7d0a          #     }.
-0001c2b0: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0001c2c0: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0001c2d0: 7361 6665 5f76 616c 7565 2872 6573 706f  safe_value(respo
-0001c2e0: 6e73 652c 2027 7265 7375 6c74 2729 0a20  nse, 'result'). 
-0001c2f0: 2020 2020 2020 2023 2074 6f64 6f20 756e         # todo un
-0001c300: 6966 7920 7061 7273 6550 6f73 6974 696f  ify parsePositio
-0001c310: 6e2f 7061 7273 6550 6f73 6974 696f 6e73  n/parsePositions
-0001c320: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001c330: 7265 7375 6c74 0a0a 2020 2020 6465 6620  result..    def 
-0001c340: 7061 7273 655f 6163 636f 756e 745f 7479  parse_account_ty
-0001c350: 7065 2873 656c 662c 2061 6363 6f75 6e74  pe(self, account
-0001c360: 293a 0a20 2020 2020 2020 2061 6363 6f75  ):.        accou
-0001c370: 6e74 4279 5479 7065 203d 207b 0a20 2020  ntByType = {.   
-0001c380: 2020 2020 2020 2020 2027 7370 6f74 273a           'spot':
-0001c390: 2027 5370 6f74 2057 616c 6c65 7427 2c0a   'Spot Wallet',.
-0001c3a0: 2020 2020 2020 2020 2020 2020 2773 7761              'swa
-0001c3b0: 7027 3a20 2746 7574 7572 6573 2057 616c  p': 'Futures Wal
-0001c3c0: 6c65 7427 2c0a 2020 2020 2020 2020 2020  let',.          
-0001c3d0: 2020 2766 7574 7572 6527 3a20 2746 7574    'future': 'Fut
-0001c3e0: 7572 6573 2057 616c 6c65 7427 2c0a 2020  ures Wallet',.  
-0001c3f0: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
-0001c400: 7265 7475 726e 2073 656c 662e 7361 6665  return self.safe
-0001c410: 5f73 7472 696e 6728 6163 636f 756e 7442  _string(accountB
-0001c420: 7954 7970 652c 2061 6363 6f75 6e74 2c20  yType, account, 
-0001c430: 6163 636f 756e 7429 0a0a 2020 2020 6465  account)..    de
-0001c440: 6620 7472 616e 7366 6572 5f6f 7574 2873  f transfer_out(s
-0001c450: 656c 662c 2063 6f64 653a 2073 7472 2c20  elf, code: str, 
-0001c460: 616d 6f75 6e74 2c20 7061 7261 6d73 3d7b  amount, params={
-0001c470: 7d29 3a0a 2020 2020 2020 2020 2222 220a  }):.        """.
-0001c480: 2020 2020 2020 2020 7472 616e 7366 6572          transfer
-0001c490: 2066 726f 6d20 7370 6f74 2077 616c 6c65   from spot walle
-0001c4a0: 7420 746f 2066 7574 7572 6573 2077 616c  t to futures wal
-0001c4b0: 6c65 740a 2020 2020 2020 2020 3a73 6565  let.        :see
-0001c4c0: 3a20 6874 7470 733a 2f2f 646f 6373 2e6b  : https://docs.k
-0001c4d0: 7261 6b65 6e2e 636f 6d2f 7265 7374 2f23  raken.com/rest/#
-0001c4e0: 7461 672f 5573 6572 2d46 756e 6469 6e67  tag/User-Funding
-0001c4f0: 2f6f 7065 7261 7469 6f6e 2f77 616c 6c65  /operation/walle
-0001c500: 7454 7261 6e73 6665 720a 2020 2020 2020  tTransfer.      
-0001c510: 2020 3a70 6172 616d 2073 7472 2063 6f64    :param str cod
-0001c520: 653a 2055 6e69 6669 6564 2063 7572 7265  e: Unified curre
-0001c530: 6e63 7920 636f 6465 0a20 2020 2020 2020  ncy code.       
-0001c540: 203a 7061 7261 6d20 666c 6f61 7420 616d   :param float am
-0001c550: 6f75 6e74 3a20 5369 7a65 206f 6620 7468  ount: Size of th
-0001c560: 6520 7472 616e 7366 6572 0a20 2020 2020  e transfer.     
-0001c570: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
-0001c580: 7061 7261 6d73 5d3a 2045 7863 6861 6e67  params]: Exchang
-0001c590: 6520 7370 6563 6966 6963 2070 6172 616d  e specific param
-0001c5a0: 6574 6572 730a 2020 2020 2020 2020 3a72  eters.        :r
-0001c5b0: 6574 7572 6e73 3a20 6120 6074 7261 6e73  eturns: a `trans
-0001c5c0: 6665 7220 7374 7275 6374 7572 6520 3c68  fer structure <h
-0001c5d0: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
-0001c5e0: 2e63 6f6d 2f23 2f3f 6964 3d74 7261 6e73  .com/#/?id=trans
-0001c5f0: 6665 722d 7374 7275 6374 7572 653e 600a  fer-structure>`.
-0001c600: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001c610: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0001c620: 7472 616e 7366 6572 2863 6f64 652c 2061  transfer(code, a
-0001c630: 6d6f 756e 742c 2027 7370 6f74 272c 2027  mount, 'spot', '
-0001c640: 7377 6170 272c 2070 6172 616d 7329 0a0a  swap', params)..
-0001c650: 2020 2020 6465 6620 7472 616e 7366 6572      def transfer
-0001c660: 2873 656c 662c 2063 6f64 653a 2073 7472  (self, code: str
-0001c670: 2c20 616d 6f75 6e74 3a20 666c 6f61 742c  , amount: float,
-0001c680: 2066 726f 6d41 6363 6f75 6e74 3a20 7374   fromAccount: st
-0001c690: 722c 2074 6f41 6363 6f75 6e74 3a20 7374  r, toAccount: st
-0001c6a0: 722c 2070 6172 616d 733d 7b7d 2920 2d3e  r, params={}) ->
-0001c6b0: 2054 7261 6e73 6665 7245 6e74 7279 3a0a   TransferEntry:.
-0001c6c0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001c6d0: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
-0001c6e0: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
-0001c6f0: 6d2f 7265 7374 2f23 7461 672f 5573 6572  m/rest/#tag/User
-0001c700: 2d46 756e 6469 6e67 2f6f 7065 7261 7469  -Funding/operati
-0001c710: 6f6e 2f77 616c 6c65 7454 7261 6e73 6665  on/walletTransfe
-0001c720: 720a 2020 2020 2020 2020 7472 616e 7366  r.        transf
-0001c730: 6572 7320 6375 7272 656e 6369 6573 2062  ers currencies b
-0001c740: 6574 7765 656e 2073 7562 2d61 6363 6f75  etween sub-accou
-0001c750: 6e74 7328 6f6e 6c79 2073 706f 742d 3e73  nts(only spot->s
-0001c760: 7761 7020 6469 7265 6374 696f 6e20 6973  wap direction is
-0001c770: 2073 7570 706f 7274 6564 290a 2020 2020   supported).    
-0001c780: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
-0001c790: 6f64 653a 2055 6e69 6669 6564 2063 7572  ode: Unified cur
-0001c7a0: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
-0001c7b0: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
-0001c7c0: 616d 6f75 6e74 3a20 5369 7a65 206f 6620  amount: Size of 
-0001c7d0: 7468 6520 7472 616e 7366 6572 0a20 2020  the transfer.   
-0001c7e0: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
-0001c7f0: 6672 6f6d 4163 636f 756e 743a 2027 7370  fromAccount: 'sp
-0001c800: 6f74 2720 6f72 2027 5370 6f74 2057 616c  ot' or 'Spot Wal
-0001c810: 6c65 7427 0a20 2020 2020 2020 203a 7061  let'.        :pa
-0001c820: 7261 6d20 7374 7220 746f 4163 636f 756e  ram str toAccoun
-0001c830: 743a 2027 7377 6170 2720 6f72 2027 4675  t: 'swap' or 'Fu
-0001c840: 7475 7265 7320 5761 6c6c 6574 270a 2020  tures Wallet'.  
-0001c850: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
-0001c860: 7420 5b70 6172 616d 735d 3a20 4578 6368  t [params]: Exch
-0001c870: 616e 6765 2073 7065 6369 6669 6320 7061  ange specific pa
-0001c880: 7261 6d65 7465 7273 0a20 2020 2020 2020  rameters.       
-0001c890: 203a 7265 7475 726e 733a 2061 2060 7472   :returns: a `tr
-0001c8a0: 616e 7366 6572 2073 7472 7563 7475 7265  ansfer structure
-0001c8b0: 203c 6874 7470 733a 2f2f 646f 6373 2e63   <https://docs.c
-0001c8c0: 6378 742e 636f 6d2f 232f 3f69 643d 7472  cxt.com/#/?id=tr
-0001c8d0: 616e 7366 6572 2d73 7472 7563 7475 7265  ansfer-structure
-0001c8e0: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
-0001c8f0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
-0001c900: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
-0001c910: 2020 2063 7572 7265 6e63 7920 3d20 7365     currency = se
-0001c920: 6c66 2e63 7572 7265 6e63 7928 636f 6465  lf.currency(code
-0001c930: 290a 2020 2020 2020 2020 6672 6f6d 4163  ).        fromAc
-0001c940: 636f 756e 7420 3d20 7365 6c66 2e70 6172  count = self.par
-0001c950: 7365 5f61 6363 6f75 6e74 5f74 7970 6528  se_account_type(
-0001c960: 6672 6f6d 4163 636f 756e 7429 0a20 2020  fromAccount).   
-0001c970: 2020 2020 2074 6f41 6363 6f75 6e74 203d       toAccount =
-0001c980: 2073 656c 662e 7061 7273 655f 6163 636f   self.parse_acco
-0001c990: 756e 745f 7479 7065 2874 6f41 6363 6f75  unt_type(toAccou
-0001c9a0: 6e74 290a 2020 2020 2020 2020 7265 7175  nt).        requ
-0001c9b0: 6573 7420 3d20 7b0a 2020 2020 2020 2020  est = {.        
-0001c9c0: 2020 2020 2761 6d6f 756e 7427 3a20 7365      'amount': se
-0001c9d0: 6c66 2e63 7572 7265 6e63 795f 746f 5f70  lf.currency_to_p
-0001c9e0: 7265 6369 7369 6f6e 2863 6f64 652c 2061  recision(code, a
-0001c9f0: 6d6f 756e 7429 2c0a 2020 2020 2020 2020  mount),.        
-0001ca00: 2020 2020 2766 726f 6d27 3a20 6672 6f6d      'from': from
-0001ca10: 4163 636f 756e 742c 0a20 2020 2020 2020  Account,.       
-0001ca20: 2020 2020 2027 746f 273a 2074 6f41 6363       'to': toAcc
-0001ca30: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-0001ca40: 2020 2761 7373 6574 273a 2063 7572 7265    'asset': curre
-0001ca50: 6e63 795b 2769 6427 5d2c 0a20 2020 2020  ncy['id'],.     
-0001ca60: 2020 207d 0a20 2020 2020 2020 2069 6620     }.        if 
-0001ca70: 6672 6f6d 4163 636f 756e 7420 213d 2027  fromAccount != '
-0001ca80: 5370 6f74 2057 616c 6c65 7427 3a0a 2020  Spot Wallet':.  
-0001ca90: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001caa0: 4261 6452 6571 7565 7374 2873 656c 662e  BadRequest(self.
-0001cab0: 6964 202b 2027 2074 7261 6e73 6665 7220  id + ' transfer 
-0001cac0: 6361 6e6e 6f74 2074 7261 6e73 6665 7220  cannot transfer 
-0001cad0: 6672 6f6d 2027 202b 2066 726f 6d41 6363  from ' + fromAcc
-0001cae0: 6f75 6e74 202b 2027 2074 6f20 2720 2b20  ount + ' to ' + 
-0001caf0: 746f 4163 636f 756e 7420 2b20 272e 2055  toAccount + '. U
-0001cb00: 7365 206b 7261 6b65 6e66 7574 7572 6573  se krakenfutures
-0001cb10: 2069 6e73 7465 6164 2074 6f20 7472 616e   instead to tran
-0001cb20: 7366 6572 2066 726f 6d20 7468 6520 6675  sfer from the fu
-0001cb30: 7475 7265 7320 6163 636f 756e 742e 2729  tures account.')
-0001cb40: 0a20 2020 2020 2020 2072 6573 706f 6e73  .        respons
-0001cb50: 6520 3d20 7365 6c66 2e70 7269 7661 7465  e = self.private
-0001cb60: 506f 7374 5761 6c6c 6574 5472 616e 7366  PostWalletTransf
-0001cb70: 6572 2873 656c 662e 6578 7465 6e64 2872  er(self.extend(r
-0001cb80: 6571 7565 7374 2c20 7061 7261 6d73 2929  equest, params))
-0001cb90: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
-0001cba0: 2020 2023 2020 207b 0a20 2020 2020 2020     #   {.       
-0001cbb0: 2023 2020 2020 2020 2022 6572 726f 7222   #       "error"
-0001cbc0: 3a5b 0a20 2020 2020 2020 2023 2020 2020  :[.        #    
-0001cbd0: 2020 205d 2c0a 2020 2020 2020 2020 2320     ],.        # 
-0001cbe0: 2020 2020 2020 2272 6573 756c 7422 3a7b        "result":{
-0001cbf0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
-0001cc00: 2020 2020 2272 6566 6964 223a 2242 4f49      "refid":"BOI
-0001cc10: 5553 4946 2d4d 3744 4c4d 4e2d 5558 5a33  USIF-M7DLMN-UXZ3
-0001cc20: 5035 220a 2020 2020 2020 2020 2320 2020  P5".        #   
-0001cc30: 2020 2020 7d0a 2020 2020 2020 2020 2320      }.        # 
-0001cc40: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
-0001cc50: 2020 2020 2020 7472 616e 7366 6572 203d        transfer =
-0001cc60: 2073 656c 662e 7061 7273 655f 7472 616e   self.parse_tran
-0001cc70: 7366 6572 2872 6573 706f 6e73 652c 2063  sfer(response, c
-0001cc80: 7572 7265 6e63 7929 0a20 2020 2020 2020  urrency).       
-0001cc90: 2072 6574 7572 6e20 7365 6c66 2e65 7874   return self.ext
-0001cca0: 656e 6428 7472 616e 7366 6572 2c20 7b0a  end(transfer, {.
-0001ccb0: 2020 2020 2020 2020 2020 2020 2761 6d6f              'amo
-0001ccc0: 756e 7427 3a20 616d 6f75 6e74 2c0a 2020  unt': amount,.  
-0001ccd0: 2020 2020 2020 2020 2020 2766 726f 6d41            'fromA
-0001cce0: 6363 6f75 6e74 273a 2066 726f 6d41 6363  ccount': fromAcc
-0001ccf0: 6f75 6e74 2c0a 2020 2020 2020 2020 2020  ount,.          
-0001cd00: 2020 2774 6f41 6363 6f75 6e74 273a 2074    'toAccount': t
-0001cd10: 6f41 6363 6f75 6e74 2c0a 2020 2020 2020  oAccount,.      
-0001cd20: 2020 7d29 0a0a 2020 2020 6465 6620 7061    })..    def pa
-0001cd30: 7273 655f 7472 616e 7366 6572 2873 656c  rse_transfer(sel
-0001cd40: 662c 2074 7261 6e73 6665 722c 2063 7572  f, transfer, cur
-0001cd50: 7265 6e63 793a 2043 7572 7265 6e63 7920  rency: Currency 
-0001cd60: 3d20 4e6f 6e65 293a 0a20 2020 2020 2020  = None):.       
-0001cd70: 2023 0a20 2020 2020 2020 2023 2074 7261   #.        # tra
-0001cd80: 6e73 6665 720a 2020 2020 2020 2020 230a  nsfer.        #.
-0001cd90: 2020 2020 2020 2020 2320 2020 207b 0a20          #    {. 
-0001cda0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
-0001cdb0: 2265 7272 6f72 223a 5b0a 2020 2020 2020  "error":[.      
-0001cdc0: 2020 2320 2020 2020 2020 205d 2c0a 2020    #        ],.  
-0001cdd0: 2020 2020 2020 2320 2020 2020 2020 2022        #        "
-0001cde0: 7265 7375 6c74 223a 7b0a 2020 2020 2020  result":{.      
-0001cdf0: 2020 2320 2020 2020 2020 2020 2020 2272    #           "r
-0001ce00: 6566 6964 223a 2242 4f49 5553 4946 2d4d  efid":"BOIUSIF-M
-0001ce10: 3744 4c4d 4e2d 5558 5a33 5035 220a 2020  7DLMN-UXZ3P5".  
-0001ce20: 2020 2020 2020 2320 2020 2020 2020 207d        #        }
-0001ce30: 0a20 2020 2020 2020 2023 2020 2020 7d0a  .        #    }.
-0001ce40: 2020 2020 2020 2020 230a 2020 2020 2020          #.      
-0001ce50: 2020 7265 7375 6c74 203d 2073 656c 662e    result = self.
-0001ce60: 7361 6665 5f76 616c 7565 2874 7261 6e73  safe_value(trans
-0001ce70: 6665 722c 2027 7265 7375 6c74 272c 207b  fer, 'result', {
-0001ce80: 7d29 0a20 2020 2020 2020 2072 6566 6964  }).        refid
-0001ce90: 203d 2073 656c 662e 7361 6665 5f73 7472   = self.safe_str
-0001cea0: 696e 6728 7265 7375 6c74 2c20 2772 6566  ing(result, 'ref
-0001ceb0: 6964 2729 0a20 2020 2020 2020 2072 6574  id').        ret
-0001cec0: 7572 6e20 7b0a 2020 2020 2020 2020 2020  urn {.          
-0001ced0: 2020 2769 6e66 6f27 3a20 7472 616e 7366    'info': transf
-0001cee0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-0001cef0: 2769 6427 3a20 7265 6669 642c 0a20 2020  'id': refid,.   
-0001cf00: 2020 2020 2020 2020 2027 7469 6d65 7374           'timest
-0001cf10: 616d 7027 3a20 4e6f 6e65 2c0a 2020 2020  amp': None,.    
-0001cf20: 2020 2020 2020 2020 2764 6174 6574 696d          'datetim
-0001cf30: 6527 3a20 4e6f 6e65 2c0a 2020 2020 2020  e': None,.      
-0001cf40: 2020 2020 2020 2763 7572 7265 6e63 7927        'currency'
-0001cf50: 3a20 7365 6c66 2e73 6166 655f 7374 7269  : self.safe_stri
-0001cf60: 6e67 2863 7572 7265 6e63 792c 2027 636f  ng(currency, 'co
-0001cf70: 6465 2729 2c0a 2020 2020 2020 2020 2020  de'),.          
-0001cf80: 2020 2761 6d6f 756e 7427 3a20 4e6f 6e65    'amount': None
-0001cf90: 2c0a 2020 2020 2020 2020 2020 2020 2766  ,.            'f
-0001cfa0: 726f 6d41 6363 6f75 6e74 273a 204e 6f6e  romAccount': Non
-0001cfb0: 652c 0a20 2020 2020 2020 2020 2020 2027  e,.            '
-0001cfc0: 746f 4163 636f 756e 7427 3a20 4e6f 6e65  toAccount': None
-0001cfd0: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
-0001cfe0: 7461 7475 7327 3a20 2773 7563 6573 7327  tatus': 'sucess'
-0001cff0: 2c0a 2020 2020 2020 2020 7d0a 0a20 2020  ,.        }..   
-0001d000: 2064 6566 2073 6967 6e28 7365 6c66 2c20   def sign(self, 
-0001d010: 7061 7468 2c20 6170 693d 2770 7562 6c69  path, api='publi
-0001d020: 6327 2c20 6d65 7468 6f64 3d27 4745 5427  c', method='GET'
-0001d030: 2c20 7061 7261 6d73 3d7b 7d2c 2068 6561  , params={}, hea
-0001d040: 6465 7273 3d4e 6f6e 652c 2062 6f64 793d  ders=None, body=
-0001d050: 4e6f 6e65 293a 0a20 2020 2020 2020 2075  None):.        u
-0001d060: 726c 203d 2027 2f27 202b 2073 656c 662e  rl = '/' + self.
-0001d070: 7665 7273 696f 6e20 2b20 272f 2720 2b20  version + '/' + 
-0001d080: 6170 6920 2b20 272f 2720 2b20 7061 7468  api + '/' + path
-0001d090: 0a20 2020 2020 2020 2069 6620 6170 6920  .        if api 
-0001d0a0: 3d3d 2027 7075 626c 6963 273a 0a20 2020  == 'public':.   
-0001d0b0: 2020 2020 2020 2020 2069 6620 7061 7261           if para
-0001d0c0: 6d73 3a0a 2020 2020 2020 2020 2020 2020  ms:.            
-0001d0d0: 2020 2020 2320 7572 6c65 6e63 6f64 654e      # urlencodeN
-0001d0e0: 6573 7465 6420 6973 2075 7365 6420 746f  ested is used to
-0001d0f0: 2061 6464 7265 7373 2068 7474 7073 3a2f   address https:/
-0001d100: 2f67 6974 6875 622e 636f 6d2f 6363 7874  /github.com/ccxt
-0001d110: 2f63 6378 742f 6973 7375 6573 2f31 3238  /ccxt/issues/128
-0001d120: 3732 0a20 2020 2020 2020 2020 2020 2020  72.             
-0001d130: 2020 2075 726c 202b 3d20 273f 2720 2b20     url += '?' + 
-0001d140: 7365 6c66 2e75 726c 656e 636f 6465 5f6e  self.urlencode_n
-0001d150: 6573 7465 6428 7061 7261 6d73 290a 2020  ested(params).  
-0001d160: 2020 2020 2020 656c 6966 2061 7069 203d        elif api =
-0001d170: 3d20 2770 7269 7661 7465 273a 0a20 2020  = 'private':.   
-0001d180: 2020 2020 2020 2020 2069 7343 616e 6365           isCance
-0001d190: 6c4f 7264 6572 4261 7463 6820 3d20 2870  lOrderBatch = (p
-0001d1a0: 6174 6820 3d3d 2027 4361 6e63 656c 4f72  ath == 'CancelOr
-0001d1b0: 6465 7242 6174 6368 2729 0a20 2020 2020  derBatch').     
-0001d1c0: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
-0001d1d0: 6b5f 7265 7175 6972 6564 5f63 7265 6465  k_required_crede
-0001d1e0: 6e74 6961 6c73 2829 0a20 2020 2020 2020  ntials().       
-0001d1f0: 2020 2020 206e 6f6e 6365 203d 2073 7472       nonce = str
-0001d200: 2873 656c 662e 6e6f 6e63 6528 2929 0a20  (self.nonce()). 
-0001d210: 2020 2020 2020 2020 2020 2023 2075 726c             # url
-0001d220: 656e 636f 6465 4e65 7374 6564 2069 7320  encodeNested is 
-0001d230: 7573 6564 2074 6f20 6164 6472 6573 7320  used to address 
-0001d240: 6874 7470 733a 2f2f 6769 7468 7562 2e63  https://github.c
-0001d250: 6f6d 2f63 6378 742f 6363 7874 2f69 7373  om/ccxt/ccxt/iss
-0001d260: 7565 732f 3132 3837 320a 2020 2020 2020  ues/12872.      
-0001d270: 2020 2020 2020 6966 2069 7343 616e 6365        if isCance
-0001d280: 6c4f 7264 6572 4261 7463 683a 0a20 2020  lOrderBatch:.   
-0001d290: 2020 2020 2020 2020 2020 2020 2062 6f64               bod
-0001d2a0: 7920 3d20 7365 6c66 2e6a 736f 6e28 7365  y = self.json(se
-0001d2b0: 6c66 2e65 7874 656e 6428 7b27 6e6f 6e63  lf.extend({'nonc
-0001d2c0: 6527 3a20 6e6f 6e63 657d 2c20 7061 7261  e': nonce}, para
-0001d2d0: 6d73 2929 0a20 2020 2020 2020 2020 2020  ms)).           
-0001d2e0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0001d2f0: 2020 2020 2020 2062 6f64 7920 3d20 7365         body = se
-0001d300: 6c66 2e75 726c 656e 636f 6465 5f6e 6573  lf.urlencode_nes
-0001d310: 7465 6428 7365 6c66 2e65 7874 656e 6428  ted(self.extend(
-0001d320: 7b27 6e6f 6e63 6527 3a20 6e6f 6e63 657d  {'nonce': nonce}
-0001d330: 2c20 7061 7261 6d73 2929 0a20 2020 2020  , params)).     
-0001d340: 2020 2020 2020 2061 7574 6820 3d20 7365         auth = se
-0001d350: 6c66 2e65 6e63 6f64 6528 6e6f 6e63 6520  lf.encode(nonce 
-0001d360: 2b20 626f 6479 290a 2020 2020 2020 2020  + body).        
-0001d370: 2020 2020 6861 7368 203d 2073 656c 662e      hash = self.
-0001d380: 6861 7368 2861 7574 682c 2027 7368 6132  hash(auth, 'sha2
-0001d390: 3536 272c 2027 6269 6e61 7279 2729 0a20  56', 'binary'). 
-0001d3a0: 2020 2020 2020 2020 2020 2062 696e 6172             binar
-0001d3b0: 7920 3d20 7365 6c66 2e65 6e63 6f64 6528  y = self.encode(
-0001d3c0: 7572 6c29 0a20 2020 2020 2020 2020 2020  url).           
-0001d3d0: 2062 696e 6861 7368 203d 2073 656c 662e   binhash = self.
-0001d3e0: 6269 6e61 7279 5f63 6f6e 6361 7428 6269  binary_concat(bi
-0001d3f0: 6e61 7279 2c20 6861 7368 290a 2020 2020  nary, hash).    
-0001d400: 2020 2020 2020 2020 7365 6372 6574 203d          secret =
-0001d410: 2073 656c 662e 6261 7365 3634 5f74 6f5f   self.base64_to_
-0001d420: 6269 6e61 7279 2873 656c 662e 7365 6372  binary(self.secr
-0001d430: 6574 290a 2020 2020 2020 2020 2020 2020  et).            
-0001d440: 7369 676e 6174 7572 6520 3d20 7365 6c66  signature = self
-0001d450: 2e68 6d61 6328 6269 6e68 6173 682c 2073  .hmac(binhash, s
-0001d460: 6563 7265 742c 2068 6173 686c 6962 2e73  ecret, hashlib.s
-0001d470: 6861 3531 322c 2027 6261 7365 3634 2729  ha512, 'base64')
-0001d480: 0a20 2020 2020 2020 2020 2020 2068 6561  .            hea
-0001d490: 6465 7273 203d 207b 0a20 2020 2020 2020  ders = {.       
-0001d4a0: 2020 2020 2020 2020 2027 4150 492d 4b65           'API-Ke
-0001d4b0: 7927 3a20 7365 6c66 2e61 7069 4b65 792c  y': self.apiKey,
-0001d4c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d4d0: 2027 4150 492d 5369 676e 273a 2073 6967   'API-Sign': sig
-0001d4e0: 6e61 7475 7265 2c0a 2020 2020 2020 2020  nature,.        
-0001d4f0: 2020 2020 2020 2020 2320 2743 6f6e 7465          # 'Conte
-0001d500: 6e74 2d54 7970 6527 3a20 2761 7070 6c69  nt-Type': 'appli
-0001d510: 6361 7469 6f6e 2f78 2d77 7777 2d66 6f72  cation/x-www-for
-0001d520: 6d2d 7572 6c65 6e63 6f64 6564 272c 0a20  m-urlencoded',. 
-0001d530: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-0001d540: 2020 2020 2020 2020 2069 6620 6973 4361           if isCa
-0001d550: 6e63 656c 4f72 6465 7242 6174 6368 3a0a  ncelOrderBatch:.
-0001d560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001d570: 6865 6164 6572 735b 2743 6f6e 7465 6e74  headers['Content
-0001d580: 2d54 7970 6527 5d20 3d20 2761 7070 6c69  -Type'] = 'appli
-0001d590: 6361 7469 6f6e 2f6a 736f 6e27 0a20 2020  cation/json'.   
-0001d5a0: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-0001d5b0: 2020 2020 2020 2020 2020 2020 2020 2068                 h
-0001d5c0: 6561 6465 7273 5b27 436f 6e74 656e 742d  eaders['Content-
-0001d5d0: 5479 7065 275d 203d 2027 6170 706c 6963  Type'] = 'applic
-0001d5e0: 6174 696f 6e2f 782d 7777 772d 666f 726d  ation/x-www-form
-0001d5f0: 2d75 726c 656e 636f 6465 6427 0a20 2020  -urlencoded'.   
-0001d600: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-0001d610: 2020 2020 2020 2075 726c 203d 2027 2f27         url = '/'
-0001d620: 202b 2070 6174 680a 2020 2020 2020 2020   + path.        
-0001d630: 7572 6c20 3d20 7365 6c66 2e75 726c 735b  url = self.urls[
-0001d640: 2761 7069 275d 5b61 7069 5d20 2b20 7572  'api'][api] + ur
-0001d650: 6c0a 2020 2020 2020 2020 7265 7475 726e  l.        return
-0001d660: 207b 2775 726c 273a 2075 726c 2c20 276d   {'url': url, 'm
-0001d670: 6574 686f 6427 3a20 6d65 7468 6f64 2c20  ethod': method, 
-0001d680: 2762 6f64 7927 3a20 626f 6479 2c20 2768  'body': body, 'h
-0001d690: 6561 6465 7273 273a 2068 6561 6465 7273  eaders': headers
-0001d6a0: 7d0a 0a20 2020 2064 6566 206e 6f6e 6365  }..    def nonce
-0001d6b0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-0001d6c0: 7265 7475 726e 2073 656c 662e 6d69 6c6c  return self.mill
-0001d6d0: 6973 6563 6f6e 6473 2829 0a0a 2020 2020  iseconds()..    
-0001d6e0: 6465 6620 6861 6e64 6c65 5f65 7272 6f72  def handle_error
-0001d6f0: 7328 7365 6c66 2c20 636f 6465 2c20 7265  s(self, code, re
-0001d700: 6173 6f6e 2c20 7572 6c2c 206d 6574 686f  ason, url, metho
-0001d710: 642c 2068 6561 6465 7273 2c20 626f 6479  d, headers, body
-0001d720: 2c20 7265 7370 6f6e 7365 2c20 7265 7175  , response, requ
-0001d730: 6573 7448 6561 6465 7273 2c20 7265 7175  estHeaders, requ
-0001d740: 6573 7442 6f64 7929 3a0a 2020 2020 2020  estBody):.      
-0001d750: 2020 6966 2063 6f64 6520 3d3d 2035 3230    if code == 520
-0001d760: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0001d770: 6973 6520 4578 6368 616e 6765 4e6f 7441  ise ExchangeNotA
-0001d780: 7661 696c 6162 6c65 2873 656c 662e 6964  vailable(self.id
-0001d790: 202b 2027 2027 202b 2073 7472 2863 6f64   + ' ' + str(cod
-0001d7a0: 6529 202b 2027 2027 202b 2072 6561 736f  e) + ' ' + reaso
-0001d7b0: 6e29 0a20 2020 2020 2020 2023 2074 6f64  n).        # tod
-0001d7c0: 6f3a 2072 6577 7269 7465 2073 656c 6620  o: rewrite self 
-0001d7d0: 666f 7220 2262 726f 6164 2220 6578 6365  for "broad" exce
-0001d7e0: 7074 696f 6e73 206d 6174 6368 696e 670a  ptions matching.
-0001d7f0: 2020 2020 2020 2020 6966 2062 6f64 792e          if body.
-0001d800: 6669 6e64 2827 496e 7661 6c69 6420 6f72  find('Invalid or
-0001d810: 6465 7227 2920 3e3d 2030 3a0a 2020 2020  der') >= 0:.    
-0001d820: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
-0001d830: 7661 6c69 644f 7264 6572 2873 656c 662e  validOrder(self.
-0001d840: 6964 202b 2027 2027 202b 2062 6f64 7929  id + ' ' + body)
-0001d850: 0a20 2020 2020 2020 2069 6620 626f 6479  .        if body
-0001d860: 2e66 696e 6428 2749 6e76 616c 6964 206e  .find('Invalid n
-0001d870: 6f6e 6365 2729 203e 3d20 303a 0a20 2020  once') >= 0:.   
-0001d880: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
-0001d890: 6e76 616c 6964 4e6f 6e63 6528 7365 6c66  nvalidNonce(self
-0001d8a0: 2e69 6420 2b20 2720 2720 2b20 626f 6479  .id + ' ' + body
-0001d8b0: 290a 2020 2020 2020 2020 6966 2062 6f64  ).        if bod
-0001d8c0: 792e 6669 6e64 2827 496e 7375 6666 6963  y.find('Insuffic
-0001d8d0: 6965 6e74 2066 756e 6473 2729 203e 3d20  ient funds') >= 
-0001d8e0: 303a 0a20 2020 2020 2020 2020 2020 2072  0:.            r
-0001d8f0: 6169 7365 2049 6e73 7566 6669 6369 656e  aise Insufficien
-0001d900: 7446 756e 6473 2873 656c 662e 6964 202b  tFunds(self.id +
-0001d910: 2027 2027 202b 2062 6f64 7929 0a20 2020   ' ' + body).   
-0001d920: 2020 2020 2069 6620 626f 6479 2e66 696e       if body.fin
-0001d930: 6428 2743 616e 6365 6c20 7065 6e64 696e  d('Cancel pendin
-0001d940: 6727 2920 3e3d 2030 3a0a 2020 2020 2020  g') >= 0:.      
-0001d950: 2020 2020 2020 7261 6973 6520 4361 6e63        raise Canc
-0001d960: 656c 5065 6e64 696e 6728 7365 6c66 2e69  elPending(self.i
-0001d970: 6420 2b20 2720 2720 2b20 626f 6479 290a  d + ' ' + body).
-0001d980: 2020 2020 2020 2020 6966 2062 6f64 792e          if body.
-0001d990: 6669 6e64 2827 496e 7661 6c69 6420 6172  find('Invalid ar
-0001d9a0: 6775 6d65 6e74 733a 766f 6c75 6d65 2729  guments:volume')
-0001d9b0: 203e 3d20 303a 0a20 2020 2020 2020 2020   >= 0:.         
-0001d9c0: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-0001d9d0: 4f72 6465 7228 7365 6c66 2e69 6420 2b20  Order(self.id + 
-0001d9e0: 2720 2720 2b20 626f 6479 290a 2020 2020  ' ' + body).    
-0001d9f0: 2020 2020 6966 2062 6f64 792e 6669 6e64      if body.find
-0001da00: 2827 5261 7465 206c 696d 6974 2065 7863  ('Rate limit exc
-0001da10: 6565 6465 6427 2920 3e3d 2030 3a0a 2020  eeded') >= 0:.  
-0001da20: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001da30: 5261 7465 4c69 6d69 7445 7863 6565 6465  RateLimitExceede
-0001da40: 6428 7365 6c66 2e69 6420 2b20 2720 2720  d(self.id + ' ' 
-0001da50: 2b20 626f 6479 290a 2020 2020 2020 2020  + body).        
-0001da60: 6966 2072 6573 706f 6e73 6520 6973 204e  if response is N
-0001da70: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0001da80: 2072 6574 7572 6e20 4e6f 6e65 0a20 2020   return None.   
-0001da90: 2020 2020 2069 6620 626f 6479 5b30 5d20       if body[0] 
-0001daa0: 3d3d 2027 7b27 3a0a 2020 2020 2020 2020  == '{':.        
-0001dab0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
-0001dac0: 7461 6e63 6528 7265 7370 6f6e 7365 2c20  tance(response, 
-0001dad0: 7374 7229 3a0a 2020 2020 2020 2020 2020  str):.          
-0001dae0: 2020 2020 2020 6966 2027 6572 726f 7227        if 'error'
-0001daf0: 2069 6e20 7265 7370 6f6e 7365 3a0a 2020   in response:.  
+00019600: 2020 2020 2020 2273 7461 7475 7322 3a20        "status": 
+00019610: 2253 7563 6365 7373 2220 2020 2020 2020  "Success"       
+00019620: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019650: 2020 2020 2020 7d5d 7d0a 2020 2020 2020        }]}.      
+00019660: 2020 2320 7769 7468 2070 6167 696e 6174    # with paginat
+00019670: 696f 6e0a 2020 2020 2020 2020 2320 2020  ion.        #   
+00019680: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+00019690: 2020 2020 2265 7272 6f72 223a 5b5d 2c0a      "error":[],.
+000196a0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000196b0: 2022 7265 7375 6c74 223a 7b0a 2020 2020   "result":{.    
+000196c0: 2020 2020 2320 2020 2020 2020 2020 2020      #           
+000196d0: 2277 6974 6864 7261 7761 6c73 223a 5b0a  "withdrawals":[.
+000196e0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000196f0: 2020 2020 2020 207b 0a20 2020 2020 2020         {.       
+00019700: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+00019710: 2020 2022 6d65 7468 6f64 223a 2254 6574     "method":"Tet
+00019720: 6865 7220 5553 4428 5452 4332 3029 222c  her USD(TRC20)",
+00019730: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00019740: 2020 2020 2020 2020 2020 2022 6163 6c61             "acla
+00019750: 7373 223a 2263 7572 7265 6e63 7922 2c0a  ss":"currency",.
+00019760: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019770: 2020 2020 2020 2020 2020 2261 7373 6574            "asset
+00019780: 223a 2255 5344 5422 2c0a 2020 2020 2020  ":"USDT",.      
+00019790: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+000197a0: 2020 2020 2272 6566 6964 223a 2242 534e      "refid":"BSN
+000197b0: 465a 5532 2d4d 4546 4e34 472d 4a33 4e45  FZU2-MEFN4G-J3NE
+000197c0: 5a56 222c 0a20 2020 2020 2020 2023 2020  ZV",.        #  
+000197d0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000197e0: 7478 6964 223a 2231 6337 6136 3432 6662  txid":"1c7a642fb
+000197f0: 3733 3837 6262 6332 6336 6132 6335 3039  7387bbc2c6a2c509
+00019800: 6664 3161 6531 3436 3933 3766 3463 6637  fd1ae146937f4cf7
+00019810: 3933 6234 3037 3961 3466 3037 3135 6533  93b4079a4f0715e3
+00019820: 6130 3236 3135 6122 2c0a 2020 2020 2020  a02615a",.      
+00019830: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019840: 2020 2020 2269 6e66 6f22 3a22 5451 6d64      "info":"TQmd
+00019850: 7853 7543 3136 4568 4667 3846 5a57 7459  xSuC16EhFg8FZWtY
+00019860: 6772 6646 526f 736f 5246 3762 4370 222c  grfFRosoRF7bCp",
+00019870: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+00019880: 2020 2020 2020 2020 2020 2022 616d 6f75             "amou
+00019890: 6e74 223a 2231 3939 362e 3530 3030 3030  nt":"1996.500000
+000198a0: 3030 222c 0a20 2020 2020 2020 2023 2020  00",.        #  
+000198b0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000198c0: 6665 6522 3a22 322e 3530 3030 3030 3030  fee":"2.50000000
+000198d0: 222c 0a20 2020 2020 2020 2023 2020 2020  ",.        #    
+000198e0: 2020 2020 2020 2020 2020 2020 2022 7469               "ti
+000198f0: 6d65 223a 3136 3639 3132 3636 3537 2c0a  me":1669126657,.
+00019900: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+00019910: 2020 2020 2020 2020 2020 2273 7461 7475            "statu
+00019920: 7322 3a22 5375 6363 6573 7322 2c0a 2020  s":"Success",.  
+00019930: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+00019940: 2020 2020 2020 2020 226b 6579 223a 2270          "key":"p
+00019950: 6f6c 6f6e 6965 7822 2c0a 2020 2020 2020  oloniex",.      
+00019960: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+00019970: 2020 2020 226e 6574 776f 726b 223a 2254      "network":"T
+00019980: 726f 6e22 0a20 2020 2020 2020 2023 2020  ron".        #  
+00019990: 2020 2020 2020 2020 2020 2020 7d2c 0a20              },. 
+000199a0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+000199b0: 2020 2020 202e 2e2e 0a20 2020 2020 2020       ....       
+000199c0: 2023 2020 2020 2020 2020 2020 205d 2c0a   #           ],.
+000199d0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+000199e0: 2020 2020 226e 6578 745f 6375 7273 6f72      "next_cursor
+000199f0: 223a 2248 6741 4141 4141 4141 4142 4756  ":"HgAAAAAAAABGV
+00019a00: 4652 5364 336b 314c 5646 3459 304a 5159  FRSd3k1LVF4Y0JQY
+00019a10: 3035 4764 3078 5259 304e 7865 6e46 6e64  05Gd0xRY0NxenFnd
+00019a20: 4870 7962 6b77 4241 5148 3241 7745 4241  HpybkwBAQH2AwEBA
+00019a30: 4141 4141 5141 4141 4141 4141 4141 4241  AAAAQAAAAAAAAABA
+00019a40: 4141 4141 4141 5a41 4141 4141 4141 4141  AAAAAAZAAAAAAAAA
+00019a50: 413d 3d22 0a20 2020 2020 2020 2023 2020  A==".        #  
+00019a60: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00019a70: 2320 2020 2020 7d0a 2020 2020 2020 2020  #     }.        
+00019a80: 230a 2020 2020 2020 2020 7261 7757 6974  #.        rawWit
+00019a90: 6864 7261 7761 6c73 203d 204e 6f6e 650a  hdrawals = None.
+00019aa0: 2020 2020 2020 2020 7265 7375 6c74 203d          result =
+00019ab0: 2073 656c 662e 7361 6665 5f76 616c 7565   self.safe_value
+00019ac0: 2872 6573 706f 6e73 652c 2027 7265 7375  (response, 'resu
+00019ad0: 6c74 2729 0a20 2020 2020 2020 2069 6620  lt').        if 
+00019ae0: 6e6f 7420 6973 696e 7374 616e 6365 2872  not isinstance(r
+00019af0: 6573 756c 742c 206c 6973 7429 3a0a 2020  esult, list):.  
+00019b00: 2020 2020 2020 2020 2020 7261 7757 6974            rawWit
+00019b10: 6864 7261 7761 6c73 203d 2073 656c 662e  hdrawals = self.
+00019b20: 6164 645f 7061 6769 6e61 7469 6f6e 5f63  add_pagination_c
+00019b30: 7572 736f 725f 746f 5f72 6573 756c 7428  ursor_to_result(
+00019b40: 7265 7375 6c74 290a 2020 2020 2020 2020  result).        
+00019b50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00019b60: 2020 7261 7757 6974 6864 7261 7761 6c73    rawWithdrawals
+00019b70: 203d 2072 6573 756c 740a 2020 2020 2020   = result.      
+00019b80: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00019b90: 7273 655f 7472 616e 7361 6374 696f 6e73  rse_transactions
+00019ba0: 5f62 795f 7479 7065 2827 7769 7468 6472  _by_type('withdr
+00019bb0: 6177 616c 272c 2072 6177 5769 7468 6472  awal', rawWithdr
+00019bc0: 6177 616c 732c 2063 6f64 652c 2073 696e  awals, code, sin
+00019bd0: 6365 2c20 6c69 6d69 7429 0a0a 2020 2020  ce, limit)..    
+00019be0: 6465 6620 6164 645f 7061 6769 6e61 7469  def add_paginati
+00019bf0: 6f6e 5f63 7572 736f 725f 746f 5f72 6573  on_cursor_to_res
+00019c00: 756c 7428 7365 6c66 2c20 7265 7375 6c74  ult(self, result
+00019c10: 293a 0a20 2020 2020 2020 2063 7572 736f  ):.        curso
+00019c20: 7220 3d20 7365 6c66 2e73 6166 655f 7374  r = self.safe_st
+00019c30: 7269 6e67 2872 6573 756c 742c 2027 6e65  ring(result, 'ne
+00019c40: 7874 5f63 7572 736f 7227 290a 2020 2020  xt_cursor').    
+00019c50: 2020 2020 6461 7461 203d 2073 656c 662e      data = self.
+00019c60: 7361 6665 5f76 616c 7565 2872 6573 756c  safe_value(resul
+00019c70: 742c 2027 7769 7468 6472 6177 616c 7327  t, 'withdrawals'
+00019c80: 290a 2020 2020 2020 2020 6461 7461 4c65  ).        dataLe
+00019c90: 6e67 7468 203d 206c 656e 2864 6174 6129  ngth = len(data)
+00019ca0: 0a20 2020 2020 2020 2069 6620 6375 7273  .        if curs
+00019cb0: 6f72 2069 7320 6e6f 7420 4e6f 6e65 2061  or is not None a
+00019cc0: 6e64 2064 6174 614c 656e 6774 6820 3e20  nd dataLength > 
+00019cd0: 303a 0a20 2020 2020 2020 2020 2020 206c  0:.            l
+00019ce0: 6173 7420 3d20 6461 7461 5b64 6174 614c  ast = data[dataL
+00019cf0: 656e 6774 6820 2d20 315d 0a20 2020 2020  ength - 1].     
+00019d00: 2020 2020 2020 206c 6173 745b 276e 6578         last['nex
+00019d10: 745f 6375 7273 6f72 275d 203d 2063 7572  t_cursor'] = cur
+00019d20: 736f 720a 2020 2020 2020 2020 2020 2020  sor.            
+00019d30: 6461 7461 5b64 6174 614c 656e 6774 6820  data[dataLength 
+00019d40: 2d20 315d 203d 206c 6173 740a 2020 2020  - 1] = last.    
+00019d50: 2020 2020 7265 7475 726e 2064 6174 610a      return data.
+00019d60: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
+00019d70: 6465 706f 7369 745f 6164 6472 6573 7328  deposit_address(
+00019d80: 7365 6c66 2c20 636f 6465 3a20 7374 722c  self, code: str,
+00019d90: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+00019da0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+00019db0: 2063 7265 6174 6520 6120 6375 7272 656e   create a curren
+00019dc0: 6379 2064 6570 6f73 6974 2061 6464 7265  cy deposit addre
+00019dd0: 7373 0a20 2020 2020 2020 203a 7365 653a  ss.        :see:
+00019de0: 2068 7474 7073 3a2f 2f64 6f63 732e 6b72   https://docs.kr
+00019df0: 616b 656e 2e63 6f6d 2f72 6573 742f 2374  aken.com/rest/#t
+00019e00: 6167 2f46 756e 6469 6e67 2f6f 7065 7261  ag/Funding/opera
+00019e10: 7469 6f6e 2f67 6574 4465 706f 7369 7441  tion/getDepositA
+00019e20: 6464 7265 7373 6573 0a20 2020 2020 2020  ddresses.       
+00019e30: 203a 7061 7261 6d20 7374 7220 636f 6465   :param str code
+00019e40: 3a20 756e 6966 6965 6420 6375 7272 656e  : unified curren
+00019e50: 6379 2063 6f64 6520 6f66 2074 6865 2063  cy code of the c
+00019e60: 7572 7265 6e63 7920 666f 7220 7468 6520  urrency for the 
+00019e70: 6465 706f 7369 7420 6164 6472 6573 730a  deposit address.
+00019e80: 2020 2020 2020 2020 3a70 6172 616d 2064          :param d
+00019e90: 6963 7420 5b70 6172 616d 735d 3a20 6578  ict [params]: ex
+00019ea0: 7472 6120 7061 7261 6d65 7465 7273 2073  tra parameters s
+00019eb0: 7065 6369 6669 6320 746f 2074 6865 2065  pecific to the e
+00019ec0: 7863 6861 6e67 6520 4150 4920 656e 6470  xchange API endp
+00019ed0: 6f69 6e74 0a20 2020 2020 2020 203a 7265  oint.        :re
+00019ee0: 7475 726e 7320 6469 6374 3a20 616e 2060  turns dict: an `
+00019ef0: 6164 6472 6573 7320 7374 7275 6374 7572  address structur
+00019f00: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+00019f10: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d61  ccxt.com/#/?id=a
+00019f20: 6464 7265 7373 2d73 7472 7563 7475 7265  ddress-structure
+00019f30: 3e60 0a20 2020 2020 2020 2022 2222 0a20  >`.        """. 
+00019f40: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+00019f50: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+00019f60: 6e65 7727 3a20 2774 7275 6527 2c0a 2020  new': 'true',.  
+00019f70: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00019f80: 7265 7475 726e 2073 656c 662e 6665 7463  return self.fetc
+00019f90: 685f 6465 706f 7369 745f 6164 6472 6573  h_deposit_addres
+00019fa0: 7328 636f 6465 2c20 7365 6c66 2e65 7874  s(code, self.ext
+00019fb0: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+00019fc0: 616d 7329 290a 0a20 2020 2064 6566 2066  ams))..    def f
+00019fd0: 6574 6368 5f64 6570 6f73 6974 5f6d 6574  etch_deposit_met
+00019fe0: 686f 6473 2873 656c 662c 2063 6f64 653a  hods(self, code:
+00019ff0: 2073 7472 2c20 7061 7261 6d73 3d7b 7d29   str, params={})
+0001a000: 3a0a 2020 2020 2020 2020 2222 220a 2020  :.        """.  
+0001a010: 2020 2020 2020 6665 7463 6820 6465 706f        fetch depo
+0001a020: 7369 7420 6d65 7468 6f64 7320 666f 7220  sit methods for 
+0001a030: 6120 6375 7272 656e 6379 2061 7373 6f63  a currency assoc
+0001a040: 6961 7465 6420 7769 7468 2073 656c 6620  iated with self 
+0001a050: 6163 636f 756e 740a 2020 2020 2020 2020  account.        
+0001a060: 3a73 6565 3a20 6874 7470 733a 2f2f 646f  :see: https://do
+0001a070: 6373 2e6b 7261 6b65 6e2e 636f 6d2f 7265  cs.kraken.com/re
+0001a080: 7374 2f23 7461 672f 4675 6e64 696e 672f  st/#tag/Funding/
+0001a090: 6f70 6572 6174 696f 6e2f 6765 7444 6570  operation/getDep
+0001a0a0: 6f73 6974 4d65 7468 6f64 730a 2020 2020  ositMethods.    
+0001a0b0: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
+0001a0c0: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
+0001a0d0: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
+0001a0e0: 2020 203a 7061 7261 6d20 6469 6374 205b     :param dict [
+0001a0f0: 7061 7261 6d73 5d3a 2065 7874 7261 2070  params]: extra p
+0001a100: 6172 616d 6574 6572 7320 7370 6563 6966  arameters specif
+0001a110: 6963 2074 6f20 7468 6520 6b72 616b 656e  ic to the kraken
+0001a120: 2061 7069 2065 6e64 706f 696e 740a 2020   api endpoint.  
+0001a130: 2020 2020 2020 3a72 6574 7572 6e73 2064        :returns d
+0001a140: 6963 743a 206f 6620 6465 706f 7369 7420  ict: of deposit 
+0001a150: 6d65 7468 6f64 730a 2020 2020 2020 2020  methods.        
+0001a160: 2222 220a 2020 2020 2020 2020 7365 6c66  """.        self
+0001a170: 2e6c 6f61 645f 6d61 726b 6574 7328 290a  .load_markets().
+0001a180: 2020 2020 2020 2020 6375 7272 656e 6379          currency
+0001a190: 203d 2073 656c 662e 6375 7272 656e 6379   = self.currency
+0001a1a0: 2863 6f64 6529 0a20 2020 2020 2020 2072  (code).        r
+0001a1b0: 6571 7565 7374 203d 207b 0a20 2020 2020  equest = {.     
+0001a1c0: 2020 2020 2020 2027 6173 7365 7427 3a20         'asset': 
+0001a1d0: 6375 7272 656e 6379 5b27 6964 275d 2c0a  currency['id'],.
+0001a1e0: 2020 2020 2020 2020 7d0a 2020 2020 2020          }.      
+0001a1f0: 2020 7265 7370 6f6e 7365 203d 2073 656c    response = sel
+0001a200: 662e 7072 6976 6174 6550 6f73 7444 6570  f.privatePostDep
+0001a210: 6f73 6974 4d65 7468 6f64 7328 7365 6c66  ositMethods(self
+0001a220: 2e65 7874 656e 6428 7265 7175 6573 742c  .extend(request,
+0001a230: 2070 6172 616d 7329 290a 2020 2020 2020   params)).      
+0001a240: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0001a250: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0001a260: 2020 2020 2020 2265 7272 6f72 223a 5b5d        "error":[]
+0001a270: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0001a280: 2020 2020 2272 6573 756c 7422 3a5b 0a20      "result":[. 
+0001a290: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001a2a0: 2020 2020 207b 226d 6574 686f 6422 3a22       {"method":"
+0001a2b0: 4574 6865 7228 4865 7829 222c 226c 696d  Ether(Hex)","lim
+0001a2c0: 6974 223a 6661 6c73 652c 2267 656e 2d61  it":false,"gen-a
+0001a2d0: 6464 7265 7373 223a 7472 7565 7d0a 2020  ddress":true}.  
+0001a2e0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001a2f0: 5d0a 2020 2020 2020 2020 2320 2020 2020  ].        #     
+0001a300: 7d0a 2020 2020 2020 2020 230a 2020 2020  }.        #.    
+0001a310: 2020 2020 2320 2020 2020 7b0a 2020 2020      #     {.    
+0001a320: 2020 2020 2320 2020 2020 2020 2020 2265      #         "e
+0001a330: 7272 6f72 223a 5b5d 2c0a 2020 2020 2020  rror":[],.      
+0001a340: 2020 2320 2020 2020 2020 2020 2272 6573    #         "res
+0001a350: 756c 7422 3a5b 0a20 2020 2020 2020 2023  ult":[.        #
+0001a360: 2020 2020 2020 2020 2020 2020 207b 226d               {"m
+0001a370: 6574 686f 6422 3a22 5465 7468 6572 2055  ethod":"Tether U
+0001a380: 5344 2845 5243 3230 2922 2c22 6c69 6d69  SD(ERC20)","limi
+0001a390: 7422 3a66 616c 7365 2c22 6164 6472 6573  t":false,"addres
+0001a3a0: 732d 7365 7475 702d 6665 6522 3a22 302e  s-setup-fee":"0.
+0001a3b0: 3030 3030 3030 3030 222c 2267 656e 2d61  00000000","gen-a
+0001a3c0: 6464 7265 7373 223a 7472 7565 7d2c 0a20  ddress":true},. 
+0001a3d0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001a3e0: 2020 2020 207b 226d 6574 686f 6422 3a22       {"method":"
+0001a3f0: 5465 7468 6572 2055 5344 2854 5243 3230  Tether USD(TRC20
+0001a400: 2922 2c22 6c69 6d69 7422 3a66 616c 7365  )","limit":false
+0001a410: 2c22 6164 6472 6573 732d 7365 7475 702d  ,"address-setup-
+0001a420: 6665 6522 3a22 302e 3030 3030 3030 3030  fee":"0.00000000
+0001a430: 222c 2267 656e 2d61 6464 7265 7373 223a  ","gen-address":
+0001a440: 7472 7565 7d0a 2020 2020 2020 2020 2320  true}.        # 
+0001a450: 2020 2020 2020 2020 5d0a 2020 2020 2020          ].      
+0001a460: 2020 2320 2020 2020 7d0a 2020 2020 2020    #     }.      
+0001a470: 2020 230a 2020 2020 2020 2020 2320 2020    #.        #   
+0001a480: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0001a490: 2020 2020 2020 2265 7272 6f72 223a 5b5d        "error":[]
+0001a4a0: 2c0a 2020 2020 2020 2020 2320 2020 2020  ,.        #     
+0001a4b0: 2020 2020 2272 6573 756c 7422 3a5b 0a20      "result":[. 
+0001a4c0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001a4d0: 2020 2020 207b 226d 6574 686f 6422 3a22       {"method":"
+0001a4e0: 4269 7463 6f69 6e22 2c22 6c69 6d69 7422  Bitcoin","limit"
+0001a4f0: 3a66 616c 7365 2c22 6665 6522 3a22 302e  :false,"fee":"0.
+0001a500: 3030 3030 3030 3030 3030 222c 2267 656e  0000000000","gen
+0001a510: 2d61 6464 7265 7373 223a 7472 7565 7d0a  -address":true}.
+0001a520: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001a530: 2020 5d0a 2020 2020 2020 2020 2320 2020    ].        #   
+0001a540: 2020 7d0a 2020 2020 2020 2020 230a 2020    }.        #.  
+0001a550: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0001a560: 662e 7361 6665 5f76 616c 7565 2872 6573  f.safe_value(res
+0001a570: 706f 6e73 652c 2027 7265 7375 6c74 2729  ponse, 'result')
+0001a580: 0a0a 2020 2020 6465 6620 6665 7463 685f  ..    def fetch_
+0001a590: 6465 706f 7369 745f 6164 6472 6573 7328  deposit_address(
+0001a5a0: 7365 6c66 2c20 636f 6465 3a20 7374 722c  self, code: str,
+0001a5b0: 2070 6172 616d 733d 7b7d 293a 0a20 2020   params={}):.   
+0001a5c0: 2020 2020 2022 2222 0a20 2020 2020 2020       """.       
+0001a5d0: 2066 6574 6368 2074 6865 2064 6570 6f73   fetch the depos
+0001a5e0: 6974 2061 6464 7265 7373 2066 6f72 2061  it address for a
+0001a5f0: 2063 7572 7265 6e63 7920 6173 736f 6369   currency associ
+0001a600: 6174 6564 2077 6974 6820 7365 6c66 2061  ated with self a
+0001a610: 6363 6f75 6e74 0a20 2020 2020 2020 203a  ccount.        :
+0001a620: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+0001a630: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+0001a640: 742f 2374 6167 2f46 756e 6469 6e67 2f6f  t/#tag/Funding/o
+0001a650: 7065 7261 7469 6f6e 2f67 6574 4465 706f  peration/getDepo
+0001a660: 7369 7441 6464 7265 7373 6573 0a20 2020  sitAddresses.   
+0001a670: 2020 2020 203a 7061 7261 6d20 7374 7220       :param str 
+0001a680: 636f 6465 3a20 756e 6966 6965 6420 6375  code: unified cu
+0001a690: 7272 656e 6379 2063 6f64 650a 2020 2020  rrency code.    
+0001a6a0: 2020 2020 3a70 6172 616d 2064 6963 7420      :param dict 
+0001a6b0: 5b70 6172 616d 735d 3a20 6578 7472 6120  [params]: extra 
+0001a6c0: 7061 7261 6d65 7465 7273 2073 7065 6369  parameters speci
+0001a6d0: 6669 6320 746f 2074 6865 2065 7863 6861  fic to the excha
+0001a6e0: 6e67 6520 4150 4920 656e 6470 6f69 6e74  nge API endpoint
+0001a6f0: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0001a700: 7320 6469 6374 3a20 616e 2060 6164 6472  s dict: an `addr
+0001a710: 6573 7320 7374 7275 6374 7572 6520 3c68  ess structure <h
+0001a720: 7474 7073 3a2f 2f64 6f63 732e 6363 7874  ttps://docs.ccxt
+0001a730: 2e63 6f6d 2f23 2f3f 6964 3d61 6464 7265  .com/#/?id=addre
+0001a740: 7373 2d73 7472 7563 7475 7265 3e60 0a20  ss-structure>`. 
+0001a750: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001a760: 2020 2073 656c 662e 6c6f 6164 5f6d 6172     self.load_mar
+0001a770: 6b65 7473 2829 0a20 2020 2020 2020 2063  kets().        c
+0001a780: 7572 7265 6e63 7920 3d20 7365 6c66 2e63  urrency = self.c
+0001a790: 7572 7265 6e63 7928 636f 6465 290a 2020  urrency(code).  
+0001a7a0: 2020 2020 2020 6e65 7477 6f72 6b20 3d20        network = 
+0001a7b0: 7365 6c66 2e73 6166 655f 7374 7269 6e67  self.safe_string
+0001a7c0: 5f75 7070 6572 2870 6172 616d 732c 2027  _upper(params, '
+0001a7d0: 6e65 7477 6f72 6b27 290a 2020 2020 2020  network').      
+0001a7e0: 2020 6e65 7477 6f72 6b73 203d 2073 656c    networks = sel
+0001a7f0: 662e 7361 6665 5f76 616c 7565 2873 656c  f.safe_value(sel
+0001a800: 662e 6f70 7469 6f6e 732c 2027 6e65 7477  f.options, 'netw
+0001a810: 6f72 6b73 272c 207b 7d29 0a20 2020 2020  orks', {}).     
+0001a820: 2020 206e 6574 776f 726b 203d 2073 656c     network = sel
+0001a830: 662e 7361 6665 5f73 7472 696e 6728 6e65  f.safe_string(ne
+0001a840: 7477 6f72 6b73 2c20 6e65 7477 6f72 6b2c  tworks, network,
+0001a850: 206e 6574 776f 726b 2920 2023 2073 7570   network)  # sup
+0001a860: 706f 7274 2045 5448 203e 2045 5243 3230  port ETH > ERC20
+0001a870: 2061 6c69 6173 6573 0a20 2020 2020 2020   aliases.       
+0001a880: 2070 6172 616d 7320 3d20 7365 6c66 2e6f   params = self.o
+0001a890: 6d69 7428 7061 7261 6d73 2c20 276e 6574  mit(params, 'net
+0001a8a0: 776f 726b 2729 0a20 2020 2020 2020 2069  work').        i
+0001a8b0: 6620 2863 6f64 6520 3d3d 2027 5553 4454  f (code == 'USDT
+0001a8c0: 2729 2061 6e64 2028 6e65 7477 6f72 6b20  ') and (network 
+0001a8d0: 3d3d 2027 5452 4332 3027 293a 0a20 2020  == 'TRC20'):.   
+0001a8e0: 2020 2020 2020 2020 2063 6f64 6520 3d20           code = 
+0001a8f0: 636f 6465 202b 2027 2d27 202b 206e 6574  code + '-' + net
+0001a900: 776f 726b 0a20 2020 2020 2020 2064 6566  work.        def
+0001a910: 6175 6c74 4465 706f 7369 744d 6574 686f  aultDepositMetho
+0001a920: 6473 203d 2073 656c 662e 7361 6665 5f76  ds = self.safe_v
+0001a930: 616c 7565 2873 656c 662e 6f70 7469 6f6e  alue(self.option
+0001a940: 732c 2027 6465 706f 7369 744d 6574 686f  s, 'depositMetho
+0001a950: 6473 272c 207b 7d29 0a20 2020 2020 2020  ds', {}).       
+0001a960: 2064 6566 6175 6c74 4465 706f 7369 744d   defaultDepositM
+0001a970: 6574 686f 6420 3d20 7365 6c66 2e73 6166  ethod = self.saf
+0001a980: 655f 7374 7269 6e67 2864 6566 6175 6c74  e_string(default
+0001a990: 4465 706f 7369 744d 6574 686f 6473 2c20  DepositMethods, 
+0001a9a0: 636f 6465 290a 2020 2020 2020 2020 6465  code).        de
+0001a9b0: 706f 7369 744d 6574 686f 6420 3d20 7365  positMethod = se
+0001a9c0: 6c66 2e73 6166 655f 7374 7269 6e67 2870  lf.safe_string(p
+0001a9d0: 6172 616d 732c 2027 6d65 7468 6f64 272c  arams, 'method',
+0001a9e0: 2064 6566 6175 6c74 4465 706f 7369 744d   defaultDepositM
+0001a9f0: 6574 686f 6429 0a20 2020 2020 2020 2023  ethod).        #
+0001aa00: 2069 6620 7468 6520 7573 6572 2068 6173   if the user has
+0001aa10: 2073 7065 6369 6669 6564 2061 6e20 6578   specified an ex
+0001aa20: 6368 616e 6765 2d73 7065 6369 6669 6320  change-specific 
+0001aa30: 6d65 7468 6f64 2069 6e20 7061 7261 6d73  method in params
+0001aa40: 0a20 2020 2020 2020 2023 2077 6520 7061  .        # we pa
+0001aa50: 7373 2069 742c 206f 7468 6572 7769 7365  ss it, otherwise
+0001aa60: 2077 6520 7461 6b65 2074 6865 2027 6e65   we take the 'ne
+0001aa70: 7477 6f72 6b27 2075 6e69 6669 6564 2070  twork' unified p
+0001aa80: 6172 616d 0a20 2020 2020 2020 2069 6620  aram.        if 
+0001aa90: 6465 706f 7369 744d 6574 686f 6420 6973  depositMethod is
+0001aaa0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0001aab0: 2020 2064 6570 6f73 6974 4d65 7468 6f64     depositMethod
+0001aac0: 7320 3d20 7365 6c66 2e66 6574 6368 5f64  s = self.fetch_d
+0001aad0: 6570 6f73 6974 5f6d 6574 686f 6473 2863  eposit_methods(c
+0001aae0: 6f64 6529 0a20 2020 2020 2020 2020 2020  ode).           
+0001aaf0: 2069 6620 6e65 7477 6f72 6b20 6973 206e   if network is n
+0001ab00: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
+0001ab10: 2020 2020 2020 2020 2023 2066 696e 6420           # find 
+0001ab20: 6265 7374 206d 6174 6368 696e 6720 6465  best matching de
+0001ab30: 706f 7369 7420 6d65 7468 6f64 2c20 6f72  posit method, or
+0001ab40: 2066 616c 6c62 6163 6b20 746f 2074 6865   fallback to the
+0001ab50: 2066 6972 7374 206f 6e65 0a20 2020 2020   first one.     
+0001ab60: 2020 2020 2020 2020 2020 2066 6f72 2069             for i
+0001ab70: 2069 6e20 7261 6e67 6528 302c 206c 656e   in range(0, len
+0001ab80: 2864 6570 6f73 6974 4d65 7468 6f64 7329  (depositMethods)
+0001ab90: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001aba0: 2020 2020 2020 2065 6e74 7279 203d 2073         entry = s
+0001abb0: 656c 662e 7361 6665 5f73 7472 696e 6728  elf.safe_string(
+0001abc0: 6465 706f 7369 744d 6574 686f 6473 5b69  depositMethods[i
+0001abd0: 5d2c 2027 6d65 7468 6f64 2729 0a20 2020  ], 'method').   
+0001abe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001abf0: 2069 6620 656e 7472 792e 6669 6e64 286e   if entry.find(n
+0001ac00: 6574 776f 726b 2920 3e3d 2030 3a0a 2020  etwork) >= 0:.  
+0001ac10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac20: 2020 2020 2020 6465 706f 7369 744d 6574        depositMet
+0001ac30: 686f 6420 3d20 656e 7472 790a 2020 2020  hod = entry.    
+0001ac40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001ac50: 2020 2020 6272 6561 6b0a 2020 2020 2020      break.      
+0001ac60: 2020 2020 2020 2320 6966 2064 6570 6f73        # if depos
+0001ac70: 6974 4d65 7468 6f64 2077 6173 206e 6f74  itMethod was not
+0001ac80: 2073 7065 6369 6669 6564 2c20 6661 6c6c   specified, fall
+0001ac90: 6261 636b 2074 6f20 7468 6520 6669 7273  back to the firs
+0001aca0: 7420 6176 6169 6c61 626c 6520 6465 706f  t available depo
+0001acb0: 7369 7420 6d65 7468 6f64 0a20 2020 2020  sit method.     
+0001acc0: 2020 2020 2020 2069 6620 6465 706f 7369         if deposi
+0001acd0: 744d 6574 686f 6420 6973 204e 6f6e 653a  tMethod is None:
+0001ace0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001acf0: 2066 6972 7374 4465 706f 7369 744d 6574   firstDepositMet
+0001ad00: 686f 6420 3d20 7365 6c66 2e73 6166 655f  hod = self.safe_
+0001ad10: 7661 6c75 6528 6465 706f 7369 744d 6574  value(depositMet
+0001ad20: 686f 6473 2c20 302c 207b 7d29 0a20 2020  hods, 0, {}).   
+0001ad30: 2020 2020 2020 2020 2020 2020 2064 6570               dep
+0001ad40: 6f73 6974 4d65 7468 6f64 203d 2073 656c  ositMethod = sel
+0001ad50: 662e 7361 6665 5f73 7472 696e 6728 6669  f.safe_string(fi
+0001ad60: 7273 7444 6570 6f73 6974 4d65 7468 6f64  rstDepositMethod
+0001ad70: 2c20 276d 6574 686f 6427 290a 2020 2020  , 'method').    
+0001ad80: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0001ad90: 2020 2020 2020 2020 2020 2020 2761 7373              'ass
+0001ada0: 6574 273a 2063 7572 7265 6e63 795b 2769  et': currency['i
+0001adb0: 6427 5d2c 0a20 2020 2020 2020 2020 2020  d'],.           
+0001adc0: 2027 6d65 7468 6f64 273a 2064 6570 6f73   'method': depos
+0001add0: 6974 4d65 7468 6f64 2c0a 2020 2020 2020  itMethod,.      
+0001ade0: 2020 7d0a 2020 2020 2020 2020 7265 7370    }.        resp
+0001adf0: 6f6e 7365 203d 2073 656c 662e 7072 6976  onse = self.priv
+0001ae00: 6174 6550 6f73 7444 6570 6f73 6974 4164  atePostDepositAd
+0001ae10: 6472 6573 7365 7328 7365 6c66 2e65 7874  dresses(self.ext
+0001ae20: 656e 6428 7265 7175 6573 742c 2070 6172  end(request, par
+0001ae30: 616d 7329 290a 2020 2020 2020 2020 230a  ams)).        #.
+0001ae40: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0001ae50: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001ae60: 2020 2265 7272 6f72 223a 5b5d 2c0a 2020    "error":[],.  
+0001ae70: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001ae80: 2272 6573 756c 7422 3a5b 0a20 2020 2020  "result":[.     
+0001ae90: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001aea0: 207b 2261 6464 7265 7373 223a 2230 7837   {"address":"0x7
+0001aeb0: 3762 3530 3531 6639 3765 6661 3963 6335  7b5051f97efa9cc5
+0001aec0: 3263 3961 6435 6230 3233 6135 3366 6331  2c9ad5b023a53fc1
+0001aed0: 3563 3230 3064 3322 2c22 6578 7069 7265  5c200d3","expire
+0001aee0: 746d 223a 2230 227d 0a20 2020 2020 2020  tm":"0"}.       
+0001aef0: 2023 2020 2020 2020 2020 205d 0a20 2020   #         ].   
+0001af00: 2020 2020 2023 2020 2020 207d 0a20 2020       #     }.   
+0001af10: 2020 2020 2023 0a20 2020 2020 2020 2072       #.        r
+0001af20: 6573 756c 7420 3d20 7365 6c66 2e73 6166  esult = self.saf
+0001af30: 655f 7661 6c75 6528 7265 7370 6f6e 7365  e_value(response
+0001af40: 2c20 2772 6573 756c 7427 2c20 5b5d 290a  , 'result', []).
+0001af50: 2020 2020 2020 2020 6669 7273 7452 6573          firstRes
+0001af60: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+0001af70: 7661 6c75 6528 7265 7375 6c74 2c20 302c  value(result, 0,
+0001af80: 207b 7d29 0a20 2020 2020 2020 2069 6620   {}).        if 
+0001af90: 6669 7273 7452 6573 756c 7420 6973 204e  firstResult is N
+0001afa0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0001afb0: 2072 6169 7365 2049 6e76 616c 6964 4164   raise InvalidAd
+0001afc0: 6472 6573 7328 7365 6c66 2e69 6420 2b20  dress(self.id + 
+0001afd0: 2720 7072 6976 6174 6550 6f73 7444 6570  ' privatePostDep
+0001afe0: 6f73 6974 4164 6472 6573 7365 7328 2920  ositAddresses() 
+0001aff0: 7265 7475 726e 6564 206e 6f20 6164 6472  returned no addr
+0001b000: 6573 7365 7320 666f 7220 2720 2b20 636f  esses for ' + co
+0001b010: 6465 290a 2020 2020 2020 2020 7265 7475  de).        retu
+0001b020: 726e 2073 656c 662e 7061 7273 655f 6465  rn self.parse_de
+0001b030: 706f 7369 745f 6164 6472 6573 7328 6669  posit_address(fi
+0001b040: 7273 7452 6573 756c 742c 2063 7572 7265  rstResult, curre
+0001b050: 6e63 7929 0a0a 2020 2020 6465 6620 7061  ncy)..    def pa
+0001b060: 7273 655f 6465 706f 7369 745f 6164 6472  rse_deposit_addr
+0001b070: 6573 7328 7365 6c66 2c20 6465 706f 7369  ess(self, deposi
+0001b080: 7441 6464 7265 7373 2c20 6375 7272 656e  tAddress, curren
+0001b090: 6379 3a20 4375 7272 656e 6379 203d 204e  cy: Currency = N
+0001b0a0: 6f6e 6529 3a0a 2020 2020 2020 2020 230a  one):.        #.
+0001b0b0: 2020 2020 2020 2020 2320 2020 2020 7b0a          #     {.
+0001b0c0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001b0d0: 2020 2261 6464 7265 7373 223a 2230 7837    "address":"0x7
+0001b0e0: 3762 3530 3531 6639 3765 6661 3963 6335  7b5051f97efa9cc5
+0001b0f0: 3263 3961 6435 6230 3233 6135 3366 6331  2c9ad5b023a53fc1
+0001b100: 3563 3230 3064 3322 2c0a 2020 2020 2020  5c200d3",.      
+0001b110: 2020 2320 2020 2020 2020 2020 2265 7870    #         "exp
+0001b120: 6972 6574 6d22 3a22 3022 0a20 2020 2020  iretm":"0".     
+0001b130: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0001b140: 2020 2023 0a20 2020 2020 2020 2061 6464     #.        add
+0001b150: 7265 7373 203d 2073 656c 662e 7361 6665  ress = self.safe
+0001b160: 5f73 7472 696e 6728 6465 706f 7369 7441  _string(depositA
+0001b170: 6464 7265 7373 2c20 2761 6464 7265 7373  ddress, 'address
+0001b180: 2729 0a20 2020 2020 2020 2074 6167 203d  ').        tag =
+0001b190: 2073 656c 662e 7361 6665 5f73 7472 696e   self.safe_strin
+0001b1a0: 6728 6465 706f 7369 7441 6464 7265 7373  g(depositAddress
+0001b1b0: 2c20 2774 6167 2729 0a20 2020 2020 2020  , 'tag').       
+0001b1c0: 2063 7572 7265 6e63 7920 3d20 7365 6c66   currency = self
+0001b1d0: 2e73 6166 655f 6375 7272 656e 6379 284e  .safe_currency(N
+0001b1e0: 6f6e 652c 2063 7572 7265 6e63 7929 0a20  one, currency). 
+0001b1f0: 2020 2020 2020 2063 6f64 6520 3d20 6375         code = cu
+0001b200: 7272 656e 6379 5b27 636f 6465 275d 0a20  rrency['code']. 
+0001b210: 2020 2020 2020 2073 656c 662e 6368 6563         self.chec
+0001b220: 6b5f 6164 6472 6573 7328 6164 6472 6573  k_address(addres
+0001b230: 7329 0a20 2020 2020 2020 2072 6574 7572  s).        retur
+0001b240: 6e20 7b0a 2020 2020 2020 2020 2020 2020  n {.            
+0001b250: 2763 7572 7265 6e63 7927 3a20 636f 6465  'currency': code
+0001b260: 2c0a 2020 2020 2020 2020 2020 2020 2761  ,.            'a
+0001b270: 6464 7265 7373 273a 2061 6464 7265 7373  ddress': address
+0001b280: 2c0a 2020 2020 2020 2020 2020 2020 2774  ,.            't
+0001b290: 6167 273a 2074 6167 2c0a 2020 2020 2020  ag': tag,.      
+0001b2a0: 2020 2020 2020 276e 6574 776f 726b 273a        'network':
+0001b2b0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0001b2c0: 2020 2027 696e 666f 273a 2064 6570 6f73     'info': depos
+0001b2d0: 6974 4164 6472 6573 732c 0a20 2020 2020  itAddress,.     
+0001b2e0: 2020 207d 0a0a 2020 2020 6465 6620 7769     }..    def wi
+0001b2f0: 7468 6472 6177 2873 656c 662c 2063 6f64  thdraw(self, cod
+0001b300: 653a 2073 7472 2c20 616d 6f75 6e74 3a20  e: str, amount: 
+0001b310: 666c 6f61 742c 2061 6464 7265 7373 2c20  float, address, 
+0001b320: 7461 673d 4e6f 6e65 2c20 7061 7261 6d73  tag=None, params
+0001b330: 3d7b 7d29 3a0a 2020 2020 2020 2020 2222  ={}):.        ""
+0001b340: 220a 2020 2020 2020 2020 6d61 6b65 2061  ".        make a
+0001b350: 2077 6974 6864 7261 7761 6c0a 2020 2020   withdrawal.    
+0001b360: 2020 2020 3a73 6565 3a20 6874 7470 733a      :see: https:
+0001b370: 2f2f 646f 6373 2e6b 7261 6b65 6e2e 636f  //docs.kraken.co
+0001b380: 6d2f 7265 7374 2f23 7461 672f 4675 6e64  m/rest/#tag/Fund
+0001b390: 696e 672f 6f70 6572 6174 696f 6e2f 7769  ing/operation/wi
+0001b3a0: 7468 6472 6177 4675 6e64 730a 2020 2020  thdrawFunds.    
+0001b3b0: 2020 2020 3a70 6172 616d 2073 7472 2063      :param str c
+0001b3c0: 6f64 653a 2075 6e69 6669 6564 2063 7572  ode: unified cur
+0001b3d0: 7265 6e63 7920 636f 6465 0a20 2020 2020  rency code.     
+0001b3e0: 2020 203a 7061 7261 6d20 666c 6f61 7420     :param float 
+0001b3f0: 616d 6f75 6e74 3a20 7468 6520 616d 6f75  amount: the amou
+0001b400: 6e74 2074 6f20 7769 7468 6472 6177 0a20  nt to withdraw. 
+0001b410: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0001b420: 7220 6164 6472 6573 733a 2074 6865 2061  r address: the a
+0001b430: 6464 7265 7373 2074 6f20 7769 7468 6472  ddress to withdr
+0001b440: 6177 2074 6f0a 2020 2020 2020 2020 3a70  aw to.        :p
+0001b450: 6172 616d 2073 7472 2074 6167 3a0a 2020  aram str tag:.  
+0001b460: 2020 2020 2020 3a70 6172 616d 2064 6963        :param dic
+0001b470: 7420 5b70 6172 616d 735d 3a20 6578 7472  t [params]: extr
+0001b480: 6120 7061 7261 6d65 7465 7273 2073 7065  a parameters spe
+0001b490: 6369 6669 6320 746f 2074 6865 2065 7863  cific to the exc
+0001b4a0: 6861 6e67 6520 4150 4920 656e 6470 6f69  hange API endpoi
+0001b4b0: 6e74 0a20 2020 2020 2020 203a 7265 7475  nt.        :retu
+0001b4c0: 726e 7320 6469 6374 3a20 6120 6074 7261  rns dict: a `tra
+0001b4d0: 6e73 6163 7469 6f6e 2073 7472 7563 7475  nsaction structu
+0001b4e0: 7265 203c 6874 7470 733a 2f2f 646f 6373  re <https://docs
+0001b4f0: 2e63 6378 742e 636f 6d2f 232f 3f69 643d  .ccxt.com/#/?id=
+0001b500: 7472 616e 7361 6374 696f 6e2d 7374 7275  transaction-stru
+0001b510: 6374 7572 653e 600a 2020 2020 2020 2020  cture>`.        
+0001b520: 2222 220a 2020 2020 2020 2020 7461 672c  """.        tag,
+0001b530: 2070 6172 616d 7320 3d20 7365 6c66 2e68   params = self.h
+0001b540: 616e 646c 655f 7769 7468 6472 6177 5f74  andle_withdraw_t
+0001b550: 6167 5f61 6e64 5f70 6172 616d 7328 7461  ag_and_params(ta
+0001b560: 672c 2070 6172 616d 7329 0a20 2020 2020  g, params).     
+0001b570: 2020 2073 656c 662e 6368 6563 6b5f 6164     self.check_ad
+0001b580: 6472 6573 7328 6164 6472 6573 7329 0a20  dress(address). 
+0001b590: 2020 2020 2020 2069 6620 276b 6579 2720         if 'key' 
+0001b5a0: 696e 2070 6172 616d 733a 0a20 2020 2020  in params:.     
+0001b5b0: 2020 2020 2020 2073 656c 662e 6c6f 6164         self.load
+0001b5c0: 5f6d 6172 6b65 7473 2829 0a20 2020 2020  _markets().     
+0001b5d0: 2020 2020 2020 2063 7572 7265 6e63 7920         currency 
+0001b5e0: 3d20 7365 6c66 2e63 7572 7265 6e63 7928  = self.currency(
+0001b5f0: 636f 6465 290a 2020 2020 2020 2020 2020  code).          
+0001b600: 2020 7265 7175 6573 7420 3d20 7b0a 2020    request = {.  
+0001b610: 2020 2020 2020 2020 2020 2020 2020 2761                'a
+0001b620: 7373 6574 273a 2063 7572 7265 6e63 795b  sset': currency[
+0001b630: 2769 6427 5d2c 0a20 2020 2020 2020 2020  'id'],.         
+0001b640: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0001b650: 2061 6d6f 756e 742c 0a20 2020 2020 2020   amount,.       
+0001b660: 2020 2020 2020 2020 2027 6164 6472 6573           'addres
+0001b670: 7327 3a20 6164 6472 6573 732c 0a20 2020  s': address,.   
+0001b680: 2020 2020 2020 2020 207d 0a20 2020 2020           }.     
+0001b690: 2020 2020 2020 2072 6573 706f 6e73 6520         response 
+0001b6a0: 3d20 7365 6c66 2e70 7269 7661 7465 506f  = self.privatePo
+0001b6b0: 7374 5769 7468 6472 6177 2873 656c 662e  stWithdraw(self.
+0001b6c0: 6578 7465 6e64 2872 6571 7565 7374 2c20  extend(request, 
+0001b6d0: 7061 7261 6d73 2929 0a20 2020 2020 2020  params)).       
+0001b6e0: 2020 2020 2023 0a20 2020 2020 2020 2020       #.         
+0001b6f0: 2020 2023 2020 2020 207b 0a20 2020 2020     #     {.     
+0001b700: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001b710: 2022 6572 726f 7222 3a20 5b5d 2c0a 2020   "error": [],.  
+0001b720: 2020 2020 2020 2020 2020 2320 2020 2020            #     
+0001b730: 2020 2020 2272 6573 756c 7422 3a20 7b0a      "result": {.
+0001b740: 2020 2020 2020 2020 2020 2020 2320 2020              #   
+0001b750: 2020 2020 2020 2020 2020 2272 6566 6964            "refid
+0001b760: 223a 2022 4147 4253 4f36 542d 5546 4d54  ": "AGBSO6T-UFMT
+0001b770: 5451 2d49 374b 4753 3622 0a20 2020 2020  TQ-I7KGS6".     
+0001b780: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001b790: 207d 0a20 2020 2020 2020 2020 2020 2023   }.            #
+0001b7a0: 2020 2020 207d 0a20 2020 2020 2020 2020       }.         
+0001b7b0: 2020 2023 0a20 2020 2020 2020 2020 2020     #.           
+0001b7c0: 2072 6573 756c 7420 3d20 7365 6c66 2e73   result = self.s
+0001b7d0: 6166 655f 6469 6374 2872 6573 706f 6e73  afe_dict(respons
+0001b7e0: 652c 2027 7265 7375 6c74 272c 207b 7d29  e, 'result', {})
+0001b7f0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0001b800: 7572 6e20 7365 6c66 2e70 6172 7365 5f74  urn self.parse_t
+0001b810: 7261 6e73 6163 7469 6f6e 2872 6573 756c  ransaction(resul
+0001b820: 742c 2063 7572 7265 6e63 7929 0a20 2020  t, currency).   
+0001b830: 2020 2020 2072 6169 7365 2045 7863 6861       raise Excha
+0001b840: 6e67 6545 7272 6f72 2873 656c 662e 6964  ngeError(self.id
+0001b850: 202b 2022 2077 6974 6864 7261 7728 2920   + " withdraw() 
+0001b860: 7265 7175 6972 6573 2061 2027 6b65 7927  requires a 'key'
+0001b870: 2070 6172 616d 6574 6572 2877 6974 6864   parameter(withd
+0001b880: 7261 7761 6c20 6b65 7920 6e61 6d65 2c20  rawal key name, 
+0001b890: 7570 206f 6e20 796f 7572 2061 6363 6f75  up on your accou
+0001b8a0: 6e74 2922 290a 0a20 2020 2064 6566 2066  nt)")..    def f
+0001b8b0: 6574 6368 5f70 6f73 6974 696f 6e73 2873  etch_positions(s
+0001b8c0: 656c 662c 2073 796d 626f 6c73 3a20 5374  elf, symbols: St
+0001b8d0: 7269 6e67 7320 3d20 4e6f 6e65 2c20 7061  rings = None, pa
+0001b8e0: 7261 6d73 3d7b 7d29 3a0a 2020 2020 2020  rams={}):.      
+0001b8f0: 2020 2222 220a 2020 2020 2020 2020 6665    """.        fe
+0001b900: 7463 6820 616c 6c20 6f70 656e 2070 6f73  tch all open pos
+0001b910: 6974 696f 6e73 0a20 2020 2020 2020 203a  itions.        :
+0001b920: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+0001b930: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+0001b940: 742f 2374 6167 2f41 6363 6f75 6e74 2d44  t/#tag/Account-D
+0001b950: 6174 612f 6f70 6572 6174 696f 6e2f 6765  ata/operation/ge
+0001b960: 744f 7065 6e50 6f73 6974 696f 6e73 0a20  tOpenPositions. 
+0001b970: 2020 2020 2020 203a 7061 7261 6d20 7374         :param st
+0001b980: 725b 5d7c 4e6f 6e65 2073 796d 626f 6c73  r[]|None symbols
+0001b990: 3a20 6e6f 7420 7573 6564 2062 7920 6b72  : not used by kr
+0001b9a0: 616b 656e 2066 6574 6368 506f 7369 7469  aken fetchPositi
+0001b9b0: 6f6e 7328 290a 2020 2020 2020 2020 3a70  ons().        :p
+0001b9c0: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
+0001b9d0: 735d 3a20 6578 7472 6120 7061 7261 6d65  s]: extra parame
+0001b9e0: 7465 7273 2073 7065 6369 6669 6320 746f  ters specific to
+0001b9f0: 2074 6865 2065 7863 6861 6e67 6520 4150   the exchange AP
+0001ba00: 4920 656e 6470 6f69 6e74 0a20 2020 2020  I endpoint.     
+0001ba10: 2020 203a 7265 7475 726e 7320 6469 6374     :returns dict
+0001ba20: 5b5d 3a20 6120 6c69 7374 206f 6620 6070  []: a list of `p
+0001ba30: 6f73 6974 696f 6e20 7374 7275 6374 7572  osition structur
+0001ba40: 6520 3c68 7474 7073 3a2f 2f64 6f63 732e  e <https://docs.
+0001ba50: 6363 7874 2e63 6f6d 2f23 2f3f 6964 3d70  ccxt.com/#/?id=p
+0001ba60: 6f73 6974 696f 6e2d 7374 7275 6374 7572  osition-structur
+0001ba70: 653e 600a 2020 2020 2020 2020 2222 220a  e>`.        """.
+0001ba80: 2020 2020 2020 2020 7365 6c66 2e6c 6f61          self.loa
+0001ba90: 645f 6d61 726b 6574 7328 290a 2020 2020  d_markets().    
+0001baa0: 2020 2020 7265 7175 6573 7420 3d20 7b0a      request = {.
+0001bab0: 2020 2020 2020 2020 2020 2020 2320 2774              # 't
+0001bac0: 7869 6427 3a20 2763 6f6d 6d61 2064 656c  xid': 'comma del
+0001bad0: 696d 6974 6564 206c 6973 7420 6f66 2074  imited list of t
+0001bae0: 7261 6e73 6163 7469 6f6e 2069 6473 2074  ransaction ids t
+0001baf0: 6f20 7265 7374 7269 6374 206f 7574 7075  o restrict outpu
+0001bb00: 7420 746f 272c 0a20 2020 2020 2020 2020  t to',.         
+0001bb10: 2020 2023 2027 646f 6361 6c63 7327 3a20     # 'docalcs': 
+0001bb20: 4661 6c73 652c 2020 2320 7768 6574 6865  False,  # whethe
+0001bb30: 7220 6f72 206e 6f74 2074 6f20 696e 636c  r or not to incl
+0001bb40: 7564 6520 7072 6f66 6974 2f6c 6f73 7320  ude profit/loss 
+0001bb50: 6361 6c63 756c 6174 696f 6e73 0a20 2020  calculations.   
+0001bb60: 2020 2020 2020 2020 2023 2027 636f 6e73           # 'cons
+0001bb70: 6f6c 6964 6174 696f 6e27 3a20 276d 6172  olidation': 'mar
+0001bb80: 6b65 7427 2c20 2023 2077 6861 7420 746f  ket',  # what to
+0001bb90: 2063 6f6e 736f 6c69 6461 7465 2074 6865   consolidate the
+0001bba0: 2070 6f73 6974 696f 6e73 2064 6174 6120   positions data 
+0001bbb0: 6172 6f75 6e64 2c20 6d61 726b 6574 2077  around, market w
+0001bbc0: 696c 6c20 636f 6e73 6f6c 6964 6174 6520  ill consolidate 
+0001bbd0: 706f 7369 7469 6f6e 7320 6261 7365 6420  positions based 
+0001bbe0: 6f6e 206d 6172 6b65 7420 7061 6972 0a20  on market pair. 
+0001bbf0: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
+0001bc00: 2072 6573 706f 6e73 6520 3d20 7365 6c66   response = self
+0001bc10: 2e70 7269 7661 7465 506f 7374 4f70 656e  .privatePostOpen
+0001bc20: 506f 7369 7469 6f6e 7328 7365 6c66 2e65  Positions(self.e
+0001bc30: 7874 656e 6428 7265 7175 6573 742c 2070  xtend(request, p
+0001bc40: 6172 616d 7329 290a 2020 2020 2020 2020  arams)).        
+0001bc50: 230a 2020 2020 2020 2020 2320 6e6f 2063  #.        # no c
+0001bc60: 6f6e 736f 6c69 6461 7469 6f6e 0a20 2020  onsolidation.   
+0001bc70: 2020 2020 2023 0a20 2020 2020 2020 2023       #.        #
+0001bc80: 2020 2020 207b 0a20 2020 2020 2020 2023       {.        #
+0001bc90: 2020 2020 2020 2020 2022 6572 726f 7222           "error"
+0001bca0: 3a20 5b5d 2c0a 2020 2020 2020 2020 2320  : [],.        # 
+0001bcb0: 2020 2020 2020 2020 2272 6573 756c 7422          "result"
+0001bcc0: 3a20 7b0a 2020 2020 2020 2020 2320 2020  : {.        #   
+0001bcd0: 2020 2020 2020 2020 2020 2754 4755 464d            'TGUFM
+0001bce0: 592d 464c 4553 4a2d 5659 4958 334a 273a  Y-FLESJ-VYIX3J':
+0001bcf0: 207b 0a20 2020 2020 2020 2023 2020 2020   {.        #    
+0001bd00: 2020 2020 2020 2020 2020 2020 2022 6f72               "or
+0001bd10: 6465 7274 7869 6422 3a20 224f 334c 524e  dertxid": "O3LRN
+0001bd20: 552d 5a4b 4447 352d 584e 4344 4652 222c  U-ZKDG5-XNCDFR",
+0001bd30: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001bd40: 2020 2020 2020 2020 2020 2022 706f 7373             "poss
+0001bd50: 7461 7475 7322 3a20 226f 7065 6e22 2c0a  tatus": "open",.
+0001bd60: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001bd70: 2020 2020 2020 2020 2020 2270 6169 7222            "pair"
+0001bd80: 3a20 2245 5448 5553 4454 222c 0a20 2020  : "ETHUSDT",.   
+0001bd90: 2020 2020 2023 2020 2020 2020 2020 2020       #          
+0001bda0: 2020 2020 2020 2022 7469 6d65 223a 2020         "time":  
+0001bdb0: 3136 3131 3535 3732 3331 2e34 3538 342c  1611557231.4584,
+0001bdc0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001bdd0: 2020 2020 2020 2020 2020 2022 7479 7065             "type
+0001bde0: 223a 2022 6275 7922 2c0a 2020 2020 2020  ": "buy",.      
+0001bdf0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001be00: 2020 2020 226f 7264 6572 7479 7065 223a      "ordertype":
+0001be10: 2022 6d61 726b 6574 222c 0a20 2020 2020   "market",.     
+0001be20: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001be30: 2020 2020 2022 636f 7374 223a 2022 3238       "cost": "28
+0001be40: 2e34 3938 3030 222c 0a20 2020 2020 2020  .49800",.       
+0001be50: 2023 2020 2020 2020 2020 2020 2020 2020   #              
+0001be60: 2020 2022 6665 6522 3a20 2230 2e30 3739     "fee": "0.079
+0001be70: 3739 222c 0a20 2020 2020 2020 2023 2020  79",.        #  
+0001be80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001be90: 766f 6c22 3a20 2230 2e30 3230 3030 3030  vol": "0.0200000
+0001bea0: 3022 2c0a 2020 2020 2020 2020 2320 2020  0",.        #   
+0001beb0: 2020 2020 2020 2020 2020 2020 2020 2276                "v
+0001bec0: 6f6c 5f63 6c6f 7365 6422 3a20 2230 2e30  ol_closed": "0.0
+0001bed0: 3030 3030 3030 3022 2c0a 2020 2020 2020  0000000",.      
+0001bee0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001bef0: 2020 2020 226d 6172 6769 6e22 3a20 2231      "margin": "1
+0001bf00: 342e 3234 3930 3022 2c0a 2020 2020 2020  4.24900",.      
+0001bf10: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001bf20: 2020 2020 2274 6572 6d73 223a 2022 302e      "terms": "0.
+0001bf30: 3032 3030 2520 7065 7220 3420 686f 7572  0200% per 4 hour
+0001bf40: 7322 2c0a 2020 2020 2020 2020 2320 2020  s",.        #   
+0001bf50: 2020 2020 2020 2020 2020 2020 2020 2272                "r
+0001bf60: 6f6c 6c6f 7665 7274 6d22 3a20 2231 3631  ollovertm": "161
+0001bf70: 3135 3731 3633 3122 2c0a 2020 2020 2020  1571631",.      
+0001bf80: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001bf90: 2020 2020 226d 6973 6322 3a20 2222 2c0a      "misc": "",.
+0001bfa0: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001bfb0: 2020 2020 2020 2020 2020 226f 666c 6167            "oflag
+0001bfc0: 7322 3a20 2222 0a20 2020 2020 2020 2023  s": "".        #
+0001bfd0: 2020 2020 2020 2020 2020 2020 207d 0a20               }. 
+0001bfe0: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001bff0: 207d 0a20 2020 2020 2020 2023 2020 2020   }.        #    
+0001c000: 207d 0a20 2020 2020 2020 2023 0a20 2020   }.        #.   
+0001c010: 2020 2020 2023 2063 6f6e 736f 6c69 6461       # consolida
+0001c020: 7469 6f6e 2062 7920 6d61 726b 6574 0a20  tion by market. 
+0001c030: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0001c040: 2023 2020 2020 207b 0a20 2020 2020 2020   #     {.       
+0001c050: 2023 2020 2020 2020 2020 2022 6572 726f   #         "erro
+0001c060: 7222 3a20 5b5d 2c0a 2020 2020 2020 2020  r": [],.        
+0001c070: 2320 2020 2020 2020 2020 2272 6573 756c  #         "resul
+0001c080: 7422 3a20 5b0a 2020 2020 2020 2020 2320  t": [.        # 
+0001c090: 2020 2020 2020 2020 2020 2020 7b0a 2020              {.  
+0001c0a0: 2020 2020 2020 2320 2020 2020 2020 2020        #         
+0001c0b0: 2020 2020 2020 2020 2270 6169 7222 3a20          "pair": 
+0001c0c0: 2245 5448 5553 4454 222c 0a20 2020 2020  "ETHUSDT",.     
+0001c0d0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001c0e0: 2020 2020 2022 706f 7369 7469 6f6e 7322       "positions"
+0001c0f0: 3a20 2231 222c 0a20 2020 2020 2020 2023  : "1",.        #
+0001c100: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c110: 2022 7479 7065 223a 2022 6275 7922 2c0a   "type": "buy",.
+0001c120: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001c130: 2020 2020 2020 2020 2020 226c 6576 6572            "lever
+0001c140: 6167 6522 3a20 2232 2e30 3030 3030 222c  age": "2.00000",
+0001c150: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001c160: 2020 2020 2020 2020 2020 2022 636f 7374             "cost
+0001c170: 223a 2022 3238 2e34 3938 3030 222c 0a20  ": "28.49800",. 
+0001c180: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001c190: 2020 2020 2020 2020 2022 6665 6522 3a20           "fee": 
+0001c1a0: 2230 2e30 3739 3739 222c 0a20 2020 2020  "0.07979",.     
+0001c1b0: 2020 2023 2020 2020 2020 2020 2020 2020     #            
+0001c1c0: 2020 2020 2022 766f 6c22 3a20 2230 2e30       "vol": "0.0
+0001c1d0: 3230 3030 3030 3022 2c0a 2020 2020 2020  2000000",.      
+0001c1e0: 2020 2320 2020 2020 2020 2020 2020 2020    #             
+0001c1f0: 2020 2020 2276 6f6c 5f63 6c6f 7365 6422      "vol_closed"
+0001c200: 3a20 2230 2e30 3030 3030 3030 3022 2c0a  : "0.00000000",.
+0001c210: 2020 2020 2020 2020 2320 2020 2020 2020          #       
+0001c220: 2020 2020 2020 2020 2020 226d 6172 6769            "margi
+0001c230: 6e22 3a20 2231 342e 3234 3930 3022 0a20  n": "14.24900". 
+0001c240: 2020 2020 2020 2023 2020 2020 2020 2020         #        
+0001c250: 2020 2020 207d 0a20 2020 2020 2020 2023       }.        #
+0001c260: 2020 2020 2020 2020 205d 0a20 2020 2020           ].     
+0001c270: 2020 2023 2020 2020 207d 0a20 2020 2020     #     }.     
+0001c280: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+0001c290: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+0001c2a0: 7661 6c75 6528 7265 7370 6f6e 7365 2c20  value(response, 
+0001c2b0: 2772 6573 756c 7427 290a 2020 2020 2020  'result').      
+0001c2c0: 2020 2320 746f 646f 2075 6e69 6679 2070    # todo unify p
+0001c2d0: 6172 7365 506f 7369 7469 6f6e 2f70 6172  arsePosition/par
+0001c2e0: 7365 506f 7369 7469 6f6e 730a 2020 2020  sePositions.    
+0001c2f0: 2020 2020 7265 7475 726e 2072 6573 756c      return resul
+0001c300: 740a 0a20 2020 2064 6566 2070 6172 7365  t..    def parse
+0001c310: 5f61 6363 6f75 6e74 5f74 7970 6528 7365  _account_type(se
+0001c320: 6c66 2c20 6163 636f 756e 7429 3a0a 2020  lf, account):.  
+0001c330: 2020 2020 2020 6163 636f 756e 7442 7954        accountByT
+0001c340: 7970 6520 3d20 7b0a 2020 2020 2020 2020  ype = {.        
+0001c350: 2020 2020 2773 706f 7427 3a20 2753 706f      'spot': 'Spo
+0001c360: 7420 5761 6c6c 6574 272c 0a20 2020 2020  t Wallet',.     
+0001c370: 2020 2020 2020 2027 7377 6170 273a 2027         'swap': '
+0001c380: 4675 7475 7265 7320 5761 6c6c 6574 272c  Futures Wallet',
+0001c390: 0a20 2020 2020 2020 2020 2020 2027 6675  .            'fu
+0001c3a0: 7475 7265 273a 2027 4675 7475 7265 7320  ture': 'Futures 
+0001c3b0: 5761 6c6c 6574 272c 0a20 2020 2020 2020  Wallet',.       
+0001c3c0: 207d 0a20 2020 2020 2020 2072 6574 7572   }.        retur
+0001c3d0: 6e20 7365 6c66 2e73 6166 655f 7374 7269  n self.safe_stri
+0001c3e0: 6e67 2861 6363 6f75 6e74 4279 5479 7065  ng(accountByType
+0001c3f0: 2c20 6163 636f 756e 742c 2061 6363 6f75  , account, accou
+0001c400: 6e74 290a 0a20 2020 2064 6566 2074 7261  nt)..    def tra
+0001c410: 6e73 6665 725f 6f75 7428 7365 6c66 2c20  nsfer_out(self, 
+0001c420: 636f 6465 3a20 7374 722c 2061 6d6f 756e  code: str, amoun
+0001c430: 742c 2070 6172 616d 733d 7b7d 293a 0a20  t, params={}):. 
+0001c440: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001c450: 2020 2074 7261 6e73 6665 7220 6672 6f6d     transfer from
+0001c460: 2073 706f 7420 7761 6c6c 6574 2074 6f20   spot wallet to 
+0001c470: 6675 7475 7265 7320 7761 6c6c 6574 0a20  futures wallet. 
+0001c480: 2020 2020 2020 203a 7365 653a 2068 7474         :see: htt
+0001c490: 7073 3a2f 2f64 6f63 732e 6b72 616b 656e  ps://docs.kraken
+0001c4a0: 2e63 6f6d 2f72 6573 742f 2374 6167 2f55  .com/rest/#tag/U
+0001c4b0: 7365 722d 4675 6e64 696e 672f 6f70 6572  ser-Funding/oper
+0001c4c0: 6174 696f 6e2f 7761 6c6c 6574 5472 616e  ation/walletTran
+0001c4d0: 7366 6572 0a20 2020 2020 2020 203a 7061  sfer.        :pa
+0001c4e0: 7261 6d20 7374 7220 636f 6465 3a20 556e  ram str code: Un
+0001c4f0: 6966 6965 6420 6375 7272 656e 6379 2063  ified currency c
+0001c500: 6f64 650a 2020 2020 2020 2020 3a70 6172  ode.        :par
+0001c510: 616d 2066 6c6f 6174 2061 6d6f 756e 743a  am float amount:
+0001c520: 2053 697a 6520 6f66 2074 6865 2074 7261   Size of the tra
+0001c530: 6e73 6665 720a 2020 2020 2020 2020 3a70  nsfer.        :p
+0001c540: 6172 616d 2064 6963 7420 5b70 6172 616d  aram dict [param
+0001c550: 735d 3a20 4578 6368 616e 6765 2073 7065  s]: Exchange spe
+0001c560: 6369 6669 6320 7061 7261 6d65 7465 7273  cific parameters
+0001c570: 0a20 2020 2020 2020 203a 7265 7475 726e  .        :return
+0001c580: 733a 2061 2060 7472 616e 7366 6572 2073  s: a `transfer s
+0001c590: 7472 7563 7475 7265 203c 6874 7470 733a  tructure <https:
+0001c5a0: 2f2f 646f 6373 2e63 6378 742e 636f 6d2f  //docs.ccxt.com/
+0001c5b0: 232f 3f69 643d 7472 616e 7366 6572 2d73  #/?id=transfer-s
+0001c5c0: 7472 7563 7475 7265 3e60 0a20 2020 2020  tructure>`.     
+0001c5d0: 2020 2022 2222 0a20 2020 2020 2020 2072     """.        r
+0001c5e0: 6574 7572 6e20 7365 6c66 2e74 7261 6e73  eturn self.trans
+0001c5f0: 6665 7228 636f 6465 2c20 616d 6f75 6e74  fer(code, amount
+0001c600: 2c20 2773 706f 7427 2c20 2773 7761 7027  , 'spot', 'swap'
+0001c610: 2c20 7061 7261 6d73 290a 0a20 2020 2064  , params)..    d
+0001c620: 6566 2074 7261 6e73 6665 7228 7365 6c66  ef transfer(self
+0001c630: 2c20 636f 6465 3a20 7374 722c 2061 6d6f  , code: str, amo
+0001c640: 756e 743a 2066 6c6f 6174 2c20 6672 6f6d  unt: float, from
+0001c650: 4163 636f 756e 743a 2073 7472 2c20 746f  Account: str, to
+0001c660: 4163 636f 756e 743a 2073 7472 2c20 7061  Account: str, pa
+0001c670: 7261 6d73 3d7b 7d29 202d 3e20 5472 616e  rams={}) -> Tran
+0001c680: 7366 6572 456e 7472 793a 0a20 2020 2020  sferEntry:.     
+0001c690: 2020 2022 2222 0a20 2020 2020 2020 203a     """.        :
+0001c6a0: 7365 653a 2068 7474 7073 3a2f 2f64 6f63  see: https://doc
+0001c6b0: 732e 6b72 616b 656e 2e63 6f6d 2f72 6573  s.kraken.com/res
+0001c6c0: 742f 2374 6167 2f55 7365 722d 4675 6e64  t/#tag/User-Fund
+0001c6d0: 696e 672f 6f70 6572 6174 696f 6e2f 7761  ing/operation/wa
+0001c6e0: 6c6c 6574 5472 616e 7366 6572 0a20 2020  lletTransfer.   
+0001c6f0: 2020 2020 2074 7261 6e73 6665 7273 2063       transfers c
+0001c700: 7572 7265 6e63 6965 7320 6265 7477 6565  urrencies betwee
+0001c710: 6e20 7375 622d 6163 636f 756e 7473 286f  n sub-accounts(o
+0001c720: 6e6c 7920 7370 6f74 2d3e 7377 6170 2064  nly spot->swap d
+0001c730: 6972 6563 7469 6f6e 2069 7320 7375 7070  irection is supp
+0001c740: 6f72 7465 6429 0a20 2020 2020 2020 203a  orted).        :
+0001c750: 7061 7261 6d20 7374 7220 636f 6465 3a20  param str code: 
+0001c760: 556e 6966 6965 6420 6375 7272 656e 6379  Unified currency
+0001c770: 2063 6f64 650a 2020 2020 2020 2020 3a70   code.        :p
+0001c780: 6172 616d 2066 6c6f 6174 2061 6d6f 756e  aram float amoun
+0001c790: 743a 2053 697a 6520 6f66 2074 6865 2074  t: Size of the t
+0001c7a0: 7261 6e73 6665 720a 2020 2020 2020 2020  ransfer.        
+0001c7b0: 3a70 6172 616d 2073 7472 2066 726f 6d41  :param str fromA
+0001c7c0: 6363 6f75 6e74 3a20 2773 706f 7427 206f  ccount: 'spot' o
+0001c7d0: 7220 2753 706f 7420 5761 6c6c 6574 270a  r 'Spot Wallet'.
+0001c7e0: 2020 2020 2020 2020 3a70 6172 616d 2073          :param s
+0001c7f0: 7472 2074 6f41 6363 6f75 6e74 3a20 2773  tr toAccount: 's
+0001c800: 7761 7027 206f 7220 2746 7574 7572 6573  wap' or 'Futures
+0001c810: 2057 616c 6c65 7427 0a20 2020 2020 2020   Wallet'.       
+0001c820: 203a 7061 7261 6d20 6469 6374 205b 7061   :param dict [pa
+0001c830: 7261 6d73 5d3a 2045 7863 6861 6e67 6520  rams]: Exchange 
+0001c840: 7370 6563 6966 6963 2070 6172 616d 6574  specific paramet
+0001c850: 6572 730a 2020 2020 2020 2020 3a72 6574  ers.        :ret
+0001c860: 7572 6e73 3a20 6120 6074 7261 6e73 6665  urns: a `transfe
+0001c870: 7220 7374 7275 6374 7572 6520 3c68 7474  r structure <htt
+0001c880: 7073 3a2f 2f64 6f63 732e 6363 7874 2e63  ps://docs.ccxt.c
+0001c890: 6f6d 2f23 2f3f 6964 3d74 7261 6e73 6665  om/#/?id=transfe
+0001c8a0: 722d 7374 7275 6374 7572 653e 600a 2020  r-structure>`.  
+0001c8b0: 2020 2020 2020 2222 220a 2020 2020 2020        """.      
+0001c8c0: 2020 7365 6c66 2e6c 6f61 645f 6d61 726b    self.load_mark
+0001c8d0: 6574 7328 290a 2020 2020 2020 2020 6375  ets().        cu
+0001c8e0: 7272 656e 6379 203d 2073 656c 662e 6375  rrency = self.cu
+0001c8f0: 7272 656e 6379 2863 6f64 6529 0a20 2020  rrency(code).   
+0001c900: 2020 2020 2066 726f 6d41 6363 6f75 6e74       fromAccount
+0001c910: 203d 2073 656c 662e 7061 7273 655f 6163   = self.parse_ac
+0001c920: 636f 756e 745f 7479 7065 2866 726f 6d41  count_type(fromA
+0001c930: 6363 6f75 6e74 290a 2020 2020 2020 2020  ccount).        
+0001c940: 746f 4163 636f 756e 7420 3d20 7365 6c66  toAccount = self
+0001c950: 2e70 6172 7365 5f61 6363 6f75 6e74 5f74  .parse_account_t
+0001c960: 7970 6528 746f 4163 636f 756e 7429 0a20  ype(toAccount). 
+0001c970: 2020 2020 2020 2072 6571 7565 7374 203d         request =
+0001c980: 207b 0a20 2020 2020 2020 2020 2020 2027   {.            '
+0001c990: 616d 6f75 6e74 273a 2073 656c 662e 6375  amount': self.cu
+0001c9a0: 7272 656e 6379 5f74 6f5f 7072 6563 6973  rrency_to_precis
+0001c9b0: 696f 6e28 636f 6465 2c20 616d 6f75 6e74  ion(code, amount
+0001c9c0: 292c 0a20 2020 2020 2020 2020 2020 2027  ),.            '
+0001c9d0: 6672 6f6d 273a 2066 726f 6d41 6363 6f75  from': fromAccou
+0001c9e0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+0001c9f0: 2774 6f27 3a20 746f 4163 636f 756e 742c  'to': toAccount,
+0001ca00: 0a20 2020 2020 2020 2020 2020 2027 6173  .            'as
+0001ca10: 7365 7427 3a20 6375 7272 656e 6379 5b27  set': currency['
+0001ca20: 6964 275d 2c0a 2020 2020 2020 2020 7d0a  id'],.        }.
+0001ca30: 2020 2020 2020 2020 6966 2066 726f 6d41          if fromA
+0001ca40: 6363 6f75 6e74 2021 3d20 2753 706f 7420  ccount != 'Spot 
+0001ca50: 5761 6c6c 6574 273a 0a20 2020 2020 2020  Wallet':.       
+0001ca60: 2020 2020 2072 6169 7365 2042 6164 5265       raise BadRe
+0001ca70: 7175 6573 7428 7365 6c66 2e69 6420 2b20  quest(self.id + 
+0001ca80: 2720 7472 616e 7366 6572 2063 616e 6e6f  ' transfer canno
+0001ca90: 7420 7472 616e 7366 6572 2066 726f 6d20  t transfer from 
+0001caa0: 2720 2b20 6672 6f6d 4163 636f 756e 7420  ' + fromAccount 
+0001cab0: 2b20 2720 746f 2027 202b 2074 6f41 6363  + ' to ' + toAcc
+0001cac0: 6f75 6e74 202b 2027 2e20 5573 6520 6b72  ount + '. Use kr
+0001cad0: 616b 656e 6675 7475 7265 7320 696e 7374  akenfutures inst
+0001cae0: 6561 6420 746f 2074 7261 6e73 6665 7220  ead to transfer 
+0001caf0: 6672 6f6d 2074 6865 2066 7574 7572 6573  from the futures
+0001cb00: 2061 6363 6f75 6e74 2e27 290a 2020 2020   account.').    
+0001cb10: 2020 2020 7265 7370 6f6e 7365 203d 2073      response = s
+0001cb20: 656c 662e 7072 6976 6174 6550 6f73 7457  elf.privatePostW
+0001cb30: 616c 6c65 7454 7261 6e73 6665 7228 7365  alletTransfer(se
+0001cb40: 6c66 2e65 7874 656e 6428 7265 7175 6573  lf.extend(reques
+0001cb50: 742c 2070 6172 616d 7329 290a 2020 2020  t, params)).    
+0001cb60: 2020 2020 230a 2020 2020 2020 2020 2320      #.        # 
+0001cb70: 2020 7b0a 2020 2020 2020 2020 2320 2020    {.        #   
+0001cb80: 2020 2020 2265 7272 6f72 223a 5b0a 2020      "error":[.  
+0001cb90: 2020 2020 2020 2320 2020 2020 2020 5d2c        #       ],
+0001cba0: 0a20 2020 2020 2020 2023 2020 2020 2020  .        #      
+0001cbb0: 2022 7265 7375 6c74 223a 7b0a 2020 2020   "result":{.    
+0001cbc0: 2020 2020 2320 2020 2020 2020 2020 2022      #          "
+0001cbd0: 7265 6669 6422 3a22 424f 4955 5349 462d  refid":"BOIUSIF-
+0001cbe0: 4d37 444c 4d4e 2d55 585a 3350 3522 0a20  M7DLMN-UXZ3P5". 
+0001cbf0: 2020 2020 2020 2023 2020 2020 2020 207d         #       }
+0001cc00: 0a20 2020 2020 2020 2023 2020 207d 0a20  .        #   }. 
+0001cc10: 2020 2020 2020 2023 0a20 2020 2020 2020         #.       
+0001cc20: 2074 7261 6e73 6665 7220 3d20 7365 6c66   transfer = self
+0001cc30: 2e70 6172 7365 5f74 7261 6e73 6665 7228  .parse_transfer(
+0001cc40: 7265 7370 6f6e 7365 2c20 6375 7272 656e  response, curren
+0001cc50: 6379 290a 2020 2020 2020 2020 7265 7475  cy).        retu
+0001cc60: 726e 2073 656c 662e 6578 7465 6e64 2874  rn self.extend(t
+0001cc70: 7261 6e73 6665 722c 207b 0a20 2020 2020  ransfer, {.     
+0001cc80: 2020 2020 2020 2027 616d 6f75 6e74 273a         'amount':
+0001cc90: 2061 6d6f 756e 742c 0a20 2020 2020 2020   amount,.       
+0001cca0: 2020 2020 2027 6672 6f6d 4163 636f 756e       'fromAccoun
+0001ccb0: 7427 3a20 6672 6f6d 4163 636f 756e 742c  t': fromAccount,
+0001ccc0: 0a20 2020 2020 2020 2020 2020 2027 746f  .            'to
+0001ccd0: 4163 636f 756e 7427 3a20 746f 4163 636f  Account': toAcco
+0001cce0: 756e 742c 0a20 2020 2020 2020 207d 290a  unt,.        }).
+0001ccf0: 0a20 2020 2064 6566 2070 6172 7365 5f74  .    def parse_t
+0001cd00: 7261 6e73 6665 7228 7365 6c66 2c20 7472  ransfer(self, tr
+0001cd10: 616e 7366 6572 2c20 6375 7272 656e 6379  ansfer, currency
+0001cd20: 3a20 4375 7272 656e 6379 203d 204e 6f6e  : Currency = Non
+0001cd30: 6529 3a0a 2020 2020 2020 2020 230a 2020  e):.        #.  
+0001cd40: 2020 2020 2020 2320 7472 616e 7366 6572        # transfer
+0001cd50: 0a20 2020 2020 2020 2023 0a20 2020 2020  .        #.     
+0001cd60: 2020 2023 2020 2020 7b0a 2020 2020 2020     #    {.      
+0001cd70: 2020 2320 2020 2020 2020 2022 6572 726f    #        "erro
+0001cd80: 7222 3a5b 0a20 2020 2020 2020 2023 2020  r":[.        #  
+0001cd90: 2020 2020 2020 5d2c 0a20 2020 2020 2020        ],.       
+0001cda0: 2023 2020 2020 2020 2020 2272 6573 756c   #        "resul
+0001cdb0: 7422 3a7b 0a20 2020 2020 2020 2023 2020  t":{.        #  
+0001cdc0: 2020 2020 2020 2020 2022 7265 6669 6422           "refid"
+0001cdd0: 3a22 424f 4955 5349 462d 4d37 444c 4d4e  :"BOIUSIF-M7DLMN
+0001cde0: 2d55 585a 3350 3522 0a20 2020 2020 2020  -UXZ3P5".       
+0001cdf0: 2023 2020 2020 2020 2020 7d0a 2020 2020   #        }.    
+0001ce00: 2020 2020 2320 2020 207d 0a20 2020 2020      #    }.     
+0001ce10: 2020 2023 0a20 2020 2020 2020 2072 6573     #.        res
+0001ce20: 756c 7420 3d20 7365 6c66 2e73 6166 655f  ult = self.safe_
+0001ce30: 7661 6c75 6528 7472 616e 7366 6572 2c20  value(transfer, 
+0001ce40: 2772 6573 756c 7427 2c20 7b7d 290a 2020  'result', {}).  
+0001ce50: 2020 2020 2020 7265 6669 6420 3d20 7365        refid = se
+0001ce60: 6c66 2e73 6166 655f 7374 7269 6e67 2872  lf.safe_string(r
+0001ce70: 6573 756c 742c 2027 7265 6669 6427 290a  esult, 'refid').
+0001ce80: 2020 2020 2020 2020 7265 7475 726e 207b          return {
+0001ce90: 0a20 2020 2020 2020 2020 2020 2027 696e  .            'in
+0001cea0: 666f 273a 2074 7261 6e73 6665 722c 0a20  fo': transfer,. 
+0001ceb0: 2020 2020 2020 2020 2020 2027 6964 273a             'id':
+0001cec0: 2072 6566 6964 2c0a 2020 2020 2020 2020   refid,.        
+0001ced0: 2020 2020 2774 696d 6573 7461 6d70 273a      'timestamp':
+0001cee0: 204e 6f6e 652c 0a20 2020 2020 2020 2020   None,.         
+0001cef0: 2020 2027 6461 7465 7469 6d65 273a 204e     'datetime': N
+0001cf00: 6f6e 652c 0a20 2020 2020 2020 2020 2020  one,.           
+0001cf10: 2027 6375 7272 656e 6379 273a 2073 656c   'currency': sel
+0001cf20: 662e 7361 6665 5f73 7472 696e 6728 6375  f.safe_string(cu
+0001cf30: 7272 656e 6379 2c20 2763 6f64 6527 292c  rrency, 'code'),
+0001cf40: 0a20 2020 2020 2020 2020 2020 2027 616d  .            'am
+0001cf50: 6f75 6e74 273a 204e 6f6e 652c 0a20 2020  ount': None,.   
+0001cf60: 2020 2020 2020 2020 2027 6672 6f6d 4163           'fromAc
+0001cf70: 636f 756e 7427 3a20 4e6f 6e65 2c0a 2020  count': None,.  
+0001cf80: 2020 2020 2020 2020 2020 2774 6f41 6363            'toAcc
+0001cf90: 6f75 6e74 273a 204e 6f6e 652c 0a20 2020  ount': None,.   
+0001cfa0: 2020 2020 2020 2020 2027 7374 6174 7573           'status
+0001cfb0: 273a 2027 7375 6365 7373 272c 0a20 2020  ': 'sucess',.   
+0001cfc0: 2020 2020 207d 0a0a 2020 2020 6465 6620       }..    def 
+0001cfd0: 7369 676e 2873 656c 662c 2070 6174 682c  sign(self, path,
+0001cfe0: 2061 7069 3d27 7075 626c 6963 272c 206d   api='public', m
+0001cff0: 6574 686f 643d 2747 4554 272c 2070 6172  ethod='GET', par
+0001d000: 616d 733d 7b7d 2c20 6865 6164 6572 733d  ams={}, headers=
+0001d010: 4e6f 6e65 2c20 626f 6479 3d4e 6f6e 6529  None, body=None)
+0001d020: 3a0a 2020 2020 2020 2020 7572 6c20 3d20  :.        url = 
+0001d030: 272f 2720 2b20 7365 6c66 2e76 6572 7369  '/' + self.versi
+0001d040: 6f6e 202b 2027 2f27 202b 2061 7069 202b  on + '/' + api +
+0001d050: 2027 2f27 202b 2070 6174 680a 2020 2020   '/' + path.    
+0001d060: 2020 2020 6966 2061 7069 203d 3d20 2770      if api == 'p
+0001d070: 7562 6c69 6327 3a0a 2020 2020 2020 2020  ublic':.        
+0001d080: 2020 2020 6966 2070 6172 616d 733a 0a20      if params:. 
+0001d090: 2020 2020 2020 2020 2020 2020 2020 2023                 #
+0001d0a0: 2075 726c 656e 636f 6465 4e65 7374 6564   urlencodeNested
+0001d0b0: 2069 7320 7573 6564 2074 6f20 6164 6472   is used to addr
+0001d0c0: 6573 7320 6874 7470 733a 2f2f 6769 7468  ess https://gith
+0001d0d0: 7562 2e63 6f6d 2f63 6378 742f 6363 7874  ub.com/ccxt/ccxt
+0001d0e0: 2f69 7373 7565 732f 3132 3837 320a 2020  /issues/12872.  
+0001d0f0: 2020 2020 2020 2020 2020 2020 2020 7572                ur
+0001d100: 6c20 2b3d 2027 3f27 202b 2073 656c 662e  l += '?' + self.
+0001d110: 7572 6c65 6e63 6f64 655f 6e65 7374 6564  urlencode_nested
+0001d120: 2870 6172 616d 7329 0a20 2020 2020 2020  (params).       
+0001d130: 2065 6c69 6620 6170 6920 3d3d 2027 7072   elif api == 'pr
+0001d140: 6976 6174 6527 3a0a 2020 2020 2020 2020  ivate':.        
+0001d150: 2020 2020 6973 4361 6e63 656c 4f72 6465      isCancelOrde
+0001d160: 7242 6174 6368 203d 2028 7061 7468 203d  rBatch = (path =
+0001d170: 3d20 2743 616e 6365 6c4f 7264 6572 4261  = 'CancelOrderBa
+0001d180: 7463 6827 290a 2020 2020 2020 2020 2020  tch').          
+0001d190: 2020 7365 6c66 2e63 6865 636b 5f72 6571    self.check_req
+0001d1a0: 7569 7265 645f 6372 6564 656e 7469 616c  uired_credential
+0001d1b0: 7328 290a 2020 2020 2020 2020 2020 2020  s().            
+0001d1c0: 6e6f 6e63 6520 3d20 7374 7228 7365 6c66  nonce = str(self
+0001d1d0: 2e6e 6f6e 6365 2829 290a 2020 2020 2020  .nonce()).      
+0001d1e0: 2020 2020 2020 2320 7572 6c65 6e63 6f64        # urlencod
+0001d1f0: 654e 6573 7465 6420 6973 2075 7365 6420  eNested is used 
+0001d200: 746f 2061 6464 7265 7373 2068 7474 7073  to address https
+0001d210: 3a2f 2f67 6974 6875 622e 636f 6d2f 6363  ://github.com/cc
+0001d220: 7874 2f63 6378 742f 6973 7375 6573 2f31  xt/ccxt/issues/1
+0001d230: 3238 3732 0a20 2020 2020 2020 2020 2020  2872.           
+0001d240: 2069 6620 6973 4361 6e63 656c 4f72 6465   if isCancelOrde
+0001d250: 7242 6174 6368 3a0a 2020 2020 2020 2020  rBatch:.        
+0001d260: 2020 2020 2020 2020 626f 6479 203d 2073          body = s
+0001d270: 656c 662e 6a73 6f6e 2873 656c 662e 6578  elf.json(self.ex
+0001d280: 7465 6e64 287b 276e 6f6e 6365 273a 206e  tend({'nonce': n
+0001d290: 6f6e 6365 7d2c 2070 6172 616d 7329 290a  once}, params)).
+0001d2a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
+0001d2b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001d2c0: 2020 626f 6479 203d 2073 656c 662e 7572    body = self.ur
+0001d2d0: 6c65 6e63 6f64 655f 6e65 7374 6564 2873  lencode_nested(s
+0001d2e0: 656c 662e 6578 7465 6e64 287b 276e 6f6e  elf.extend({'non
+0001d2f0: 6365 273a 206e 6f6e 6365 7d2c 2070 6172  ce': nonce}, par
+0001d300: 616d 7329 290a 2020 2020 2020 2020 2020  ams)).          
+0001d310: 2020 6175 7468 203d 2073 656c 662e 656e    auth = self.en
+0001d320: 636f 6465 286e 6f6e 6365 202b 2062 6f64  code(nonce + bod
+0001d330: 7929 0a20 2020 2020 2020 2020 2020 2068  y).            h
+0001d340: 6173 6820 3d20 7365 6c66 2e68 6173 6828  ash = self.hash(
+0001d350: 6175 7468 2c20 2773 6861 3235 3627 2c20  auth, 'sha256', 
+0001d360: 2762 696e 6172 7927 290a 2020 2020 2020  'binary').      
+0001d370: 2020 2020 2020 6269 6e61 7279 203d 2073        binary = s
+0001d380: 656c 662e 656e 636f 6465 2875 726c 290a  elf.encode(url).
+0001d390: 2020 2020 2020 2020 2020 2020 6269 6e68              binh
+0001d3a0: 6173 6820 3d20 7365 6c66 2e62 696e 6172  ash = self.binar
+0001d3b0: 795f 636f 6e63 6174 2862 696e 6172 792c  y_concat(binary,
+0001d3c0: 2068 6173 6829 0a20 2020 2020 2020 2020   hash).         
+0001d3d0: 2020 2073 6563 7265 7420 3d20 7365 6c66     secret = self
+0001d3e0: 2e62 6173 6536 345f 746f 5f62 696e 6172  .base64_to_binar
+0001d3f0: 7928 7365 6c66 2e73 6563 7265 7429 0a20  y(self.secret). 
+0001d400: 2020 2020 2020 2020 2020 2073 6967 6e61             signa
+0001d410: 7475 7265 203d 2073 656c 662e 686d 6163  ture = self.hmac
+0001d420: 2862 696e 6861 7368 2c20 7365 6372 6574  (binhash, secret
+0001d430: 2c20 6861 7368 6c69 622e 7368 6135 3132  , hashlib.sha512
+0001d440: 2c20 2762 6173 6536 3427 290a 2020 2020  , 'base64').    
+0001d450: 2020 2020 2020 2020 6865 6164 6572 7320          headers 
+0001d460: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
+0001d470: 2020 2020 2741 5049 2d4b 6579 273a 2073      'API-Key': s
+0001d480: 656c 662e 6170 694b 6579 2c0a 2020 2020  elf.apiKey,.    
+0001d490: 2020 2020 2020 2020 2020 2020 2741 5049              'API
+0001d4a0: 2d53 6967 6e27 3a20 7369 676e 6174 7572  -Sign': signatur
+0001d4b0: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
+0001d4c0: 2020 2023 2027 436f 6e74 656e 742d 5479     # 'Content-Ty
+0001d4d0: 7065 273a 2027 6170 706c 6963 6174 696f  pe': 'applicatio
+0001d4e0: 6e2f 782d 7777 772d 666f 726d 2d75 726c  n/x-www-form-url
+0001d4f0: 656e 636f 6465 6427 2c0a 2020 2020 2020  encoded',.      
+0001d500: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+0001d510: 2020 2020 6966 2069 7343 616e 6365 6c4f      if isCancelO
+0001d520: 7264 6572 4261 7463 683a 0a20 2020 2020  rderBatch:.     
+0001d530: 2020 2020 2020 2020 2020 2068 6561 6465             heade
+0001d540: 7273 5b27 436f 6e74 656e 742d 5479 7065  rs['Content-Type
+0001d550: 275d 203d 2027 6170 706c 6963 6174 696f  '] = 'applicatio
+0001d560: 6e2f 6a73 6f6e 270a 2020 2020 2020 2020  n/json'.        
+0001d570: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0001d580: 2020 2020 2020 2020 2020 6865 6164 6572            header
+0001d590: 735b 2743 6f6e 7465 6e74 2d54 7970 6527  s['Content-Type'
+0001d5a0: 5d20 3d20 2761 7070 6c69 6361 7469 6f6e  ] = 'application
+0001d5b0: 2f78 2d77 7777 2d66 6f72 6d2d 7572 6c65  /x-www-form-urle
+0001d5c0: 6e63 6f64 6564 270a 2020 2020 2020 2020  ncoded'.        
+0001d5d0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0001d5e0: 2020 7572 6c20 3d20 272f 2720 2b20 7061    url = '/' + pa
+0001d5f0: 7468 0a20 2020 2020 2020 2075 726c 203d  th.        url =
+0001d600: 2073 656c 662e 7572 6c73 5b27 6170 6927   self.urls['api'
+0001d610: 5d5b 6170 695d 202b 2075 726c 0a20 2020  ][api] + url.   
+0001d620: 2020 2020 2072 6574 7572 6e20 7b27 7572       return {'ur
+0001d630: 6c27 3a20 7572 6c2c 2027 6d65 7468 6f64  l': url, 'method
+0001d640: 273a 206d 6574 686f 642c 2027 626f 6479  ': method, 'body
+0001d650: 273a 2062 6f64 792c 2027 6865 6164 6572  ': body, 'header
+0001d660: 7327 3a20 6865 6164 6572 737d 0a0a 2020  s': headers}..  
+0001d670: 2020 6465 6620 6e6f 6e63 6528 7365 6c66    def nonce(self
+0001d680: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+0001d690: 6e20 7365 6c66 2e6d 696c 6c69 7365 636f  n self.milliseco
+0001d6a0: 6e64 7328 290a 0a20 2020 2064 6566 2068  nds()..    def h
+0001d6b0: 616e 646c 655f 6572 726f 7273 2873 656c  andle_errors(sel
+0001d6c0: 662c 2063 6f64 652c 2072 6561 736f 6e2c  f, code, reason,
+0001d6d0: 2075 726c 2c20 6d65 7468 6f64 2c20 6865   url, method, he
+0001d6e0: 6164 6572 732c 2062 6f64 792c 2072 6573  aders, body, res
+0001d6f0: 706f 6e73 652c 2072 6571 7565 7374 4865  ponse, requestHe
+0001d700: 6164 6572 732c 2072 6571 7565 7374 426f  aders, requestBo
+0001d710: 6479 293a 0a20 2020 2020 2020 2069 6620  dy):.        if 
+0001d720: 636f 6465 203d 3d20 3532 303a 0a20 2020  code == 520:.   
+0001d730: 2020 2020 2020 2020 2072 6169 7365 2045           raise E
+0001d740: 7863 6861 6e67 654e 6f74 4176 6169 6c61  xchangeNotAvaila
+0001d750: 626c 6528 7365 6c66 2e69 6420 2b20 2720  ble(self.id + ' 
+0001d760: 2720 2b20 7374 7228 636f 6465 2920 2b20  ' + str(code) + 
+0001d770: 2720 2720 2b20 7265 6173 6f6e 290a 2020  ' ' + reason).  
+0001d780: 2020 2020 2020 2320 746f 646f 3a20 7265        # todo: re
+0001d790: 7772 6974 6520 7365 6c66 2066 6f72 2022  write self for "
+0001d7a0: 6272 6f61 6422 2065 7863 6570 7469 6f6e  broad" exception
+0001d7b0: 7320 6d61 7463 6869 6e67 0a20 2020 2020  s matching.     
+0001d7c0: 2020 2069 6620 626f 6479 2e66 696e 6428     if body.find(
+0001d7d0: 2749 6e76 616c 6964 206f 7264 6572 2729  'Invalid order')
+0001d7e0: 203e 3d20 303a 0a20 2020 2020 2020 2020   >= 0:.         
+0001d7f0: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
+0001d800: 4f72 6465 7228 7365 6c66 2e69 6420 2b20  Order(self.id + 
+0001d810: 2720 2720 2b20 626f 6479 290a 2020 2020  ' ' + body).    
+0001d820: 2020 2020 6966 2062 6f64 792e 6669 6e64      if body.find
+0001d830: 2827 496e 7661 6c69 6420 6e6f 6e63 6527  ('Invalid nonce'
+0001d840: 2920 3e3d 2030 3a0a 2020 2020 2020 2020  ) >= 0:.        
+0001d850: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
+0001d860: 644e 6f6e 6365 2873 656c 662e 6964 202b  dNonce(self.id +
+0001d870: 2027 2027 202b 2062 6f64 7929 0a20 2020   ' ' + body).   
+0001d880: 2020 2020 2069 6620 626f 6479 2e66 696e       if body.fin
+0001d890: 6428 2749 6e73 7566 6669 6369 656e 7420  d('Insufficient 
+0001d8a0: 6675 6e64 7327 2920 3e3d 2030 3a0a 2020  funds') >= 0:.  
+0001d8b0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001d8c0: 496e 7375 6666 6963 6965 6e74 4675 6e64  InsufficientFund
+0001d8d0: 7328 7365 6c66 2e69 6420 2b20 2720 2720  s(self.id + ' ' 
+0001d8e0: 2b20 626f 6479 290a 2020 2020 2020 2020  + body).        
+0001d8f0: 6966 2062 6f64 792e 6669 6e64 2827 4361  if body.find('Ca
+0001d900: 6e63 656c 2070 656e 6469 6e67 2729 203e  ncel pending') >
+0001d910: 3d20 303a 0a20 2020 2020 2020 2020 2020  = 0:.           
+0001d920: 2072 6169 7365 2043 616e 6365 6c50 656e   raise CancelPen
+0001d930: 6469 6e67 2873 656c 662e 6964 202b 2027  ding(self.id + '
+0001d940: 2027 202b 2062 6f64 7929 0a20 2020 2020   ' + body).     
+0001d950: 2020 2069 6620 626f 6479 2e66 696e 6428     if body.find(
+0001d960: 2749 6e76 616c 6964 2061 7267 756d 656e  'Invalid argumen
+0001d970: 7473 3a76 6f6c 756d 6527 2920 3e3d 2030  ts:volume') >= 0
+0001d980: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0001d990: 6973 6520 496e 7661 6c69 644f 7264 6572  ise InvalidOrder
+0001d9a0: 2873 656c 662e 6964 202b 2027 2027 202b  (self.id + ' ' +
+0001d9b0: 2062 6f64 7929 0a20 2020 2020 2020 2069   body).        i
+0001d9c0: 6620 626f 6479 2e66 696e 6428 2752 6174  f body.find('Rat
+0001d9d0: 6520 6c69 6d69 7420 6578 6365 6564 6564  e limit exceeded
+0001d9e0: 2729 203e 3d20 303a 0a20 2020 2020 2020  ') >= 0:.       
+0001d9f0: 2020 2020 2072 6169 7365 2052 6174 654c       raise RateL
+0001da00: 696d 6974 4578 6365 6564 6564 2873 656c  imitExceeded(sel
+0001da10: 662e 6964 202b 2027 2027 202b 2062 6f64  f.id + ' ' + bod
+0001da20: 7929 0a20 2020 2020 2020 2069 6620 7265  y).        if re
+0001da30: 7370 6f6e 7365 2069 7320 4e6f 6e65 3a0a  sponse is None:.
+0001da40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0001da50: 726e 204e 6f6e 650a 2020 2020 2020 2020  rn None.        
+0001da60: 6966 2062 6f64 795b 305d 203d 3d20 277b  if body[0] == '{
+0001da70: 273a 0a20 2020 2020 2020 2020 2020 2069  ':.            i
+0001da80: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
+0001da90: 2872 6573 706f 6e73 652c 2073 7472 293a  (response, str):
+0001daa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001dab0: 2069 6620 2765 7272 6f72 2720 696e 2072   if 'error' in r
+0001dac0: 6573 706f 6e73 653a 0a20 2020 2020 2020  esponse:.       
+0001dad0: 2020 2020 2020 2020 2020 2020 206e 756d               num
+0001dae0: 4572 726f 7273 203d 206c 656e 2872 6573  Errors = len(res
+0001daf0: 706f 6e73 655b 2765 7272 6f72 275d 290a  ponse['error']).
 0001db00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001db10: 2020 6e75 6d45 7272 6f72 7320 3d20 6c65    numErrors = le
-0001db20: 6e28 7265 7370 6f6e 7365 5b27 6572 726f  n(response['erro
-0001db30: 7227 5d29 0a20 2020 2020 2020 2020 2020  r']).           
-0001db40: 2020 2020 2020 2020 2069 6620 6e75 6d45           if numE
-0001db50: 7272 6f72 733a 0a20 2020 2020 2020 2020  rrors:.         
-0001db60: 2020 2020 2020 2020 2020 2020 2020 206d                 m
-0001db70: 6573 7361 6765 203d 2073 656c 662e 6964  essage = self.id
-0001db80: 202b 2027 2027 202b 2062 6f64 790a 2020   + ' ' + body.  
-0001db90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dba0: 2020 2020 2020 666f 7220 6920 696e 2072        for i in r
-0001dbb0: 616e 6765 2830 2c20 6c65 6e28 7265 7370  ange(0, len(resp
-0001dbc0: 6f6e 7365 5b27 6572 726f 7227 5d29 293a  onse['error'])):
-0001dbd0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001dbe0: 2020 2020 2020 2020 2020 2020 2065 7272               err
-0001dbf0: 6f72 203d 2072 6573 706f 6e73 655b 2765  or = response['e
-0001dc00: 7272 6f72 275d 5b69 5d0a 2020 2020 2020  rror'][i].      
-0001dc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc20: 2020 2020 2020 7365 6c66 2e74 6872 6f77        self.throw
-0001dc30: 5f65 7861 6374 6c79 5f6d 6174 6368 6564  _exactly_matched
-0001dc40: 5f65 7863 6570 7469 6f6e 2873 656c 662e  _exception(self.
-0001dc50: 6578 6365 7074 696f 6e73 2c20 6572 726f  exceptions, erro
-0001dc60: 722c 206d 6573 7361 6765 290a 2020 2020  r, message).    
-0001dc70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001dc80: 2020 2020 7261 6973 6520 4578 6368 616e      raise Exchan
-0001dc90: 6765 4572 726f 7228 6d65 7373 6167 6529  geError(message)
-0001dca0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0001dcb0: 4e6f 6e65 0a                             None.
+0001db10: 2020 2020 6966 206e 756d 4572 726f 7273      if numErrors
+0001db20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0001db30: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
+0001db40: 6520 3d20 7365 6c66 2e69 6420 2b20 2720  e = self.id + ' 
+0001db50: 2720 2b20 626f 6479 0a20 2020 2020 2020  ' + body.       
+0001db60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001db70: 2066 6f72 2069 2069 6e20 7261 6e67 6528   for i in range(
+0001db80: 302c 206c 656e 2872 6573 706f 6e73 655b  0, len(response[
+0001db90: 2765 7272 6f72 275d 2929 3a0a 2020 2020  'error'])):.    
+0001dba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbb0: 2020 2020 2020 2020 6572 726f 7220 3d20          error = 
+0001dbc0: 7265 7370 6f6e 7365 5b27 6572 726f 7227  response['error'
+0001dbd0: 5d5b 695d 0a20 2020 2020 2020 2020 2020  ][i].           
+0001dbe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001dbf0: 2073 656c 662e 7468 726f 775f 6578 6163   self.throw_exac
+0001dc00: 746c 795f 6d61 7463 6865 645f 6578 6365  tly_matched_exce
+0001dc10: 7074 696f 6e28 7365 6c66 2e65 7863 6570  ption(self.excep
+0001dc20: 7469 6f6e 732c 2065 7272 6f72 2c20 6d65  tions, error, me
+0001dc30: 7373 6167 6529 0a20 2020 2020 2020 2020  ssage).         
+0001dc40: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0001dc50: 6169 7365 2045 7863 6861 6e67 6545 7272  aise ExchangeErr
+0001dc60: 6f72 286d 6573 7361 6765 290a 2020 2020  or(message).    
+0001dc70: 2020 2020 7265 7475 726e 204e 6f6e 650a      return None.
```

### Comparing `ccxt-4.2.90/ccxt/krakenfutures.py` & `ccxt-4.2.91/ccxt/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/kucoin.py` & `ccxt-4.2.91/ccxt/kucoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/kucoinfutures.py` & `ccxt-4.2.91/ccxt/kucoinfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/kuna.py` & `ccxt-4.2.91/ccxt/kuna.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/latoken.py` & `ccxt-4.2.91/ccxt/latoken.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/lbank.py` & `ccxt-4.2.91/ccxt/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/luno.py` & `ccxt-4.2.91/ccxt/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/lykke.py` & `ccxt-4.2.91/ccxt/lykke.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/mercado.py` & `ccxt-4.2.91/ccxt/mercado.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/mexc.py` & `ccxt-4.2.91/ccxt/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/ndax.py` & `ccxt-4.2.91/ccxt/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/novadax.py` & `ccxt-4.2.91/ccxt/novadax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/oceanex.py` & `ccxt-4.2.91/ccxt/oceanex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/okcoin.py` & `ccxt-4.2.91/ccxt/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/okx.py` & `ccxt-4.2.91/ccxt/okx.py`

 * *Files 1% similar despite different names*

```diff
@@ -1231,15 +1231,15 @@
         #                 "state": "scheduled",  # ongoing, completed, canceled
         #                 "system": "classic",  # classic, unified
         #                 "title": "Classic Spot System Upgrade"
         #             },
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         dataLength = len(data)
         update = {
             'updated': None,
             'status': 'ok' if (dataLength == 0) else 'maintenance',
             'eta': None,
             'url': None,
             'info': response,
@@ -1272,16 +1272,16 @@
         #         "code": "0",
         #         "data": [
         #             {"ts": "1621247923668"}
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         return self.safe_integer(first, 'ts')
 
     def fetch_accounts(self, params={}) -> List[Account]:
         """
         fetch all the accounts associated with a profile
         :see: https://www.okx.com/docs-v5/en/#trading-account-rest-api-get-account-configuration
         :param dict [params]: extra parameters specific to the exchange API endpoint
@@ -1303,15 +1303,15 @@
         #                 "posMode": "long_short_mode",
         #                 "uid": "88018754289672195"
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         result = []
         for i in range(0, len(data)):
             account = data[i]
             accountId = self.safe_string(account, 'uid')
             type = self.safe_string(account, 'acctLv')
             result.append({
                 'id': accountId,
@@ -1325,15 +1325,15 @@
     def fetch_markets(self, params={}) -> List[Market]:
         """
         retrieves data on all markets for okx
         :see: https://www.okx.com/docs-v5/en/#rest-api-public-data-get-instruments
         :param dict [params]: extra parameters specific to the exchange API endpoint
         :returns dict[]: an array of objects representing market data
         """
-        types = self.safe_value(self.options, 'fetchMarkets')
+        types = self.safe_list(self.options, 'fetchMarkets', [])
         promises = []
         result = []
         for i in range(0, len(types)):
             promises.append(self.fetch_markets_by_type(types[i], params))
         promises = promises
         for i in range(0, len(promises)):
             result = self.array_concat(result, promises[i])
@@ -1422,15 +1422,15 @@
             elif option:
                 strikePrice = self.safe_string(market, 'stk')
                 optionType = self.safe_string(market, 'optType')
                 ymd = self.yymmdd(expiry)
                 symbol = symbol + '-' + ymd + '-' + strikePrice + '-' + optionType
                 optionType = 'put' if (optionType == 'P') else 'call'
         tickSize = self.safe_string(market, 'tickSz')
-        fees = self.safe_value_2(self.fees, type, 'trading', {})
+        fees = self.safe_dict_2(self.fees, type, 'trading', {})
         maxLeverage = self.safe_string(market, 'lever', '1')
         maxLeverage = Precise.string_max(maxLeverage, '1')
         maxSpotCost = self.safe_number(market, 'maxMktSz')
         return self.extend(fees, {
             'id': id,
             'symbol': symbol,
             'base': base,
@@ -1481,25 +1481,25 @@
         })
 
     def fetch_markets_by_type(self, type, params={}):
         request = {
             'instType': self.convert_to_instrument_type(type),
         }
         if type == 'option':
-            optionsUnderlying = self.safe_value(self.options, 'defaultUnderlying', ['BTC-USD', 'ETH-USD'])
+            optionsUnderlying = self.safe_list(self.options, 'defaultUnderlying', ['BTC-USD', 'ETH-USD'])
             promises = []
             for i in range(0, len(optionsUnderlying)):
                 underlying = optionsUnderlying[i]
                 request['uly'] = underlying
                 promises.append(self.publicGetPublicInstruments(self.extend(request, params)))
             promisesResult = promises
             markets = []
             for i in range(0, len(promisesResult)):
-                res = self.safe_value(promisesResult, i, {})
-                options = self.safe_value(res, 'data', [])
+                res = self.safe_dict(promisesResult, i, {})
+                options = self.safe_list(res, 'data', [])
                 markets = self.array_concat(markets, options)
             return self.parse_markets(markets)
         response = self.publicGetPublicInstruments(self.extend(request, params))
         #
         # spot, future, swap, option
         #
         #     {
@@ -1528,15 +1528,15 @@
         #                 "tickSz": "0.1",
         #                 "uly": ""
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        dataResponse = self.safe_value(response, 'data', [])
+        dataResponse = self.safe_list(response, 'data', [])
         return self.parse_markets(dataResponse)
 
     def safe_network(self, networkId):
         networksById = {
             'Bitcoin': 'BTC',
             'Omni': 'OMNI',
             'TRON': 'TRC20',
@@ -1602,15 +1602,15 @@
         #                "wdTickSz": "3"
         #            },
         #            ...
         #        ],
         #        "msg": ""
         #    }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         result = {}
         dataByCurrencyId = self.group_by(data, 'ccy')
         currencyIds = list(dataByCurrencyId.keys())
         for i in range(0, len(currencyIds)):
             currencyId = currencyIds[i]
             currency = self.safe_currency(currencyId)
             code = currency['code']
@@ -1618,19 +1618,19 @@
             networks = {}
             currencyActive = False
             depositEnabled = False
             withdrawEnabled = False
             maxPrecision = None
             for j in range(0, len(chains)):
                 chain = chains[j]
-                canDeposit = self.safe_value(chain, 'canDep')
+                canDeposit = self.safe_bool(chain, 'canDep')
                 depositEnabled = canDeposit if (canDeposit) else depositEnabled
-                canWithdraw = self.safe_value(chain, 'canWd')
+                canWithdraw = self.safe_bool(chain, 'canWd')
                 withdrawEnabled = canWithdraw if (canWithdraw) else withdrawEnabled
-                canInternal = self.safe_value(chain, 'canInternal')
+                canInternal = self.safe_bool(chain, 'canInternal')
                 active = True if (canDeposit and canWithdraw and canInternal) else False
                 currencyActive = active if (active) else currencyActive
                 networkId = self.safe_string(chain, 'chain')
                 if (networkId is not None) and (networkId.find('-') >= 0):
                     parts = networkId.split('-')
                     chainPart = self.safe_string(parts, 1, networkId)
                     networkCode = self.network_id_to_code(chainPart, currency['code'])
@@ -1651,15 +1651,15 @@
                             'withdraw': {
                                 'min': self.safe_number(chain, 'minWd'),
                                 'max': self.safe_number(chain, 'maxWd'),
                             },
                         },
                         'info': chain,
                     }
-            firstChain = self.safe_value(chains, 0)
+            firstChain = self.safe_dict(chains, 0, {})
             result[code] = {
                 'info': None,
                 'code': code,
                 'id': currencyId,
                 'name': self.safe_string(firstChain, 'name'),
                 'active': currencyActive,
                 'deposit': depositEnabled,
@@ -1720,16 +1720,16 @@
         #                     ["0.07219","0.505407","0","1"],
         #                 ],
         #                 "ts": "1621438475342"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         timestamp = self.safe_integer(first, 'ts')
         return self.parse_order_book(first, symbol, timestamp)
 
     def parse_ticker(self, ticker, market: Market = None) -> Ticker:
         #
         #     {
         #         "instType": "SPOT",
@@ -1820,15 +1820,15 @@
         #                 "ts": "1621440583784",
         #                 "sodUtc0": "0.07872",
         #                 "sodUtc8": "0.07345"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         first = self.safe_dict(data, 0, {})
         return self.parse_ticker(first, market)
 
     def fetch_tickers(self, symbols: Strings = None, params={}) -> Tickers:
         """
         fetches price tickers for multiple markets, statistical information calculated over the past 24 hours for each market
         :see: https://www.okx.com/docs-v5/en/#order-book-trading-market-data-get-tickers
@@ -1841,15 +1841,15 @@
         market = self.get_market_from_symbols(symbols)
         marketType = None
         marketType, params = self.handle_market_type_and_params('fetchTickers', market, params)
         request = {
             'instType': self.convert_to_instrument_type(marketType),
         }
         if marketType == 'option':
-            defaultUnderlying = self.safe_value(self.options, 'defaultUnderlying', 'BTC-USD')
+            defaultUnderlying = self.safe_string(self.options, 'defaultUnderlying', 'BTC-USD')
             currencyId = self.safe_string_2(params, 'uly', 'marketId', defaultUnderlying)
             if currencyId is None:
                 raise ArgumentsRequired(self.id + ' fetchTickers() requires an underlying uly or marketId parameter for options markets')
             else:
                 request['uly'] = currencyId
         response = self.publicGetMarketTickers(self.extend(request, params))
         #
@@ -2090,15 +2090,15 @@
         market = self.market(symbol)
         paginate = False
         paginate, params = self.handle_option_and_params(params, 'fetchOHLCV', 'paginate')
         if paginate:
             return self.fetch_paginated_call_deterministic('fetchOHLCV', symbol, since, limit, timeframe, params, 200)
         price = self.safe_string(params, 'price')
         params = self.omit(params, 'price')
-        options = self.safe_value(self.options, 'fetchOHLCV', {})
+        options = self.safe_dict(self.options, 'fetchOHLCV', {})
         timezone = self.safe_string(options, 'timezone', 'UTC')
         if limit is None:
             limit = 100  # default 100, max 100
         duration = self.parse_timeframe(timeframe)
         bar = self.safe_string(self.timeframes, timeframe, timeframe)
         if (timezone == 'UTC') and (duration >= 21600):  # if utc and timeframe >= 6h
             bar += timezone.lower()
@@ -2203,15 +2203,15 @@
         #                 "realizedRate":"0.017",
         #                 "fundingTime":"1597026383085"
         #             }
         #         ]
         #     }
         #
         rates = []
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         for i in range(0, len(data)):
             rate = data[i]
             timestamp = self.safe_integer(rate, 'fundingTime')
             rates.append({
                 'info': rate,
                 'symbol': self.safe_symbol(self.safe_string(rate, 'instId')),
                 'fundingRate': self.safe_number(rate, 'realizedRate'),
@@ -2225,18 +2225,18 @@
         if type == 'funding':
             return self.parse_funding_balance(response)
         else:
             return self.parse_trading_balance(response)
 
     def parse_trading_balance(self, response):
         result = {'info': response}
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         timestamp = self.safe_integer(first, 'uTime')
-        details = self.safe_value(first, 'details', [])
+        details = self.safe_list(first, 'details', [])
         for i in range(0, len(details)):
             balance = details[i]
             currencyId = self.safe_string(balance, 'ccy')
             code = self.safe_currency_code(currencyId)
             account = self.account()
             # it may be incorrect to use total, free and used for swap accounts
             eq = self.safe_string(balance, 'eq')
@@ -2250,15 +2250,15 @@
             result[code] = account
         result['timestamp'] = timestamp
         result['datetime'] = self.iso8601(timestamp)
         return self.safe_balance(result)
 
     def parse_funding_balance(self, response):
         result = {'info': response}
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         for i in range(0, len(data)):
             balance = data[i]
             currencyId = self.safe_string(balance, 'ccy')
             code = self.safe_currency_code(currencyId)
             account = self.account()
             # it may be incorrect to use total, free and used for swap accounts
             account['total'] = self.safe_string(balance, 'bal')
@@ -2328,16 +2328,16 @@
         #                 "taker": "-0.001",
         #                 "ts": "1639043138472"
         #             }
         #         ],
         #         "msg": ""
         #     }
         #
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0, {})
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         return self.parse_trading_fee(first, market)
 
     def fetch_balance(self, params={}) -> Balances:
         """
         query for balance and get the amount of funds available for trading or funds locked in orders
         :see: https://www.okx.com/docs-v5/en/#funding-account-rest-api-get-balance
         :see: https://www.okx.com/docs-v5/en/#trading-account-rest-api-get-balance
@@ -2743,16 +2743,16 @@
         response = None
         if method == 'privatePostTradeOrder':
             response = self.privatePostTradeOrder(request)
         elif method == 'privatePostTradeOrderAlgo':
             response = self.privatePostTradeOrderAlgo(request)
         else:
             response = self.privatePostTradeBatchOrders(request)
-        data = self.safe_value(response, 'data', [])
-        first = self.safe_value(data, 0)
+        data = self.safe_list(response, 'data', [])
+        first = self.safe_dict(data, 0, {})
         order = self.parse_order(first, market)
         order['type'] = type
         order['side'] = side
         return order
 
     def create_orders(self, orders: List[OrderRequest], params={}):
         """
@@ -4123,15 +4123,15 @@
         #                 "bal": "12",
         #                 "type": "1",
         #                 "ts": "1597026383085"
         #             }
         #         ]
         #     }
         #
-        data = self.safe_value(response, 'data', [])
+        data = self.safe_list(response, 'data', [])
         return self.parse_ledger(data, currency, since, limit)
 
     def parse_ledger_entry_type(self, type):
         types = {
             '1': 'transfer',  # transfer
             '2': 'trade',  # trade
             '3': 'trade',  # delivery
```

### Comparing `ccxt-4.2.90/ccxt/onetrading.py` & `ccxt-4.2.91/ccxt/onetrading.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/p2b.py` & `ccxt-4.2.91/ccxt/p2b.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/paymium.py` & `ccxt-4.2.91/ccxt/paymium.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/phemex.py` & `ccxt-4.2.91/ccxt/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/poloniex.py` & `ccxt-4.2.91/ccxt/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/poloniexfutures.py` & `ccxt-4.2.91/ccxt/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/__init__.py` & `ccxt-4.2.91/ccxt/pro/__init__.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 # -*- coding: utf-8 -*-
 
 """CCXT: CryptoCurrency eXchange Trading Library (Async)"""
 
 # ----------------------------------------------------------------------------
 
-__version__ = '4.2.90'
+__version__ = '4.2.91'
 
 # ----------------------------------------------------------------------------
 
 from ccxt.async_support.base.exchange import Exchange  # noqa: F401
 
 # CCXT Pro exchanges (now this is mainly used for importing exchanges in WS tests)
```

### Comparing `ccxt-4.2.90/ccxt/pro/alpaca.py` & `ccxt-4.2.91/ccxt/pro/alpaca.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/ascendex.py` & `ccxt-4.2.91/ccxt/pro/ascendex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bequant.py` & `ccxt-4.2.91/ccxt/pro/bequant.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/binance.py` & `ccxt-4.2.91/ccxt/pro/binance.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/binancecoinm.py` & `ccxt-4.2.91/ccxt/pro/binancecoinm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/binanceus.py` & `ccxt-4.2.91/ccxt/pro/binanceus.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/binanceusdm.py` & `ccxt-4.2.91/ccxt/pro/binanceusdm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bingx.py` & `ccxt-4.2.91/ccxt/pro/bingx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitcoincom.py` & `ccxt-4.2.91/ccxt/pro/bitcoincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitfinex.py` & `ccxt-4.2.91/ccxt/pro/bitfinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitfinex2.py` & `ccxt-4.2.91/ccxt/pro/bitfinex2.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitget.py` & `ccxt-4.2.91/ccxt/pro/bitget.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bithumb.py` & `ccxt-4.2.91/ccxt/pro/bithumb.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitmart.py` & `ccxt-4.2.91/ccxt/pro/bitmart.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitmex.py` & `ccxt-4.2.91/ccxt/pro/bitmex.py`

 * *Files 1% similar despite different names*

```diff
@@ -536,16 +536,16 @@
         table = 'trade'
         data = self.safe_value(message, 'data', [])
         dataByMarketIds = self.group_by(data, 'symbol')
         marketIds = list(dataByMarketIds.keys())
         for i in range(0, len(marketIds)):
             marketId = marketIds[i]
             market = self.safe_market(marketId)
-            messageHash = table + ':' + marketId
             symbol = market['symbol']
+            messageHash = table + ':' + symbol
             trades = self.parse_trades(dataByMarketIds[marketId], market)
             stored = self.safe_value(self.trades, symbol)
             if stored is None:
                 limit = self.safe_integer(self.options, 'tradesLimit', 1000)
                 stored = ArrayCache(limit)
                 self.trades[symbol] = stored
             for j in range(0, len(trades)):
@@ -557,30 +557,15 @@
         get the list of most recent trades for a particular symbol
         :param str symbol: unified symbol of the market to fetch trades for
         :param int [since]: timestamp in ms of the earliest trade to fetch
         :param int [limit]: the maximum amount of trades to fetch
         :param dict [params]: extra parameters specific to the exchange API endpoint
         :returns dict[]: a list of `trade structures <https://docs.ccxt.com/#/?id=public-trades>`
         """
-        await self.load_markets()
-        market = self.market(symbol)
-        symbol = market['symbol']
-        table = 'trade'
-        messageHash = table + ':' + market['id']
-        url = self.urls['api']['ws']
-        request = {
-            'op': 'subscribe',
-            'args': [
-                messageHash,
-            ],
-        }
-        trades = await self.watch(url, messageHash, self.extend(request, params), messageHash)
-        if self.newUpdates:
-            limit = trades.getLimit(symbol, limit)
-        return self.filter_by_since_limit(trades, since, limit, 'timestamp', True)
+        return await self.watch_trades_for_symbols([symbol], since, limit, params)
 
     async def authenticate(self, params={}):
         url = self.urls['api']['ws']
         client = self.client(url)
         messageHash = 'authenticated'
         future = client.future(messageHash)
         authenticated = self.safe_value(client.subscriptions, messageHash)
@@ -1167,14 +1152,47 @@
         request = {
             'op': 'subscribe',
             'args': topics,
         }
         orderbook = await self.watch_multiple(url, messageHashes, self.deep_extend(request, params), topics)
         return orderbook.limit()
 
+    async def watch_trades_for_symbols(self, symbols: List[str], since: Int = None, limit: Int = None, params={}) -> List[Trade]:
+        """
+        get the list of most recent trades for a list of symbols
+        :param str[] symbols: unified symbol of the market to fetch trades for
+        :param int [since]: timestamp in ms of the earliest trade to fetch
+        :param int [limit]: the maximum amount of trades to fetch
+        :param dict [params]: extra parameters specific to the exchange API endpoint
+        :returns dict[]: a list of `trade structures <https://docs.ccxt.com/#/?id=public-trades>`
+        """
+        await self.load_markets()
+        symbols = self.market_symbols(symbols, None, False)
+        table = 'trade'
+        topics = []
+        messageHashes = []
+        for i in range(0, len(symbols)):
+            symbol = symbols[i]
+            market = self.market(symbol)
+            topic = table + ':' + market['id']
+            topics.append(topic)
+            messageHash = table + ':' + symbol
+            messageHashes.append(messageHash)
+        url = self.urls['api']['ws']
+        request = {
+            'op': 'subscribe',
+            'args': topics,
+        }
+        trades = await self.watch_multiple(url, messageHashes, self.deep_extend(request, params), topics)
+        if self.newUpdates:
+            first = self.safe_value(trades, 0)
+            tradeSymbol = self.safe_string(first, 'symbol')
+            limit = trades.getLimit(tradeSymbol, limit)
+        return self.filter_by_since_limit(trades, since, limit, 'timestamp', True)
+
     async def watch_ohlcv(self, symbol: str, timeframe='1m', since: Int = None, limit: Int = None, params={}) -> List[list]:
         """
         watches historical candlestick data containing the open, high, low, and close price, and the volume of a market
         :param str symbol: unified symbol of the market to fetch OHLCV data for
         :param str timeframe: the length of time each candle represents
         :param int [since]: timestamp in ms of the earliest candle to fetch
         :param int [limit]: the maximum amount of candles to fetch
```

### Comparing `ccxt-4.2.90/ccxt/pro/bitopro.py` & `ccxt-4.2.91/ccxt/pro/bitopro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitrue.py` & `ccxt-4.2.91/ccxt/pro/bitrue.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitstamp.py` & `ccxt-4.2.91/ccxt/pro/bitstamp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bitvavo.py` & `ccxt-4.2.91/ccxt/pro/bitvavo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/blockchaincom.py` & `ccxt-4.2.91/ccxt/pro/blockchaincom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/bybit.py` & `ccxt-4.2.91/ccxt/pro/bybit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/cex.py` & `ccxt-4.2.91/ccxt/pro/cex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coinbase.py` & `ccxt-4.2.91/ccxt/pro/coinbase.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coinbaseinternational.py` & `ccxt-4.2.91/ccxt/pro/coinbaseinternational.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coinbasepro.py` & `ccxt-4.2.91/ccxt/pro/coinbasepro.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coincheck.py` & `ccxt-4.2.91/ccxt/pro/coincheck.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coinex.py` & `ccxt-4.2.91/ccxt/pro/coinex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/coinone.py` & `ccxt-4.2.91/ccxt/pro/coinone.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/cryptocom.py` & `ccxt-4.2.91/ccxt/pro/cryptocom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/currencycom.py` & `ccxt-4.2.91/ccxt/pro/currencycom.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/deribit.py` & `ccxt-4.2.91/ccxt/pro/deribit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/exmo.py` & `ccxt-4.2.91/ccxt/pro/exmo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/gate.py` & `ccxt-4.2.91/ccxt/pro/gate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/gemini.py` & `ccxt-4.2.91/ccxt/pro/gemini.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/hitbtc.py` & `ccxt-4.2.91/ccxt/pro/hitbtc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/hollaex.py` & `ccxt-4.2.91/ccxt/pro/hollaex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/htx.py` & `ccxt-4.2.91/ccxt/pro/htx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/huobijp.py` & `ccxt-4.2.91/ccxt/pro/huobijp.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/hyperliquid.py` & `ccxt-4.2.91/ccxt/pro/hyperliquid.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/idex.py` & `ccxt-4.2.91/ccxt/pro/idex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/independentreserve.py` & `ccxt-4.2.91/ccxt/pro/independentreserve.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/kraken.py` & `ccxt-4.2.91/ccxt/pro/kraken.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/krakenfutures.py` & `ccxt-4.2.91/ccxt/pro/krakenfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/kucoin.py` & `ccxt-4.2.91/ccxt/pro/kucoin.py`

 * *Files 5% similar despite different names*

```diff
@@ -21,14 +21,15 @@
                 'createOrderWs': False,
                 'editOrderWs': False,
                 'fetchOpenOrdersWs': False,
                 'fetchOrderWs': False,
                 'cancelOrderWs': False,
                 'cancelOrdersWs': False,
                 'cancelAllOrdersWs': False,
+                'watchBidsAsks': True,
                 'watchOrderBook': True,
                 'watchOrders': True,
                 'watchMyTrades': True,
                 'watchTickers': True,
                 'watchTicker': True,
                 'watchTrades': True,
                 'watchTradesForSymbols': True,
@@ -269,14 +270,95 @@
             symbols = symbolsString.split(',')
             tickers = self.filter_by_array(self.tickers, 'symbol', symbols)
             tickersSymbols = list(tickers.keys())
             numTickers = len(tickersSymbols)
             if numTickers > 0:
                 client.resolve(tickers, currentMessageHash)
 
+    async def watch_bids_asks(self, symbols: Strings = None, params={}) -> Tickers:
+        """
+        :see: https://www.kucoin.com/docs/websocket/spot-trading/public-channels/level1-bbo-market-data
+        watches best bid & ask for symbols
+        :param str[] symbols: unified symbol of the market to fetch the ticker for
+        :param dict [params]: extra parameters specific to the exchange API endpoint
+        :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
+        """
+        ticker = await self.watch_multi_helper('watchBidsAsks', '/spotMarket/level1:', symbols, params)
+        if self.newUpdates:
+            tickers = {}
+            tickers[ticker['symbol']] = ticker
+            return tickers
+        return self.filter_by_array(self.bidsasks, 'symbol', symbols)
+
+    async def watch_multi_helper(self, methodName, channelName: str, symbols: Strings = None, params={}):
+        await self.load_markets()
+        symbols = self.market_symbols(symbols, None, False, True, False)
+        length = len(symbols)
+        if length > 100:
+            raise ArgumentsRequired(self.id + ' ' + methodName + '() accepts a maximum of 100 symbols')
+        messageHashes = []
+        for i in range(0, len(symbols)):
+            symbol = symbols[i]
+            market = self.market(symbol)
+            messageHashes.append('bidask@' + market['symbol'])
+        url = await self.negotiate(False)
+        marketIds = self.market_ids(symbols)
+        joined = ','.join(marketIds)
+        requestId = str(self.request_id())
+        request = {
+            'id': requestId,
+            'type': 'subscribe',
+            'topic': channelName + joined,
+            'response': True,
+        }
+        message = self.extend(request, params)
+        return await self.watch_multiple(url, messageHashes, message, messageHashes)
+
+    def handle_bid_ask(self, client: Client, message):
+        #
+        # arrives one symbol dict
+        #
+        #     {
+        #         topic: '/spotMarket/level1:ETH-USDT',
+        #         type: 'message',
+        #         data: {
+        #             asks: ['3347.42', '2.0778387'],
+        #             bids: ['3347.41', '6.0411697'],
+        #             timestamp: 1712231142085
+        #         },
+        #         subject: 'level1'
+        #     }
+        #
+        parsedTicker = self.parse_ws_bid_ask(message)
+        symbol = parsedTicker['symbol']
+        self.bidsasks[symbol] = parsedTicker
+        messageHash = 'bidask@' + symbol
+        client.resolve(parsedTicker, messageHash)
+
+    def parse_ws_bid_ask(self, ticker, market=None):
+        topic = self.safe_string(ticker, 'topic')
+        parts = topic.split(':')
+        marketId = parts[1]
+        market = self.safe_market(marketId, market)
+        symbol = self.safe_string(market, 'symbol')
+        data = self.safe_dict(ticker, 'data', {})
+        ask = self.safe_list(data, 'asks', [])
+        bid = self.safe_list(data, 'bids', [])
+        timestamp = self.safe_integer(data, 'timestamp')
+        return self.safe_ticker({
+            'symbol': symbol,
+            'timestamp': timestamp,
+            'datetime': self.iso8601(timestamp),
+            'ask': self.safe_number(ask, 0),
+            'askVolume': self.safe_number(ask, 1),
+            'bid': self.safe_number(bid, 0),
+            'bidVolume': self.safe_number(bid, 1),
+            'info': ticker,
+        }, market)
+
     async def watch_ohlcv(self, symbol: str, timeframe='1m', since: Int = None, limit: Int = None, params={}) -> List[list]:
         """
         watches historical candlestick data containing the open, high, low, and close price, and the volume of a market
         :param str symbol: unified symbol of the market to fetch OHLCV data for
         :param str timeframe: the length of time each candle represents
         :param int [since]: timestamp in ms of the earliest candle to fetch
         :param int [limit]: the maximum amount of candles to fetch
@@ -621,14 +703,16 @@
         #
         #     {
         #         "id": "1578090438322",
         #         "type": "ack"
         #     }
         #
         id = self.safe_string(message, 'id')
+        if not (id in client.subscriptions):
+            return
         subscriptionHash = self.safe_string(client.subscriptions, id)
         subscription = self.safe_value(client.subscriptions, subscriptionHash)
         del client.subscriptions[id]
         method = self.safe_value(subscription, 'method')
         if method is not None:
             method(client, message, subscription)
 
@@ -974,14 +1058,15 @@
         #
         topic = self.safe_string(message, 'topic')
         if topic == '/market/ticker:all':
             self.handle_ticker(client, message)
             return
         subject = self.safe_string(message, 'subject')
         methods = {
+            'level1': self.handle_bid_ask,
             'level2': self.handle_order_book,
             'trade.l2update': self.handle_order_book,
             'trade.ticker': self.handle_ticker,
             'trade.snapshot': self.handle_ticker,
             'trade.l3match': self.handle_trade,
             'trade.candles.update': self.handle_ohlcv,
             'account.balance': self.handle_balance,
```

### Comparing `ccxt-4.2.90/ccxt/pro/kucoinfutures.py` & `ccxt-4.2.91/ccxt/pro/kucoinfutures.py`

 * *Files 3% similar despite different names*

```diff
@@ -1,28 +1,30 @@
 # -*- coding: utf-8 -*-
 
 # PLEASE DO NOT EDIT THIS FILE, IT IS GENERATED AND WILL BE OVERWRITTEN:
 # https://github.com/ccxt/ccxt/blob/master/CONTRIBUTING.md#how-to-contribute-code
 
 import ccxt.async_support
 from ccxt.async_support.base.ws.cache import ArrayCache, ArrayCacheBySymbolById
-from ccxt.base.types import Balances, Int, Order, OrderBook, Position, Str, Ticker, Trade
+from ccxt.base.types import Balances, Int, Order, OrderBook, Position, Str, Strings, Ticker, Tickers, Trade
 from ccxt.async_support.base.ws.client import Client
 from typing import List
 from ccxt.base.errors import ExchangeError
 from ccxt.base.errors import ArgumentsRequired
 
 
 class kucoinfutures(ccxt.async_support.kucoinfutures):
 
     def describe(self):
         return self.deep_extend(super(kucoinfutures, self).describe(), {
             'has': {
                 'ws': True,
                 'watchTicker': True,
+                'watchTickers': True,
+                'watchBidsAsks': True,
                 'watchTrades': True,
                 'watchOrderBook': True,
                 'watchOrders': True,
                 'watchBalance': True,
                 'watchPosition': True,
                 'watchPositions': False,
                 'watchPositionForSymbols': False,
@@ -44,17 +46,14 @@
                     # 'pool': ,
                 },
                 'tradesLimit': 1000,
                 'watchOrderBook': {
                     'snapshotDelay': 20,
                     'snapshotMaxRetries': 3,
                 },
-                'watchTicker': {
-                    'name': 'contractMarket/tickerV2',  # market/ticker
-                },
                 'watchPosition': {
                     'fetchPositionSnapshot': True,  # or False
                     'awaitPositionSnapshot': True,  # whether to wait for the position snapshot before providing updates
                 },
             },
             'streaming': {
                 # kucoin does not support built-in ws protocol-level ping-pong
@@ -142,77 +141,165 @@
         }
         if subscription is None:
             subscription = subscriptionRequest
         else:
             subscription = self.extend(subscriptionRequest, subscription)
         return await self.watch(url, messageHash, message, subscriptionHash, subscription)
 
-    async def subscribe_multiple(self, url, messageHashes, topic, subscriptionHashes, subscription, params={}):
+    async def subscribe_multiple(self, url, messageHashes, topic, subscriptionHashes, subscriptionArgs, params={}):
         requestId = str(self.request_id())
         request = {
             'id': requestId,
             'type': 'subscribe',
             'topic': topic,
             'response': True,
         }
-        message = self.extend(request, params)
-        subscriptionRequest = {
-            'id': requestId,
-        }
-        if subscription is None:
-            subscription = subscriptionRequest
-        else:
-            subscription = self.extend(subscriptionRequest, subscription)
-        return await self.watch_multiple(url, messageHashes, message, subscriptionHashes, subscription)
+        return await self.watch_multiple(url, messageHashes, self.extend(request, params), subscriptionHashes, subscriptionArgs)
 
     async def watch_ticker(self, symbol: str, params={}) -> Ticker:
         """
         watches a price ticker, a statistical calculation with the information calculated over the past 24 hours for a specific market
-        :see: https://docs.kucoin.com/futures/#get-real-time-symbol-ticker-v2
+        :see: https://www.kucoin.com/docs/websocket/futures-trading/public-channels/get-ticker
         :param str symbol: unified symbol of the market to fetch the ticker for
         :param dict [params]: extra parameters specific to the exchange API endpoint
         :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
         """
         await self.load_markets()
         market = self.market(symbol)
         symbol = market['symbol']
-        url = await self.negotiate(False)
-        options = self.safe_value(self.options, 'watchTicker', {})
-        channel = self.safe_string(options, 'name', 'contractMarket/tickerV2')
-        topic = '/' + channel + ':' + market['id']
-        messageHash = 'ticker:' + symbol
-        return await self.subscribe(url, messageHash, topic, None, params)
+        params['callerMethodName'] = 'watchTicker'
+        tickers = await self.watch_tickers([symbol], params)
+        return tickers[symbol]
+
+    async def watch_tickers(self, symbols: Strings = None, params={}) -> Tickers:
+        """
+        watches a price ticker, a statistical calculation with the information calculated over the past 24 hours for all markets of a specific list
+        :param str[] symbols: unified symbol of the market to fetch the ticker for
+        :param dict [params]: extra parameters specific to the exchange API endpoint
+        :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
+        """
+        await self.load_markets()
+        ticker = await self.watch_multi_request('watchTickers', '/contractMarket/ticker:', symbols, params)
+        if self.newUpdates:
+            tickers = {}
+            tickers[ticker['symbol']] = ticker
+            return tickers
+        return self.filter_by_array(self.tickers, 'symbol', symbols)
 
     def handle_ticker(self, client: Client, message):
         #
-        # market/tickerV2
+        # ticker(v1)
         #
         #    {
-        #        "type": "message",
-        #        "topic": "/contractMarket/tickerV2:ADAUSDTM",
-        #        "subject": "tickerV2",
-        #        "data": {
-        #            "symbol": "ADAUSDTM",
-        #            "sequence": 1668007800439,
-        #            "bestBidSize": 178,
-        #            "bestBidPrice": "0.35959",
-        #            "bestAskPrice": "0.35981",
-        #            "ts": "1668141430037124460",
-        #            "bestAskSize": 134
-        #        }
+        #     "subject": "ticker",
+        #     "topic": "/contractMarket/ticker:XBTUSDM",
+        #     "data": {
+        #         "symbol": "XBTUSDM",  #Market of the symbol
+        #         "sequence": 45,  #Sequence number which is used to judge the continuity of the pushed messages
+        #         "side": "sell",  #Transaction side of the last traded taker order
+        #         "price": "3600.0",  #Filled price
+        #         "size": 16,  #Filled quantity
+        #         "tradeId": "5c9dcf4170744d6f5a3d32fb",  #Order ID
+        #         "bestBidSize": 795,  #Best bid size
+        #         "bestBidPrice": "3200.0",  #Best bid
+        #         "bestAskPrice": "3600.0",  #Best ask size
+        #         "bestAskSize": 284,  #Best ask
+        #         "ts": 1553846081210004941  #Filled time - nanosecond
+        #     }
         #    }
         #
         data = self.safe_value(message, 'data', {})
         marketId = self.safe_value(data, 'symbol')
         market = self.safe_market(marketId, None, '-')
         ticker = self.parse_ticker(data, market)
         self.tickers[market['symbol']] = ticker
-        messageHash = 'ticker:' + market['symbol']
-        client.resolve(ticker, messageHash)
-        return message
+        client.resolve(ticker, self.get_message_hash('ticker', market['symbol']))
+
+    async def watch_bids_asks(self, symbols: Strings = None, params={}) -> Tickers:
+        """
+        :see: https://www.kucoin.com/docs/websocket/futures-trading/public-channels/get-ticker-v2
+        watches best bid & ask for symbols
+        :param str[] symbols: unified symbol of the market to fetch the ticker for
+        :param dict [params]: extra parameters specific to the exchange API endpoint
+        :returns dict: a `ticker structure <https://docs.ccxt.com/#/?id=ticker-structure>`
+        """
+        ticker = await self.watch_multi_request('watchBidsAsks', '/contractMarket/tickerV2:', symbols, params)
+        if self.newUpdates:
+            tickers = {}
+            tickers[ticker['symbol']] = ticker
+            return tickers
+        return self.filter_by_array(self.bidsasks, 'symbol', symbols)
+
+    async def watch_multi_request(self, methodName, channelName: str, symbols: Strings = None, params={}):
+        await self.load_markets()
+        methodName, params = self.handle_param_string(params, 'callerMethodName', methodName)
+        isBidsAsks = (methodName == 'watchBidsAsks')
+        symbols = self.market_symbols(symbols, None, False, True, False)
+        length = len(symbols)
+        if length > 100:
+            raise ArgumentsRequired(self.id + ' ' + methodName + '() accepts a maximum of 100 symbols')
+        messageHashes = []
+        for i in range(0, len(symbols)):
+            symbol = symbols[i]
+            market = self.market(symbol)
+            prefix = 'bidask' if isBidsAsks else 'ticker'
+            messageHashes.append(self.get_message_hash(prefix, market['symbol']))
+        url = await self.negotiate(False)
+        marketIds = self.market_ids(symbols)
+        joined = ','.join(marketIds)
+        requestId = str(self.request_id())
+        request = {
+            'id': requestId,
+            'type': 'subscribe',
+            'topic': channelName + joined,
+            'response': True,
+        }
+        subscription = {
+            'id': requestId,
+        }
+        return await self.watch_multiple(url, messageHashes, self.extend(request, params), messageHashes, subscription)
+
+    def handle_bid_ask(self, client: Client, message):
+        #
+        # arrives one symbol dict
+        #
+        # {
+        #   "subject": "tickerV2",
+        #   "topic": "/contractMarket/tickerV2:XBTUSDM",
+        #   "data": {
+        #     "symbol": "XBTUSDM",  #Market of the symbol
+        #     "bestBidSize": 795,  # Best bid size
+        #     "bestBidPrice": 3200.0,  # Best bid
+        #     "bestAskPrice": 3600.0,  # Best ask
+        #     "bestAskSize": 284,  # Best ask size
+        #     "ts": 1553846081210004941  # Filled time - nanosecond
+        #   }
+        # }
+        #
+        parsedTicker = self.parse_ws_bid_ask(message)
+        symbol = parsedTicker['symbol']
+        self.bidsasks[symbol] = parsedTicker
+        client.resolve(parsedTicker, self.get_message_hash('bidask', symbol))
+
+    def parse_ws_bid_ask(self, ticker, market=None):
+        data = self.safe_dict(ticker, 'data', {})
+        marketId = self.safe_string(data, 'symbol')
+        market = self.safe_market(marketId, market)
+        symbol = self.safe_string(market, 'symbol')
+        timestamp = self.safe_integer_product(data, 'ts', 0.000001)
+        return self.safe_ticker({
+            'symbol': symbol,
+            'timestamp': timestamp,
+            'datetime': self.iso8601(timestamp),
+            'ask': self.safe_number(data, 'bestAskPrice'),
+            'askVolume': self.safe_number(data, 'bestAskSize'),
+            'bid': self.safe_number(data, 'bestBidPrice'),
+            'bidVolume': self.safe_number(data, 'bestBidSize'),
+            'info': ticker,
+        }, market)
 
     async def watch_position(self, symbol: Str = None, params={}) -> Position:
         """
         watch open positions for a specific symbol
         :see: https://docs.kucoin.com/futures/#position-change-events
         :param str|None symbol: unified market symbol
         :param dict params: extra parameters specific to the exchange API endpoint
@@ -408,15 +495,15 @@
         subscriptionHashes = []
         messageHashes = []
         for i in range(0, len(symbols)):
             symbol = symbols[i]
             marketId = marketIds[i]
             messageHashes.append('trades:' + symbol)
             subscriptionHashes.append('/contractMarket/execution:' + marketId)
-        trades = await self.subscribe_multiple(url, messageHashes, topic, subscriptionHashes, params)
+        trades = await self.subscribe_multiple(url, messageHashes, topic, subscriptionHashes, None, params)
         if self.newUpdates:
             first = self.safe_value(trades, 0)
             tradeSymbol = self.safe_string(first, 'symbol')
             limit = trades.getLimit(tradeSymbol, limit)
         return self.filter_by_since_limit(trades, since, limit, 'timestamp', True)
 
     def handle_trade(self, client: Client, message):
@@ -485,27 +572,25 @@
             if (limit != 20) and (limit != 100):
                 raise ExchangeError(self.id + " watchOrderBook 'limit' argument must be None, 20 or 100")
         await self.load_markets()
         symbols = self.market_symbols(symbols)
         marketIds = self.market_ids(symbols)
         url = await self.negotiate(False)
         topic = '/contractMarket/level2:' + ','.join(marketIds)
-        subscription = {
-            'method': self.handle_order_book_subscription,
-            'symbols': symbols,
+        subscriptionArgs = {
             'limit': limit,
         }
         subscriptionHashes = []
         messageHashes = []
         for i in range(0, len(symbols)):
             symbol = symbols[i]
             marketId = marketIds[i]
             messageHashes.append('orderbook:' + symbol)
             subscriptionHashes.append('/contractMarket/level2:' + marketId)
-        orderbook = await self.subscribe_multiple(url, messageHashes, topic, subscriptionHashes, subscription, params)
+        orderbook = await self.subscribe_multiple(url, messageHashes, topic, subscriptionHashes, subscriptionArgs, params)
         return orderbook.limit()
 
     def handle_delta(self, orderbook, delta):
         orderbook['nonce'] = self.safe_integer(delta, 'sequence')
         timestamp = self.safe_integer(delta, 'timestamp')
         orderbook['timestamp'] = timestamp
         orderbook['datetime'] = self.iso8601(timestamp)
@@ -545,18 +630,20 @@
         #
         data = self.safe_value(message, 'data')
         topic = self.safe_string(message, 'topic')
         topicParts = topic.split(':')
         marketId = self.safe_string(topicParts, 1)
         symbol = self.safe_symbol(marketId, None, '-')
         messageHash = 'orderbook:' + symbol
-        storedOrderBook = self.safe_value(self.orderbooks, symbol)
+        if not (symbol in self.orderbooks):
+            subscriptionArgs = self.safe_dict(client.subscriptions, topic, {})
+            limit = self.safe_integer(subscriptionArgs, 'limit')
+            self.orderbooks[symbol] = self.order_book({}, limit)
+        storedOrderBook = self.orderbooks[symbol]
         nonce = self.safe_integer(storedOrderBook, 'nonce')
-        if storedOrderBook is None:
-            return  # self shouldn't be needed, but for some reason sometimes self runs before handleOrderBookSubscription in c#
         deltaEnd = self.safe_integer(data, 'sequence')
         if nonce is None:
             cacheLength = len(storedOrderBook.cache)
             topicPartsNew = topic.split(':')
             topicSymbol = self.safe_string(topicPartsNew, 1)
             topicChannel = self.safe_string(topicPartsNew, 0)
             subscriptions = list(client.subscriptions.keys())
@@ -586,43 +673,14 @@
         for i in range(0, len(cache)):
             delta = cache[i]
             deltaStart = self.safe_integer(delta, 'sequence')
             if nonce < deltaStart - 1:
                 return i
         return len(cache)
 
-    def handle_order_book_subscription(self, client: Client, message, subscription):
-        limit = self.safe_integer(subscription, 'limit')
-        symbols = self.safe_value(subscription, 'symbols')
-        if symbols is None:
-            symbol = self.safe_string(subscription, 'symbol')
-            self.orderbooks[symbol] = self.order_book({}, limit)
-        else:
-            for i in range(0, len(symbols)):
-                symbol = symbols[i]
-                self.orderbooks[symbol] = self.order_book({}, limit)
-        # moved snapshot initialization to handleOrderBook to fix
-        # https://github.com/ccxt/ccxt/issues/6820
-        # the general idea is to fetch the snapshot after the first delta
-        # but not before, because otherwise we cannot synchronize the feed
-
-    def handle_subscription_status(self, client: Client, message):
-        #
-        #     {
-        #         "id": "1578090438322",
-        #         "type": "ack"
-        #     }
-        #
-        id = self.safe_string(message, 'id')
-        subscriptionsById = self.index_by(client.subscriptions, 'id')
-        subscription = self.safe_value(subscriptionsById, id, {})
-        method = self.safe_value(subscription, 'method')
-        if method is not None:
-            method(client, message, subscription)
-
     def handle_system_status(self, client: Client, message):
         #
         # todo: answer the question whether handleSystemStatus should be renamed
         # and unified for any usage pattern that
         # involves system status and maintenance updates
         #
         #     {
@@ -860,27 +918,35 @@
         #            "timestamp": 1668573023223
         #        }
         #    }
         #
         subject = self.safe_string(message, 'subject')
         methods = {
             'level2': self.handle_order_book,
-            'tickerV2': self.handle_ticker,
+            'ticker': self.handle_ticker,
+            'tickerV2': self.handle_bid_ask,
             'availableBalance.change': self.handle_balance,
             'match': self.handle_trade,
             'orderChange': self.handle_order,
             'orderUpdated': self.handle_order,
             'position.change': self.handle_position,
             'position.settlement': self.handle_position,
             'position.adjustRiskLimit': self.handle_position,
         }
         method = self.safe_value(methods, subject)
         if method is not None:
             method(client, message)
 
+    def get_message_hash(self, elementName: str, symbol: Str = None):
+        # elementName can be 'ticker', 'bidask', ...
+        if symbol is not None:
+            return elementName + '@' + symbol
+        else:
+            return elementName + 's@all'
+
     def ping(self, client):
         # kucoin does not support built-in ws protocol-level ping-pong
         # instead it requires a custom json-based text ping-pong
         # https://docs.kucoin.com/#ping
         id = str(self.request_id())
         return {
             'id': id,
@@ -910,15 +976,14 @@
         self.handle_errors(None, None, client.url, None, None, data, message, None, None)
 
     def handle_message(self, client: Client, message):
         type = self.safe_string(message, 'type')
         methods = {
             # 'heartbeat': self.handleHeartbeat,
             'welcome': self.handle_system_status,
-            'ack': self.handle_subscription_status,
             'message': self.handle_subject,
             'pong': self.handle_pong,
             'error': self.handle_error_message,
         }
         method = self.safe_value(methods, type)
         if method is not None:
             method(client, message)
```

### Comparing `ccxt-4.2.90/ccxt/pro/lbank.py` & `ccxt-4.2.91/ccxt/pro/lbank.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/luno.py` & `ccxt-4.2.91/ccxt/pro/luno.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/mexc.py` & `ccxt-4.2.91/ccxt/pro/mexc.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/ndax.py` & `ccxt-4.2.91/ccxt/pro/ndax.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/okcoin.py` & `ccxt-4.2.91/ccxt/pro/okcoin.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/okx.py` & `ccxt-4.2.91/ccxt/pro/okx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/onetrading.py` & `ccxt-4.2.91/ccxt/pro/onetrading.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/p2b.py` & `ccxt-4.2.91/ccxt/pro/p2b.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/phemex.py` & `ccxt-4.2.91/ccxt/pro/phemex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/poloniex.py` & `ccxt-4.2.91/ccxt/pro/poloniex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/poloniexfutures.py` & `ccxt-4.2.91/ccxt/pro/poloniexfutures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/probit.py` & `ccxt-4.2.91/ccxt/pro/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/upbit.py` & `ccxt-4.2.91/ccxt/pro/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/wazirx.py` & `ccxt-4.2.91/ccxt/pro/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/whitebit.py` & `ccxt-4.2.91/ccxt/pro/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/pro/woo.py` & `ccxt-4.2.91/ccxt/pro/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/probit.py` & `ccxt-4.2.91/ccxt/probit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/_version.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/_version.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/curves.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/curves.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/der.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/der.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/ecdsa.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/ecdsa.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/ellipticcurve.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/ellipticcurve.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/keys.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/keys.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/numbertheory.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/numbertheory.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/rfc6979.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/rfc6979.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ecdsa/util.py` & `ccxt-4.2.91/ccxt/static_dependencies/ecdsa/util.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/base.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/base.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/codec.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/codec.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/decoding.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/decoding.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/encoding.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/encoding.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/exceptions.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/exceptions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/grammar.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/grammar.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/registry.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/registry.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/tools/_strategies.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/tools/_strategies.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/abi/utils/numeric.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/abi/utils/numeric.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/encoding_and_hashing.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/encoding_and_hashing.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/encode_typed_data/helpers.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/encode_typed_data/helpers.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/account/messages.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/account/messages.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/_utils.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/_utils.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/hexbytes/main.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/hexbytes/main.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/evm.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/evm.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/typing/networks.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/typing/networks.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/abi.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/abi.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/address.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/address.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/applicators.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/applicators.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/conversions.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/conversions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/currency.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/currency.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/curried/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/curried/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/decorators.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/decorators.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/functional.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/functional.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/hexadecimal.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/hexadecimal.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/humanize.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/humanize.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/logging.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/logging.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/module_loading.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/module_loading.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/numeric.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/numeric.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/toolz.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/toolz.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/types.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/types.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/ethereum/utils/units.py` & `ccxt-4.2.91/ccxt/static_dependencies/ethereum/utils/units.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/keccak/keccak.py` & `ccxt-4.2.91/ccxt/static_dependencies/keccak/keccak.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/msgpack/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/msgpack/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/msgpack/exceptions.py` & `ccxt-4.2.91/ccxt/static_dependencies/msgpack/exceptions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/msgpack/ext.py` & `ccxt-4.2.91/ccxt/static_dependencies/msgpack/ext.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/msgpack/fallback.py` & `ccxt-4.2.91/ccxt/static_dependencies/msgpack/fallback.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/parsimonious/exceptions.py` & `ccxt-4.2.91/ccxt/static_dependencies/parsimonious/exceptions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/parsimonious/expressions.py` & `ccxt-4.2.91/ccxt/static_dependencies/parsimonious/expressions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/parsimonious/grammar.py` & `ccxt-4.2.91/ccxt/static_dependencies/parsimonious/grammar.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/parsimonious/nodes.py` & `ccxt-4.2.91/ccxt/static_dependencies/parsimonious/nodes.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/parsimonious/utils.py` & `ccxt-4.2.91/ccxt/static_dependencies/parsimonious/utils.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/_signatures.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/_signatures.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/_version.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/_version.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/compatibility.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/compatibility.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/__init__.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/curried/operator.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/curried/operator.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/dicttoolz.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/dicttoolz.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/functoolz.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/functoolz.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/itertoolz.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/itertoolz.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/static_dependencies/toolz/recipes.py` & `ccxt-4.2.91/ccxt/static_dependencies/toolz/recipes.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/__init__.py` & `ccxt-4.2.91/ccxt/test/base/__init__.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_account.py` & `ccxt-4.2.91/ccxt/test/base/test_account.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_balance.py` & `ccxt-4.2.91/ccxt/test/base/test_balance.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_borrow_interest.py` & `ccxt-4.2.91/ccxt/test/base/test_borrow_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_borrow_rate.py` & `ccxt-4.2.91/ccxt/test/base/test_borrow_rate.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_calculate_fee.py` & `ccxt-4.2.91/ccxt/test/base/test_calculate_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_crypto.py` & `ccxt-4.2.91/ccxt/test/base/test_crypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_currency.py` & `ccxt-4.2.91/ccxt/test/base/test_currency.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_datetime.py` & `ccxt-4.2.91/ccxt/test/base/test_datetime.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_decimal_to_precision.py` & `ccxt-4.2.91/ccxt/test/base/test_decimal_to_precision.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_deep_extend.py` & `ccxt-4.2.91/ccxt/test/base/test_deep_extend.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_deposit_withdrawal.py` & `ccxt-4.2.91/ccxt/test/base/test_deposit_withdrawal.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_exchange_datetime_functions.py` & `ccxt-4.2.91/ccxt/test/base/test_exchange_datetime_functions.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_funding_rate_history.py` & `ccxt-4.2.91/ccxt/test/base/test_funding_rate_history.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_last_price.py` & `ccxt-4.2.91/ccxt/test/base/test_last_price.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_ledger_entry.py` & `ccxt-4.2.91/ccxt/test/base/test_ledger_entry.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_ledger_item.py` & `ccxt-4.2.91/ccxt/test/base/test_ledger_item.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_leverage_tier.py` & `ccxt-4.2.91/ccxt/test/base/test_leverage_tier.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_margin_mode.py` & `ccxt-4.2.91/ccxt/test/base/test_margin_mode.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_margin_modification.py` & `ccxt-4.2.91/ccxt/test/base/test_margin_modification.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_market.py` & `ccxt-4.2.91/ccxt/test/base/test_market.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_number.py` & `ccxt-4.2.91/ccxt/test/base/test_number.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_ohlcv.py` & `ccxt-4.2.91/ccxt/test/base/test_ohlcv.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_open_interest.py` & `ccxt-4.2.91/ccxt/test/base/test_open_interest.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_order.py` & `ccxt-4.2.91/ccxt/test/base/test_order.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_order_book.py` & `ccxt-4.2.91/ccxt/test/base/test_order_book.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_position.py` & `ccxt-4.2.91/ccxt/test/base/test_position.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_shared_methods.py` & `ccxt-4.2.91/ccxt/test/base/test_shared_methods.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_status.py` & `ccxt-4.2.91/ccxt/test/base/test_status.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_throttle.py` & `ccxt-4.2.91/ccxt/test/base/test_throttle.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_ticker.py` & `ccxt-4.2.91/ccxt/test/base/test_ticker.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_trade.py` & `ccxt-4.2.91/ccxt/test/base/test_trade.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_trading_fee.py` & `ccxt-4.2.91/ccxt/test/base/test_trading_fee.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/base/test_transaction.py` & `ccxt-4.2.91/ccxt/test/base/test_transaction.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/test/test_async.py` & `ccxt-4.2.91/ccxt/test/test_async.py`

 * *Files 0% similar despite different names*

```diff
@@ -1231,15 +1231,15 @@
         #  -----------------------------------------------------------------------------
         await self.run_static_tests('response', exchange_name, test)
 
     async def run_broker_id_tests(self):
         #  -----------------------------------------------------------------------------
         #  --- Init of brokerId tests functions-----------------------------------------
         #  -----------------------------------------------------------------------------
-        promises = [self.test_binance(), self.test_okx(), self.test_cryptocom(), self.test_bybit(), self.test_kucoin(), self.test_kucoinfutures(), self.test_bitget(), self.test_mexc(), self.test_htx(), self.test_woo(), self.test_bitmart(), self.test_coinex(), self.test_bingx(), self.test_phemex(), self.test_blofin(), self.test_hyperliquid(), self.test_coinbaseinternational()]
+        promises = [self.test_binance(), self.test_okx(), self.test_cryptocom(), self.test_bybit(), self.test_kucoin(), self.test_kucoinfutures(), self.test_bitget(), self.test_mexc(), self.test_htx(), self.test_woo(), self.test_bitmart(), self.test_coinex(), self.test_bingx(), self.test_phemex(), self.test_blofin(), self.test_hyperliquid(), self.test_coinbaseinternational(), self.test_coinbase_advanced()]
         await asyncio.gather(*promises)
         success_message = '[' + self.lang + '][TEST_SUCCESS] brokerId tests passed.'
         dump('[INFO]' + success_message)
         exit_script(0)
 
     async def test_binance(self):
         exchange = self.init_offline_exchange('binance')
@@ -1530,14 +1530,28 @@
         except Exception as e:
             request = json_parse(exchange.last_request_body)
         client_order_id = request['client_order_id']
         assert client_order_id.startswith(str(id)), 'clientOrderId does not start with id'
         await close(exchange)
         return True
 
+    async def test_coinbase_advanced(self):
+        exchange = self.init_offline_exchange('coinbase')
+        id = 'ccxt'
+        assert exchange.options['brokerId'] == id, 'id not in options'
+        request = None
+        try:
+            await exchange.create_order('BTC/USDC', 'limit', 'buy', 1, 20000)
+        except Exception as e:
+            request = json_parse(exchange.last_request_body)
+        client_order_id = request['client_order_id']
+        assert client_order_id.startswith(str(id)), 'clientOrderId does not start with id'
+        await close(exchange)
+        return True
+
 # ***** AUTO-TRANSPILER-END *****
 # *******************************
 
 
 if __name__ == '__main__':
     symbol = argv.symbol if argv.symbol else None
     asyncio.run(testMainClass().init(argv.exchange, symbol))
```

### Comparing `ccxt-4.2.90/ccxt/test/test_sync.py` & `ccxt-4.2.91/ccxt/test/test_sync.py`

 * *Files 1% similar despite different names*

```diff
@@ -1230,15 +1230,15 @@
         #  -----------------------------------------------------------------------------
         self.run_static_tests('response', exchange_name, test)
 
     def run_broker_id_tests(self):
         #  -----------------------------------------------------------------------------
         #  --- Init of brokerId tests functions-----------------------------------------
         #  -----------------------------------------------------------------------------
-        promises = [self.test_binance(), self.test_okx(), self.test_cryptocom(), self.test_bybit(), self.test_kucoin(), self.test_kucoinfutures(), self.test_bitget(), self.test_mexc(), self.test_htx(), self.test_woo(), self.test_bitmart(), self.test_coinex(), self.test_bingx(), self.test_phemex(), self.test_blofin(), self.test_hyperliquid(), self.test_coinbaseinternational()]
+        promises = [self.test_binance(), self.test_okx(), self.test_cryptocom(), self.test_bybit(), self.test_kucoin(), self.test_kucoinfutures(), self.test_bitget(), self.test_mexc(), self.test_htx(), self.test_woo(), self.test_bitmart(), self.test_coinex(), self.test_bingx(), self.test_phemex(), self.test_blofin(), self.test_hyperliquid(), self.test_coinbaseinternational(), self.test_coinbase_advanced()]
         (promises)
         success_message = '[' + self.lang + '][TEST_SUCCESS] brokerId tests passed.'
         dump('[INFO]' + success_message)
         exit_script(0)
 
     def test_binance(self):
         exchange = self.init_offline_exchange('binance')
@@ -1529,14 +1529,28 @@
         except Exception as e:
             request = json_parse(exchange.last_request_body)
         client_order_id = request['client_order_id']
         assert client_order_id.startswith(str(id)), 'clientOrderId does not start with id'
         close(exchange)
         return True
 
+    def test_coinbase_advanced(self):
+        exchange = self.init_offline_exchange('coinbase')
+        id = 'ccxt'
+        assert exchange.options['brokerId'] == id, 'id not in options'
+        request = None
+        try:
+            exchange.create_order('BTC/USDC', 'limit', 'buy', 1, 20000)
+        except Exception as e:
+            request = json_parse(exchange.last_request_body)
+        client_order_id = request['client_order_id']
+        assert client_order_id.startswith(str(id)), 'clientOrderId does not start with id'
+        close(exchange)
+        return True
+
 # ***** AUTO-TRANSPILER-END *****
 # *******************************
 
 
 if __name__ == '__main__':
     symbol = argv.symbol if argv.symbol else None
     (testMainClass().init(argv.exchange, symbol))
```

### Comparing `ccxt-4.2.90/ccxt/timex.py` & `ccxt-4.2.91/ccxt/timex.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/tokocrypto.py` & `ccxt-4.2.91/ccxt/tokocrypto.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/tradeogre.py` & `ccxt-4.2.91/ccxt/tradeogre.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/upbit.py` & `ccxt-4.2.91/ccxt/upbit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/wavesexchange.py` & `ccxt-4.2.91/ccxt/wavesexchange.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/wazirx.py` & `ccxt-4.2.91/ccxt/wazirx.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/whitebit.py` & `ccxt-4.2.91/ccxt/whitebit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/woo.py` & `ccxt-4.2.91/ccxt/woo.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/yobit.py` & `ccxt-4.2.91/ccxt/yobit.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/zaif.py` & `ccxt-4.2.91/ccxt/zaif.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt/zonda.py` & `ccxt-4.2.91/ccxt/zonda.py`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/ccxt.egg-info/PKG-INFO` & `ccxt-4.2.91/ccxt.egg-info/PKG-INFO`

 * *Files 0% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: ccxt
-Version: 4.2.90
+Version: 4.2.91
 Summary: A JavaScript / TypeScript / Python / C# / PHP cryptocurrency trading library with support for 100+ exchanges
 Home-page: https://ccxt.com
 Author: Igor Kroitor
 Author-email: igor.kroitor@gmail.com
 License: MIT
 Project-URL: Homepage, https://ccxt.com
 Project-URL: Documentation, https://github.com/ccxt/ccxt/wiki
@@ -221,21 +221,21 @@
         console.log(version, Object.keys(exchanges));
         ```
         
         ### JavaScript (for use with the `<script>` tag):
         
         All-in-one browser bundle (dependencies included), served from a CDN of your choice:
         
-        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@4.2.90/dist/ccxt.browser.js
-        * unpkg: https://unpkg.com/ccxt@4.2.90/dist/ccxt.browser.js
+        * jsDelivr: https://cdn.jsdelivr.net/npm/ccxt@4.2.91/dist/ccxt.browser.js
+        * unpkg: https://unpkg.com/ccxt@4.2.91/dist/ccxt.browser.js
         
         CDNs are not updated in real-time and may have delays. Defaulting to the most recent version without specifying the version number is not recommended. Please, keep in mind that we are not responsible for the correct operation of those CDN servers.
         
         ```HTML
-        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@4.2.90/dist/ccxt.browser.js"></script>
+        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/ccxt@4.2.91/dist/ccxt.browser.js"></script>
         ```
         
         Creates a global `ccxt` object:
         
         ```JavaScript
         console.log (ccxt.exchanges) // print all available exchanges
         ```
```

### Comparing `ccxt-4.2.90/ccxt.egg-info/SOURCES.txt` & `ccxt-4.2.91/ccxt.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `ccxt-4.2.90/package.json` & `ccxt-4.2.91/package.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9772727272727273%*

 * *Differences: {"'version'": "'4.2.91'"}*

```diff
@@ -265,9 +265,9 @@
         "update-links": "node build/update-links",
         "validate-types": "node --loader ts-node/esm build/validate-types.ts",
         "vss": "node build/vss"
     },
     "type": "module",
     "types": "./js/ccxt.d.ts",
     "unpkg": "dist/ccxt.browser.js",
-    "version": "4.2.90"
+    "version": "4.2.91"
 }
```

### Comparing `ccxt-4.2.90/setup.py` & `ccxt-4.2.91/setup.py`

 * *Files identical despite different names*

